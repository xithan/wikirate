//script: jquery
/*! jQuery v1.11.2 | (c) 2005, 2014 jQuery Foundation, Inc. | jquery.org/license */
!function(e,t){"object"==typeof module&&"object"==typeof module.exports?module.exports=e.document?t(e,!0):function(e){if(!e.document)throw new Error("jQuery requires a window with a document");return t(e)}:t(e)}("undefined"!=typeof window?window:this,function(e,t){function n(e){var t=e.length,n=ie.type(e);return"function"!==n&&!ie.isWindow(e)&&(!(1!==e.nodeType||!t)||("array"===n||0===t||"number"==typeof t&&t>0&&t-1 in e))}function r(e,t,n){if(ie.isFunction(t))return ie.grep(e,function(e,r){return!!t.call(e,r,e)!==n});if(t.nodeType)return ie.grep(e,function(e){return e===t!==n});if("string"==typeof t){if(fe.test(t))return ie.filter(t,e,n);t=ie.filter(t,e)}return ie.grep(e,function(e){return ie.inArray(e,t)>=0!==n})}function i(e,t){do{e=e[t]}while(e&&1!==e.nodeType);return e}function o(e){var t=be[e]={};return ie.each(e.match(ye)||[],function(e,n){t[n]=!0}),t}function a(){he.addEventListener?(he.removeEventListener("DOMContentLoaded",s,!1),e.removeEventListener("load",s,!1)):(he.detachEvent("onreadystatechange",s),e.detachEvent("onload",s))}function s(){(he.addEventListener||"load"===event.type||"complete"===he.readyState)&&(a(),ie.ready())}function l(e,t,n){if(void 0===n&&1===e.nodeType){var r="data-"+t.replace(Ne,"-$1").toLowerCase();if("string"==typeof(n=e.getAttribute(r))){try{n="true"===n||"false"!==n&&("null"===n?null:+n+""===n?+n:Ce.test(n)?ie.parseJSON(n):n)}catch(e){}ie.data(e,t,n)}else n=void 0}return n}function u(e){var t;for(t in e)if(("data"!==t||!ie.isEmptyObject(e[t]))&&"toJSON"!==t)return!1;return!0}function c(e,t,n,r){if(ie.acceptData(e)){var i,o,a=ie.expando,s=e.nodeType,l=s?ie.cache:e,u=s?e[a]:e[a]&&a;if(u&&l[u]&&(r||l[u].data)||void 0!==n||"string"!=typeof t)return u||(u=s?e[a]=J.pop()||ie.guid++:a),l[u]||(l[u]=s?{}:{toJSON:ie.noop}),("object"==typeof t||"function"==typeof t)&&(r?l[u]=ie.extend(l[u],t):l[u].data=ie.extend(l[u].data,t)),o=l[u],r||(o.data||(o.data={}),o=o.data),void 0!==n&&(o[ie.camelCase(t)]=n),"string"==typeof t?null==(i=o[t])&&(i=o[ie.camelCase(t)]):i=o,i}}function d(e,t,n){if(ie.acceptData(e)){var r,i,o=e.nodeType,a=o?ie.cache:e,s=o?e[ie.expando]:ie.expando;if(a[s]){if(t&&(r=n?a[s]:a[s].data)){ie.isArray(t)?t=t.concat(ie.map(t,ie.camelCase)):t in r?t=[t]:(t=ie.camelCase(t),t=t in r?[t]:t.split(" ")),i=t.length;for(;i--;)delete r[t[i]];if(n?!u(r):!ie.isEmptyObject(r))return}(n||(delete a[s].data,u(a[s])))&&(o?ie.cleanData([e],!0):ne.deleteExpando||a!=a.window?delete a[s]:a[s]=null)}}}function f(){return!0}function p(){return!1}function h(){try{return he.activeElement}catch(e){}}function m(e){var t=Me.split("|"),n=e.createDocumentFragment();if(n.createElement)for(;t.length;)n.createElement(t.pop());return n}function g(e,t){var n,r,i=0,o=typeof e.getElementsByTagName!==Te?e.getElementsByTagName(t||"*"):typeof e.querySelectorAll!==Te?e.querySelectorAll(t||"*"):void 0;if(!o)for(o=[],n=e.childNodes||e;null!=(r=n[i]);i++)!t||ie.nodeName(r,t)?o.push(r):ie.merge(o,g(r,t));return void 0===t||t&&ie.nodeName(e,t)?ie.merge([e],o):o}function v(e){De.test(e.type)&&(e.defaultChecked=e.checked)}function y(e,t){return ie.nodeName(e,"table")&&ie.nodeName(11!==t.nodeType?t:t.firstChild,"tr")?e.getElementsByTagName("tbody")[0]||e.appendChild(e.ownerDocument.createElement("tbody")):e}function b(e){return e.type=(null!==ie.find.attr(e,"type"))+"/"+e.type,e}function x(e){var t=Ue.exec(e.type);return t?e.type=t[1]:e.removeAttribute("type"),e}function w(e,t){for(var n,r=0;null!=(n=e[r]);r++)ie._data(n,"globalEval",!t||ie._data(t[r],"globalEval"))}function T(e,t){if(1===t.nodeType&&ie.hasData(e)){var n,r,i,o=ie._data(e),a=ie._data(t,o),s=o.events;if(s){delete a.handle,a.events={};for(n in s)for(r=0,i=s[n].length;i>r;r++)ie.event.add(t,n,s[n][r])}a.data&&(a.data=ie.extend({},a.data))}}function C(e,t){var n,r,i;if(1===t.nodeType){if(n=t.nodeName.toLowerCase(),!ne.noCloneEvent&&t[ie.expando]){i=ie._data(t);for(r in i.events)ie.removeEvent(t,r,i.handle);t.removeAttribute(ie.expando)}"script"===n&&t.text!==e.text?(b(t).text=e.text,x(t)):"object"===n?(t.parentNode&&(t.outerHTML=e.outerHTML),ne.html5Clone&&e.innerHTML&&!ie.trim(t.innerHTML)&&(t.innerHTML=e.innerHTML)):"input"===n&&De.test(e.type)?(t.defaultChecked=t.checked=e.checked,t.value!==e.value&&(t.value=e.value)):"option"===n?t.defaultSelected=t.selected=e.defaultSelected:("input"===n||"textarea"===n)&&(t.defaultValue=e.defaultValue)}}function N(t,n){var r,i=ie(n.createElement(t)).appendTo(n.body),o=e.getDefaultComputedStyle&&(r=e.getDefaultComputedStyle(i[0]))?r.display:ie.css(i[0],"display");return i.detach(),o}function E(e){var t=he,n=Ke[e];return n||(n=N(e,t),"none"!==n&&n||(Qe=(Qe||ie("<iframe frameborder='0' width='0' height='0'/>")).appendTo(t.documentElement),t=(Qe[0].contentWindow||Qe[0].contentDocument).document,t.write(),t.close(),n=N(e,t),Qe.detach()),Ke[e]=n),n}function k(e,t){return{get:function(){var n=e();if(null!=n)return n?void delete this.get:(this.get=t).apply(this,arguments)}}}function S(e,t){if(t in e)return t;for(var n=t.charAt(0).toUpperCase()+t.slice(1),r=t,i=dt.length;i--;)if((t=dt[i]+n)in e)return t;return r}function A(e,t){for(var n,r,i,o=[],a=0,s=e.length;s>a;a++)r=e[a],r.style&&(o[a]=ie._data(r,"olddisplay"),n=r.style.display,t?(o[a]||"none"!==n||(r.style.display=""),""===r.style.display&&Se(r)&&(o[a]=ie._data(r,"olddisplay",E(r.nodeName)))):(i=Se(r),(n&&"none"!==n||!i)&&ie._data(r,"olddisplay",i?n:ie.css(r,"display"))));for(a=0;s>a;a++)r=e[a],r.style&&(t&&"none"!==r.style.display&&""!==r.style.display||(r.style.display=t?o[a]||"":"none"));return e}function D(e,t,n){var r=st.exec(t);return r?Math.max(0,r[1]-(n||0))+(r[2]||"px"):t}function j(e,t,n,r,i){for(var o=n===(r?"border":"content")?4:"width"===t?1:0,a=0;4>o;o+=2)"margin"===n&&(a+=ie.css(e,n+ke[o],!0,i)),r?("content"===n&&(a-=ie.css(e,"padding"+ke[o],!0,i)),"margin"!==n&&(a-=ie.css(e,"border"+ke[o]+"Width",!0,i))):(a+=ie.css(e,"padding"+ke[o],!0,i),"padding"!==n&&(a+=ie.css(e,"border"+ke[o]+"Width",!0,i)));return a}function L(e,t,n){var r=!0,i="width"===t?e.offsetWidth:e.offsetHeight,o=Ze(e),a=ne.boxSizing&&"border-box"===ie.css(e,"boxSizing",!1,o);if(0>=i||null==i){if(i=et(e,t,o),(0>i||null==i)&&(i=e.style[t]),nt.test(i))return i;r=a&&(ne.boxSizingReliable()||i===e.style[t]),i=parseFloat(i)||0}return i+j(e,t,n||(a?"border":"content"),r,o)+"px"}function H(e,t,n,r,i){return new H.prototype.init(e,t,n,r,i)}function q(){return setTimeout(function(){ft=void 0}),ft=ie.now()}function _(e,t){var n,r={height:e},i=0;for(t=t?1:0;4>i;i+=2-t)n=ke[i],r["margin"+n]=r["padding"+n]=e;return t&&(r.opacity=r.width=e),r}function M(e,t,n){for(var r,i=(yt[t]||[]).concat(yt["*"]),o=0,a=i.length;a>o;o++)if(r=i[o].call(n,t,e))return r}function F(e,t,n){var r,i,o,a,s,l,u,c=this,d={},f=e.style,p=e.nodeType&&Se(e),h=ie._data(e,"fxshow");n.queue||(s=ie._queueHooks(e,"fx"),null==s.unqueued&&(s.unqueued=0,l=s.empty.fire,s.empty.fire=function(){s.unqueued||l()}),s.unqueued++,c.always(function(){c.always(function(){s.unqueued--,ie.queue(e,"fx").length||s.empty.fire()})})),1===e.nodeType&&("height"in t||"width"in t)&&(n.overflow=[f.overflow,f.overflowX,f.overflowY],u=ie.css(e,"display"),"inline"===("none"===u?ie._data(e,"olddisplay")||E(e.nodeName):u)&&"none"===ie.css(e,"float")&&(ne.inlineBlockNeedsLayout&&"inline"!==E(e.nodeName)?f.zoom=1:f.display="inline-block")),n.overflow&&(f.overflow="hidden",ne.shrinkWrapBlocks()||c.always(function(){f.overflow=n.overflow[0],f.overflowX=n.overflow[1],f.overflowY=n.overflow[2]}));for(r in t)if(i=t[r],ht.exec(i)){if(delete t[r],o=o||"toggle"===i,i===(p?"hide":"show")){if("show"!==i||!h||void 0===h[r])continue;p=!0}d[r]=h&&h[r]||ie.style(e,r)}else u=void 0;if(ie.isEmptyObject(d))"inline"===("none"===u?E(e.nodeName):u)&&(f.display=u);else{h?"hidden"in h&&(p=h.hidden):h=ie._data(e,"fxshow",{}),o&&(h.hidden=!p),p?ie(e).show():c.done(function(){ie(e).hide()}),c.done(function(){var t;ie._removeData(e,"fxshow");for(t in d)ie.style(e,t,d[t])});for(r in d)a=M(p?h[r]:0,r,c),r in h||(h[r]=a.start,p&&(a.end=a.start,a.start="width"===r||"height"===r?1:0))}}function O(e,t){var n,r,i,o,a;for(n in e)if(r=ie.camelCase(n),i=t[r],o=e[n],ie.isArray(o)&&(i=o[1],o=e[n]=o[0]),n!==r&&(e[r]=o,delete e[n]),(a=ie.cssHooks[r])&&"expand"in a){o=a.expand(o),delete e[r];for(n in o)n in e||(e[n]=o[n],t[n]=i)}else t[r]=i}function B(e,t,n){var r,i,o=0,a=vt.length,s=ie.Deferred().always(function(){delete l.elem}),l=function(){if(i)return!1;for(var t=ft||q(),n=Math.max(0,u.startTime+u.duration-t),r=n/u.duration||0,o=1-r,a=0,l=u.tweens.length;l>a;a++)u.tweens[a].run(o);return s.notifyWith(e,[u,o,n]),1>o&&l?n:(s.resolveWith(e,[u]),!1)},u=s.promise({elem:e,props:ie.extend({},t),opts:ie.extend(!0,{specialEasing:{}},n),originalProperties:t,originalOptions:n,startTime:ft||q(),duration:n.duration,tweens:[],createTween:function(t,n){var r=ie.Tween(e,u.opts,t,n,u.opts.specialEasing[t]||u.opts.easing);return u.tweens.push(r),r},stop:function(t){var n=0,r=t?u.tweens.length:0;if(i)return this;for(i=!0;r>n;n++)u.tweens[n].run(1);return t?s.resolveWith(e,[u,t]):s.rejectWith(e,[u,t]),this}}),c=u.props;for(O(c,u.opts.specialEasing);a>o;o++)if(r=vt[o].call(u,e,c,u.opts))return r;return ie.map(c,M,u),ie.isFunction(u.opts.start)&&u.opts.start.call(e,u),ie.fx.timer(ie.extend(l,{elem:e,anim:u,queue:u.opts.queue})),u.progress(u.opts.progress).done(u.opts.done,u.opts.complete).fail(u.opts.fail).always(u.opts.always)}function P(e){return function(t,n){"string"!=typeof t&&(n=t,t="*");var r,i=0,o=t.toLowerCase().match(ye)||[];if(ie.isFunction(n))for(;r=o[i++];)"+"===r.charAt(0)?(r=r.slice(1)||"*",(e[r]=e[r]||[]).unshift(n)):(e[r]=e[r]||[]).push(n)}}function R(e,t,n,r){function i(s){var l;return o[s]=!0,ie.each(e[s]||[],function(e,s){var u=s(t,n,r);return"string"!=typeof u||a||o[u]?a?!(l=u):void 0:(t.dataTypes.unshift(u),i(u),!1)}),l}var o={},a=e===$t;return i(t.dataTypes[0])||!o["*"]&&i("*")}function W(e,t){var n,r,i=ie.ajaxSettings.flatOptions||{};for(r in t)void 0!==t[r]&&((i[r]?e:n||(n={}))[r]=t[r]);return n&&ie.extend(!0,e,n),e}function $(e,t,n){for(var r,i,o,a,s=e.contents,l=e.dataTypes;"*"===l[0];)l.shift(),void 0===i&&(i=e.mimeType||t.getResponseHeader("Content-Type"));if(i)for(a in s)if(s[a]&&s[a].test(i)){l.unshift(a);break}if(l[0]in n)o=l[0];else{for(a in n){if(!l[0]||e.converters[a+" "+l[0]]){o=a;break}r||(r=a)}o=o||r}return o?(o!==l[0]&&l.unshift(o),n[o]):void 0}function z(e,t,n,r){var i,o,a,s,l,u={},c=e.dataTypes.slice();if(c[1])for(a in e.converters)u[a.toLowerCase()]=e.converters[a];for(o=c.shift();o;)if(e.responseFields[o]&&(n[e.responseFields[o]]=t),!l&&r&&e.dataFilter&&(t=e.dataFilter(t,e.dataType)),l=o,o=c.shift())if("*"===o)o=l;else if("*"!==l&&l!==o){if(!(a=u[l+" "+o]||u["* "+o]))for(i in u)if(s=i.split(" "),s[1]===o&&(a=u[l+" "+s[0]]||u["* "+s[0]])){!0===a?a=u[i]:!0!==u[i]&&(o=s[0],c.unshift(s[1]));break}if(!0!==a)if(a&&e["throws"])t=a(t);else try{t=a(t)}catch(e){return{state:"parsererror",error:a?e:"No conversion from "+l+" to "+o}}}return{state:"success",data:t}}function I(e,t,n,r){var i;if(ie.isArray(t))ie.each(t,function(t,i){n||Xt.test(e)?r(e,i):I(e+"["+("object"==typeof i?t:"")+"]",i,n,r)});else if(n||"object"!==ie.type(t))r(e,t);else for(i in t)I(e+"["+i+"]",t[i],n,r)}function X(){try{return new e.XMLHttpRequest}catch(e){}}function U(){try{return new e.ActiveXObject("Microsoft.XMLHTTP")}catch(e){}}function V(e){return ie.isWindow(e)?e:9===e.nodeType&&(e.defaultView||e.parentWindow)}var J=[],Y=J.slice,G=J.concat,Q=J.push,K=J.indexOf,Z={},ee=Z.toString,te=Z.hasOwnProperty,ne={},re="1.11.2",ie=function(e,t){return new ie.fn.init(e,t)},oe=/^[\s\uFEFF\xA0]+|[\s\uFEFF\xA0]+$/g,ae=/^-ms-/,se=/-([\da-z])/gi,le=function(e,t){return t.toUpperCase()};ie.fn=ie.prototype={jquery:re,constructor:ie,selector:"",length:0,toArray:function(){return Y.call(this)},get:function(e){return null!=e?0>e?this[e+this.length]:this[e]:Y.call(this)},pushStack:function(e){var t=ie.merge(this.constructor(),e);return t.prevObject=this,t.context=this.context,t},each:function(e,t){return ie.each(this,e,t)},map:function(e){return this.pushStack(ie.map(this,function(t,n){return e.call(t,n,t)}))},slice:function(){return this.pushStack(Y.apply(this,arguments))},first:function(){return this.eq(0)},last:function(){return this.eq(-1)},eq:function(e){var t=this.length,n=+e+(0>e?t:0);return this.pushStack(n>=0&&t>n?[this[n]]:[])},end:function(){return this.prevObject||this.constructor(null)},push:Q,sort:J.sort,splice:J.splice},ie.extend=ie.fn.extend=function(){var e,t,n,r,i,o,a=arguments[0]||{},s=1,l=arguments.length,u=!1;for("boolean"==typeof a&&(u=a,a=arguments[s]||{},s++),"object"==typeof a||ie.isFunction(a)||(a={}),s===l&&(a=this,s--);l>s;s++)if(null!=(i=arguments[s]))for(r in i)e=a[r],n=i[r],a!==n&&(u&&n&&(ie.isPlainObject(n)||(t=ie.isArray(n)))?(t?(t=!1,o=e&&ie.isArray(e)?e:[]):o=e&&ie.isPlainObject(e)?e:{},a[r]=ie.extend(u,o,n)):void 0!==n&&(a[r]=n));return a},ie.extend({expando:"jQuery"+(re+Math.random()).replace(/\D/g,""),isReady:!0,error:function(e){throw new Error(e)},noop:function(){},isFunction:function(e){return"function"===ie.type(e)},isArray:Array.isArray||function(e){return"array"===ie.type(e)},isWindow:function(e){return null!=e&&e==e.window},isNumeric:function(e){return!ie.isArray(e)&&e-parseFloat(e)+1>=0},isEmptyObject:function(e){var t;for(t in e)return!1;return!0},isPlainObject:function(e){var t;if(!e||"object"!==ie.type(e)||e.nodeType||ie.isWindow(e))return!1;try{if(e.constructor&&!te.call(e,"constructor")&&!te.call(e.constructor.prototype,"isPrototypeOf"))return!1}catch(e){return!1}if(ne.ownLast)for(t in e)return te.call(e,t);for(t in e);return void 0===t||te.call(e,t)},type:function(e){return null==e?e+"":"object"==typeof e||"function"==typeof e?Z[ee.call(e)]||"object":typeof e},globalEval:function(t){t&&ie.trim(t)&&(e.execScript||function(t){e.eval.call(e,t)})(t)},camelCase:function(e){return e.replace(ae,"ms-").replace(se,le)},nodeName:function(e,t){return e.nodeName&&e.nodeName.toLowerCase()===t.toLowerCase()},each:function(e,t,r){var i=0,o=e.length,a=n(e);if(r){if(a)for(;o>i&&!1!==t.apply(e[i],r);i++);else for(i in e)if(!1===t.apply(e[i],r))break}else if(a)for(;o>i&&!1!==t.call(e[i],i,e[i]);i++);else for(i in e)if(!1===t.call(e[i],i,e[i]))break;return e},trim:function(e){return null==e?"":(e+"").replace(oe,"")},makeArray:function(e,t){var r=t||[];return null!=e&&(n(Object(e))?ie.merge(r,"string"==typeof e?[e]:e):Q.call(r,e)),r},inArray:function(e,t,n){var r;if(t){if(K)return K.call(t,e,n);for(r=t.length,n=n?0>n?Math.max(0,r+n):n:0;r>n;n++)if(n in t&&t[n]===e)return n}return-1},merge:function(e,t){for(var n=+t.length,r=0,i=e.length;n>r;)e[i++]=t[r++];if(n!==n)for(;void 0!==t[r];)e[i++]=t[r++];return e.length=i,e},grep:function(e,t,n){for(var r=[],i=0,o=e.length,a=!n;o>i;i++)!t(e[i],i)!==a&&r.push(e[i]);return r},map:function(e,t,r){var i,o=0,a=e.length,s=n(e),l=[];if(s)for(;a>o;o++)null!=(i=t(e[o],o,r))&&l.push(i);else for(o in e)null!=(i=t(e[o],o,r))&&l.push(i);return G.apply([],l)},guid:1,proxy:function(e,t){var n,r,i;return"string"==typeof t&&(i=e[t],t=e,e=i),ie.isFunction(e)?(n=Y.call(arguments,2),r=function(){return e.apply(t||this,n.concat(Y.call(arguments)))},r.guid=e.guid=e.guid||ie.guid++,r):void 0},now:function(){return+new Date},support:ne}),ie.each("Boolean Number String Function Array Date RegExp Object Error".split(" "),function(e,t){Z["[object "+t+"]"]=t.toLowerCase()});var ue=function(e){function t(e,t,n,r){var i,o,a,s,l,u,d,p,h,m;if((t?t.ownerDocument||t:R)!==H&&L(t),t=t||H,n=n||[],s=t.nodeType,"string"!=typeof e||!e||1!==s&&9!==s&&11!==s)return n;if(!r&&_){if(11!==s&&(i=ye.exec(e)))if(a=i[1]){if(9===s){if(!(o=t.getElementById(a))||!o.parentNode)return n;if(o.id===a)return n.push(o),n}else if(t.ownerDocument&&(o=t.ownerDocument.getElementById(a))&&B(t,o)&&o.id===a)return n.push(o),n}else{if(i[2])return K.apply(n,t.getElementsByTagName(e)),n;if((a=i[3])&&w.getElementsByClassName)return K.apply(n,t.getElementsByClassName(a)),n}if(w.qsa&&(!M||!M.test(e))){if(p=d=P,h=t,m=1!==s&&e,1===s&&"object"!==t.nodeName.toLowerCase()){for(u=E(e),(d=t.getAttribute("id"))?p=d.replace(xe,"\\$&"):t.setAttribute("id",p),p="[id='"+p+"'] ",l=u.length;l--;)u[l]=p+f(u[l]);h=be.test(e)&&c(t.parentNode)||t,m=u.join(",")}if(m)try{return K.apply(n,h.querySelectorAll(m)),n}catch(e){}finally{d||t.removeAttribute("id")}}}return S(e.replace(le,"$1"),t,n,r)}function n(){function e(n,r){return t.push(n+" ")>T.cacheLength&&delete e[t.shift()],e[n+" "]=r}var t=[];return e}function r(e){return e[P]=!0,e}function i(e){var t=H.createElement("div");try{return!!e(t)}catch(e){return!1}finally{t.parentNode&&t.parentNode.removeChild(t),t=null}}function o(e,t){for(var n=e.split("|"),r=e.length;r--;)T.attrHandle[n[r]]=t}function a(e,t){var n=t&&e,r=n&&1===e.nodeType&&1===t.nodeType&&(~t.sourceIndex||V)-(~e.sourceIndex||V);if(r)return r;if(n)for(;n=n.nextSibling;)if(n===t)return-1;return e?1:-1}function s(e){return function(t){return"input"===t.nodeName.toLowerCase()&&t.type===e}}function l(e){return function(t){var n=t.nodeName.toLowerCase();return("input"===n||"button"===n)&&t.type===e}}function u(e){return r(function(t){return t=+t,r(function(n,r){for(var i,o=e([],n.length,t),a=o.length;a--;)n[i=o[a]]&&(n[i]=!(r[i]=n[i]))})})}function c(e){return e&&"undefined"!=typeof e.getElementsByTagName&&e}function d(){}function f(e){for(var t=0,n=e.length,r="";n>t;t++)r+=e[t].value;return r}function p(e,t,n){var r=t.dir,i=n&&"parentNode"===r,o=$++;return t.first?function(t,n,o){for(;t=t[r];)if(1===t.nodeType||i)return e(t,n,o)}:function(t,n,a){var s,l,u=[W,o];if(a){for(;t=t[r];)if((1===t.nodeType||i)&&e(t,n,a))return!0}else for(;t=t[r];)if(1===t.nodeType||i){if(l=t[P]||(t[P]={}),(s=l[r])&&s[0]===W&&s[1]===o)return u[2]=s[2];if(l[r]=u,u[2]=e(t,n,a))return!0}}}function h(e){return e.length>1?function(t,n,r){for(var i=e.length;i--;)if(!e[i](t,n,r))return!1;return!0}:e[0]}function m(e,n,r){for(var i=0,o=n.length;o>i;i++)t(e,n[i],r);return r}function g(e,t,n,r,i){for(var o,a=[],s=0,l=e.length,u=null!=t;l>s;s++)(o=e[s])&&(!n||n(o,r,i))&&(a.push(o),u&&t.push(s));return a}function v(e,t,n,i,o,a){return i&&!i[P]&&(i=v(i)),o&&!o[P]&&(o=v(o,a)),r(function(r,a,s,l){var u,c,d,f=[],p=[],h=a.length,v=r||m(t||"*",s.nodeType?[s]:s,[]),y=!e||!r&&t?v:g(v,f,e,s,l),b=n?o||(r?e:h||i)?[]:a:y;if(n&&n(y,b,s,l),i)for(u=g(b,p),i(u,[],s,l),c=u.length;c--;)(d=u[c])&&(b[p[c]]=!(y[p[c]]=d));if(r){if(o||e){if(o){for(u=[],c=b.length;c--;)(d=b[c])&&u.push(y[c]=d);o(null,b=[],u,l)}for(c=b.length;c--;)(d=b[c])&&(u=o?ee(r,d):f[c])>-1&&(r[u]=!(a[u]=d))}}else b=g(b===a?b.splice(h,b.length):b),o?o(null,a,b,l):K.apply(a,b)})}function y(e){for(var t,n,r,i=e.length,o=T.relative[e[0].type],a=o||T.relative[" "],s=o?1:0,l=p(function(e){return e===t},a,!0),u=p(function(e){return ee(t,e)>-1},a,!0),c=[function(e,n,r){var i=!o&&(r||n!==A)||((t=n).nodeType?l(e,n,r):u(e,n,r));return t=null,i}];i>s;s++)if(n=T.relative[e[s].type])c=[p(h(c),n)];else{if(n=T.filter[e[s].type].apply(null,e[s].matches),n[P]){for(r=++s;i>r&&!T.relative[e[r].type];r++);return v(s>1&&h(c),s>1&&f(e.slice(0,s-1).concat({value:" "===e[s-2].type?"*":""})).replace(le,"$1"),n,r>s&&y(e.slice(s,r)),i>r&&y(e=e.slice(r)),i>r&&f(e))}c.push(n)}return h(c)}function b(e,n){var i=n.length>0,o=e.length>0,a=function(r,a,s,l,u){var c,d,f,p=0,h="0",m=r&&[],v=[],y=A,b=r||o&&T.find.TAG("*",u),x=W+=null==y?1:Math.random()||.1,w=b.length;for(u&&(A=a!==H&&a);h!==w&&null!=(c=b[h]);h++){if(o&&c){for(d=0;f=e[d++];)if(f(c,a,s)){l.push(c);break}u&&(W=x)}i&&((c=!f&&c)&&p--,r&&m.push(c))}if(p+=h,i&&h!==p){for(d=0;f=n[d++];)f(m,v,a,s);if(r){if(p>0)for(;h--;)m[h]||v[h]||(v[h]=G.call(l));v=g(v)}K.apply(l,v),u&&!r&&v.length>0&&p+n.length>1&&t.uniqueSort(l)}return u&&(W=x,A=y),m};return i?r(a):a}var x,w,T,C,N,E,k,S,A,D,j,L,H,q,_,M,F,O,B,P="sizzle"+1*new Date,R=e.document,W=0,$=0,z=n(),I=n(),X=n(),U=function(e,t){return e===t&&(j=!0),0},V=1<<31,J={}.hasOwnProperty,Y=[],G=Y.pop,Q=Y.push,K=Y.push,Z=Y.slice,ee=function(e,t){for(var n=0,r=e.length;r>n;n++)if(e[n]===t)return n;return-1},te="checked|selected|async|autofocus|autoplay|controls|defer|disabled|hidden|ismap|loop|multiple|open|readonly|required|scoped",ne="[\\x20\\t\\r\\n\\f]",re="(?:\\\\.|[\\w-]|[^\\x00-\\xa0])+",ie=re.replace("w","w#"),oe="\\["+ne+"*("+re+")(?:"+ne+"*([*^$|!~]?=)"+ne+"*(?:'((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\"|("+ie+"))|)"+ne+"*\\]",ae=":("+re+")(?:\\((('((?:\\\\.|[^\\\\'])*)'|\"((?:\\\\.|[^\\\\\"])*)\")|((?:\\\\.|[^\\\\()[\\]]|"+oe+")*)|.*)\\)|)",se=new RegExp(ne+"+","g"),le=new RegExp("^"+ne+"+|((?:^|[^\\\\])(?:\\\\.)*)"+ne+"+$","g"),ue=new RegExp("^"+ne+"*,"+ne+"*"),ce=new RegExp("^"+ne+"*([>+~]|"+ne+")"+ne+"*"),de=new RegExp("="+ne+"*([^\\]'\"]*?)"+ne+"*\\]","g"),fe=new RegExp(ae),pe=new RegExp("^"+ie+"$"),he={ID:new RegExp("^#("+re+")"),CLASS:new RegExp("^\\.("+re+")"),TAG:new RegExp("^("+re.replace("w","w*")+")"),ATTR:new RegExp("^"+oe),PSEUDO:new RegExp("^"+ae),CHILD:new RegExp("^:(only|first|last|nth|nth-last)-(child|of-type)(?:\\("+ne+"*(even|odd|(([+-]|)(\\d*)n|)"+ne+"*(?:([+-]|)"+ne+"*(\\d+)|))"+ne+"*\\)|)","i"),bool:new RegExp("^(?:"+te+")$","i"),needsContext:new RegExp("^"+ne+"*[>+~]|:(even|odd|eq|gt|lt|nth|first|last)(?:\\("+ne+"*((?:-\\d)?\\d*)"+ne+"*\\)|)(?=[^-]|$)","i")},me=/^(?:input|select|textarea|button)$/i,ge=/^h\d$/i,ve=/^[^{]+\{\s*\[native \w/,ye=/^(?:#([\w-]+)|(\w+)|\.([\w-]+))$/,be=/[+~]/,xe=/'|\\/g,we=new RegExp("\\\\([\\da-f]{1,6}"+ne+"?|("+ne+")|.)","ig"),Te=function(e,t,n){var r="0x"+t-65536;return r!==r||n?t:0>r?String.fromCharCode(r+65536):String.fromCharCode(r>>10|55296,1023&r|56320)},Ce=function(){L()};try{K.apply(Y=Z.call(R.childNodes),R.childNodes),Y[R.childNodes.length].nodeType}catch(e){K={apply:Y.length?function(e,t){Q.apply(e,Z.call(t))}:function(e,t){for(var n=e.length,r=0;e[n++]=t[r++];);e.length=n-1}}}w=t.support={},N=t.isXML=function(e){var t=e&&(e.ownerDocument||e).documentElement;return!!t&&"HTML"!==t.nodeName},L=t.setDocument=function(e){var t,n,r=e?e.ownerDocument||e:R;return r!==H&&9===r.nodeType&&r.documentElement?(H=r,q=r.documentElement,n=r.defaultView,n&&n!==n.top&&(n.addEventListener?n.addEventListener("unload",Ce,!1):n.attachEvent&&n.attachEvent("onunload",Ce)),_=!N(r),w.attributes=i(function(e){return e.className="i",!e.getAttribute("className")}),w.getElementsByTagName=i(function(e){return e.appendChild(r.createComment("")),!e.getElementsByTagName("*").length}),w.getElementsByClassName=ve.test(r.getElementsByClassName),w.getById=i(function(e){return q.appendChild(e).id=P,!r.getElementsByName||!r.getElementsByName(P).length}),w.getById?(T.find.ID=function(e,t){if("undefined"!=typeof t.getElementById&&_){var n=t.getElementById(e);return n&&n.parentNode?[n]:[]}},T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){return e.getAttribute("id")===t}}):(delete T.find.ID,T.filter.ID=function(e){var t=e.replace(we,Te);return function(e){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return n&&n.value===t}}),T.find.TAG=w.getElementsByTagName?function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e):w.qsa?t.querySelectorAll(e):void 0}:function(e,t){var n,r=[],i=0,o=t.getElementsByTagName(e);if("*"===e){for(;n=o[i++];)1===n.nodeType&&r.push(n);return r}return o},T.find.CLASS=w.getElementsByClassName&&function(e,t){return _?t.getElementsByClassName(e):void 0},F=[],M=[],(w.qsa=ve.test(r.querySelectorAll))&&(i(function(e){q.appendChild(e).innerHTML="<a id='"+P+"'></a><select id='"+P+"-\f]' msallowcapture=''><option selected=''></option></select>",e.querySelectorAll("[msallowcapture^='']").length&&M.push("[*^$]="+ne+"*(?:''|\"\")"),e.querySelectorAll("[selected]").length||M.push("\\["+ne+"*(?:value|"+te+")"),e.querySelectorAll("[id~="+P+"-]").length||M.push("~="),e.querySelectorAll(":checked").length||M.push(":checked"),e.querySelectorAll("a#"+P+"+*").length||M.push(".#.+[+~]")}),i(function(e){var t=r.createElement("input");t.setAttribute("type","hidden"),e.appendChild(t).setAttribute("name","D"),e.querySelectorAll("[name=d]").length&&M.push("name"+ne+"*[*^$|!~]?="),e.querySelectorAll(":enabled").length||M.push(":enabled",":disabled"),e.querySelectorAll("*,:x"),M.push(",.*:")})),(w.matchesSelector=ve.test(O=q.matches||q.webkitMatchesSelector||q.mozMatchesSelector||q.oMatchesSelector||q.msMatchesSelector))&&i(function(e){w.disconnectedMatch=O.call(e,"div"),O.call(e,"[s!='']:x"),F.push("!=",ae)}),M=M.length&&new RegExp(M.join("|")),F=F.length&&new RegExp(F.join("|")),t=ve.test(q.compareDocumentPosition),B=t||ve.test(q.contains)?function(e,t){var n=9===e.nodeType?e.documentElement:e,r=t&&t.parentNode;return e===r||!(!r||1!==r.nodeType||!(n.contains?n.contains(r):e.compareDocumentPosition&&16&e.compareDocumentPosition(r)))}:function(e,t){if(t)for(;t=t.parentNode;)if(t===e)return!0;return!1},U=t?function(e,t){if(e===t)return j=!0,0;var n=!e.compareDocumentPosition-!t.compareDocumentPosition;return n||(n=(e.ownerDocument||e)===(t.ownerDocument||t)?e.compareDocumentPosition(t):1,1&n||!w.sortDetached&&t.compareDocumentPosition(e)===n?e===r||e.ownerDocument===R&&B(R,e)?-1:t===r||t.ownerDocument===R&&B(R,t)?1:D?ee(D,e)-ee(D,t):0:4&n?-1:1)}:function(e,t){if(e===t)return j=!0,0;var n,i=0,o=e.parentNode,s=t.parentNode,l=[e],u=[t];if(!o||!s)return e===r?-1:t===r?1:o?-1:s?1:D?ee(D,e)-ee(D,t):0;if(o===s)return a(e,t);for(n=e;n=n.parentNode;)l.unshift(n);for(n=t;n=n.parentNode;)u.unshift(n);for(;l[i]===u[i];)i++;return i?a(l[i],u[i]):l[i]===R?-1:u[i]===R?1:0},r):H},t.matches=function(e,n){return t(e,null,null,n)},t.matchesSelector=function(e,n){if((e.ownerDocument||e)!==H&&L(e),n=n.replace(de,"='$1']"),!(!w.matchesSelector||!_||F&&F.test(n)||M&&M.test(n)))try{var r=O.call(e,n);if(r||w.disconnectedMatch||e.document&&11!==e.document.nodeType)return r}catch(e){}return t(n,H,null,[e]).length>0},t.contains=function(e,t){return(e.ownerDocument||e)!==H&&L(e),B(e,t)},t.attr=function(e,t){(e.ownerDocument||e)!==H&&L(e);var n=T.attrHandle[t.toLowerCase()],r=n&&J.call(T.attrHandle,t.toLowerCase())?n(e,t,!_):void 0;return void 0!==r?r:w.attributes||!_?e.getAttribute(t):(r=e.getAttributeNode(t))&&r.specified?r.value:null},t.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)},t.uniqueSort=function(e){var t,n=[],r=0,i=0;if(j=!w.detectDuplicates,D=!w.sortStable&&e.slice(0),e.sort(U),j){for(;t=e[i++];)t===e[i]&&(r=n.push(i));for(;r--;)e.splice(n[r],1)}return D=null,e},C=t.getText=function(e){var t,n="",r=0,i=e.nodeType;if(i){if(1===i||9===i||11===i){if("string"==typeof e.textContent)return e.textContent;for(e=e.firstChild;e;e=e.nextSibling)n+=C(e)}else if(3===i||4===i)return e.nodeValue}else for(;t=e[r++];)n+=C(t);return n},T=t.selectors={cacheLength:50,createPseudo:r,match:he,attrHandle:{},find:{},relative:{">":{dir:"parentNode",first:!0}," ":{dir:"parentNode"},"+":{dir:"previousSibling",first:!0},"~":{dir:"previousSibling"}},preFilter:{ATTR:function(e){return e[1]=e[1].replace(we,Te),e[3]=(e[3]||e[4]||e[5]||"").replace(we,Te),"~="===e[2]&&(e[3]=" "+e[3]+" "),e.slice(0,4)},CHILD:function(e){return e[1]=e[1].toLowerCase(),"nth"===e[1].slice(0,3)?(e[3]||t.error(e[0]),e[4]=+(e[4]?e[5]+(e[6]||1):2*("even"===e[3]||"odd"===e[3])),e[5]=+(e[7]+e[8]||"odd"===e[3])):e[3]&&t.error(e[0]),e},PSEUDO:function(e){var t,n=!e[6]&&e[2];return he.CHILD.test(e[0])?null:(e[3]?e[2]=e[4]||e[5]||"":n&&fe.test(n)&&(t=E(n,!0))&&(t=n.indexOf(")",n.length-t)-n.length)&&(e[0]=e[0].slice(0,t),e[2]=n.slice(0,t)),e.slice(0,3))}},filter:{TAG:function(e){var t=e.replace(we,Te).toLowerCase();return"*"===e?function(){return!0}:function(e){return e.nodeName&&e.nodeName.toLowerCase()===t}},CLASS:function(e){var t=z[e+" "];return t||(t=new RegExp("(^|"+ne+")"+e+"("+ne+"|$)"))&&z(e,function(e){return t.test("string"==typeof e.className&&e.className||"undefined"!=typeof e.getAttribute&&e.getAttribute("class")||"")})},ATTR:function(e,n,r){return function(i){var o=t.attr(i,e);return null==o?"!="===n:!n||(o+="","="===n?o===r:"!="===n?o!==r:"^="===n?r&&0===o.indexOf(r):"*="===n?r&&o.indexOf(r)>-1:"$="===n?r&&o.slice(-r.length)===r:"~="===n?(" "+o.replace(se," ")+" ").indexOf(r)>-1:"|="===n&&(o===r||o.slice(0,r.length+1)===r+"-"))}},CHILD:function(e,t,n,r,i){var o="nth"!==e.slice(0,3),a="last"!==e.slice(-4),s="of-type"===t;return 1===r&&0===i?function(e){return!!e.parentNode}:function(t,n,l){var u,c,d,f,p,h,m=o!==a?"nextSibling":"previousSibling",g=t.parentNode,v=s&&t.nodeName.toLowerCase(),y=!l&&!s;if(g){if(o){for(;m;){for(d=t;d=d[m];)if(s?d.nodeName.toLowerCase()===v:1===d.nodeType)return!1;h=m="only"===e&&!h&&"nextSibling"}return!0}if(h=[a?g.firstChild:g.lastChild],a&&y){for(c=g[P]||(g[P]={}),u=c[e]||[],p=u[0]===W&&u[1],f=u[0]===W&&u[2],d=p&&g.childNodes[p];d=++p&&d&&d[m]||(f=p=0)||h.pop();)if(1===d.nodeType&&++f&&d===t){c[e]=[W,p,f];break}}else if(y&&(u=(t[P]||(t[P]={}))[e])&&u[0]===W)f=u[1];else for(;(d=++p&&d&&d[m]||(f=p=0)||h.pop())&&((s?d.nodeName.toLowerCase()!==v:1!==d.nodeType)||!++f||(y&&((d[P]||(d[P]={}))[e]=[W,f]),d!==t)););return(f-=i)===r||f%r==0&&f/r>=0}}},PSEUDO:function(e,n){var i,o=T.pseudos[e]||T.setFilters[e.toLowerCase()]||t.error("unsupported pseudo: "+e);return o[P]?o(n):o.length>1?(i=[e,e,"",n],T.setFilters.hasOwnProperty(e.toLowerCase())?r(function(e,t){for(var r,i=o(e,n),a=i.length;a--;)r=ee(e,i[a]),e[r]=!(t[r]=i[a])}):function(e){return o(e,0,i)}):o}},pseudos:{not:r(function(e){var t=[],n=[],i=k(e.replace(le,"$1"));return i[P]?r(function(e,t,n,r){for(var o,a=i(e,null,r,[]),s=e.length;s--;)(o=a[s])&&(e[s]=!(t[s]=o))}):function(e,r,o){return t[0]=e,i(t,null,o,n),t[0]=null,!n.pop()}}),has:r(function(e){return function(n){return t(e,n).length>0}}),contains:r(function(e){return e=e.replace(we,Te),function(t){return(t.textContent||t.innerText||C(t)).indexOf(e)>-1}}),lang:r(function(e){return pe.test(e||"")||t.error("unsupported lang: "+e),e=e.replace(we,Te).toLowerCase(),function(t){var n;do{if(n=_?t.lang:t.getAttribute("xml:lang")||t.getAttribute("lang"))return(n=n.toLowerCase())===e||0===n.indexOf(e+"-")}while((t=t.parentNode)&&1===t.nodeType);return!1}}),target:function(t){var n=e.location&&e.location.hash;return n&&n.slice(1)===t.id},root:function(e){return e===q},focus:function(e){return e===H.activeElement&&(!H.hasFocus||H.hasFocus())&&!!(e.type||e.href||~e.tabIndex)},enabled:function(e){return!1===e.disabled},disabled:function(e){return!0===e.disabled},checked:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&!!e.checked||"option"===t&&!!e.selected},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},empty:function(e){for(e=e.firstChild;e;e=e.nextSibling)if(e.nodeType<6)return!1;return!0},parent:function(e){return!T.pseudos.empty(e)},header:function(e){return ge.test(e.nodeName)},input:function(e){return me.test(e.nodeName)},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},text:function(e){var t;return"input"===e.nodeName.toLowerCase()&&"text"===e.type&&(null==(t=e.getAttribute("type"))||"text"===t.toLowerCase())},first:u(function(){return[0]}),last:u(function(e,t){return[t-1]}),eq:u(function(e,t,n){return[0>n?n+t:n]}),even:u(function(e,t){for(var n=0;t>n;n+=2)e.push(n);return e}),odd:u(function(e,t){for(var n=1;t>n;n+=2)e.push(n);return e}),lt:u(function(e,t,n){for(var r=0>n?n+t:n;--r>=0;)e.push(r);return e}),gt:u(function(e,t,n){for(var r=0>n?n+t:n;++r<t;)e.push(r);return e})}},T.pseudos.nth=T.pseudos.eq;for(x in{radio:!0,checkbox:!0,file:!0,password:!0,image:!0})T.pseudos[x]=s(x);for(x in{submit:!0,reset:!0})T.pseudos[x]=l(x);return d.prototype=T.filters=T.pseudos,T.setFilters=new d,E=t.tokenize=function(e,n){var r,i,o,a,s,l,u,c=I[e+" "];if(c)return n?0:c.slice(0);for(s=e,l=[],u=T.preFilter;s;){(!r||(i=ue.exec(s)))&&(i&&(s=s.slice(i[0].length)||s),l.push(o=[])),r=!1,(i=ce.exec(s))&&(r=i.shift(),o.push({value:r,type:i[0].replace(le," ")}),s=s.slice(r.length));for(a in T.filter)!(i=he[a].exec(s))||u[a]&&!(i=u[a](i))||(r=i.shift(),o.push({value:r,type:a,matches:i}),s=s.slice(r.length));if(!r)break}return n?s.length:s?t.error(e):I(e,l).slice(0)},k=t.compile=function(e,t){var n,r=[],i=[],o=X[e+" "];if(!o){for(t||(t=E(e)),n=t.length;n--;)o=y(t[n]),o[P]?r.push(o):i.push(o);o=X(e,b(i,r)),o.selector=e}return o},S=t.select=function(e,t,n,r){var i,o,a,s,l,u="function"==typeof e&&e,d=!r&&E(e=u.selector||e);if(n=n||[],1===d.length){if(o=d[0]=d[0].slice(0),o.length>2&&"ID"===(a=o[0]).type&&w.getById&&9===t.nodeType&&_&&T.relative[o[1].type]){if(!(t=(T.find.ID(a.matches[0].replace(we,Te),t)||[])[0]))return n;u&&(t=t.parentNode),e=e.slice(o.shift().value.length)}for(i=he.needsContext.test(e)?0:o.length;i--&&(a=o[i],
!T.relative[s=a.type]);)if((l=T.find[s])&&(r=l(a.matches[0].replace(we,Te),be.test(o[0].type)&&c(t.parentNode)||t))){if(o.splice(i,1),!(e=r.length&&f(o)))return K.apply(n,r),n;break}}return(u||k(e,d))(r,t,!_,n,be.test(e)&&c(t.parentNode)||t),n},w.sortStable=P.split("").sort(U).join("")===P,w.detectDuplicates=!!j,L(),w.sortDetached=i(function(e){return 1&e.compareDocumentPosition(H.createElement("div"))}),i(function(e){return e.innerHTML="<a href='#'></a>","#"===e.firstChild.getAttribute("href")})||o("type|href|height|width",function(e,t,n){return n?void 0:e.getAttribute(t,"type"===t.toLowerCase()?1:2)}),w.attributes&&i(function(e){return e.innerHTML="<input/>",e.firstChild.setAttribute("value",""),""===e.firstChild.getAttribute("value")})||o("value",function(e,t,n){return n||"input"!==e.nodeName.toLowerCase()?void 0:e.defaultValue}),i(function(e){return null==e.getAttribute("disabled")})||o(te,function(e,t,n){var r;return n?void 0:!0===e[t]?t.toLowerCase():(r=e.getAttributeNode(t))&&r.specified?r.value:null}),t}(e);ie.find=ue,ie.expr=ue.selectors,ie.expr[":"]=ie.expr.pseudos,ie.unique=ue.uniqueSort,ie.text=ue.getText,ie.isXMLDoc=ue.isXML,ie.contains=ue.contains;var ce=ie.expr.match.needsContext,de=/^<(\w+)\s*\/?>(?:<\/\1>|)$/,fe=/^.[^:#\[\.,]*$/;ie.filter=function(e,t,n){var r=t[0];return n&&(e=":not("+e+")"),1===t.length&&1===r.nodeType?ie.find.matchesSelector(r,e)?[r]:[]:ie.find.matches(e,ie.grep(t,function(e){return 1===e.nodeType}))},ie.fn.extend({find:function(e){var t,n=[],r=this,i=r.length;if("string"!=typeof e)return this.pushStack(ie(e).filter(function(){for(t=0;i>t;t++)if(ie.contains(r[t],this))return!0}));for(t=0;i>t;t++)ie.find(e,r[t],n);return n=this.pushStack(i>1?ie.unique(n):n),n.selector=this.selector?this.selector+" "+e:e,n},filter:function(e){return this.pushStack(r(this,e||[],!1))},not:function(e){return this.pushStack(r(this,e||[],!0))},is:function(e){return!!r(this,"string"==typeof e&&ce.test(e)?ie(e):e||[],!1).length}});var pe,he=e.document,me=/^(?:\s*(<[\w\W]+>)[^>]*|#([\w-]*))$/;(ie.fn.init=function(e,t){var n,r;if(!e)return this;if("string"==typeof e){if(!(n="<"===e.charAt(0)&&">"===e.charAt(e.length-1)&&e.length>=3?[null,e,null]:me.exec(e))||!n[1]&&t)return!t||t.jquery?(t||pe).find(e):this.constructor(t).find(e);if(n[1]){if(t=t instanceof ie?t[0]:t,ie.merge(this,ie.parseHTML(n[1],t&&t.nodeType?t.ownerDocument||t:he,!0)),de.test(n[1])&&ie.isPlainObject(t))for(n in t)ie.isFunction(this[n])?this[n](t[n]):this.attr(n,t[n]);return this}if((r=he.getElementById(n[2]))&&r.parentNode){if(r.id!==n[2])return pe.find(e);this.length=1,this[0]=r}return this.context=he,this.selector=e,this}return e.nodeType?(this.context=this[0]=e,this.length=1,this):ie.isFunction(e)?"undefined"!=typeof pe.ready?pe.ready(e):e(ie):(void 0!==e.selector&&(this.selector=e.selector,this.context=e.context),ie.makeArray(e,this))}).prototype=ie.fn,pe=ie(he);var ge=/^(?:parents|prev(?:Until|All))/,ve={children:!0,contents:!0,next:!0,prev:!0};ie.extend({dir:function(e,t,n){for(var r=[],i=e[t];i&&9!==i.nodeType&&(void 0===n||1!==i.nodeType||!ie(i).is(n));)1===i.nodeType&&r.push(i),i=i[t];return r},sibling:function(e,t){for(var n=[];e;e=e.nextSibling)1===e.nodeType&&e!==t&&n.push(e);return n}}),ie.fn.extend({has:function(e){var t,n=ie(e,this),r=n.length;return this.filter(function(){for(t=0;r>t;t++)if(ie.contains(this,n[t]))return!0})},closest:function(e,t){for(var n,r=0,i=this.length,o=[],a=ce.test(e)||"string"!=typeof e?ie(e,t||this.context):0;i>r;r++)for(n=this[r];n&&n!==t;n=n.parentNode)if(n.nodeType<11&&(a?a.index(n)>-1:1===n.nodeType&&ie.find.matchesSelector(n,e))){o.push(n);break}return this.pushStack(o.length>1?ie.unique(o):o)},index:function(e){return e?"string"==typeof e?ie.inArray(this[0],ie(e)):ie.inArray(e.jquery?e[0]:e,this):this[0]&&this[0].parentNode?this.first().prevAll().length:-1},add:function(e,t){return this.pushStack(ie.unique(ie.merge(this.get(),ie(e,t))))},addBack:function(e){return this.add(null==e?this.prevObject:this.prevObject.filter(e))}}),ie.each({parent:function(e){var t=e.parentNode;return t&&11!==t.nodeType?t:null},parents:function(e){return ie.dir(e,"parentNode")},parentsUntil:function(e,t,n){return ie.dir(e,"parentNode",n)},next:function(e){return i(e,"nextSibling")},prev:function(e){return i(e,"previousSibling")},nextAll:function(e){return ie.dir(e,"nextSibling")},prevAll:function(e){return ie.dir(e,"previousSibling")},nextUntil:function(e,t,n){return ie.dir(e,"nextSibling",n)},prevUntil:function(e,t,n){return ie.dir(e,"previousSibling",n)},siblings:function(e){return ie.sibling((e.parentNode||{}).firstChild,e)},children:function(e){return ie.sibling(e.firstChild)},contents:function(e){return ie.nodeName(e,"iframe")?e.contentDocument||e.contentWindow.document:ie.merge([],e.childNodes)}},function(e,t){ie.fn[e]=function(n,r){var i=ie.map(this,t,n);return"Until"!==e.slice(-5)&&(r=n),r&&"string"==typeof r&&(i=ie.filter(r,i)),this.length>1&&(ve[e]||(i=ie.unique(i)),ge.test(e)&&(i=i.reverse())),this.pushStack(i)}});var ye=/\S+/g,be={};ie.Callbacks=function(e){e="string"==typeof e?be[e]||o(e):ie.extend({},e);var t,n,r,i,a,s,l=[],u=!e.once&&[],c=function(o){for(n=e.memory&&o,r=!0,a=s||0,s=0,i=l.length,t=!0;l&&i>a;a++)if(!1===l[a].apply(o[0],o[1])&&e.stopOnFalse){n=!1;break}t=!1,l&&(u?u.length&&c(u.shift()):n?l=[]:d.disable())},d={add:function(){if(l){var r=l.length;!function t(n){ie.each(n,function(n,r){var i=ie.type(r);"function"===i?e.unique&&d.has(r)||l.push(r):r&&r.length&&"string"!==i&&t(r)})}(arguments),t?i=l.length:n&&(s=r,c(n))}return this},remove:function(){return l&&ie.each(arguments,function(e,n){for(var r;(r=ie.inArray(n,l,r))>-1;)l.splice(r,1),t&&(i>=r&&i--,a>=r&&a--)}),this},has:function(e){return e?ie.inArray(e,l)>-1:!(!l||!l.length)},empty:function(){return l=[],i=0,this},disable:function(){return l=u=n=void 0,this},disabled:function(){return!l},lock:function(){return u=void 0,n||d.disable(),this},locked:function(){return!u},fireWith:function(e,n){return!l||r&&!u||(n=n||[],n=[e,n.slice?n.slice():n],t?u.push(n):c(n)),this},fire:function(){return d.fireWith(this,arguments),this},fired:function(){return!!r}};return d},ie.extend({Deferred:function(e){var t=[["resolve","done",ie.Callbacks("once memory"),"resolved"],["reject","fail",ie.Callbacks("once memory"),"rejected"],["notify","progress",ie.Callbacks("memory")]],n="pending",r={state:function(){return n},always:function(){return i.done(arguments).fail(arguments),this},then:function(){var e=arguments;return ie.Deferred(function(n){ie.each(t,function(t,o){var a=ie.isFunction(e[t])&&e[t];i[o[1]](function(){var e=a&&a.apply(this,arguments);e&&ie.isFunction(e.promise)?e.promise().done(n.resolve).fail(n.reject).progress(n.notify):n[o[0]+"With"](this===r?n.promise():this,a?[e]:arguments)})}),e=null}).promise()},promise:function(e){return null!=e?ie.extend(e,r):r}},i={};return r.pipe=r.then,ie.each(t,function(e,o){var a=o[2],s=o[3];r[o[1]]=a.add,s&&a.add(function(){n=s},t[1^e][2].disable,t[2][2].lock),i[o[0]]=function(){return i[o[0]+"With"](this===i?r:this,arguments),this},i[o[0]+"With"]=a.fireWith}),r.promise(i),e&&e.call(i,i),i},when:function(e){var t,n,r,i=0,o=Y.call(arguments),a=o.length,s=1!==a||e&&ie.isFunction(e.promise)?a:0,l=1===s?e:ie.Deferred(),u=function(e,n,r){return function(i){n[e]=this,r[e]=arguments.length>1?Y.call(arguments):i,r===t?l.notifyWith(n,r):--s||l.resolveWith(n,r)}};if(a>1)for(t=new Array(a),n=new Array(a),r=new Array(a);a>i;i++)o[i]&&ie.isFunction(o[i].promise)?o[i].promise().done(u(i,r,o)).fail(l.reject).progress(u(i,n,t)):--s;return s||l.resolveWith(r,o),l.promise()}});var xe;ie.fn.ready=function(e){return ie.ready.promise().done(e),this},ie.extend({isReady:!1,readyWait:1,holdReady:function(e){e?ie.readyWait++:ie.ready(!0)},ready:function(e){if(!0===e?!--ie.readyWait:!ie.isReady){if(!he.body)return setTimeout(ie.ready);ie.isReady=!0,!0!==e&&--ie.readyWait>0||(xe.resolveWith(he,[ie]),ie.fn.triggerHandler&&(ie(he).triggerHandler("ready"),ie(he).off("ready")))}}}),ie.ready.promise=function(t){if(!xe)if(xe=ie.Deferred(),"complete"===he.readyState)setTimeout(ie.ready);else if(he.addEventListener)he.addEventListener("DOMContentLoaded",s,!1),e.addEventListener("load",s,!1);else{he.attachEvent("onreadystatechange",s),e.attachEvent("onload",s);var n=!1;try{n=null==e.frameElement&&he.documentElement}catch(e){}n&&n.doScroll&&function e(){if(!ie.isReady){try{n.doScroll("left")}catch(t){return setTimeout(e,50)}a(),ie.ready()}}()}return xe.promise(t)};var we,Te="undefined";for(we in ie(ne))break;ne.ownLast="0"!==we,ne.inlineBlockNeedsLayout=!1,ie(function(){var e,t,n,r;(n=he.getElementsByTagName("body")[0])&&n.style&&(t=he.createElement("div"),r=he.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Te&&(t.style.cssText="display:inline;margin:0;border:0;padding:1px;width:1px;zoom:1",ne.inlineBlockNeedsLayout=e=3===t.offsetWidth,e&&(n.style.zoom=1)),n.removeChild(r))}),function(){var e=he.createElement("div");if(null==ne.deleteExpando){ne.deleteExpando=!0;try{delete e.test}catch(e){ne.deleteExpando=!1}}e=null}(),ie.acceptData=function(e){var t=ie.noData[(e.nodeName+" ").toLowerCase()],n=+e.nodeType||1;return(1===n||9===n)&&(!t||!0!==t&&e.getAttribute("classid")===t)};var Ce=/^(?:\{[\w\W]*\}|\[[\w\W]*\])$/,Ne=/([A-Z])/g;ie.extend({cache:{},noData:{"applet ":!0,"embed ":!0,"object ":"clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"},hasData:function(e){return!!(e=e.nodeType?ie.cache[e[ie.expando]]:e[ie.expando])&&!u(e)},data:function(e,t,n){return c(e,t,n)},removeData:function(e,t){return d(e,t)},_data:function(e,t,n){return c(e,t,n,!0)},_removeData:function(e,t){return d(e,t,!0)}}),ie.fn.extend({data:function(e,t){var n,r,i,o=this[0],a=o&&o.attributes;if(void 0===e){if(this.length&&(i=ie.data(o),1===o.nodeType&&!ie._data(o,"parsedAttrs"))){for(n=a.length;n--;)a[n]&&(r=a[n].name,0===r.indexOf("data-")&&(r=ie.camelCase(r.slice(5)),l(o,r,i[r])));ie._data(o,"parsedAttrs",!0)}return i}return"object"==typeof e?this.each(function(){ie.data(this,e)}):arguments.length>1?this.each(function(){ie.data(this,e,t)}):o?l(o,e,ie.data(o,e)):void 0},removeData:function(e){return this.each(function(){ie.removeData(this,e)})}}),ie.extend({queue:function(e,t,n){var r;return e?(t=(t||"fx")+"queue",r=ie._data(e,t),n&&(!r||ie.isArray(n)?r=ie._data(e,t,ie.makeArray(n)):r.push(n)),r||[]):void 0},dequeue:function(e,t){t=t||"fx";var n=ie.queue(e,t),r=n.length,i=n.shift(),o=ie._queueHooks(e,t),a=function(){ie.dequeue(e,t)};"inprogress"===i&&(i=n.shift(),r--),i&&("fx"===t&&n.unshift("inprogress"),delete o.stop,i.call(e,a,o)),!r&&o&&o.empty.fire()},_queueHooks:function(e,t){var n=t+"queueHooks";return ie._data(e,n)||ie._data(e,n,{empty:ie.Callbacks("once memory").add(function(){ie._removeData(e,t+"queue"),ie._removeData(e,n)})})}}),ie.fn.extend({queue:function(e,t){var n=2;return"string"!=typeof e&&(t=e,e="fx",n--),arguments.length<n?ie.queue(this[0],e):void 0===t?this:this.each(function(){var n=ie.queue(this,e,t);ie._queueHooks(this,e),"fx"===e&&"inprogress"!==n[0]&&ie.dequeue(this,e)})},dequeue:function(e){return this.each(function(){ie.dequeue(this,e)})},clearQueue:function(e){return this.queue(e||"fx",[])},promise:function(e,t){var n,r=1,i=ie.Deferred(),o=this,a=this.length,s=function(){--r||i.resolveWith(o,[o])};for("string"!=typeof e&&(t=e,e=void 0),e=e||"fx";a--;)(n=ie._data(o[a],e+"queueHooks"))&&n.empty&&(r++,n.empty.add(s));return s(),i.promise(t)}});var Ee=/[+-]?(?:\d*\.|)\d+(?:[eE][+-]?\d+|)/.source,ke=["Top","Right","Bottom","Left"],Se=function(e,t){return e=t||e,"none"===ie.css(e,"display")||!ie.contains(e.ownerDocument,e)},Ae=ie.access=function(e,t,n,r,i,o,a){var s=0,l=e.length,u=null==n;if("object"===ie.type(n)){i=!0;for(s in n)ie.access(e,t,s,n[s],!0,o,a)}else if(void 0!==r&&(i=!0,ie.isFunction(r)||(a=!0),u&&(a?(t.call(e,r),t=null):(u=t,t=function(e,t,n){return u.call(ie(e),n)})),t))for(;l>s;s++)t(e[s],n,a?r:r.call(e[s],s,t(e[s],n)));return i?e:u?t.call(e):l?t(e[0],n):o},De=/^(?:checkbox|radio)$/i;!function(){var e=he.createElement("input"),t=he.createElement("div"),n=he.createDocumentFragment();if(t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",ne.leadingWhitespace=3===t.firstChild.nodeType,ne.tbody=!t.getElementsByTagName("tbody").length,ne.htmlSerialize=!!t.getElementsByTagName("link").length,ne.html5Clone="<:nav></:nav>"!==he.createElement("nav").cloneNode(!0).outerHTML,e.type="checkbox",e.checked=!0,n.appendChild(e),ne.appendChecked=e.checked,t.innerHTML="<textarea>x</textarea>",ne.noCloneChecked=!!t.cloneNode(!0).lastChild.defaultValue,n.appendChild(t),t.innerHTML="<input type='radio' checked='checked' name='t'/>",ne.checkClone=t.cloneNode(!0).cloneNode(!0).lastChild.checked,ne.noCloneEvent=!0,t.attachEvent&&(t.attachEvent("onclick",function(){ne.noCloneEvent=!1}),t.cloneNode(!0).click()),null==ne.deleteExpando){ne.deleteExpando=!0;try{delete t.test}catch(e){ne.deleteExpando=!1}}}(),function(){var t,n,r=he.createElement("div");for(t in{submit:!0,change:!0,focusin:!0})n="on"+t,(ne[t+"Bubbles"]=n in e)||(r.setAttribute(n,"t"),ne[t+"Bubbles"]=!1===r.attributes[n].expando);r=null}();var je=/^(?:input|select|textarea)$/i,Le=/^key/,He=/^(?:mouse|pointer|contextmenu)|click/,qe=/^(?:focusinfocus|focusoutblur)$/,_e=/^([^.]*)(?:\.(.+)|)$/;ie.event={global:{},add:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,m,g=ie._data(e);if(g){for(n.handler&&(l=n,n=l.handler,i=l.selector),n.guid||(n.guid=ie.guid++),(a=g.events)||(a=g.events={}),(c=g.handle)||(c=g.handle=function(e){return typeof ie===Te||e&&ie.event.triggered===e.type?void 0:ie.event.dispatch.apply(c.elem,arguments)},c.elem=e),t=(t||"").match(ye)||[""],s=t.length;s--;)o=_e.exec(t[s])||[],p=m=o[1],h=(o[2]||"").split(".").sort(),p&&(u=ie.event.special[p]||{},p=(i?u.delegateType:u.bindType)||p,u=ie.event.special[p]||{},d=ie.extend({type:p,origType:m,data:r,handler:n,guid:n.guid,selector:i,needsContext:i&&ie.expr.match.needsContext.test(i),namespace:h.join(".")},l),(f=a[p])||(f=a[p]=[],f.delegateCount=0,u.setup&&!1!==u.setup.call(e,r,h,c)||(e.addEventListener?e.addEventListener(p,c,!1):e.attachEvent&&e.attachEvent("on"+p,c))),u.add&&(u.add.call(e,d),d.handler.guid||(d.handler.guid=n.guid)),i?f.splice(f.delegateCount++,0,d):f.push(d),ie.event.global[p]=!0);e=null}},remove:function(e,t,n,r,i){var o,a,s,l,u,c,d,f,p,h,m,g=ie.hasData(e)&&ie._data(e);if(g&&(c=g.events)){for(t=(t||"").match(ye)||[""],u=t.length;u--;)if(s=_e.exec(t[u])||[],p=m=s[1],h=(s[2]||"").split(".").sort(),p){for(d=ie.event.special[p]||{},p=(r?d.delegateType:d.bindType)||p,f=c[p]||[],s=s[2]&&new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"),l=o=f.length;o--;)a=f[o],!i&&m!==a.origType||n&&n.guid!==a.guid||s&&!s.test(a.namespace)||r&&r!==a.selector&&("**"!==r||!a.selector)||(f.splice(o,1),a.selector&&f.delegateCount--,d.remove&&d.remove.call(e,a));l&&!f.length&&(d.teardown&&!1!==d.teardown.call(e,h,g.handle)||ie.removeEvent(e,p,g.handle),delete c[p])}else for(p in c)ie.event.remove(e,p+t[u],n,r,!0);ie.isEmptyObject(c)&&(delete g.handle,ie._removeData(e,"events"))}},trigger:function(t,n,r,i){var o,a,s,l,u,c,d,f=[r||he],p=te.call(t,"type")?t.type:t,h=te.call(t,"namespace")?t.namespace.split("."):[];if(s=c=r=r||he,3!==r.nodeType&&8!==r.nodeType&&!qe.test(p+ie.event.triggered)&&(p.indexOf(".")>=0&&(h=p.split("."),p=h.shift(),h.sort()),a=p.indexOf(":")<0&&"on"+p,t=t[ie.expando]?t:new ie.Event(p,"object"==typeof t&&t),t.isTrigger=i?2:3,t.namespace=h.join("."),t.namespace_re=t.namespace?new RegExp("(^|\\.)"+h.join("\\.(?:.*\\.|)")+"(\\.|$)"):null,t.result=void 0,t.target||(t.target=r),n=null==n?[t]:ie.makeArray(n,[t]),u=ie.event.special[p]||{},i||!u.trigger||!1!==u.trigger.apply(r,n))){if(!i&&!u.noBubble&&!ie.isWindow(r)){for(l=u.delegateType||p,qe.test(l+p)||(s=s.parentNode);s;s=s.parentNode)f.push(s),c=s;c===(r.ownerDocument||he)&&f.push(c.defaultView||c.parentWindow||e)}for(d=0;(s=f[d++])&&!t.isPropagationStopped();)t.type=d>1?l:u.bindType||p,o=(ie._data(s,"events")||{})[t.type]&&ie._data(s,"handle"),o&&o.apply(s,n),(o=a&&s[a])&&o.apply&&ie.acceptData(s)&&(t.result=o.apply(s,n),!1===t.result&&t.preventDefault());if(t.type=p,!i&&!t.isDefaultPrevented()&&(!u._default||!1===u._default.apply(f.pop(),n))&&ie.acceptData(r)&&a&&r[p]&&!ie.isWindow(r)){c=r[a],c&&(r[a]=null),ie.event.triggered=p;try{r[p]()}catch(e){}ie.event.triggered=void 0,c&&(r[a]=c)}return t.result}},dispatch:function(e){e=ie.event.fix(e);var t,n,r,i,o,a=[],s=Y.call(arguments),l=(ie._data(this,"events")||{})[e.type]||[],u=ie.event.special[e.type]||{};if(s[0]=e,e.delegateTarget=this,!u.preDispatch||!1!==u.preDispatch.call(this,e)){for(a=ie.event.handlers.call(this,e,l),t=0;(i=a[t++])&&!e.isPropagationStopped();)for(e.currentTarget=i.elem,o=0;(r=i.handlers[o++])&&!e.isImmediatePropagationStopped();)(!e.namespace_re||e.namespace_re.test(r.namespace))&&(e.handleObj=r,e.data=r.data,void 0!==(n=((ie.event.special[r.origType]||{}).handle||r.handler).apply(i.elem,s))&&!1===(e.result=n)&&(e.preventDefault(),e.stopPropagation()));return u.postDispatch&&u.postDispatch.call(this,e),e.result}},handlers:function(e,t){var n,r,i,o,a=[],s=t.delegateCount,l=e.target;if(s&&l.nodeType&&(!e.button||"click"!==e.type))for(;l!=this;l=l.parentNode||this)if(1===l.nodeType&&(!0!==l.disabled||"click"!==e.type)){for(i=[],o=0;s>o;o++)r=t[o],n=r.selector+" ",void 0===i[n]&&(i[n]=r.needsContext?ie(n,this).index(l)>=0:ie.find(n,this,null,[l]).length),i[n]&&i.push(r);i.length&&a.push({elem:l,handlers:i})}return s<t.length&&a.push({elem:this,handlers:t.slice(s)}),a},fix:function(e){if(e[ie.expando])return e;var t,n,r,i=e.type,o=e,a=this.fixHooks[i];for(a||(this.fixHooks[i]=a=He.test(i)?this.mouseHooks:Le.test(i)?this.keyHooks:{}),r=a.props?this.props.concat(a.props):this.props,e=new ie.Event(o),t=r.length;t--;)n=r[t],e[n]=o[n];return e.target||(e.target=o.srcElement||he),3===e.target.nodeType&&(e.target=e.target.parentNode),e.metaKey=!!e.metaKey,a.filter?a.filter(e,o):e},props:"altKey bubbles cancelable ctrlKey currentTarget eventPhase metaKey relatedTarget shiftKey target timeStamp view which".split(" "),fixHooks:{},keyHooks:{props:"char charCode key keyCode".split(" "),filter:function(e,t){return null==e.which&&(e.which=null!=t.charCode?t.charCode:t.keyCode),e}},mouseHooks:{props:"button buttons clientX clientY fromElement offsetX offsetY pageX pageY screenX screenY toElement".split(" "),filter:function(e,t){var n,r,i,o=t.button,a=t.fromElement;return null==e.pageX&&null!=t.clientX&&(r=e.target.ownerDocument||he,i=r.documentElement,n=r.body,e.pageX=t.clientX+(i&&i.scrollLeft||n&&n.scrollLeft||0)-(i&&i.clientLeft||n&&n.clientLeft||0),e.pageY=t.clientY+(i&&i.scrollTop||n&&n.scrollTop||0)-(i&&i.clientTop||n&&n.clientTop||0)),!e.relatedTarget&&a&&(e.relatedTarget=a===e.target?t.toElement:a),e.which||void 0===o||(e.which=1&o?1:2&o?3:4&o?2:0),e}},special:{load:{noBubble:!0},focus:{trigger:function(){if(this!==h()&&this.focus)try{return this.focus(),!1}catch(e){}},delegateType:"focusin"},blur:{trigger:function(){return this===h()&&this.blur?(this.blur(),!1):void 0},delegateType:"focusout"},click:{trigger:function(){return ie.nodeName(this,"input")&&"checkbox"===this.type&&this.click?(this.click(),!1):void 0},_default:function(e){return ie.nodeName(e.target,"a")}},beforeunload:{postDispatch:function(e){void 0!==e.result&&e.originalEvent&&(e.originalEvent.returnValue=e.result)}}},simulate:function(e,t,n,r){var i=ie.extend(new ie.Event,n,{type:e,isSimulated:!0,originalEvent:{}});r?ie.event.trigger(i,null,t):ie.event.dispatch.call(t,i),i.isDefaultPrevented()&&n.preventDefault()}},ie.removeEvent=he.removeEventListener?function(e,t,n){e.removeEventListener&&e.removeEventListener(t,n,!1)}:function(e,t,n){var r="on"+t;e.detachEvent&&(typeof e[r]===Te&&(e[r]=null),e.detachEvent(r,n))},ie.Event=function(e,t){return this instanceof ie.Event?(e&&e.type?(this.originalEvent=e,this.type=e.type,this.isDefaultPrevented=e.defaultPrevented||void 0===e.defaultPrevented&&!1===e.returnValue?f:p):this.type=e,t&&ie.extend(this,t),this.timeStamp=e&&e.timeStamp||ie.now(),void(this[ie.expando]=!0)):new ie.Event(e,t)},ie.Event.prototype={isDefaultPrevented:p,isPropagationStopped:p,isImmediatePropagationStopped:p,preventDefault:function(){var e=this.originalEvent;this.isDefaultPrevented=f,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},stopPropagation:function(){var e=this.originalEvent;this.isPropagationStopped=f,e&&(e.stopPropagation&&e.stopPropagation(),e.cancelBubble=!0)},stopImmediatePropagation:function(){var e=this.originalEvent;this.isImmediatePropagationStopped=f,e&&e.stopImmediatePropagation&&e.stopImmediatePropagation(),this.stopPropagation()}},ie.each({mouseenter:"mouseover",mouseleave:"mouseout",pointerenter:"pointerover",pointerleave:"pointerout"},function(e,t){ie.event.special[e]={delegateType:t,bindType:t,handle:function(e){var n,r=this,i=e.relatedTarget,o=e.handleObj;return(!i||i!==r&&!ie.contains(r,i))&&(e.type=o.origType,n=o.handler.apply(this,arguments),e.type=t),n}}}),ne.submitBubbles||(ie.event.special.submit={setup:function(){return!ie.nodeName(this,"form")&&void ie.event.add(this,"click._submit keypress._submit",function(e){var t=e.target,n=ie.nodeName(t,"input")||ie.nodeName(t,"button")?t.form:void 0;n&&!ie._data(n,"submitBubbles")&&(ie.event.add(n,"submit._submit",function(e){e._submit_bubble=!0}),ie._data(n,"submitBubbles",!0))})},postDispatch:function(e){e._submit_bubble&&(delete e._submit_bubble,this.parentNode&&!e.isTrigger&&ie.event.simulate("submit",this.parentNode,e,!0))},teardown:function(){return!ie.nodeName(this,"form")&&void ie.event.remove(this,"._submit")}}),ne.changeBubbles||(ie.event.special.change={setup:function(){return je.test(this.nodeName)?(("checkbox"===this.type||"radio"===this.type)&&(ie.event.add(this,"propertychange._change",function(e){"checked"===e.originalEvent.propertyName&&(this._just_changed=!0)}),ie.event.add(this,"click._change",function(e){this._just_changed&&!e.isTrigger&&(this._just_changed=!1),ie.event.simulate("change",this,e,!0)})),!1):void ie.event.add(this,"beforeactivate._change",function(e){var t=e.target;je.test(t.nodeName)&&!ie._data(t,"changeBubbles")&&(ie.event.add(t,"change._change",function(e){!this.parentNode||e.isSimulated||e.isTrigger||ie.event.simulate("change",this.parentNode,e,!0)}),ie._data(t,"changeBubbles",!0))})},handle:function(e){var t=e.target;return this!==t||e.isSimulated||e.isTrigger||"radio"!==t.type&&"checkbox"!==t.type?e.handleObj.handler.apply(this,arguments):void 0},teardown:function(){return ie.event.remove(this,"._change"),!je.test(this.nodeName)}}),ne.focusinBubbles||ie.each({focus:"focusin",blur:"focusout"},function(e,t){var n=function(e){ie.event.simulate(t,e.target,ie.event.fix(e),!0)};ie.event.special[t]={setup:function(){var r=this.ownerDocument||this,i=ie._data(r,t);i||r.addEventListener(e,n,!0),ie._data(r,t,(i||0)+1)},teardown:function(){var r=this.ownerDocument||this,i=ie._data(r,t)-1;i?ie._data(r,t,i):(r.removeEventListener(e,n,!0),ie._removeData(r,t))}}}),ie.fn.extend({on:function(e,t,n,r,i){var o,a;if("object"==typeof e){"string"!=typeof t&&(n=n||t,t=void 0);for(o in e)this.on(o,t,n,e[o],i);return this}if(null==n&&null==r?(r=t,n=t=void 0):null==r&&("string"==typeof t?(r=n,n=void 0):(r=n,n=t,t=void 0)),!1===r)r=p;else if(!r)return this;return 1===i&&(a=r,r=function(e){return ie().off(e),a.apply(this,arguments)},r.guid=a.guid||(a.guid=ie.guid++)),this.each(function(){ie.event.add(this,e,r,n,t)})},one:function(e,t,n,r){return this.on(e,t,n,r,1)},off:function(e,t,n){var r,i;if(e&&e.preventDefault&&e.handleObj)return r=e.handleObj,ie(e.delegateTarget).off(r.namespace?r.origType+"."+r.namespace:r.origType,r.selector,r.handler),this;if("object"==typeof e){for(i in e)this.off(i,t,e[i]);return this}return(!1===t||"function"==typeof t)&&(n=t,t=void 0),!1===n&&(n=p),this.each(function(){ie.event.remove(this,e,n,t)})},trigger:function(e,t){return this.each(function(){ie.event.trigger(e,t,this)})},triggerHandler:function(e,t){var n=this[0];return n?ie.event.trigger(e,t,n,!0):void 0}});var Me="abbr|article|aside|audio|bdi|canvas|data|datalist|details|figcaption|figure|footer|header|hgroup|mark|meter|nav|output|progress|section|summary|time|video",Fe=/ jQuery\d+="(?:null|\d+)"/g,Oe=new RegExp("<(?:"+Me+")[\\s/>]","i"),Be=/^\s+/,Pe=/<(?!area|br|col|embed|hr|img|input|link|meta|param)(([\w:]+)[^>]*)\/>/gi,Re=/<([\w:]+)/,We=/<tbody/i,$e=/<|&#?\w+;/,ze=/<(?:script|style|link)/i,Ie=/checked\s*(?:[^=]|=\s*.checked.)/i,Xe=/^$|\/(?:java|ecma)script/i,Ue=/^true\/(.*)/,Ve=/^\s*<!(?:\[CDATA\[|--)|(?:\]\]|--)>\s*$/g,Je={option:[1,"<select multiple='multiple'>","</select>"],legend:[1,"<fieldset>","</fieldset>"],area:[1,"<map>","</map>"],param:[1,"<object>","</object>"],thead:[1,"<table>","</table>"],tr:[2,"<table><tbody>","</tbody></table>"],col:[2,"<table><tbody></tbody><colgroup>","</colgroup></table>"],td:[3,"<table><tbody><tr>","</tr></tbody></table>"],_default:ne.htmlSerialize?[0,"",""]:[1,"X<div>","</div>"]},Ye=m(he),Ge=Ye.appendChild(he.createElement("div"));Je.optgroup=Je.option,Je.tbody=Je.tfoot=Je.colgroup=Je.caption=Je.thead,Je.th=Je.td,ie.extend({clone:function(e,t,n){var r,i,o,a,s,l=ie.contains(e.ownerDocument,e);if(ne.html5Clone||ie.isXMLDoc(e)||!Oe.test("<"+e.nodeName+">")?o=e.cloneNode(!0):(Ge.innerHTML=e.outerHTML,Ge.removeChild(o=Ge.firstChild)),!(ne.noCloneEvent&&ne.noCloneChecked||1!==e.nodeType&&11!==e.nodeType||ie.isXMLDoc(e)))for(r=g(o),s=g(e),a=0;null!=(i=s[a]);++a)r[a]&&C(i,r[a]);if(t)if(n)for(s=s||g(e),r=r||g(o),a=0;null!=(i=s[a]);a++)T(i,r[a]);else T(e,o);return r=g(o,"script"),r.length>0&&w(r,!l&&g(e,"script")),r=s=i=null,o},buildFragment:function(e,t,n,r){for(var i,o,a,s,l,u,c,d=e.length,f=m(t),p=[],h=0;d>h;h++)if((o=e[h])||0===o)if("object"===ie.type(o))ie.merge(p,o.nodeType?[o]:o);else if($e.test(o)){for(s=s||f.appendChild(t.createElement("div")),l=(Re.exec(o)||["",""])[1].toLowerCase(),c=Je[l]||Je._default,s.innerHTML=c[1]+o.replace(Pe,"<$1></$2>")+c[2],i=c[0];i--;)s=s.lastChild;if(!ne.leadingWhitespace&&Be.test(o)&&p.push(t.createTextNode(Be.exec(o)[0])),!ne.tbody)for(o="table"!==l||We.test(o)?"<table>"!==c[1]||We.test(o)?0:s:s.firstChild,i=o&&o.childNodes.length;i--;)ie.nodeName(u=o.childNodes[i],"tbody")&&!u.childNodes.length&&o.removeChild(u);for(ie.merge(p,s.childNodes),s.textContent="";s.firstChild;)s.removeChild(s.firstChild);s=f.lastChild}else p.push(t.createTextNode(o));for(s&&f.removeChild(s),ne.appendChecked||ie.grep(g(p,"input"),v),h=0;o=p[h++];)if((!r||-1===ie.inArray(o,r))&&(a=ie.contains(o.ownerDocument,o),s=g(f.appendChild(o),"script"),a&&w(s),n))for(i=0;o=s[i++];)Xe.test(o.type||"")&&n.push(o);return s=null,f},cleanData:function(e,t){for(var n,r,i,o,a=0,s=ie.expando,l=ie.cache,u=ne.deleteExpando,c=ie.event.special;null!=(n=e[a]);a++)if((t||ie.acceptData(n))&&(i=n[s],o=i&&l[i])){if(o.events)for(r in o.events)c[r]?ie.event.remove(n,r):ie.removeEvent(n,r,o.handle);l[i]&&(delete l[i],u?delete n[s]:typeof n.removeAttribute!==Te?n.removeAttribute(s):n[s]=null,J.push(i))}}}),ie.fn.extend({text:function(e){return Ae(this,function(e){return void 0===e?ie.text(this):this.empty().append((this[0]&&this[0].ownerDocument||he).createTextNode(e))},null,e,arguments.length)},append:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){y(this,e).appendChild(e)}})},prepend:function(){return this.domManip(arguments,function(e){if(1===this.nodeType||11===this.nodeType||9===this.nodeType){var t=y(this,e);t.insertBefore(e,t.firstChild)}})},before:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this)})},after:function(){return this.domManip(arguments,function(e){this.parentNode&&this.parentNode.insertBefore(e,this.nextSibling)})},remove:function(e,t){for(var n,r=e?ie.filter(e,this):this,i=0;null!=(n=r[i]);i++)t||1!==n.nodeType||ie.cleanData(g(n)),n.parentNode&&(t&&ie.contains(n.ownerDocument,n)&&w(g(n,"script")),n.parentNode.removeChild(n));return this},empty:function(){for(var e,t=0;null!=(e=this[t]);t++){for(1===e.nodeType&&ie.cleanData(g(e,!1));e.firstChild;)e.removeChild(e.firstChild);e.options&&ie.nodeName(e,"select")&&(e.options.length=0)}return this},clone:function(e,t){return e=null!=e&&e,t=null==t?e:t,this.map(function(){return ie.clone(this,e,t)})},html:function(e){return Ae(this,function(e){var t=this[0]||{},n=0,r=this.length;if(void 0===e)return 1===t.nodeType?t.innerHTML.replace(Fe,""):void 0;if(!("string"!=typeof e||ze.test(e)||!ne.htmlSerialize&&Oe.test(e)||!ne.leadingWhitespace&&Be.test(e)||Je[(Re.exec(e)||["",""])[1].toLowerCase()])){e=e.replace(Pe,"<$1></$2>");try{for(;r>n;n++)t=this[n]||{},1===t.nodeType&&(ie.cleanData(g(t,!1)),t.innerHTML=e);t=0}catch(e){}}t&&this.empty().append(e)},null,e,arguments.length)},replaceWith:function(){var e=arguments[0];return this.domManip(arguments,function(t){e=this.parentNode,ie.cleanData(g(this)),e&&e.replaceChild(t,this)}),e&&(e.length||e.nodeType)?this:this.remove()},detach:function(e){return this.remove(e,!0)},domManip:function(e,t){e=G.apply([],e);var n,r,i,o,a,s,l=0,u=this.length,c=this,d=u-1,f=e[0],p=ie.isFunction(f);if(p||u>1&&"string"==typeof f&&!ne.checkClone&&Ie.test(f))return this.each(function(n){var r=c.eq(n);p&&(e[0]=f.call(this,n,r.html())),r.domManip(e,t)});if(u&&(s=ie.buildFragment(e,this[0].ownerDocument,!1,this),n=s.firstChild,1===s.childNodes.length&&(s=n),n)){for(o=ie.map(g(s,"script"),b),i=o.length;u>l;l++)r=s,l!==d&&(r=ie.clone(r,!0,!0),i&&ie.merge(o,g(r,"script"))),t.call(this[l],r,l);if(i)for(a=o[o.length-1].ownerDocument,ie.map(o,x),l=0;i>l;l++)r=o[l],Xe.test(r.type||"")&&!ie._data(r,"globalEval")&&ie.contains(a,r)&&(r.src?ie._evalUrl&&ie._evalUrl(r.src):ie.globalEval((r.text||r.textContent||r.innerHTML||"").replace(Ve,"")));s=n=null}return this}}),ie.each({appendTo:"append",prependTo:"prepend",insertBefore:"before",insertAfter:"after",replaceAll:"replaceWith"},function(e,t){ie.fn[e]=function(e){for(var n,r=0,i=[],o=ie(e),a=o.length-1;a>=r;r++)n=r===a?this:this.clone(!0),ie(o[r])[t](n),Q.apply(i,n.get());return this.pushStack(i)}});var Qe,Ke={};!function(){var e;ne.shrinkWrapBlocks=function(){if(null!=e)return e;e=!1;var t,n,r;return n=he.getElementsByTagName("body")[0],n&&n.style?(t=he.createElement("div"),r=he.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),typeof t.style.zoom!==Te&&(t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:1px;width:1px;zoom:1",t.appendChild(he.createElement("div")).style.width="5px",e=3!==t.offsetWidth),n.removeChild(r),e):void 0}}();var Ze,et,tt=/^margin/,nt=new RegExp("^("+Ee+")(?!px)[a-z%]+$","i"),rt=/^(top|right|bottom|left)$/;e.getComputedStyle?(Ze=function(t){return t.ownerDocument.defaultView.opener?t.ownerDocument.defaultView.getComputedStyle(t,null):e.getComputedStyle(t,null)},et=function(e,t,n){var r,i,o,a,s=e.style;return n=n||Ze(e),a=n?n.getPropertyValue(t)||n[t]:void 0,n&&(""!==a||ie.contains(e.ownerDocument,e)||(a=ie.style(e,t)),nt.test(a)&&tt.test(t)&&(r=s.width,i=s.minWidth,o=s.maxWidth,s.minWidth=s.maxWidth=s.width=a,a=n.width,s.width=r,s.minWidth=i,s.maxWidth=o)),void 0===a?a:a+""}):he.documentElement.currentStyle&&(Ze=function(e){return e.currentStyle},et=function(e,t,n){var r,i,o,a,s=e.style;return n=n||Ze(e),a=n?n[t]:void 0,null==a&&s&&s[t]&&(a=s[t]),nt.test(a)&&!rt.test(t)&&(r=s.left,i=e.runtimeStyle,o=i&&i.left,o&&(i.left=e.currentStyle.left),s.left="fontSize"===t?"1em":a,a=s.pixelLeft+"px",s.left=r,o&&(i.left=o)),void 0===a?a:a+""||"auto"}),!function(){function t(){var t,n,r,i;(n=he.getElementsByTagName("body")[0])&&n.style&&(t=he.createElement("div"),r=he.createElement("div"),r.style.cssText="position:absolute;border:0;width:0;height:0;top:0;left:-9999px",n.appendChild(r).appendChild(t),t.style.cssText="-webkit-box-sizing:border-box;-moz-box-sizing:border-box;box-sizing:border-box;display:block;margin-top:1%;top:1%;border:1px;padding:1px;width:4px;position:absolute",o=a=!1,l=!0,e.getComputedStyle&&(o="1%"!==(e.getComputedStyle(t,null)||{}).top,a="4px"===(e.getComputedStyle(t,null)||{width:"4px"}).width,i=t.appendChild(he.createElement("div")),i.style.cssText=t.style.cssText="-webkit-box-sizing:content-box;-moz-box-sizing:content-box;box-sizing:content-box;display:block;margin:0;border:0;padding:0",i.style.marginRight=i.style.width="0",t.style.width="1px",l=!parseFloat((e.getComputedStyle(i,null)||{}).marginRight),t.removeChild(i)),t.innerHTML="<table><tr><td></td><td>t</td></tr></table>",
i=t.getElementsByTagName("td"),i[0].style.cssText="margin:0;border:0;padding:0;display:none",s=0===i[0].offsetHeight,s&&(i[0].style.display="",i[1].style.display="none",s=0===i[0].offsetHeight),n.removeChild(r))}var n,r,i,o,a,s,l;n=he.createElement("div"),n.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",i=n.getElementsByTagName("a")[0],(r=i&&i.style)&&(r.cssText="float:left;opacity:.5",ne.opacity="0.5"===r.opacity,ne.cssFloat=!!r.cssFloat,n.style.backgroundClip="content-box",n.cloneNode(!0).style.backgroundClip="",ne.clearCloneStyle="content-box"===n.style.backgroundClip,ne.boxSizing=""===r.boxSizing||""===r.MozBoxSizing||""===r.WebkitBoxSizing,ie.extend(ne,{reliableHiddenOffsets:function(){return null==s&&t(),s},boxSizingReliable:function(){return null==a&&t(),a},pixelPosition:function(){return null==o&&t(),o},reliableMarginRight:function(){return null==l&&t(),l}}))}(),ie.swap=function(e,t,n,r){var i,o,a={};for(o in t)a[o]=e.style[o],e.style[o]=t[o];i=n.apply(e,r||[]);for(o in t)e.style[o]=a[o];return i};var it=/alpha\([^)]*\)/i,ot=/opacity\s*=\s*([^)]*)/,at=/^(none|table(?!-c[ea]).+)/,st=new RegExp("^("+Ee+")(.*)$","i"),lt=new RegExp("^([+-])=("+Ee+")","i"),ut={position:"absolute",visibility:"hidden",display:"block"},ct={letterSpacing:"0",fontWeight:"400"},dt=["Webkit","O","Moz","ms"];ie.extend({cssHooks:{opacity:{get:function(e,t){if(t){var n=et(e,"opacity");return""===n?"1":n}}}},cssNumber:{columnCount:!0,fillOpacity:!0,flexGrow:!0,flexShrink:!0,fontWeight:!0,lineHeight:!0,opacity:!0,order:!0,orphans:!0,widows:!0,zIndex:!0,zoom:!0},cssProps:{"float":ne.cssFloat?"cssFloat":"styleFloat"},style:function(e,t,n,r){if(e&&3!==e.nodeType&&8!==e.nodeType&&e.style){var i,o,a,s=ie.camelCase(t),l=e.style;if(t=ie.cssProps[s]||(ie.cssProps[s]=S(l,s)),a=ie.cssHooks[t]||ie.cssHooks[s],void 0===n)return a&&"get"in a&&void 0!==(i=a.get(e,!1,r))?i:l[t];if(o=typeof n,"string"===o&&(i=lt.exec(n))&&(n=(i[1]+1)*i[2]+parseFloat(ie.css(e,t)),o="number"),null!=n&&n===n&&("number"!==o||ie.cssNumber[s]||(n+="px"),ne.clearCloneStyle||""!==n||0!==t.indexOf("background")||(l[t]="inherit"),!(a&&"set"in a&&void 0===(n=a.set(e,n,r)))))try{l[t]=n}catch(e){}}},css:function(e,t,n,r){var i,o,a,s=ie.camelCase(t);return t=ie.cssProps[s]||(ie.cssProps[s]=S(e.style,s)),a=ie.cssHooks[t]||ie.cssHooks[s],a&&"get"in a&&(o=a.get(e,!0,n)),void 0===o&&(o=et(e,t,r)),"normal"===o&&t in ct&&(o=ct[t]),""===n||n?(i=parseFloat(o),!0===n||ie.isNumeric(i)?i||0:o):o}}),ie.each(["height","width"],function(e,t){ie.cssHooks[t]={get:function(e,n,r){return n?at.test(ie.css(e,"display"))&&0===e.offsetWidth?ie.swap(e,ut,function(){return L(e,t,r)}):L(e,t,r):void 0},set:function(e,n,r){var i=r&&Ze(e);return D(e,n,r?j(e,t,r,ne.boxSizing&&"border-box"===ie.css(e,"boxSizing",!1,i),i):0)}}}),ne.opacity||(ie.cssHooks.opacity={get:function(e,t){return ot.test((t&&e.currentStyle?e.currentStyle.filter:e.style.filter)||"")?.01*parseFloat(RegExp.$1)+"":t?"1":""},set:function(e,t){var n=e.style,r=e.currentStyle,i=ie.isNumeric(t)?"alpha(opacity="+100*t+")":"",o=r&&r.filter||n.filter||"";n.zoom=1,(t>=1||""===t)&&""===ie.trim(o.replace(it,""))&&n.removeAttribute&&(n.removeAttribute("filter"),""===t||r&&!r.filter)||(n.filter=it.test(o)?o.replace(it,i):o+" "+i)}}),ie.cssHooks.marginRight=k(ne.reliableMarginRight,function(e,t){return t?ie.swap(e,{display:"inline-block"},et,[e,"marginRight"]):void 0}),ie.each({margin:"",padding:"",border:"Width"},function(e,t){ie.cssHooks[e+t]={expand:function(n){for(var r=0,i={},o="string"==typeof n?n.split(" "):[n];4>r;r++)i[e+ke[r]+t]=o[r]||o[r-2]||o[0];return i}},tt.test(e)||(ie.cssHooks[e+t].set=D)}),ie.fn.extend({css:function(e,t){return Ae(this,function(e,t,n){var r,i,o={},a=0;if(ie.isArray(t)){for(r=Ze(e),i=t.length;i>a;a++)o[t[a]]=ie.css(e,t[a],!1,r);return o}return void 0!==n?ie.style(e,t,n):ie.css(e,t)},e,t,arguments.length>1)},show:function(){return A(this,!0)},hide:function(){return A(this)},toggle:function(e){return"boolean"==typeof e?e?this.show():this.hide():this.each(function(){Se(this)?ie(this).show():ie(this).hide()})}}),ie.Tween=H,H.prototype={constructor:H,init:function(e,t,n,r,i,o){this.elem=e,this.prop=n,this.easing=i||"swing",this.options=t,this.start=this.now=this.cur(),this.end=r,this.unit=o||(ie.cssNumber[n]?"":"px")},cur:function(){var e=H.propHooks[this.prop];return e&&e.get?e.get(this):H.propHooks._default.get(this)},run:function(e){var t,n=H.propHooks[this.prop];return this.pos=t=this.options.duration?ie.easing[this.easing](e,this.options.duration*e,0,1,this.options.duration):e,this.now=(this.end-this.start)*t+this.start,this.options.step&&this.options.step.call(this.elem,this.now,this),n&&n.set?n.set(this):H.propHooks._default.set(this),this}},H.prototype.init.prototype=H.prototype,H.propHooks={_default:{get:function(e){var t;return null==e.elem[e.prop]||e.elem.style&&null!=e.elem.style[e.prop]?(t=ie.css(e.elem,e.prop,""),t&&"auto"!==t?t:0):e.elem[e.prop]},set:function(e){ie.fx.step[e.prop]?ie.fx.step[e.prop](e):e.elem.style&&(null!=e.elem.style[ie.cssProps[e.prop]]||ie.cssHooks[e.prop])?ie.style(e.elem,e.prop,e.now+e.unit):e.elem[e.prop]=e.now}}},H.propHooks.scrollTop=H.propHooks.scrollLeft={set:function(e){e.elem.nodeType&&e.elem.parentNode&&(e.elem[e.prop]=e.now)}},ie.easing={linear:function(e){return e},swing:function(e){return.5-Math.cos(e*Math.PI)/2}},ie.fx=H.prototype.init,ie.fx.step={};var ft,pt,ht=/^(?:toggle|show|hide)$/,mt=new RegExp("^(?:([+-])=|)("+Ee+")([a-z%]*)$","i"),gt=/queueHooks$/,vt=[F],yt={"*":[function(e,t){var n=this.createTween(e,t),r=n.cur(),i=mt.exec(t),o=i&&i[3]||(ie.cssNumber[e]?"":"px"),a=(ie.cssNumber[e]||"px"!==o&&+r)&&mt.exec(ie.css(n.elem,e)),s=1,l=20;if(a&&a[3]!==o){o=o||a[3],i=i||[],a=+r||1;do{s=s||".5",a/=s,ie.style(n.elem,e,a+o)}while(s!==(s=n.cur()/r)&&1!==s&&--l)}return i&&(a=n.start=+a||+r||0,n.unit=o,n.end=i[1]?a+(i[1]+1)*i[2]:+i[2]),n}]};ie.Animation=ie.extend(B,{tweener:function(e,t){ie.isFunction(e)?(t=e,e=["*"]):e=e.split(" ");for(var n,r=0,i=e.length;i>r;r++)n=e[r],yt[n]=yt[n]||[],yt[n].unshift(t)},prefilter:function(e,t){t?vt.unshift(e):vt.push(e)}}),ie.speed=function(e,t,n){var r=e&&"object"==typeof e?ie.extend({},e):{complete:n||!n&&t||ie.isFunction(e)&&e,duration:e,easing:n&&t||t&&!ie.isFunction(t)&&t};return r.duration=ie.fx.off?0:"number"==typeof r.duration?r.duration:r.duration in ie.fx.speeds?ie.fx.speeds[r.duration]:ie.fx.speeds._default,(null==r.queue||!0===r.queue)&&(r.queue="fx"),r.old=r.complete,r.complete=function(){ie.isFunction(r.old)&&r.old.call(this),r.queue&&ie.dequeue(this,r.queue)},r},ie.fn.extend({fadeTo:function(e,t,n,r){return this.filter(Se).css("opacity",0).show().end().animate({opacity:t},e,n,r)},animate:function(e,t,n,r){var i=ie.isEmptyObject(e),o=ie.speed(t,n,r),a=function(){var t=B(this,ie.extend({},e),o);(i||ie._data(this,"finish"))&&t.stop(!0)};return a.finish=a,i||!1===o.queue?this.each(a):this.queue(o.queue,a)},stop:function(e,t,n){var r=function(e){var t=e.stop;delete e.stop,t(n)};return"string"!=typeof e&&(n=t,t=e,e=void 0),t&&!1!==e&&this.queue(e||"fx",[]),this.each(function(){var t=!0,i=null!=e&&e+"queueHooks",o=ie.timers,a=ie._data(this);if(i)a[i]&&a[i].stop&&r(a[i]);else for(i in a)a[i]&&a[i].stop&&gt.test(i)&&r(a[i]);for(i=o.length;i--;)o[i].elem!==this||null!=e&&o[i].queue!==e||(o[i].anim.stop(n),t=!1,o.splice(i,1));(t||!n)&&ie.dequeue(this,e)})},finish:function(e){return!1!==e&&(e=e||"fx"),this.each(function(){var t,n=ie._data(this),r=n[e+"queue"],i=n[e+"queueHooks"],o=ie.timers,a=r?r.length:0;for(n.finish=!0,ie.queue(this,e,[]),i&&i.stop&&i.stop.call(this,!0),t=o.length;t--;)o[t].elem===this&&o[t].queue===e&&(o[t].anim.stop(!0),o.splice(t,1));for(t=0;a>t;t++)r[t]&&r[t].finish&&r[t].finish.call(this);delete n.finish})}}),ie.each(["toggle","show","hide"],function(e,t){var n=ie.fn[t];ie.fn[t]=function(e,r,i){return null==e||"boolean"==typeof e?n.apply(this,arguments):this.animate(_(t,!0),e,r,i)}}),ie.each({slideDown:_("show"),slideUp:_("hide"),slideToggle:_("toggle"),fadeIn:{opacity:"show"},fadeOut:{opacity:"hide"},fadeToggle:{opacity:"toggle"}},function(e,t){ie.fn[e]=function(e,n,r){return this.animate(t,e,n,r)}}),ie.timers=[],ie.fx.tick=function(){var e,t=ie.timers,n=0;for(ft=ie.now();n<t.length;n++)(e=t[n])()||t[n]!==e||t.splice(n--,1);t.length||ie.fx.stop(),ft=void 0},ie.fx.timer=function(e){ie.timers.push(e),e()?ie.fx.start():ie.timers.pop()},ie.fx.interval=13,ie.fx.start=function(){pt||(pt=setInterval(ie.fx.tick,ie.fx.interval))},ie.fx.stop=function(){clearInterval(pt),pt=null},ie.fx.speeds={slow:600,fast:200,_default:400},ie.fn.delay=function(e,t){return e=ie.fx?ie.fx.speeds[e]||e:e,t=t||"fx",this.queue(t,function(t,n){var r=setTimeout(t,e);n.stop=function(){clearTimeout(r)}})},function(){var e,t,n,r,i;t=he.createElement("div"),t.setAttribute("className","t"),t.innerHTML="  <link/><table></table><a href='/a'>a</a><input type='checkbox'/>",r=t.getElementsByTagName("a")[0],n=he.createElement("select"),i=n.appendChild(he.createElement("option")),e=t.getElementsByTagName("input")[0],r.style.cssText="top:1px",ne.getSetAttribute="t"!==t.className,ne.style=/top/.test(r.getAttribute("style")),ne.hrefNormalized="/a"===r.getAttribute("href"),ne.checkOn=!!e.value,ne.optSelected=i.selected,ne.enctype=!!he.createElement("form").enctype,n.disabled=!0,ne.optDisabled=!i.disabled,e=he.createElement("input"),e.setAttribute("value",""),ne.input=""===e.getAttribute("value"),e.value="t",e.setAttribute("type","radio"),ne.radioValue="t"===e.value}();var bt=/\r/g;ie.fn.extend({val:function(e){var t,n,r,i=this[0];return arguments.length?(r=ie.isFunction(e),this.each(function(n){var i;1===this.nodeType&&(i=r?e.call(this,n,ie(this).val()):e,null==i?i="":"number"==typeof i?i+="":ie.isArray(i)&&(i=ie.map(i,function(e){return null==e?"":e+""})),(t=ie.valHooks[this.type]||ie.valHooks[this.nodeName.toLowerCase()])&&"set"in t&&void 0!==t.set(this,i,"value")||(this.value=i))})):i?(t=ie.valHooks[i.type]||ie.valHooks[i.nodeName.toLowerCase()],t&&"get"in t&&void 0!==(n=t.get(i,"value"))?n:(n=i.value,"string"==typeof n?n.replace(bt,""):null==n?"":n)):void 0}}),ie.extend({valHooks:{option:{get:function(e){var t=ie.find.attr(e,"value");return null!=t?t:ie.trim(ie.text(e))}},select:{get:function(e){for(var t,n,r=e.options,i=e.selectedIndex,o="select-one"===e.type||0>i,a=o?null:[],s=o?i+1:r.length,l=0>i?s:o?i:0;s>l;l++)if(n=r[l],!(!n.selected&&l!==i||(ne.optDisabled?n.disabled:null!==n.getAttribute("disabled"))||n.parentNode.disabled&&ie.nodeName(n.parentNode,"optgroup"))){if(t=ie(n).val(),o)return t;a.push(t)}return a},set:function(e,t){for(var n,r,i=e.options,o=ie.makeArray(t),a=i.length;a--;)if(r=i[a],ie.inArray(ie.valHooks.option.get(r),o)>=0)try{r.selected=n=!0}catch(e){r.scrollHeight}else r.selected=!1;return n||(e.selectedIndex=-1),i}}}}),ie.each(["radio","checkbox"],function(){ie.valHooks[this]={set:function(e,t){return ie.isArray(t)?e.checked=ie.inArray(ie(e).val(),t)>=0:void 0}},ne.checkOn||(ie.valHooks[this].get=function(e){return null===e.getAttribute("value")?"on":e.value})});var xt,wt,Tt=ie.expr.attrHandle,Ct=/^(?:checked|selected)$/i,Nt=ne.getSetAttribute,Et=ne.input;ie.fn.extend({attr:function(e,t){return Ae(this,ie.attr,e,t,arguments.length>1)},removeAttr:function(e){return this.each(function(){ie.removeAttr(this,e)})}}),ie.extend({attr:function(e,t,n){var r,i,o=e.nodeType;if(e&&3!==o&&8!==o&&2!==o)return typeof e.getAttribute===Te?ie.prop(e,t,n):(1===o&&ie.isXMLDoc(e)||(t=t.toLowerCase(),r=ie.attrHooks[t]||(ie.expr.match.bool.test(t)?wt:xt)),void 0===n?r&&"get"in r&&null!==(i=r.get(e,t))?i:(i=ie.find.attr(e,t),null==i?void 0:i):null!==n?r&&"set"in r&&void 0!==(i=r.set(e,n,t))?i:(e.setAttribute(t,n+""),n):void ie.removeAttr(e,t))},removeAttr:function(e,t){var n,r,i=0,o=t&&t.match(ye);if(o&&1===e.nodeType)for(;n=o[i++];)r=ie.propFix[n]||n,ie.expr.match.bool.test(n)?Et&&Nt||!Ct.test(n)?e[r]=!1:e[ie.camelCase("default-"+n)]=e[r]=!1:ie.attr(e,n,""),e.removeAttribute(Nt?n:r)},attrHooks:{type:{set:function(e,t){if(!ne.radioValue&&"radio"===t&&ie.nodeName(e,"input")){var n=e.value;return e.setAttribute("type",t),n&&(e.value=n),t}}}}}),wt={set:function(e,t,n){return!1===t?ie.removeAttr(e,n):Et&&Nt||!Ct.test(n)?e.setAttribute(!Nt&&ie.propFix[n]||n,n):e[ie.camelCase("default-"+n)]=e[n]=!0,n}},ie.each(ie.expr.match.bool.source.match(/\w+/g),function(e,t){var n=Tt[t]||ie.find.attr;Tt[t]=Et&&Nt||!Ct.test(t)?function(e,t,r){var i,o;return r||(o=Tt[t],Tt[t]=i,i=null!=n(e,t,r)?t.toLowerCase():null,Tt[t]=o),i}:function(e,t,n){return n?void 0:e[ie.camelCase("default-"+t)]?t.toLowerCase():null}}),Et&&Nt||(ie.attrHooks.value={set:function(e,t,n){return ie.nodeName(e,"input")?void(e.defaultValue=t):xt&&xt.set(e,t,n)}}),Nt||(xt={set:function(e,t,n){var r=e.getAttributeNode(n);return r||e.setAttributeNode(r=e.ownerDocument.createAttribute(n)),r.value=t+="","value"===n||t===e.getAttribute(n)?t:void 0}},Tt.id=Tt.name=Tt.coords=function(e,t,n){var r;return n?void 0:(r=e.getAttributeNode(t))&&""!==r.value?r.value:null},ie.valHooks.button={get:function(e,t){var n=e.getAttributeNode(t);return n&&n.specified?n.value:void 0},set:xt.set},ie.attrHooks.contenteditable={set:function(e,t,n){xt.set(e,""!==t&&t,n)}},ie.each(["width","height"],function(e,t){ie.attrHooks[t]={set:function(e,n){return""===n?(e.setAttribute(t,"auto"),n):void 0}}})),ne.style||(ie.attrHooks.style={get:function(e){return e.style.cssText||void 0},set:function(e,t){return e.style.cssText=t+""}});var kt=/^(?:input|select|textarea|button|object)$/i,St=/^(?:a|area)$/i;ie.fn.extend({prop:function(e,t){return Ae(this,ie.prop,e,t,arguments.length>1)},removeProp:function(e){return e=ie.propFix[e]||e,this.each(function(){try{this[e]=void 0,delete this[e]}catch(e){}})}}),ie.extend({propFix:{"for":"htmlFor","class":"className"},prop:function(e,t,n){var r,i,o,a=e.nodeType;if(e&&3!==a&&8!==a&&2!==a)return o=1!==a||!ie.isXMLDoc(e),o&&(t=ie.propFix[t]||t,i=ie.propHooks[t]),void 0!==n?i&&"set"in i&&void 0!==(r=i.set(e,n,t))?r:e[t]=n:i&&"get"in i&&null!==(r=i.get(e,t))?r:e[t]},propHooks:{tabIndex:{get:function(e){var t=ie.find.attr(e,"tabindex");return t?parseInt(t,10):kt.test(e.nodeName)||St.test(e.nodeName)&&e.href?0:-1}}}}),ne.hrefNormalized||ie.each(["href","src"],function(e,t){ie.propHooks[t]={get:function(e){return e.getAttribute(t,4)}}}),ne.optSelected||(ie.propHooks.selected={get:function(e){var t=e.parentNode;return t&&(t.selectedIndex,t.parentNode&&t.parentNode.selectedIndex),null}}),ie.each(["tabIndex","readOnly","maxLength","cellSpacing","cellPadding","rowSpan","colSpan","useMap","frameBorder","contentEditable"],function(){ie.propFix[this.toLowerCase()]=this}),ne.enctype||(ie.propFix.enctype="encoding");var At=/[\t\r\n\f]/g;ie.fn.extend({addClass:function(e){var t,n,r,i,o,a,s=0,l=this.length,u="string"==typeof e&&e;if(ie.isFunction(e))return this.each(function(t){ie(this).addClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(ye)||[];l>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(At," "):" ")){for(o=0;i=t[o++];)r.indexOf(" "+i+" ")<0&&(r+=i+" ");a=ie.trim(r),n.className!==a&&(n.className=a)}return this},removeClass:function(e){var t,n,r,i,o,a,s=0,l=this.length,u=0===arguments.length||"string"==typeof e&&e;if(ie.isFunction(e))return this.each(function(t){ie(this).removeClass(e.call(this,t,this.className))});if(u)for(t=(e||"").match(ye)||[];l>s;s++)if(n=this[s],r=1===n.nodeType&&(n.className?(" "+n.className+" ").replace(At," "):"")){for(o=0;i=t[o++];)for(;r.indexOf(" "+i+" ")>=0;)r=r.replace(" "+i+" "," ");a=e?ie.trim(r):"",n.className!==a&&(n.className=a)}return this},toggleClass:function(e,t){var n=typeof e;return"boolean"==typeof t&&"string"===n?t?this.addClass(e):this.removeClass(e):this.each(ie.isFunction(e)?function(n){ie(this).toggleClass(e.call(this,n,this.className,t),t)}:function(){if("string"===n)for(var t,r=0,i=ie(this),o=e.match(ye)||[];t=o[r++];)i.hasClass(t)?i.removeClass(t):i.addClass(t);else(n===Te||"boolean"===n)&&(this.className&&ie._data(this,"__className__",this.className),this.className=this.className||!1===e?"":ie._data(this,"__className__")||"")})},hasClass:function(e){for(var t=" "+e+" ",n=0,r=this.length;r>n;n++)if(1===this[n].nodeType&&(" "+this[n].className+" ").replace(At," ").indexOf(t)>=0)return!0;return!1}}),ie.each("blur focus focusin focusout load resize scroll unload click dblclick mousedown mouseup mousemove mouseover mouseout mouseenter mouseleave change select submit keydown keypress keyup error contextmenu".split(" "),function(e,t){ie.fn[t]=function(e,n){return arguments.length>0?this.on(t,null,e,n):this.trigger(t)}}),ie.fn.extend({hover:function(e,t){return this.mouseenter(e).mouseleave(t||e)},bind:function(e,t,n){return this.on(e,null,t,n)},unbind:function(e,t){return this.off(e,null,t)},delegate:function(e,t,n,r){return this.on(t,e,n,r)},undelegate:function(e,t,n){return 1===arguments.length?this.off(e,"**"):this.off(t,e||"**",n)}});var Dt=ie.now(),jt=/\?/,Lt=/(,)|(\[|{)|(}|])|"(?:[^"\\\r\n]|\\["\\\/bfnrt]|\\u[\da-fA-F]{4})*"\s*:?|true|false|null|-?(?!0\d)\d+(?:\.\d+|)(?:[eE][+-]?\d+|)/g;ie.parseJSON=function(t){if(e.JSON&&e.JSON.parse)return e.JSON.parse(t+"");var n,r=null,i=ie.trim(t+"");return i&&!ie.trim(i.replace(Lt,function(e,t,i,o){return n&&t&&(r=0),0===r?e:(n=i||t,r+=!o-!i,"")}))?Function("return "+i)():ie.error("Invalid JSON: "+t)},ie.parseXML=function(t){var n,r;if(!t||"string"!=typeof t)return null;try{e.DOMParser?(r=new DOMParser,n=r.parseFromString(t,"text/xml")):(n=new ActiveXObject("Microsoft.XMLDOM"),n.async="false",n.loadXML(t))}catch(e){n=void 0}return n&&n.documentElement&&!n.getElementsByTagName("parsererror").length||ie.error("Invalid XML: "+t),n};var Ht,qt,_t=/#.*$/,Mt=/([?&])_=[^&]*/,Ft=/^(.*?):[ \t]*([^\r\n]*)\r?$/gm,Ot=/^(?:about|app|app-storage|.+-extension|file|res|widget):$/,Bt=/^(?:GET|HEAD)$/,Pt=/^\/\//,Rt=/^([\w.+-]+:)(?:\/\/(?:[^\/?#]*@|)([^\/?#:]*)(?::(\d+)|)|)/,Wt={},$t={},zt="*/".concat("*");try{qt=location.href}catch(e){qt=he.createElement("a"),qt.href="",qt=qt.href}Ht=Rt.exec(qt.toLowerCase())||[],ie.extend({active:0,lastModified:{},etag:{},ajaxSettings:{url:qt,type:"GET",isLocal:Ot.test(Ht[1]),global:!0,processData:!0,async:!0,contentType:"application/x-www-form-urlencoded; charset=UTF-8",accepts:{"*":zt,text:"text/plain",html:"text/html",xml:"application/xml, text/xml",json:"application/json, text/javascript"},contents:{xml:/xml/,html:/html/,json:/json/},responseFields:{xml:"responseXML",text:"responseText",json:"responseJSON"},converters:{"* text":String,"text html":!0,"text json":ie.parseJSON,"text xml":ie.parseXML},flatOptions:{url:!0,context:!0}},ajaxSetup:function(e,t){return t?W(W(e,ie.ajaxSettings),t):W(ie.ajaxSettings,e)},ajaxPrefilter:P(Wt),ajaxTransport:P($t),ajax:function(e,t){function n(e,t,n,r){var i,c,v,y,x,T=t;2!==b&&(b=2,s&&clearTimeout(s),u=void 0,a=r||"",w.readyState=e>0?4:0,i=e>=200&&300>e||304===e,n&&(y=$(d,w,n)),y=z(d,y,w,i),i?(d.ifModified&&(x=w.getResponseHeader("Last-Modified"),x&&(ie.lastModified[o]=x),(x=w.getResponseHeader("etag"))&&(ie.etag[o]=x)),204===e||"HEAD"===d.type?T="nocontent":304===e?T="notmodified":(T=y.state,c=y.data,v=y.error,i=!v)):(v=T,(e||!T)&&(T="error",0>e&&(e=0))),w.status=e,w.statusText=(t||T)+"",i?h.resolveWith(f,[c,T,w]):h.rejectWith(f,[w,T,v]),w.statusCode(g),g=void 0,l&&p.trigger(i?"ajaxSuccess":"ajaxError",[w,d,i?c:v]),m.fireWith(f,[w,T]),l&&(p.trigger("ajaxComplete",[w,d]),--ie.active||ie.event.trigger("ajaxStop")))}"object"==typeof e&&(t=e,e=void 0),t=t||{};var r,i,o,a,s,l,u,c,d=ie.ajaxSetup({},t),f=d.context||d,p=d.context&&(f.nodeType||f.jquery)?ie(f):ie.event,h=ie.Deferred(),m=ie.Callbacks("once memory"),g=d.statusCode||{},v={},y={},b=0,x="canceled",w={readyState:0,getResponseHeader:function(e){var t;if(2===b){if(!c)for(c={};t=Ft.exec(a);)c[t[1].toLowerCase()]=t[2];t=c[e.toLowerCase()]}return null==t?null:t},getAllResponseHeaders:function(){return 2===b?a:null},setRequestHeader:function(e,t){var n=e.toLowerCase();return b||(e=y[n]=y[n]||e,v[e]=t),this},overrideMimeType:function(e){return b||(d.mimeType=e),this},statusCode:function(e){var t;if(e)if(2>b)for(t in e)g[t]=[g[t],e[t]];else w.always(e[w.status]);return this},abort:function(e){var t=e||x;return u&&u.abort(t),n(0,t),this}};if(h.promise(w).complete=m.add,w.success=w.done,w.error=w.fail,d.url=((e||d.url||qt)+"").replace(_t,"").replace(Pt,Ht[1]+"//"),d.type=t.method||t.type||d.method||d.type,d.dataTypes=ie.trim(d.dataType||"*").toLowerCase().match(ye)||[""],null==d.crossDomain&&(r=Rt.exec(d.url.toLowerCase()),d.crossDomain=!(!r||r[1]===Ht[1]&&r[2]===Ht[2]&&(r[3]||("http:"===r[1]?"80":"443"))===(Ht[3]||("http:"===Ht[1]?"80":"443")))),d.data&&d.processData&&"string"!=typeof d.data&&(d.data=ie.param(d.data,d.traditional)),R(Wt,d,t,w),2===b)return w;l=ie.event&&d.global,l&&0==ie.active++&&ie.event.trigger("ajaxStart"),d.type=d.type.toUpperCase(),d.hasContent=!Bt.test(d.type),o=d.url,d.hasContent||(d.data&&(o=d.url+=(jt.test(o)?"&":"?")+d.data,delete d.data),!1===d.cache&&(d.url=Mt.test(o)?o.replace(Mt,"$1_="+Dt++):o+(jt.test(o)?"&":"?")+"_="+Dt++)),d.ifModified&&(ie.lastModified[o]&&w.setRequestHeader("If-Modified-Since",ie.lastModified[o]),ie.etag[o]&&w.setRequestHeader("If-None-Match",ie.etag[o])),(d.data&&d.hasContent&&!1!==d.contentType||t.contentType)&&w.setRequestHeader("Content-Type",d.contentType),w.setRequestHeader("Accept",d.dataTypes[0]&&d.accepts[d.dataTypes[0]]?d.accepts[d.dataTypes[0]]+("*"!==d.dataTypes[0]?", "+zt+"; q=0.01":""):d.accepts["*"]);for(i in d.headers)w.setRequestHeader(i,d.headers[i]);if(d.beforeSend&&(!1===d.beforeSend.call(f,w,d)||2===b))return w.abort();x="abort";for(i in{success:1,error:1,complete:1})w[i](d[i]);if(u=R($t,d,t,w)){w.readyState=1,l&&p.trigger("ajaxSend",[w,d]),d.async&&d.timeout>0&&(s=setTimeout(function(){w.abort("timeout")},d.timeout));try{b=1,u.send(v,n)}catch(e){if(!(2>b))throw e;n(-1,e)}}else n(-1,"No Transport");return w},getJSON:function(e,t,n){return ie.get(e,t,n,"json")},getScript:function(e,t){return ie.get(e,void 0,t,"script")}}),ie.each(["get","post"],function(e,t){ie[t]=function(e,n,r,i){return ie.isFunction(n)&&(i=i||r,r=n,n=void 0),ie.ajax({url:e,type:t,dataType:i,data:n,success:r})}}),ie._evalUrl=function(e){return ie.ajax({url:e,type:"GET",dataType:"script",async:!1,global:!1,"throws":!0})},ie.fn.extend({wrapAll:function(e){if(ie.isFunction(e))return this.each(function(t){ie(this).wrapAll(e.call(this,t))});if(this[0]){var t=ie(e,this[0].ownerDocument).eq(0).clone(!0);this[0].parentNode&&t.insertBefore(this[0]),t.map(function(){for(var e=this;e.firstChild&&1===e.firstChild.nodeType;)e=e.firstChild;return e}).append(this)}return this},wrapInner:function(e){return this.each(ie.isFunction(e)?function(t){ie(this).wrapInner(e.call(this,t))}:function(){var t=ie(this),n=t.contents();n.length?n.wrapAll(e):t.append(e)})},wrap:function(e){var t=ie.isFunction(e);return this.each(function(n){ie(this).wrapAll(t?e.call(this,n):e)})},unwrap:function(){return this.parent().each(function(){ie.nodeName(this,"body")||ie(this).replaceWith(this.childNodes)}).end()}}),ie.expr.filters.hidden=function(e){return e.offsetWidth<=0&&e.offsetHeight<=0||!ne.reliableHiddenOffsets()&&"none"===(e.style&&e.style.display||ie.css(e,"display"))},ie.expr.filters.visible=function(e){return!ie.expr.filters.hidden(e)};var It=/%20/g,Xt=/\[\]$/,Ut=/\r?\n/g,Vt=/^(?:submit|button|image|reset|file)$/i,Jt=/^(?:input|select|textarea|keygen)/i;ie.param=function(e,t){var n,r=[],i=function(e,t){t=ie.isFunction(t)?t():null==t?"":t,r[r.length]=encodeURIComponent(e)+"="+encodeURIComponent(t)};if(void 0===t&&(t=ie.ajaxSettings&&ie.ajaxSettings.traditional),ie.isArray(e)||e.jquery&&!ie.isPlainObject(e))ie.each(e,function(){i(this.name,this.value)});else for(n in e)I(n,e[n],t,i);return r.join("&").replace(It,"+")},ie.fn.extend({serialize:function(){return ie.param(this.serializeArray())},serializeArray:function(){return this.map(function(){var e=ie.prop(this,"elements");return e?ie.makeArray(e):this}).filter(function(){var e=this.type;return this.name&&!ie(this).is(":disabled")&&Jt.test(this.nodeName)&&!Vt.test(e)&&(this.checked||!De.test(e))}).map(function(e,t){var n=ie(this).val();return null==n?null:ie.isArray(n)?ie.map(n,function(e){return{name:t.name,value:e.replace(Ut,"\r\n")}}):{name:t.name,value:n.replace(Ut,"\r\n")}}).get()}}),ie.ajaxSettings.xhr=void 0!==e.ActiveXObject?function(){return!this.isLocal&&/^(get|post|head|put|delete|options)$/i.test(this.type)&&X()||U()}:X;var Yt=0,Gt={},Qt=ie.ajaxSettings.xhr();e.attachEvent&&e.attachEvent("onunload",function(){for(var e in Gt)Gt[e](void 0,!0)}),ne.cors=!!Qt&&"withCredentials"in Qt,(Qt=ne.ajax=!!Qt)&&ie.ajaxTransport(function(e){if(!e.crossDomain||ne.cors){var t;return{send:function(n,r){var i,o=e.xhr(),a=++Yt;if(o.open(e.type,e.url,e.async,e.username,e.password),e.xhrFields)for(i in e.xhrFields)o[i]=e.xhrFields[i];e.mimeType&&o.overrideMimeType&&o.overrideMimeType(e.mimeType),e.crossDomain||n["X-Requested-With"]||(n["X-Requested-With"]="XMLHttpRequest");for(i in n)void 0!==n[i]&&o.setRequestHeader(i,n[i]+"");o.send(e.hasContent&&e.data||null),t=function(n,i){var s,l,u;if(t&&(i||4===o.readyState))if(delete Gt[a],t=void 0,o.onreadystatechange=ie.noop,i)4!==o.readyState&&o.abort();else{u={},s=o.status,"string"==typeof o.responseText&&(u.text=o.responseText);try{l=o.statusText}catch(e){l=""}s||!e.isLocal||e.crossDomain?1223===s&&(s=204):s=u.text?200:404}u&&r(s,l,u,o.getAllResponseHeaders())},e.async?4===o.readyState?setTimeout(t):o.onreadystatechange=Gt[a]=t:t()},abort:function(){t&&t(void 0,!0)}}}}),ie.ajaxSetup({accepts:{script:"text/javascript, application/javascript, application/ecmascript, application/x-ecmascript"},contents:{script:/(?:java|ecma)script/},converters:{"text script":function(e){return ie.globalEval(e),e}}}),ie.ajaxPrefilter("script",function(e){void 0===e.cache&&(e.cache=!1),e.crossDomain&&(e.type="GET",e.global=!1)}),ie.ajaxTransport("script",function(e){if(e.crossDomain){var t,n=he.head||ie("head")[0]||he.documentElement;return{send:function(r,i){t=he.createElement("script"),t.async=!0,e.scriptCharset&&(t.charset=e.scriptCharset),t.src=e.url,t.onload=t.onreadystatechange=function(e,n){(n||!t.readyState||/loaded|complete/.test(t.readyState))&&(t.onload=t.onreadystatechange=null,t.parentNode&&t.parentNode.removeChild(t),t=null,n||i(200,"success"))},n.insertBefore(t,n.firstChild)},abort:function(){t&&t.onload(void 0,!0)}}}});var Kt=[],Zt=/(=)\?(?=&|$)|\?\?/;ie.ajaxSetup({jsonp:"callback",jsonpCallback:function(){var e=Kt.pop()||ie.expando+"_"+Dt++;return this[e]=!0,e}}),ie.ajaxPrefilter("json jsonp",function(t,n,r){var i,o,a,s=!1!==t.jsonp&&(Zt.test(t.url)?"url":"string"==typeof t.data&&!(t.contentType||"").indexOf("application/x-www-form-urlencoded")&&Zt.test(t.data)&&"data");return s||"jsonp"===t.dataTypes[0]?(i=t.jsonpCallback=ie.isFunction(t.jsonpCallback)?t.jsonpCallback():t.jsonpCallback,s?t[s]=t[s].replace(Zt,"$1"+i):!1!==t.jsonp&&(t.url+=(jt.test(t.url)?"&":"?")+t.jsonp+"="+i),t.converters["script json"]=function(){return a||ie.error(i+" was not called"),a[0]},t.dataTypes[0]="json",o=e[i],e[i]=function(){a=arguments},r.always(function(){e[i]=o,t[i]&&(t.jsonpCallback=n.jsonpCallback,Kt.push(i)),a&&ie.isFunction(o)&&o(a[0]),a=o=void 0}),"script"):void 0}),ie.parseHTML=function(e,t,n){if(!e||"string"!=typeof e)return null;"boolean"==typeof t&&(n=t,t=!1),t=t||he;var r=de.exec(e),i=!n&&[];return r?[t.createElement(r[1])]:(r=ie.buildFragment([e],t,i),i&&i.length&&ie(i).remove(),ie.merge([],r.childNodes))};var en=ie.fn.load;ie.fn.load=function(e,t,n){if("string"!=typeof e&&en)return en.apply(this,arguments);var r,i,o,a=this,s=e.indexOf(" ");return s>=0&&(r=ie.trim(e.slice(s,e.length)),e=e.slice(0,s)),ie.isFunction(t)?(n=t,t=void 0):t&&"object"==typeof t&&(o="POST"),a.length>0&&ie.ajax({url:e,type:o,dataType:"html",data:t}).done(function(e){i=arguments,a.html(r?ie("<div>").append(ie.parseHTML(e)).find(r):e)}).complete(n&&function(e,t){a.each(n,i||[e.responseText,t,e])}),this},ie.each(["ajaxStart","ajaxStop","ajaxComplete","ajaxError","ajaxSuccess","ajaxSend"],function(e,t){ie.fn[t]=function(e){return this.on(t,e)}}),ie.expr.filters.animated=function(e){return ie.grep(ie.timers,function(t){return e===t.elem}).length};var tn=e.document.documentElement;ie.offset={setOffset:function(e,t,n){var r,i,o,a,s,l,u,c=ie.css(e,"position"),d=ie(e),f={};"static"===c&&(e.style.position="relative"),s=d.offset(),o=ie.css(e,"top"),l=ie.css(e,"left"),u=("absolute"===c||"fixed"===c)&&ie.inArray("auto",[o,l])>-1,u?(r=d.position(),a=r.top,i=r.left):(a=parseFloat(o)||0,i=parseFloat(l)||0),ie.isFunction(t)&&(t=t.call(e,n,s)),null!=t.top&&(f.top=t.top-s.top+a),null!=t.left&&(f.left=t.left-s.left+i),"using"in t?t.using.call(e,f):d.css(f)}},ie.fn.extend({offset:function(e){if(arguments.length)return void 0===e?this:this.each(function(t){ie.offset.setOffset(this,e,t)});var t,n,r={top:0,left:0},i=this[0],o=i&&i.ownerDocument;return o?(t=o.documentElement,ie.contains(t,i)?(typeof i.getBoundingClientRect!==Te&&(r=i.getBoundingClientRect()),n=V(o),{top:r.top+(n.pageYOffset||t.scrollTop)-(t.clientTop||0),left:r.left+(n.pageXOffset||t.scrollLeft)-(t.clientLeft||0)}):r):void 0},position:function(){if(this[0]){var e,t,n={top:0,left:0},r=this[0];return"fixed"===ie.css(r,"position")?t=r.getBoundingClientRect():(e=this.offsetParent(),t=this.offset(),ie.nodeName(e[0],"html")||(n=e.offset()),n.top+=ie.css(e[0],"borderTopWidth",!0),n.left+=ie.css(e[0],"borderLeftWidth",!0)),{top:t.top-n.top-ie.css(r,"marginTop",!0),left:t.left-n.left-ie.css(r,"marginLeft",!0)}}},offsetParent:function(){return this.map(function(){for(var e=this.offsetParent||tn;e&&!ie.nodeName(e,"html")&&"static"===ie.css(e,"position");)e=e.offsetParent;return e||tn})}}),ie.each({scrollLeft:"pageXOffset",scrollTop:"pageYOffset"},function(e,t){var n=/Y/.test(t);ie.fn[e]=function(r){return Ae(this,function(e,r,i){var o=V(e);return void 0===i?o?t in o?o[t]:o.document.documentElement[r]:e[r]:void(o?o.scrollTo(n?ie(o).scrollLeft():i,n?i:ie(o).scrollTop()):e[r]=i)},e,r,arguments.length,null)}}),ie.each(["top","left"],function(e,t){ie.cssHooks[t]=k(ne.pixelPosition,function(e,n){return n?(n=et(e,t),nt.test(n)?ie(e).position()[t]+"px":n):void 0})}),ie.each({Height:"height",Width:"width"},function(e,t){ie.each({padding:"inner"+e,content:t,"":"outer"+e},function(n,r){ie.fn[r]=function(r,i){var o=arguments.length&&(n||"boolean"!=typeof r),a=n||(!0===r||!0===i?"margin":"border");return Ae(this,function(t,n,r){var i;return ie.isWindow(t)?t.document.documentElement["client"+e]:9===t.nodeType?(i=t.documentElement,Math.max(t.body["scroll"+e],i["scroll"+e],t.body["offset"+e],i["offset"+e],i["client"+e])):void 0===r?ie.css(t,n,a):ie.style(t,n,r,a)},t,o?r:void 0,o,null)}})}),ie.fn.size=function(){return this.length},ie.fn.andSelf=ie.fn.addBack,"function"==typeof define&&define.amd&&define("jquery",[],function(){return ie});var nn=e.jQuery,rn=e.$;return ie.noConflict=function(t){return e.$===ie&&(e.$=rn),t&&e.jQuery===ie&&(e.jQuery=nn),ie},typeof t===Te&&(e.jQuery=e.$=ie),ie});
//script: slot
(function(){var t,e,n,o,i,a,r,s,d,c,l,u,f,h,p;window.decko||(window.decko={}),$(window).ready(function(){var t;return $("body").on("click","._stop_propagation",function(t){return t.stopPropagation()}),$("body").on("click",".pointer-item-add",function(t){var e,n,o;return n=$(this).closest(".content-editor").find(".pointer-li:last"),o=n.clone(),e=o.find("input"),e.val(""),n.after(o),decko.initPointerList(e),t.preventDefault()}),$("body").on("click",".pointer-item-delete",function(){var t;return t=$(this).closest("li"),t.closest("ul").find(".pointer-li").length>1?t.remove():t.find("input").val("")}),$("body").on("show.bs.tab","a.load[data-toggle=tab][data-url]",function(t){var e,n;return e=$(t.target).attr("href"),n=$(t.target).data("url"),$(t.target).removeClass("load"),$(e).load(n)}),$("body").on("click",".toolbar-pin.active",function(t){return t.preventDefault(),$(this).blur(),$(".toolbar-pin").removeClass("active").addClass("inactive"),$.ajax("/*toolbar_pinned",{type:"PUT",data:"card[content]=false"})}),$("body").on("click",".toolbar-pin.inactive",function(t){return t.preventDefault(),$(this).blur(),$(".toolbar-pin").removeClass("inactive").addClass("active"),$.ajax("/*toolbar_pinned",{type:"PUT",data:"card[content]=true"})}),$("body").on("click",".btn-item-delete",function(){return $(this).find(".glyphicon").addClass("glyphicon-hourglass").removeClass("glyphicon-remove")}),$("body").on("click",".btn-item-add",function(){return $(this).find(".glyphicon").addClass("glyphicon-hourglass").removeClass("glyphicon-plus")}),$("body").on("mouseenter",".btn-item-delete",function(){return $(this).find(".glyphicon").addClass("glyphicon-remove").removeClass("glyphicon-ok"),$(this).addClass("btn-danger").removeClass("btn-primary")}),$("body").on("mouseleave",".btn-item-delete",function(){return $(this).find(".glyphicon").addClass("glyphicon-ok").removeClass("glyphicon-remove"),$(this).addClass("btn-primary").removeClass("btn-danger")}),$("body").on("hidden.bs.modal",function(t){var e,n,o,i,a;if(n=$(t.target).find(".modal-dialog > .modal-content"),"modal-main-slot"!==$(t.target).attr("id"))return i=$(t.target).slot(),e=i.find(".menu-slot:first"),a=decko.rootPath+"/~"+i.data("card-id"),o={view:"menu"},i.isMain()&&(o.is_main=!0),n.empty(),$.ajax(a,{type:"GET",data:o,success:function(t){return e.replaceWith(t)}})}),$("body").on("click",".perm-vals input",function(){return $(this).slot().find("#inherit").attr("checked",!1)}),$("body").on("click",".perm-editor #inherit",function(){var t;return t=$(this).slot(),t.find(".perm-group input:checked").attr("checked",!1),t.find(".perm-indiv input").val("")}),$("body").on("click",".rule-submit-button",function(){var t,e;return e=$(this).closest("form"),t=e.find(".set-editor input:checked"),t.val()?!t.attr("warning")||confirm(t.attr("warning")):(e.find(".set-editor").addClass("attention"),$(this).notify("To what Set does this Rule apply?"),!1)}),$("body").on("click",".submit-modal",function(){return $(this).closest(".modal-content").find("form").submit()}),$("body").on("click",".shade-view h1",function(){var t;if(t=$(this).slot().find(".shade-content").is(":hidden"),f($(this).closest(".pointer-list").find(".shade-content:visible").parent()),t)return f($(this).slot())}),(t=$(".shade-view h1")[0])&&$(t).trigger("click"),$("body").on("change",".go-to-selected select",function(){var t;if(""!==(t=$(this).val()))return window.location=decko.rootPath+escape(t)}),$("body").on("click",".open-slow-items",function(){var t;return t=$(this).closest(".panel-group"),t.find(".open-slow-items").removeClass("open-slow-items").addClass("close-slow-items"),t.find(".toggle-fast-items").text("show < 100ms"),t.find(".duration-ok").hide(),t.find(".panel-danger > .panel-collapse").collapse("show").find("a > span").addClass("show-fast-items")}),$("body").on("click",".close-slow-items",function(){var t;return t=$(this).closest(".panel-group"),t.find(".close-slow-items").removeClass("close-slow-items").addClass("open-slow-items"),t.find(".toggle-fast-items").text("hide < 100ms"),t.find(".panel-danger > .panel-collapse").collapse("hide").removeClass("show-fast-items"),t.find(".duration-ok").show()}),$("body").on("click",".toggle-fast-items",function(){var t;return t=$(this).closest(".panel-group"),"hide < 100ms"===$(this).text()?(t.find(".duration-ok").hide(),$(this).text("show < 100ms")):(t.find(".duration-ok").show(),$(this).text("hide < 100ms"))}),$("body").on("click",".show-fast-items",function(t){var e;return $(this).removeClass("show-fast-items"),e=$(this).closest(".panel-group"),e.find(".duration-ok").show(),e.find(".show-fast-items").removeClass("show-fast-items"),e.find(".panel-collapse").collapse("show"),t.stopPropagation()})}),f=function(t){return t.find(".shade-content").slideToggle(1e3),t.find(".glyphicon").toggleClass("glyphicon-triangle-right glpyphicon-triangle-bottom")},$.extend(decko,{editorContentFunctionMap:{},editorInitFunctionMap:{".date-editor":function(){return this.datepicker({dateFormat:"yy-mm-dd"})},textarea:function(){return $(this).autosize()},".file-upload":function(){return decko.upload_file(this)},".etherpad-textarea":function(){return $(this).closest("form").find(".edit-submit-button").attr("class","etherpad-submit-button")}},addEditor:function(t,e,n){return decko.editorContentFunctionMap[t]=n,decko.editorInitFunctionMap[t]=e}}),jQuery.fn.extend({setContentFieldsFromMap:function(t){var e;return null==t&&(t=decko.editorContentFunctionMap),e=$(this),$.each(t,function(t,n){return e.setContentFields(t,n)})},setContentFields:function(t,e){return $.each(this.find(t),function(){return $(this).setContentField(e)})},setContentField:function(t){var e,n,o;if(e=this.closest(".card-editor").find(".d0-card-content"),n=e.val(),o=t.call(this),e.val(o),n!==o)return e.change()}}),h=function(){var t;if(t=$("body > footer").first(),$("body > article, body > aside").wrapAll("<div class='"+e()+"'/>"),$("body > div > article, body > div > aside").wrapAll('<div class="row row-offcanvas">'),t)return $("body").append(t)},p=function(t){return"<div class='container'><div class='row'>"+t+"</div></div>"},e=function(){return $("body").hasClass("fluid")?"container-fluid":"container"},c=function(t){var e;return e="left"===t?"right":"left","<button class='offcanvas-toggle offcanvas-toggle-"+t+" btn btn-secondary hidden-sm-up' data-toggle='offcanvas-"+t+"'><i class='material-icons'>chevron-"+e+"</i></button>"},l=function(t){var e,n;return e=$("body > article").first(),n=$("body > aside").first(),e.addClass("col-xs-12 col-sm-9 col-md-9"),n.addClass("col-xs-6 col-sm-3 col-md-3 sidebar-offcanvas sidebar-offcanvas-"+t),"left"===t?$("body").append(n).append(e):$("body").append(e).append(n),h(),e.prepend(p(c(t)))},o=function(){var t,e,n,o,i;return t=$("body > article").first(),e=$("body > aside").first(),n=$($("body > aside")[1]),t.addClass("col-xs-12 col-sm-6"),o="col-xs-6 col-sm-3 sidebar-offcanvas",e.addClass(o+" sidebar-offcanvas-left"),n.addClass(o+" sidebar-offcanvas-right"),$("body").append(e).append(t).append(n),h(),i=p(c("right")+c("left")),t.prepend(i)},$.fn.extend({toggleText:function(t,e){return this.text(this.text()===e?t:e),this}}),$(window).ready(function(){switch(!1){case!$("body").hasClass("right-sidebar"):l("right");break;case!$("body").hasClass("left-sidebar"):l("left");break;case!$("body").hasClass("two-sidebar"):o()}return $('[data-toggle="offcanvas-left"]').click(function(){return $(".row-offcanvas").removeClass("right-active").toggleClass("left-active"),$(this).find("i.material-icons").toggleText("chevron_left chevron_right")}),$('[data-toggle="offcanvas-right"]').click(function(){return $(".row-offcanvas").removeClass("left-active").toggleClass("right-active"),$(this).find("i.material-icons").toggleText("chevron_left chevron_right")})}),$(window).ready(function(){return $("._navbox").autocomplete({html:"html",source:a,select:r})}),d=0,a=function(t,e){var n,o;return n=this.element.closest("form"),o=n.serialize()+"&view=complete",this.xhr=$.ajax({url:decko.prepUrl(decko.rootPath+"/:search.json"),data:o,dataType:"json",wagReq:++d,success:function(n){if(this.wagReq===d)return e(s(t.term,n))},error:function(){if(this.wagReq===d)return e([])}})},s=function(t,e){var n;return n=[],$.each(["search","add","new"],function(o,i){var a,r;if(r=e[i])return a={value:t,prefix:i,icon:"add",label:'<strong class="highlight">'+t+"</strong>"},"search"===i?(a.icon=i,a.term=t):"add"===i?a.href="/card/new?card[name]="+encodeURIComponent(r):"new"===i&&(a.type="add",a.href="/new/"+r[1]),n.push(a)}),$.each(e["goto"],function(t,e){return n.push({icon:"arrow_forward",prefix:"go to",value:e[0],label:e[1],href:"/"+e[2]})}),$.each(n,function(t,e){return e.label='<i class="material-icons">'+e.icon+'</i><span class="navbox-item-label">'+e.prefix+':</span> <span class="navbox-item-value">'+e.label+"</span>"}),n},r=function(t,e){return e.item.term?$(this).closest("form").submit():window.location=decko.rootPath+e.item.href,$(this).attr("disabled","disabled")},$.extend(decko,{upload_file:function(t){var e,n;return $(t).bind("fileuploadsubmit",function(t,e){var n,o,i;return n=$(this),o=n.siblings(".attachment_card_name:first").attr("name"),i=n.siblings("#attachment_type_id").val(),e.formData={"card[type_id]":i,attachment_upload:o}}),e=$(t),n=e.closest("form").attr("action").indexOf("update")>-1?"/card/update/"+$(t).siblings("#file_card_name").val():"/card/create",$(t).fileupload({url:n,dataType:"html",done:decko.doneFile,add:decko.chooseFile,progressall:decko.progressallFile})},chooseFile:function(t,e){var n;return e.form.find("button[type=submit]").attr("disabled",!0),n=$(this).closest(".card-editor"),$("#progress").show(),n.append('<input type="hidden" class="extra_upload_param" value="true" name="attachment_upload">'),n.append('<input type="hidden" class="extra_upload_param" value="preview_editor" name="view">'),e.submit(),n.find(".choose-file").hide(),n.find(".extra_upload_param").remove()},progressallFile:function(t,e){var n;return n=parseInt(e.loaded/e.total*100,10),$("#progress .progress-bar").css("width",n+"%")},doneFile:function(t,e){var n;return n=$(this).closest(".card-editor"),n.find(".chosen-file").replaceWith(e.result),e.form.find("button[type=submit]").attr("disabled",!1)}}),$(window).ready(function(){return $("body").on("click",".cancel-upload",function(){var t;return t=$(this).closest(".card-editor"),t.find(".choose-file").show(),t.find(".chosen-file").empty(),t.find(".progress").show(),t.find("#progress .progress-bar").css("width","0%"),t.find("#progress").hide()})}),$.extend(decko,{initializeEditors:function(t,e){return null==e&&(e=decko.editorInitFunctionMap),$.each(e,function(e,n){return $.each(t.find(e),function(){return n.call($(this))})})},prepUrl:function(t,e){var n,o,i;return i={},n=$("#main").children(".card-slot").data("cardName"),null!=n&&(i.main=n),e&&(e.isMain()&&(i.is_main=!0),null!=(o=e.data("slot"))&&decko.slotParams(o,i,"slot")),t+(t.match(/\?/)?"&":"?")+$.param(i)},slotParams:function(t,e,n){return $.each(t,function(t,o){var i;return i=n+"["+u(t)+"]","items"===t?decko.slotParams(o,e,i):e[i]=o})},slotReady:function(t){return $("document").ready(function(){return $("body").on("slotReady",".card-slot",function(e){return e.stopPropagation(),t.call(this,$(this))})})},pingName:function(t,e){return $.getJSON(decko.rootPath+"/",{format:"json",view:"status","card[name]":t},e)},isTouchDevice:function(){return!!("ontouchstart"in window||window.DocumentTouch&&document instanceof DocumentTouch)||n()}},n=function(t){return t=navigator.userAgent||navigator.vendor||window.opera,/(android|bb\d+|meego).+mobile|avantgo|bada\/|blackberry|blazer|compal|elaine|fennec|hiptop|iemobile|ip(hone|od)|iris|kindle|lge |maemo|midp|mmp|mobile.+firefox|netfront|opera m(ob|in)i|palm( os)?|phone|p(ixi|re)\/|plucker|pocket|psp|series(4|6)0|symbian|treo|up\.(browser|link)|vodafone|wap|windows ce|xda|xiino/i.test(t)||/1207|6310|6590|3gso|4thp|50[1-6]i|770s|802s|a wa|abac|ac(er|oo|s\-)|ai(ko|rn)|al(av|ca|co)|amoi|an(ex|ny|yw)|aptu|ar(ch|go)|as(te|us)|attw|au(di|\-m|r |s )|avan|be(ck|ll|nq)|bi(lb|rd)|bl(ac|az)|br(e|v)w|bumb|bw\-(n|u)|c55\/|capi|ccwa|cdm\-|cell|chtm|cldc|cmd\-|co(mp|nd)|craw|da(it|ll|ng)|dbte|dc\-s|devi|dica|dmob|do(c|p)o|ds(12|\-d)|el(49|ai)|em(l2|ul)|er(ic|k0)|esl8|ez([4-7]0|os|wa|ze)|fetc|fly(\-|_)|g1 u|g560|gene|gf\-5|g\-mo|go(\.w|od)|gr(ad|un)|haie|hcit|hd\-(m|p|t)|hei\-|hi(pt|ta)|hp( i|ip)|hs\-c|ht(c(\-| |_|a|g|p|s|t)|tp)|hu(aw|tc)|i\-(20|go|ma)|i230|iac( |\-|\/)|ibro|idea|ig01|ikom|im1k|inno|ipaq|iris|ja(t|v)a|jbro|jemu|jigs|kddi|keji|kgt( |\/)|klon|kpt |kwc\-|kyo(c|k)|le(no|xi)|lg( g|\/(k|l|u)|50|54|\-[a-w])|libw|lynx|m1\-w|m3ga|m50\/|ma(te|ui|xo)|mc(01|21|ca)|m\-cr|me(rc|ri)|mi(o8|oa|ts)|mmef|mo(01|02|bi|de|do|t(\-| |o|v)|zz)|mt(50|p1|v )|mwbp|mywa|n10[0-2]|n20[2-3]|n30(0|2)|n50(0|2|5)|n7(0(0|1)|10)|ne((c|m)\-|on|tf|wf|wg|wt)|nok(6|i)|nzph|o2im|op(ti|wv)|oran|owg1|p800|pan(a|d|t)|pdxg|pg(13|\-([1-8]|c))|phil|pire|pl(ay|uc)|pn\-2|po(ck|rt|se)|prox|psio|pt\-g|qa\-a|qc(07|12|21|32|60|\-[2-7]|i\-)|qtek|r380|r600|raks|rim9|ro(ve|zo)|s55\/|sa(ge|ma|mm|ms|ny|va)|sc(01|h\-|oo|p\-)|sdk\/|se(c(\-|0|1)|47|mc|nd|ri)|sgh\-|shar|sie(\-|m)|sk\-0|sl(45|id)|sm(al|ar|b3|it|t5)|so(ft|ny)|sp(01|h\-|v\-|v )|sy(01|mb)|t2(18|50)|t6(00|10|18)|ta(gt|lk)|tcl\-|tdg\-|tel(i|m)|tim\-|t\-mo|to(pl|sh)|ts(70|m\-|m3|m5)|tx\-9|up(\.b|g1|si)|utst|v400|v750|veri|vi(rg|te)|vk(40|5[0-3]|\-v)|vm40|voda|vulc|vx(52|53|60|61|70|80|81|83|85|98)|w3c(\-| )|webc|whit|wi(g |nc|nw)|wmlb|wonu|x700|yas\-|your|zeto|zte\-/i.test(t.substr(0,4))}),jQuery.fn.extend({slot:function(t){return null==t&&(t="success"),this.data("slot-"+t+"-selector")?this.findSlot(this.data("slot-"+t+"-selector")):this.data("slot-selector")?this.findSlot(this.data("slot-selector")):this.closest(".card-slot")},findSlot:function(t){var e,n;for(n=this.closest(t),e=this.closest(".card-slot");0===n.length&&e.length>0;)n=$(e).find(t),e=$(e).parent().closest(".card-slot");return 0===n.length?$(t):n},setSlotContent:function(t){var e,n;return e=this.slot(),n=$(t),n[0]||(n=t),e.replaceWith(n),n.trigger("slotReady"),n},slotSuccess:function(t){var e,n;return t.redirect?window.location=t.redirect:(n=this.attr("notify-success"),e=this.setSlotContent(t),e.jquery&&(decko.initializeEditors(e),null!=n)?e.notify(n,"success"):void 0)},slotError:function(t,e){return 403===t?this.setSlotContent(e):(this.notify(e,"error"),409===t?this.slot().find(".current_revision_id").val(this.slot().find(".new-current-revision-id").text()):449===t?this.slot().find("g-recaptcha").reloadCaptcha():void 0)},notify:function(t,e){var n,o,i;return i=this.slot(e),o=i.find(".card-notice"),o[0]||(o=$('<div class="card-notice"></div>'),n=i.find(".card-form"),n[0]?$(n[0]).append(o):i.append(o)),o.html(t),o.show("blind")},report:function(t){var e;return e=this.slot().find(".card-report"),!!e[0]&&(e.hide(),e.html(t),e.show("drop",750),setTimeout(function(){return e.hide("drop",750)},3e3))},isMain:function(){return this.slot().parent("#main")[0]},reloadCaptcha:function(){return this[0].empty(),grecaptcha.render(this[0],{sitekey:decko.recaptchaKey})},autosave:function(){var t,e,n,o,i;if(o=this.slot(),!this.attr("no-autosave")){if(n=this.closest(".form-group"),n[0]){if(!(e=n.data("cardId")))return;": "+n.data("cardName")}else e=o.data("cardId"),"";return i=decko.rootPath+"/update/~"+e,t=$("#edit_card_"+e).serializeArray().reduce(function(t,e){return t[e.name]=e.value,t},{draft:"true","success[view]":"blank"}),$.ajax(i,{data:t,type:"POST"})}}}),setInterval(function(){return $(".card-form").setContentFieldsFromMap()},2e4),$(window).ready(function(){return $.ajaxSetup({cache:!1}),setTimeout(function(){return decko.initializeEditors($("body"))},10),$("body").on("ajax:success",".slotter",function(t,e){var n;if(!t.slotSuccessful)return n=$(this).slot().offset().top,$(this).slotSuccess(e),$(this).hasClass("close-modal")&&$(this).closest(".modal").modal("hide"),$(this).hasClass("card-paging-link")&&$("body").scrollTop(n),t.slotSuccessful=!0}),$("body").on("loaded.bs.modal",null,function(t){if(!t.slotSuccessful)return decko.initializeEditors($(t.target)),$(t.target).find(".card-slot").trigger("slotReady"),t.slotSuccessful=!0}),$("body").on("ajax:error",".slotter",function(t,e){return $(this).slotError(e.status,e.responseText)}),$("body").on("click","button.slotter",function(){return!!$.rails.allowAction($(this))&&$.rails.handleRemote($(this))}),$("body").on("ajax:beforeSend",".slotter",function(e,n,o){var a,r,s,d,c;if(!o.skip_before_send&&(o.url.match(/home_view/)||(o.url=decko.prepUrl(o.url,$(this).slot())),$(this).is("form"))){if(decko.recaptchaKey&&"on"===$(this).attr("recaptcha")&&!$(this).find(".g-recaptcha")[0])return $(".g-recaptcha")[0]?t(this):i(this),!1;if(r=$(this).data("file-data"))return d=$(this).find(".file-upload"),d[1]?($(this).notify("Wagn does not yet support multiple files in a single form.","error"),!1):(c=d.data("blueimpFileupload"),c._isXHRUpload(c.options)||($(this).find("[name=success]").val("_self"),o.url+="&simulate_xhr=true",s=function(t){return t.find("body").html()},o.dataFilter=s),a=$.extend(o,c._getAJAXSettings(r),{url:o.url}),a.skip_before_send=!0,$.ajax(a),!1)}}),$("body").on("submit",".card-form",function(){return $(this).setContentFieldsFromMap(),$(this).find(".d0-card-content").attr("no-autosave","true"),!0}),$("body").on("click",".submitter",function(){return $(this).closest("form").submit()}),$("body").on("click",".renamer-updater",function(){return $(this).closest("form").find("#card_update_referers").val("true")}),$("body").on("submit",".edit_name-view .card-form",function(){var t;if(t=$(this).find(".alert"),t.is(":hidden"))return $(this).find("#referers").val()>0&&$(this).find(".renamer-updater").show(),t.show("blind"),!1}),$("body").on("click",".follow-updater",function(){return $(this).closest("form").find("#card_update_all_users").val("true")}),$("body").on("submit",".edit-view.SELF-Xfollow_default .card-form",function(){var t;if(t=$(this).find(".confirm_update_all-view"),t.is(":hidden"))return $(this).find(".follow-updater").show(),t.show("blind"),!1}),$("body").on("click","button.redirecter",function(){return window.location=$(this).attr("href")}),decko.noDoubleClick||$("body").on("dblclick","div",function(){var t,e;return e=$(this),!e.closest(".nodblclick")[0]&&(!e.closest(".d0-card-header")[0]&&(t=e.slot(),!t.find(".card-editor")[0]&&(!!t.data("cardId")&&(t.addClass("slotter"),t.attr("href",decko.rootPath+"/card/edit/~"+t.data("cardId")),$.rails.handleRemote(t),!1))))}),$("body").on("submit","form.slotter",function(){var t,e;if((e=$(this).attr("main-success"))&&$(this).isMain()&&(t=$(this).find("[name=success]"))&&!t.val().match(/^REDIRECT/))return t.val("REDIRECT"===e?e+": "+t.val():e)}),$("body").on("change",".live-type-field",function(){return $(this).data("params",$(this).closest("form").serialize()),$(this).data("url",$(this).attr("href"))}),$("body").on("change",".edit-type-field",function(){return $(this).closest("form").submit()}),$("body").on("change",".autosave .d0-card-content",function(){var t;return t=$(this),setTimeout(function(){return t.autosave()},500)}),$("body").on("mouseenter","[hover_content]",function(){return $(this).attr("hover_restore",$(this).html()),$(this).html($(this).attr("hover_content"))}),$("body").on("mouseleave","[hover_content]",function(){return $(this).html($(this).attr("hover_restore"))}),$("body").on("keyup",".name-editor input",function(){var t,e;return t=$(this),e=t.val(),decko.pingName(e,function(n){var o,i,a,r,s,d;return t.val()!==e?null:(d=n.status,d?(o=t.parent(),i=t.closest("fieldset").find("legend"),a=i.find(".name-messages"),a[0]||(a=$('<span class="name-messages"></span>'),i.append(a)),o.removeClass("real-name virtual-name known-name"),s=t.slot().data("cardId"),"unknown"===d||s&&parseInt(s)===n.id?a.html(""):(o.addClass(d+"-name known-name"),r="virtual"===d?"in virtual":"already in",a.html('"<a href="'+decko.rootPath+"/"+n.url_key+'">'+e+'</a>" '+r+" use"))):void 0)})}),$("body").on("click",".render-error-link",function(t){var e;return e=$(this).closest(".render-error").find(".render-error-message"),e.show(),t.preventDefault()}),$("card-view-placeholder").each(function(){var t;return t=$(this),$.get(t.data("url"),function(e){return t.replaceWith(e)})})}),i=function(t){var e,n;return e=$("<div class='g-recaptcha' data-sitekey='"+decko.recaptchaKey+"'></div>"),$(t).children().last().after(e),n="https://www.google.com/recaptcha/api.js",$.getScript(n)},t=function(t){var e;return e=$('<div class="g-recaptcha"></div>'),$(t).children().last().after(e),grecaptcha.render(e,{sitekey:decko.recaptchaKey})},u=function(t){return t.replace(/([a-z])([A-Z])/g,function(t){return t[0]+"_"+t[1].toLowerCase()})},decko.slotReady(function(t){return t.find("._disappear").delay(5e3).animate({height:0},1e3,function(){return $(this).hide()})})}).call(this);
//script: jquery helper
/*! jQuery UI - v1.9.2 - 2012-11-23
* http://jqueryui.com
* Includes: jquery.ui.core.js, jquery.ui.widget.js, jquery.ui.mouse.js, jquery.ui.draggable.js, jquery.ui.droppable.js, jquery.ui.resizable.js, jquery.ui.selectable.js, jquery.ui.sortable.js, jquery.ui.effect.js, jquery.ui.accordion.js, jquery.ui.autocomplete.js, jquery.ui.button.js, jquery.ui.datepicker.js, jquery.ui.dialog.js, jquery.ui.effect-blind.js, jquery.ui.effect-bounce.js, jquery.ui.effect-clip.js, jquery.ui.effect-drop.js, jquery.ui.effect-explode.js, jquery.ui.effect-fade.js, jquery.ui.effect-fold.js, jquery.ui.effect-highlight.js, jquery.ui.effect-pulsate.js, jquery.ui.effect-scale.js, jquery.ui.effect-shake.js, jquery.ui.effect-slide.js, jquery.ui.effect-transfer.js, jquery.ui.menu.js, jquery.ui.position.js, jquery.ui.progressbar.js, jquery.ui.slider.js, jquery.ui.spinner.js, jquery.ui.tabs.js, jquery.ui.tooltip.js
* Copyright 2012 jQuery Foundation and other contributors; Licensed MIT */
!function(t,e){function i(e,i){var n,a,o,r=e.nodeName.toLowerCase();return"area"===r?(n=e.parentNode,a=n.name,!(!e.href||!a||"map"!==n.nodeName.toLowerCase())&&(!!(o=t("img[usemap=#"+a+"]")[0])&&s(o))):(/input|select|textarea|button|object/.test(r)?!e.disabled:"a"===r?e.href||i:i)&&s(e)}function s(e){return t.expr.filters.visible(e)&&!t(e).parents().andSelf().filter(function(){return"hidden"===t.css(this,"visibility")}).length}var n=0,a=/^ui-id-\d+$/;t.ui=t.ui||{},t.ui.version||(t.extend(t.ui,{version:"1.9.2",keyCode:{BACKSPACE:8,COMMA:188,DELETE:46,DOWN:40,END:35,ENTER:13,ESCAPE:27,HOME:36,LEFT:37,NUMPAD_ADD:107,NUMPAD_DECIMAL:110,NUMPAD_DIVIDE:111,NUMPAD_ENTER:108,NUMPAD_MULTIPLY:106,NUMPAD_SUBTRACT:109,PAGE_DOWN:34,PAGE_UP:33,PERIOD:190,RIGHT:39,SPACE:32,TAB:9,UP:38}}),t.fn.extend({_focus:t.fn.focus,focus:function(e,i){return"number"==typeof e?this.each(function(){var s=this;setTimeout(function(){t(s).focus(),i&&i.call(s)},e)}):this._focus.apply(this,arguments)},scrollParent:function(){var e;return e=t.ui.ie&&/(static|relative)/.test(this.css("position"))||/absolute/.test(this.css("position"))?this.parents().filter(function(){return/(relative|absolute|fixed)/.test(t.css(this,"position"))&&/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0):this.parents().filter(function(){return/(auto|scroll)/.test(t.css(this,"overflow")+t.css(this,"overflow-y")+t.css(this,"overflow-x"))}).eq(0),/fixed/.test(this.css("position"))||!e.length?t(document):e},zIndex:function(i){if(i!==e)return this.css("zIndex",i);if(this.length)for(var s,n,a=t(this[0]);a.length&&a[0]!==document;){if(("absolute"===(s=a.css("position"))||"relative"===s||"fixed"===s)&&(n=parseInt(a.css("zIndex"),10),!isNaN(n)&&0!==n))return n;a=a.parent()}return 0},uniqueId:function(){return this.each(function(){this.id||(this.id="ui-id-"+ ++n)})},removeUniqueId:function(){return this.each(function(){a.test(this.id)&&t(this).removeAttr("id")})}}),t.extend(t.expr[":"],{data:t.expr.createPseudo?t.expr.createPseudo(function(e){return function(i){return!!t.data(i,e)}}):function(e,i,s){return!!t.data(e,s[3])},focusable:function(e){return i(e,!isNaN(t.attr(e,"tabindex")))},tabbable:function(e){var s=t.attr(e,"tabindex"),n=isNaN(s);return(n||s>=0)&&i(e,!n)}}),t(function(){var e=document.body,i=e.appendChild(i=document.createElement("div"));i.offsetHeight,t.extend(i.style,{minHeight:"100px",height:"auto",padding:0,borderWidth:0}),t.support.minHeight=100===i.offsetHeight,t.support.selectstart="onselectstart"in i,e.removeChild(i).style.display="none"}),t("<a>").outerWidth(1).jquery||t.each(["Width","Height"],function(i,s){function n(e,i,s,n){return t.each(a,function(){i-=parseFloat(t.css(e,"padding"+this))||0,s&&(i-=parseFloat(t.css(e,"border"+this+"Width"))||0),n&&(i-=parseFloat(t.css(e,"margin"+this))||0)}),i}var a="Width"===s?["Left","Right"]:["Top","Bottom"],o=s.toLowerCase(),r={innerWidth:t.fn.innerWidth,innerHeight:t.fn.innerHeight,outerWidth:t.fn.outerWidth,outerHeight:t.fn.outerHeight};t.fn["inner"+s]=function(i){return i===e?r["inner"+s].call(this):this.each(function(){t(this).css(o,n(this,i)+"px")})},t.fn["outer"+s]=function(e,i){return"number"!=typeof e?r["outer"+s].call(this,e):this.each(function(){t(this).css(o,n(this,e,!0,i)+"px")})}}),t("<a>").data("a-b","a").removeData("a-b").data("a-b")&&(t.fn.removeData=function(e){return function(i){return arguments.length?e.call(this,t.camelCase(i)):e.call(this)}}(t.fn.removeData)),function(){var e=/msie ([\w.]+)/.exec(navigator.userAgent.toLowerCase())||[];t.ui.ie=!!e.length,t.ui.ie6=6===parseFloat(e[1],10)}(),t.fn.extend({disableSelection:function(){return this.bind((t.support.selectstart?"selectstart":"mousedown")+".ui-disableSelection",function(t){t.preventDefault()})},enableSelection:function(){return this.unbind(".ui-disableSelection")}}),t.extend(t.ui,{plugin:{add:function(e,i,s){var n,a=t.ui[e].prototype;for(n in s)a.plugins[n]=a.plugins[n]||[],a.plugins[n].push([i,s[n]])},call:function(t,e,i){var s,n=t.plugins[e];if(n&&t.element[0].parentNode&&11!==t.element[0].parentNode.nodeType)for(s=0;s<n.length;s++)t.options[n[s][0]]&&n[s][1].apply(t.element,i)}},contains:t.contains,hasScroll:function(e,i){if("hidden"===t(e).css("overflow"))return!1;var s=i&&"left"===i?"scrollLeft":"scrollTop",n=!1;return e[s]>0||(e[s]=1,n=e[s]>0,e[s]=0,n)},isOverAxis:function(t,e,i){return t>e&&t<e+i},isOver:function(e,i,s,n,a,o){return t.ui.isOverAxis(e,s,a)&&t.ui.isOverAxis(i,n,o)}}))}(jQuery),function(t,e){var i=0,s=Array.prototype.slice,n=t.cleanData;t.cleanData=function(e){for(var i,s=0;null!=(i=e[s]);s++)try{t(i).triggerHandler("remove")}catch(t){}n(e)},t.widget=function(e,i,s){var n,a,o,r,l=e.split(".")[0];e=e.split(".")[1],n=l+"-"+e,s||(s=i,i=t.Widget),t.expr[":"][n.toLowerCase()]=function(e){return!!t.data(e,n)},t[l]=t[l]||{},a=t[l][e],o=t[l][e]=function(t,e){if(!this._createWidget)return new o(t,e);arguments.length&&this._createWidget(t,e)},t.extend(o,a,{version:s.version,_proto:t.extend({},s),_childConstructors:[]}),r=new i,r.options=t.widget.extend({},r.options),t.each(s,function(e,n){t.isFunction(n)&&(s[e]=function(){var t=function(){return i.prototype[e].apply(this,arguments)},s=function(t){return i.prototype[e].apply(this,t)};return function(){var e,i=this._super,a=this._superApply;return this._super=t,this._superApply=s,e=n.apply(this,arguments),this._super=i,this._superApply=a,e}}())}),o.prototype=t.widget.extend(r,{widgetEventPrefix:a?r.widgetEventPrefix:e},s,{constructor:o,namespace:l,widgetName:e,widgetBaseClass:n,widgetFullName:n}),a?(t.each(a._childConstructors,function(e,i){var s=i.prototype;t.widget(s.namespace+"."+s.widgetName,o,i._proto)}),delete a._childConstructors):i._childConstructors.push(o),t.widget.bridge(e,o)},t.widget.extend=function(i){for(var n,a,o=s.call(arguments,1),r=0,l=o.length;r<l;r++)for(n in o[r])a=o[r][n],o[r].hasOwnProperty(n)&&a!==e&&(t.isPlainObject(a)?i[n]=t.isPlainObject(i[n])?t.widget.extend({},i[n],a):t.widget.extend({},a):i[n]=a);return i},t.widget.bridge=function(i,n){var a=n.prototype.widgetFullName||i;t.fn[i]=function(o){var r="string"==typeof o,l=s.call(arguments,1),h=this;return o=!r&&l.length?t.widget.extend.apply(null,[o].concat(l)):o,r?this.each(function(){var s,n=t.data(this,a);return n?t.isFunction(n[o])&&"_"!==o.charAt(0)?(s=n[o].apply(n,l),s!==n&&s!==e?(h=s&&s.jquery?h.pushStack(s.get()):s,!1):void 0):t.error("no such method '"+o+"' for "+i+" widget instance"):t.error("cannot call methods on "+i+" prior to initialization; attempted to call method '"+o+"'")}):this.each(function(){var e=t.data(this,a);e?e.option(o||{})._init():t.data(this,a,new n(o,this))}),h}},t.Widget=function(){},t.Widget._childConstructors=[],t.Widget.prototype={widgetName:"widget",widgetEventPrefix:"",defaultElement:"<div>",options:{disabled:!1,create:null},_createWidget:function(e,s){s=t(s||this.defaultElement||this)[0],this.element=t(s),this.uuid=i++,this.eventNamespace="."+this.widgetName+this.uuid,this.options=t.widget.extend({},this.options,this._getCreateOptions(),e),this.bindings=t(),this.hoverable=t(),this.focusable=t(),s!==this&&(t.data(s,this.widgetName,this),t.data(s,this.widgetFullName,this),this._on(!0,this.element,{remove:function(t){t.target===s&&this.destroy()}}),this.document=t(s.style?s.ownerDocument:s.document||s),this.window=t(this.document[0].defaultView||this.document[0].parentWindow)),this._create(),this._trigger("create",null,this._getCreateEventData()),this._init()},_getCreateOptions:t.noop,_getCreateEventData:t.noop,_create:t.noop,_init:t.noop,destroy:function(){this._destroy(),this.element.unbind(this.eventNamespace).removeData(this.widgetName).removeData(this.widgetFullName).removeData(t.camelCase(this.widgetFullName)),this.widget().unbind(this.eventNamespace).removeAttr("aria-disabled").removeClass(this.widgetFullName+"-disabled ui-state-disabled"),this.bindings.unbind(this.eventNamespace),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")},_destroy:t.noop,widget:function(){return this.element},option:function(i,s){var n,a,o,r=i;if(0===arguments.length)return t.widget.extend({},this.options);if("string"==typeof i)if(r={},n=i.split("."),i=n.shift(),n.length){for(a=r[i]=t.widget.extend({},this.options[i]),o=0;o<n.length-1;o++)a[n[o]]=a[n[o]]||{},a=a[n[o]];if(i=n.pop(),s===e)return a[i]===e?null:a[i];a[i]=s}else{if(s===e)return this.options[i]===e?null:this.options[i];r[i]=s}return this._setOptions(r),this},_setOptions:function(t){var e;for(e in t)this._setOption(e,t[e]);return this},_setOption:function(t,e){return this.options[t]=e,"disabled"===t&&(this.widget().toggleClass(this.widgetFullName+"-disabled ui-state-disabled",!!e).attr("aria-disabled",e),this.hoverable.removeClass("ui-state-hover"),this.focusable.removeClass("ui-state-focus")),this},enable:function(){return this._setOption("disabled",!1)},disable:function(){return this._setOption("disabled",!0)},_on:function(e,i,s){var n,a=this;"boolean"!=typeof e&&(s=i,i=e,e=!1),s?(i=n=t(i),this.bindings=this.bindings.add(i)):(s=i,i=this.element,n=this.widget()),t.each(s,function(s,o){function r(){if(e||!0!==a.options.disabled&&!t(this).hasClass("ui-state-disabled"))return("string"==typeof o?a[o]:o).apply(a,arguments)}"string"!=typeof o&&(r.guid=o.guid=o.guid||r.guid||t.guid++);var l=s.match(/^(\w+)\s*(.*)$/),h=l[1]+a.eventNamespace,c=l[2];c?n.delegate(c,h,r):i.bind(h,r)})},_off:function(t,e){e=(e||"").split(" ").join(this.eventNamespace+" ")+this.eventNamespace,t.unbind(e).undelegate(e)},_delay:function(t,e){function i(){return("string"==typeof t?s[t]:t).apply(s,arguments)}var s=this;return setTimeout(i,e||0)},_hoverable:function(e){this.hoverable=this.hoverable.add(e),this._on(e,{mouseenter:function(e){t(e.currentTarget).addClass("ui-state-hover")},mouseleave:function(e){t(e.currentTarget).removeClass("ui-state-hover")}})},_focusable:function(e){this.focusable=this.focusable.add(e),this._on(e,{focusin:function(e){t(e.currentTarget).addClass("ui-state-focus")},focusout:function(e){t(e.currentTarget).removeClass("ui-state-focus")}})},_trigger:function(e,i,s){var n,a,o=this.options[e];if(s=s||{},i=t.Event(i),i.type=(e===this.widgetEventPrefix?e:this.widgetEventPrefix+e).toLowerCase(),i.target=this.element[0],a=i.originalEvent)for(n in a)n in i||(i[n]=a[n]);return this.element.trigger(i,s),!(t.isFunction(o)&&!1===o.apply(this.element[0],[i].concat(s))||i.isDefaultPrevented())}},t.each({show:"fadeIn",hide:"fadeOut"},function(e,i){t.Widget.prototype["_"+e]=function(s,n,a){"string"==typeof n&&(n={effect:n});var o,r=n?!0===n||"number"==typeof n?i:n.effect||i:e;n=n||{},"number"==typeof n&&(n={duration:n}),o=!t.isEmptyObject(n),n.complete=a,n.delay&&s.delay(n.delay),o&&t.effects&&(t.effects.effect[r]||!1!==t.uiBackCompat&&t.effects[r])?s[e](n):r!==e&&s[r]?s[r](n.duration,n.easing,a):s.queue(function(i){t(this)[e](),a&&a.call(s[0]),i()})}}),!1!==t.uiBackCompat&&(t.Widget.prototype._getCreateOptions=function(){return t.metadata&&t.metadata.get(this.element[0])[this.widgetName]})}(jQuery),function(t){var e=!1;t(document).mouseup(function(){e=!1}),t.widget("ui.mouse",{version:"1.9.2",options:{cancel:"input,textarea,button,select,option",distance:1,delay:0},_mouseInit:function(){var e=this;this.element.bind("mousedown."+this.widgetName,function(t){return e._mouseDown(t)}).bind("click."+this.widgetName,function(i){if(!0===t.data(i.target,e.widgetName+".preventClickEvent"))return t.removeData(i.target,e.widgetName+".preventClickEvent"),i.stopImmediatePropagation(),!1}),this.started=!1},_mouseDestroy:function(){this.element.unbind("."+this.widgetName),this._mouseMoveDelegate&&t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate)},_mouseDown:function(i){if(!e){this._mouseStarted&&this._mouseUp(i),this._mouseDownEvent=i;var s=this,n=1===i.which,a=!("string"!=typeof this.options.cancel||!i.target.nodeName)&&t(i.target).closest(this.options.cancel).length;return!(n&&!a&&this._mouseCapture(i))||(this.mouseDelayMet=!this.options.delay,this.mouseDelayMet||(this._mouseDelayTimer=setTimeout(function(){s.mouseDelayMet=!0},this.options.delay)),this._mouseDistanceMet(i)&&this._mouseDelayMet(i)&&(this._mouseStarted=!1!==this._mouseStart(i),!this._mouseStarted)?(i.preventDefault(),!0):(!0===t.data(i.target,this.widgetName+".preventClickEvent")&&t.removeData(i.target,this.widgetName+".preventClickEvent"),this._mouseMoveDelegate=function(t){return s._mouseMove(t)},this._mouseUpDelegate=function(t){return s._mouseUp(t)},t(document).bind("mousemove."+this.widgetName,this._mouseMoveDelegate).bind("mouseup."+this.widgetName,this._mouseUpDelegate),i.preventDefault(),e=!0,!0))}},_mouseMove:function(e){return!t.ui.ie||document.documentMode>=9||e.button?this._mouseStarted?(this._mouseDrag(e),e.preventDefault()):(this._mouseDistanceMet(e)&&this._mouseDelayMet(e)&&(this._mouseStarted=!1!==this._mouseStart(this._mouseDownEvent,e),this._mouseStarted?this._mouseDrag(e):this._mouseUp(e)),!this._mouseStarted):this._mouseUp(e)},_mouseUp:function(e){return t(document).unbind("mousemove."+this.widgetName,this._mouseMoveDelegate).unbind("mouseup."+this.widgetName,this._mouseUpDelegate),this._mouseStarted&&(this._mouseStarted=!1,e.target===this._mouseDownEvent.target&&t.data(e.target,this.widgetName+".preventClickEvent",!0),this._mouseStop(e)),!1},_mouseDistanceMet:function(t){return Math.max(Math.abs(this._mouseDownEvent.pageX-t.pageX),Math.abs(this._mouseDownEvent.pageY-t.pageY))>=this.options.distance},_mouseDelayMet:function(){return this.mouseDelayMet},_mouseStart:function(){},_mouseDrag:function(){},_mouseStop:function(){},_mouseCapture:function(){return!0}})}(jQuery),function(t){t.widget("ui.draggable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"drag",options:{addClasses:!0,appendTo:"parent",axis:!1,connectToSortable:!1,containment:!1,cursor:"auto",cursorAt:!1,grid:!1,handle:!1,helper:"original",iframeFix:!1,opacity:!1,refreshPositions:!1,revert:!1,revertDuration:500,scope:"default",scroll:!0,scrollSensitivity:20,scrollSpeed:20,snap:!1,snapMode:"both",snapTolerance:20,stack:!1,zIndex:!1},_create:function(){"original"!=this.options.helper||/^(?:r|a|f)/.test(this.element.css("position"))||(this.element[0].style.position="relative"),this.options.addClasses&&this.element.addClass("ui-draggable"),this.options.disabled&&this.element.addClass("ui-draggable-disabled"),this._mouseInit()},_destroy:function(){this.element.removeClass("ui-draggable ui-draggable-dragging ui-draggable-disabled"),this._mouseDestroy()},_mouseCapture:function(e){var i=this.options;return!(this.helper||i.disabled||t(e.target).is(".ui-resizable-handle"))&&(this.handle=this._getHandle(e),!!this.handle&&(t(!0===i.iframeFix?"iframe":i.iframeFix).each(function(){t('<div class="ui-draggable-iframeFix" style="background: #fff;"></div>').css({width:this.offsetWidth+"px",height:this.offsetHeight+"px",position:"absolute",opacity:"0.001",zIndex:1e3}).css(t(this).offset()).appendTo("body")}),!0))},_mouseStart:function(e){var i=this.options;return this.helper=this._createHelper(e),this.helper.addClass("ui-draggable-dragging"),this._cacheHelperProportions(),t.ui.ddmanager&&(t.ui.ddmanager.current=this),this._cacheMargins(),this.cssPosition=this.helper.css("position"),this.scrollParent=this.helper.scrollParent(),this.offset=this.positionAbs=this.element.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.originalPosition=this.position=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,i.cursorAt&&this._adjustOffsetFromHelper(i.cursorAt),i.containment&&this._setContainment(),!1===this._trigger("start",e)?(this._clear(),!1):(this._cacheHelperProportions(),t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this._mouseDrag(e,!0),t.ui.ddmanager&&t.ui.ddmanager.dragStart(this,e),!0)},_mouseDrag:function(e,i){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),!i){var s=this._uiHash();if(!1===this._trigger("drag",e,s))return this._mouseUp({}),!1;this.position=s.position}return this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px"),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),!1},_mouseStop:function(e){var i=!1;t.ui.ddmanager&&!this.options.dropBehaviour&&(i=t.ui.ddmanager.drop(this,e)),this.dropped&&(i=this.dropped,this.dropped=!1);for(var s=this.element[0],n=!1;s&&(s=s.parentNode);)s==document&&(n=!0);if(!n&&"original"===this.options.helper)return!1;if("invalid"==this.options.revert&&!i||"valid"==this.options.revert&&i||!0===this.options.revert||t.isFunction(this.options.revert)&&this.options.revert.call(this.element,i)){var a=this;t(this.helper).animate(this.originalPosition,parseInt(this.options.revertDuration,10),function(){!1!==a._trigger("stop",e)&&a._clear()})}else!1!==this._trigger("stop",e)&&this._clear();return!1},_mouseUp:function(e){return t("div.ui-draggable-iframeFix").each(function(){this.parentNode.removeChild(this)}),t.ui.ddmanager&&t.ui.ddmanager.dragStop(this,e),t.ui.mouse.prototype._mouseUp.call(this,e)},cancel:function(){return this.helper.is(".ui-draggable-dragging")?this._mouseUp({}):this._clear(),this},_getHandle:function(e){var i=!this.options.handle||!t(this.options.handle,this.element).length;return t(this.options.handle,this.element).find("*").andSelf().each(function(){this==e.target&&(i=!0)}),i},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e])):"clone"==i.helper?this.element.clone().removeAttr("id"):this.element;return s.parents("body").length||s.appendTo("parent"==i.appendTo?this.element[0].parentNode:i.appendTo),s[0]==this.element[0]||/(fixed|absolute)/.test(s.css("position"))||s.css("position","absolute"),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.element.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.element.css("marginLeft"),10)||0,top:parseInt(this.element.css("marginTop"),10)||0,right:parseInt(this.element.css("marginRight"),10)||0,bottom:parseInt(this.element.css("marginBottom"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),"document"!=e.containment&&"window"!=e.containment||(this.containment=["document"==e.containment?0:t(window).scrollLeft()-this.offset.relative.left-this.offset.parent.left,"document"==e.containment?0:t(window).scrollTop()-this.offset.relative.top-this.offset.parent.top,("document"==e.containment?0:t(window).scrollLeft())+t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,("document"==e.containment?0:t(window).scrollTop())+(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),/^(document|window|parent)$/.test(e.containment)||e.containment.constructor==Array)e.containment.constructor==Array&&(this.containment=e.containment);else{var i=t(e.containment),s=i[0];if(!s)return;var n=(i.offset(),"hidden"!=t(s).css("overflow"));this.containment=[(parseInt(t(s).css("borderLeftWidth"),10)||0)+(parseInt(t(s).css("paddingLeft"),10)||0),(parseInt(t(s).css("borderTopWidth"),10)||0)+(parseInt(t(s).css("paddingTop"),10)||0),(n?Math.max(s.scrollWidth,s.offsetWidth):s.offsetWidth)-(parseInt(t(s).css("borderLeftWidth"),10)||0)-(parseInt(t(s).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left-this.margins.right,(n?Math.max(s.scrollHeight,s.offsetHeight):s.offsetHeight)-(parseInt(t(s).css("borderTopWidth"),10)||0)-(parseInt(t(s).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top-this.margins.bottom],this.relative_container=i}},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"==e?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(e){var i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(s[0].tagName),a=e.pageX,o=e.pageY;if(this.originalPosition){var r;if(this.containment){if(this.relative_container){var l=this.relative_container.offset();r=[this.containment[0]+l.left,this.containment[1]+l.top,this.containment[2]+l.left,this.containment[3]+l.top]}else r=this.containment;e.pageX-this.offset.click.left<r[0]&&(a=r[0]+this.offset.click.left),e.pageY-this.offset.click.top<r[1]&&(o=r[1]+this.offset.click.top),e.pageX-this.offset.click.left>r[2]&&(a=r[2]+this.offset.click.left),e.pageY-this.offset.click.top>r[3]&&(o=r[3]+this.offset.click.top)}if(i.grid){var h=i.grid[1]?this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1]:this.originalPageY;o=r&&(h-this.offset.click.top<r[1]||h-this.offset.click.top>r[3])?h-this.offset.click.top<r[1]?h+i.grid[1]:h-i.grid[1]:h;var c=i.grid[0]?this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0]:this.originalPageX;a=r&&(c-this.offset.click.left<r[0]||c-this.offset.click.left>r[2])?c-this.offset.click.left<r[0]?c+i.grid[0]:c-i.grid[0]:c}}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())}},_clear:function(){this.helper.removeClass("ui-draggable-dragging"),this.helper[0]==this.element[0]||this.cancelHelperRemoval||this.helper.remove(),this.helper=null,this.cancelHelperRemoval=!1},_trigger:function(e,i,s){return s=s||this._uiHash(),t.ui.plugin.call(this,e,[i,s]),"drag"==e&&(this.positionAbs=this._convertPositionTo("absolute")),t.Widget.prototype._trigger.call(this,e,i,s)},plugins:{},_uiHash:function(){return{helper:this.helper,position:this.position,originalPosition:this.originalPosition,offset:this.positionAbs}}}),t.ui.plugin.add("draggable","connectToSortable",{start:function(e,i){var s=t(this).data("draggable"),n=s.options,a=t.extend({},i,{item:s.element});s.sortables=[],t(n.connectToSortable).each(function(){var i=t.data(this,"sortable");i&&!i.options.disabled&&(s.sortables.push({instance:i,shouldRevert:i.options.revert}),i.refreshPositions(),i._trigger("activate",e,a))})},stop:function(e,i){var s=t(this).data("draggable"),n=t.extend({},i,{item:s.element});t.each(s.sortables,function(){this.instance.isOver?(this.instance.isOver=0,s.cancelHelperRemoval=!0,this.instance.cancelHelperRemoval=!1,this.shouldRevert&&(this.instance.options.revert=!0),this.instance._mouseStop(e),this.instance.options.helper=this.instance.options._helper,"original"==s.options.helper&&this.instance.currentItem.css({top:"auto",left:"auto"})):(this.instance.cancelHelperRemoval=!1,this.instance._trigger("deactivate",e,n))})},drag:function(e,i){var s=t(this).data("draggable"),n=this;t.each(s.sortables,function(){var a=!1,o=this;this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this.instance._intersectsWith(this.instance.containerCache)&&(a=!0,t.each(s.sortables,function(){return this.instance.positionAbs=s.positionAbs,this.instance.helperProportions=s.helperProportions,this.instance.offset.click=s.offset.click,this!=o&&this.instance._intersectsWith(this.instance.containerCache)&&t.ui.contains(o.instance.element[0],this.instance.element[0])&&(a=!1),a})),a?(this.instance.isOver||(this.instance.isOver=1,this.instance.currentItem=t(n).clone().removeAttr("id").appendTo(this.instance.element).data("sortable-item",!0),this.instance.options._helper=this.instance.options.helper,this.instance.options.helper=function(){return i.helper[0]},e.target=this.instance.currentItem[0],this.instance._mouseCapture(e,!0),this.instance._mouseStart(e,!0,!0),this.instance.offset.click.top=s.offset.click.top,this.instance.offset.click.left=s.offset.click.left,this.instance.offset.parent.left-=s.offset.parent.left-this.instance.offset.parent.left,this.instance.offset.parent.top-=s.offset.parent.top-this.instance.offset.parent.top,s._trigger("toSortable",e),s.dropped=this.instance.element,s.currentItem=s.element,this.instance.fromOutside=s),this.instance.currentItem&&this.instance._mouseDrag(e)):this.instance.isOver&&(this.instance.isOver=0,this.instance.cancelHelperRemoval=!0,this.instance.options.revert=!1,this.instance._trigger("out",e,this.instance._uiHash(this.instance)),this.instance._mouseStop(e,!0),this.instance.options.helper=this.instance.options._helper,this.instance.currentItem.remove(),this.instance.placeholder&&this.instance.placeholder.remove(),s._trigger("fromSortable",e),s.dropped=!1)})}}),t.ui.plugin.add("draggable","cursor",{start:function(){var e=t("body"),i=t(this).data("draggable").options;e.css("cursor")&&(i._cursor=e.css("cursor")),e.css("cursor",i.cursor)},stop:function(){var e=t(this).data("draggable").options;e._cursor&&t("body").css("cursor",e._cursor)}}),t.ui.plugin.add("draggable","opacity",{start:function(e,i){var s=t(i.helper),n=t(this).data("draggable").options;s.css("opacity")&&(n._opacity=s.css("opacity")),s.css("opacity",n.opacity)},stop:function(e,i){var s=t(this).data("draggable").options;s._opacity&&t(i.helper).css("opacity",s._opacity)}}),t.ui.plugin.add("draggable","scroll",{start:function(){var e=t(this).data("draggable");e.scrollParent[0]!=document&&"HTML"!=e.scrollParent[0].tagName&&(e.overflowOffset=e.scrollParent.offset())},drag:function(e){var i=t(this).data("draggable"),s=i.options,n=!1;i.scrollParent[0]!=document&&"HTML"!=i.scrollParent[0].tagName?(s.axis&&"x"==s.axis||(i.overflowOffset.top+i.scrollParent[0].offsetHeight-e.pageY<s.scrollSensitivity?i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop+s.scrollSpeed:e.pageY-i.overflowOffset.top<s.scrollSensitivity&&(i.scrollParent[0].scrollTop=n=i.scrollParent[0].scrollTop-s.scrollSpeed)),s.axis&&"y"==s.axis||(i.overflowOffset.left+i.scrollParent[0].offsetWidth-e.pageX<s.scrollSensitivity?i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft+s.scrollSpeed:e.pageX-i.overflowOffset.left<s.scrollSensitivity&&(i.scrollParent[0].scrollLeft=n=i.scrollParent[0].scrollLeft-s.scrollSpeed))):(s.axis&&"x"==s.axis||(e.pageY-t(document).scrollTop()<s.scrollSensitivity?n=t(document).scrollTop(t(document).scrollTop()-s.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<s.scrollSensitivity&&(n=t(document).scrollTop(t(document).scrollTop()+s.scrollSpeed))),s.axis&&"y"==s.axis||(e.pageX-t(document).scrollLeft()<s.scrollSensitivity?n=t(document).scrollLeft(t(document).scrollLeft()-s.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<s.scrollSensitivity&&(n=t(document).scrollLeft(t(document).scrollLeft()+s.scrollSpeed)))),!1!==n&&t.ui.ddmanager&&!s.dropBehaviour&&t.ui.ddmanager.prepareOffsets(i,e)}}),t.ui.plugin.add("draggable","snap",{start:function(){var e=t(this).data("draggable"),i=e.options;e.snapElements=[],t(i.snap.constructor!=String?i.snap.items||":data(draggable)":i.snap).each(function(){var i=t(this),s=i.offset();this!=e.element[0]&&e.snapElements.push({item:this,width:i.outerWidth(),height:i.outerHeight(),top:s.top,left:s.left})})},drag:function(e,i){for(var s=t(this).data("draggable"),n=s.options,a=n.snapTolerance,o=i.offset.left,r=o+s.helperProportions.width,l=i.offset.top,h=l+s.helperProportions.height,c=s.snapElements.length-1;c>=0;c--){var u=s.snapElements[c].left,d=u+s.snapElements[c].width,p=s.snapElements[c].top,f=p+s.snapElements[c].height;if(u-a<o&&o<d+a&&p-a<l&&l<f+a||u-a<o&&o<d+a&&p-a<h&&h<f+a||u-a<r&&r<d+a&&p-a<l&&l<f+a||u-a<r&&r<d+a&&p-a<h&&h<f+a){if("inner"!=n.snapMode){var g=Math.abs(p-h)<=a,m=Math.abs(f-l)<=a,v=Math.abs(u-r)<=a,_=Math.abs(d-o)<=a;g&&(i.position.top=s._convertPositionTo("relative",{top:p-s.helperProportions.height,left:0}).top-s.margins.top),m&&(i.position.top=s._convertPositionTo("relative",{top:f,left:0}).top-s.margins.top),v&&(i.position.left=s._convertPositionTo("relative",{top:0,left:u-s.helperProportions.width}).left-s.margins.left),_&&(i.position.left=s._convertPositionTo("relative",{top:0,left:d}).left-s.margins.left)}var b=g||m||v||_;if("outer"!=n.snapMode){var g=Math.abs(p-l)<=a,m=Math.abs(f-h)<=a,v=Math.abs(u-o)<=a,_=Math.abs(d-r)<=a;g&&(i.position.top=s._convertPositionTo("relative",{top:p,left:0}).top-s.margins.top),m&&(i.position.top=s._convertPositionTo("relative",{top:f-s.helperProportions.height,left:0}).top-s.margins.top),v&&(i.position.left=s._convertPositionTo("relative",{top:0,left:u}).left-s.margins.left),_&&(i.position.left=s._convertPositionTo("relative",{top:0,left:d-s.helperProportions.width}).left-s.margins.left)}!s.snapElements[c].snapping&&(g||m||v||_||b)&&s.options.snap.snap&&s.options.snap.snap.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=g||m||v||_||b}else s.snapElements[c].snapping&&s.options.snap.release&&s.options.snap.release.call(s.element,e,t.extend(s._uiHash(),{snapItem:s.snapElements[c].item})),s.snapElements[c].snapping=!1}}}),t.ui.plugin.add("draggable","stack",{start:function(){var e=t(this).data("draggable").options,i=t.makeArray(t(e.stack)).sort(function(e,i){return(parseInt(t(e).css("zIndex"),10)||0)-(parseInt(t(i).css("zIndex"),10)||0)});if(i.length){var s=parseInt(i[0].style.zIndex)||0;t(i).each(function(t){this.style.zIndex=s+t}),this[0].style.zIndex=s+i.length}}}),t.ui.plugin.add("draggable","zIndex",{start:function(e,i){var s=t(i.helper),n=t(this).data("draggable").options;s.css("zIndex")&&(n._zIndex=s.css("zIndex")),s.css("zIndex",n.zIndex)},stop:function(e,i){var s=t(this).data("draggable").options;s._zIndex&&t(i.helper).css("zIndex",s._zIndex)}})}(jQuery),function(t){t.widget("ui.droppable",{version:"1.9.2",widgetEventPrefix:"drop",options:{accept:"*",activeClass:!1,addClasses:!0,greedy:!1,hoverClass:!1,scope:"default",tolerance:"intersect"},_create:function(){var e=this.options,i=e.accept;this.isover=0,this.isout=1,this.accept=t.isFunction(i)?i:function(t){return t.is(i)},this.proportions={width:this.element[0].offsetWidth,height:this.element[0].offsetHeight},t.ui.ddmanager.droppables[e.scope]=t.ui.ddmanager.droppables[e.scope]||[],t.ui.ddmanager.droppables[e.scope].push(this),e.addClasses&&this.element.addClass("ui-droppable")},_destroy:function(){for(var e=t.ui.ddmanager.droppables[this.options.scope],i=0;i<e.length;i++)e[i]==this&&e.splice(i,1);this.element.removeClass("ui-droppable ui-droppable-disabled")},_setOption:function(e,i){
"accept"==e&&(this.accept=t.isFunction(i)?i:function(t){return t.is(i)}),t.Widget.prototype._setOption.apply(this,arguments)},_activate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.addClass(this.options.activeClass),i&&this._trigger("activate",e,this.ui(i))},_deactivate:function(e){var i=t.ui.ddmanager.current;this.options.activeClass&&this.element.removeClass(this.options.activeClass),i&&this._trigger("deactivate",e,this.ui(i))},_over:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.addClass(this.options.hoverClass),this._trigger("over",e,this.ui(i)))},_out:function(e){var i=t.ui.ddmanager.current;i&&(i.currentItem||i.element)[0]!=this.element[0]&&this.accept.call(this.element[0],i.currentItem||i.element)&&(this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("out",e,this.ui(i)))},_drop:function(e,i){var s=i||t.ui.ddmanager.current;if(!s||(s.currentItem||s.element)[0]==this.element[0])return!1;var n=!1;return this.element.find(":data(droppable)").not(".ui-draggable-dragging").each(function(){var e=t.data(this,"droppable");if(e.options.greedy&&!e.options.disabled&&e.options.scope==s.options.scope&&e.accept.call(e.element[0],s.currentItem||s.element)&&t.ui.intersect(s,t.extend(e,{offset:e.element.offset()}),e.options.tolerance))return n=!0,!1}),!n&&(!!this.accept.call(this.element[0],s.currentItem||s.element)&&(this.options.activeClass&&this.element.removeClass(this.options.activeClass),this.options.hoverClass&&this.element.removeClass(this.options.hoverClass),this._trigger("drop",e,this.ui(s)),this.element))},ui:function(t){return{draggable:t.currentItem||t.element,helper:t.helper,position:t.position,offset:t.positionAbs}}}),t.ui.intersect=function(e,i,s){if(!i.offset)return!1;var n=(e.positionAbs||e.position.absolute).left,a=n+e.helperProportions.width,o=(e.positionAbs||e.position.absolute).top,r=o+e.helperProportions.height,l=i.offset.left,h=l+i.proportions.width,c=i.offset.top,u=c+i.proportions.height;switch(s){case"fit":return l<=n&&a<=h&&c<=o&&r<=u;case"intersect":return l<n+e.helperProportions.width/2&&a-e.helperProportions.width/2<h&&c<o+e.helperProportions.height/2&&r-e.helperProportions.height/2<u;case"pointer":var d=(e.positionAbs||e.position.absolute).left+(e.clickOffset||e.offset.click).left,p=(e.positionAbs||e.position.absolute).top+(e.clickOffset||e.offset.click).top;return t.ui.isOver(p,d,c,l,i.proportions.height,i.proportions.width);case"touch":return(o>=c&&o<=u||r>=c&&r<=u||o<c&&r>u)&&(n>=l&&n<=h||a>=l&&a<=h||n<l&&a>h);default:return!1}},t.ui.ddmanager={current:null,droppables:{"default":[]},prepareOffsets:function(e,i){var s=t.ui.ddmanager.droppables[e.options.scope]||[],n=i?i.type:null,a=(e.currentItem||e.element).find(":data(droppable)").andSelf();t:for(var o=0;o<s.length;o++)if(!(s[o].options.disabled||e&&!s[o].accept.call(s[o].element[0],e.currentItem||e.element))){for(var r=0;r<a.length;r++)if(a[r]==s[o].element[0]){s[o].proportions.height=0;continue t}s[o].visible="none"!=s[o].element.css("display"),s[o].visible&&("mousedown"==n&&s[o]._activate.call(s[o],i),s[o].offset=s[o].element.offset(),s[o].proportions={width:s[o].element[0].offsetWidth,height:s[o].element[0].offsetHeight})}},drop:function(e,i){var s=!1;return t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){this.options&&(!this.options.disabled&&this.visible&&t.ui.intersect(e,this,this.options.tolerance)&&(s=this._drop.call(this,i)||s),!this.options.disabled&&this.visible&&this.accept.call(this.element[0],e.currentItem||e.element)&&(this.isout=1,this.isover=0,this._deactivate.call(this,i)))}),s},dragStart:function(e,i){e.element.parentsUntil("body").bind("scroll.droppable",function(){e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)})},drag:function(e,i){e.options.refreshPositions&&t.ui.ddmanager.prepareOffsets(e,i),t.each(t.ui.ddmanager.droppables[e.options.scope]||[],function(){if(!this.options.disabled&&!this.greedyChild&&this.visible){var s=t.ui.intersect(e,this,this.options.tolerance),n=s||1!=this.isover?s&&0==this.isover?"isover":null:"isout";if(n){var a;if(this.options.greedy){var o=this.options.scope,r=this.element.parents(":data(droppable)").filter(function(){return t.data(this,"droppable").options.scope===o});r.length&&(a=t.data(r[0],"droppable"),a.greedyChild="isover"==n?1:0)}a&&"isover"==n&&(a.isover=0,a.isout=1,a._out.call(a,i)),this[n]=1,this["isout"==n?"isover":"isout"]=0,this["isover"==n?"_over":"_out"].call(this,i),a&&"isout"==n&&(a.isout=0,a.isover=1,a._over.call(a,i))}}})},dragStop:function(e,i){e.element.parentsUntil("body").unbind("scroll.droppable"),e.options.refreshPositions||t.ui.ddmanager.prepareOffsets(e,i)}}}(jQuery),function(t){t.widget("ui.resizable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"resize",options:{alsoResize:!1,animate:!1,animateDuration:"slow",animateEasing:"swing",aspectRatio:!1,autoHide:!1,containment:!1,ghost:!1,grid:!1,handles:"e,s,se",helper:!1,maxHeight:null,maxWidth:null,minHeight:10,minWidth:10,zIndex:1e3},_create:function(){var e=this,i=this.options;if(this.element.addClass("ui-resizable"),t.extend(this,{_aspectRatio:!!i.aspectRatio,aspectRatio:i.aspectRatio,originalElement:this.element,_proportionallyResizeElements:[],_helper:i.helper||i.ghost||i.animate?i.helper||"ui-resizable-helper":null}),this.element[0].nodeName.match(/canvas|textarea|input|select|button|img/i)&&(this.element.wrap(t('<div class="ui-wrapper" style="overflow: hidden;"></div>').css({position:this.element.css("position"),width:this.element.outerWidth(),height:this.element.outerHeight(),top:this.element.css("top"),left:this.element.css("left")})),this.element=this.element.parent().data("resizable",this.element.data("resizable")),this.elementIsWrapper=!0,this.element.css({marginLeft:this.originalElement.css("marginLeft"),marginTop:this.originalElement.css("marginTop"),marginRight:this.originalElement.css("marginRight"),marginBottom:this.originalElement.css("marginBottom")}),this.originalElement.css({marginLeft:0,marginTop:0,marginRight:0,marginBottom:0}),this.originalResizeStyle=this.originalElement.css("resize"),this.originalElement.css("resize","none"),this._proportionallyResizeElements.push(this.originalElement.css({position:"static",zoom:1,display:"block"})),this.originalElement.css({margin:this.originalElement.css("margin")}),this._proportionallyResize()),this.handles=i.handles||(t(".ui-resizable-handle",this.element).length?{n:".ui-resizable-n",e:".ui-resizable-e",s:".ui-resizable-s",w:".ui-resizable-w",se:".ui-resizable-se",sw:".ui-resizable-sw",ne:".ui-resizable-ne",nw:".ui-resizable-nw"}:"e,s,se"),this.handles.constructor==String){"all"==this.handles&&(this.handles="n,e,s,w,se,sw,ne,nw");var s=this.handles.split(",");this.handles={};for(var n=0;n<s.length;n++){var a=t.trim(s[n]),o="ui-resizable-"+a,r=t('<div class="ui-resizable-handle '+o+'"></div>');r.css({zIndex:i.zIndex}),"se"==a&&r.addClass("ui-icon ui-icon-gripsmall-diagonal-se"),this.handles[a]=".ui-resizable-"+a,this.element.append(r)}}this._renderAxis=function(e){e=e||this.element;for(var i in this.handles){if(this.handles[i].constructor==String&&(this.handles[i]=t(this.handles[i],this.element).show()),this.elementIsWrapper&&this.originalElement[0].nodeName.match(/textarea|input|select|button/i)){var s=t(this.handles[i],this.element),n=0;n=/sw|ne|nw|se|n|s/.test(i)?s.outerHeight():s.outerWidth();var a=["padding",/ne|nw|n/.test(i)?"Top":/se|sw|s/.test(i)?"Bottom":/^e$/.test(i)?"Right":"Left"].join("");e.css(a,n),this._proportionallyResize()}t(this.handles[i]).length}},this._renderAxis(this.element),this._handles=t(".ui-resizable-handle",this.element).disableSelection(),this._handles.mouseover(function(){if(!e.resizing){if(this.className)var t=this.className.match(/ui-resizable-(se|sw|ne|nw|n|e|s|w)/i);e.axis=t&&t[1]?t[1]:"se"}}),i.autoHide&&(this._handles.hide(),t(this.element).addClass("ui-resizable-autohide").mouseenter(function(){i.disabled||(t(this).removeClass("ui-resizable-autohide"),e._handles.show())}).mouseleave(function(){i.disabled||e.resizing||(t(this).addClass("ui-resizable-autohide"),e._handles.hide())})),this._mouseInit()},_destroy:function(){this._mouseDestroy();var e=function(e){t(e).removeClass("ui-resizable ui-resizable-disabled ui-resizable-resizing").removeData("resizable").removeData("ui-resizable").unbind(".resizable").find(".ui-resizable-handle").remove()};if(this.elementIsWrapper){e(this.element);var i=this.element;this.originalElement.css({position:i.css("position"),width:i.outerWidth(),height:i.outerHeight(),top:i.css("top"),left:i.css("left")}).insertAfter(i),i.remove()}return this.originalElement.css("resize",this.originalResizeStyle),e(this.originalElement),this},_mouseCapture:function(e){var i=!1;for(var s in this.handles)t(this.handles[s])[0]==e.target&&(i=!0);return!this.options.disabled&&i},_mouseStart:function(i){var s=this.options,n=this.element.position(),a=this.element;this.resizing=!0,this.documentScroll={top:t(document).scrollTop(),left:t(document).scrollLeft()},(a.is(".ui-draggable")||/absolute/.test(a.css("position")))&&a.css({position:"absolute",top:n.top,left:n.left}),this._renderProxy();var o=e(this.helper.css("left")),r=e(this.helper.css("top"));s.containment&&(o+=t(s.containment).scrollLeft()||0,r+=t(s.containment).scrollTop()||0),this.offset=this.helper.offset(),this.position={left:o,top:r},this.size=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalSize=this._helper?{width:a.outerWidth(),height:a.outerHeight()}:{width:a.width(),height:a.height()},this.originalPosition={left:o,top:r},this.sizeDiff={width:a.outerWidth()-a.width(),height:a.outerHeight()-a.height()},this.originalMousePosition={left:i.pageX,top:i.pageY},this.aspectRatio="number"==typeof s.aspectRatio?s.aspectRatio:this.originalSize.width/this.originalSize.height||1;var l=t(".ui-resizable-"+this.axis).css("cursor");return t("body").css("cursor","auto"==l?this.axis+"-resize":l),a.addClass("ui-resizable-resizing"),this._propagate("start",i),!0},_mouseDrag:function(t){var e=this.helper,i=(this.options,this.originalMousePosition),s=this.axis,n=t.pageX-i.left||0,a=t.pageY-i.top||0,o=this._change[s];if(!o)return!1;var r=o.apply(this,[t,n,a]);return this._updateVirtualBoundaries(t.shiftKey),(this._aspectRatio||t.shiftKey)&&(r=this._updateRatio(r,t)),r=this._respectSize(r,t),this._propagate("resize",t),e.css({top:this.position.top+"px",left:this.position.left+"px",width:this.size.width+"px",height:this.size.height+"px"}),!this._helper&&this._proportionallyResizeElements.length&&this._proportionallyResize(),this._updateCache(r),this._trigger("resize",t,this.ui()),!1},_mouseStop:function(e){this.resizing=!1;var i=this.options,s=this;if(this._helper){var n=this._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&t.ui.hasScroll(n[0],"left")?0:s.sizeDiff.height,r=a?0:s.sizeDiff.width,l={width:s.helper.width()-r,height:s.helper.height()-o},h=parseInt(s.element.css("left"),10)+(s.position.left-s.originalPosition.left)||null,c=parseInt(s.element.css("top"),10)+(s.position.top-s.originalPosition.top)||null;i.animate||this.element.css(t.extend(l,{top:c,left:h})),s.helper.height(s.size.height),s.helper.width(s.size.width),this._helper&&!i.animate&&this._proportionallyResize()}return t("body").css("cursor","auto"),this.element.removeClass("ui-resizable-resizing"),this._propagate("stop",e),this._helper&&this.helper.remove(),!1},_updateVirtualBoundaries:function(t){var e,s,n,a,o,r=this.options;o={minWidth:i(r.minWidth)?r.minWidth:0,maxWidth:i(r.maxWidth)?r.maxWidth:Infinity,minHeight:i(r.minHeight)?r.minHeight:0,maxHeight:i(r.maxHeight)?r.maxHeight:Infinity},(this._aspectRatio||t)&&(e=o.minHeight*this.aspectRatio,n=o.minWidth/this.aspectRatio,s=o.maxHeight*this.aspectRatio,a=o.maxWidth/this.aspectRatio,e>o.minWidth&&(o.minWidth=e),n>o.minHeight&&(o.minHeight=n),s<o.maxWidth&&(o.maxWidth=s),a<o.maxHeight&&(o.maxHeight=a)),this._vBoundaries=o},_updateCache:function(t){this.options;this.offset=this.helper.offset(),i(t.left)&&(this.position.left=t.left),i(t.top)&&(this.position.top=t.top),i(t.height)&&(this.size.height=t.height),i(t.width)&&(this.size.width=t.width)},_updateRatio:function(t){var e=(this.options,this.position),s=this.size,n=this.axis;return i(t.height)?t.width=t.height*this.aspectRatio:i(t.width)&&(t.height=t.width/this.aspectRatio),"sw"==n&&(t.left=e.left+(s.width-t.width),t.top=null),"nw"==n&&(t.top=e.top+(s.height-t.height),t.left=e.left+(s.width-t.width)),t},_respectSize:function(t,e){var s=(this.helper,this._vBoundaries),n=(this._aspectRatio||e.shiftKey,this.axis),a=i(t.width)&&s.maxWidth&&s.maxWidth<t.width,o=i(t.height)&&s.maxHeight&&s.maxHeight<t.height,r=i(t.width)&&s.minWidth&&s.minWidth>t.width,l=i(t.height)&&s.minHeight&&s.minHeight>t.height;r&&(t.width=s.minWidth),l&&(t.height=s.minHeight),a&&(t.width=s.maxWidth),o&&(t.height=s.maxHeight);var h=this.originalPosition.left+this.originalSize.width,c=this.position.top+this.size.height,u=/sw|nw|w/.test(n),d=/nw|ne|n/.test(n);r&&u&&(t.left=h-s.minWidth),a&&u&&(t.left=h-s.maxWidth),l&&d&&(t.top=c-s.minHeight),o&&d&&(t.top=c-s.maxHeight);var p=!t.width&&!t.height;return p&&!t.left&&t.top?t.top=null:p&&!t.top&&t.left&&(t.left=null),t},_proportionallyResize:function(){this.options;if(this._proportionallyResizeElements.length)for(var e=this.helper||this.element,i=0;i<this._proportionallyResizeElements.length;i++){var s=this._proportionallyResizeElements[i];if(!this.borderDif){var n=[s.css("borderTopWidth"),s.css("borderRightWidth"),s.css("borderBottomWidth"),s.css("borderLeftWidth")],a=[s.css("paddingTop"),s.css("paddingRight"),s.css("paddingBottom"),s.css("paddingLeft")];this.borderDif=t.map(n,function(t,e){return(parseInt(t,10)||0)+(parseInt(a[e],10)||0)})}s.css({height:e.height()-this.borderDif[0]-this.borderDif[2]||0,width:e.width()-this.borderDif[1]-this.borderDif[3]||0})}},_renderProxy:function(){var e=this.element,i=this.options;if(this.elementOffset=e.offset(),this._helper){this.helper=this.helper||t('<div style="overflow:hidden;"></div>');var s=t.ui.ie6?1:0,n=t.ui.ie6?2:-1;this.helper.addClass(this._helper).css({width:this.element.outerWidth()+n,height:this.element.outerHeight()+n,position:"absolute",left:this.elementOffset.left-s+"px",top:this.elementOffset.top-s+"px",zIndex:++i.zIndex}),this.helper.appendTo("body").disableSelection()}else this.helper=this.element},_change:{e:function(t,e){return{width:this.originalSize.width+e}},w:function(t,e){var i=(this.options,this.originalSize);return{left:this.originalPosition.left+e,width:i.width-e}},n:function(t,e,i){var s=(this.options,this.originalSize);return{top:this.originalPosition.top+i,height:s.height-i}},s:function(t,e,i){return{height:this.originalSize.height+i}},se:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},sw:function(e,i,s){return t.extend(this._change.s.apply(this,arguments),this._change.w.apply(this,[e,i,s]))},ne:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.e.apply(this,[e,i,s]))},nw:function(e,i,s){return t.extend(this._change.n.apply(this,arguments),this._change.w.apply(this,[e,i,s]))}},_propagate:function(e,i){t.ui.plugin.call(this,e,[i,this.ui()]),"resize"!=e&&this._trigger(e,i,this.ui())},plugins:{},ui:function(){return{originalElement:this.originalElement,element:this.element,helper:this.helper,position:this.position,size:this.size,originalSize:this.originalSize,originalPosition:this.originalPosition}}}),t.ui.plugin.add("resizable","alsoResize",{start:function(){var e=t(this).data("resizable"),i=e.options,s=function(e){t(e).each(function(){var e=t(this);e.data("resizable-alsoresize",{width:parseInt(e.width(),10),height:parseInt(e.height(),10),left:parseInt(e.css("left"),10),top:parseInt(e.css("top"),10)})})};"object"!=typeof i.alsoResize||i.alsoResize.parentNode?s(i.alsoResize):i.alsoResize.length?(i.alsoResize=i.alsoResize[0],s(i.alsoResize)):t.each(i.alsoResize,function(t){s(t)})},resize:function(e,i){var s=t(this).data("resizable"),n=s.options,a=s.originalSize,o=s.originalPosition,r={height:s.size.height-a.height||0,width:s.size.width-a.width||0,top:s.position.top-o.top||0,left:s.position.left-o.left||0},l=function(e,s){t(e).each(function(){var e=t(this),n=t(this).data("resizable-alsoresize"),a={},o=s&&s.length?s:e.parents(i.originalElement[0]).length?["width","height"]:["width","height","top","left"];t.each(o,function(t,e){var i=(n[e]||0)+(r[e]||0);i&&i>=0&&(a[e]=i||null)}),e.css(a)})};"object"!=typeof n.alsoResize||n.alsoResize.nodeType?l(n.alsoResize):t.each(n.alsoResize,function(t,e){l(t,e)})},stop:function(){t(this).removeData("resizable-alsoresize")}}),t.ui.plugin.add("resizable","animate",{stop:function(e){var i=t(this).data("resizable"),s=i.options,n=i._proportionallyResizeElements,a=n.length&&/textarea/i.test(n[0].nodeName),o=a&&t.ui.hasScroll(n[0],"left")?0:i.sizeDiff.height,r=a?0:i.sizeDiff.width,l={width:i.size.width-r,height:i.size.height-o},h=parseInt(i.element.css("left"),10)+(i.position.left-i.originalPosition.left)||null,c=parseInt(i.element.css("top"),10)+(i.position.top-i.originalPosition.top)||null;i.element.animate(t.extend(l,c&&h?{top:c,left:h}:{}),{duration:s.animateDuration,easing:s.animateEasing,step:function(){var s={width:parseInt(i.element.css("width"),10),height:parseInt(i.element.css("height"),10),top:parseInt(i.element.css("top"),10),left:parseInt(i.element.css("left"),10)};n&&n.length&&t(n[0]).css({width:s.width,height:s.height}),i._updateCache(s),i._propagate("resize",e)}})}}),t.ui.plugin.add("resizable","containment",{start:function(){var i=t(this).data("resizable"),s=i.options,n=i.element,a=s.containment,o=a instanceof t?a.get(0):/parent/.test(a)?n.parent().get(0):a;if(o)if(i.containerElement=t(o),/document/.test(a)||a==document)i.containerOffset={left:0,top:0},i.containerPosition={left:0,top:0},i.parentData={element:t(document),left:0,top:0,width:t(document).width(),height:t(document).height()||document.body.parentNode.scrollHeight};else{var r=t(o),l=[];t(["Top","Right","Left","Bottom"]).each(function(t,i){l[t]=e(r.css("padding"+i))}),i.containerOffset=r.offset(),i.containerPosition=r.position(),i.containerSize={height:r.innerHeight()-l[3],width:r.innerWidth()-l[1]};var h=i.containerOffset,c=i.containerSize.height,u=i.containerSize.width,d=t.ui.hasScroll(o,"left")?o.scrollWidth:u,p=t.ui.hasScroll(o)?o.scrollHeight:c;i.parentData={element:o,left:h.left,top:h.top,width:d,height:p}}},resize:function(e){var i=t(this).data("resizable"),s=i.options,n=(i.containerSize,i.containerOffset),a=(i.size,i.position),o=i._aspectRatio||e.shiftKey,r={top:0,left:0},l=i.containerElement;l[0]!=document&&/static/.test(l.css("position"))&&(r=n),a.left<(i._helper?n.left:0)&&(i.size.width=i.size.width+(i._helper?i.position.left-n.left:i.position.left-r.left),o&&(i.size.height=i.size.width/i.aspectRatio),i.position.left=s.helper?n.left:0),a.top<(i._helper?n.top:0)&&(i.size.height=i.size.height+(i._helper?i.position.top-n.top:i.position.top),o&&(i.size.width=i.size.height*i.aspectRatio),i.position.top=i._helper?n.top:0),i.offset.left=i.parentData.left+i.position.left,i.offset.top=i.parentData.top+i.position.top;var h=Math.abs((i._helper,i.offset.left-r.left+i.sizeDiff.width)),c=Math.abs((i._helper?i.offset.top-r.top:i.offset.top-n.top)+i.sizeDiff.height),u=i.containerElement.get(0)==i.element.parent().get(0),d=/relative|absolute/.test(i.containerElement.css("position"));u&&d&&(h-=i.parentData.left),h+i.size.width>=i.parentData.width&&(i.size.width=i.parentData.width-h,o&&(i.size.height=i.size.width/i.aspectRatio)),c+i.size.height>=i.parentData.height&&(i.size.height=i.parentData.height-c,o&&(i.size.width=i.size.height*i.aspectRatio))},stop:function(){var e=t(this).data("resizable"),i=e.options,s=(e.position,e.containerOffset),n=e.containerPosition,a=e.containerElement,o=t(e.helper),r=o.offset(),l=o.outerWidth()-e.sizeDiff.width,h=o.outerHeight()-e.sizeDiff.height;e._helper&&!i.animate&&/relative/.test(a.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h}),e._helper&&!i.animate&&/static/.test(a.css("position"))&&t(this).css({left:r.left-n.left-s.left,width:l,height:h})}}),t.ui.plugin.add("resizable","ghost",{start:function(){var e=t(this).data("resizable"),i=e.options,s=e.size;e.ghost=e.originalElement.clone(),e.ghost.css({opacity:.25,display:"block",position:"relative",height:s.height,width:s.width,margin:0,left:0,top:0}).addClass("ui-resizable-ghost").addClass("string"==typeof i.ghost?i.ghost:""),e.ghost.appendTo(e.helper)},resize:function(){var e=t(this).data("resizable");e.options;e.ghost&&e.ghost.css({position:"relative",height:e.size.height,width:e.size.width})},stop:function(){var e=t(this).data("resizable");e.options;e.ghost&&e.helper&&e.helper.get(0).removeChild(e.ghost.get(0))}}),t.ui.plugin.add("resizable","grid",{resize:function(e){var i=t(this).data("resizable"),s=i.options,n=i.size,a=i.originalSize,o=i.originalPosition,r=i.axis;s._aspectRatio||e.shiftKey;s.grid="number"==typeof s.grid?[s.grid,s.grid]:s.grid;var l=Math.round((n.width-a.width)/(s.grid[0]||1))*(s.grid[0]||1),h=Math.round((n.height-a.height)/(s.grid[1]||1))*(s.grid[1]||1);/^(se|s|e)$/.test(r)?(i.size.width=a.width+l,i.size.height=a.height+h):/^(ne)$/.test(r)?(i.size.width=a.width+l,i.size.height=a.height+h,i.position.top=o.top-h):/^(sw)$/.test(r)?(i.size.width=a.width+l,i.size.height=a.height+h,i.position.left=o.left-l):(i.size.width=a.width+l,i.size.height=a.height+h,i.position.top=o.top-h,i.position.left=o.left-l)}});var e=function(t){return parseInt(t,10)||0},i=function(t){return!isNaN(parseInt(t,10))}}(jQuery),function(t){t.widget("ui.selectable",t.ui.mouse,{version:"1.9.2",options:{appendTo:"body",autoRefresh:!0,distance:0,filter:"*",tolerance:"touch"},_create:function(){var e=this;this.element.addClass("ui-selectable"),this.dragged=!1;var i;this.refresh=function(){i=t(e.options.filter,e.element[0]),i.addClass("ui-selectee"),i.each(function(){var e=t(this),i=e.offset();t.data(this,"selectable-item",{element:this,$element:e,left:i.left,top:i.top,right:i.left+e.outerWidth(),bottom:i.top+e.outerHeight(),startselected:!1,selected:e.hasClass("ui-selected"),selecting:e.hasClass("ui-selecting"),unselecting:e.hasClass("ui-unselecting")})})},this.refresh(),this.selectees=i.addClass("ui-selectee"),this._mouseInit(),this.helper=t("<div class='ui-selectable-helper'></div>")},_destroy:function(){this.selectees.removeClass("ui-selectee").removeData("selectable-item"),this.element.removeClass("ui-selectable ui-selectable-disabled"),this._mouseDestroy()},_mouseStart:function(e){var i=this;if(this.opos=[e.pageX,e.pageY],!this.options.disabled){var s=this.options;this.selectees=t(s.filter,this.element[0]),this._trigger("start",e),t(s.appendTo).append(this.helper),this.helper.css({left:e.clientX,top:e.clientY,width:0,height:0}),s.autoRefresh&&this.refresh(),this.selectees.filter(".ui-selected").each(function(){var s=t.data(this,"selectable-item");s.startselected=!0,e.metaKey||e.ctrlKey||(s.$element.removeClass("ui-selected"),s.selected=!1,s.$element.addClass("ui-unselecting"),s.unselecting=!0,i._trigger("unselecting",e,{unselecting:s.element}))}),t(e.target).parents().andSelf().each(function(){var s=t.data(this,"selectable-item");if(s){var n=!e.metaKey&&!e.ctrlKey||!s.$element.hasClass("ui-selected");return s.$element.removeClass(n?"ui-unselecting":"ui-selected").addClass(n?"ui-selecting":"ui-unselecting"),s.unselecting=!n,s.selecting=n,s.selected=n,n?i._trigger("selecting",e,{selecting:s.element}):i._trigger("unselecting",e,{unselecting:s.element}),!1}})}},_mouseDrag:function(e){var i=this;if(this.dragged=!0,!this.options.disabled){var s=this.options,n=this.opos[0],a=this.opos[1],o=e.pageX,r=e.pageY;if(n>o){var l=o;o=n,n=l}if(a>r){var l=r;r=a,a=l}return this.helper.css({left:n,top:a,width:o-n,height:r-a}),this.selectees.each(function(){var l=t.data(this,"selectable-item");if(l&&l.element!=i.element[0]){var h=!1;"touch"==s.tolerance?h=!(l.left>o||l.right<n||l.top>r||l.bottom<a):"fit"==s.tolerance&&(h=l.left>n&&l.right<o&&l.top>a&&l.bottom<r),h?(l.selected&&(l.$element.removeClass("ui-selected"),l.selected=!1),l.unselecting&&(l.$element.removeClass("ui-unselecting"),l.unselecting=!1),l.selecting||(l.$element.addClass("ui-selecting"),l.selecting=!0,i._trigger("selecting",e,{selecting:l.element}))):(l.selecting&&((e.metaKey||e.ctrlKey)&&l.startselected?(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.$element.addClass("ui-selected"),l.selected=!0):(l.$element.removeClass("ui-selecting"),l.selecting=!1,l.startselected&&(l.$element.addClass("ui-unselecting"),l.unselecting=!0),i._trigger("unselecting",e,{unselecting:l.element}))),l.selected&&(e.metaKey||e.ctrlKey||l.startselected||(l.$element.removeClass("ui-selected"),l.selected=!1,l.$element.addClass("ui-unselecting"),l.unselecting=!0,i._trigger("unselecting",e,{unselecting:l.element}))))}}),!1}},_mouseStop:function(e){var i=this;this.dragged=!1;this.options;return t(".ui-unselecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-unselecting"),s.unselecting=!1,s.startselected=!1,i._trigger("unselected",e,{unselected:s.element})}),t(".ui-selecting",this.element[0]).each(function(){var s=t.data(this,"selectable-item");s.$element.removeClass("ui-selecting").addClass("ui-selected"),s.selecting=!1,s.selected=!0,s.startselected=!0,i._trigger("selected",e,{selected:s.element})}),this._trigger("stop",e),this.helper.remove(),!1}})}(jQuery),function(t){t.widget("ui.sortable",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"sort",ready:!1,options:{appendTo:"parent",axis:!1,connectWith:!1,containment:!1,cursor:"auto",cursorAt:!1,dropOnEmpty:!0,forcePlaceholderSize:!1,forceHelperSize:!1,grid:!1,handle:!1,helper:"original",items:"> *",opacity:!1,placeholder:!1,revert:!1,scroll:!0,scrollSensitivity:20,scrollSpeed:20,scope:"default",tolerance:"intersect",zIndex:1e3},_create:function(){var t=this.options;this.containerCache={},this.element.addClass("ui-sortable"),this.refresh(),this.floating=!!this.items.length&&("x"===t.axis||/left|right/.test(this.items[0].item.css("float"))||/inline|table-cell/.test(this.items[0].item.css("display"))),this.offset=this.element.offset(),this._mouseInit(),this.ready=!0},_destroy:function(){this.element.removeClass("ui-sortable ui-sortable-disabled"),this._mouseDestroy();for(var t=this.items.length-1;t>=0;t--)this.items[t].item.removeData(this.widgetName+"-item");return this},_setOption:function(e,i){"disabled"===e?(this.options[e]=i,this.widget().toggleClass("ui-sortable-disabled",!!i)):t.Widget.prototype._setOption.apply(this,arguments)},_mouseCapture:function(e,i){var s=this;if(this.reverting)return!1;if(this.options.disabled||"static"==this.options.type)return!1;this._refreshItems(e);var n=null;t(e.target).parents().each(function(){if(t.data(this,s.widgetName+"-item")==s)return n=t(this),!1});if(t.data(e.target,s.widgetName+"-item")==s&&(n=t(e.target)),!n)return!1;if(this.options.handle&&!i){var a=!1;if(t(this.options.handle,n).find("*").andSelf().each(function(){this==e.target&&(a=!0)}),!a)return!1}return this.currentItem=n,this._removeCurrentsFromItems(),!0},_mouseStart:function(e,i,s){var n=this.options;if(this.currentContainer=this,this.refreshPositions(),this.helper=this._createHelper(e),this._cacheHelperProportions(),this._cacheMargins(),this.scrollParent=this.helper.scrollParent(),this.offset=this.currentItem.offset(),this.offset={top:this.offset.top-this.margins.top,left:this.offset.left-this.margins.left},t.extend(this.offset,{click:{left:e.pageX-this.offset.left,top:e.pageY-this.offset.top},parent:this._getParentOffset(),relative:this._getRelativeOffset()}),this.helper.css("position","absolute"),this.cssPosition=this.helper.css("position"),this.originalPosition=this._generatePosition(e),this.originalPageX=e.pageX,this.originalPageY=e.pageY,n.cursorAt&&this._adjustOffsetFromHelper(n.cursorAt),this.domPosition={prev:this.currentItem.prev()[0],parent:this.currentItem.parent()[0]},this.helper[0]!=this.currentItem[0]&&this.currentItem.hide(),this._createPlaceholder(),n.containment&&this._setContainment(),n.cursor&&(t("body").css("cursor")&&(this._storedCursor=t("body").css("cursor")),t("body").css("cursor",n.cursor)),n.opacity&&(this.helper.css("opacity")&&(this._storedOpacity=this.helper.css("opacity")),this.helper.css("opacity",n.opacity)),n.zIndex&&(this.helper.css("zIndex")&&(this._storedZIndex=this.helper.css("zIndex")),this.helper.css("zIndex",n.zIndex)),this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName&&(this.overflowOffset=this.scrollParent.offset()),this._trigger("start",e,this._uiHash()),this._preserveHelperProportions||this._cacheHelperProportions(),!s)for(var a=this.containers.length-1;a>=0;a--)this.containers[a]._trigger("activate",e,this._uiHash(this));return t.ui.ddmanager&&(t.ui.ddmanager.current=this),t.ui.ddmanager&&!n.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e),this.dragging=!0,this.helper.addClass("ui-sortable-helper"),this._mouseDrag(e),!0},_mouseDrag:function(e){if(this.position=this._generatePosition(e),this.positionAbs=this._convertPositionTo("absolute"),this.lastPositionAbs||(this.lastPositionAbs=this.positionAbs),this.options.scroll){var i=this.options,s=!1;this.scrollParent[0]!=document&&"HTML"!=this.scrollParent[0].tagName?(this.overflowOffset.top+this.scrollParent[0].offsetHeight-e.pageY<i.scrollSensitivity?this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop+i.scrollSpeed:e.pageY-this.overflowOffset.top<i.scrollSensitivity&&(this.scrollParent[0].scrollTop=s=this.scrollParent[0].scrollTop-i.scrollSpeed),this.overflowOffset.left+this.scrollParent[0].offsetWidth-e.pageX<i.scrollSensitivity?this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft+i.scrollSpeed:e.pageX-this.overflowOffset.left<i.scrollSensitivity&&(this.scrollParent[0].scrollLeft=s=this.scrollParent[0].scrollLeft-i.scrollSpeed)):(e.pageY-t(document).scrollTop()<i.scrollSensitivity?s=t(document).scrollTop(t(document).scrollTop()-i.scrollSpeed):t(window).height()-(e.pageY-t(document).scrollTop())<i.scrollSensitivity&&(s=t(document).scrollTop(t(document).scrollTop()+i.scrollSpeed)),e.pageX-t(document).scrollLeft()<i.scrollSensitivity?s=t(document).scrollLeft(t(document).scrollLeft()-i.scrollSpeed):t(window).width()-(e.pageX-t(document).scrollLeft())<i.scrollSensitivity&&(s=t(document).scrollLeft(t(document).scrollLeft()+i.scrollSpeed))),!1!==s&&t.ui.ddmanager&&!i.dropBehaviour&&t.ui.ddmanager.prepareOffsets(this,e)}this.positionAbs=this._convertPositionTo("absolute"),this.options.axis&&"y"==this.options.axis||(this.helper[0].style.left=this.position.left+"px"),this.options.axis&&"x"==this.options.axis||(this.helper[0].style.top=this.position.top+"px");for(var n=this.items.length-1;n>=0;n--){var a=this.items[n],o=a.item[0],r=this._intersectsWithPointer(a);if(r&&(a.instance===this.currentContainer&&!(o==this.currentItem[0]||this.placeholder[1==r?"next":"prev"]()[0]==o||t.contains(this.placeholder[0],o)||"semi-dynamic"==this.options.type&&t.contains(this.element[0],o)))){if(this.direction=1==r?"down":"up","pointer"!=this.options.tolerance&&!this._intersectsWithSides(a))break;this._rearrange(e,a),this._trigger("change",e,this._uiHash());break}}return this._contactContainers(e),t.ui.ddmanager&&t.ui.ddmanager.drag(this,e),this._trigger("sort",e,this._uiHash()),this.lastPositionAbs=this.positionAbs,!1},_mouseStop:function(e,i){if(e){if(t.ui.ddmanager&&!this.options.dropBehaviour&&t.ui.ddmanager.drop(this,e),this.options.revert){var s=this,n=this.placeholder.offset();this.reverting=!0,t(this.helper).animate({left:n.left-this.offset.parent.left-this.margins.left+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollLeft),top:n.top-this.offset.parent.top-this.margins.top+(this.offsetParent[0]==document.body?0:this.offsetParent[0].scrollTop)},parseInt(this.options.revert,10)||500,function(){s._clear(e)})}else this._clear(e,i);return!1}},cancel:function(){if(this.dragging){this._mouseUp({target:null}),"original"==this.options.helper?this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper"):this.currentItem.show();for(var e=this.containers.length-1;e>=0;e--)this.containers[e]._trigger("deactivate",null,this._uiHash(this)),this.containers[e].containerCache.over&&(this.containers[e]._trigger("out",null,this._uiHash(this)),this.containers[e].containerCache.over=0)}
return this.placeholder&&(this.placeholder[0].parentNode&&this.placeholder[0].parentNode.removeChild(this.placeholder[0]),"original"!=this.options.helper&&this.helper&&this.helper[0].parentNode&&this.helper.remove(),t.extend(this,{helper:null,dragging:!1,reverting:!1,_noFinalSort:null}),this.domPosition.prev?t(this.domPosition.prev).after(this.currentItem):t(this.domPosition.parent).prepend(this.currentItem)),this},serialize:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},t(i).each(function(){var i=(t(e.item||this).attr(e.attribute||"id")||"").match(e.expression||/(.+)[-=_](.+)/);i&&s.push((e.key||i[1]+"[]")+"="+(e.key&&e.expression?i[1]:i[2]))}),!s.length&&e.key&&s.push(e.key+"="),s.join("&")},toArray:function(e){var i=this._getItemsAsjQuery(e&&e.connected),s=[];return e=e||{},i.each(function(){s.push(t(e.item||this).attr(e.attribute||"id")||"")}),s},_intersectsWith:function(t){var e=this.positionAbs.left,i=e+this.helperProportions.width,s=this.positionAbs.top,n=s+this.helperProportions.height,a=t.left,o=a+t.width,r=t.top,l=r+t.height,h=this.offset.click.top,c=this.offset.click.left,u=s+h>r&&s+h<l&&e+c>a&&e+c<o;return"pointer"==this.options.tolerance||this.options.forcePointerForContainers||"pointer"!=this.options.tolerance&&this.helperProportions[this.floating?"width":"height"]>t[this.floating?"width":"height"]?u:a<e+this.helperProportions.width/2&&i-this.helperProportions.width/2<o&&r<s+this.helperProportions.height/2&&n-this.helperProportions.height/2<l},_intersectsWithPointer:function(e){var i="x"===this.options.axis||t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top,e.height),s="y"===this.options.axis||t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left,e.width),n=i&&s,a=this._getDragVerticalDirection(),o=this._getDragHorizontalDirection();return!!n&&(this.floating?o&&"right"==o||"down"==a?2:1:a&&("down"==a?2:1))},_intersectsWithSides:function(e){var i=t.ui.isOverAxis(this.positionAbs.top+this.offset.click.top,e.top+e.height/2,e.height),s=t.ui.isOverAxis(this.positionAbs.left+this.offset.click.left,e.left+e.width/2,e.width),n=this._getDragVerticalDirection(),a=this._getDragHorizontalDirection();return this.floating&&a?"right"==a&&s||"left"==a&&!s:n&&("down"==n&&i||"up"==n&&!i)},_getDragVerticalDirection:function(){var t=this.positionAbs.top-this.lastPositionAbs.top;return 0!=t&&(t>0?"down":"up")},_getDragHorizontalDirection:function(){var t=this.positionAbs.left-this.lastPositionAbs.left;return 0!=t&&(t>0?"right":"left")},refresh:function(t){return this._refreshItems(t),this.refreshPositions(),this},_connectWith:function(){var t=this.options;return t.connectWith.constructor==String?[t.connectWith]:t.connectWith},_getItemsAsjQuery:function(e){var i=[],s=[],n=this._connectWith();if(n&&e)for(var a=n.length-1;a>=0;a--)for(var o=t(n[a]),r=o.length-1;r>=0;r--){var l=t.data(o[r],this.widgetName);l&&l!=this&&!l.options.disabled&&s.push([t.isFunction(l.options.items)?l.options.items.call(l.element):t(l.options.items,l.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),l])}s.push([t.isFunction(this.options.items)?this.options.items.call(this.element,null,{options:this.options,item:this.currentItem}):t(this.options.items,this.element).not(".ui-sortable-helper").not(".ui-sortable-placeholder"),this]);for(var a=s.length-1;a>=0;a--)s[a][0].each(function(){i.push(this)});return t(i)},_removeCurrentsFromItems:function(){var e=this.currentItem.find(":data("+this.widgetName+"-item)");this.items=t.grep(this.items,function(t){for(var i=0;i<e.length;i++)if(e[i]==t.item[0])return!1;return!0})},_refreshItems:function(e){this.items=[],this.containers=[this];var i=this.items,s=[[t.isFunction(this.options.items)?this.options.items.call(this.element[0],e,{item:this.currentItem}):t(this.options.items,this.element),this]],n=this._connectWith();if(n&&this.ready)for(var a=n.length-1;a>=0;a--)for(var o=t(n[a]),r=o.length-1;r>=0;r--){var l=t.data(o[r],this.widgetName);l&&l!=this&&!l.options.disabled&&(s.push([t.isFunction(l.options.items)?l.options.items.call(l.element[0],e,{item:this.currentItem}):t(l.options.items,l.element),l]),this.containers.push(l))}for(var a=s.length-1;a>=0;a--)for(var h=s[a][1],c=s[a][0],r=0,u=c.length;r<u;r++){var d=t(c[r]);d.data(this.widgetName+"-item",h),i.push({item:d,instance:h,width:0,height:0,left:0,top:0})}},refreshPositions:function(e){this.offsetParent&&this.helper&&(this.offset.parent=this._getParentOffset());for(var i=this.items.length-1;i>=0;i--){var s=this.items[i];if(s.instance==this.currentContainer||!this.currentContainer||s.item[0]==this.currentItem[0]){var n=this.options.toleranceElement?t(this.options.toleranceElement,s.item):s.item;e||(s.width=n.outerWidth(),s.height=n.outerHeight());var a=n.offset();s.left=a.left,s.top=a.top}}if(this.options.custom&&this.options.custom.refreshContainers)this.options.custom.refreshContainers.call(this);else for(var i=this.containers.length-1;i>=0;i--){var a=this.containers[i].element.offset();this.containers[i].containerCache.left=a.left,this.containers[i].containerCache.top=a.top,this.containers[i].containerCache.width=this.containers[i].element.outerWidth(),this.containers[i].containerCache.height=this.containers[i].element.outerHeight()}return this},_createPlaceholder:function(e){e=e||this;var i=e.options;if(!i.placeholder||i.placeholder.constructor==String){var s=i.placeholder;i.placeholder={element:function(){var i=t(document.createElement(e.currentItem[0].nodeName)).addClass(s||e.currentItem[0].className+" ui-sortable-placeholder").removeClass("ui-sortable-helper")[0];return s||(i.style.visibility="hidden"),i},update:function(t,n){s&&!i.forcePlaceholderSize||(n.height()||n.height(e.currentItem.innerHeight()-parseInt(e.currentItem.css("paddingTop")||0,10)-parseInt(e.currentItem.css("paddingBottom")||0,10)),n.width()||n.width(e.currentItem.innerWidth()-parseInt(e.currentItem.css("paddingLeft")||0,10)-parseInt(e.currentItem.css("paddingRight")||0,10)))}}}e.placeholder=t(i.placeholder.element.call(e.element,e.currentItem)),e.currentItem.after(e.placeholder),i.placeholder.update(e,e.placeholder)},_contactContainers:function(e){for(var i=null,s=null,n=this.containers.length-1;n>=0;n--)if(!t.contains(this.currentItem[0],this.containers[n].element[0]))if(this._intersectsWith(this.containers[n].containerCache)){if(i&&t.contains(this.containers[n].element[0],i.element[0]))continue;i=this.containers[n],s=n}else this.containers[n].containerCache.over&&(this.containers[n]._trigger("out",e,this._uiHash(this)),this.containers[n].containerCache.over=0);if(i)if(1===this.containers.length)this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1;else{for(var a=1e4,o=null,r=this.containers[s].floating?"left":"top",l=this.containers[s].floating?"width":"height",h=this.positionAbs[r]+this.offset.click[r],c=this.items.length-1;c>=0;c--)if(t.contains(this.containers[s].element[0],this.items[c].item[0])&&this.items[c].item[0]!=this.currentItem[0]){var u=this.items[c].item.offset()[r],d=!1;Math.abs(u-h)>Math.abs(u+this.items[c][l]-h)&&(d=!0,u+=this.items[c][l]),Math.abs(u-h)<a&&(a=Math.abs(u-h),o=this.items[c],this.direction=d?"up":"down")}if(!o&&!this.options.dropOnEmpty)return;this.currentContainer=this.containers[s],o?this._rearrange(e,o,null,!0):this._rearrange(e,null,this.containers[s].element,!0),this._trigger("change",e,this._uiHash()),this.containers[s]._trigger("change",e,this._uiHash(this)),this.options.placeholder.update(this.currentContainer,this.placeholder),this.containers[s]._trigger("over",e,this._uiHash(this)),this.containers[s].containerCache.over=1}},_createHelper:function(e){var i=this.options,s=t.isFunction(i.helper)?t(i.helper.apply(this.element[0],[e,this.currentItem])):"clone"==i.helper?this.currentItem.clone():this.currentItem;return s.parents("body").length||t("parent"!=i.appendTo?i.appendTo:this.currentItem[0].parentNode)[0].appendChild(s[0]),s[0]==this.currentItem[0]&&(this._storedCSS={width:this.currentItem[0].style.width,height:this.currentItem[0].style.height,position:this.currentItem.css("position"),top:this.currentItem.css("top"),left:this.currentItem.css("left")}),(""==s[0].style.width||i.forceHelperSize)&&s.width(this.currentItem.width()),(""==s[0].style.height||i.forceHelperSize)&&s.height(this.currentItem.height()),s},_adjustOffsetFromHelper:function(e){"string"==typeof e&&(e=e.split(" ")),t.isArray(e)&&(e={left:+e[0],top:+e[1]||0}),"left"in e&&(this.offset.click.left=e.left+this.margins.left),"right"in e&&(this.offset.click.left=this.helperProportions.width-e.right+this.margins.left),"top"in e&&(this.offset.click.top=e.top+this.margins.top),"bottom"in e&&(this.offset.click.top=this.helperProportions.height-e.bottom+this.margins.top)},_getParentOffset:function(){this.offsetParent=this.helper.offsetParent();var e=this.offsetParent.offset();return"absolute"==this.cssPosition&&this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])&&(e.left+=this.scrollParent.scrollLeft(),e.top+=this.scrollParent.scrollTop()),(this.offsetParent[0]==document.body||this.offsetParent[0].tagName&&"html"==this.offsetParent[0].tagName.toLowerCase()&&t.ui.ie)&&(e={top:0,left:0}),{top:e.top+(parseInt(this.offsetParent.css("borderTopWidth"),10)||0),left:e.left+(parseInt(this.offsetParent.css("borderLeftWidth"),10)||0)}},_getRelativeOffset:function(){if("relative"==this.cssPosition){var t=this.currentItem.position();return{top:t.top-(parseInt(this.helper.css("top"),10)||0)+this.scrollParent.scrollTop(),left:t.left-(parseInt(this.helper.css("left"),10)||0)+this.scrollParent.scrollLeft()}}return{top:0,left:0}},_cacheMargins:function(){this.margins={left:parseInt(this.currentItem.css("marginLeft"),10)||0,top:parseInt(this.currentItem.css("marginTop"),10)||0}},_cacheHelperProportions:function(){this.helperProportions={width:this.helper.outerWidth(),height:this.helper.outerHeight()}},_setContainment:function(){var e=this.options;if("parent"==e.containment&&(e.containment=this.helper[0].parentNode),"document"!=e.containment&&"window"!=e.containment||(this.containment=[0-this.offset.relative.left-this.offset.parent.left,0-this.offset.relative.top-this.offset.parent.top,t("document"==e.containment?document:window).width()-this.helperProportions.width-this.margins.left,(t("document"==e.containment?document:window).height()||document.body.parentNode.scrollHeight)-this.helperProportions.height-this.margins.top]),!/^(document|window|parent)$/.test(e.containment)){var i=t(e.containment)[0],s=t(e.containment).offset(),n="hidden"!=t(i).css("overflow");this.containment=[s.left+(parseInt(t(i).css("borderLeftWidth"),10)||0)+(parseInt(t(i).css("paddingLeft"),10)||0)-this.margins.left,s.top+(parseInt(t(i).css("borderTopWidth"),10)||0)+(parseInt(t(i).css("paddingTop"),10)||0)-this.margins.top,s.left+(n?Math.max(i.scrollWidth,i.offsetWidth):i.offsetWidth)-(parseInt(t(i).css("borderLeftWidth"),10)||0)-(parseInt(t(i).css("paddingRight"),10)||0)-this.helperProportions.width-this.margins.left,s.top+(n?Math.max(i.scrollHeight,i.offsetHeight):i.offsetHeight)-(parseInt(t(i).css("borderTopWidth"),10)||0)-(parseInt(t(i).css("paddingBottom"),10)||0)-this.helperProportions.height-this.margins.top]}},_convertPositionTo:function(e,i){i||(i=this.position);var s="absolute"==e?1:-1,n=(this.options,"absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent),a=/(html|body)/i.test(n[0].tagName);return{top:i.top+this.offset.relative.top*s+this.offset.parent.top*s-("fixed"==this.cssPosition?-this.scrollParent.scrollTop():a?0:n.scrollTop())*s,left:i.left+this.offset.relative.left*s+this.offset.parent.left*s-("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():a?0:n.scrollLeft())*s}},_generatePosition:function(e){var i=this.options,s="absolute"!=this.cssPosition||this.scrollParent[0]!=document&&t.contains(this.scrollParent[0],this.offsetParent[0])?this.scrollParent:this.offsetParent,n=/(html|body)/i.test(s[0].tagName);"relative"!=this.cssPosition||this.scrollParent[0]!=document&&this.scrollParent[0]!=this.offsetParent[0]||(this.offset.relative=this._getRelativeOffset());var a=e.pageX,o=e.pageY;if(this.originalPosition&&(this.containment&&(e.pageX-this.offset.click.left<this.containment[0]&&(a=this.containment[0]+this.offset.click.left),e.pageY-this.offset.click.top<this.containment[1]&&(o=this.containment[1]+this.offset.click.top),e.pageX-this.offset.click.left>this.containment[2]&&(a=this.containment[2]+this.offset.click.left),e.pageY-this.offset.click.top>this.containment[3]&&(o=this.containment[3]+this.offset.click.top)),i.grid)){var r=this.originalPageY+Math.round((o-this.originalPageY)/i.grid[1])*i.grid[1];o=this.containment&&(r-this.offset.click.top<this.containment[1]||r-this.offset.click.top>this.containment[3])?r-this.offset.click.top<this.containment[1]?r+i.grid[1]:r-i.grid[1]:r;var l=this.originalPageX+Math.round((a-this.originalPageX)/i.grid[0])*i.grid[0];a=this.containment&&(l-this.offset.click.left<this.containment[0]||l-this.offset.click.left>this.containment[2])?l-this.offset.click.left<this.containment[0]?l+i.grid[0]:l-i.grid[0]:l}return{top:o-this.offset.click.top-this.offset.relative.top-this.offset.parent.top+("fixed"==this.cssPosition?-this.scrollParent.scrollTop():n?0:s.scrollTop()),left:a-this.offset.click.left-this.offset.relative.left-this.offset.parent.left+("fixed"==this.cssPosition?-this.scrollParent.scrollLeft():n?0:s.scrollLeft())}},_rearrange:function(t,e,i,s){i?i[0].appendChild(this.placeholder[0]):e.item[0].parentNode.insertBefore(this.placeholder[0],"down"==this.direction?e.item[0]:e.item[0].nextSibling),this.counter=this.counter?++this.counter:1;var n=this.counter;this._delay(function(){n==this.counter&&this.refreshPositions(!s)})},_clear:function(e,i){this.reverting=!1;var s=[];if(!this._noFinalSort&&this.currentItem.parent().length&&this.placeholder.before(this.currentItem),this._noFinalSort=null,this.helper[0]==this.currentItem[0]){for(var n in this._storedCSS)"auto"!=this._storedCSS[n]&&"static"!=this._storedCSS[n]||(this._storedCSS[n]="");this.currentItem.css(this._storedCSS).removeClass("ui-sortable-helper")}else this.currentItem.show();this.fromOutside&&!i&&s.push(function(t){this._trigger("receive",t,this._uiHash(this.fromOutside))}),!this.fromOutside&&this.domPosition.prev==this.currentItem.prev().not(".ui-sortable-helper")[0]&&this.domPosition.parent==this.currentItem.parent()[0]||i||s.push(function(t){this._trigger("update",t,this._uiHash())}),this!==this.currentContainer&&(i||(s.push(function(t){this._trigger("remove",t,this._uiHash())}),s.push(function(t){return function(e){t._trigger("receive",e,this._uiHash(this))}}.call(this,this.currentContainer)),s.push(function(t){return function(e){t._trigger("update",e,this._uiHash(this))}}.call(this,this.currentContainer))));for(var n=this.containers.length-1;n>=0;n--)i||s.push(function(t){return function(e){t._trigger("deactivate",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over&&(s.push(function(t){return function(e){t._trigger("out",e,this._uiHash(this))}}.call(this,this.containers[n])),this.containers[n].containerCache.over=0);if(this._storedCursor&&t("body").css("cursor",this._storedCursor),this._storedOpacity&&this.helper.css("opacity",this._storedOpacity),this._storedZIndex&&this.helper.css("zIndex","auto"==this._storedZIndex?"":this._storedZIndex),this.dragging=!1,this.cancelHelperRemoval){if(!i){this._trigger("beforeStop",e,this._uiHash());for(var n=0;n<s.length;n++)s[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!1}if(i||this._trigger("beforeStop",e,this._uiHash()),this.placeholder[0].parentNode.removeChild(this.placeholder[0]),this.helper[0]!=this.currentItem[0]&&this.helper.remove(),this.helper=null,!i){for(var n=0;n<s.length;n++)s[n].call(this,e);this._trigger("stop",e,this._uiHash())}return this.fromOutside=!1,!0},_trigger:function(){!1===t.Widget.prototype._trigger.apply(this,arguments)&&this.cancel()},_uiHash:function(e){var i=e||this;return{helper:i.helper,placeholder:i.placeholder||t([]),position:i.position,originalPosition:i.originalPosition,offset:i.positionAbs,item:i.currentItem,sender:e?e.element:null}}})}(jQuery),jQuery.effects||function(t,e){var i=!1!==t.uiBackCompat,s="ui-effects-";t.effects={effect:{}},/*!
 * jQuery Color Animations v2.0.0
 * http://jquery.com/
 *
 * Copyright 2012 jQuery Foundation and other contributors
 * Released under the MIT license.
 * http://jquery.org/license
 *
 * Date: Mon Aug 13 13:41:02 2012 -0500
 */
function(e,i){function s(t,e,i){var s=d[e.type]||{};return null==t?i||!e.def?null:e.def:(t=s.floor?~~t:parseFloat(t),isNaN(t)?e.def:s.mod?(t+s.mod)%s.mod:0>t?0:s.max<t?s.max:t)}function n(t){var i=c(),s=i._rgba=[];return t=t.toLowerCase(),g(h,function(e,n){var a,o=n.re.exec(t),r=o&&n.parse(o),l=n.space||"rgba";if(r)return a=i[l](r),i[u[l].cache]=a[u[l].cache],s=i._rgba=a._rgba,!1}),s.length?("0,0,0,0"===s.join()&&e.extend(s,o.transparent),i):o[t]}function a(t,e,i){return i=(i+1)%1,6*i<1?t+(e-t)*i*6:2*i<1?e:3*i<2?t+(e-t)*(2/3-i)*6:t}var o,r="backgroundColor borderBottomColor borderLeftColor borderRightColor borderTopColor color columnRuleColor outlineColor textDecorationColor textEmphasisColor".split(" "),l=/^([\-+])=\s*(\d+\.?\d*)/,h=[{re:/rgba?\(\s*(\d{1,3})\s*,\s*(\d{1,3})\s*,\s*(\d{1,3})\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[t[1],t[2],t[3],t[4]]}},{re:/rgba?\(\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,parse:function(t){return[2.55*t[1],2.55*t[2],2.55*t[3],t[4]]}},{re:/#([a-f0-9]{2})([a-f0-9]{2})([a-f0-9]{2})/,parse:function(t){return[parseInt(t[1],16),parseInt(t[2],16),parseInt(t[3],16)]}},{re:/#([a-f0-9])([a-f0-9])([a-f0-9])/,parse:function(t){return[parseInt(t[1]+t[1],16),parseInt(t[2]+t[2],16),parseInt(t[3]+t[3],16)]}},{re:/hsla?\(\s*(\d+(?:\.\d+)?)\s*,\s*(\d+(?:\.\d+)?)\%\s*,\s*(\d+(?:\.\d+)?)\%\s*(?:,\s*(\d+(?:\.\d+)?)\s*)?\)/,space:"hsla",parse:function(t){return[t[1],t[2]/100,t[3]/100,t[4]]}}],c=e.Color=function(t,i,s,n){return new e.Color.fn.parse(t,i,s,n)},u={rgba:{props:{red:{idx:0,type:"byte"},green:{idx:1,type:"byte"},blue:{idx:2,type:"byte"}}},hsla:{props:{hue:{idx:0,type:"degrees"},saturation:{idx:1,type:"percent"},lightness:{idx:2,type:"percent"}}}},d={"byte":{floor:!0,max:255},percent:{max:1},degrees:{mod:360,floor:!0}},p=c.support={},f=e("<p>")[0],g=e.each;f.style.cssText="background-color:rgba(1,1,1,.5)",p.rgba=f.style.backgroundColor.indexOf("rgba")>-1,g(u,function(t,e){e.cache="_"+t,e.props.alpha={idx:3,type:"percent",def:1}}),c.fn=e.extend(c.prototype,{parse:function(a,r,l,h){if(a===i)return this._rgba=[null,null,null,null],this;(a.jquery||a.nodeType)&&(a=e(a).css(r),r=i);var d=this,p=e.type(a),f=this._rgba=[];return r!==i&&(a=[a,r,l,h],p="array"),"string"===p?this.parse(n(a)||o._default):"array"===p?(g(u.rgba.props,function(t,e){f[e.idx]=s(a[e.idx],e)}),this):"object"===p?(a instanceof c?g(u,function(t,e){a[e.cache]&&(d[e.cache]=a[e.cache].slice())}):g(u,function(e,i){var n=i.cache;g(i.props,function(t,e){if(!d[n]&&i.to){if("alpha"===t||null==a[t])return;d[n]=i.to(d._rgba)}d[n][e.idx]=s(a[t],e,!0)}),d[n]&&t.inArray(null,d[n].slice(0,3))<0&&(d[n][3]=1,i.from&&(d._rgba=i.from(d[n])))}),this):void 0},is:function(t){var e=c(t),i=!0,s=this;return g(u,function(t,n){var a,o=e[n.cache];return o&&(a=s[n.cache]||n.to&&n.to(s._rgba)||[],g(n.props,function(t,e){if(null!=o[e.idx])return i=o[e.idx]===a[e.idx]})),i}),i},_space:function(){var t=[],e=this;return g(u,function(i,s){e[s.cache]&&t.push(i)}),t.pop()},transition:function(t,e){var i=c(t),n=i._space(),a=u[n],o=0===this.alpha()?c("transparent"):this,r=o[a.cache]||a.to(o._rgba),l=r.slice();return i=i[a.cache],g(a.props,function(t,n){var a=n.idx,o=r[a],h=i[a],c=d[n.type]||{};null!==h&&(null===o?l[a]=h:(c.mod&&(h-o>c.mod/2?o+=c.mod:o-h>c.mod/2&&(o-=c.mod)),l[a]=s((h-o)*e+o,n)))}),this[n](l)},blend:function(t){if(1===this._rgba[3])return this;var i=this._rgba.slice(),s=i.pop(),n=c(t)._rgba;return c(e.map(i,function(t,e){return(1-s)*n[e]+s*t}))},toRgbaString:function(){var t="rgba(",i=e.map(this._rgba,function(t,e){return null==t?e>2?1:0:t});return 1===i[3]&&(i.pop(),t="rgb("),t+i.join()+")"},toHslaString:function(){var t="hsla(",i=e.map(this.hsla(),function(t,e){return null==t&&(t=e>2?1:0),e&&e<3&&(t=Math.round(100*t)+"%"),t});return 1===i[3]&&(i.pop(),t="hsl("),t+i.join()+")"},toHexString:function(t){var i=this._rgba.slice(),s=i.pop();return t&&i.push(~~(255*s)),"#"+e.map(i,function(t){return t=(t||0).toString(16),1===t.length?"0"+t:t}).join("")},toString:function(){return 0===this._rgba[3]?"transparent":this.toRgbaString()}}),c.fn.parse.prototype=c.fn,u.hsla.to=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e,i,s=t[0]/255,n=t[1]/255,a=t[2]/255,o=t[3],r=Math.max(s,n,a),l=Math.min(s,n,a),h=r-l,c=r+l,u=.5*c;return e=l===r?0:s===r?60*(n-a)/h+360:n===r?60*(a-s)/h+120:60*(s-n)/h+240,i=0===u||1===u?u:u<=.5?h/c:h/(2-c),[Math.round(e)%360,i,u,null==o?1:o]},u.hsla.from=function(t){if(null==t[0]||null==t[1]||null==t[2])return[null,null,null,t[3]];var e=t[0]/360,i=t[1],s=t[2],n=t[3],o=s<=.5?s*(1+i):s+i-s*i,r=2*s-o;return[Math.round(255*a(r,o,e+1/3)),Math.round(255*a(r,o,e)),Math.round(255*a(r,o,e-1/3)),n]},g(u,function(t,n){var a=n.props,o=n.cache,r=n.to,h=n.from;c.fn[t]=function(t){if(r&&!this[o]&&(this[o]=r(this._rgba)),t===i)return this[o].slice();var n,l=e.type(t),u="array"===l||"object"===l?t:arguments,d=this[o].slice();return g(a,function(t,e){var i=u["object"===l?t:e.idx];null==i&&(i=d[e.idx]),d[e.idx]=s(i,e)}),h?(n=c(h(d)),n[o]=d,n):c(d)},g(a,function(i,s){c.fn[i]||(c.fn[i]=function(n){var a,o=e.type(n),r="alpha"===i?this._hsla?"hsla":"rgba":t,h=this[r](),c=h[s.idx];return"undefined"===o?c:("function"===o&&(n=n.call(this,c),o=e.type(n)),null==n&&s.empty?this:("string"===o&&(a=l.exec(n))&&(n=c+parseFloat(a[2])*("+"===a[1]?1:-1)),h[s.idx]=n,this[r](h)))})})}),g(r,function(t,i){e.cssHooks[i]={set:function(t,s){var a,o,r="";if("string"!==e.type(s)||(a=n(s))){if(s=c(a||s),!p.rgba&&1!==s._rgba[3]){for(o="backgroundColor"===i?t.parentNode:t;(""===r||"transparent"===r)&&o&&o.style;)try{r=e.css(o,"backgroundColor"),o=o.parentNode}catch(t){}s=s.blend(r&&"transparent"!==r?r:"_default")}s=s.toRgbaString()}try{t.style[i]=s}catch(t){}}},e.fx.step[i]=function(t){t.colorInit||(t.start=c(t.elem,i),t.end=c(t.end),t.colorInit=!0),e.cssHooks[i].set(t.elem,t.start.transition(t.end,t.pos))}}),e.cssHooks.borderColor={expand:function(t){var e={};return g(["Top","Right","Bottom","Left"],function(i,s){e["border"+s+"Color"]=t}),e}},o=e.Color.names={aqua:"#00ffff",black:"#000000",blue:"#0000ff",fuchsia:"#ff00ff",gray:"#808080",green:"#008000",lime:"#00ff00",maroon:"#800000",navy:"#000080",olive:"#808000",purple:"#800080",red:"#ff0000",silver:"#c0c0c0",teal:"#008080",white:"#ffffff",yellow:"#ffff00",transparent:[null,null,null,0],_default:"#ffffff"}}(jQuery),function(){function i(){var e,i,s=this.ownerDocument.defaultView?this.ownerDocument.defaultView.getComputedStyle(this,null):this.currentStyle,n={};if(s&&s.length&&s[0]&&s[s[0]])for(i=s.length;i--;)e=s[i],"string"==typeof s[e]&&(n[t.camelCase(e)]=s[e]);else for(e in s)"string"==typeof s[e]&&(n[e]=s[e]);return n}function s(e,i){var s,n,o={};for(s in i)n=i[s],e[s]!==n&&(a[s]||!t.fx.step[s]&&isNaN(parseFloat(n))||(o[s]=n));return o}var n=["add","remove","toggle"],a={border:1,borderBottom:1,borderColor:1,borderLeft:1,borderRight:1,borderTop:1,borderWidth:1,margin:1,padding:1};t.each(["borderLeftStyle","borderRightStyle","borderBottomStyle","borderTopStyle"],function(e,i){t.fx.step[i]=function(t){("none"!==t.end&&!t.setAttr||1===t.pos&&!t.setAttr)&&(jQuery.style(t.elem,i,t.end),t.setAttr=!0)}}),t.effects.animateClass=function(e,a,o,r){var l=t.speed(a,o,r);return this.queue(function(){var a,o=t(this),r=o.attr("class")||"",h=l.children?o.find("*").andSelf():o;h=h.map(function(){return{el:t(this),start:i.call(this)}}),a=function(){t.each(n,function(t,i){e[i]&&o[i+"Class"](e[i])})},a(),h=h.map(function(){return this.end=i.call(this.el[0]),this.diff=s(this.start,this.end),this}),o.attr("class",r),h=h.map(function(){var e=this,i=t.Deferred(),s=jQuery.extend({},l,{queue:!1,complete:function(){i.resolve(e)}});return this.el.animate(this.diff,s),i.promise()}),t.when.apply(t,h.get()).done(function(){a(),t.each(arguments,function(){var e=this.el;t.each(this.diff,function(t){e.css(t,"")})}),l.complete.call(o[0])})})},t.fn.extend({_addClass:t.fn.addClass,addClass:function(e,i,s,n){return i?t.effects.animateClass.call(this,{add:e},i,s,n):this._addClass(e)},_removeClass:t.fn.removeClass,removeClass:function(e,i,s,n){return i?t.effects.animateClass.call(this,{remove:e},i,s,n):this._removeClass(e)},_toggleClass:t.fn.toggleClass,toggleClass:function(i,s,n,a,o){return"boolean"==typeof s||s===e?n?t.effects.animateClass.call(this,s?{add:i}:{remove:i},n,a,o):this._toggleClass(i,s):t.effects.animateClass.call(this,{toggle:i},s,n,a)},switchClass:function(e,i,s,n,a){return t.effects.animateClass.call(this,{add:i,remove:e},s,n,a)}})}(),function(){function n(e,i,s,n){return t.isPlainObject(e)&&(i=e,e=e.effect),e={effect:e},null==i&&(i={}),t.isFunction(i)&&(n=i,s=null,i={}),("number"==typeof i||t.fx.speeds[i])&&(n=s,s=i,i={}),t.isFunction(s)&&(n=s,s=null),i&&t.extend(e,i),s=s||i.duration,e.duration=t.fx.off?0:"number"==typeof s?s:s in t.fx.speeds?t.fx.speeds[s]:t.fx.speeds._default,e.complete=n||i.complete,e}function a(e){return!(e&&"number"!=typeof e&&!t.fx.speeds[e])||"string"==typeof e&&!t.effects.effect[e]&&(!i||!t.effects[e])}t.extend(t.effects,{version:"1.9.2",save:function(t,e){for(var i=0;i<e.length;i++)null!==e[i]&&t.data(s+e[i],t[0].style[e[i]])},restore:function(t,i){var n,a;for(a=0;a<i.length;a++)null!==i[a]&&(n=t.data(s+i[a]),n===e&&(n=""),t.css(i[a],n))},setMode:function(t,e){return"toggle"===e&&(e=t.is(":hidden")?"show":"hide"),e},getBaseline:function(t,e){var i,s;switch(t[0]){case"top":i=0;break;case"middle":i=.5;break;case"bottom":i=1;break;default:i=t[0]/e.height}switch(t[1]){case"left":s=0;break;case"center":s=.5;break;case"right":s=1;break;default:s=t[1]/e.width}return{x:s,y:i}},createWrapper:function(e){if(e.parent().is(".ui-effects-wrapper"))return e.parent();var i={width:e.outerWidth(!0),height:e.outerHeight(!0),"float":e.css("float")},s=t("<div></div>").addClass("ui-effects-wrapper").css({fontSize:"100%",background:"transparent",border:"none",margin:0,padding:0}),n={width:e.width(),height:e.height()},a=document.activeElement;try{a.id}catch(t){a=document.body}return e.wrap(s),(e[0]===a||t.contains(e[0],a))&&t(a).focus(),s=e.parent(),"static"===e.css("position")?(s.css({position:"relative"}),e.css({position:"relative"})):(t.extend(i,{position:e.css("position"),zIndex:e.css("z-index")}),t.each(["top","left","bottom","right"],function(t,s){i[s]=e.css(s),isNaN(parseInt(i[s],10))&&(i[s]="auto")}),e.css({position:"relative",top:0,left:0,right:"auto",bottom:"auto"})),e.css(n),s.css(i).show()},removeWrapper:function(e){var i=document.activeElement;return e.parent().is(".ui-effects-wrapper")&&(e.parent().replaceWith(e),(e[0]===i||t.contains(e[0],i))&&t(i).focus()),e},setTransition:function(e,i,s,n){return n=n||{},t.each(i,function(t,i){var a=e.cssUnit(i);a[0]>0&&(n[i]=a[0]*s+a[1])}),n}}),t.fn.extend({effect:function(){function e(e){function i(){t.isFunction(a)&&a.call(n[0]),t.isFunction(e)&&e()}var n=t(this),a=s.complete,o=s.mode;(n.is(":hidden")?"hide"===o:"show"===o)?i():r.call(n[0],s,i)}var s=n.apply(this,arguments),a=s.mode,o=s.queue,r=t.effects.effect[s.effect],l=!r&&i&&t.effects[s.effect];return t.fx.off||!r&&!l?a?this[a](s.duration,s.complete):this.each(function(){s.complete&&s.complete.call(this)}):r?!1===o?this.each(e):this.queue(o||"fx",e):l.call(this,{options:s,duration:s.duration,callback:s.complete,mode:s.mode})},_show:t.fn.show,show:function(t){if(a(t))return this._show.apply(this,arguments);var e=n.apply(this,arguments);return e.mode="show",this.effect.call(this,e)},_hide:t.fn.hide,hide:function(t){if(a(t))return this._hide.apply(this,arguments);var e=n.apply(this,arguments);return e.mode="hide",this.effect.call(this,e)},__toggle:t.fn.toggle,toggle:function(e){if(a(e)||"boolean"==typeof e||t.isFunction(e))return this.__toggle.apply(this,arguments);var i=n.apply(this,arguments);return i.mode="toggle",this.effect.call(this,i)},cssUnit:function(e){var i=this.css(e),s=[];return t.each(["em","px","%","pt"],function(t,e){i.indexOf(e)>0&&(s=[parseFloat(i),e])}),s}})}(),function(){var e={};t.each(["Quad","Cubic","Quart","Quint","Expo"],function(t,i){e[i]=function(e){return Math.pow(e,t+2)}}),t.extend(e,{Sine:function(t){return 1-Math.cos(t*Math.PI/2)},Circ:function(t){return 1-Math.sqrt(1-t*t)},Elastic:function(t){return 0===t||1===t?t:-Math.pow(2,8*(t-1))*Math.sin((80*(t-1)-7.5)*Math.PI/15)},Back:function(t){return t*t*(3*t-2)},Bounce:function(t){for(var e,i=4;t<((e=Math.pow(2,--i))-1)/11;);return 1/Math.pow(4,3-i)-7.5625*Math.pow((3*e-2)/22-t,2)}}),t.each(e,function(e,i){t.easing["easeIn"+e]=i,t.easing["easeOut"+e]=function(t){return 1-i(1-t)},t.easing["easeInOut"+e]=function(t){return t<.5?i(2*t)/2:1-i(-2*t+2)/2}})}()}(jQuery),function(t){var e=0,i={},s={};i.height=i.paddingTop=i.paddingBottom=i.borderTopWidth=i.borderBottomWidth="hide",s.height=s.paddingTop=s.paddingBottom=s.borderTopWidth=s.borderBottomWidth="show",t.widget("ui.accordion",{version:"1.9.2",options:{active:0,animate:{},collapsible:!1,event:"click",header:"> li > :first-child,> :not(li):even",heightStyle:"auto",icons:{activeHeader:"ui-icon-triangle-1-s",header:"ui-icon-triangle-1-e"},activate:null,beforeActivate:null},_create:function(){var i=this.accordionId="ui-accordion-"+(this.element.attr("id")||++e),s=this.options;this.prevShow=this.prevHide=t(),this.element.addClass("ui-accordion ui-widget ui-helper-reset"),this.headers=this.element.find(s.header).addClass("ui-accordion-header ui-helper-reset ui-state-default ui-corner-all"),this._hoverable(this.headers),this._focusable(this.headers),this.headers.next().addClass("ui-accordion-content ui-helper-reset ui-widget-content ui-corner-bottom").hide(),s.collapsible||!1!==s.active&&null!=s.active||(s.active=0),s.active<0&&(s.active+=this.headers.length),this.active=this._findActive(s.active).addClass("ui-accordion-header-active ui-state-active").toggleClass("ui-corner-all ui-corner-top"),this.active.next().addClass("ui-accordion-content-active").show(),this._createIcons(),this.refresh(),this.element.attr("role","tablist"),this.headers.attr("role","tab").each(function(e){var s=t(this),n=s.attr("id"),a=s.next(),o=a.attr("id");n||(n=i+"-header-"+e,s.attr("id",n)),o||(o=i+"-panel-"+e,a.attr("id",o)),s.attr("aria-controls",o),a.attr("aria-labelledby",n)}).next().attr("role","tabpanel"),this.headers.not(this.active).attr({"aria-selected":"false",tabIndex:-1}).next().attr({"aria-expanded":"false","aria-hidden":"true"}).hide(),this.active.length?this.active.attr({"aria-selected":"true",tabIndex:0}).next().attr({"aria-expanded":"true","aria-hidden":"false"}):this.headers.eq(0).attr("tabIndex",0),this._on(this.headers,{keydown:"_keydown"}),this._on(this.headers.next(),{keydown:"_panelKeyDown"}),this._setupEvents(s.event)},_getCreateEventData:function(){return{header:this.active,content:this.active.length?this.active.next():t()}},_createIcons:function(){var e=this.options.icons;e&&(t("<span>").addClass("ui-accordion-header-icon ui-icon "+e.header).prependTo(this.headers),this.active.children(".ui-accordion-header-icon").removeClass(e.header).addClass(e.activeHeader),this.headers.addClass("ui-accordion-icons"))},_destroyIcons:function(){this.headers.removeClass("ui-accordion-icons").children(".ui-accordion-header-icon").remove()},_destroy:function(){var t;this.element.removeClass("ui-accordion ui-widget ui-helper-reset").removeAttr("role"),this.headers.removeClass("ui-accordion-header ui-accordion-header-active ui-helper-reset ui-state-default ui-corner-all ui-state-active ui-state-disabled ui-corner-top").removeAttr("role").removeAttr("aria-selected").removeAttr("aria-controls").removeAttr("tabIndex").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),this._destroyIcons(),t=this.headers.next().css("display","").removeAttr("role").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-labelledby").removeClass("ui-helper-reset ui-widget-content ui-corner-bottom ui-accordion-content ui-accordion-content-active ui-state-disabled").each(function(){/^ui-accordion/.test(this.id)&&this.removeAttribute("id")}),"content"!==this.options.heightStyle&&t.css("height","")},_setOption:function(t,e){if("active"===t)return void this._activate(e);"event"===t&&(this.options.event&&this._off(this.headers,this.options.event),this._setupEvents(e)),this._super(t,e),"collapsible"!==t||e||!1!==this.options.active||this._activate(0),"icons"===t&&(this._destroyIcons(),e&&this._createIcons()),"disabled"===t&&this.headers.add(this.headers.next()).toggleClass("ui-state-disabled",!!e)},_keydown:function(e){if(!e.altKey&&!e.ctrlKey){var i=t.ui.keyCode,s=this.headers.length,n=this.headers.index(e.target),a=!1;switch(e.keyCode){case i.RIGHT:case i.DOWN:a=this.headers[(n+1)%s];break;case i.LEFT:case i.UP:a=this.headers[(n-1+s)%s];break;case i.SPACE:case i.ENTER:this._eventHandler(e);break;case i.HOME:a=this.headers[0];break;case i.END:a=this.headers[s-1]}a&&(t(e.target).attr("tabIndex",-1),t(a).attr("tabIndex",0),a.focus(),e.preventDefault())}},_panelKeyDown:function(e){e.keyCode===t.ui.keyCode.UP&&e.ctrlKey&&t(e.currentTarget).prev().focus()},refresh:function(){var e,i,s=this.options.heightStyle,n=this.element.parent();"fill"===s?(t.support.minHeight||(i=n.css("overflow"),n.css("overflow","hidden")),e=n.height(),this.element.siblings(":visible").each(function(){var i=t(this),s=i.css("position");"absolute"!==s&&"fixed"!==s&&(e-=i.outerHeight(!0))}),i&&n.css("overflow",i),this.headers.each(function(){e-=t(this).outerHeight(!0)}),this.headers.next().each(function(){t(this).height(Math.max(0,e-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===s&&(e=0,this.headers.next().each(function(){e=Math.max(e,t(this).css("height","").height())}).height(e))},_activate:function(e){var i=this._findActive(e)[0];i!==this.active[0]&&(i=i||this.active[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return"number"==typeof e?this.headers.eq(e):t()},_setupEvents:function(e){var i={};e&&(t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._on(this.headers,i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),a=n[0]===s[0],o=a&&i.collapsible,r=o?t():n.next(),l=s.next(),h={oldHeader:s,oldPanel:l,newHeader:o?t():n,newPanel:r};e.preventDefault(),a&&!i.collapsible||!1===this._trigger("beforeActivate",e,h)||(i.active=!o&&this.headers.index(n),this.active=a?t():n,this._toggle(h),s.removeClass("ui-accordion-header-active ui-state-active"),i.icons&&s.children(".ui-accordion-header-icon").removeClass(i.icons.activeHeader).addClass(i.icons.header),a||(n.removeClass("ui-corner-all").addClass("ui-accordion-header-active ui-state-active ui-corner-top"),i.icons&&n.children(".ui-accordion-header-icon").removeClass(i.icons.header).addClass(i.icons.activeHeader),n.next().addClass("ui-accordion-content-active")))},_toggle:function(e){var i=e.newPanel,s=this.prevShow.length?this.prevShow:e.oldPanel;this.prevShow.add(this.prevHide).stop(!0,!0),this.prevShow=i,this.prevHide=s,this.options.animate?this._animate(i,s,e):(s.hide(),i.show(),this._toggleComplete(e)),s.attr({"aria-expanded":"false","aria-hidden":"true"}),s.prev().attr("aria-selected","false"),i.length&&s.length?s.prev().attr("tabIndex",-1):i.length&&this.headers.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),i.attr({"aria-expanded":"true","aria-hidden":"false"}).prev().attr({"aria-selected":"true",tabIndex:0})},_animate:function(t,e,n){var a,o,r,l=this,h=0,c=t.length&&(!e.length||t.index()<e.index()),u=this.options.animate||{},d=c&&u.down||u,p=function(){l._toggleComplete(n)};return"number"==typeof d&&(r=d),"string"==typeof d&&(o=d),o=o||d.easing||u.easing,r=r||d.duration||u.duration,e.length?t.length?(a=t.show().outerHeight(),e.animate(i,{duration:r,easing:o,step:function(t,e){e.now=Math.round(t)}}),void t.hide().animate(s,{duration:r,easing:o,complete:p,step:function(t,i){i.now=Math.round(t),"height"!==i.prop?h+=i.now:"content"!==l.options.heightStyle&&(i.now=Math.round(a-e.outerHeight()-h),h=0)}})):e.animate(i,r,o,p):t.animate(s,r,o,p)},_toggleComplete:function(t){var e=t.oldPanel;e.removeClass("ui-accordion-content-active").prev().removeClass("ui-corner-top").addClass("ui-corner-all"),e.length&&(e.parent()[0].className=e.parent()[0].className),this._trigger("activate",null,t)}}),!1!==t.uiBackCompat&&(function(t,e){t.extend(e.options,{navigation:!1,navigationFilter:function(){return this.href.toLowerCase()===location.href.toLowerCase()}});var i=e._create;e._create=function(){if(this.options.navigation){var e=this,s=this.element.find(this.options.header),n=s.next(),a=s.add(n).find("a").filter(this.options.navigationFilter)[0];a&&s.add(n).each(function(i){if(t.contains(this,a))return e.options.active=Math.floor(i/2),!1})}i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(t,e){t.extend(e.options,{heightStyle:null,autoHeight:!0,clearStyle:!1,fillSpace:!1});var i=e._create,s=e._setOption;t.extend(e,{_create:function(){this.options.heightStyle=this.options.heightStyle||this._mergeHeightStyle(),i.call(this)},_setOption:function(t){"autoHeight"!==t&&"clearStyle"!==t&&"fillSpace"!==t||(this.options.heightStyle=this._mergeHeightStyle()),s.apply(this,arguments)},_mergeHeightStyle:function(){var t=this.options;return t.fillSpace?"fill":t.clearStyle?"content":t.autoHeight?"auto":void 0}})}(jQuery,jQuery.ui.accordion.prototype),function(t,e){t.extend(e.options.icons,{activeHeader:null,headerSelected:"ui-icon-triangle-1-s"});var i=e._createIcons;e._createIcons=function(){this.options.icons&&(this.options.icons.activeHeader=this.options.icons.activeHeader||this.options.icons.headerSelected),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype),function(t,e){e.activate=e._activate;var i=e._findActive;e._findActive=function(t){return-1===t&&(t=!1),t&&"number"!=typeof t&&-1===(t=this.headers.index(this.headers.filter(t)))&&(t=!1),i.call(this,t)}}(jQuery,jQuery.ui.accordion.prototype),jQuery.ui.accordion.prototype.resize=jQuery.ui.accordion.prototype.refresh,function(t,e){t.extend(e.options,{change:null,changestart:null});var i=e._trigger;e._trigger=function(t,e,s){var n=i.apply(this,arguments);return!!n&&("beforeActivate"===t?n=i.call(this,"changestart",e,{oldHeader:s.oldHeader,oldContent:s.oldPanel,newHeader:s.newHeader,newContent:s.newPanel}):"activate"===t&&(n=i.call(this,"change",e,{oldHeader:s.oldHeader,oldContent:s.oldPanel,newHeader:s.newHeader,newContent:s.newPanel})),n)}}(jQuery,jQuery.ui.accordion.prototype),function(t,e){t.extend(e.options,{animate:null,animated:"slide"});var i=e._create;e._create=function(){var t=this.options;null===t.animate&&(t.animated?"slide"===t.animated?t.animate=300:"bounceslide"===t.animated?t.animate={duration:200,down:{easing:"easeOutBounce",duration:1e3}}:t.animate=t.animated:t.animate=!1),i.call(this)}}(jQuery,jQuery.ui.accordion.prototype))}(jQuery),function(t){var e=0;t.widget("ui.autocomplete",{version:"1.9.2",defaultElement:"<input>",options:{appendTo:"body",autoFocus:!1,delay:300,minLength:1,position:{my:"left top",at:"left bottom",collision:"none"},source:null,change:null,close:null,focus:null,open:null,response:null,search:null,select:null},pending:0,_create:function(){var e,i,s;this.isMultiLine=this._isMultiLine(),this.valueMethod=this.element[this.element.is("input,textarea")?"val":"text"],this.isNewMenu=!0,this.element.addClass("ui-autocomplete-input").attr("autocomplete","off"),this._on(this.element,{keydown:function(n){if(this.element.prop("readOnly"))return e=!0,s=!0,void(i=!0);e=!1,s=!1,i=!1;var a=t.ui.keyCode;switch(n.keyCode){case a.PAGE_UP:e=!0,this._move("previousPage",n);break;case a.PAGE_DOWN:e=!0,this._move("nextPage",n);break;case a.UP:e=!0,this._keyEvent("previous",n);break;case a.DOWN:e=!0,this._keyEvent("next",n);break;case a.ENTER:case a.NUMPAD_ENTER:this.menu.active&&(e=!0,n.preventDefault(),this.menu.select(n));break;case a.TAB:this.menu.active&&this.menu.select(n);break;case a.ESCAPE:this.menu.element.is(":visible")&&(this._value(this.term),this.close(n),n.preventDefault());break;default:i=!0,this._searchTimeout(n)}},keypress:function(s){if(e)return e=!1,void s.preventDefault();if(!i){var n=t.ui.keyCode;switch(s.keyCode){case n.PAGE_UP:this._move("previousPage",s);break;case n.PAGE_DOWN:this._move("nextPage",s);break;case n.UP:this._keyEvent("previous",s);break;case n.DOWN:this._keyEvent("next",s)}}},input:function(t){if(s)return s=!1,void t.preventDefault();this._searchTimeout(t)},focus:function(){this.selectedItem=null,this.previous=this._value()},blur:function(t){if(this.cancelBlur)return void delete this.cancelBlur;clearTimeout(this.searching),this.close(t),this._change(t)}}),this._initSource(),this.menu=t("<ul>").addClass("ui-autocomplete").appendTo(this.document.find(this.options.appendTo||"body")[0]).menu({input:t(),role:null}).zIndex(this.element.zIndex()+1).hide().data("menu"),this._on(this.menu.element,{mousedown:function(e){e.preventDefault(),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur});var i=this.menu.element[0];t(e.target).closest(".ui-menu-item").length||this._delay(function(){var e=this;this.document.one("mousedown",function(s){s.target===e.element[0]||s.target===i||t.contains(i,s.target)||e.close()})})},menufocus:function(e,i){if(this.isNewMenu&&(this.isNewMenu=!1,e.originalEvent&&/^mouse/.test(e.originalEvent.type)))return this.menu.blur(),void this.document.one("mousemove",function(){t(e.target).trigger(e.originalEvent)});var s=i.item.data("ui-autocomplete-item")||i.item.data("item.autocomplete");!1!==this._trigger("focus",e,{item:s})?e.originalEvent&&/^key/.test(e.originalEvent.type)&&this._value(s.value):this.liveRegion.text(s.value)},menuselect:function(t,e){var i=e.item.data("ui-autocomplete-item")||e.item.data("item.autocomplete"),s=this.previous;this.element[0]!==this.document[0].activeElement&&(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s,this.selectedItem=i})),!1!==this._trigger("select",t,{item:i})&&this._value(i.value),this.term=this._value(),this.close(t),this.selectedItem=i}}),this.liveRegion=t("<span>",{role:"status","aria-live":"polite"}).addClass("ui-helper-hidden-accessible").insertAfter(this.element),t.fn.bgiframe&&this.menu.element.bgiframe(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_destroy:function(){clearTimeout(this.searching),this.element.removeClass("ui-autocomplete-input").removeAttr("autocomplete"),this.menu.element.remove(),this.liveRegion.remove()},_setOption:function(t,e){this._super(t,e),"source"===t&&this._initSource(),"appendTo"===t&&this.menu.element.appendTo(this.document.find(e||"body")[0]),"disabled"===t&&e&&this.xhr&&this.xhr.abort()},_isMultiLine:function(){return!!this.element.is("textarea")||!this.element.is("input")&&this.element.prop("isContentEditable")},_initSource:function(){var e,i,s=this;t.isArray(this.options.source)?(e=this.options.source,this.source=function(i,s){s(t.ui.autocomplete.filter(e,i.term))}):"string"==typeof this.options.source?(i=this.options.source,this.source=function(e,n){s.xhr&&s.xhr.abort(),s.xhr=t.ajax({url:i,data:e,dataType:"json",success:function(t){n(t)},error:function(){n([])}})}):this.source=this.options.source},_searchTimeout:function(t){clearTimeout(this.searching),this.searching=this._delay(function(){this.term!==this._value()&&(this.selectedItem=null,this.search(null,t))},this.options.delay)},search:function(t,e){return t=null!=t?t:this._value(),this.term=this._value(),t.length<this.options.minLength?this.close(e):!1!==this._trigger("search",e)?this._search(t):void 0},_search:function(t){this.pending++,this.element.addClass("ui-autocomplete-loading"),this.cancelSearch=!1,this.source({term:t},this._response())},_response:function(){var t=this,i=++e;return function(s){i===e&&t.__response(s),--t.pending||t.element.removeClass("ui-autocomplete-loading")}},__response:function(t){t&&(t=this._normalize(t)),this._trigger("response",null,{content:t}),!this.options.disabled&&t&&t.length&&!this.cancelSearch?(this._suggest(t),this._trigger("open")):this._close()},close:function(t){this.cancelSearch=!0,this._close(t)},_close:function(t){this.menu.element.is(":visible")&&(this.menu.element.hide(),this.menu.blur(),this.isNewMenu=!0,this._trigger("close",t))},_change:function(t){this.previous!==this._value()&&this._trigger("change",t,{item:this.selectedItem})},_normalize:function(e){return e.length&&e[0].label&&e[0].value?e:t.map(e,function(e){return"string"==typeof e?{label:e,value:e}:t.extend({label:e.label||e.value,value:e.value||e.label},e)})},_suggest:function(e){var i=this.menu.element.empty().zIndex(this.element.zIndex()+1);this._renderMenu(i,e),this.menu.refresh(),i.show(),this._resizeMenu(),i.position(t.extend({of:this.element},this.options.position)),this.options.autoFocus&&this.menu.next()},_resizeMenu:function(){var t=this.menu.element;t.outerWidth(Math.max(t.width("").outerWidth()+1,this.element.outerWidth()))},_renderMenu:function(e,i){var s=this;t.each(i,function(t,i){s._renderItemData(e,i)})},_renderItemData:function(t,e){return this._renderItem(t,e).data("ui-autocomplete-item",e)},_renderItem:function(e,i){return t("<li>").append(t("<a>").text(i.label)).appendTo(e)},_move:function(t,e){return this.menu.element.is(":visible")?this.menu.isFirstItem()&&/^previous/.test(t)||this.menu.isLastItem()&&/^next/.test(t)?(this._value(this.term),void this.menu.blur()):void this.menu[t](e):void this.search(null,e)},widget:function(){return this.menu.element},_value:function(){return this.valueMethod.apply(this.element,arguments)},_keyEvent:function(t,e){this.isMultiLine&&!this.menu.element.is(":visible")||(this._move(t,e),e.preventDefault())}}),t.extend(t.ui.autocomplete,{escapeRegex:function(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")},filter:function(e,i){var s=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(t){return s.test(t.label||t.value||t)})}}),t.widget("ui.autocomplete",t.ui.autocomplete,{options:{messages:{noResults:"No search results.",results:function(t){return t+(t>1?" results are":" result is")+" available, use up and down arrow keys to navigate."}}},__response:function(t){var e;this._superApply(arguments),this.options.disabled||this.cancelSearch||(e=t&&t.length?this.options.messages.results(t.length):this.options.messages.noResults,this.liveRegion.text(e))}})}(jQuery),function(t){var e,i,s,n,a="ui-button ui-widget ui-state-default ui-corner-all",o="ui-button-icons-only ui-button-icon-only ui-button-text-icons ui-button-text-icon-primary ui-button-text-icon-secondary ui-button-text-only",r=function(){var e=t(this).find(":ui-button");setTimeout(function(){e.button("refresh")},1)},l=function(e){var i=e.name,s=e.form,n=t([]);return i&&(n=s?t(s).find("[name='"+i+"']"):t("[name='"+i+"']",e.ownerDocument).filter(function(){return!this.form})),n};t.widget("ui.button",{version:"1.9.2",defaultElement:"<button>",options:{disabled:null,text:!0,label:null,icons:{primary:null,secondary:null}},_create:function(){this.element.closest("form").unbind("reset"+this.eventNamespace).bind("reset"+this.eventNamespace,r),"boolean"!=typeof this.options.disabled?this.options.disabled=!!this.element.prop("disabled"):this.element.prop("disabled",this.options.disabled),this._determineButtonType(),this.hasTitle=!!this.buttonElement.attr("title");var o=this,h=this.options,c="checkbox"===this.type||"radio"===this.type,u=c?"":"ui-state-active",d="ui-state-focus";null===h.label&&(h.label="input"===this.type?this.buttonElement.val():this.buttonElement.html()),this._hoverable(this.buttonElement),this.buttonElement.addClass(a).attr("role","button").bind("mouseenter"+this.eventNamespace,function(){h.disabled||this===e&&t(this).addClass("ui-state-active")}).bind("mouseleave"+this.eventNamespace,function(){h.disabled||t(this).removeClass(u)}).bind("click"+this.eventNamespace,function(t){h.disabled&&(t.preventDefault(),t.stopImmediatePropagation())}),this.element.bind("focus"+this.eventNamespace,function(){o.buttonElement.addClass(d)}).bind("blur"+this.eventNamespace,function(){o.buttonElement.removeClass(d)}),c&&(this.element.bind("change"+this.eventNamespace,function(){n||o.refresh()}),this.buttonElement.bind("mousedown"+this.eventNamespace,function(t){h.disabled||(n=!1,i=t.pageX,s=t.pageY)}).bind("mouseup"+this.eventNamespace,function(t){h.disabled||i===t.pageX&&s===t.pageY||(n=!0)})),"checkbox"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(h.disabled||n)return!1;t(this).toggleClass("ui-state-active"),o.buttonElement.attr("aria-pressed",o.element[0].checked)}):"radio"===this.type?this.buttonElement.bind("click"+this.eventNamespace,function(){if(h.disabled||n)return!1
;t(this).addClass("ui-state-active"),o.buttonElement.attr("aria-pressed","true");var e=o.element[0];l(e).not(e).map(function(){return t(this).button("widget")[0]}).removeClass("ui-state-active").attr("aria-pressed","false")}):(this.buttonElement.bind("mousedown"+this.eventNamespace,function(){if(h.disabled)return!1;t(this).addClass("ui-state-active"),e=this,o.document.one("mouseup",function(){e=null})}).bind("mouseup"+this.eventNamespace,function(){if(h.disabled)return!1;t(this).removeClass("ui-state-active")}).bind("keydown"+this.eventNamespace,function(e){if(h.disabled)return!1;e.keyCode!==t.ui.keyCode.SPACE&&e.keyCode!==t.ui.keyCode.ENTER||t(this).addClass("ui-state-active")}).bind("keyup"+this.eventNamespace,function(){t(this).removeClass("ui-state-active")}),this.buttonElement.is("a")&&this.buttonElement.keyup(function(e){e.keyCode===t.ui.keyCode.SPACE&&t(this).click()})),this._setOption("disabled",h.disabled),this._resetButton()},_determineButtonType:function(){var t,e,i;this.element.is("[type=checkbox]")?this.type="checkbox":this.element.is("[type=radio]")?this.type="radio":this.element.is("input")?this.type="input":this.type="button","checkbox"===this.type||"radio"===this.type?(t=this.element.parents().last(),e="label[for='"+this.element.attr("id")+"']",this.buttonElement=t.find(e),this.buttonElement.length||(t=t.length?t.siblings():this.element.siblings(),this.buttonElement=t.filter(e),this.buttonElement.length||(this.buttonElement=t.find(e))),this.element.addClass("ui-helper-hidden-accessible"),i=this.element.is(":checked"),i&&this.buttonElement.addClass("ui-state-active"),this.buttonElement.prop("aria-pressed",i)):this.buttonElement=this.element},widget:function(){return this.buttonElement},_destroy:function(){this.element.removeClass("ui-helper-hidden-accessible"),this.buttonElement.removeClass(a+" ui-state-hover ui-state-active  "+o).removeAttr("role").removeAttr("aria-pressed").html(this.buttonElement.find(".ui-button-text").html()),this.hasTitle||this.buttonElement.removeAttr("title")},_setOption:function(t,e){if(this._super(t,e),"disabled"===t)return void(e?this.element.prop("disabled",!0):this.element.prop("disabled",!1));this._resetButton()},refresh:function(){var e=this.element.is("input, button")?this.element.is(":disabled"):this.element.hasClass("ui-button-disabled");e!==this.options.disabled&&this._setOption("disabled",e),"radio"===this.type?l(this.element[0]).each(function(){t(this).is(":checked")?t(this).button("widget").addClass("ui-state-active").attr("aria-pressed","true"):t(this).button("widget").removeClass("ui-state-active").attr("aria-pressed","false")}):"checkbox"===this.type&&(this.element.is(":checked")?this.buttonElement.addClass("ui-state-active").attr("aria-pressed","true"):this.buttonElement.removeClass("ui-state-active").attr("aria-pressed","false"))},_resetButton:function(){if("input"===this.type)return void(this.options.label&&this.element.val(this.options.label));var e=this.buttonElement.removeClass(o),i=t("<span></span>",this.document[0]).addClass("ui-button-text").html(this.options.label).appendTo(e.empty()).text(),s=this.options.icons,n=s.primary&&s.secondary,a=[];s.primary||s.secondary?(this.options.text&&a.push("ui-button-text-icon"+(n?"s":s.primary?"-primary":"-secondary")),s.primary&&e.prepend("<span class='ui-button-icon-primary ui-icon "+s.primary+"'></span>"),s.secondary&&e.append("<span class='ui-button-icon-secondary ui-icon "+s.secondary+"'></span>"),this.options.text||(a.push(n?"ui-button-icons-only":"ui-button-icon-only"),this.hasTitle||e.attr("title",t.trim(i)))):a.push("ui-button-text-only"),e.addClass(a.join(" "))}}),t.widget("ui.buttonset",{version:"1.9.2",options:{items:"button, input[type=button], input[type=submit], input[type=reset], input[type=checkbox], input[type=radio], a, :data(button)"},_create:function(){this.element.addClass("ui-buttonset")},_init:function(){this.refresh()},_setOption:function(t,e){"disabled"===t&&this.buttons.button("option",t,e),this._super(t,e)},refresh:function(){var e="rtl"===this.element.css("direction");this.buttons=this.element.find(this.options.items).filter(":ui-button").button("refresh").end().not(":ui-button").button().end().map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-all ui-corner-left ui-corner-right").filter(":first").addClass(e?"ui-corner-right":"ui-corner-left").end().filter(":last").addClass(e?"ui-corner-left":"ui-corner-right").end().end()},_destroy:function(){this.element.removeClass("ui-buttonset"),this.buttons.map(function(){return t(this).button("widget")[0]}).removeClass("ui-corner-left ui-corner-right").end().button("destroy")}})}(jQuery),function($,undefined){function Datepicker(){this.debug=!1,this._curInst=null,this._keyEvent=!1,this._disabledInputs=[],this._datepickerShowing=!1,this._inDialog=!1,this._mainDivId="ui-datepicker-div",this._inlineClass="ui-datepicker-inline",this._appendClass="ui-datepicker-append",this._triggerClass="ui-datepicker-trigger",this._dialogClass="ui-datepicker-dialog",this._disableClass="ui-datepicker-disabled",this._unselectableClass="ui-datepicker-unselectable",this._currentClass="ui-datepicker-current-day",this._dayOverClass="ui-datepicker-days-cell-over",this.regional=[],this.regional[""]={closeText:"Done",prevText:"Prev",nextText:"Next",currentText:"Today",monthNames:["January","February","March","April","May","June","July","August","September","October","November","December"],monthNamesShort:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"],dayNames:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],dayNamesShort:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],dayNamesMin:["Su","Mo","Tu","We","Th","Fr","Sa"],weekHeader:"Wk",dateFormat:"mm/dd/yy",firstDay:0,isRTL:!1,showMonthAfterYear:!1,yearSuffix:""},this._defaults={showOn:"focus",showAnim:"fadeIn",showOptions:{},defaultDate:null,appendText:"",buttonText:"...",buttonImage:"",buttonImageOnly:!1,hideIfNoPrevNext:!1,navigationAsDateFormat:!1,gotoCurrent:!1,changeMonth:!1,changeYear:!1,yearRange:"c-10:c+10",showOtherMonths:!1,selectOtherMonths:!1,showWeek:!1,calculateWeek:this.iso8601Week,shortYearCutoff:"+10",minDate:null,maxDate:null,duration:"fast",beforeShowDay:null,beforeShow:null,onSelect:null,onChangeMonthYear:null,onClose:null,numberOfMonths:1,showCurrentAtPos:0,stepMonths:1,stepBigMonths:12,altField:"",altFormat:"",constrainInput:!0,showButtonPanel:!1,autoSize:!1,disabled:!1},$.extend(this._defaults,this.regional[""]),this.dpDiv=bindHover($('<div id="'+this._mainDivId+'" class="ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>'))}function bindHover(t){var e="button, .ui-datepicker-prev, .ui-datepicker-next, .ui-datepicker-calendar td a";return t.delegate(e,"mouseout",function(){$(this).removeClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).removeClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).removeClass("ui-datepicker-next-hover")}).delegate(e,"mouseover",function(){$.datepicker._isDisabledDatepicker(instActive.inline?t.parent()[0]:instActive.input[0])||($(this).parents(".ui-datepicker-calendar").find("a").removeClass("ui-state-hover"),$(this).addClass("ui-state-hover"),-1!=this.className.indexOf("ui-datepicker-prev")&&$(this).addClass("ui-datepicker-prev-hover"),-1!=this.className.indexOf("ui-datepicker-next")&&$(this).addClass("ui-datepicker-next-hover"))})}function extendRemove(t,e){$.extend(t,e);for(var i in e)null!=e[i]&&e[i]!=undefined||(t[i]=e[i]);return t}$.extend($.ui,{datepicker:{version:"1.9.2"}});var PROP_NAME="datepicker",dpuuid=(new Date).getTime(),instActive;$.extend(Datepicker.prototype,{markerClassName:"hasDatepicker",maxRows:4,log:function(){this.debug&&console.log.apply("",arguments)},_widgetDatepicker:function(){return this.dpDiv},setDefaults:function(t){return extendRemove(this._defaults,t||{}),this},_attachDatepicker:function(target,settings){var inlineSettings=null;for(var attrName in this._defaults){var attrValue=target.getAttribute("date:"+attrName);if(attrValue){inlineSettings=inlineSettings||{};try{inlineSettings[attrName]=eval(attrValue)}catch(t){inlineSettings[attrName]=attrValue}}}var nodeName=target.nodeName.toLowerCase(),inline="div"==nodeName||"span"==nodeName;target.id||(this.uuid+=1,target.id="dp"+this.uuid);var inst=this._newInst($(target),inline);inst.settings=$.extend({},settings||{},inlineSettings||{}),"input"==nodeName?this._connectDatepicker(target,inst):inline&&this._inlineDatepicker(target,inst)},_newInst:function(t,e){return{id:t[0].id.replace(/([^A-Za-z0-9_-])/g,"\\\\$1"),input:t,selectedDay:0,selectedMonth:0,selectedYear:0,drawMonth:0,drawYear:0,inline:e,dpDiv:e?bindHover($('<div class="'+this._inlineClass+' ui-datepicker ui-widget ui-widget-content ui-helper-clearfix ui-corner-all"></div>')):this.dpDiv}},_connectDatepicker:function(t,e){var i=$(t);e.append=$([]),e.trigger=$([]),i.hasClass(this.markerClassName)||(this._attachments(i,e),i.addClass(this.markerClassName).keydown(this._doKeyDown).keypress(this._doKeyPress).keyup(this._doKeyUp).bind("setData.datepicker",function(t,i,s){e.settings[i]=s}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),this._autoSize(e),$.data(t,PROP_NAME,e),e.settings.disabled&&this._disableDatepicker(t))},_attachments:function(t,e){var i=this._get(e,"appendText"),s=this._get(e,"isRTL");e.append&&e.append.remove(),i&&(e.append=$('<span class="'+this._appendClass+'">'+i+"</span>"),t[s?"before":"after"](e.append)),t.unbind("focus",this._showDatepicker),e.trigger&&e.trigger.remove();var n=this._get(e,"showOn");if("focus"!=n&&"both"!=n||t.focus(this._showDatepicker),"button"==n||"both"==n){var a=this._get(e,"buttonText"),o=this._get(e,"buttonImage");e.trigger=$(this._get(e,"buttonImageOnly")?$("<img/>").addClass(this._triggerClass).attr({src:o,alt:a,title:a}):$('<button type="button"></button>').addClass(this._triggerClass).html(""==o?a:$("<img/>").attr({src:o,alt:a,title:a}))),t[s?"before":"after"](e.trigger),e.trigger.click(function(){return $.datepicker._datepickerShowing&&$.datepicker._lastInput==t[0]?$.datepicker._hideDatepicker():$.datepicker._datepickerShowing&&$.datepicker._lastInput!=t[0]?($.datepicker._hideDatepicker(),$.datepicker._showDatepicker(t[0])):$.datepicker._showDatepicker(t[0]),!1})}},_autoSize:function(t){if(this._get(t,"autoSize")&&!t.inline){var e=new Date(2009,11,20),i=this._get(t,"dateFormat");if(i.match(/[DM]/)){var s=function(t){for(var e=0,i=0,s=0;s<t.length;s++)t[s].length>e&&(e=t[s].length,i=s);return i};e.setMonth(s(this._get(t,i.match(/MM/)?"monthNames":"monthNamesShort"))),e.setDate(s(this._get(t,i.match(/DD/)?"dayNames":"dayNamesShort"))+20-e.getDay())}t.input.attr("size",this._formatDate(t,e).length)}},_inlineDatepicker:function(t,e){var i=$(t);i.hasClass(this.markerClassName)||(i.addClass(this.markerClassName).append(e.dpDiv).bind("setData.datepicker",function(t,i,s){e.settings[i]=s}).bind("getData.datepicker",function(t,i){return this._get(e,i)}),$.data(t,PROP_NAME,e),this._setDate(e,this._getDefaultDate(e),!0),this._updateDatepicker(e),this._updateAlternate(e),e.settings.disabled&&this._disableDatepicker(t),e.dpDiv.css("display","block"))},_dialogDatepicker:function(t,e,i,s,n){var a=this._dialogInst;if(!a){this.uuid+=1;var o="dp"+this.uuid;this._dialogInput=$('<input type="text" id="'+o+'" style="position: absolute; top: -100px; width: 0px;"/>'),this._dialogInput.keydown(this._doKeyDown),$("body").append(this._dialogInput),a=this._dialogInst=this._newInst(this._dialogInput,!1),a.settings={},$.data(this._dialogInput[0],PROP_NAME,a)}if(extendRemove(a.settings,s||{}),e=e&&e.constructor==Date?this._formatDate(a,e):e,this._dialogInput.val(e),this._pos=n?n.length?n:[n.pageX,n.pageY]:null,!this._pos){var r=document.documentElement.clientWidth,l=document.documentElement.clientHeight,h=document.documentElement.scrollLeft||document.body.scrollLeft,c=document.documentElement.scrollTop||document.body.scrollTop;this._pos=[r/2-100+h,l/2-150+c]}return this._dialogInput.css("left",this._pos[0]+20+"px").css("top",this._pos[1]+"px"),a.settings.onSelect=i,this._inDialog=!0,this.dpDiv.addClass(this._dialogClass),this._showDatepicker(this._dialogInput[0]),$.blockUI&&$.blockUI(this.dpDiv),$.data(this._dialogInput[0],PROP_NAME,a),this},_destroyDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();$.removeData(t,PROP_NAME),"input"==s?(i.append.remove(),i.trigger.remove(),e.removeClass(this.markerClassName).unbind("focus",this._showDatepicker).unbind("keydown",this._doKeyDown).unbind("keypress",this._doKeyPress).unbind("keyup",this._doKeyUp)):"div"!=s&&"span"!=s||e.removeClass(this.markerClassName).empty()}},_enableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();if("input"==s)t.disabled=!1,i.trigger.filter("button").each(function(){this.disabled=!1}).end().filter("img").css({opacity:"1.0",cursor:""});else if("div"==s||"span"==s){var n=e.children("."+this._inlineClass);n.children().removeClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!1)}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e})}},_disableDatepicker:function(t){var e=$(t),i=$.data(t,PROP_NAME);if(e.hasClass(this.markerClassName)){var s=t.nodeName.toLowerCase();if("input"==s)t.disabled=!0,i.trigger.filter("button").each(function(){this.disabled=!0}).end().filter("img").css({opacity:"0.5",cursor:"default"});else if("div"==s||"span"==s){var n=e.children("."+this._inlineClass);n.children().addClass("ui-state-disabled"),n.find("select.ui-datepicker-month, select.ui-datepicker-year").prop("disabled",!0)}this._disabledInputs=$.map(this._disabledInputs,function(e){return e==t?null:e}),this._disabledInputs[this._disabledInputs.length]=t}},_isDisabledDatepicker:function(t){if(!t)return!1;for(var e=0;e<this._disabledInputs.length;e++)if(this._disabledInputs[e]==t)return!0;return!1},_getInst:function(t){try{return $.data(t,PROP_NAME)}catch(t){throw"Missing instance data for this datepicker"}},_optionDatepicker:function(t,e,i){var s=this._getInst(t);if(2==arguments.length&&"string"==typeof e)return"defaults"==e?$.extend({},$.datepicker._defaults):s?"all"==e?$.extend({},s.settings):this._get(s,e):null;var n=e||{};if("string"==typeof e&&(n={},n[e]=i),s){this._curInst==s&&this._hideDatepicker();var a=this._getDateDatepicker(t,!0),o=this._getMinMaxDate(s,"min"),r=this._getMinMaxDate(s,"max");extendRemove(s.settings,n),null!==o&&n.dateFormat!==undefined&&n.minDate===undefined&&(s.settings.minDate=this._formatDate(s,o)),null!==r&&n.dateFormat!==undefined&&n.maxDate===undefined&&(s.settings.maxDate=this._formatDate(s,r)),this._attachments($(t),s),this._autoSize(s),this._setDate(s,a),this._updateAlternate(s),this._updateDatepicker(s)}},_changeDatepicker:function(t,e,i){this._optionDatepicker(t,e,i)},_refreshDatepicker:function(t){var e=this._getInst(t);e&&this._updateDatepicker(e)},_setDateDatepicker:function(t,e){var i=this._getInst(t);i&&(this._setDate(i,e),this._updateDatepicker(i),this._updateAlternate(i))},_getDateDatepicker:function(t,e){var i=this._getInst(t);return i&&!i.inline&&this._setDateFromField(i,e),i?this._getDate(i):null},_doKeyDown:function(t){var e=$.datepicker._getInst(t.target),i=!0,s=e.dpDiv.is(".ui-datepicker-rtl");if(e._keyEvent=!0,$.datepicker._datepickerShowing)switch(t.keyCode){case 9:$.datepicker._hideDatepicker(),i=!1;break;case 13:var n=$("td."+$.datepicker._dayOverClass+":not(."+$.datepicker._currentClass+")",e.dpDiv);n[0]&&$.datepicker._selectDay(t.target,e.selectedMonth,e.selectedYear,n[0]);var a=$.datepicker._get(e,"onSelect");if(a){var o=$.datepicker._formatDate(e);a.apply(e.input?e.input[0]:null,[o,e])}else $.datepicker._hideDatepicker();return!1;case 27:$.datepicker._hideDatepicker();break;case 33:$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 34:$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 35:(t.ctrlKey||t.metaKey)&&$.datepicker._clearDate(t.target),i=t.ctrlKey||t.metaKey;break;case 36:(t.ctrlKey||t.metaKey)&&$.datepicker._gotoToday(t.target),i=t.ctrlKey||t.metaKey;break;case 37:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,s?1:-1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?-$.datepicker._get(e,"stepBigMonths"):-$.datepicker._get(e,"stepMonths"),"M");break;case 38:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,-7,"D"),i=t.ctrlKey||t.metaKey;break;case 39:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,s?-1:1,"D"),i=t.ctrlKey||t.metaKey,t.originalEvent.altKey&&$.datepicker._adjustDate(t.target,t.ctrlKey?+$.datepicker._get(e,"stepBigMonths"):+$.datepicker._get(e,"stepMonths"),"M");break;case 40:(t.ctrlKey||t.metaKey)&&$.datepicker._adjustDate(t.target,7,"D"),i=t.ctrlKey||t.metaKey;break;default:i=!1}else 36==t.keyCode&&t.ctrlKey?$.datepicker._showDatepicker(this):i=!1;i&&(t.preventDefault(),t.stopPropagation())},_doKeyPress:function(t){var e=$.datepicker._getInst(t.target);if($.datepicker._get(e,"constrainInput")){var i=$.datepicker._possibleChars($.datepicker._get(e,"dateFormat")),s=String.fromCharCode(t.charCode==undefined?t.keyCode:t.charCode);return t.ctrlKey||t.metaKey||s<" "||!i||i.indexOf(s)>-1}},_doKeyUp:function(t){var e=$.datepicker._getInst(t.target);if(e.input.val()!=e.lastVal)try{$.datepicker.parseDate($.datepicker._get(e,"dateFormat"),e.input?e.input.val():null,$.datepicker._getFormatConfig(e))&&($.datepicker._setDateFromField(e),$.datepicker._updateAlternate(e),$.datepicker._updateDatepicker(e))}catch(t){$.datepicker.log(t)}return!0},_showDatepicker:function(t){if(t=t.target||t,"input"!=t.nodeName.toLowerCase()&&(t=$("input",t.parentNode)[0]),!$.datepicker._isDisabledDatepicker(t)&&$.datepicker._lastInput!=t){var e=$.datepicker._getInst(t);$.datepicker._curInst&&$.datepicker._curInst!=e&&($.datepicker._curInst.dpDiv.stop(!0,!0),e&&$.datepicker._datepickerShowing&&$.datepicker._hideDatepicker($.datepicker._curInst.input[0]));var i=$.datepicker._get(e,"beforeShow"),s=i?i.apply(t,[t,e]):{};if(!1!==s){extendRemove(e.settings,s),e.lastVal=null,$.datepicker._lastInput=t,$.datepicker._setDateFromField(e),$.datepicker._inDialog&&(t.value=""),$.datepicker._pos||($.datepicker._pos=$.datepicker._findPos(t),$.datepicker._pos[1]+=t.offsetHeight);var n=!1;$(t).parents().each(function(){return!(n|="fixed"==$(this).css("position"))});var a={left:$.datepicker._pos[0],top:$.datepicker._pos[1]};if($.datepicker._pos=null,e.dpDiv.empty(),e.dpDiv.css({position:"absolute",display:"block",top:"-1000px"}),$.datepicker._updateDatepicker(e),a=$.datepicker._checkOffset(e,a,n),e.dpDiv.css({position:$.datepicker._inDialog&&$.blockUI?"static":n?"fixed":"absolute",display:"none",left:a.left+"px",top:a.top+"px"}),!e.inline){var o=$.datepicker._get(e,"showAnim"),r=$.datepicker._get(e,"duration"),l=function(){var t=e.dpDiv.find("iframe.ui-datepicker-cover");if(t.length){var i=$.datepicker._getBorders(e.dpDiv);t.css({left:-i[0],top:-i[1],width:e.dpDiv.outerWidth(),height:e.dpDiv.outerHeight()})}};e.dpDiv.zIndex($(t).zIndex()+1),$.datepicker._datepickerShowing=!0,$.effects&&($.effects.effect[o]||$.effects[o])?e.dpDiv.show(o,$.datepicker._get(e,"showOptions"),r,l):e.dpDiv[o||"show"](o?r:null,l),o&&r||l(),e.input.is(":visible")&&!e.input.is(":disabled")&&e.input.focus(),$.datepicker._curInst=e}}}},_updateDatepicker:function(t){this.maxRows=4;var e=$.datepicker._getBorders(t.dpDiv);instActive=t,t.dpDiv.empty().append(this._generateHTML(t)),this._attachHandlers(t);var i=t.dpDiv.find("iframe.ui-datepicker-cover");i.length&&i.css({left:-e[0],top:-e[1],width:t.dpDiv.outerWidth(),height:t.dpDiv.outerHeight()}),t.dpDiv.find("."+this._dayOverClass+" a").mouseover();var s=this._getNumberOfMonths(t),n=s[1];if(t.dpDiv.removeClass("ui-datepicker-multi-2 ui-datepicker-multi-3 ui-datepicker-multi-4").width(""),n>1&&t.dpDiv.addClass("ui-datepicker-multi-"+n).css("width",17*n+"em"),t.dpDiv[(1!=s[0]||1!=s[1]?"add":"remove")+"Class"]("ui-datepicker-multi"),t.dpDiv[(this._get(t,"isRTL")?"add":"remove")+"Class"]("ui-datepicker-rtl"),t==$.datepicker._curInst&&$.datepicker._datepickerShowing&&t.input&&t.input.is(":visible")&&!t.input.is(":disabled")&&t.input[0]!=document.activeElement&&t.input.focus(),t.yearshtml){var a=t.yearshtml;setTimeout(function(){a===t.yearshtml&&t.yearshtml&&t.dpDiv.find("select.ui-datepicker-year:first").replaceWith(t.yearshtml),a=t.yearshtml=null},0)}},_getBorders:function(t){var e=function(t){return{thin:1,medium:2,thick:3}[t]||t};return[parseFloat(e(t.css("border-left-width"))),parseFloat(e(t.css("border-top-width")))]},_checkOffset:function(t,e,i){var s=t.dpDiv.outerWidth(),n=t.dpDiv.outerHeight(),a=t.input?t.input.outerWidth():0,o=t.input?t.input.outerHeight():0,r=document.documentElement.clientWidth+(i?0:$(document).scrollLeft()),l=document.documentElement.clientHeight+(i?0:$(document).scrollTop());return e.left-=this._get(t,"isRTL")?s-a:0,e.left-=i&&e.left==t.input.offset().left?$(document).scrollLeft():0,e.top-=i&&e.top==t.input.offset().top+o?$(document).scrollTop():0,e.left-=Math.min(e.left,e.left+s>r&&r>s?Math.abs(e.left+s-r):0),e.top-=Math.min(e.top,e.top+n>l&&l>n?Math.abs(n+o):0),e},_findPos:function(t){for(var e=this._getInst(t),i=this._get(e,"isRTL");t&&("hidden"==t.type||1!=t.nodeType||$.expr.filters.hidden(t));)t=t[i?"previousSibling":"nextSibling"];var s=$(t).offset();return[s.left,s.top]},_hideDatepicker:function(t){var e=this._curInst;if(e&&(!t||e==$.data(t,PROP_NAME))&&this._datepickerShowing){var i=this._get(e,"showAnim"),s=this._get(e,"duration"),n=function(){$.datepicker._tidyDialog(e)};$.effects&&($.effects.effect[i]||$.effects[i])?e.dpDiv.hide(i,$.datepicker._get(e,"showOptions"),s,n):e.dpDiv["slideDown"==i?"slideUp":"fadeIn"==i?"fadeOut":"hide"](i?s:null,n),i||n(),this._datepickerShowing=!1;var a=this._get(e,"onClose");a&&a.apply(e.input?e.input[0]:null,[e.input?e.input.val():"",e]),this._lastInput=null,this._inDialog&&(this._dialogInput.css({position:"absolute",left:"0",top:"-100px"}),$.blockUI&&($.unblockUI(),$("body").append(this.dpDiv))),this._inDialog=!1}},_tidyDialog:function(t){t.dpDiv.removeClass(this._dialogClass).unbind(".ui-datepicker-calendar")},_checkExternalClick:function(t){if($.datepicker._curInst){var e=$(t.target),i=$.datepicker._getInst(e[0]);(e[0].id==$.datepicker._mainDivId||0!=e.parents("#"+$.datepicker._mainDivId).length||e.hasClass($.datepicker.markerClassName)||e.closest("."+$.datepicker._triggerClass).length||!$.datepicker._datepickerShowing||$.datepicker._inDialog&&$.blockUI)&&(!e.hasClass($.datepicker.markerClassName)||$.datepicker._curInst==i)||$.datepicker._hideDatepicker()}},_adjustDate:function(t,e,i){var s=$(t),n=this._getInst(s[0]);this._isDisabledDatepicker(s[0])||(this._adjustInstDate(n,e+("M"==i?this._get(n,"showCurrentAtPos"):0),i),this._updateDatepicker(n))},_gotoToday:function(t){var e=$(t),i=this._getInst(e[0]);if(this._get(i,"gotoCurrent")&&i.currentDay)i.selectedDay=i.currentDay,i.drawMonth=i.selectedMonth=i.currentMonth,i.drawYear=i.selectedYear=i.currentYear;else{var s=new Date;i.selectedDay=s.getDate(),i.drawMonth=i.selectedMonth=s.getMonth(),i.drawYear=i.selectedYear=s.getFullYear()}this._notifyChange(i),this._adjustDate(e)},_selectMonthYear:function(t,e,i){var s=$(t),n=this._getInst(s[0]);n["selected"+("M"==i?"Month":"Year")]=n["draw"+("M"==i?"Month":"Year")]=parseInt(e.options[e.selectedIndex].value,10),this._notifyChange(n),this._adjustDate(s)},_selectDay:function(t,e,i,s){var n=$(t);if(!$(s).hasClass(this._unselectableClass)&&!this._isDisabledDatepicker(n[0])){var a=this._getInst(n[0]);a.selectedDay=a.currentDay=$("a",s).html(),a.selectedMonth=a.currentMonth=e,a.selectedYear=a.currentYear=i,this._selectDate(t,this._formatDate(a,a.currentDay,a.currentMonth,a.currentYear))}},_clearDate:function(t){var e=$(t);this._getInst(e[0]);this._selectDate(e,"")},_selectDate:function(t,e){var i=$(t),s=this._getInst(i[0]);e=null!=e?e:this._formatDate(s),s.input&&s.input.val(e),this._updateAlternate(s);var n=this._get(s,"onSelect");n?n.apply(s.input?s.input[0]:null,[e,s]):s.input&&s.input.trigger("change"),s.inline?this._updateDatepicker(s):(this._hideDatepicker(),this._lastInput=s.input[0],"object"!=typeof s.input[0]&&s.input.focus(),this._lastInput=null)},_updateAlternate:function(t){var e=this._get(t,"altField");if(e){var i=this._get(t,"altFormat")||this._get(t,"dateFormat"),s=this._getDate(t),n=this.formatDate(i,s,this._getFormatConfig(t));$(e).each(function(){$(this).val(n)})}},noWeekends:function(t){var e=t.getDay();return[e>0&&e<6,""]},iso8601Week:function(t){var e=new Date(t.getTime());e.setDate(e.getDate()+4-(e.getDay()||7));var i=e.getTime();return e.setMonth(0),e.setDate(1),Math.floor(Math.round((i-e)/864e5)/7)+1},parseDate:function(t,e,i){if(null==t||null==e)throw"Invalid arguments";if(""==(e="object"==typeof e?e.toString():e+""))return null;var s=(i?i.shortYearCutoff:null)||this._defaults.shortYearCutoff;s="string"!=typeof s?s:(new Date).getFullYear()%100+parseInt(s,10);for(var n=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,a=(i?i.dayNames:null)||this._defaults.dayNames,o=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,r=(i?i.monthNames:null)||this._defaults.monthNames,l=-1,h=-1,c=-1,u=-1,d=!1,p=function(e){var i=_+1<t.length&&t.charAt(_+1)==e;return i&&_++,i},f=function(t){var i=p(t),s="@"==t?14:"!"==t?20:"y"==t&&i?4:"o"==t?3:2,n=new RegExp("^\\d{1,"+s+"}"),a=e.substring(v).match(n);if(!a)throw"Missing number at position "+v;return v+=a[0].length,parseInt(a[0],10)},g=function(t,i,s){var n=$.map(p(t)?s:i,function(t,e){return[[e,t]]}).sort(function(t,e){return-(t[1].length-e[1].length)}),a=-1;if($.each(n,function(t,i){var s=i[1];if(e.substr(v,s.length).toLowerCase()==s.toLowerCase())return a=i[0],v+=s.length,!1}),-1!=a)return a+1;throw"Unknown name at position "+v},m=function(){if(e.charAt(v)!=t.charAt(_))throw"Unexpected literal at position "+v;v++},v=0,_=0;_<t.length;_++)if(d)"'"!=t.charAt(_)||p("'")?m():d=!1;else switch(t.charAt(_)){case"d":c=f("d");break;case"D":g("D",n,a);break;case"o":u=f("o");break;case"m":h=f("m");break;case"M":h=g("M",o,r);break;case"y":l=f("y");break;case"@":var b=new Date(f("@"));l=b.getFullYear(),h=b.getMonth()+1,c=b.getDate();break;case"!":var b=new Date((f("!")-this._ticksTo1970)/1e4);l=b.getFullYear(),h=b.getMonth()+1,c=b.getDate();break;case"'":p("'")?m():d=!0;break;default:m()}if(v<e.length){var y=e.substr(v);if(!/^\s+/.test(y))throw"Extra/unparsed characters found in date: "+y}if(-1==l?l=(new Date).getFullYear():l<100&&(l+=(new Date).getFullYear()-(new Date).getFullYear()%100+(l<=s?0:-100)),u>-1)for(h=1,c=u;;){var w=this._getDaysInMonth(l,h-1);if(c<=w)break;h++,c-=w}var b=this._daylightSavingAdjust(new Date(l,h-1,c));if(b.getFullYear()!=l||b.getMonth()+1!=h||b.getDate()!=c)throw"Invalid date";return b},ATOM:"yy-mm-dd",COOKIE:"D, dd M yy",ISO_8601:"yy-mm-dd",RFC_822:"D, d M y",RFC_850:"DD, dd-M-y",RFC_1036:"D, d M y",RFC_1123:"D, d M yy",RFC_2822:"D, d M yy",RSS:"D, d M y",TICKS:"!",TIMESTAMP:"@",W3C:"yy-mm-dd",_ticksTo1970:24*(718685+Math.floor(492.5)-Math.floor(19.7)+Math.floor(4.925))*60*60*1e7,formatDate:function(t,e,i){if(!e)return"";var s=(i?i.dayNamesShort:null)||this._defaults.dayNamesShort,n=(i?i.dayNames:null)||this._defaults.dayNames,a=(i?i.monthNamesShort:null)||this._defaults.monthNamesShort,o=(i?i.monthNames:null)||this._defaults.monthNames,r=function(e){var i=d+1<t.length&&t.charAt(d+1)==e;return i&&d++,i},l=function(t,e,i){var s=""+e;if(r(t))for(;s.length<i;)s="0"+s;return s},h=function(t,e,i,s){return r(t)?s[e]:i[e]},c="",u=!1;if(e)for(var d=0;d<t.length;d++)if(u)"'"!=t.charAt(d)||r("'")?c+=t.charAt(d):u=!1;else switch(t.charAt(d)){case"d":c+=l("d",e.getDate(),2);break;case"D":c+=h("D",e.getDay(),s,n);break;case"o":c+=l("o",Math.round((new Date(e.getFullYear(),e.getMonth(),e.getDate()).getTime()-new Date(e.getFullYear(),0,0).getTime())/864e5),3);break;case"m":c+=l("m",e.getMonth()+1,2);break;case"M":c+=h("M",e.getMonth(),a,o);break;case"y":c+=r("y")?e.getFullYear():(e.getYear()%100<10?"0":"")+e.getYear()%100;break;case"@":c+=e.getTime();break;case"!":c+=1e4*e.getTime()+this._ticksTo1970;break;case"'":r("'")?c+="'":u=!0;break;default:c+=t.charAt(d)}return c},_possibleChars:function(t){for(var e="",i=!1,s=function(e){var i=n+1<t.length&&t.charAt(n+1)==e;return i&&n++,i},n=0;n<t.length;n++)if(i)"'"!=t.charAt(n)||s("'")?e+=t.charAt(n):i=!1;else switch(t.charAt(n)){case"d":case"m":case"y":case"@":e+="0123456789";break;case"D":case"M":return null;case"'":s("'")?e+="'":i=!0;break;default:e+=t.charAt(n)}return e},_get:function(t,e){return t.settings[e]!==undefined?t.settings[e]:this._defaults[e]},_setDateFromField:function(t,e){if(t.input.val()!=t.lastVal){var i,s,n=this._get(t,"dateFormat"),a=t.lastVal=t.input?t.input.val():null;i=s=this._getDefaultDate(t);var o=this._getFormatConfig(t);try{i=this.parseDate(n,a,o)||s}catch(t){this.log(t),a=e?"":a}t.selectedDay=i.getDate(),t.drawMonth=t.selectedMonth=i.getMonth(),t.drawYear=t.selectedYear=i.getFullYear(),t.currentDay=a?i.getDate():0,t.currentMonth=a?i.getMonth():0,t.currentYear=a?i.getFullYear():0,this._adjustInstDate(t)}},_getDefaultDate:function(t){return this._restrictMinMax(t,this._determineDate(t,this._get(t,"defaultDate"),new Date))},_determineDate:function(t,e,i){var s=function(t){var e=new Date;return e.setDate(e.getDate()+t),e},n=function(e){try{return $.datepicker.parseDate($.datepicker._get(t,"dateFormat"),e,$.datepicker._getFormatConfig(t))}catch(t){}for(var i=(e.toLowerCase().match(/^c/)?$.datepicker._getDate(t):null)||new Date,s=i.getFullYear(),n=i.getMonth(),a=i.getDate(),o=/([+-]?[0-9]+)\s*(d|D|w|W|m|M|y|Y)?/g,r=o.exec(e);r;){switch(r[2]||"d"){case"d":case"D":a+=parseInt(r[1],10);break;case"w":case"W":a+=7*parseInt(r[1],10);break;case"m":case"M":n+=parseInt(r[1],10),a=Math.min(a,$.datepicker._getDaysInMonth(s,n));break;case"y":case"Y":s+=parseInt(r[1],10),a=Math.min(a,$.datepicker._getDaysInMonth(s,n))}r=o.exec(e)}return new Date(s,n,a)},a=null==e||""===e?i:"string"==typeof e?n(e):"number"==typeof e?isNaN(e)?i:s(e):new Date(e.getTime());return a=a&&"Invalid Date"==a.toString()?i:a,a&&(a.setHours(0),a.setMinutes(0),a.setSeconds(0),a.setMilliseconds(0)),this._daylightSavingAdjust(a)},_daylightSavingAdjust:function(t){return t?(t.setHours(t.getHours()>12?t.getHours()+2:0),t):null},_setDate:function(t,e,i){var s=!e,n=t.selectedMonth,a=t.selectedYear,o=this._restrictMinMax(t,this._determineDate(t,e,new Date));t.selectedDay=t.currentDay=o.getDate(),t.drawMonth=t.selectedMonth=t.currentMonth=o.getMonth(),t.drawYear=t.selectedYear=t.currentYear=o.getFullYear(),n==t.selectedMonth&&a==t.selectedYear||i||this._notifyChange(t),this._adjustInstDate(t),t.input&&t.input.val(s?"":this._formatDate(t))},_getDate:function(t){return!t.currentYear||t.input&&""==t.input.val()?null:this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay))},_attachHandlers:function(t){var e=this._get(t,"stepMonths"),i="#"+t.id.replace(/\\\\/g,"\\");t.dpDiv.find("[data-handler]").map(function(){var t={prev:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,-e,"M")},next:function(){window["DP_jQuery_"+dpuuid].datepicker._adjustDate(i,+e,"M")},hide:function(){window["DP_jQuery_"+dpuuid].datepicker._hideDatepicker()},today:function(){window["DP_jQuery_"+dpuuid].datepicker._gotoToday(i)},selectDay:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectDay(i,+this.getAttribute("data-month"),+this.getAttribute("data-year"),this),!1},selectMonth:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"M"),!1},selectYear:function(){return window["DP_jQuery_"+dpuuid].datepicker._selectMonthYear(i,this,"Y"),!1}};$(this).bind(this.getAttribute("data-event"),t[this.getAttribute("data-handler")])})},_generateHTML:function(t){var e=new Date;e=this._daylightSavingAdjust(new Date(e.getFullYear(),e.getMonth(),e.getDate()));var i=this._get(t,"isRTL"),s=this._get(t,"showButtonPanel"),n=this._get(t,"hideIfNoPrevNext"),a=this._get(t,"navigationAsDateFormat"),o=this._getNumberOfMonths(t),r=this._get(t,"showCurrentAtPos"),l=this._get(t,"stepMonths"),h=1!=o[0]||1!=o[1],c=this._daylightSavingAdjust(t.currentDay?new Date(t.currentYear,t.currentMonth,t.currentDay):new Date(9999,9,9)),u=this._getMinMaxDate(t,"min"),d=this._getMinMaxDate(t,"max"),p=t.drawMonth-r,f=t.drawYear;if(p<0&&(p+=12,f--),d){
var g=this._daylightSavingAdjust(new Date(d.getFullYear(),d.getMonth()-o[0]*o[1]+1,d.getDate()));for(g=u&&g<u?u:g;this._daylightSavingAdjust(new Date(f,p,1))>g;)--p<0&&(p=11,f--)}t.drawMonth=p,t.drawYear=f;var m=this._get(t,"prevText");m=a?this.formatDate(m,this._daylightSavingAdjust(new Date(f,p-l,1)),this._getFormatConfig(t)):m;var v=this._canAdjustMonth(t,-1,f,p)?'<a class="ui-datepicker-prev ui-corner-all" data-handler="prev" data-event="click" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+m+"</span></a>":n?"":'<a class="ui-datepicker-prev ui-corner-all ui-state-disabled" title="'+m+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"e":"w")+'">'+m+"</span></a>",_=this._get(t,"nextText");_=a?this.formatDate(_,this._daylightSavingAdjust(new Date(f,p+l,1)),this._getFormatConfig(t)):_;var b=this._canAdjustMonth(t,1,f,p)?'<a class="ui-datepicker-next ui-corner-all" data-handler="next" data-event="click" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+_+"</span></a>":n?"":'<a class="ui-datepicker-next ui-corner-all ui-state-disabled" title="'+_+'"><span class="ui-icon ui-icon-circle-triangle-'+(i?"w":"e")+'">'+_+"</span></a>",y=this._get(t,"currentText"),w=this._get(t,"gotoCurrent")&&t.currentDay?c:e;y=a?this.formatDate(y,w,this._getFormatConfig(t)):y;var x=t.inline?"":'<button type="button" class="ui-datepicker-close ui-state-default ui-priority-primary ui-corner-all" data-handler="hide" data-event="click">'+this._get(t,"closeText")+"</button>",k=s?'<div class="ui-datepicker-buttonpane ui-widget-content">'+(i?x:"")+(this._isInRange(t,w)?'<button type="button" class="ui-datepicker-current ui-state-default ui-priority-secondary ui-corner-all" data-handler="today" data-event="click">'+y+"</button>":"")+(i?"":x)+"</div>":"",D=parseInt(this._get(t,"firstDay"),10);D=isNaN(D)?0:D;for(var C=this._get(t,"showWeek"),I=this._get(t,"dayNames"),P=(this._get(t,"dayNamesShort"),this._get(t,"dayNamesMin")),T=this._get(t,"monthNames"),S=this._get(t,"monthNamesShort"),M=this._get(t,"beforeShowDay"),z=this._get(t,"showOtherMonths"),A=this._get(t,"selectOtherMonths"),E=(this._get(t,"calculateWeek")||this.iso8601Week,this._getDefaultDate(t)),H="",N=0;N<o[0];N++){var W="";this.maxRows=4;for(var O=0;O<o[1];O++){var F=this._daylightSavingAdjust(new Date(f,p,t.selectedDay)),j=" ui-corner-all",R="";if(h){if(R+='<div class="ui-datepicker-group',o[1]>1)switch(O){case 0:R+=" ui-datepicker-group-first",j=" ui-corner-"+(i?"right":"left");break;case o[1]-1:R+=" ui-datepicker-group-last",j=" ui-corner-"+(i?"left":"right");break;default:R+=" ui-datepicker-group-middle",j=""}R+='">'}R+='<div class="ui-datepicker-header ui-widget-header ui-helper-clearfix'+j+'">'+(/all|left/.test(j)&&0==N?i?b:v:"")+(/all|right/.test(j)&&0==N?i?v:b:"")+this._generateMonthYearHeader(t,p,f,u,d,N>0||O>0,T,S)+'</div><table class="ui-datepicker-calendar"><thead><tr>';for(var L=C?'<th class="ui-datepicker-week-col">'+this._get(t,"weekHeader")+"</th>":"",Y=0;Y<7;Y++){var B=(Y+D)%7;L+="<th"+((Y+D+6)%7>=5?' class="ui-datepicker-week-end"':"")+'><span title="'+I[B]+'">'+P[B]+"</span></th>"}R+=L+"</tr></thead><tbody>";var U=this._getDaysInMonth(f,p);f==t.selectedYear&&p==t.selectedMonth&&(t.selectedDay=Math.min(t.selectedDay,U));var q=(this._getFirstDayOfMonth(f,p)-D+7)%7,Q=Math.ceil((q+U)/7),K=h&&this.maxRows>Q?this.maxRows:Q;this.maxRows=K;for(var X=this._daylightSavingAdjust(new Date(f,p,1-q)),V=0;V<K;V++){R+="<tr>";for(var Z=C?'<td class="ui-datepicker-week-col">'+this._get(t,"calculateWeek")(X)+"</td>":"",Y=0;Y<7;Y++){var G=M?M.apply(t.input?t.input[0]:null,[X]):[!0,""],J=X.getMonth()!=p,tt=J&&!A||!G[0]||u&&X<u||d&&X>d;Z+='<td class="'+((Y+D+6)%7>=5?" ui-datepicker-week-end":"")+(J?" ui-datepicker-other-month":"")+(X.getTime()==F.getTime()&&p==t.selectedMonth&&t._keyEvent||E.getTime()==X.getTime()&&E.getTime()==F.getTime()?" "+this._dayOverClass:"")+(tt?" "+this._unselectableClass+" ui-state-disabled":"")+(J&&!z?"":" "+G[1]+(X.getTime()==c.getTime()?" "+this._currentClass:"")+(X.getTime()==e.getTime()?" ui-datepicker-today":""))+'"'+(J&&!z||!G[2]?"":' title="'+G[2]+'"')+(tt?"":' data-handler="selectDay" data-event="click" data-month="'+X.getMonth()+'" data-year="'+X.getFullYear()+'"')+">"+(J&&!z?"&#xa0;":tt?'<span class="ui-state-default">'+X.getDate()+"</span>":'<a class="ui-state-default'+(X.getTime()==e.getTime()?" ui-state-highlight":"")+(X.getTime()==c.getTime()?" ui-state-active":"")+(J?" ui-priority-secondary":"")+'" href="#">'+X.getDate()+"</a>")+"</td>",X.setDate(X.getDate()+1),X=this._daylightSavingAdjust(X)}R+=Z+"</tr>"}p++,p>11&&(p=0,f++),R+="</tbody></table>"+(h?"</div>"+(o[0]>0&&O==o[1]-1?'<div class="ui-datepicker-row-break"></div>':""):""),W+=R}H+=W}return H+=k+($.ui.ie6&&!t.inline?'<iframe src="javascript:false;" class="ui-datepicker-cover" frameborder="0"></iframe>':""),t._keyEvent=!1,H},_generateMonthYearHeader:function(t,e,i,s,n,a,o,r){var l=this._get(t,"changeMonth"),h=this._get(t,"changeYear"),c=this._get(t,"showMonthAfterYear"),u='<div class="ui-datepicker-title">',d="";if(a||!l)d+='<span class="ui-datepicker-month">'+o[e]+"</span>";else{var p=s&&s.getFullYear()==i,f=n&&n.getFullYear()==i;d+='<select class="ui-datepicker-month" data-handler="selectMonth" data-event="change">';for(var g=0;g<12;g++)(!p||g>=s.getMonth())&&(!f||g<=n.getMonth())&&(d+='<option value="'+g+'"'+(g==e?' selected="selected"':"")+">"+r[g]+"</option>");d+="</select>"}if(c||(u+=d+(!a&&l&&h?"":"&#xa0;")),!t.yearshtml)if(t.yearshtml="",a||!h)u+='<span class="ui-datepicker-year">'+i+"</span>";else{var m=this._get(t,"yearRange").split(":"),v=(new Date).getFullYear(),_=function(t){var e=t.match(/c[+-].*/)?i+parseInt(t.substring(1),10):t.match(/[+-].*/)?v+parseInt(t,10):parseInt(t,10);return isNaN(e)?v:e},b=_(m[0]),y=Math.max(b,_(m[1]||""));for(b=s?Math.max(b,s.getFullYear()):b,y=n?Math.min(y,n.getFullYear()):y,t.yearshtml+='<select class="ui-datepicker-year" data-handler="selectYear" data-event="change">';b<=y;b++)t.yearshtml+='<option value="'+b+'"'+(b==i?' selected="selected"':"")+">"+b+"</option>";t.yearshtml+="</select>",u+=t.yearshtml,t.yearshtml=null}return u+=this._get(t,"yearSuffix"),c&&(u+=(!a&&l&&h?"":"&#xa0;")+d),u+="</div>"},_adjustInstDate:function(t,e,i){var s=t.drawYear+("Y"==i?e:0),n=t.drawMonth+("M"==i?e:0),a=Math.min(t.selectedDay,this._getDaysInMonth(s,n))+("D"==i?e:0),o=this._restrictMinMax(t,this._daylightSavingAdjust(new Date(s,n,a)));t.selectedDay=o.getDate(),t.drawMonth=t.selectedMonth=o.getMonth(),t.drawYear=t.selectedYear=o.getFullYear(),"M"!=i&&"Y"!=i||this._notifyChange(t)},_restrictMinMax:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max"),n=i&&e<i?i:e;return n=s&&n>s?s:n},_notifyChange:function(t){var e=this._get(t,"onChangeMonthYear");e&&e.apply(t.input?t.input[0]:null,[t.selectedYear,t.selectedMonth+1,t])},_getNumberOfMonths:function(t){var e=this._get(t,"numberOfMonths");return null==e?[1,1]:"number"==typeof e?[1,e]:e},_getMinMaxDate:function(t,e){return this._determineDate(t,this._get(t,e+"Date"),null)},_getDaysInMonth:function(t,e){return 32-this._daylightSavingAdjust(new Date(t,e,32)).getDate()},_getFirstDayOfMonth:function(t,e){return new Date(t,e,1).getDay()},_canAdjustMonth:function(t,e,i,s){var n=this._getNumberOfMonths(t),a=this._daylightSavingAdjust(new Date(i,s+(e<0?e:n[0]*n[1]),1));return e<0&&a.setDate(this._getDaysInMonth(a.getFullYear(),a.getMonth())),this._isInRange(t,a)},_isInRange:function(t,e){var i=this._getMinMaxDate(t,"min"),s=this._getMinMaxDate(t,"max");return(!i||e.getTime()>=i.getTime())&&(!s||e.getTime()<=s.getTime())},_getFormatConfig:function(t){var e=this._get(t,"shortYearCutoff");return e="string"!=typeof e?e:(new Date).getFullYear()%100+parseInt(e,10),{shortYearCutoff:e,dayNamesShort:this._get(t,"dayNamesShort"),dayNames:this._get(t,"dayNames"),monthNamesShort:this._get(t,"monthNamesShort"),monthNames:this._get(t,"monthNames")}},_formatDate:function(t,e,i,s){e||(t.currentDay=t.selectedDay,t.currentMonth=t.selectedMonth,t.currentYear=t.selectedYear);var n=e?"object"==typeof e?e:this._daylightSavingAdjust(new Date(s,i,e)):this._daylightSavingAdjust(new Date(t.currentYear,t.currentMonth,t.currentDay));return this.formatDate(this._get(t,"dateFormat"),n,this._getFormatConfig(t))}}),$.fn.datepicker=function(t){if(!this.length)return this;$.datepicker.initialized||($(document).mousedown($.datepicker._checkExternalClick).find(document.body).append($.datepicker.dpDiv),$.datepicker.initialized=!0);var e=Array.prototype.slice.call(arguments,1);return"string"!=typeof t||"isDisabled"!=t&&"getDate"!=t&&"widget"!=t?"option"==t&&2==arguments.length&&"string"==typeof arguments[1]?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e)):this.each(function(){"string"==typeof t?$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this].concat(e)):$.datepicker._attachDatepicker(this,t)}):$.datepicker["_"+t+"Datepicker"].apply($.datepicker,[this[0]].concat(e))},$.datepicker=new Datepicker,$.datepicker.initialized=!1,$.datepicker.uuid=(new Date).getTime(),$.datepicker.version="1.9.2",window["DP_jQuery_"+dpuuid]=$}(jQuery),function(t,e){var i="ui-dialog ui-widget ui-widget-content ui-corner-all ",s={buttons:!0,height:!0,maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0,width:!0},n={maxHeight:!0,maxWidth:!0,minHeight:!0,minWidth:!0};t.widget("ui.dialog",{version:"1.9.2",options:{autoOpen:!0,buttons:{},closeOnEscape:!0,closeText:"close",dialogClass:"",draggable:!0,hide:null,height:"auto",maxHeight:!1,maxWidth:!1,minHeight:150,minWidth:150,modal:!1,position:{my:"center",at:"center",of:window,collision:"fit",using:function(e){var i=t(this).css(e).offset().top;i<0&&t(this).css("top",e.top-i)}},resizable:!0,show:null,stack:!0,title:"",width:300,zIndex:1e3},_create:function(){this.originalTitle=this.element.attr("title"),"string"!=typeof this.originalTitle&&(this.originalTitle=""),this.oldPosition={parent:this.element.parent(),index:this.element.parent().children().index(this.element)},this.options.title=this.options.title||this.originalTitle;var e,s,n,a,o,r=this,l=this.options,h=l.title||"&#160;";e=(this.uiDialog=t("<div>")).addClass(i+l.dialogClass).css({display:"none",outline:0,zIndex:l.zIndex}).attr("tabIndex",-1).keydown(function(e){l.closeOnEscape&&!e.isDefaultPrevented()&&e.keyCode&&e.keyCode===t.ui.keyCode.ESCAPE&&(r.close(e),e.preventDefault())}).mousedown(function(t){r.moveToTop(!1,t)}).appendTo("body"),this.element.show().removeAttr("title").addClass("ui-dialog-content ui-widget-content").appendTo(e),s=(this.uiDialogTitlebar=t("<div>")).addClass("ui-dialog-titlebar  ui-widget-header  ui-corner-all  ui-helper-clearfix").bind("mousedown",function(){e.focus()}).prependTo(e),n=t("<a href='#'></a>").addClass("ui-dialog-titlebar-close  ui-corner-all").attr("role","button").click(function(t){t.preventDefault(),r.close(t)}).appendTo(s),(this.uiDialogTitlebarCloseText=t("<span>")).addClass("ui-icon ui-icon-closethick").text(l.closeText).appendTo(n),a=t("<span>").uniqueId().addClass("ui-dialog-title").html(h).prependTo(s),o=(this.uiDialogButtonPane=t("<div>")).addClass("ui-dialog-buttonpane ui-widget-content ui-helper-clearfix"),(this.uiButtonSet=t("<div>")).addClass("ui-dialog-buttonset").appendTo(o),e.attr({role:"dialog","aria-labelledby":a.attr("id")}),s.find("*").add(s).disableSelection(),this._hoverable(n),this._focusable(n),l.draggable&&t.fn.draggable&&this._makeDraggable(),l.resizable&&t.fn.resizable&&this._makeResizable(),this._createButtons(l.buttons),this._isOpen=!1,t.fn.bgiframe&&e.bgiframe(),this._on(e,{keydown:function(i){if(l.modal&&i.keyCode===t.ui.keyCode.TAB){var s=t(":tabbable",e),n=s.filter(":first"),a=s.filter(":last");return i.target!==a[0]||i.shiftKey?i.target===n[0]&&i.shiftKey?(a.focus(1),!1):void 0:(n.focus(1),!1)}}})},_init:function(){this.options.autoOpen&&this.open()},_destroy:function(){var t,e=this.oldPosition;this.overlay&&this.overlay.destroy(),this.uiDialog.hide(),this.element.removeClass("ui-dialog-content ui-widget-content").hide().appendTo("body"),this.uiDialog.remove(),this.originalTitle&&this.element.attr("title",this.originalTitle),t=e.parent.children().eq(e.index),t.length&&t[0]!==this.element[0]?t.before(this.element):e.parent.append(this.element)},widget:function(){return this.uiDialog},close:function(e){var i,s,n=this;if(this._isOpen&&!1!==this._trigger("beforeClose",e))return this._isOpen=!1,this.overlay&&this.overlay.destroy(),this.options.hide?this._hide(this.uiDialog,this.options.hide,function(){n._trigger("close",e)}):(this.uiDialog.hide(),this._trigger("close",e)),t.ui.dialog.overlay.resize(),this.options.modal&&(i=0,t(".ui-dialog").each(function(){this!==n.uiDialog[0]&&(s=t(this).css("z-index"),isNaN(s)||(i=Math.max(i,s)))}),t.ui.dialog.maxZ=i),this},isOpen:function(){return this._isOpen},moveToTop:function(e,i){var s,n=this.options;return n.modal&&!e||!n.stack&&!n.modal?this._trigger("focus",i):(n.zIndex>t.ui.dialog.maxZ&&(t.ui.dialog.maxZ=n.zIndex),this.overlay&&(t.ui.dialog.maxZ+=1,t.ui.dialog.overlay.maxZ=t.ui.dialog.maxZ,this.overlay.$el.css("z-index",t.ui.dialog.overlay.maxZ)),s={scrollTop:this.element.scrollTop(),scrollLeft:this.element.scrollLeft()},t.ui.dialog.maxZ+=1,this.uiDialog.css("z-index",t.ui.dialog.maxZ),this.element.attr(s),this._trigger("focus",i),this)},open:function(){if(!this._isOpen){var e,i=this.options,s=this.uiDialog;return this._size(),this._position(i.position),s.show(i.show),this.overlay=i.modal?new t.ui.dialog.overlay(this):null,this.moveToTop(!0),e=this.element.find(":tabbable"),e.length||(e=this.uiDialogButtonPane.find(":tabbable"),e.length||(e=s)),e.eq(0).focus(),this._isOpen=!0,this._trigger("open"),this}},_createButtons:function(e){var i=this,s=!1;this.uiDialogButtonPane.remove(),this.uiButtonSet.empty(),"object"==typeof e&&null!==e&&t.each(e,function(){return!(s=!0)}),s?(t.each(e,function(e,s){var n,a;s=t.isFunction(s)?{click:s,text:e}:s,s=t.extend({type:"button"},s),a=s.click,s.click=function(){a.apply(i.element[0],arguments)},n=t("<button></button>",s).appendTo(i.uiButtonSet),t.fn.button&&n.button()}),this.uiDialog.addClass("ui-dialog-buttons"),this.uiDialogButtonPane.appendTo(this.uiDialog)):this.uiDialog.removeClass("ui-dialog-buttons")},_makeDraggable:function(){function e(t){return{position:t.position,offset:t.offset}}var i=this,s=this.options;this.uiDialog.draggable({cancel:".ui-dialog-content, .ui-dialog-titlebar-close",handle:".ui-dialog-titlebar",containment:"document",start:function(s,n){t(this).addClass("ui-dialog-dragging"),i._trigger("dragStart",s,e(n))},drag:function(t,s){i._trigger("drag",t,e(s))},stop:function(n,a){s.position=[a.position.left-i.document.scrollLeft(),a.position.top-i.document.scrollTop()],t(this).removeClass("ui-dialog-dragging"),i._trigger("dragStop",n,e(a)),t.ui.dialog.overlay.resize()}})},_makeResizable:function(i){function s(t){return{originalPosition:t.originalPosition,originalSize:t.originalSize,position:t.position,size:t.size}}i=i===e?this.options.resizable:i;var n=this,a=this.options,o=this.uiDialog.css("position"),r="string"==typeof i?i:"n,e,s,w,se,sw,ne,nw";this.uiDialog.resizable({cancel:".ui-dialog-content",containment:"document",alsoResize:this.element,maxWidth:a.maxWidth,maxHeight:a.maxHeight,minWidth:a.minWidth,minHeight:this._minHeight(),handles:r,start:function(e,i){t(this).addClass("ui-dialog-resizing"),n._trigger("resizeStart",e,s(i))},resize:function(t,e){n._trigger("resize",t,s(e))},stop:function(e,i){t(this).removeClass("ui-dialog-resizing"),a.height=t(this).height(),a.width=t(this).width(),n._trigger("resizeStop",e,s(i)),t.ui.dialog.overlay.resize()}}).css("position",o).find(".ui-resizable-se").addClass("ui-icon ui-icon-grip-diagonal-se")},_minHeight:function(){var t=this.options;return"auto"===t.height?t.minHeight:Math.min(t.minHeight,t.height)},_position:function(e){var i,s=[],n=[0,0];e?(("string"==typeof e||"object"==typeof e&&"0"in e)&&(s=e.split?e.split(" "):[e[0],e[1]],1===s.length&&(s[1]=s[0]),t.each(["left","top"],function(t,e){+s[t]===s[t]&&(n[t]=s[t],s[t]=e)}),e={my:s[0]+(n[0]<0?n[0]:"+"+n[0])+" "+s[1]+(n[1]<0?n[1]:"+"+n[1]),at:s.join(" ")}),e=t.extend({},t.ui.dialog.prototype.options.position,e)):e=t.ui.dialog.prototype.options.position,i=this.uiDialog.is(":visible"),i||this.uiDialog.show(),this.uiDialog.position(e),i||this.uiDialog.hide()},_setOptions:function(e){var i=this,a={},o=!1;t.each(e,function(t,e){i._setOption(t,e),t in s&&(o=!0),t in n&&(a[t]=e)}),o&&this._size(),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option",a)},_setOption:function(e,s){var n,a,o=this.uiDialog;switch(e){case"buttons":this._createButtons(s);break;case"closeText":this.uiDialogTitlebarCloseText.text(""+s);break;case"dialogClass":o.removeClass(this.options.dialogClass).addClass(i+s);break;case"disabled":s?o.addClass("ui-dialog-disabled"):o.removeClass("ui-dialog-disabled");break;case"draggable":n=o.is(":data(draggable)"),n&&!s&&o.draggable("destroy"),!n&&s&&this._makeDraggable();break;case"position":this._position(s);break;case"resizable":a=o.is(":data(resizable)"),a&&!s&&o.resizable("destroy"),a&&"string"==typeof s&&o.resizable("option","handles",s),a||!1===s||this._makeResizable(s);break;case"title":t(".ui-dialog-title",this.uiDialogTitlebar).html(""+(s||"&#160;"))}this._super(e,s)},_size:function(){var e,i,s,n=this.options,a=this.uiDialog.is(":visible");this.element.show().css({width:"auto",minHeight:0,height:0}),n.minWidth>n.width&&(n.width=n.minWidth),e=this.uiDialog.css({height:"auto",width:n.width}).outerHeight(),i=Math.max(0,n.minHeight-e),"auto"===n.height?t.support.minHeight?this.element.css({minHeight:i,height:"auto"}):(this.uiDialog.show(),s=this.element.css("height","auto").height(),a||this.uiDialog.hide(),this.element.height(Math.max(s,i))):this.element.height(Math.max(n.height-e,0)),this.uiDialog.is(":data(resizable)")&&this.uiDialog.resizable("option","minHeight",this._minHeight())}}),t.extend(t.ui.dialog,{uuid:0,maxZ:0,getTitleId:function(t){var e=t.attr("id");return e||(this.uuid+=1,e=this.uuid),"ui-dialog-title-"+e},overlay:function(e){this.$el=t.ui.dialog.overlay.create(e)}}),t.extend(t.ui.dialog.overlay,{instances:[],oldInstances:[],maxZ:0,events:t.map("focus,mousedown,mouseup,keydown,keypress,click".split(","),function(t){return t+".dialog-overlay"}).join(" "),create:function(e){0===this.instances.length&&(setTimeout(function(){t.ui.dialog.overlay.instances.length&&t(document).bind(t.ui.dialog.overlay.events,function(e){if(t(e.target).zIndex()<t.ui.dialog.overlay.maxZ)return!1})},1),t(window).bind("resize.dialog-overlay",t.ui.dialog.overlay.resize));var i=this.oldInstances.pop()||t("<div>").addClass("ui-widget-overlay");return t(document).bind("keydown.dialog-overlay",function(s){var n=t.ui.dialog.overlay.instances;0!==n.length&&n[n.length-1]===i&&e.options.closeOnEscape&&!s.isDefaultPrevented()&&s.keyCode&&s.keyCode===t.ui.keyCode.ESCAPE&&(e.close(s),s.preventDefault())}),i.appendTo(document.body).css({width:this.width(),height:this.height()}),t.fn.bgiframe&&i.bgiframe(),this.instances.push(i),i},destroy:function(e){var i=t.inArray(e,this.instances),s=0;-1!==i&&this.oldInstances.push(this.instances.splice(i,1)[0]),0===this.instances.length&&t([document,window]).unbind(".dialog-overlay"),e.height(0).width(0).remove(),t.each(this.instances,function(){s=Math.max(s,this.css("z-index"))}),this.maxZ=s},height:function(){var e,i;return t.ui.ie?(e=Math.max(document.documentElement.scrollHeight,document.body.scrollHeight),i=Math.max(document.documentElement.offsetHeight,document.body.offsetHeight),e<i?t(window).height()+"px":e+"px"):t(document).height()+"px"},width:function(){var e,i;return t.ui.ie?(e=Math.max(document.documentElement.scrollWidth,document.body.scrollWidth),i=Math.max(document.documentElement.offsetWidth,document.body.offsetWidth),e<i?t(window).width()+"px":e+"px"):t(document).width()+"px"},resize:function(){var e=t([]);t.each(t.ui.dialog.overlay.instances,function(){e=e.add(this)}),e.css({width:0,height:0}).css({width:t.ui.dialog.overlay.width(),height:t.ui.dialog.overlay.height()})}}),t.extend(t.ui.dialog.overlay.prototype,{destroy:function(){t.ui.dialog.overlay.destroy(this.$el)}})}(jQuery),function(t){var e=/up|down|vertical/,i=/up|left|vertical|horizontal/;t.effects.effect.blind=function(s,n){var a,o,r,l=t(this),h=["position","top","bottom","left","right","height","width"],c=t.effects.setMode(l,s.mode||"hide"),u=s.direction||"up",d=e.test(u),p=d?"height":"width",f=d?"top":"left",g=i.test(u),m={},v="show"===c;l.parent().is(".ui-effects-wrapper")?t.effects.save(l.parent(),h):t.effects.save(l,h),l.show(),a=t.effects.createWrapper(l).css({overflow:"hidden"}),o=a[p](),r=parseFloat(a.css(f))||0,m[p]=v?o:0,g||(l.css(d?"bottom":"right",0).css(d?"top":"left","auto").css({position:"absolute"}),m[f]=v?r:o+r),v&&(a.css(p,0),g||a.css(f,r+o)),a.animate(m,{duration:s.duration,easing:s.easing,queue:!1,complete:function(){"hide"===c&&l.hide(),t.effects.restore(l,h),t.effects.removeWrapper(l),n()}})}}(jQuery),function(t){t.effects.effect.bounce=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(o,e.mode||"effect"),h="hide"===l,c="show"===l,u=e.direction||"up",d=e.distance,p=e.times||5,f=2*p+(c||h?1:0),g=e.duration/f,m=e.easing,v="up"===u||"down"===u?"top":"left",_="up"===u||"left"===u,b=o.queue(),y=b.length;for((c||h)&&r.push("opacity"),t.effects.save(o,r),o.show(),t.effects.createWrapper(o),d||(d=o["top"===v?"outerHeight":"outerWidth"]()/3),c&&(a={opacity:1},a[v]=0,o.css("opacity",0).css(v,_?2*-d:2*d).animate(a,g,m)),h&&(d/=Math.pow(2,p-1)),a={},a[v]=0,s=0;s<p;s++)n={},n[v]=(_?"-=":"+=")+d,o.animate(n,g,m).animate(a,g,m),d=h?2*d:d/2;h&&(n={opacity:0},n[v]=(_?"-=":"+=")+d,o.animate(n,g,m)),o.queue(function(){h&&o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),i()}),y>1&&b.splice.apply(b,[1,0].concat(b.splice(y,f+1))),o.dequeue()}}(jQuery),function(t){t.effects.effect.clip=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","height","width"],l=t.effects.setMode(o,e.mode||"hide"),h="show"===l,c=e.direction||"vertical",u="vertical"===c,d=u?"height":"width",p=u?"top":"left",f={};t.effects.save(o,r),o.show(),s=t.effects.createWrapper(o).css({overflow:"hidden"}),n="IMG"===o[0].tagName?s:o,a=n[d](),h&&(n.css(d,0),n.css(p,a/2)),f[d]=h?a:0,f[p]=h?0:a/2,n.animate(f,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){h||o.hide(),t.effects.restore(o,r),t.effects.removeWrapper(o),i()}})}}(jQuery),function(t){t.effects.effect.drop=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","opacity","height","width"],o=t.effects.setMode(n,e.mode||"hide"),r="show"===o,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l?"pos":"neg",u={opacity:r?1:0};t.effects.save(n,a),n.show(),t.effects.createWrapper(n),s=e.distance||n["top"===h?"outerHeight":"outerWidth"](!0)/2,r&&n.css("opacity",0).css(h,"pos"===c?-s:s),u[h]=(r?"pos"===c?"+=":"-=":"pos"===c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.explode=function(e,i){function s(){b.push(this),b.length===u*d&&n()}function n(){p.css({visibility:"visible"}),t(b).remove(),g||p.hide(),i()}var a,o,r,l,h,c,u=e.pieces?Math.round(Math.sqrt(e.pieces)):3,d=u,p=t(this),f=t.effects.setMode(p,e.mode||"hide"),g="show"===f,m=p.show().css("visibility","hidden").offset(),v=Math.ceil(p.outerWidth()/d),_=Math.ceil(p.outerHeight()/u),b=[];for(a=0;a<u;a++)for(l=m.top+a*_,c=a-(u-1)/2,o=0;o<d;o++)r=m.left+o*v,h=o-(d-1)/2,p.clone().appendTo("body").wrap("<div></div>").css({position:"absolute",visibility:"visible",left:-o*v,top:-a*_}).parent().addClass("ui-effects-explode").css({position:"absolute",overflow:"hidden",width:v,height:_,left:r+(g?h*v:0),top:l+(g?c*_:0),opacity:g?0:1}).animate({left:r+(g?0:h*v),top:l+(g?0:c*_),opacity:g?1:0},e.duration||500,e.easing,s)}}(jQuery),function(t){t.effects.effect.fade=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"toggle");s.animate({opacity:n},{queue:!1,duration:e.duration,easing:e.easing,complete:i})}}(jQuery),function(t){t.effects.effect.fold=function(e,i){var s,n,a=t(this),o=["position","top","bottom","left","right","height","width"],r=t.effects.setMode(a,e.mode||"hide"),l="show"===r,h="hide"===r,c=e.size||15,u=/([0-9]+)%/.exec(c),d=!!e.horizFirst,p=l!==d,f=p?["width","height"]:["height","width"],g=e.duration/2,m={},v={};t.effects.save(a,o),a.show(),s=t.effects.createWrapper(a).css({overflow:"hidden"}),n=p?[s.width(),s.height()]:[s.height(),s.width()],u&&(c=parseInt(u[1],10)/100*n[h?0:1]),l&&s.css(d?{height:0,width:c}:{height:c,width:0}),m[f[0]]=l?n[0]:c,v[f[1]]=l?n[1]:0,s.animate(m,g,e.easing).animate(v,g,e.easing,function(){h&&a.hide(),t.effects.restore(a,o),t.effects.removeWrapper(a),i()})}}(jQuery),function(t){t.effects.effect.highlight=function(e,i){var s=t(this),n=["backgroundImage","backgroundColor","opacity"],a=t.effects.setMode(s,e.mode||"show"),o={backgroundColor:s.css("backgroundColor")};"hide"===a&&(o.opacity=0),t.effects.save(s,n),s.show().css({backgroundImage:"none",backgroundColor:e.color||"#ffff99"}).animate(o,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===a&&s.hide(),t.effects.restore(s,n),i()}})}}(jQuery),function(t){t.effects.effect.pulsate=function(e,i){var s,n=t(this),a=t.effects.setMode(n,e.mode||"show"),o="show"===a,r="hide"===a,l=o||"hide"===a,h=2*(e.times||5)+(l?1:0),c=e.duration/h,u=0,d=n.queue(),p=d.length;for(!o&&n.is(":visible")||(n.css("opacity",0).show(),u=1),s=1;s<h;s++)n.animate({opacity:u},c,e.easing),u=1-u;n.animate({opacity:u},c,e.easing),n.queue(function(){r&&n.hide(),i()}),p>1&&d.splice.apply(d,[1,0].concat(d.splice(p,h+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.puff=function(e,i){var s=t(this),n=t.effects.setMode(s,e.mode||"hide"),a="hide"===n,o=parseInt(e.percent,10)||150,r=o/100,l={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()};t.extend(e,{effect:"scale",queue:!1,fade:!0,mode:n,complete:i,percent:a?o:100,from:a?l:{height:l.height*r,width:l.width*r,outerHeight:l.outerHeight*r,outerWidth:l.outerWidth*r}}),s.effect(e)},t.effects.effect.scale=function(e,i){var s=t(this),n=t.extend(!0,{},e),a=t.effects.setMode(s,e.mode||"effect"),o=parseInt(e.percent,10)||(0===parseInt(e.percent,10)?0:"hide"===a?0:100),r=e.direction||"both",l=e.origin,h={height:s.height(),width:s.width(),outerHeight:s.outerHeight(),outerWidth:s.outerWidth()},c={y:"horizontal"!==r?o/100:1,x:"vertical"!==r?o/100:1};n.effect="size",n.queue=!1,n.complete=i,"effect"!==a&&(n.origin=l||["middle","center"],n.restore=!0),n.from=e.from||("show"===a?{height:0,width:0,outerHeight:0,outerWidth:0}:h),n.to={height:h.height*c.y,width:h.width*c.x,outerHeight:h.outerHeight*c.y,outerWidth:h.outerWidth*c.x},n.fade&&("show"===a&&(n.from.opacity=0,n.to.opacity=1),"hide"===a&&(n.from.opacity=1,n.to.opacity=0)),s.effect(n)},t.effects.effect.size=function(e,i){var s,n,a,o=t(this),r=["position","top","bottom","left","right","width","height","overflow","opacity"],l=["position","top","bottom","left","right","overflow","opacity"],h=["width","height","overflow"],c=["fontSize"],u=["borderTopWidth","borderBottomWidth","paddingTop","paddingBottom"],d=["borderLeftWidth","borderRightWidth","paddingLeft","paddingRight"],p=t.effects.setMode(o,e.mode||"effect"),f=e.restore||"effect"!==p,g=e.scale||"both",m=e.origin||["middle","center"],v=o.css("position"),_=f?r:l,b={height:0,width:0,outerHeight:0,outerWidth:0};"show"===p&&o.show(),s={height:o.height(),width:o.width(),outerHeight:o.outerHeight(),outerWidth:o.outerWidth()},"toggle"===e.mode&&"show"===p?(o.from=e.to||b,o.to=e.from||s):(o.from=e.from||("show"===p?b:s),o.to=e.to||("hide"===p?b:s)),a={from:{y:o.from.height/s.height,x:o.from.width/s.width},to:{y:o.to.height/s.height,x:o.to.width/s.width}},"box"!==g&&"both"!==g||(a.from.y!==a.to.y&&(_=_.concat(u),o.from=t.effects.setTransition(o,u,a.from.y,o.from),o.to=t.effects.setTransition(o,u,a.to.y,o.to)),a.from.x!==a.to.x&&(_=_.concat(d),o.from=t.effects.setTransition(o,d,a.from.x,o.from),o.to=t.effects.setTransition(o,d,a.to.x,o.to))),"content"!==g&&"both"!==g||a.from.y!==a.to.y&&(_=_.concat(c).concat(h),o.from=t.effects.setTransition(o,c,a.from.y,o.from),o.to=t.effects.setTransition(o,c,a.to.y,o.to)),t.effects.save(o,_),o.show(),t.effects.createWrapper(o),o.css("overflow","hidden").css(o.from),m&&(n=t.effects.getBaseline(m,s),o.from.top=(s.outerHeight-o.outerHeight())*n.y,o.from.left=(s.outerWidth-o.outerWidth())*n.x,o.to.top=(s.outerHeight-o.to.outerHeight)*n.y,o.to.left=(s.outerWidth-o.to.outerWidth)*n.x),o.css(o.from),"content"!==g&&"both"!==g||(u=u.concat(["marginTop","marginBottom"]).concat(c),d=d.concat(["marginLeft","marginRight"]),h=r.concat(u).concat(d),o.find("*[width]").each(function(){var i=t(this),s={height:i.height(),width:i.width(),outerHeight:i.outerHeight(),outerWidth:i.outerWidth()};f&&t.effects.save(i,h),i.from={height:s.height*a.from.y,width:s.width*a.from.x,outerHeight:s.outerHeight*a.from.y,outerWidth:s.outerWidth*a.from.x},i.to={height:s.height*a.to.y,width:s.width*a.to.x,outerHeight:s.height*a.to.y,outerWidth:s.width*a.to.x},a.from.y!==a.to.y&&(i.from=t.effects.setTransition(i,u,a.from.y,i.from),i.to=t.effects.setTransition(i,u,a.to.y,i.to)),a.from.x!==a.to.x&&(i.from=t.effects.setTransition(i,d,a.from.x,i.from),i.to=t.effects.setTransition(i,d,a.to.x,i.to)),i.css(i.from),i.animate(i.to,e.duration,e.easing,function(){f&&t.effects.restore(i,h)})})),o.animate(o.to,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){0===o.to.opacity&&o.css("opacity",o.from.opacity),"hide"===p&&o.hide(),t.effects.restore(o,_),f||("static"===v?o.css({position:"relative",top:o.to.top,left:o.to.left}):t.each(["top","left"],function(t,e){o.css(e,function(e,i){var s=parseInt(i,10),n=t?o.to.left:o.to.top;return"auto"===i?n+"px":s+n+"px"})})),t.effects.removeWrapper(o),i()}})}}(jQuery),function(t){t.effects.effect.shake=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","height","width"],o=t.effects.setMode(n,e.mode||"effect"),r=e.direction||"left",l=e.distance||20,h=e.times||3,c=2*h+1,u=Math.round(e.duration/c),d="up"===r||"down"===r?"top":"left",p="up"===r||"left"===r,f={},g={},m={},v=n.queue(),_=v.length;for(t.effects.save(n,a),n.show(),t.effects.createWrapper(n),f[d]=(p?"-=":"+=")+l,g[d]=(p?"+=":"-=")+2*l,m[d]=(p?"-=":"+=")+2*l,n.animate(f,u,e.easing),s=1;s<h;s++)n.animate(g,u,e.easing).animate(m,u,e.easing);n.animate(g,u,e.easing).animate(f,u/2,e.easing).queue(function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}),_>1&&v.splice.apply(v,[1,0].concat(v.splice(_,c+1))),n.dequeue()}}(jQuery),function(t){t.effects.effect.slide=function(e,i){var s,n=t(this),a=["position","top","bottom","left","right","width","height"],o=t.effects.setMode(n,e.mode||"show"),r="show"===o,l=e.direction||"left",h="up"===l||"down"===l?"top":"left",c="up"===l||"left"===l,u={};t.effects.save(n,a),n.show(),s=e.distance||n["top"===h?"outerHeight":"outerWidth"](!0),t.effects.createWrapper(n).css({overflow:"hidden"}),r&&n.css(h,c?isNaN(s)?"-"+s:-s:s),u[h]=(r?c?"+=":"-=":c?"-=":"+=")+s,n.animate(u,{queue:!1,duration:e.duration,easing:e.easing,complete:function(){"hide"===o&&n.hide(),t.effects.restore(n,a),t.effects.removeWrapper(n),i()}})}}(jQuery),function(t){t.effects.effect.transfer=function(e,i){var s=t(this),n=t(e.to),a="fixed"===n.css("position"),o=t("body"),r=a?o.scrollTop():0,l=a?o.scrollLeft():0,h=n.offset(),c={top:h.top-r,left:h.left-l,height:n.innerHeight(),width:n.innerWidth()},u=s.offset(),d=t('<div class="ui-effects-transfer"></div>').appendTo(document.body).addClass(e.className).css({top:u.top-r,left:u.left-l,height:s.innerHeight(),width:s.innerWidth(),position:a?"fixed":"absolute"}).animate(c,e.duration,e.easing,function(){d.remove(),i()})}}(jQuery),function(t){var e=!1;t.widget("ui.menu",{version:"1.9.2",defaultElement:"<ul>",delay:300,options:{icons:{submenu:"ui-icon-carat-1-e"},menus:"ul",position:{my:"left top",at:"right top"},role:"menu",blur:null,focus:null,select:null},_create:function(){this.activeMenu=this.element,this.element.uniqueId().addClass("ui-menu ui-widget ui-widget-content ui-corner-all").toggleClass("ui-menu-icons",!!this.element.find(".ui-icon").length).attr({role:this.options.role,tabIndex:0}).bind("click"+this.eventNamespace,t.proxy(function(t){this.options.disabled&&t.preventDefault()},this)),this.options.disabled&&this.element.addClass("ui-state-disabled").attr("aria-disabled","true"),this._on({
"mousedown .ui-menu-item > a":function(t){t.preventDefault()},"click .ui-state-disabled > a":function(t){t.preventDefault()},"click .ui-menu-item:has(a)":function(i){var s=t(i.target).closest(".ui-menu-item");!e&&s.not(".ui-state-disabled").length&&(e=!0,this.select(i),s.has(".ui-menu").length?this.expand(i):this.element.is(":focus")||(this.element.trigger("focus",[!0]),this.active&&1===this.active.parents(".ui-menu").length&&clearTimeout(this.timer)))},"mouseenter .ui-menu-item":function(e){var i=t(e.currentTarget);i.siblings().children(".ui-state-active").removeClass("ui-state-active"),this.focus(e,i)},mouseleave:"collapseAll","mouseleave .ui-menu":"collapseAll",focus:function(t,e){var i=this.active||this.element.children(".ui-menu-item").eq(0);e||this.focus(t,i)},blur:function(e){this._delay(function(){t.contains(this.element[0],this.document[0].activeElement)||this.collapseAll(e)})},keydown:"_keydown"}),this.refresh(),this._on(this.document,{click:function(i){t(i.target).closest(".ui-menu").length||this.collapseAll(i),e=!1}})},_destroy:function(){this.element.removeAttr("aria-activedescendant").find(".ui-menu").andSelf().removeClass("ui-menu ui-widget ui-widget-content ui-corner-all ui-menu-icons").removeAttr("role").removeAttr("tabIndex").removeAttr("aria-labelledby").removeAttr("aria-expanded").removeAttr("aria-hidden").removeAttr("aria-disabled").removeUniqueId().show(),this.element.find(".ui-menu-item").removeClass("ui-menu-item").removeAttr("role").removeAttr("aria-disabled").children("a").removeUniqueId().removeClass("ui-corner-all ui-state-hover").removeAttr("tabIndex").removeAttr("role").removeAttr("aria-haspopup").children().each(function(){var e=t(this);e.data("ui-menu-submenu-carat")&&e.remove()}),this.element.find(".ui-menu-divider").removeClass("ui-menu-divider ui-widget-content")},_keydown:function(e){function i(t){return t.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}var s,n,a,o,r,l=!0;switch(e.keyCode){case t.ui.keyCode.PAGE_UP:this.previousPage(e);break;case t.ui.keyCode.PAGE_DOWN:this.nextPage(e);break;case t.ui.keyCode.HOME:this._move("first","first",e);break;case t.ui.keyCode.END:this._move("last","last",e);break;case t.ui.keyCode.UP:this.previous(e);break;case t.ui.keyCode.DOWN:this.next(e);break;case t.ui.keyCode.LEFT:this.collapse(e);break;case t.ui.keyCode.RIGHT:this.active&&!this.active.is(".ui-state-disabled")&&this.expand(e);break;case t.ui.keyCode.ENTER:case t.ui.keyCode.SPACE:this._activate(e);break;case t.ui.keyCode.ESCAPE:this.collapse(e);break;default:l=!1,n=this.previousFilter||"",a=String.fromCharCode(e.keyCode),o=!1,clearTimeout(this.filterTimer),a===n?o=!0:a=n+a,r=new RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())}),s=o&&-1!==s.index(this.active.next())?this.active.nextAll(".ui-menu-item"):s,s.length||(a=String.fromCharCode(e.keyCode),r=new RegExp("^"+i(a),"i"),s=this.activeMenu.children(".ui-menu-item").filter(function(){return r.test(t(this).children("a").text())})),s.length?(this.focus(e,s),s.length>1?(this.previousFilter=a,this.filterTimer=this._delay(function(){delete this.previousFilter},1e3)):delete this.previousFilter):delete this.previousFilter}l&&e.preventDefault()},_activate:function(t){this.active.is(".ui-state-disabled")||(this.active.children("a[aria-haspopup='true']").length?this.expand(t):this.select(t))},refresh:function(){var e,i=this.options.icons.submenu,s=this.element.find(this.options.menus);s.filter(":not(.ui-menu)").addClass("ui-menu ui-widget ui-widget-content ui-corner-all").hide().attr({role:this.options.role,"aria-hidden":"true","aria-expanded":"false"}).each(function(){var e=t(this),s=e.prev("a"),n=t("<span>").addClass("ui-menu-icon ui-icon "+i).data("ui-menu-submenu-carat",!0);s.attr("aria-haspopup","true").prepend(n),e.attr("aria-labelledby",s.attr("id"))}),e=s.add(this.element),e.children(":not(.ui-menu-item):has(a)").addClass("ui-menu-item").attr("role","presentation").children("a").uniqueId().addClass("ui-corner-all").attr({tabIndex:-1,role:this._itemRole()}),e.children(":not(.ui-menu-item)").each(function(){var e=t(this);/[^\-\u2014\u2013\s]/.test(e.text())||e.addClass("ui-widget-content ui-menu-divider")}),e.children(".ui-state-disabled").attr("aria-disabled","true"),this.active&&!t.contains(this.element[0],this.active[0])&&this.blur()},_itemRole:function(){return{menu:"menuitem",listbox:"option"}[this.options.role]},focus:function(t,e){var i,s;this.blur(t,t&&"focus"===t.type),this._scrollIntoView(e),this.active=e.first(),s=this.active.children("a").addClass("ui-state-focus"),this.options.role&&this.element.attr("aria-activedescendant",s.attr("id")),this.active.parent().closest(".ui-menu-item").children("a:first").addClass("ui-state-active"),t&&"keydown"===t.type?this._close():this.timer=this._delay(function(){this._close()},this.delay),i=e.children(".ui-menu"),i.length&&/^mouse/.test(t.type)&&this._startOpening(i),this.activeMenu=e.parent(),this._trigger("focus",t,{item:e})},_scrollIntoView:function(e){var i,s,n,a,o,r;this._hasScroll()&&(i=parseFloat(t.css(this.activeMenu[0],"borderTopWidth"))||0,s=parseFloat(t.css(this.activeMenu[0],"paddingTop"))||0,n=e.offset().top-this.activeMenu.offset().top-i-s,a=this.activeMenu.scrollTop(),o=this.activeMenu.height(),r=e.height(),n<0?this.activeMenu.scrollTop(a+n):n+r>o&&this.activeMenu.scrollTop(a+n-o+r))},blur:function(t,e){e||clearTimeout(this.timer),this.active&&(this.active.children("a").removeClass("ui-state-focus"),this.active=null,this._trigger("blur",t,{item:this.active}))},_startOpening:function(t){clearTimeout(this.timer),"true"===t.attr("aria-hidden")&&(this.timer=this._delay(function(){this._close(),this._open(t)},this.delay))},_open:function(e){var i=t.extend({of:this.active},this.options.position);clearTimeout(this.timer),this.element.find(".ui-menu").not(e.parents(".ui-menu")).hide().attr("aria-hidden","true"),e.show().removeAttr("aria-hidden").attr("aria-expanded","true").position(i)},collapseAll:function(e,i){clearTimeout(this.timer),this.timer=this._delay(function(){var s=i?this.element:t(e&&e.target).closest(this.element.find(".ui-menu"));s.length||(s=this.element),this._close(s),this.blur(e),this.activeMenu=s},this.delay)},_close:function(t){t||(t=this.active?this.active.parent():this.element),t.find(".ui-menu").hide().attr("aria-hidden","true").attr("aria-expanded","false").end().find("a.ui-state-active").removeClass("ui-state-active")},collapse:function(t){var e=this.active&&this.active.parent().closest(".ui-menu-item",this.element);e&&e.length&&(this._close(),this.focus(t,e))},expand:function(t){var e=this.active&&this.active.children(".ui-menu ").children(".ui-menu-item").first();e&&e.length&&(this._open(e.parent()),this._delay(function(){this.focus(t,e)}))},next:function(t){this._move("next","first",t)},previous:function(t){this._move("prev","last",t)},isFirstItem:function(){return this.active&&!this.active.prevAll(".ui-menu-item").length},isLastItem:function(){return this.active&&!this.active.nextAll(".ui-menu-item").length},_move:function(t,e,i){var s;this.active&&(s="first"===t||"last"===t?this.active["first"===t?"prevAll":"nextAll"](".ui-menu-item").eq(-1):this.active[t+"All"](".ui-menu-item").eq(0)),s&&s.length&&this.active||(s=this.activeMenu.children(".ui-menu-item")[e]()),this.focus(i,s)},nextPage:function(e){var i,s,n;if(!this.active)return void this.next(e);this.isLastItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.nextAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s-n<0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item")[this.active?"last":"first"]()))},previousPage:function(e){var i,s,n;if(!this.active)return void this.next(e);this.isFirstItem()||(this._hasScroll()?(s=this.active.offset().top,n=this.element.height(),this.active.prevAll(".ui-menu-item").each(function(){return i=t(this),i.offset().top-s+n>0}),this.focus(e,i)):this.focus(e,this.activeMenu.children(".ui-menu-item").first()))},_hasScroll:function(){return this.element.outerHeight()<this.element.prop("scrollHeight")},select:function(e){this.active=this.active||t(e.target).closest(".ui-menu-item");var i={item:this.active};this.active.has(".ui-menu").length||this.collapseAll(e,!0),this._trigger("select",e,i)}})}(jQuery),function(t,e){function i(t,e,i){return[parseInt(t[0],10)*(d.test(t[0])?e/100:1),parseInt(t[1],10)*(d.test(t[1])?i/100:1)]}function s(e,i){return parseInt(t.css(e,i),10)||0}t.ui=t.ui||{};var n,a=Math.max,o=Math.abs,r=Math.round,l=/left|center|right/,h=/top|center|bottom/,c=/[\+\-]\d+%?/,u=/^\w+/,d=/%$/,p=t.fn.position;t.position={scrollbarWidth:function(){if(n!==e)return n;var i,s,a=t("<div style='display:block;width:50px;height:50px;overflow:hidden;'><div style='height:100px;width:auto;'></div></div>"),o=a.children()[0];return t("body").append(a),i=o.offsetWidth,a.css("overflow","scroll"),s=o.offsetWidth,i===s&&(s=a[0].clientWidth),a.remove(),n=i-s},getScrollInfo:function(e){var i=e.isWindow?"":e.element.css("overflow-x"),s=e.isWindow?"":e.element.css("overflow-y"),n="scroll"===i||"auto"===i&&e.width<e.element[0].scrollWidth,a="scroll"===s||"auto"===s&&e.height<e.element[0].scrollHeight;return{width:n?t.position.scrollbarWidth():0,height:a?t.position.scrollbarWidth():0}},getWithinInfo:function(e){var i=t(e||window),s=t.isWindow(i[0]);return{element:i,isWindow:s,offset:i.offset()||{left:0,top:0},scrollLeft:i.scrollLeft(),scrollTop:i.scrollTop(),width:s?i.width():i.outerWidth(),height:s?i.height():i.outerHeight()}}},t.fn.position=function(e){if(!e||!e.of)return p.apply(this,arguments);e=t.extend({},e);var n,d,f,g,m,v=t(e.of),_=t.position.getWithinInfo(e.within),b=t.position.getScrollInfo(_),y=v[0],w=(e.collision||"flip").split(" "),x={};return 9===y.nodeType?(d=v.width(),f=v.height(),g={top:0,left:0}):t.isWindow(y)?(d=v.width(),f=v.height(),g={top:v.scrollTop(),left:v.scrollLeft()}):y.preventDefault?(e.at="left top",d=f=0,g={top:y.pageY,left:y.pageX}):(d=v.outerWidth(),f=v.outerHeight(),g=v.offset()),m=t.extend({},g),t.each(["my","at"],function(){var t,i,s=(e[this]||"").split(" ");1===s.length&&(s=l.test(s[0])?s.concat(["center"]):h.test(s[0])?["center"].concat(s):["center","center"]),s[0]=l.test(s[0])?s[0]:"center",s[1]=h.test(s[1])?s[1]:"center",t=c.exec(s[0]),i=c.exec(s[1]),x[this]=[t?t[0]:0,i?i[0]:0],e[this]=[u.exec(s[0])[0],u.exec(s[1])[0]]}),1===w.length&&(w[1]=w[0]),"right"===e.at[0]?m.left+=d:"center"===e.at[0]&&(m.left+=d/2),"bottom"===e.at[1]?m.top+=f:"center"===e.at[1]&&(m.top+=f/2),n=i(x.at,d,f),m.left+=n[0],m.top+=n[1],this.each(function(){var l,h,c=t(this),u=c.outerWidth(),p=c.outerHeight(),y=s(this,"marginLeft"),k=s(this,"marginTop"),D=u+y+s(this,"marginRight")+b.width,C=p+k+s(this,"marginBottom")+b.height,I=t.extend({},m),P=i(x.my,c.outerWidth(),c.outerHeight());"right"===e.my[0]?I.left-=u:"center"===e.my[0]&&(I.left-=u/2),"bottom"===e.my[1]?I.top-=p:"center"===e.my[1]&&(I.top-=p/2),I.left+=P[0],I.top+=P[1],t.support.offsetFractions||(I.left=r(I.left),I.top=r(I.top)),l={marginLeft:y,marginTop:k},t.each(["left","top"],function(i,s){t.ui.position[w[i]]&&t.ui.position[w[i]][s](I,{targetWidth:d,targetHeight:f,elemWidth:u,elemHeight:p,collisionPosition:l,collisionWidth:D,collisionHeight:C,offset:[n[0]+P[0],n[1]+P[1]],my:e.my,at:e.at,within:_,elem:c})}),t.fn.bgiframe&&c.bgiframe(),e.using&&(h=function(t){var i=g.left-I.left,s=i+d-u,n=g.top-I.top,r=n+f-p,l={target:{element:v,left:g.left,top:g.top,width:d,height:f},element:{element:c,left:I.left,top:I.top,width:u,height:p},horizontal:s<0?"left":i>0?"right":"center",vertical:r<0?"top":n>0?"bottom":"middle"};d<u&&o(i+s)<d&&(l.horizontal="center"),f<p&&o(n+r)<f&&(l.vertical="middle"),a(o(i),o(s))>a(o(n),o(r))?l.important="horizontal":l.important="vertical",e.using.call(this,t,l)}),c.offset(t.extend(I,{using:h}))})},t.ui.position={fit:{left:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollLeft:s.offset.left,o=s.width,r=t.left-e.collisionPosition.marginLeft,l=n-r,h=r+e.collisionWidth-o-n;e.collisionWidth>o?l>0&&h<=0?(i=t.left+l+e.collisionWidth-o-n,t.left+=l-i):t.left=h>0&&l<=0?n:l>h?n+o-e.collisionWidth:n:l>0?t.left+=l:h>0?t.left-=h:t.left=a(t.left-r,t.left)},top:function(t,e){var i,s=e.within,n=s.isWindow?s.scrollTop:s.offset.top,o=e.within.height,r=t.top-e.collisionPosition.marginTop,l=n-r,h=r+e.collisionHeight-o-n;e.collisionHeight>o?l>0&&h<=0?(i=t.top+l+e.collisionHeight-o-n,t.top+=l-i):t.top=h>0&&l<=0?n:l>h?n+o-e.collisionHeight:n:l>0?t.top+=l:h>0?t.top-=h:t.top=a(t.top-r,t.top)}},flip:{left:function(t,e){var i,s,n=e.within,a=n.offset.left+n.scrollLeft,r=n.width,l=n.isWindow?n.scrollLeft:n.offset.left,h=t.left-e.collisionPosition.marginLeft,c=h-l,u=h+e.collisionWidth-r-l,d="left"===e.my[0]?-e.elemWidth:"right"===e.my[0]?e.elemWidth:0,p="left"===e.at[0]?e.targetWidth:"right"===e.at[0]?-e.targetWidth:0,f=-2*e.offset[0];c<0?((i=t.left+d+p+f+e.collisionWidth-r-a)<0||i<o(c))&&(t.left+=d+p+f):u>0&&((s=t.left-e.collisionPosition.marginLeft+d+p+f-l)>0||o(s)<u)&&(t.left+=d+p+f)},top:function(t,e){var i,s,n=e.within,a=n.offset.top+n.scrollTop,r=n.height,l=n.isWindow?n.scrollTop:n.offset.top,h=t.top-e.collisionPosition.marginTop,c=h-l,u=h+e.collisionHeight-r-l,d="top"===e.my[1],p=d?-e.elemHeight:"bottom"===e.my[1]?e.elemHeight:0,f="top"===e.at[1]?e.targetHeight:"bottom"===e.at[1]?-e.targetHeight:0,g=-2*e.offset[1];c<0?(s=t.top+p+f+g+e.collisionHeight-r-a,t.top+p+f+g>c&&(s<0||s<o(c))&&(t.top+=p+f+g)):u>0&&(i=t.top-e.collisionPosition.marginTop+p+f+g-l,t.top+p+f+g>u&&(i>0||o(i)<u)&&(t.top+=p+f+g))}},flipfit:{left:function(){t.ui.position.flip.left.apply(this,arguments),t.ui.position.fit.left.apply(this,arguments)},top:function(){t.ui.position.flip.top.apply(this,arguments),t.ui.position.fit.top.apply(this,arguments)}}},function(){var e,i,s,n,a,o=document.getElementsByTagName("body")[0],r=document.createElement("div");e=document.createElement(o?"div":"body"),s={visibility:"hidden",width:0,height:0,border:0,margin:0,background:"none"},o&&t.extend(s,{position:"absolute",left:"-1000px",top:"-1000px"});for(a in s)e.style[a]=s[a];e.appendChild(r),i=o||document.documentElement,i.insertBefore(e,i.firstChild),r.style.cssText="position: absolute; left: 10.7432222px;",n=t(r).offset().left,t.support.offsetFractions=n>10&&n<11,e.innerHTML="",i.removeChild(e)}(),!1!==t.uiBackCompat&&function(t){var i=t.fn.position;t.fn.position=function(s){if(!s||!s.offset)return i.call(this,s);var n=s.offset.split(" "),a=s.at.split(" ");return 1===n.length&&(n[1]=n[0]),/^\d/.test(n[0])&&(n[0]="+"+n[0]),/^\d/.test(n[1])&&(n[1]="+"+n[1]),1===a.length&&(/left|center|right/.test(a[0])?a[1]="center":(a[1]=a[0],a[0]="center")),i.call(this,t.extend(s,{at:a[0]+n[0]+" "+a[1]+n[1],offset:e}))}}(jQuery)}(jQuery),function(t,e){t.widget("ui.progressbar",{version:"1.9.2",options:{value:0,max:100},min:0,_create:function(){this.element.addClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").attr({role:"progressbar","aria-valuemin":this.min,"aria-valuemax":this.options.max,"aria-valuenow":this._value()}),this.valueDiv=t("<div class='ui-progressbar-value ui-widget-header ui-corner-left'></div>").appendTo(this.element),this.oldValue=this._value(),this._refreshValue()},_destroy:function(){this.element.removeClass("ui-progressbar ui-widget ui-widget-content ui-corner-all").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.valueDiv.remove()},value:function(t){return t===e?this._value():(this._setOption("value",t),this)},_setOption:function(t,e){"value"===t&&(this.options.value=e,this._refreshValue(),this._value()===this.options.max&&this._trigger("complete")),this._super(t,e)},_value:function(){var t=this.options.value;return"number"!=typeof t&&(t=0),Math.min(this.options.max,Math.max(this.min,t))},_percentage:function(){return 100*this._value()/this.options.max},_refreshValue:function(){var t=this.value(),e=this._percentage();this.oldValue!==t&&(this.oldValue=t,this._trigger("change")),this.valueDiv.toggle(t>this.min).toggleClass("ui-corner-right",t===this.options.max).width(e.toFixed(0)+"%"),this.element.attr("aria-valuenow",t)}})}(jQuery),function(t){var e=5;t.widget("ui.slider",t.ui.mouse,{version:"1.9.2",widgetEventPrefix:"slide",options:{animate:!1,distance:0,max:100,min:0,orientation:"horizontal",range:!1,step:1,value:0,values:null},_create:function(){var i,s,n=this.options,a=this.element.find(".ui-slider-handle").addClass("ui-state-default ui-corner-all"),o=[];for(this._keySliding=!1,this._mouseSliding=!1,this._animateOff=!0,this._handleIndex=null,this._detectOrientation(),this._mouseInit(),this.element.addClass("ui-slider ui-slider-"+this.orientation+" ui-widget ui-widget-content ui-corner-all"+(n.disabled?" ui-slider-disabled ui-disabled":"")),this.range=t([]),n.range&&(!0===n.range&&(n.values||(n.values=[this._valueMin(),this._valueMin()]),n.values.length&&2!==n.values.length&&(n.values=[n.values[0],n.values[0]])),this.range=t("<div></div>").appendTo(this.element).addClass("ui-slider-range ui-widget-header"+("min"===n.range||"max"===n.range?" ui-slider-range-"+n.range:""))),s=n.values&&n.values.length||1,i=a.length;i<s;i++)o.push("<a class='ui-slider-handle ui-state-default ui-corner-all' href='#'></a>");this.handles=a.add(t(o.join("")).appendTo(this.element)),this.handle=this.handles.eq(0),this.handles.add(this.range).filter("a").click(function(t){t.preventDefault()}).mouseenter(function(){n.disabled||t(this).addClass("ui-state-hover")}).mouseleave(function(){t(this).removeClass("ui-state-hover")}).focus(function(){n.disabled?t(this).blur():(t(".ui-slider .ui-state-focus").removeClass("ui-state-focus"),t(this).addClass("ui-state-focus"))}).blur(function(){t(this).removeClass("ui-state-focus")}),this.handles.each(function(e){t(this).data("ui-slider-handle-index",e)}),this._on(this.handles,{keydown:function(i){var s,n,a,o=t(i.target).data("ui-slider-handle-index");switch(i.keyCode){case t.ui.keyCode.HOME:case t.ui.keyCode.END:case t.ui.keyCode.PAGE_UP:case t.ui.keyCode.PAGE_DOWN:case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(i.preventDefault(),!this._keySliding&&(this._keySliding=!0,t(i.target).addClass("ui-state-active"),!1===this._start(i,o)))return}switch(a=this.options.step,s=n=this.options.values&&this.options.values.length?this.values(o):this.value(),i.keyCode){case t.ui.keyCode.HOME:n=this._valueMin();break;case t.ui.keyCode.END:n=this._valueMax();break;case t.ui.keyCode.PAGE_UP:n=this._trimAlignValue(s+(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.PAGE_DOWN:n=this._trimAlignValue(s-(this._valueMax()-this._valueMin())/e);break;case t.ui.keyCode.UP:case t.ui.keyCode.RIGHT:if(s===this._valueMax())return;n=this._trimAlignValue(s+a);break;case t.ui.keyCode.DOWN:case t.ui.keyCode.LEFT:if(s===this._valueMin())return;n=this._trimAlignValue(s-a)}this._slide(i,o,n)},keyup:function(e){var i=t(e.target).data("ui-slider-handle-index");this._keySliding&&(this._keySliding=!1,this._stop(e,i),this._change(e,i),t(e.target).removeClass("ui-state-active"))}}),this._refreshValue(),this._animateOff=!1},_destroy:function(){this.handles.remove(),this.range.remove(),this.element.removeClass("ui-slider ui-slider-horizontal ui-slider-vertical ui-slider-disabled ui-widget ui-widget-content ui-corner-all"),this._mouseDestroy()},_mouseCapture:function(e){var i,s,n,a,o,r,l,h=this,c=this.options;return!c.disabled&&(this.elementSize={width:this.element.outerWidth(),height:this.element.outerHeight()},this.elementOffset=this.element.offset(),i={x:e.pageX,y:e.pageY},s=this._normValueFromMouse(i),n=this._valueMax()-this._valueMin()+1,this.handles.each(function(e){var i=Math.abs(s-h.values(e));n>i&&(n=i,a=t(this),o=e)}),!0===c.range&&this.values(1)===c.min&&(o+=1,a=t(this.handles[o])),!1!==this._start(e,o)&&(this._mouseSliding=!0,this._handleIndex=o,a.addClass("ui-state-active").focus(),r=a.offset(),l=!t(e.target).parents().andSelf().is(".ui-slider-handle"),this._clickOffset=l?{left:0,top:0}:{left:e.pageX-r.left-a.width()/2,top:e.pageY-r.top-a.height()/2-(parseInt(a.css("borderTopWidth"),10)||0)-(parseInt(a.css("borderBottomWidth"),10)||0)+(parseInt(a.css("marginTop"),10)||0)},this.handles.hasClass("ui-state-hover")||this._slide(e,o,s),this._animateOff=!0,!0))},_mouseStart:function(){return!0},_mouseDrag:function(t){var e={x:t.pageX,y:t.pageY},i=this._normValueFromMouse(e);return this._slide(t,this._handleIndex,i),!1},_mouseStop:function(t){return this.handles.removeClass("ui-state-active"),this._mouseSliding=!1,this._stop(t,this._handleIndex),this._change(t,this._handleIndex),this._handleIndex=null,this._clickOffset=null,this._animateOff=!1,!1},_detectOrientation:function(){this.orientation="vertical"===this.options.orientation?"vertical":"horizontal"},_normValueFromMouse:function(t){var e,i,s,n,a;return"horizontal"===this.orientation?(e=this.elementSize.width,i=t.x-this.elementOffset.left-(this._clickOffset?this._clickOffset.left:0)):(e=this.elementSize.height,i=t.y-this.elementOffset.top-(this._clickOffset?this._clickOffset.top:0)),s=i/e,s>1&&(s=1),s<0&&(s=0),"vertical"===this.orientation&&(s=1-s),n=this._valueMax()-this._valueMin(),a=this._valueMin()+s*n,this._trimAlignValue(a)},_start:function(t,e){var i={handle:this.handles[e],value:this.value()};return this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("start",t,i)},_slide:function(t,e,i){var s,n,a;this.options.values&&this.options.values.length?(s=this.values(e?0:1),2===this.options.values.length&&!0===this.options.range&&(0===e&&i>s||1===e&&i<s)&&(i=s),i!==this.values(e)&&(n=this.values(),n[e]=i,a=this._trigger("slide",t,{handle:this.handles[e],value:i,values:n}),s=this.values(e?0:1),!1!==a&&this.values(e,i,!0))):i!==this.value()&&!1!==(a=this._trigger("slide",t,{handle:this.handles[e],value:i}))&&this.value(i)},_stop:function(t,e){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("stop",t,i)},_change:function(t,e){if(!this._keySliding&&!this._mouseSliding){var i={handle:this.handles[e],value:this.value()};this.options.values&&this.options.values.length&&(i.value=this.values(e),i.values=this.values()),this._trigger("change",t,i)}},value:function(t){return arguments.length?(this.options.value=this._trimAlignValue(t),this._refreshValue(),void this._change(null,0)):this._value()},values:function(e,i){var s,n,a;if(arguments.length>1)return this.options.values[e]=this._trimAlignValue(i),this._refreshValue(),void this._change(null,e);if(!arguments.length)return this._values();if(!t.isArray(arguments[0]))return this.options.values&&this.options.values.length?this._values(e):this.value();for(s=this.options.values,n=arguments[0],a=0;a<s.length;a+=1)s[a]=this._trimAlignValue(n[a]),this._change(null,a);this._refreshValue()},_setOption:function(e,i){var s,n=0;switch(t.isArray(this.options.values)&&(n=this.options.values.length),t.Widget.prototype._setOption.apply(this,arguments),e){case"disabled":i?(this.handles.filter(".ui-state-focus").blur(),this.handles.removeClass("ui-state-hover"),this.handles.prop("disabled",!0),this.element.addClass("ui-disabled")):(this.handles.prop("disabled",!1),this.element.removeClass("ui-disabled"));break;case"orientation":this._detectOrientation(),this.element.removeClass("ui-slider-horizontal ui-slider-vertical").addClass("ui-slider-"+this.orientation),this._refreshValue();break;case"value":this._animateOff=!0,this._refreshValue(),this._change(null,0),this._animateOff=!1;break;case"values":for(this._animateOff=!0,this._refreshValue(),s=0;s<n;s+=1)this._change(null,s);this._animateOff=!1;break;case"min":case"max":this._animateOff=!0,this._refreshValue(),this._animateOff=!1}},_value:function(){var t=this.options.value;return t=this._trimAlignValue(t)},_values:function(t){var e,i,s;if(arguments.length)return e=this.options.values[t],e=this._trimAlignValue(e);for(i=this.options.values.slice(),s=0;s<i.length;s+=1)i[s]=this._trimAlignValue(i[s]);return i},_trimAlignValue:function(t){if(t<=this._valueMin())return this._valueMin();if(t>=this._valueMax())return this._valueMax();var e=this.options.step>0?this.options.step:1,i=(t-this._valueMin())%e,s=t-i;return 2*Math.abs(i)>=e&&(s+=i>0?e:-e),parseFloat(s.toFixed(5))},_valueMin:function(){return this.options.min},_valueMax:function(){return this.options.max},_refreshValue:function(){var e,i,s,n,a,o=this.options.range,r=this.options,l=this,h=!this._animateOff&&r.animate,c={};this.options.values&&this.options.values.length?this.handles.each(function(s){i=(l.values(s)-l._valueMin())/(l._valueMax()-l._valueMin())*100,c["horizontal"===l.orientation?"left":"bottom"]=i+"%",t(this).stop(1,1)[h?"animate":"css"](c,r.animate),!0===l.options.range&&("horizontal"===l.orientation?(0===s&&l.range.stop(1,1)[h?"animate":"css"]({left:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({width:i-e+"%"},{queue:!1,duration:r.animate})):(0===s&&l.range.stop(1,1)[h?"animate":"css"]({bottom:i+"%"},r.animate),1===s&&l.range[h?"animate":"css"]({height:i-e+"%"},{queue:!1,duration:r.animate}))),e=i}):(s=this.value(),n=this._valueMin(),a=this._valueMax(),i=a!==n?(s-n)/(a-n)*100:0,c["horizontal"===this.orientation?"left":"bottom"]=i+"%",this.handle.stop(1,1)[h?"animate":"css"](c,r.animate),"min"===o&&"horizontal"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({width:i+"%"},r.animate),"max"===o&&"horizontal"===this.orientation&&this.range[h?"animate":"css"]({width:100-i+"%"},{queue:!1,duration:r.animate}),"min"===o&&"vertical"===this.orientation&&this.range.stop(1,1)[h?"animate":"css"]({height:i+"%"},r.animate),"max"===o&&"vertical"===this.orientation&&this.range[h?"animate":"css"]({height:100-i+"%"},{queue:!1,duration:r.animate}))}})}(jQuery),function(t){function e(t){return function(){var e=this.element.val();t.apply(this,arguments),this._refresh(),e!==this.element.val()&&this._trigger("change")}}t.widget("ui.spinner",{version:"1.9.2",defaultElement:"<input>",widgetEventPrefix:"spin",options:{culture:null,icons:{down:"ui-icon-triangle-1-s",up:"ui-icon-triangle-1-n"},incremental:!0,max:null,min:null,numberFormat:null,page:10,step:1,change:null,spin:null,start:null,stop:null},_create:function(){this._setOption("max",this.options.max),this._setOption("min",this.options.min),this._setOption("step",this.options.step),this._value(this.element.val(),!0),this._draw(),this._on(this._events),this._refresh(),this._on(this.window,{beforeunload:function(){this.element.removeAttr("autocomplete")}})},_getCreateOptions:function(){var e={},i=this.element;return t.each(["min","max","step"],function(t,s){var n=i.attr(s);n!==undefined&&n.length&&(e[s]=n)}),e},_events:{keydown:function(t){this._start(t)&&this._keydown(t)&&t.preventDefault()},keyup:"_stop",focus:function(){this.previous=this.element.val()},blur:function(t){if(this.cancelBlur)return void delete this.cancelBlur;this._refresh(),this.previous!==this.element.val()&&this._trigger("change",t)},mousewheel:function(t,e){if(e){if(!this.spinning&&!this._start(t))return!1;this._spin((e>0?1:-1)*this.options.step,t),clearTimeout(this.mousewheelTimer),this.mousewheelTimer=this._delay(function(){this.spinning&&this._stop(t)},100),t.preventDefault()}},"mousedown .ui-spinner-button":function(e){function i(){this.element[0]===this.document[0].activeElement||(this.element.focus(),this.previous=s,this._delay(function(){this.previous=s}))}var s;s=this.element[0]===this.document[0].activeElement?this.previous:this.element.val(),e.preventDefault(),i.call(this),this.cancelBlur=!0,this._delay(function(){delete this.cancelBlur,i.call(this)}),!1!==this._start(e)&&this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseup .ui-spinner-button":"_stop","mouseenter .ui-spinner-button":function(e){if(t(e.currentTarget).hasClass("ui-state-active"))return!1!==this._start(e)&&void this._repeat(null,t(e.currentTarget).hasClass("ui-spinner-up")?1:-1,e)},"mouseleave .ui-spinner-button":"_stop"},_draw:function(){var t=this.uiSpinner=this.element.addClass("ui-spinner-input").attr("autocomplete","off").wrap(this._uiSpinnerHtml()).parent().append(this._buttonHtml());this.element.attr("role","spinbutton"),this.buttons=t.find(".ui-spinner-button").attr("tabIndex",-1).button().removeClass("ui-corner-all"),this.buttons.height()>Math.ceil(.5*t.height())&&t.height()>0&&t.height(t.height()),this.options.disabled&&this.disable()},_keydown:function(e){var i=this.options,s=t.ui.keyCode;switch(e.keyCode){case s.UP:return this._repeat(null,1,e),!0;case s.DOWN:return this._repeat(null,-1,e),!0;case s.PAGE_UP:return this._repeat(null,i.page,e),!0;case s.PAGE_DOWN:return this._repeat(null,-i.page,e),!0}return!1},_uiSpinnerHtml:function(){return"<span class='ui-spinner ui-widget ui-widget-content ui-corner-all'></span>"},_buttonHtml:function(){return"<a class='ui-spinner-button ui-spinner-up ui-corner-tr'><span class='ui-icon "+this.options.icons.up+"'>&#9650;</span></a><a class='ui-spinner-button ui-spinner-down ui-corner-br'><span class='ui-icon "+this.options.icons.down+"'>&#9660;</span></a>"},_start:function(t){return!(!this.spinning&&!1===this._trigger("start",t))&&(this.counter||(this.counter=1),this.spinning=!0,!0)},_repeat:function(t,e,i){t=t||500,clearTimeout(this.timer),this.timer=this._delay(function(){this._repeat(40,e,i)},t),this._spin(e*this.options.step,i)},_spin:function(t,e){var i=this.value()||0;this.counter||(this.counter=1),i=this._adjustValue(i+t*this._increment(this.counter)),this.spinning&&!1===this._trigger("spin",e,{value:i})||(this._value(i),this.counter++)},_increment:function(e){var i=this.options.incremental;return i?t.isFunction(i)?i(e):Math.floor(e*e*e/5e4-e*e/500+17*e/200+1):1},_precision:function(){var t=this._precisionOf(this.options.step);return null!==this.options.min&&(t=Math.max(t,this._precisionOf(this.options.min))),t},_precisionOf:function(t){var e=t.toString(),i=e.indexOf(".");return-1===i?0:e.length-i-1},_adjustValue:function(t){var e,i,s=this.options;return e=null!==s.min?s.min:0,i=t-e,i=Math.round(i/s.step)*s.step,t=e+i,t=parseFloat(t.toFixed(this._precision())),null!==s.max&&t>s.max?s.max:null!==s.min&&t<s.min?s.min:t},_stop:function(t){this.spinning&&(clearTimeout(this.timer),clearTimeout(this.mousewheelTimer),this.counter=0,this.spinning=!1,this._trigger("stop",t))},_setOption:function(t,e){if("culture"===t||"numberFormat"===t){var i=this._parse(this.element.val());return this.options[t]=e,void this.element.val(this._format(i))}"max"!==t&&"min"!==t&&"step"!==t||"string"==typeof e&&(e=this._parse(e)),this._super(t,e),"disabled"===t&&(e?(this.element.prop("disabled",!0),this.buttons.button("disable")):(this.element.prop("disabled",!1),this.buttons.button("enable")))},_setOptions:e(function(t){this._super(t),this._value(this.element.val())}),_parse:function(t){return"string"==typeof t&&""!==t&&(t=window.Globalize&&this.options.numberFormat?Globalize.parseFloat(t,10,this.options.culture):+t),""===t||isNaN(t)?null:t},_format:function(t){return""===t?"":window.Globalize&&this.options.numberFormat?Globalize.format(t,this.options.numberFormat,this.options.culture):t},_refresh:function(){this.element.attr({"aria-valuemin":this.options.min,"aria-valuemax":this.options.max,"aria-valuenow":this._parse(this.element.val())})},_value:function(t,e){var i;""!==t&&null!==(i=this._parse(t))&&(e||(i=this._adjustValue(i)),t=this._format(i)),this.element.val(t),this._refresh()},_destroy:function(){this.element.removeClass("ui-spinner-input").prop("disabled",!1).removeAttr("autocomplete").removeAttr("role").removeAttr("aria-valuemin").removeAttr("aria-valuemax").removeAttr("aria-valuenow"),this.uiSpinner.replaceWith(this.element)},stepUp:e(function(t){this._stepUp(t)}),_stepUp:function(t){this._spin((t||1)*this.options.step)},stepDown:e(function(t){this._stepDown(t)}),_stepDown:function(t){this._spin((t||1)*-this.options.step)},pageUp:e(function(t){this._stepUp((t||1)*this.options.page)}),pageDown:e(function(t){this._stepDown((t||1)*this.options.page)}),value:function(t){if(!arguments.length)return this._parse(this.element.val());e(this._value).call(this,t)},widget:function(){return this.uiSpinner}})}(jQuery),function(t,e){function i(){return++n}function s(t){return t.hash.length>1&&t.href.replace(a,"")===location.href.replace(a,"").replace(/\s/g,"%20")}var n=0,a=/#.*$/;t.widget("ui.tabs",{version:"1.9.2",delay:300,options:{active:null,collapsible:!1,event:"click",heightStyle:"content",hide:null,show:null,activate:null,beforeActivate:null,beforeLoad:null,load:null},_create:function(){
var e=this,i=this.options,s=i.active,n=location.hash.substring(1);this.running=!1,this.element.addClass("ui-tabs ui-widget ui-widget-content ui-corner-all").toggleClass("ui-tabs-collapsible",i.collapsible).delegate(".ui-tabs-nav > li","mousedown"+this.eventNamespace,function(e){t(this).is(".ui-state-disabled")&&e.preventDefault()}).delegate(".ui-tabs-anchor","focus"+this.eventNamespace,function(){t(this).closest("li").is(".ui-state-disabled")&&this.blur()}),this._processTabs(),null===s&&(n&&this.tabs.each(function(e,i){if(t(i).attr("aria-controls")===n)return s=e,!1}),null===s&&(s=this.tabs.index(this.tabs.filter(".ui-tabs-active"))),null!==s&&-1!==s||(s=!!this.tabs.length&&0)),!1!==s&&-1===(s=this.tabs.index(this.tabs.eq(s)))&&(s=!i.collapsible&&0),i.active=s,!i.collapsible&&!1===i.active&&this.anchors.length&&(i.active=0),t.isArray(i.disabled)&&(i.disabled=t.unique(i.disabled.concat(t.map(this.tabs.filter(".ui-state-disabled"),function(t){return e.tabs.index(t)}))).sort()),!1!==this.options.active&&this.anchors.length?this.active=this._findActive(this.options.active):this.active=t(),this._refresh(),this.active.length&&this.load(i.active)},_getCreateEventData:function(){return{tab:this.active,panel:this.active.length?this._getPanelForTab(this.active):t()}},_tabKeydown:function(e){var i=t(this.document[0].activeElement).closest("li"),s=this.tabs.index(i),n=!0;if(!this._handlePageNav(e)){switch(e.keyCode){case t.ui.keyCode.RIGHT:case t.ui.keyCode.DOWN:s++;break;case t.ui.keyCode.UP:case t.ui.keyCode.LEFT:n=!1,s--;break;case t.ui.keyCode.END:s=this.anchors.length-1;break;case t.ui.keyCode.HOME:s=0;break;case t.ui.keyCode.SPACE:return e.preventDefault(),clearTimeout(this.activating),void this._activate(s);case t.ui.keyCode.ENTER:return e.preventDefault(),clearTimeout(this.activating),void this._activate(s!==this.options.active&&s);default:return}e.preventDefault(),clearTimeout(this.activating),s=this._focusNextTab(s,n),e.ctrlKey||(i.attr("aria-selected","false"),this.tabs.eq(s).attr("aria-selected","true"),this.activating=this._delay(function(){this.option("active",s)},this.delay))}},_panelKeydown:function(e){this._handlePageNav(e)||e.ctrlKey&&e.keyCode===t.ui.keyCode.UP&&(e.preventDefault(),this.active.focus())},_handlePageNav:function(e){return e.altKey&&e.keyCode===t.ui.keyCode.PAGE_UP?(this._activate(this._focusNextTab(this.options.active-1,!1)),!0):e.altKey&&e.keyCode===t.ui.keyCode.PAGE_DOWN?(this._activate(this._focusNextTab(this.options.active+1,!0)),!0):void 0},_findNextTab:function(e,i){function s(){return e>n&&(e=0),e<0&&(e=n),e}for(var n=this.tabs.length-1;-1!==t.inArray(s(),this.options.disabled);)e=i?e+1:e-1;return e},_focusNextTab:function(t,e){return t=this._findNextTab(t,e),this.tabs.eq(t).focus(),t},_setOption:function(t,e){return"active"===t?void this._activate(e):"disabled"===t?void this._setupDisabled(e):(this._super(t,e),"collapsible"===t&&(this.element.toggleClass("ui-tabs-collapsible",e),e||!1!==this.options.active||this._activate(0)),"event"===t&&this._setupEvents(e),void("heightStyle"===t&&this._setupHeightStyle(e)))},_tabId:function(t){return t.attr("aria-controls")||"ui-tabs-"+i()},_sanitizeSelector:function(t){return t?t.replace(/[!"$%&'()*+,.\/:;<=>?@\[\]\^`{|}~]/g,"\\$&"):""},refresh:function(){var e=this.options,i=this.tablist.children(":has(a[href])");e.disabled=t.map(i.filter(".ui-state-disabled"),function(t){return i.index(t)}),this._processTabs(),!1!==e.active&&this.anchors.length?this.active.length&&!t.contains(this.tablist[0],this.active[0])?this.tabs.length===e.disabled.length?(e.active=!1,this.active=t()):this._activate(this._findNextTab(Math.max(0,e.active-1),!1)):e.active=this.tabs.index(this.active):(e.active=!1,this.active=t()),this._refresh()},_refresh:function(){this._setupDisabled(this.options.disabled),this._setupEvents(this.options.event),this._setupHeightStyle(this.options.heightStyle),this.tabs.not(this.active).attr({"aria-selected":"false",tabIndex:-1}),this.panels.not(this._getPanelForTab(this.active)).hide().attr({"aria-expanded":"false","aria-hidden":"true"}),this.active.length?(this.active.addClass("ui-tabs-active ui-state-active").attr({"aria-selected":"true",tabIndex:0}),this._getPanelForTab(this.active).show().attr({"aria-expanded":"true","aria-hidden":"false"})):this.tabs.eq(0).attr("tabIndex",0)},_processTabs:function(){var e=this;this.tablist=this._getList().addClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").attr("role","tablist"),this.tabs=this.tablist.find("> li:has(a[href])").addClass("ui-state-default ui-corner-top").attr({role:"tab",tabIndex:-1}),this.anchors=this.tabs.map(function(){return t("a",this)[0]}).addClass("ui-tabs-anchor").attr({role:"presentation",tabIndex:-1}),this.panels=t(),this.anchors.each(function(i,n){var a,o,r,l=t(n).uniqueId().attr("id"),h=t(n).closest("li"),c=h.attr("aria-controls");s(n)?(a=n.hash,o=e.element.find(e._sanitizeSelector(a))):(r=e._tabId(h),a="#"+r,o=e.element.find(a),o.length||(o=e._createPanel(r),o.insertAfter(e.panels[i-1]||e.tablist)),o.attr("aria-live","polite")),o.length&&(e.panels=e.panels.add(o)),c&&h.data("ui-tabs-aria-controls",c),h.attr({"aria-controls":a.substring(1),"aria-labelledby":l}),o.attr("aria-labelledby",l)}),this.panels.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").attr("role","tabpanel")},_getList:function(){return this.element.find("ol,ul").eq(0)},_createPanel:function(e){return t("<div>").attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)},_setupDisabled:function(e){t.isArray(e)&&(e.length?e.length===this.anchors.length&&(e=!0):e=!1);for(var i,s=0;i=this.tabs[s];s++)!0===e||-1!==t.inArray(s,e)?t(i).addClass("ui-state-disabled").attr("aria-disabled","true"):t(i).removeClass("ui-state-disabled").removeAttr("aria-disabled");this.options.disabled=e},_setupEvents:function(e){var i={click:function(t){t.preventDefault()}};e&&t.each(e.split(" "),function(t,e){i[e]="_eventHandler"}),this._off(this.anchors.add(this.tabs).add(this.panels)),this._on(this.anchors,i),this._on(this.tabs,{keydown:"_tabKeydown"}),this._on(this.panels,{keydown:"_panelKeydown"}),this._focusable(this.tabs),this._hoverable(this.tabs)},_setupHeightStyle:function(e){var i,s,n=this.element.parent();"fill"===e?(t.support.minHeight||(s=n.css("overflow"),n.css("overflow","hidden")),i=n.height(),this.element.siblings(":visible").each(function(){var e=t(this),s=e.css("position");"absolute"!==s&&"fixed"!==s&&(i-=e.outerHeight(!0))}),s&&n.css("overflow",s),this.element.children().not(this.panels).each(function(){i-=t(this).outerHeight(!0)}),this.panels.each(function(){t(this).height(Math.max(0,i-t(this).innerHeight()+t(this).height()))}).css("overflow","auto")):"auto"===e&&(i=0,this.panels.each(function(){i=Math.max(i,t(this).height("").height())}).height(i))},_eventHandler:function(e){var i=this.options,s=this.active,n=t(e.currentTarget),a=n.closest("li"),o=a[0]===s[0],r=o&&i.collapsible,l=r?t():this._getPanelForTab(a),h=s.length?this._getPanelForTab(s):t(),c={oldTab:s,oldPanel:h,newTab:r?t():a,newPanel:l};e.preventDefault(),a.hasClass("ui-state-disabled")||a.hasClass("ui-tabs-loading")||this.running||o&&!i.collapsible||!1===this._trigger("beforeActivate",e,c)||(i.active=!r&&this.tabs.index(a),this.active=o?t():a,this.xhr&&this.xhr.abort(),h.length||l.length||t.error("jQuery UI Tabs: Mismatching fragment identifier."),l.length&&this.load(this.tabs.index(a),e),this._toggle(e,c))},_toggle:function(e,i){function s(){a.running=!1,a._trigger("activate",e,i)}function n(){i.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),o.length&&a.options.show?a._show(o,a.options.show,s):(o.show(),s())}var a=this,o=i.newPanel,r=i.oldPanel;this.running=!0,r.length&&this.options.hide?this._hide(r,this.options.hide,function(){i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),n()}):(i.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),r.hide(),n()),r.attr({"aria-expanded":"false","aria-hidden":"true"}),i.oldTab.attr("aria-selected","false"),o.length&&r.length?i.oldTab.attr("tabIndex",-1):o.length&&this.tabs.filter(function(){return 0===t(this).attr("tabIndex")}).attr("tabIndex",-1),o.attr({"aria-expanded":"true","aria-hidden":"false"}),i.newTab.attr({"aria-selected":"true",tabIndex:0})},_activate:function(e){var i,s=this._findActive(e);s[0]!==this.active[0]&&(s.length||(s=this.active),i=s.find(".ui-tabs-anchor")[0],this._eventHandler({target:i,currentTarget:i,preventDefault:t.noop}))},_findActive:function(e){return!1===e?t():this.tabs.eq(e)},_getIndex:function(t){return"string"==typeof t&&(t=this.anchors.index(this.anchors.filter("[href$='"+t+"']"))),t},_destroy:function(){this.xhr&&this.xhr.abort(),this.element.removeClass("ui-tabs ui-widget ui-widget-content ui-corner-all ui-tabs-collapsible"),this.tablist.removeClass("ui-tabs-nav ui-helper-reset ui-helper-clearfix ui-widget-header ui-corner-all").removeAttr("role"),this.anchors.removeClass("ui-tabs-anchor").removeAttr("role").removeAttr("tabIndex").removeData("href.tabs").removeData("load.tabs").removeUniqueId(),this.tabs.add(this.panels).each(function(){t.data(this,"ui-tabs-destroy")?t(this).remove():t(this).removeClass("ui-state-default ui-state-active ui-state-disabled ui-corner-top ui-corner-bottom ui-widget-content ui-tabs-active ui-tabs-panel").removeAttr("tabIndex").removeAttr("aria-live").removeAttr("aria-busy").removeAttr("aria-selected").removeAttr("aria-labelledby").removeAttr("aria-hidden").removeAttr("aria-expanded").removeAttr("role")}),this.tabs.each(function(){var e=t(this),i=e.data("ui-tabs-aria-controls");i?e.attr("aria-controls",i):e.removeAttr("aria-controls")}),this.panels.show(),"content"!==this.options.heightStyle&&this.panels.css("height","")},enable:function(i){var s=this.options.disabled;!1!==s&&(i===e?s=!1:(i=this._getIndex(i),s=t.isArray(s)?t.map(s,function(t){return t!==i?t:null}):t.map(this.tabs,function(t,e){return e!==i?e:null})),this._setupDisabled(s))},disable:function(i){var s=this.options.disabled;if(!0!==s){if(i===e)s=!0;else{if(i=this._getIndex(i),-1!==t.inArray(i,s))return;s=t.isArray(s)?t.merge([i],s).sort():[i]}this._setupDisabled(s)}},load:function(e,i){e=this._getIndex(e);var n=this,a=this.tabs.eq(e),o=a.find(".ui-tabs-anchor"),r=this._getPanelForTab(a),l={tab:a,panel:r};s(o[0])||(this.xhr=t.ajax(this._ajaxSettings(o,i,l)),this.xhr&&"canceled"!==this.xhr.statusText&&(a.addClass("ui-tabs-loading"),r.attr("aria-busy","true"),this.xhr.success(function(t){setTimeout(function(){r.html(t),n._trigger("load",i,l)},1)}).complete(function(t,e){setTimeout(function(){"abort"===e&&n.panels.stop(!1,!0),a.removeClass("ui-tabs-loading"),r.removeAttr("aria-busy"),t===n.xhr&&delete n.xhr},1)})))},_ajaxSettings:function(e,i,s){var n=this;return{url:e.attr("href"),beforeSend:function(e,a){return n._trigger("beforeLoad",i,t.extend({jqXHR:e,ajaxSettings:a},s))}}},_getPanelForTab:function(e){var i=t(e).attr("aria-controls");return this.element.find(this._sanitizeSelector("#"+i))}}),!1!==t.uiBackCompat&&(t.ui.tabs.prototype._ui=function(t,e){return{tab:t,panel:e,index:this.anchors.index(t)}},t.widget("ui.tabs",t.ui.tabs,{url:function(t,e){this.anchors.eq(t).attr("href",e)}}),t.widget("ui.tabs",t.ui.tabs,{options:{ajaxOptions:null,cache:!1},_create:function(){this._super();var e=this;this._on({tabsbeforeload:function(i,s){if(t.data(s.tab[0],"cache.tabs"))return void i.preventDefault();s.jqXHR.success(function(){e.options.cache&&t.data(s.tab[0],"cache.tabs",!0)})}})},_ajaxSettings:function(e,i,s){var n=this.options.ajaxOptions;return t.extend({},n,{error:function(t,e){try{n.error(t,e,s.tab.closest("li").index(),s.tab[0])}catch(t){}}},this._superApply(arguments))},_setOption:function(t,e){"cache"===t&&!1===e&&this.anchors.removeData("cache.tabs"),this._super(t,e)},_destroy:function(){this.anchors.removeData("cache.tabs"),this._super()},url:function(t){this.anchors.eq(t).removeData("cache.tabs"),this._superApply(arguments)}}),t.widget("ui.tabs",t.ui.tabs,{abort:function(){this.xhr&&this.xhr.abort()}}),t.widget("ui.tabs",t.ui.tabs,{options:{spinner:"<em>Loading&#8230;</em>"},_create:function(){this._super(),this._on({tabsbeforeload:function(t,e){if(t.target===this.element[0]&&this.options.spinner){var i=e.tab.find("span"),s=i.html();i.html(this.options.spinner),e.jqXHR.complete(function(){i.html(s)})}}})}}),t.widget("ui.tabs",t.ui.tabs,{options:{enable:null,disable:null},enable:function(e){var i,s=this.options;(e&&!0===s.disabled||t.isArray(s.disabled)&&-1!==t.inArray(e,s.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("enable",null,this._ui(this.anchors[e],this.panels[e]))},disable:function(e){var i,s=this.options;(e&&!1===s.disabled||t.isArray(s.disabled)&&-1===t.inArray(e,s.disabled))&&(i=!0),this._superApply(arguments),i&&this._trigger("disable",null,this._ui(this.anchors[e],this.panels[e]))}}),t.widget("ui.tabs",t.ui.tabs,{options:{add:null,remove:null,tabTemplate:"<li><a href='#{href}'><span>#{label}</span></a></li>"},add:function(i,s,n){n===e&&(n=this.anchors.length);var a,o,r=this.options,l=t(r.tabTemplate.replace(/#\{href\}/g,i).replace(/#\{label\}/g,s)),h=i.indexOf("#")?this._tabId(l):i.replace("#","");return l.addClass("ui-state-default ui-corner-top").data("ui-tabs-destroy",!0),l.attr("aria-controls",h),a=n>=this.tabs.length,o=this.element.find("#"+h),o.length||(o=this._createPanel(h),a?n>0?o.insertAfter(this.panels.eq(-1)):o.appendTo(this.element):o.insertBefore(this.panels[n])),o.addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").hide(),a?l.appendTo(this.tablist):l.insertBefore(this.tabs[n]),r.disabled=t.map(r.disabled,function(t){return t>=n?++t:t}),this.refresh(),1===this.tabs.length&&!1===r.active&&this.option("active",0),this._trigger("add",null,this._ui(this.anchors[n],this.panels[n])),this},remove:function(e){e=this._getIndex(e);var i=this.options,s=this.tabs.eq(e).remove(),n=this._getPanelForTab(s).remove();return s.hasClass("ui-tabs-active")&&this.anchors.length>2&&this._activate(e+(e+1<this.anchors.length?1:-1)),i.disabled=t.map(t.grep(i.disabled,function(t){return t!==e}),function(t){return t>=e?--t:t}),this.refresh(),this._trigger("remove",null,this._ui(s.find("a")[0],n[0])),this}}),t.widget("ui.tabs",t.ui.tabs,{length:function(){return this.anchors.length}}),t.widget("ui.tabs",t.ui.tabs,{options:{idPrefix:"ui-tabs-"},_tabId:function(e){var s=e.is("li")?e.find("a[href]"):e;return s=s[0],t(s).closest("li").attr("aria-controls")||s.title&&s.title.replace(/\s/g,"_").replace(/[^\w\u00c0-\uFFFF\-]/g,"")||this.options.idPrefix+i()}}),t.widget("ui.tabs",t.ui.tabs,{options:{panelTemplate:"<div></div>"},_createPanel:function(e){return t(this.options.panelTemplate).attr("id",e).addClass("ui-tabs-panel ui-widget-content ui-corner-bottom").data("ui-tabs-destroy",!0)}}),t.widget("ui.tabs",t.ui.tabs,{_create:function(){var t=this.options;null===t.active&&t.selected!==e&&(t.active=-1!==t.selected&&t.selected),this._super(),t.selected=t.active,!1===t.selected&&(t.selected=-1)},_setOption:function(t,e){if("selected"!==t)return this._super(t,e);var i=this.options;this._super("active",-1!==e&&e),i.selected=i.active,!1===i.selected&&(i.selected=-1)},_eventHandler:function(){this._superApply(arguments),this.options.selected=this.options.active,!1===this.options.selected&&(this.options.selected=-1)}}),t.widget("ui.tabs",t.ui.tabs,{options:{show:null,select:null},_create:function(){this._super(),!1!==this.options.active&&this._trigger("show",null,this._ui(this.active.find(".ui-tabs-anchor")[0],this._getPanelForTab(this.active)[0]))},_trigger:function(t,e,i){var s,n,a=this._superApply(arguments);return!!a&&("beforeActivate"===t?(s=i.newTab.length?i.newTab:i.oldTab,n=i.newPanel.length?i.newPanel:i.oldPanel,a=this._super("select",e,{tab:s.find(".ui-tabs-anchor")[0],panel:n[0],index:s.closest("li").index()})):"activate"===t&&i.newTab.length&&(a=this._super("show",e,{tab:i.newTab.find(".ui-tabs-anchor")[0],panel:i.newPanel[0],index:i.newTab.closest("li").index()})),a)}}),t.widget("ui.tabs",t.ui.tabs,{select:function(t){if(-1===(t=this._getIndex(t))){if(!this.options.collapsible||-1===this.options.selected)return;t=this.options.selected}this.anchors.eq(t).trigger(this.options.event+this.eventNamespace)}}),function(){var e=0;t.widget("ui.tabs",t.ui.tabs,{options:{cookie:null},_create:function(){var t,e=this.options;null==e.active&&e.cookie&&(t=parseInt(this._cookie(),10),-1===t&&(t=!1),e.active=t),this._super()},_cookie:function(i){var s=[this.cookie||(this.cookie=this.options.cookie.name||"ui-tabs-"+ ++e)];return arguments.length&&(s.push(!1===i?-1:i),s.push(this.options.cookie)),t.cookie.apply(null,s)},_refresh:function(){this._super(),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_eventHandler:function(){this._superApply(arguments),this.options.cookie&&this._cookie(this.options.active,this.options.cookie)},_destroy:function(){this._super(),this.options.cookie&&this._cookie(null,this.options.cookie)}})}(),t.widget("ui.tabs",t.ui.tabs,{_trigger:function(e,i,s){var n=t.extend({},s);return"load"===e&&(n.panel=n.panel[0],n.tab=n.tab.find(".ui-tabs-anchor")[0]),this._super(e,i,n)}}),t.widget("ui.tabs",t.ui.tabs,{options:{fx:null},_getFx:function(){var e,i,s=this.options.fx;return s&&(t.isArray(s)?(e=s[0],i=s[1]):e=i=s),s?{show:i,hide:e}:null},_toggle:function(t,e){function i(){n.running=!1,n._trigger("activate",t,e)}function s(){e.newTab.closest("li").addClass("ui-tabs-active ui-state-active"),a.length&&r.show?a.animate(r.show,r.show.duration,function(){i()}):(a.show(),i())}var n=this,a=e.newPanel,o=e.oldPanel,r=this._getFx();if(!r)return this._super(t,e);n.running=!0,o.length&&r.hide?o.animate(r.hide,r.hide.duration,function(){e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),s()}):(e.oldTab.closest("li").removeClass("ui-tabs-active ui-state-active"),o.hide(),s())}}))}(jQuery),function(t){function e(e,i){var s=(e.attr("aria-describedby")||"").split(/\s+/);s.push(i),e.data("ui-tooltip-id",i).attr("aria-describedby",t.trim(s.join(" ")))}function i(e){var i=e.data("ui-tooltip-id"),s=(e.attr("aria-describedby")||"").split(/\s+/),n=t.inArray(i,s);-1!==n&&s.splice(n,1),e.removeData("ui-tooltip-id"),s=t.trim(s.join(" ")),s?e.attr("aria-describedby",s):e.removeAttr("aria-describedby")}var s=0;t.widget("ui.tooltip",{version:"1.9.2",options:{content:function(){return t(this).attr("title")},hide:!0,items:"[title]:not([disabled])",position:{my:"left top+15",at:"left bottom",collision:"flipfit flip"},show:!0,tooltipClass:null,track:!1,close:null,open:null},_create:function(){this._on({mouseover:"open",focusin:"open"}),this.tooltips={},this.parents={},this.options.disabled&&this._disable()},_setOption:function(e,i){var s=this;if("disabled"===e)return this[i?"_disable":"_enable"](),void(this.options[e]=i);this._super(e,i),"content"===e&&t.each(this.tooltips,function(t,e){s._updateContent(e)})},_disable:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0)}),this.element.find(this.options.items).andSelf().each(function(){var e=t(this);e.is("[title]")&&e.data("ui-tooltip-title",e.attr("title")).attr("title","")})},_enable:function(){this.element.find(this.options.items).andSelf().each(function(){var e=t(this);e.data("ui-tooltip-title")&&e.attr("title",e.data("ui-tooltip-title"))})},open:function(e){var i=this,s=t(e?e.target:this.element).closest(this.options.items);s.length&&!s.data("ui-tooltip-id")&&(s.attr("title")&&s.data("ui-tooltip-title",s.attr("title")),s.data("ui-tooltip-open",!0),e&&"mouseover"===e.type&&s.parents().each(function(){var e,s=t(this);s.data("ui-tooltip-open")&&(e=t.Event("blur"),e.target=e.currentTarget=this,i.close(e,!0)),s.attr("title")&&(s.uniqueId(),i.parents[this.id]={element:this,title:s.attr("title")},s.attr("title",""))}),this._updateContent(s,e))},_updateContent:function(t,e){var i,s=this.options.content,n=this,a=e?e.type:null;if("string"==typeof s)return this._open(e,t,s);(i=s.call(t[0],function(i){t.data("ui-tooltip-open")&&n._delay(function(){e&&(e.type=a),this._open(e,t,i)})}))&&this._open(e,t,i)},_open:function(i,s,n){function a(t){h.of=t,o.is(":hidden")||o.position(h)}var o,r,l,h=t.extend({},this.options.position);if(n){if(o=this._find(s),o.length)return void o.find(".ui-tooltip-content").html(n);s.is("[title]")&&(i&&"mouseover"===i.type?s.attr("title",""):s.removeAttr("title")),o=this._tooltip(s),e(s,o.attr("id")),o.find(".ui-tooltip-content").html(n),this.options.track&&i&&/^mouse/.test(i.type)?(this._on(this.document,{mousemove:a}),a(i)):o.position(t.extend({of:s},this.options.position)),o.hide(),this._show(o,this.options.show),this.options.show&&this.options.show.delay&&(l=setInterval(function(){o.is(":visible")&&(a(h.of),clearInterval(l))},t.fx.interval)),this._trigger("open",i,{tooltip:o}),r={keyup:function(e){if(e.keyCode===t.ui.keyCode.ESCAPE){var i=t.Event(e);i.currentTarget=s[0],this.close(i,!0)}},remove:function(){this._removeTooltip(o)}},i&&"mouseover"!==i.type||(r.mouseleave="close"),i&&"focusin"!==i.type||(r.focusout="close"),this._on(!0,s,r)}},close:function(e){var s=this,n=t(e?e.currentTarget:this.element),a=this._find(n);this.closing||(n.data("ui-tooltip-title")&&n.attr("title",n.data("ui-tooltip-title")),i(n),a.stop(!0),this._hide(a,this.options.hide,function(){s._removeTooltip(t(this))}),n.removeData("ui-tooltip-open"),this._off(n,"mouseleave focusout keyup"),n[0]!==this.element[0]&&this._off(n,"remove"),this._off(this.document,"mousemove"),e&&"mouseleave"===e.type&&t.each(this.parents,function(e,i){t(i.element).attr("title",i.title),delete s.parents[e]}),this.closing=!0,this._trigger("close",e,{tooltip:a}),this.closing=!1)},_tooltip:function(e){var i="ui-tooltip-"+s++,n=t("<div>").attr({id:i,role:"tooltip"}).addClass("ui-tooltip ui-widget ui-corner-all ui-widget-content "+(this.options.tooltipClass||""));return t("<div>").addClass("ui-tooltip-content").appendTo(n),n.appendTo(this.document[0].body),t.fn.bgiframe&&n.bgiframe(),this.tooltips[i]=e,n},_find:function(e){var i=e.data("ui-tooltip-id");return i?t("#"+i):t()},_removeTooltip:function(t){t.remove(),delete this.tooltips[t.attr("id")]},_destroy:function(){var e=this;t.each(this.tooltips,function(i,s){var n=t.Event("blur");n.target=n.currentTarget=s[0],e.close(n,!0),t("#"+i).remove(),s.data("ui-tooltip-title")&&(s.attr("title",s.data("ui-tooltip-title")),s.removeData("ui-tooltip-title"))})}})}(jQuery),/*
 * jQuery UI Autocomplete HTML Extension
 *
 * Copyright 2010, Scott González (http://scottgonzalez.com)
 * Dual licensed under the MIT or GPL Version 2 licenses.
 *
 * http://github.com/scottgonzalez/jquery-ui-extensions
 */
function(t){function e(e,i){var s=new RegExp(t.ui.autocomplete.escapeRegex(i),"i");return t.grep(e,function(e){return s.test(t("<div>").html(e.label||e.value||e).text())})}var i=t.ui.autocomplete.prototype,s=i._initSource;t.extend(i,{_initSource:function(){this.options.html&&t.isArray(this.options.source)?this.source=function(t,i){i(e(this.options.source,t.term))}:s.call(this)},_renderItem:function(e,i){return t("<li></li>").data("item.autocomplete",i).append(t("<a></a>")[this.options.html?"html":"text"](i.label)).appendTo(e)}})}(jQuery),/*!
	Autosize 1.18.13
	license: MIT
	http://www.jacklmoore.com/autosize
*/
function(t){var e,i={className:"autosizejs",id:"autosizejs",append:"\n",callback:!1,resizeDelay:10,placeholder:!0},s='<textarea tabindex="-1" style="position:absolute; top:-999px; left:0; right:auto; bottom:auto; border:0; padding: 0; -moz-box-sizing:content-box; -webkit-box-sizing:content-box; box-sizing:content-box; word-wrap:break-word; height:0 !important; min-height:0 !important; overflow:hidden; transition:none; -webkit-transition:none; -moz-transition:none;"/>',n=["fontFamily","fontSize","fontWeight","fontStyle","letterSpacing","textTransform","wordSpacing","textIndent","whiteSpace"],a=t(s).data("autosize",!0)[0];a.style.lineHeight="99px","99px"===t(a).css("lineHeight")&&n.push("lineHeight"),a.style.lineHeight="",t.fn.autosize=function(s){return this.length?(s=t.extend({},i,s||{}),a.parentNode!==document.body&&t(document.body).append(a),this.each(function(){function i(){var e,i=!!window.getComputedStyle&&window.getComputedStyle(d,null);i?(e=d.getBoundingClientRect().width,0!==e&&"number"==typeof e||(e=parseInt(i.width,10)),t.each(["paddingLeft","paddingRight","borderLeftWidth","borderRightWidth"],function(t,s){e-=parseInt(i[s],10)})):e=p.width(),a.style.width=Math.max(e,0)+"px"}function o(){var o={};if(e=d,a.className=s.className,a.id=s.id,h=parseInt(p.css("maxHeight"),10),t.each(n,function(t,e){o[e]=p.css(e)}),t(a).css(o).attr("wrap",p.attr("wrap")),i(),window.chrome){var r=d.style.width;d.style.width="0px";d.offsetWidth;d.style.width=r}}function r(){var t,n;e!==d?o():i(),!d.value&&s.placeholder?a.value=p.attr("placeholder")||"":a.value=d.value,a.value+=s.append||"",a.style.overflowY=d.style.overflowY,n=parseInt(d.style.height,10),a.scrollTop=0,a.scrollTop=9e4,t=a.scrollTop,h&&t>h?(d.style.overflowY="scroll",t=h):(d.style.overflowY="hidden",t<c&&(t=c)),t+=f,n!==t&&(d.style.height=t+"px",g&&s.callback.call(d,d),p.trigger("autosize.resized"))}function l(){clearTimeout(u),u=setTimeout(function(){var t=p.width();t!==v&&(v=t,r())},parseInt(s.resizeDelay,10))}var h,c,u,d=this,p=t(d),f=0,g=t.isFunction(s.callback),m={height:d.style.height,overflow:d.style.overflow,overflowY:d.style.overflowY,wordWrap:d.style.wordWrap,resize:d.style.resize},v=p.width(),_=p.css("resize");p.data("autosize")||(p.data("autosize",!0),"border-box"!==p.css("box-sizing")&&"border-box"!==p.css("-moz-box-sizing")&&"border-box"!==p.css("-webkit-box-sizing")||(f=p.outerHeight()-p.height()),c=Math.max(parseInt(p.css("minHeight"),10)-f||0,p.height()),p.css({overflow:"hidden",overflowY:"hidden",wordWrap:"break-word"}),"vertical"===_?p.css("resize","none"):"both"===_&&p.css("resize","horizontal"),"onpropertychange"in d?"oninput"in d?p.on("input.autosize keyup.autosize",r):p.on("propertychange.autosize",function(){"value"===event.propertyName&&r()}):p.on("input.autosize",r),!1!==s.resizeDelay&&t(window).on("resize.autosize",l),p.on("autosize.resize",r),p.on("autosize.resizeIncludeStyle",function(){e=null,r()}),p.on("autosize.destroy",function(){e=null,clearTimeout(u),t(window).off("resize",l),p.off("autosize").off(".autosize").css(m).removeData("autosize")}),r())})):this}}(jQuery||$),/*
 * jQuery File Upload Plugin 5.42.3
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2010, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery","jquery.ui.widget"],t):"object"==typeof exports?t(require("jquery"),require("./vendor/jquery.ui.widget")):t(window.jQuery)}(function(t){"use strict";function e(e){var i="dragover"===e;return function(s){s.dataTransfer=s.originalEvent&&s.originalEvent.dataTransfer;var n=s.dataTransfer;n&&-1!==t.inArray("Files",n.types)&&!1!==this._trigger(e,t.Event(e,{delegatedEvent:s}))&&(s.preventDefault(),i&&(n.dropEffect="copy"))}}t.support.fileInput=!(new RegExp("(Android (1\\.[0156]|2\\.[01]))|(Windows Phone (OS 7|8\\.0))|(XBLWP)|(ZuneWP)|(WPDesktop)|(w(eb)?OSBrowser)|(webOS)|(Kindle/(1\\.0|2\\.[05]|3\\.0))").test(window.navigator.userAgent)||t('<input type="file">').prop("disabled")),t.support.xhrFileUpload=!(!window.ProgressEvent||!window.FileReader),t.support.xhrFormDataFileUpload=!!window.FormData,t.support.blobSlice=window.Blob&&(Blob.prototype.slice||Blob.prototype.webkitSlice||Blob.prototype.mozSlice),t.widget("blueimp.fileupload",{options:{dropZone:t(document),pasteZone:undefined,fileInput:undefined,replaceFileInput:!0,paramName:undefined,singleFileUploads:!0,limitMultiFileUploads:undefined,limitMultiFileUploadSize:undefined,limitMultiFileUploadSizeOverhead:512,sequentialUploads:!1,limitConcurrentUploads:undefined,forceIframeTransport:!1,redirect:undefined,redirectParamName:undefined,postMessage:undefined,multipart:!0,maxChunkSize:undefined,uploadedBytes:undefined,recalculateProgress:!0,progressInterval:100,bitrateInterval:500,autoUpload:!0,messages:{uploadedBytes:"Uploaded bytes exceed file size"},i18n:function(e,i){return e=this.messages[e]||e.toString(),i&&t.each(i,function(t,i){e=e.replace("{"+t+"}",i)}),e},formData:function(t){return t.serializeArray()},add:function(e,i){if(e.isDefaultPrevented())return!1;(i.autoUpload||!1!==i.autoUpload&&t(this).fileupload("option","autoUpload"))&&i.process().done(function(){i.submit()})},processData:!1,contentType:!1,cache:!1,timeout:0},_specialOptions:["fileInput","dropZone","pasteZone","multipart","forceIframeTransport"],_blobSlice:t.support.blobSlice&&function(){return(this.slice||this.webkitSlice||this.mozSlice).apply(this,arguments)},_BitrateTimer:function(){this.timestamp=Date.now?Date.now():(new Date).getTime(),this.loaded=0,this.bitrate=0,this.getBitrate=function(t,e,i){var s=t-this.timestamp;return(!this.bitrate||!i||s>i)&&(this.bitrate=(e-this.loaded)*(1e3/s)*8,this.loaded=e,this.timestamp=t),this.bitrate}},_isXHRUpload:function(e){return!e.forceIframeTransport&&(!e.multipart&&t.support.xhrFileUpload||t.support.xhrFormDataFileUpload)},_getFormData:function(e){var i;return"function"===t.type(e.formData)?e.formData(e.form):t.isArray(e.formData)?e.formData:"object"===t.type(e.formData)?(i=[],t.each(e.formData,function(t,e){i.push({name:t,value:e})}),i):[]},_getTotal:function(e){var i=0;return t.each(e,function(t,e){i+=e.size||1}),i},_initProgressObject:function(e){var i={loaded:0,total:0,bitrate:0};e._progress?t.extend(e._progress,i):e._progress=i},_initResponseObject:function(t){var e;if(t._response)for(e in t._response)t._response.hasOwnProperty(e)&&delete t._response[e];else t._response={}},_onProgress:function(e,i){if(e.lengthComputable){var s,n=Date.now?Date.now():(new Date).getTime();if(i._time&&i.progressInterval&&n-i._time<i.progressInterval&&e.loaded!==e.total)return;i._time=n,s=Math.floor(e.loaded/e.total*(i.chunkSize||i._progress.total))+(i.uploadedBytes||0),this._progress.loaded+=s-i._progress.loaded,this._progress.bitrate=this._bitrateTimer.getBitrate(n,this._progress.loaded,i.bitrateInterval),i._progress.loaded=i.loaded=s,i._progress.bitrate=i.bitrate=i._bitrateTimer.getBitrate(n,s,i.bitrateInterval),this._trigger("progress",t.Event("progress",{delegatedEvent:e}),i),this._trigger("progressall",t.Event("progressall",{delegatedEvent:e}),this._progress)}},_initProgressListener:function(e){var i=this,s=e.xhr?e.xhr():t.ajaxSettings.xhr();s.upload&&(t(s.upload).bind("progress",function(t){var s=t.originalEvent;t.lengthComputable=s.lengthComputable,t.loaded=s.loaded,t.total=s.total,i._onProgress(t,e)}),e.xhr=function(){return s})},_isInstanceOf:function(t,e){return Object.prototype.toString.call(e)==="[object "+t+"]"},_initXHRData:function(e){var i,s=this,n=e.files[0],a=e.multipart||!t.support.xhrFileUpload,o="array"===t.type(e.paramName)?e.paramName[0]:e.paramName;e.headers=t.extend({},e.headers),e.contentRange&&(e.headers["Content-Range"]=e.contentRange),a&&!e.blob&&this._isInstanceOf("File",n)||(e.headers["Content-Disposition"]='attachment; filename="'+encodeURI(n.name)+'"'),a?t.support.xhrFormDataFileUpload&&(e.postMessage?(i=this._getFormData(e),e.blob?i.push({name:o,value:e.blob}):t.each(e.files,function(s,n){i.push({name:"array"===t.type(e.paramName)&&e.paramName[s]||o,value:n})})):(s._isInstanceOf("FormData",e.formData)?i=e.formData:(i=new FormData,t.each(this._getFormData(e),function(t,e){i.append(e.name,e.value)})),e.blob?i.append(o,e.blob,n.name):t.each(e.files,function(n,a){(s._isInstanceOf("File",a)||s._isInstanceOf("Blob",a))&&i.append("array"===t.type(e.paramName)&&e.paramName[n]||o,a,a.uploadName||a.name)})),e.data=i):(e.contentType=n.type||"application/octet-stream",e.data=e.blob||n),e.blob=null},_initIframeSettings:function(e){var i=t("<a></a>").prop("href",e.url).prop("host");e.dataType="iframe "+(e.dataType||""),e.formData=this._getFormData(e),e.redirect&&i&&i!==location.host&&e.formData.push({name:e.redirectParamName||"redirect",value:e.redirect})},_initDataSettings:function(t){this._isXHRUpload(t)?(this._chunkedUpload(t,!0)||(t.data||this._initXHRData(t),this._initProgressListener(t)),t.postMessage&&(t.dataType="postmessage "+(t.dataType||""))):this._initIframeSettings(t)},_getParamName:function(e){var i=t(e.fileInput),s=e.paramName;return s?t.isArray(s)||(s=[s]):(s=[],i.each(function(){for(var e=t(this),i=e.prop("name")||"files[]",n=(e.prop("files")||[1]).length;n;)s.push(i),n-=1}),s.length||(s=[i.prop("name")||"files[]"])),s},_initFormSettings:function(e){e.form&&e.form.length||(e.form=t(e.fileInput.prop("form")),e.form.length||(e.form=t(this.options.fileInput.prop("form")))),e.paramName=this._getParamName(e),e.url||(e.url=e.form.prop("action")||location.href),e.type=(e.type||"string"===t.type(e.form.prop("method"))&&e.form.prop("method")||"").toUpperCase(),"POST"!==e.type&&"PUT"!==e.type&&"PATCH"!==e.type&&(e.type="POST"),e.formAcceptCharset||(e.formAcceptCharset=e.form.attr("accept-charset"))},_getAJAXSettings:function(e){var i=t.extend({},this.options,e);return this._initFormSettings(i),this._initDataSettings(i),i},_getDeferredState:function(t){return t.state?t.state():t.isResolved()?"resolved":t.isRejected()?"rejected":"pending"},_enhancePromise:function(t){return t.success=t.done,t.error=t.fail,t.complete=t.always,t},_getXHRPromise:function(e,i,s){var n=t.Deferred(),a=n.promise();return i=i||this.options.context||a,!0===e?n.resolveWith(i,s):!1===e&&n.rejectWith(i,s),a.abort=n.promise,this._enhancePromise(a)},_addConvenienceMethods:function(e,i){var s=this,n=function(e){return t.Deferred().resolveWith(s,e).promise()};i.process=function(e,a){return(e||a)&&(i._processQueue=this._processQueue=(this._processQueue||n([this])).pipe(function(){return i.errorThrown?t.Deferred().rejectWith(s,[i]).promise():n(arguments)}).pipe(e,a)),this._processQueue||n([this])},i.submit=function(){return"pending"!==this.state()&&(i.jqXHR=this.jqXHR=!1!==s._trigger("submit",t.Event("submit",{delegatedEvent:e}),this)&&s._onSend(e,this)),this.jqXHR||s._getXHRPromise()},i.abort=function(){return this.jqXHR?this.jqXHR.abort():(this.errorThrown="abort",s._trigger("fail",null,this),s._getXHRPromise(!1))},i.state=function(){return this.jqXHR?s._getDeferredState(this.jqXHR):this._processQueue?s._getDeferredState(this._processQueue):void 0},i.processing=function(){return!this.jqXHR&&this._processQueue&&"pending"===s._getDeferredState(this._processQueue)},i.progress=function(){return this._progress},i.response=function(){return this._response}},_getUploadedBytes:function(t){var e=t.getResponseHeader("Range"),i=e&&e.split("-"),s=i&&i.length>1&&parseInt(i[1],10);return s&&s+1},_chunkedUpload:function(e,i){e.uploadedBytes=e.uploadedBytes||0;var s,n,a=this,o=e.files[0],r=o.size,l=e.uploadedBytes,h=e.maxChunkSize||r,c=this._blobSlice,u=t.Deferred(),d=u.promise();return!(!(this._isXHRUpload(e)&&c&&(l||h<r))||e.data)&&(!!i||(l>=r?(o.error=e.i18n("uploadedBytes"),this._getXHRPromise(!1,e.context,[null,"error",o.error])):(n=function(){var i=t.extend({},e),d=i._progress.loaded;i.blob=c.call(o,l,l+h,o.type),i.chunkSize=i.blob.size,i.contentRange="bytes "+l+"-"+(l+i.chunkSize-1)+"/"+r,a._initXHRData(i),a._initProgressListener(i),s=(!1!==a._trigger("chunksend",null,i)&&t.ajax(i)||a._getXHRPromise(!1,i.context)).done(function(s,o,h){l=a._getUploadedBytes(h)||l+i.chunkSize,d+i.chunkSize-i._progress.loaded&&a._onProgress(t.Event("progress",{lengthComputable:!0,loaded:l-i.uploadedBytes,total:l-i.uploadedBytes}),i),e.uploadedBytes=i.uploadedBytes=l,i.result=s,i.textStatus=o,i.jqXHR=h,a._trigger("chunkdone",null,i),a._trigger("chunkalways",null,i),l<r?n():u.resolveWith(i.context,[s,o,h])}).fail(function(t,e,s){i.jqXHR=t,i.textStatus=e,i.errorThrown=s,a._trigger("chunkfail",null,i),a._trigger("chunkalways",null,i),u.rejectWith(i.context,[t,e,s])})},this._enhancePromise(d),d.abort=function(){return s.abort()},n(),d)))},_beforeSend:function(t,e){0===this._active&&(this._trigger("start"),this._bitrateTimer=new this._BitrateTimer,this._progress.loaded=this._progress.total=0,this._progress.bitrate=0),this._initResponseObject(e),this._initProgressObject(e),e._progress.loaded=e.loaded=e.uploadedBytes||0,e._progress.total=e.total=this._getTotal(e.files)||1,e._progress.bitrate=e.bitrate=0,this._active+=1,this._progress.loaded+=e.loaded,this._progress.total+=e.total},_onDone:function(e,i,s,n){var a=n._progress.total,o=n._response;n._progress.loaded<a&&this._onProgress(t.Event("progress",{lengthComputable:!0,loaded:a,total:a}),n),o.result=n.result=e,o.textStatus=n.textStatus=i,o.jqXHR=n.jqXHR=s,this._trigger("done",null,n)},_onFail:function(t,e,i,s){var n=s._response;s.recalculateProgress&&(this._progress.loaded-=s._progress.loaded,this._progress.total-=s._progress.total),n.jqXHR=s.jqXHR=t,n.textStatus=s.textStatus=e,n.errorThrown=s.errorThrown=i,this._trigger("fail",null,s)},_onAlways:function(t,e,i,s){this._trigger("always",null,s)},_onSend:function(e,i){i.submit||this._addConvenienceMethods(e,i);var s,n,a,o,r=this,l=r._getAJAXSettings(i),h=function(){return r._sending+=1,l._bitrateTimer=new r._BitrateTimer,s=s||((n||!1===r._trigger("send",t.Event("send",{delegatedEvent:e}),l))&&r._getXHRPromise(!1,l.context,n)||r._chunkedUpload(l)||t.ajax(l)).done(function(t,e,i){r._onDone(t,e,i,l)}).fail(function(t,e,i){r._onFail(t,e,i,l)}).always(function(t,e,i){if(r._onAlways(t,e,i,l),r._sending-=1,r._active-=1,l.limitConcurrentUploads&&l.limitConcurrentUploads>r._sending)for(var s=r._slots.shift();s;){if("pending"===r._getDeferredState(s)){s.resolve();break}s=r._slots.shift()}0===r._active&&r._trigger("stop")})};return this._beforeSend(e,l),this.options.sequentialUploads||this.options.limitConcurrentUploads&&this.options.limitConcurrentUploads<=this._sending?(this.options.limitConcurrentUploads>1?(a=t.Deferred(),this._slots.push(a),o=a.pipe(h)):(this._sequence=this._sequence.pipe(h,h),o=this._sequence),o.abort=function(){return n=[undefined,"abort","abort"],s?s.abort():(a&&a.rejectWith(l.context,n),h())},this._enhancePromise(o)):h()},_onAdd:function(e,i){var s,n,a,o,r=this,l=!0,h=t.extend({},this.options,i),c=i.files,u=c.length,d=h.limitMultiFileUploads,p=h.limitMultiFileUploadSize,f=h.limitMultiFileUploadSizeOverhead,g=0,m=this._getParamName(h),v=0;if(!u)return!1;if(p&&c[0].size===undefined&&(p=undefined),(h.singleFileUploads||d||p)&&this._isXHRUpload(h))if(h.singleFileUploads||p||!d)if(!h.singleFileUploads&&p)for(a=[],s=[],o=0;o<u;o+=1)g+=c[o].size+f,(o+1===u||g+c[o+1].size+f>p||d&&o+1-v>=d)&&(a.push(c.slice(v,o+1)),n=m.slice(v,o+1),n.length||(n=m),s.push(n),v=o+1,g=0);else s=m;else for(a=[],s=[],o=0;o<u;o+=d)a.push(c.slice(o,o+d)),n=m.slice(o,o+d),n.length||(n=m),s.push(n);else a=[c],s=[m];return i.originalFiles=c,t.each(a||c,function(n,o){var h=t.extend({},i);return h.files=a?o:[o],h.paramName=s[n],r._initResponseObject(h),r._initProgressObject(h),r._addConvenienceMethods(e,h),l=r._trigger("add",t.Event("add",{delegatedEvent:e}),h)}),l},_replaceFileInput:function(e){var i=e.fileInput,s=i.clone(!0);e.fileInputClone=s,t("<form></form>").append(s)[0].reset(),i.after(s).detach(),t.cleanData(i.unbind("remove")),this.options.fileInput=this.options.fileInput.map(function(t,e){return e===i[0]?s[0]:e}),i[0]===this.element[0]&&(this.element=s)},_handleFileTreeEntry:function(e,i){var s,n=this,a=t.Deferred(),o=function(t){t&&!t.entry&&(t.entry=e),a.resolve([t])},r=function(t){n._handleFileTreeEntries(t,i+e.name+"/").done(function(t){a.resolve(t)}).fail(o)},l=function(){s.readEntries(function(t){t.length?(h=h.concat(t),l()):r(h)},o)},h=[];return i=i||"",e.isFile?e._file?(e._file.relativePath=i,a.resolve(e._file)):e.file(function(t){t.relativePath=i,a.resolve(t)},o):e.isDirectory?(s=e.createReader(),l()):a.resolve([]),a.promise()},_handleFileTreeEntries:function(e,i){var s=this;return t.when.apply(t,t.map(e,function(t){return s._handleFileTreeEntry(t,i)})).pipe(function(){return Array.prototype.concat.apply([],arguments)})},_getDroppedFiles:function(e){e=e||{};var i=e.items;return i&&i.length&&(i[0].webkitGetAsEntry||i[0].getAsEntry)?this._handleFileTreeEntries(t.map(i,function(t){var e;return t.webkitGetAsEntry?(e=t.webkitGetAsEntry(),e&&(e._file=t.getAsFile()),e):t.getAsEntry()})):t.Deferred().resolve(t.makeArray(e.files)).promise()},_getSingleFileInputFiles:function(e){e=t(e);var i,s,n=e.prop("webkitEntries")||e.prop("entries");if(n&&n.length)return this._handleFileTreeEntries(n);if(i=t.makeArray(e.prop("files")),i.length)i[0].name===undefined&&i[0].fileName&&t.each(i,function(t,e){e.name=e.fileName,e.size=e.fileSize});else{if(!(s=e.prop("value")))return t.Deferred().resolve([]).promise();i=[{name:s.replace(/^.*\\/,"")}]}return t.Deferred().resolve(i).promise()},_getFileInputFiles:function(e){return e instanceof t&&1!==e.length?t.when.apply(t,t.map(e,this._getSingleFileInputFiles)).pipe(function(){return Array.prototype.concat.apply([],arguments)}):this._getSingleFileInputFiles(e)},_onChange:function(e){var i=this,s={fileInput:t(e.target),form:t(e.target.form)};this._getFileInputFiles(s.fileInput).always(function(n){s.files=n,i.options.replaceFileInput&&i._replaceFileInput(s),!1!==i._trigger("change",t.Event("change",{delegatedEvent:e}),s)&&i._onAdd(e,s)})},_onPaste:function(e){var i=e.originalEvent&&e.originalEvent.clipboardData&&e.originalEvent.clipboardData.items,s={files:[]};i&&i.length&&(t.each(i,function(t,e){var i=e.getAsFile&&e.getAsFile();i&&s.files.push(i)}),!1!==this._trigger("paste",t.Event("paste",{delegatedEvent:e}),s)&&this._onAdd(e,s))},_onDrop:function(e){e.dataTransfer=e.originalEvent&&e.originalEvent.dataTransfer;var i=this,s=e.dataTransfer,n={};s&&s.files&&s.files.length&&(e.preventDefault(),this._getDroppedFiles(s).always(function(s){n.files=s,!1!==i._trigger("drop",t.Event("drop",{delegatedEvent:e}),n)&&i._onAdd(e,n)}))},_onDragOver:e("dragover"),_onDragEnter:e("dragenter"),_onDragLeave:e("dragleave"),_initEventHandlers:function(){this._isXHRUpload(this.options)&&(this._on(this.options.dropZone,{dragover:this._onDragOver,drop:this._onDrop,dragenter:this._onDragEnter,dragleave:this._onDragLeave}),this._on(this.options.pasteZone,{paste:this._onPaste})),t.support.fileInput&&this._on(this.options.fileInput,{change:this._onChange})},_destroyEventHandlers:function(){this._off(this.options.dropZone,"dragenter dragleave dragover drop"),this._off(this.options.pasteZone,"paste"),this._off(this.options.fileInput,"change")},_setOption:function(e,i){var s=-1!==t.inArray(e,this._specialOptions);s&&this._destroyEventHandlers(),this._super(e,i),s&&(this._initSpecialOptions(),this._initEventHandlers())},_initSpecialOptions:function(){var e=this.options;e.fileInput===undefined?e.fileInput=this.element.is('input[type="file"]')?this.element:this.element.find('input[type="file"]'):e.fileInput instanceof t||(e.fileInput=t(e.fileInput)),e.dropZone instanceof t||(e.dropZone=t(e.dropZone)),e.pasteZone instanceof t||(e.pasteZone=t(e.pasteZone))},_getRegExp:function(t){var e=t.split("/"),i=e.pop();return e.shift(),new RegExp(e.join("/"),i)},_isRegExpOption:function(e,i){return"url"!==e&&"string"===t.type(i)&&/^\/.*\/[igm]{0,3}$/.test(i)},_initDataAttributes:function(){var e=this,i=this.options,s=this.element.data();t.each(this.element[0].attributes,function(t,n){var a,o=n.name.toLowerCase();/^data-/.test(o)&&(o=o.slice(5).replace(/-[a-z]/g,function(t){return t.charAt(1).toUpperCase()}),a=s[o],e._isRegExpOption(o,a)&&(a=e._getRegExp(a)),i[o]=a)})},_create:function(){this._initDataAttributes(),this._initSpecialOptions(),this._slots=[],this._sequence=this._getXHRPromise(!0),this._sending=this._active=0,this._initProgressObject(this),this._initEventHandlers()},active:function(){return this._active},progress:function(){return this._progress},add:function(e){var i=this;e&&!this.options.disabled&&(e.fileInput&&!e.files?this._getFileInputFiles(e.fileInput).always(function(t){e.files=t,i._onAdd(null,e)}):(e.files=t.makeArray(e.files),this._onAdd(null,e)))},send:function(e){if(e&&!this.options.disabled){if(e.fileInput&&!e.files){var i,s,n=this,a=t.Deferred(),o=a.promise();return o.abort=function(){return s=!0,i?i.abort():(a.reject(null,"abort","abort"),o)},this._getFileInputFiles(e.fileInput).always(function(t){if(!s){if(!t.length)return void a.reject();e.files=t,i=n._onSend(null,e),i.then(function(t,e,i){a.resolve(t,e,i)},function(t,e,i){a.reject(t,e,i)})}}),this._enhancePromise(o)}if(e.files=t.makeArray(e.files),e.files.length)return this._onSend(null,e)}return this._getXHRPromise(!1,e&&e.context)}})}),/*
 * jQuery Iframe Transport Plugin 1.6.1
 * https://github.com/blueimp/jQuery-File-Upload
 *
 * Copyright 2011, Sebastian Tschan
 * https://blueimp.net
 *
 * Licensed under the MIT license:
 * http://www.opensource.org/licenses/MIT
 */
function(t){"use strict";"function"==typeof define&&define.amd?define(["jquery"],t):t(window.jQuery)}(function(t){"use strict";var e=0;t.ajaxTransport("iframe",function(i){if(i.async){var s,n,a;return{send:function(o,r){s=t('<form style="display:none;"></form>'),s.attr("accept-charset",i.formAcceptCharset),a=/\?/.test(i.url)?"&":"?","DELETE"===i.type?(i.url=i.url+a+"_method=DELETE",i.type="POST"):"PUT"===i.type?(i.url=i.url+a+"_method=PUT",i.type="POST"):"PATCH"===i.type&&(i.url=i.url+a+"_method=PATCH",i.type="POST"),n=t('<iframe src="javascript:false;" name="iframe-transport-'+(e+=1)+'"></iframe>').bind("load",function(){var e,a=t.isArray(i.paramName)?i.paramName:[i.paramName];n.unbind("load").bind("load",function(){var e;try{if(e=n.contents(),!e.length||!e[0].firstChild)throw new Error}catch(t){e=undefined}r(200,"success",{iframe:e}),t('<iframe src="javascript:false;"></iframe>').appendTo(s),s.remove()}),s.prop("target",n.prop("name")).prop("action",i.url).prop("method",i.type),i.formData&&t.each(i.formData,function(e,i){t('<input type="hidden"/>').prop("name",i.name).val(i.value).appendTo(s)}),i.fileInput&&i.fileInput.length&&"POST"===i.type&&(e=i.fileInput.clone(),i.fileInput.after(function(t){return e[t]}),i.paramName&&i.fileInput.each(function(e){t(this).prop("name",a[e]||i.paramName)}),s.append(i.fileInput).prop("enctype","multipart/form-data").prop("encoding","multipart/form-data")),s.submit(),e&&e.length&&i.fileInput.each(function(i,s){var n=t(e[i]);t(s).prop("name",n.prop("name")),n.replaceWith(s)})}),s.append(n).appendTo(document.body)},abort:function(){n&&n.unbind("load").prop("src","javascript".concat(":false;")),s&&s.remove()}}}}),t.ajaxSetup({converters:{"iframe text":function(e){return e&&t(e[0].body).text()},"iframe json":function(e){return e&&t.parseJSON(t(e[0].body).text())},"iframe html":function(e){return e&&t(e[0].body).html()},"iframe script":function(e){return e&&t.globalEval(t(e[0].body).text())}}})}),function(t,e){t.rails!==e&&t.error("jquery-ujs has already been loaded!");var i,s=t(document);t.rails=i={linkClickSelector:"a[data-confirm], a[data-method], a[data-remote], a[data-disable-with], a[data-disable]",buttonClickSelector:"button[data-remote]:not(form button), button[data-confirm]:not(form button)",inputChangeSelector:"select[data-remote], input[data-remote], textarea[data-remote]",formSubmitSelector:"form",formInputClickSelector:"form input[type=submit], form input[type=image], form button[type=submit], form button:not([type]), input[type=submit][form], input[type=image][form], button[type=submit][form], button[form]:not([type])",disableSelector:"input[data-disable-with]:enabled, button[data-disable-with]:enabled, textarea[data-disable-with]:enabled, input[data-disable]:enabled, button[data-disable]:enabled, textarea[data-disable]:enabled",enableSelector:"input[data-disable-with]:disabled, button[data-disable-with]:disabled, textarea[data-disable-with]:disabled, input[data-disable]:disabled, button[data-disable]:disabled, textarea[data-disable]:disabled",requiredInputSelector:"input[name][required]:not([disabled]),textarea[name][required]:not([disabled])",fileInputSelector:"input[type=file]",linkDisableSelector:"a[data-disable-with], a[data-disable]",buttonDisableSelector:"button[data-remote][data-disable-with], button[data-remote][data-disable]",CSRFProtection:function(e){var i=t('meta[name="csrf-token"]').attr("content");i&&e.setRequestHeader("X-CSRF-Token",i)},refreshCSRFTokens:function(){var e=t("meta[name=csrf-token]").attr("content"),i=t("meta[name=csrf-param]").attr("content");t('form input[name="'+i+'"]').val(e)},fire:function(e,i,s){var n=t.Event(i);return e.trigger(n,s),!1!==n.result},confirm:function(t){return confirm(t)},ajax:function(e){return t.ajax(e)},href:function(t){return t.attr("href")},handleRemote:function(s){var n,a,o,r,l,h,c,u;if(i.fire(s,"ajax:before")){if(r=s.data("cross-domain"),l=r===e?null:r,h=s.data("with-credentials")||null,c=s.data("type")||t.ajaxSettings&&t.ajaxSettings.dataType,s.is("form")){n=s.attr("method"),a=s.attr("action"),o=s.serializeArray();var d=s.data("ujs:submit-button");d&&(o.push(d),s.data("ujs:submit-button",null))}else s.is(i.inputChangeSelector)?(n=s.data("method"),a=s.data("url"),o=s.serialize(),s.data("params")&&(o=o+"&"+s.data("params"))):s.is(i.buttonClickSelector)?(n=s.data("method")||"get",a=s.data("url"),o=s.serialize(),s.data("params")&&(o=o+"&"+s.data("params"))):(n=s.data("method"),a=i.href(s),o=s.data("params")||null);return u={type:n||"GET",data:o,dataType:c,beforeSend:function(t,n){if(n.dataType===e&&t.setRequestHeader("accept","*/*;q=0.5, "+n.accepts.script),!i.fire(s,"ajax:beforeSend",[t,n]))return!1;s.trigger("ajax:send",t)},success:function(t,e,i){s.trigger("ajax:success",[t,e,i])},complete:function(t,e){s.trigger("ajax:complete",[t,e])},error:function(t,e,i){s.trigger("ajax:error",[t,e,i])},crossDomain:l},h&&(u.xhrFields={withCredentials:h}),a&&(u.url=a),i.ajax(u)}return!1},handleMethod:function(s){var n=i.href(s),a=s.data("method"),o=s.attr("target"),r=t("meta[name=csrf-token]").attr("content"),l=t("meta[name=csrf-param]").attr("content"),h=t('<form method="post" action="'+n+'"></form>'),c='<input name="_method" value="'+a+'" type="hidden" />';l!==e&&r!==e&&(c+='<input name="'+l+'" value="'+r+'" type="hidden" />'),o&&h.attr("target",o),h.hide().append(c).appendTo("body"),h.submit()},formElements:function(e,i){return e.is("form")?t(e[0].elements).filter(i):e.find(i)},disableFormElements:function(e){i.formElements(e,i.disableSelector).each(function(){i.disableFormElement(t(this))})},disableFormElement:function(t){var i,s;i=t.is("button")?"html":"val",s=t.data("disable-with"),t.data("ujs:enable-with",t[i]()),s!==e&&t[i](s),t.prop("disabled",!0)},enableFormElements:function(e){i.formElements(e,i.enableSelector).each(function(){i.enableFormElement(t(this))})},enableFormElement:function(t){var e=t.is("button")?"html":"val";t.data("ujs:enable-with")&&t[e](t.data("ujs:enable-with")),t.prop("disabled",!1)},allowAction:function(t){var e,s=t.data("confirm"),n=!1;return!s||(i.fire(t,"confirm")&&(n=i.confirm(s),e=i.fire(t,"confirm:complete",[n])),n&&e)},blankInputs:function(e,i,s){var n,a,o=t(),r=i||"input,textarea",l=e.find(r);return l.each(function(){if(n=t(this),!(a=n.is("input[type=checkbox],input[type=radio]")?n.is(":checked"):n.val())==!s){if(n.is("input[type=radio]")&&l.filter('input[type=radio]:checked[name="'+n.attr("name")+'"]').length)return!0;o=o.add(n)}}),!!o.length&&o},nonBlankInputs:function(t,e){return i.blankInputs(t,e,!0)},stopEverything:function(e){return t(e.target).trigger("ujs:everythingStopped"),e.stopImmediatePropagation(),!1},disableElement:function(t){var s=t.data("disable-with");t.data("ujs:enable-with",t.html()),s!==e&&t.html(s),t.bind("click.railsDisable",function(t){return i.stopEverything(t)})},enableElement:function(t){t.data("ujs:enable-with")!==e&&(t.html(t.data("ujs:enable-with")),t.removeData("ujs:enable-with")),t.unbind("click.railsDisable")}},i.fire(s,"rails:attachBindings")&&(t.ajaxPrefilter(function(t,e,s){t.crossDomain||i.CSRFProtection(s)}),t(window).on("pageshow.rails",function(){t(t.rails.enableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableFormElement(e)}),t(t.rails.linkDisableSelector).each(function(){var e=t(this);e.data("ujs:enable-with")&&t.rails.enableElement(e)})}),s.delegate(i.linkDisableSelector,"ajax:complete",function(){i.enableElement(t(this))}),s.delegate(i.buttonDisableSelector,"ajax:complete",function(){i.enableFormElement(t(this))}),s.delegate(i.linkClickSelector,"click.rails",function(s){var n=t(this),a=n.data("method"),o=n.data("params"),r=s.metaKey||s.ctrlKey;if(!i.allowAction(n))return i.stopEverything(s);if(!r&&n.is(i.linkDisableSelector)&&i.disableElement(n),n.data("remote")!==e){if(r&&(!a||"GET"===a)&&!o)return!0;var l=i.handleRemote(n);return!1===l?i.enableElement(n):l.fail(function(){i.enableElement(n)}),!1}return a?(i.handleMethod(n),!1):void 0}),s.delegate(i.buttonClickSelector,"click.rails",function(e){var s=t(this);if(!i.allowAction(s))return i.stopEverything(e);s.is(i.buttonDisableSelector)&&i.disableFormElement(s);var n=i.handleRemote(s);return!1===n?i.enableFormElement(s):n.fail(function(){i.enableFormElement(s)}),!1}),s.delegate(i.inputChangeSelector,"change.rails",function(e){var s=t(this);return i.allowAction(s)?(i.handleRemote(s),!1):i.stopEverything(e)}),s.delegate(i.formSubmitSelector,"submit.rails",function(s){var n,a,o=t(this),r=o.data("remote")!==e;if(!i.allowAction(o))return i.stopEverything(s);if(o.attr("novalidate")==e&&(n=i.blankInputs(o,i.requiredInputSelector))&&i.fire(o,"ajax:aborted:required",[n]))return i.stopEverything(s);if(r){if(a=i.nonBlankInputs(o,i.fileInputSelector)){setTimeout(function(){i.disableFormElements(o)},13);var l=i.fire(o,"ajax:aborted:file",[a]);return l||setTimeout(function(){i.enableFormElements(o)},13),l}return i.handleRemote(o),!1}setTimeout(function(){i.disableFormElements(o)},13)}),s.delegate(i.formInputClickSelector,"click.rails",function(e){var s=t(this);if(!i.allowAction(s))return i.stopEverything(e);var n=s.attr("name"),a=n?{name:n,value:s.val()}:null;s.closest("form").data("ujs:submit-button",a)}),s.delegate(i.formSubmitSelector,"ajax:send.rails",function(e){this==e.target&&i.disableFormElements(t(this))}),s.delegate(i.formSubmitSelector,"ajax:complete.rails",function(e){this==e.target&&i.enableFormElements(t(this))}),t(function(){i.refreshCSRFTokens()}))}(jQuery);
//script: card menu
(function(){decko.slotReady(function(o){var n;if(null!=(n=$(o).find(".open-menu.dropdown-toggle")))return $(n).dropdown("toggle")}),$(window).ready(function(){if($("body").on("click",".toolbar .nav-pills > li",function(){return $(this).tab("show")}),decko.isTouchDevice())return $("._show-on-hover").removeClass("_show-on-hover")})}).call(this);
//slick js
!function(i){"use strict";"function"==typeof define&&define.amd?define(["jquery"],i):"undefined"!=typeof exports?module.exports=i(require("jquery")):i(jQuery)}(function(i){"use strict";var e=window.Slick||{};e=function(){function e(e,s){var o,n,l=this;if(l.defaults={accessibility:!0,adaptiveHeight:!1,appendArrows:i(e),appendDots:i(e),arrows:!0,asNavFor:null,prevArrow:'<button type="button" data-role="none" class="slick-prev">Previous</button>',nextArrow:'<button type="button" data-role="none" class="slick-next">Next</button>',autoplay:!1,autoplaySpeed:3e3,centerMode:!1,centerPadding:"50px",cssEase:"ease",customPaging:function(i,e){return'<button type="button" data-role="none">'+(e+1)+"</button>"},dots:!1,dotsClass:"slick-dots",draggable:!0,easing:"linear",fade:!1,focusOnSelect:!1,infinite:!0,initialSlide:0,lazyLoad:"ondemand",onBeforeChange:null,onAfterChange:null,onInit:null,onReInit:null,onSetPosition:null,pauseOnHover:!0,pauseOnDotsHover:!1,respondTo:"window",responsive:null,rtl:!1,slide:"div",slidesToShow:1,slidesToScroll:1,speed:500,swipe:!0,swipeToSlide:!1,touchMove:!0,touchThreshold:5,useCSS:!0,variableWidth:!1,vertical:!1,waitForAnimate:!0},l.initials={animating:!1,dragging:!1,autoPlayTimer:null,currentDirection:0,currentLeft:null,currentSlide:0,direction:1,$dots:null,listWidth:null,listHeight:null,loadIndex:0,$nextArrow:null,$prevArrow:null,slideCount:null,slideWidth:null,$slideTrack:null,$slides:null,sliding:!1,slideOffset:0,swipeLeft:null,$list:null,touchObject:{},transformsEnabled:!1},i.extend(l,l.initials),l.activeBreakpoint=null,l.animType=null,l.animProp=null,l.breakpoints=[],l.breakpointSettings=[],l.cssTransitions=!1,l.paused=!1,l.positionProp=null,l.respondTo=null,l.shouldClick=!0,l.$slider=i(e),l.$slidesCache=null,l.transformType=null,l.transitionType=null,l.windowWidth=0,l.windowTimer=null,l.options=i.extend({},l.defaults,s),l.currentSlide=l.options.initialSlide,l.originalSettings=l.options,(o=l.options.responsive||null)&&o.length>-1){l.respondTo=l.options.respondTo||"window";for(n in o)o.hasOwnProperty(n)&&(l.breakpoints.push(o[n].breakpoint),l.breakpointSettings[o[n].breakpoint]=o[n].settings);l.breakpoints.sort(function(i,e){return e-i})}l.autoPlay=i.proxy(l.autoPlay,l),l.autoPlayClear=i.proxy(l.autoPlayClear,l),l.changeSlide=i.proxy(l.changeSlide,l),l.clickHandler=i.proxy(l.clickHandler,l),l.selectHandler=i.proxy(l.selectHandler,l),l.setPosition=i.proxy(l.setPosition,l),l.swipeHandler=i.proxy(l.swipeHandler,l),l.dragHandler=i.proxy(l.dragHandler,l),l.keyHandler=i.proxy(l.keyHandler,l),l.autoPlayIterator=i.proxy(l.autoPlayIterator,l),l.instanceUid=t++,l.htmlExpr=/^(?:\s*(<[\w\W]+>)[^>]*)$/,l.init(),l.checkResponsive()}var t=0;return e}(),e.prototype.addSlide=function(e,t,s){var o=this;if("boolean"==typeof t)s=t,t=null;else if(t<0||t>=o.slideCount)return!1;o.unload(),"number"==typeof t?0===t&&0===o.$slides.length?i(e).appendTo(o.$slideTrack):s?i(e).insertBefore(o.$slides.eq(t)):i(e).insertAfter(o.$slides.eq(t)):!0===s?i(e).prependTo(o.$slideTrack):i(e).appendTo(o.$slideTrack),o.$slides=o.$slideTrack.children(this.options.slide),o.$slideTrack.children(this.options.slide).detach(),o.$slideTrack.append(o.$slides),o.$slides.each(function(e,t){i(t).attr("index",e)}),o.$slidesCache=o.$slides,o.reinit()},e.prototype.animateSlide=function(e,t){var s={},o=this;if(1===o.options.slidesToShow&&!0===o.options.adaptiveHeight&&!1===o.options.vertical){var n=o.$slides.eq(o.currentSlide).outerHeight(!0);o.$list.animate({height:n},o.options.speed)}!0===o.options.rtl&&!1===o.options.vertical&&(e=-e),!1===o.transformsEnabled?!1===o.options.vertical?o.$slideTrack.animate({left:e},o.options.speed,o.options.easing,t):o.$slideTrack.animate({top:e},o.options.speed,o.options.easing,t):!1===o.cssTransitions?i({animStart:o.currentLeft}).animate({animStart:e},{duration:o.options.speed,easing:o.options.easing,step:function(i){!1===o.options.vertical?(s[o.animType]="translate("+i+"px, 0px)",o.$slideTrack.css(s)):(s[o.animType]="translate(0px,"+i+"px)",o.$slideTrack.css(s))},complete:function(){t&&t.call()}}):(o.applyTransition(),!1===o.options.vertical?s[o.animType]="translate3d("+e+"px, 0px, 0px)":s[o.animType]="translate3d(0px,"+e+"px, 0px)",o.$slideTrack.css(s),t&&setTimeout(function(){o.disableTransition(),t.call()},o.options.speed))},e.prototype.asNavFor=function(e){var t=this,s=null!=t.options.asNavFor?i(t.options.asNavFor).getSlick():null;null!=s&&s.slideHandler(e,!0)},e.prototype.applyTransition=function(i){var e=this,t={};!1===e.options.fade?t[e.transitionType]=e.transformType+" "+e.options.speed+"ms "+e.options.cssEase:t[e.transitionType]="opacity "+e.options.speed+"ms "+e.options.cssEase,!1===e.options.fade?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.autoPlay=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer),i.slideCount>i.options.slidesToShow&&!0!==i.paused&&(i.autoPlayTimer=setInterval(i.autoPlayIterator,i.options.autoplaySpeed))},e.prototype.autoPlayClear=function(){var i=this;i.autoPlayTimer&&clearInterval(i.autoPlayTimer)},e.prototype.autoPlayIterator=function(){var i=this;!1===i.options.infinite?1===i.direction?(i.currentSlide+1===i.slideCount-1&&(i.direction=0),i.slideHandler(i.currentSlide+i.options.slidesToScroll)):(i.currentSlide-1==0&&(i.direction=1),i.slideHandler(i.currentSlide-i.options.slidesToScroll)):i.slideHandler(i.currentSlide+i.options.slidesToScroll)},e.prototype.buildArrows=function(){var e=this;!0===e.options.arrows&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow=i(e.options.prevArrow),e.$nextArrow=i(e.options.nextArrow),e.htmlExpr.test(e.options.prevArrow)&&e.$prevArrow.appendTo(e.options.appendArrows),e.htmlExpr.test(e.options.nextArrow)&&e.$nextArrow.appendTo(e.options.appendArrows),!0!==e.options.infinite&&e.$prevArrow.addClass("slick-disabled"))},e.prototype.buildDots=function(){var e,t,s=this;if(!0===s.options.dots&&s.slideCount>s.options.slidesToShow){for(t='<ul class="'+s.options.dotsClass+'">',e=0;e<=s.getDotCount();e+=1)t+="<li>"+s.options.customPaging.call(this,s,e)+"</li>";t+="</ul>",s.$dots=i(t).appendTo(s.options.appendDots),s.$dots.find("li").first().addClass("slick-active")}},e.prototype.buildOut=function(){var e=this;e.$slides=e.$slider.children(e.options.slide+":not(.slick-cloned)").addClass("slick-slide"),e.slideCount=e.$slides.length,e.$slides.each(function(e,t){i(t).attr("index",e)}),e.$slidesCache=e.$slides,e.$slider.addClass("slick-slider"),e.$slideTrack=0===e.slideCount?i('<div class="slick-track"/>').appendTo(e.$slider):e.$slides.wrapAll('<div class="slick-track"/>').parent(),e.$list=e.$slideTrack.wrap('<div class="slick-list"/>').parent(),e.$slideTrack.css("opacity",0),!0===e.options.centerMode&&(e.options.slidesToScroll=1),i("img[data-lazy]",e.$slider).not("[src]").addClass("slick-loading"),e.setupInfinite(),e.buildArrows(),e.buildDots(),e.updateDots(),!0===e.options.accessibility&&e.$list.prop("tabIndex",0),e.setSlideClasses("number"==typeof this.currentSlide?this.currentSlide:0),!0===e.options.draggable&&e.$list.addClass("draggable")},e.prototype.checkResponsive=function(){var e,t,s,o=this,n=o.$slider.width(),l=window.innerWidth||i(window).width();if("window"===o.respondTo?s=l:"slider"===o.respondTo?s=n:"min"===o.respondTo&&(s=Math.min(l,n)),o.originalSettings.responsive&&o.originalSettings.responsive.length>-1&&null!==o.originalSettings.responsive){t=null;for(e in o.breakpoints)o.breakpoints.hasOwnProperty(e)&&s<o.breakpoints[e]&&(t=o.breakpoints[e]);null!==t?null!==o.activeBreakpoint?t!==o.activeBreakpoint&&(o.activeBreakpoint=t,o.options=i.extend({},o.originalSettings,o.breakpointSettings[t]),o.refresh()):(o.activeBreakpoint=t,o.options=i.extend({},o.originalSettings,o.breakpointSettings[t]),o.refresh()):null!==o.activeBreakpoint&&(o.activeBreakpoint=null,o.options=o.originalSettings,o.refresh())}},e.prototype.changeSlide=function(e,t){var s,o,n,l,r,d=this,a=i(e.target);switch(a.is("a")&&e.preventDefault(),n=d.slideCount%d.options.slidesToScroll!=0,s=n?0:(d.slideCount-d.currentSlide)%d.options.slidesToScroll,e.data.message){case"previous":o=0===s?d.options.slidesToScroll:d.options.slidesToShow-s,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide-o,!1,t);break;case"next":o=0===s?d.options.slidesToScroll:s,d.slideCount>d.options.slidesToShow&&d.slideHandler(d.currentSlide+o,!1,t);break;case"index":var c=0===e.data.index?0:e.data.index||i(e.target).parent().index()*d.options.slidesToScroll;if(l=d.getNavigableIndexes(),r=0,l[c]&&l[c]===c)if(c>l[l.length-1])c=l[l.length-1];else for(var p in l){if(c<l[p]){c=r;break}r=l[p]}d.slideHandler(c,!1,t);default:return}},e.prototype.clickHandler=function(i){!1===this.shouldClick&&(i.stopImmediatePropagation(),i.stopPropagation(),i.preventDefault())},e.prototype.destroy=function(){var e=this;e.autoPlayClear(),e.touchObject={},i(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&"object"!=typeof e.options.prevArrow&&e.$prevArrow.remove(),e.$nextArrow&&"object"!=typeof e.options.nextArrow&&e.$nextArrow.remove(),e.$slides.parent().hasClass("slick-track")&&e.$slides.unwrap().unwrap(),e.$slides.removeClass("slick-slide slick-active slick-center slick-visible").removeAttr("index").css({position:"",left:"",top:"",zIndex:"",opacity:"",width:""}),e.$slider.removeClass("slick-slider"),e.$slider.removeClass("slick-initialized"),e.$list.off(".slick"),i(window).off(".slick-"+e.instanceUid),i(document).off(".slick-"+e.instanceUid)},e.prototype.disableTransition=function(i){var e=this,t={};t[e.transitionType]="",!1===e.options.fade?e.$slideTrack.css(t):e.$slides.eq(i).css(t)},e.prototype.fadeSlide=function(i,e,t){var s=this;!1===s.cssTransitions?(s.$slides.eq(e).css({zIndex:1e3}),s.$slides.eq(e).animate({opacity:1},s.options.speed,s.options.easing,t),s.$slides.eq(i).animate({opacity:0},s.options.speed,s.options.easing)):(s.applyTransition(e),s.applyTransition(i),s.$slides.eq(e).css({opacity:1,zIndex:1e3}),s.$slides.eq(i).css({opacity:0}),t&&setTimeout(function(){s.disableTransition(e),s.disableTransition(i),t.call()},s.options.speed))},e.prototype.filterSlides=function(i){var e=this;null!==i&&(e.unload(),e.$slideTrack.children(this.options.slide).detach(),e.$slidesCache.filter(i).appendTo(e.$slideTrack),e.reinit())},e.prototype.getCurrent=function(){return this.currentSlide},e.prototype.getDotCount=function(){var i=this,e=0,t=0,s=0;if(!0===i.options.infinite)s=Math.ceil(i.slideCount/i.options.slidesToScroll);else for(;e<i.slideCount;)++s,e=t+i.options.slidesToShow,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;return s-1},e.prototype.getLeft=function(i){var e,t,s,o=this,n=0;return o.slideOffset=0,t=o.$slides.first().outerHeight(),!0===o.options.infinite?(o.slideCount>o.options.slidesToShow&&(o.slideOffset=o.slideWidth*o.options.slidesToShow*-1,n=t*o.options.slidesToShow*-1),o.slideCount%o.options.slidesToScroll!=0&&i+o.options.slidesToScroll>o.slideCount&&o.slideCount>o.options.slidesToShow&&(i>o.slideCount?(o.slideOffset=(o.options.slidesToShow-(i-o.slideCount))*o.slideWidth*-1,n=(o.options.slidesToShow-(i-o.slideCount))*t*-1):(o.slideOffset=o.slideCount%o.options.slidesToScroll*o.slideWidth*-1,n=o.slideCount%o.options.slidesToScroll*t*-1))):i+o.options.slidesToShow>o.slideCount&&(o.slideOffset=(i+o.options.slidesToShow-o.slideCount)*o.slideWidth,n=(i+o.options.slidesToShow-o.slideCount)*t),o.slideCount<=o.options.slidesToShow&&(o.slideOffset=0,n=0),!0===o.options.centerMode&&!0===o.options.infinite?o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)-o.slideWidth:!0===o.options.centerMode&&(o.slideOffset=0,o.slideOffset+=o.slideWidth*Math.floor(o.options.slidesToShow/2)),e=!1===o.options.vertical?i*o.slideWidth*-1+o.slideOffset:i*t*-1+n,!0===o.options.variableWidth&&(s=o.slideCount<=o.options.slidesToShow||!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(i):o.$slideTrack.children(".slick-slide").eq(i+o.options.slidesToShow),e=s[0]?-1*s[0].offsetLeft:0,!0===o.options.centerMode&&(s=!1===o.options.infinite?o.$slideTrack.children(".slick-slide").eq(i):o.$slideTrack.children(".slick-slide").eq(i+o.options.slidesToShow+1),e=s[0]?-1*s[0].offsetLeft:0,e+=(o.$list.width()-s.outerWidth())/2)),e},e.prototype.getNavigableIndexes=function(){for(var i=this,e=0,t=0,s=[];e<i.slideCount;)s.push(e),e=t+i.options.slidesToScroll,t+=i.options.slidesToScroll<=i.options.slidesToShow?i.options.slidesToScroll:i.options.slidesToShow;return s},e.prototype.getSlideCount=function(){var e=this;if(!0===e.options.swipeToSlide){var t=null;return e.$slideTrack.find(".slick-slide").each(function(s,o){if(o.offsetLeft+i(o).outerWidth()/2>-1*e.swipeLeft)return t=o,!1}),Math.abs(i(t).attr("index")-e.currentSlide)}return e.options.slidesToScroll},e.prototype.init=function(){var e=this;i(e.$slider).hasClass("slick-initialized")||(i(e.$slider).addClass("slick-initialized"),e.buildOut(),e.setProps(),e.startLoad(),e.loadSlider(),e.initializeEvents(),e.updateArrows(),e.updateDots()),null!==e.options.onInit&&e.options.onInit.call(this,e)},e.prototype.initArrowEvents=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.on("click.slick",{message:"previous"},i.changeSlide),i.$nextArrow.on("click.slick",{message:"next"},i.changeSlide))},e.prototype.initDotEvents=function(){var e=this;!0===e.options.dots&&e.slideCount>e.options.slidesToShow&&i("li",e.$dots).on("click.slick",{message:"index"},e.changeSlide),!0===e.options.dots&&!0===e.options.pauseOnDotsHover&&!0===e.options.autoplay&&i("li",e.$dots).on("mouseenter.slick",function(){e.paused=!0,e.autoPlayClear()}).on("mouseleave.slick",function(){e.paused=!1,e.autoPlay()})},e.prototype.initializeEvents=function(){var e=this;e.initArrowEvents(),e.initDotEvents(),e.$list.on("touchstart.slick mousedown.slick",{action:"start"},e.swipeHandler),e.$list.on("touchmove.slick mousemove.slick",{action:"move"},e.swipeHandler),e.$list.on("touchend.slick mouseup.slick",{action:"end"},e.swipeHandler),e.$list.on("touchcancel.slick mouseleave.slick",{action:"end"},e.swipeHandler),e.$list.on("click.slick",e.clickHandler),!0===e.options.pauseOnHover&&!0===e.options.autoplay&&(e.$list.on("mouseenter.slick",function(){e.paused=!0,e.autoPlayClear()}),e.$list.on("mouseleave.slick",function(){e.paused=!1,e.autoPlay()})),!0===e.options.accessibility&&e.$list.on("keydown.slick",e.keyHandler),!0===e.options.focusOnSelect&&i(e.options.slide,e.$slideTrack).on("click.slick",e.selectHandler),i(window).on("orientationchange.slick.slick-"+e.instanceUid,function(){e.checkResponsive(),e.setPosition()}),i(window).on("resize.slick.slick-"+e.instanceUid,function(){i(window).width()!==e.windowWidth&&(clearTimeout(e.windowDelay),e.windowDelay=window.setTimeout(function(){e.windowWidth=i(window).width(),e.checkResponsive(),e.setPosition()},50))}),i("*[draggable!=true]",e.$slideTrack).on("dragstart",function(i){i.preventDefault()}),i(window).on("load.slick.slick-"+e.instanceUid,e.setPosition),i(document).on("ready.slick.slick-"+e.instanceUid,e.setPosition)},e.prototype.initUI=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.show(),i.$nextArrow.show()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.show(),!0===i.options.autoplay&&i.autoPlay()},e.prototype.keyHandler=function(i){var e=this;37===i.keyCode&&!0===e.options.accessibility?e.changeSlide({data:{message:"previous"}}):39===i.keyCode&&!0===e.options.accessibility&&e.changeSlide({data:{message:"next"}})},e.prototype.lazyLoad=function(){function e(e){i("img[data-lazy]",e).each(function(){var e=i(this),t=i(this).attr("data-lazy");e.load(function(){e.animate({opacity:1},200)}).css({opacity:0}).attr("src",t).removeAttr("data-lazy").removeClass("slick-loading")})}var t,s,o,n,l=this;!0===l.options.centerMode?!0===l.options.infinite?(o=l.currentSlide+(l.options.slidesToShow/2+1),n=o+l.options.slidesToShow+2):(o=Math.max(0,l.currentSlide-(l.options.slidesToShow/2+1)),n=l.options.slidesToShow/2+1+2+l.currentSlide):(o=l.options.infinite?l.options.slidesToShow+l.currentSlide:l.currentSlide,n=o+l.options.slidesToShow,!0===l.options.fade&&(o>0&&o--,n<=l.slideCount&&n++)),t=l.$slider.find(".slick-slide").slice(o,n),e(t),l.slideCount<=l.options.slidesToShow?(s=l.$slider.find(".slick-slide"),e(s)):l.currentSlide>=l.slideCount-l.options.slidesToShow?(s=l.$slider.find(".slick-cloned").slice(0,l.options.slidesToShow),e(s)):0===l.currentSlide&&(s=l.$slider.find(".slick-cloned").slice(-1*l.options.slidesToShow),e(s))},e.prototype.loadSlider=function(){var i=this;i.setPosition(),i.$slideTrack.css({opacity:1}),i.$slider.removeClass("slick-loading"),i.initUI(),"progressive"===i.options.lazyLoad&&i.progressiveLazyLoad()},e.prototype.postSlide=function(i){var e=this;null!==e.options.onAfterChange&&e.options.onAfterChange.call(this,e,i),e.animating=!1,e.setPosition(),e.swipeLeft=null,!0===e.options.autoplay&&!1===e.paused&&e.autoPlay()},e.prototype.progressiveLazyLoad=function(){var e,t,s=this;(e=i("img[data-lazy]",s.$slider).length)>0&&(t=i("img[data-lazy]",s.$slider).first(),t.attr("src",t.attr("data-lazy")).removeClass("slick-loading").load(function(){t.removeAttr("data-lazy"),s.progressiveLazyLoad()}).error(function(){t.removeAttr("data-lazy"),s.progressiveLazyLoad()}))},e.prototype.refresh=function(){var e=this,t=e.currentSlide;e.destroy(),i.extend(e,e.initials),e.init(),e.changeSlide({data:{message:"index",index:t}},!0)},e.prototype.reinit=function(){var e=this;e.$slides=e.$slideTrack.children(e.options.slide).addClass("slick-slide"),e.slideCount=e.$slides.length,e.currentSlide>=e.slideCount&&0!==e.currentSlide&&(e.currentSlide=e.currentSlide-e.options.slidesToScroll),e.slideCount<=e.options.slidesToShow&&(e.currentSlide=0),e.setProps(),e.setupInfinite(),e.buildArrows(),e.updateArrows(),e.initArrowEvents(),e.buildDots(),e.updateDots(),e.initDotEvents(),!0===e.options.focusOnSelect&&i(e.options.slide,e.$slideTrack).on("click.slick",e.selectHandler),e.setSlideClasses(0),e.setPosition(),null!==e.options.onReInit&&e.options.onReInit.call(this,e)},e.prototype.removeSlide=function(i,e,t){var s=this;if("boolean"==typeof i?(e=i,i=!0===e?0:s.slideCount-1):i=!0===e?--i:i,s.slideCount<1||i<0||i>s.slideCount-1)return!1;s.unload(),!0===t?s.$slideTrack.children().remove():s.$slideTrack.children(this.options.slide).eq(i).remove(),s.$slides=s.$slideTrack.children(this.options.slide),s.$slideTrack.children(this.options.slide).detach(),s.$slideTrack.append(s.$slides),s.$slidesCache=s.$slides,s.reinit()},e.prototype.setCSS=function(i){var e,t,s=this,o={};!0===s.options.rtl&&(i=-i),e="left"==s.positionProp?i+"px":"0px",t="top"==s.positionProp?i+"px":"0px",o[s.positionProp]=i,!1===s.transformsEnabled?s.$slideTrack.css(o):(o={},!1===s.cssTransitions?(o[s.animType]="translate("+e+", "+t+")",s.$slideTrack.css(o)):(o[s.animType]="translate3d("+e+", "+t+", 0px)",s.$slideTrack.css(o)))},e.prototype.setDimensions=function(){var e=this;if(!1===e.options.vertical?!0===e.options.centerMode&&e.$list.css({padding:"0px "+e.options.centerPadding}):(e.$list.height(e.$slides.first().outerHeight(!0)*e.options.slidesToShow),!0===e.options.centerMode&&e.$list.css({padding:e.options.centerPadding+" 0px"})),e.listWidth=e.$list.width(),e.listHeight=e.$list.height(),!1===e.options.vertical&&!1===e.options.variableWidth)e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.width(Math.ceil(e.slideWidth*e.$slideTrack.children(".slick-slide").length));else if(!0===e.options.variableWidth){var t=0;e.slideWidth=Math.ceil(e.listWidth/e.options.slidesToShow),e.$slideTrack.children(".slick-slide").each(function(){t+=Math.ceil(i(this).outerWidth(!0))}),e.$slideTrack.width(Math.ceil(t)+1)}else e.slideWidth=Math.ceil(e.listWidth),e.$slideTrack.height(Math.ceil(e.$slides.first().outerHeight(!0)*e.$slideTrack.children(".slick-slide").length));var s=e.$slides.first().outerWidth(!0)-e.$slides.first().width();!1===e.options.variableWidth&&e.$slideTrack.children(".slick-slide").width(e.slideWidth-s)},e.prototype.setFade=function(){var e,t=this;t.$slides.each(function(s,o){e=t.slideWidth*s*-1,!0===t.options.rtl?i(o).css({position:"relative",right:e,top:0,zIndex:800,opacity:0}):i(o).css({position:"relative",left:e,top:0,zIndex:800,opacity:0})}),t.$slides.eq(t.currentSlide).css({zIndex:900,opacity:1})},e.prototype.setHeight=function(){var i=this;if(1===i.options.slidesToShow&&!0===i.options.adaptiveHeight&&!1===i.options.vertical){var e=i.$slides.eq(i.currentSlide).outerHeight(!0);i.$list.css("height",e)}},e.prototype.setPosition=function(){var i=this;i.setDimensions(),i.setHeight(),!1===i.options.fade?i.setCSS(i.getLeft(i.currentSlide)):i.setFade(),null!==i.options.onSetPosition&&i.options.onSetPosition.call(this,i)},e.prototype.setProps=function(){var i=this,e=document.body.style;i.positionProp=!0===i.options.vertical?"top":"left","top"===i.positionProp?i.$slider.addClass("slick-vertical"):i.$slider.removeClass("slick-vertical"),e.WebkitTransition===undefined&&e.MozTransition===undefined&&e.msTransition===undefined||!0===i.options.useCSS&&(i.cssTransitions=!0),e.OTransform!==undefined&&(i.animType="OTransform",i.transformType="-o-transform",i.transitionType="OTransition",e.perspectiveProperty===undefined&&e.webkitPerspective===undefined&&(i.animType=!1)),e.MozTransform!==undefined&&(i.animType="MozTransform",i.transformType="-moz-transform",i.transitionType="MozTransition",e.perspectiveProperty===undefined&&e.MozPerspective===undefined&&(i.animType=!1)),e.webkitTransform!==undefined&&(i.animType="webkitTransform",i.transformType="-webkit-transform",i.transitionType="webkitTransition",e.perspectiveProperty===undefined&&e.webkitPerspective===undefined&&(i.animType=!1)),e.msTransform!==undefined&&(i.animType="msTransform",i.transformType="-ms-transform",i.transitionType="msTransition",e.msTransform===undefined&&(i.animType=!1)),e.transform!==undefined&&!1!==i.animType&&(i.animType="transform",i.transformType="transform",i.transitionType="transition"),i.transformsEnabled=null!==i.animType&&!1!==i.animType},e.prototype.setSlideClasses=function(i){var e,t,s,o,n=this;n.$slider.find(".slick-slide").removeClass("slick-active").removeClass("slick-center"),t=n.$slider.find(".slick-slide"),!0===n.options.centerMode?(e=Math.floor(n.options.slidesToShow/2),!0===n.options.infinite&&(i>=e&&i<=n.slideCount-1-e?n.$slides.slice(i-e,i+e+1).addClass("slick-active"):(s=n.options.slidesToShow+i,t.slice(s-e+1,s+e+2).addClass("slick-active")),0===i?t.eq(t.length-1-n.options.slidesToShow).addClass("slick-center"):i===n.slideCount-1&&t.eq(n.options.slidesToShow).addClass("slick-center")),n.$slides.eq(i).addClass("slick-center")):i>=0&&i<=n.slideCount-n.options.slidesToShow?n.$slides.slice(i,i+n.options.slidesToShow).addClass("slick-active"):t.length<=n.options.slidesToShow?t.addClass("slick-active"):(o=n.slideCount%n.options.slidesToShow,s=!0===n.options.infinite?n.options.slidesToShow+i:i,n.options.slidesToShow==n.options.slidesToScroll&&n.slideCount-i<n.options.slidesToShow?t.slice(s-(n.options.slidesToShow-o),s+o).addClass("slick-active"):t.slice(s,s+n.options.slidesToShow).addClass("slick-active")),"ondemand"===n.options.lazyLoad&&n.lazyLoad()},e.prototype.setupInfinite=function(){var e,t,s,o=this;if(!0===o.options.fade&&(o.options.centerMode=!1),!0===o.options.infinite&&!1===o.options.fade&&(t=null,o.slideCount>o.options.slidesToShow)){for(s=!0===o.options.centerMode?o.options.slidesToShow+1:o.options.slidesToShow,e=o.slideCount;e>o.slideCount-s;e-=1)t=e-1,i(o.$slides[t]).clone(!0).attr("id","").attr("index",t-o.slideCount).prependTo(o.$slideTrack).addClass("slick-cloned");for(e=0;e<s;e+=1)t=e,i(o.$slides[t]).clone(!0).attr("id","").attr("index",t+o.slideCount).appendTo(o.$slideTrack).addClass("slick-cloned");o.$slideTrack.find(".slick-cloned").find("[id]").each(function(){i(this).attr("id","")})}},e.prototype.selectHandler=function(e){var t=this,s=parseInt(i(e.target).parents(".slick-slide").attr("index"));if(s||(s=0),t.slideCount<=t.options.slidesToShow)return t.$slider.find(".slick-slide").removeClass("slick-active"),t.$slides.eq(s).addClass("slick-active"),!0===t.options.centerMode&&(t.$slider.find(".slick-slide").removeClass("slick-center"),t.$slides.eq(s).addClass("slick-center")),void t.asNavFor(s);t.slideHandler(s)},e.prototype.slideHandler=function(i,e,t){var s,o,n,l,r=null,d=this;if(e=e||!1,(!0!==d.animating||!0!==d.options.waitForAnimate)&&!(!0===d.options.fade&&d.currentSlide===i||d.slideCount<=d.options.slidesToShow)){if(!1===e&&d.asNavFor(i),s=i,r=d.getLeft(s),l=d.getLeft(d.currentSlide),d.currentLeft=null===d.swipeLeft?l:d.swipeLeft,!1===d.options.infinite&&!1===d.options.centerMode&&(i<0||i>d.getDotCount()*d.options.slidesToScroll))return void(!1===d.options.fade&&(s=d.currentSlide,!0!==t?d.animateSlide(l,function(){d.postSlide(s)}):d.postSlide(s)));if(!1===d.options.infinite&&!0===d.options.centerMode&&(i<0||i>d.slideCount-d.options.slidesToScroll))return void(!1===d.options.fade&&(s=d.currentSlide,!0!==t?d.animateSlide(l,function(){d.postSlide(s)}):d.postSlide(s)));if(!0===d.options.autoplay&&clearInterval(d.autoPlayTimer),o=s<0?d.slideCount%d.options.slidesToScroll!=0?d.slideCount-d.slideCount%d.options.slidesToScroll:d.slideCount+s:s>=d.slideCount?d.slideCount%d.options.slidesToScroll!=0?0:s-d.slideCount:s,d.animating=!0,null!==d.options.onBeforeChange&&i!==d.currentSlide&&d.options.onBeforeChange.call(this,d,d.currentSlide,o),n=d.currentSlide,d.currentSlide=o,d.setSlideClasses(d.currentSlide),d.updateDots(),d.updateArrows(),!0===d.options.fade)return void(!0!==t?d.fadeSlide(n,o,function(){d.postSlide(o)}):d.postSlide(o));!0!==t?d.animateSlide(r,function(){d.postSlide(o)}):d.postSlide(o)}},e.prototype.startLoad=function(){var i=this;!0===i.options.arrows&&i.slideCount>i.options.slidesToShow&&(i.$prevArrow.hide(),i.$nextArrow.hide()),!0===i.options.dots&&i.slideCount>i.options.slidesToShow&&i.$dots.hide(),i.$slider.addClass("slick-loading")},e.prototype.swipeDirection=function(){var i,e,t,s,o=this;return i=o.touchObject.startX-o.touchObject.curX,e=o.touchObject.startY-o.touchObject.curY,t=Math.atan2(e,i),s=Math.round(180*t/Math.PI),s<0&&(s=360-Math.abs(s)),s<=45&&s>=0?!1===o.options.rtl?"left":"right":s<=360&&s>=315?!1===o.options.rtl?"left":"right":s>=135&&s<=225?!1===o.options.rtl?"right":"left":"vertical"},e.prototype.swipeEnd=function(){var i=this;if(i.dragging=!1,i.shouldClick=!(i.touchObject.swipeLength>10),i.touchObject.curX===undefined)return!1;if(i.touchObject.swipeLength>=i.touchObject.minSwipe)switch(i.swipeDirection()){case"left":i.slideHandler(i.currentSlide+i.getSlideCount()),i.currentDirection=0,i.touchObject={};break;case"right":i.slideHandler(i.currentSlide-i.getSlideCount()),i.currentDirection=1,i.touchObject={}}else i.touchObject.startX!==i.touchObject.curX&&(i.slideHandler(i.currentSlide),i.touchObject={})},e.prototype.swipeHandler=function(i){var e=this;if(!(!1===e.options.swipe||"ontouchend"in document&&!1===e.options.swipe||!1===e.options.draggable&&-1!==i.type.indexOf("mouse")))switch(e.touchObject.fingerCount=i.originalEvent&&i.originalEvent.touches!==undefined?i.originalEvent.touches.length:1,e.touchObject.minSwipe=e.listWidth/e.options.touchThreshold,i.data.action){case"start":e.swipeStart(i);break;case"move":e.swipeMove(i);break;case"end":e.swipeEnd(i)}},e.prototype.swipeMove=function(i){var e,t,s,o=this;return s=i.originalEvent!==undefined?i.originalEvent.touches:null,!(!o.dragging||s&&1!==s.length)&&(e=o.getLeft(o.currentSlide),o.touchObject.curX=s!==undefined?s[0].pageX:i.clientX,o.touchObject.curY=s!==undefined?s[0].pageY:i.clientY,o.touchObject.swipeLength=Math.round(Math.sqrt(Math.pow(o.touchObject.curX-o.touchObject.startX,2))),"vertical"!==o.swipeDirection()?(i.originalEvent!==undefined&&o.touchObject.swipeLength>4&&i.preventDefault(),t=(!1===o.options.rtl?1:-1)*(o.touchObject.curX>o.touchObject.startX?1:-1),!1===o.options.vertical?o.swipeLeft=e+o.touchObject.swipeLength*t:o.swipeLeft=e+o.touchObject.swipeLength*(o.$list.height()/o.listWidth)*t,!0!==o.options.fade&&!1!==o.options.touchMove&&(!0===o.animating?(o.swipeLeft=null,!1):void o.setCSS(o.swipeLeft))):void 0)},e.prototype.swipeStart=function(i){var e,t=this;if(1!==t.touchObject.fingerCount||t.slideCount<=t.options.slidesToShow)return t.touchObject={},!1;i.originalEvent!==undefined&&i.originalEvent.touches!==undefined&&(e=i.originalEvent.touches[0]),t.touchObject.startX=t.touchObject.curX=e!==undefined?e.pageX:i.clientX,t.touchObject.startY=t.touchObject.curY=e!==undefined?e.pageY:i.clientY,t.dragging=!0},e.prototype.unfilterSlides=function(){var i=this;null!==i.$slidesCache&&(i.unload(),i.$slideTrack.children(this.options.slide).detach(),i.$slidesCache.appendTo(i.$slideTrack),i.reinit())},e.prototype.unload=function(){var e=this;i(".slick-cloned",e.$slider).remove(),e.$dots&&e.$dots.remove(),e.$prevArrow&&"object"!=typeof e.options.prevArrow&&e.$prevArrow.remove(),e.$nextArrow&&"object"!=typeof e.options.nextArrow&&e.$nextArrow.remove(),e.$slides.removeClass("slick-slide slick-active slick-visible").css("width","")},e.prototype.updateArrows=function(){var i,e=this;i=Math.floor(e.options.slidesToShow/2),!0===e.options.arrows&&!0!==e.options.infinite&&e.slideCount>e.options.slidesToShow&&(e.$prevArrow.removeClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled"),0===e.currentSlide?(e.$prevArrow.addClass("slick-disabled"),e.$nextArrow.removeClass("slick-disabled")):e.currentSlide>=e.slideCount-e.options.slidesToShow&&!1===e.options.centerMode?(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")):e.currentSlide>e.slideCount-e.options.slidesToShow+i&&!0===e.options.centerMode&&(e.$nextArrow.addClass("slick-disabled"),e.$prevArrow.removeClass("slick-disabled")))},e.prototype.updateDots=function(){var i=this;null!==i.$dots&&(i.$dots.find("li").removeClass("slick-active"),i.$dots.find("li").eq(Math.floor(i.currentSlide/i.options.slidesToScroll)).addClass("slick-active"))},i.fn.slick=function(i){return this.each(function(t,s){s.slick=new e(s,i)})},i.fn.slickAdd=function(i,e,t){return this.each(function(s,o){o.slick.addSlide(i,e,t)})},i.fn.slickCurrentSlide=function(){return this.get(0).slick.getCurrent()},i.fn.slickFilter=function(i){return this.each(function(e,t){t.slick.filterSlides(i)})},i.fn.slickGoTo=function(i,e){return this.each(function(t,s){s.slick.changeSlide({data:{message:"index",index:parseInt(i)}},e)})},i.fn.slickNext=function(){return this.each(function(i,e){e.slick.changeSlide({data:{message:"next"}})})},i.fn.slickPause=function(){return this.each(function(i,e){e.slick.autoPlayClear(),e.slick.paused=!0})},i.fn.slickPlay=function(){return this.each(function(i,e){e.slick.paused=!1,e.slick.autoPlay()})},i.fn.slickPrev=function(){return this.each(function(i,e){e.slick.changeSlide({data:{message:"previous"}})})},i.fn.slickRemove=function(i,e){return this.each(function(t,s){s.slick.removeSlide(i,e)})},i.fn.slickRemoveAll=function(){return this.each(function(i,e){e.slick.removeSlide(null,null,!0)})},i.fn.slickGetOption=function(i){return this.get(0).slick.options[i]},i.fn.slickSetOption=function(i,e,t){return this.each(function(s,o){o.slick.options[i]=e,!0===t&&(o.slick.unload(),o.slick.reinit())})},i.fn.slickUnfilter=function(){return this.each(function(i,e){e.slick.unfilterSlides()})},i.fn.unslick=function(){return this.each(function(i,e){e.slick&&e.slick.destroy()})},i.fn.getSlick=function(){var i=null;return this.each(function(e,t){i=t.slick}),i}});
//slick nav js
/*!
    SlickNav Responsive Mobile Menu v1.0.1
    (c) 2014 Josh Cope
    licensed under MIT
*/
!function(e,n){function t(n,t){this.element=n,this.settings=e.extend({},a,t),this._defaults=a,this._name=i,this.init()}var a={label:"MENU",duplicate:!0,duration:200,easingOpen:"swing",easingClose:"swing",closedSymbol:"&#9658;",openedSymbol:"&#9660;",prependTo:"body",parentTag:"a",closeOnClick:!1,allowParentLinks:!1,nestedParentLinks:!0,showChildren:!1,init:function(){},open:function(){},close:function(){}},i="slicknav",s="slicknav";t.prototype.init=function(){var t,a,i=this,l=e(this.element),o=this.settings;o.duplicate?(i.mobileNav=l.clone(),i.mobileNav.removeAttr("id"),i.mobileNav.find("*").each(function(n,t){e(t).removeAttr("id")})):i.mobileNav=l,t=s+"_icon",""===o.label&&(t+=" "+s+"_no-text"),"a"==o.parentTag&&(o.parentTag='a href="#"'),i.mobileNav.attr("class",s+"_nav"),a=e('<div class="'+s+'_menu"></div>'),i.btn=e(["<"+o.parentTag+' aria-haspopup="true" tabindex="0" class="'+s+"_btn "+s+'_collapsed">','<span class="'+s+'_menutxt">'+o.label+"</span>",'<span class="'+t+'">','<span class="'+s+'_icon-bar"></span>','<span class="'+s+'_icon-bar"></span>','<span class="'+s+'_icon-bar"></span>',"</span>","</"+o.parentTag+">"].join("")),e(a).append(i.btn),e(o.prependTo).prepend(a),a.append(i.mobileNav);var r=i.mobileNav.find("li");e(r).each(function(){var n=e(this),t={};if(t.children=n.children("ul").attr("role","menu"),n.data("menu",t),t.children.length>0){var a=n.contents(),l=!1;nodes=[],e(a).each(function(){if(e(this).is("ul"))return!1;nodes.push(this),e(this).is("a")&&(l=!0)});var r=e("<"+o.parentTag+' role="menuitem" aria-haspopup="true" tabindex="-1" class="'+s+'_item"/>');if(o.allowParentLinks&&!o.nestedParentLinks&&l)e(nodes).wrapAll('<span class="'+s+"_parent-link "+s+'_row"/>').parent();else{e(nodes).wrapAll(r).parent().addClass(s+"_row")}n.addClass(s+"_collapsed"),n.addClass(s+"_parent");var c=e('<span class="'+s+'_arrow">'+o.closedSymbol+"</span>");o.allowParentLinks&&!o.nestedParentLinks&&l&&(c=c.wrap(r).parent()),e(nodes).last().after(c)}else 0===n.children().length&&n.addClass(s+"_txtnode");n.children("a").attr("role","menuitem").click(function(n){o.closeOnClick&&!e(n.target).parent().closest("li").hasClass(s+"_parent")&&e(i.btn).click()}),o.closeOnClick&&o.allowParentLinks&&(n.children("a").children("a").click(function(){e(i.btn).click()}),n.find("."+s+"_parent-link a:not(."+s+"_item)").click(function(){e(i.btn).click()}))}),e(r).each(function(){var n=e(this).data("menu");o.showChildren||i._visibilityToggle(n.children,null,!1,null,!0)}),i._visibilityToggle(i.mobileNav,null,!1,"init",!0),i.mobileNav.attr("role","menu"),e(n).mousedown(function(){i._outlines(!1)}),e(n).keyup(function(){i._outlines(!0)}),e(i.btn).click(function(e){e.preventDefault(),i._menuToggle()}),i.mobileNav.on("click","."+s+"_item",function(n){n.preventDefault(),i._itemClick(e(this))}),e(i.btn).keydown(function(e){13==(e||event).keyCode&&(e.preventDefault(),i._menuToggle())}),i.mobileNav.on("keydown","."+s+"_item",function(n){13==(n||event).keyCode&&(n.preventDefault(),i._itemClick(e(n.target)))}),o.allowParentLinks&&o.nestedParentLinks&&e("."+s+"_item a").click(function(e){e.stopImmediatePropagation()})},t.prototype._menuToggle=function(){var e=this,n=e.btn,t=e.mobileNav;n.hasClass(s+"_collapsed")?(n.removeClass(s+"_collapsed"),n.addClass(s+"_open")):(n.removeClass(s+"_open"),n.addClass(s+"_collapsed")),n.addClass(s+"_animating"),e._visibilityToggle(t,n.parent(),!0,n)},t.prototype._itemClick=function(e){var n=this,t=n.settings,a=e.data("menu");a||(a={},a.arrow=e.children("."+s+"_arrow"),a.ul=e.next("ul"),a.parent=e.parent(),a.parent.hasClass(s+"_parent-link")&&(a.parent=e.parent().parent(),a.ul=e.parent().next("ul")),e.data("menu",a)),a.parent.hasClass(s+"_collapsed")?(a.arrow.html(t.openedSymbol),a.parent.removeClass(s+"_collapsed"),a.parent.addClass(s+"_open"),a.parent.addClass(s+"_animating"),n._visibilityToggle(a.ul,a.parent,!0,e)):(a.arrow.html(t.closedSymbol),a.parent.addClass(s+"_collapsed"),a.parent.removeClass(s+"_open"),a.parent.addClass(s+"_animating"),n._visibilityToggle(a.ul,a.parent,!0,e))},t.prototype._visibilityToggle=function(n,t,a,i,l){var o=this,r=o.settings,c=o._getActionItems(n),d=0;a&&(d=r.duration),n.hasClass(s+"_hidden")?(n.removeClass(s+"_hidden"),n.slideDown(d,r.easingOpen,function(){e(i).removeClass(s+"_animating"),e(t).removeClass(s+"_animating"),l||r.open(i)}),n.attr("aria-hidden","false"),c.attr("tabindex","0"),o._setVisAttr(n,!1)):(n.addClass(s+"_hidden"),n.slideUp(d,this.settings.easingClose,function(){n.attr("aria-hidden","true"),c.attr("tabindex","-1"),o._setVisAttr(n,!0),n.hide(),e(i).removeClass(s+"_animating"),e(t).removeClass(s+"_animating"),l?"init"==i&&r.init():r.close(i)}))},t.prototype._setVisAttr=function(n,t){var a=this,i=n.children("li").children("ul").not("."+s+"_hidden");t?i.each(function(){var n=e(this);n.attr("aria-hidden","true"),a._getActionItems(n).attr("tabindex","-1"),a._setVisAttr(n,t)}):i.each(function(){var n=e(this);n.attr("aria-hidden","false"),a._getActionItems(n).attr("tabindex","0"),a._setVisAttr(n,t)})},t.prototype._getActionItems=function(e){var n=e.data("menu");if(!n){n={};var t=e.children("li"),a=t.find("a");n.links=a.add(t.find("."+s+"_item")),e.data("menu",n)}return n.links},t.prototype._outlines=function(n){n?e("."+s+"_item, ."+s+"_btn").css("outline",""):e("."+s+"_item, ."+s+"_btn").css("outline","none")},t.prototype.toggle=function(){this._menuToggle()},t.prototype.open=function(){var e=this;e.btn.hasClass(s+"_collapsed")&&e._menuToggle()},t.prototype.close=function(){var e=this;e.btn.hasClass(s+"_open")&&e._menuToggle()},e.fn[i]=function(n){var a=arguments;if(n===undefined||"object"==typeof n)return this.each(function(){e.data(this,"plugin_"+i)||e.data(this,"plugin_"+i,new t(this,n))});if("string"==typeof n&&"_"!==n[0]&&"init"!==n){var s;return this.each(function(){var l=e.data(this,"plugin_"+i);l instanceof t&&"function"==typeof l[n]&&(s=l[n].apply(l,Array.prototype.slice.call(a,1)))}),s!==undefined?s:this}}}(jQuery,document,window);
//chosen proto script
/*!
Chosen, a Select Box Enhancer for jQuery and Prototype
by Patrick Filler for Harvest, http://getharvest.com

Version 1.1.0
Full source at https://github.com/harvesthq/chosen
Copyright (c) 2011 Harvest http://getharvest.com

MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
This file is generated by `grunt build`, do not edit it by hand.
*/
(function(){var e,t,s,i={}.hasOwnProperty,r=function(e,t){function s(){this.constructor=e}for(var r in t)i.call(t,r)&&(e[r]=t[r]);return s.prototype=t.prototype,e.prototype=new s,e.__super__=t.prototype,e};t=function(){function e(){this.options_index=0,this.parsed=[]}return e.prototype.add_node=function(e){return"OPTGROUP"===e.nodeName.toUpperCase()?this.add_group(e):this.add_option(e)},e.prototype.add_group=function(e){var t,s,i,r,o,l;for(t=this.parsed.length,this.parsed.push({array_index:t,group:!0,label:this.escapeExpression(e.label),children:0,disabled:e.disabled}),o=e.childNodes,l=[],i=0,r=o.length;i<r;i++)s=o[i],l.push(this.add_option(s,t,e.disabled));return l},e.prototype.add_option=function(e,t,s){if("OPTION"===e.nodeName.toUpperCase())return""!==e.text?(null!=t&&(this.parsed[t].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:e.value,text:e.text,html:e.innerHTML,selected:e.selected,disabled:!0===s?s:e.disabled,group_array_index:t,classes:e.className,style:e.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},e.prototype.escapeExpression=function(e){var t,s;return null==e||!1===e?"":/[\&\<\>\"\'\`]/.test(e)?(t={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[\<\>\"\'\`]/g,e.replace(s,function(e){return t[e]||"&amp;"})):e},e}(),t.select_to_array=function(e){var s,i,r,o,l;for(i=new t,l=e.childNodes,r=0,o=l.length;r<o;r++)s=l[r],i.add_node(s);return i.parsed},e=function(){function e(t,s){this.form_field=t,this.options=null!=s?s:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return e.prototype.set_default_values=function(){var e=this;return this.click_test_action=function(t){return e.test_active_click(t)},this.activate_action=function(t){return e.activate_field(t)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var e=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return e.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var e=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return e.blur_test()},100)},e.prototype.results_option_build=function(e){var t,s,i,r,o;for(t="",o=this.results_data,i=0,r=o.length;i<r;i++)s=o[i],s.group?t+=this.result_add_group(s):t+=this.result_add_option(s),(null!=e?e.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(s.text));return t},e.prototype.result_add_option=function(e){var t,s;return e.search_match&&this.include_option_in_results(e)?(t=[],e.disabled||e.selected&&this.is_multiple||t.push("active-result"),!e.disabled||e.selected&&this.is_multiple||t.push("disabled-result"),e.selected&&t.push("result-selected"),null!=e.group_array_index&&t.push("group-option"),""!==e.classes&&t.push(e.classes),s=document.createElement("li"),s.className=t.join(" "),s.style.cssText=e.style,s.setAttribute("data-option-array-index",e.array_index),s.innerHTML=e.search_text,this.outerHTML(s)):""},e.prototype.result_add_group=function(e){var t;return(e.search_match||e.group_match)&&e.active_options>0?(t=document.createElement("li"),t.className="group-result",t.innerHTML=e.search_text,this.outerHTML(t)):""},e.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},e.prototype.reset_single_select_options=function(){var e,t,s,i,r;for(i=this.results_data,r=[],t=0,s=i.length;t<s;t++)e=i[t],e.selected?r.push(e.selected=!1):r.push(void 0);return r},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var e,t,s,i,r,o,l,n,h,a,c,_,u;for(this.no_results_clear(),r=0,l=this.get_search_text(),e=l.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=this.search_contains?"":"^",s=new RegExp(i+e,"i"),a=new RegExp(e,"i"),u=this.results_data,c=0,_=u.length;c<_;c++)t=u[c],t.search_match=!1,o=null,this.include_option_in_results(t)&&(t.group&&(t.group_match=!1,t.active_options=0),null!=t.group_array_index&&this.results_data[t.group_array_index]&&(o=this.results_data[t.group_array_index],0===o.active_options&&o.search_match&&(r+=1),o.active_options+=1),t.group&&!this.group_search||(t.search_text=t.group?t.label:t.html,t.search_match=this.search_string_match(t.search_text,s),t.search_match&&!t.group&&(r+=1),t.search_match?(l.length&&(n=t.search_text.search(a),h=t.search_text.substr(0,n+l.length)+"</em>"+t.search_text.substr(n+l.length),t.search_text=h.substr(0,n)+"<em>"+h.substr(n)),null!=o&&(o.group_match=!0)):null!=t.group_array_index&&this.results_data[t.group_array_index].search_match&&(t.search_match=!0)));return this.result_clear_highlight(),r<1&&l.length?(this.update_results_content(""),this.no_results(l)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.search_string_match=function(e,t){var s,i,r,o;if(t.test(e))return!0;if(this.enable_split_word_search&&(e.indexOf(" ")>=0||0===e.indexOf("["))&&(i=e.replace(/\[|\]/g,"").split(" "),i.length))for(r=0,o=i.length;r<o;r++)if(s=i[r],t.test(s))return!0},e.prototype.choices_count=function(){var e,t,s,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,t=0,s=i.length;t<s;t++)e=i[t],e.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(e){if(e.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},e.prototype.keyup_checker=function(e){var t,s;switch(t=null!=(s=e.which)?s:e.keyCode,this.search_field_scale(),t){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return this.result_select(e);break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:return this.results_search()}},e.prototype.clipboard_event_checker=function(){var e=this;return setTimeout(function(){return e.results_search()},50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(e){return!(this.is_multiple&&!this.display_selected_options&&e.selected)&&(!(!this.display_disabled_options&&e.disabled)&&!e.empty)},e.prototype.search_results_touchstart=function(e){return this.touch_started=!0,this.search_results_mouseover(e)},e.prototype.search_results_touchmove=function(e){return this.touch_started=!1,this.search_results_mouseout(e)},e.prototype.search_results_touchend=function(e){if(this.touch_started)return this.search_results_mouseup(e)},e.prototype.outerHTML=function(e){var t;return e.outerHTML?e.outerHTML:(t=document.createElement("div"),t.appendChild(e),t.innerHTML)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),this.Chosen=function(e){function i(){return s=i.__super__.constructor.apply(this,arguments)}return r(i,e),i.prototype.setup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field.hasClassName("chosen-rtl")},i.prototype.set_default_values=function(){return i.__super__.set_default_values.call(this),this.single_temp=new Template('<a class="chosen-single chosen-default" tabindex="-1"><span>#{default}</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.multi_temp=new Template('<ul class="chosen-choices"><li class="search-field"><input type="text" value="#{default}" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'),this.no_results_temp=new Template('<li class="no-results">'+this.results_none_found+' "<span>#{terms}</span>"</li>')},i.prototype.set_up_html=function(){var e,t;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),t={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(t.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=this.is_multiple?new Element("div",t).update(this.multi_temp.evaluate({"default":this.default_text})):new Element("div",t).update(this.single_temp.evaluate({"default":this.default_text})),this.form_field.hide().insert({after:this.container}),this.dropdown=this.container.down("div.chosen-drop"),this.search_field=this.container.down("input"),this.search_results=this.container.down("ul.chosen-results"),this.search_field_scale(),this.search_no_results=this.container.down("li.no-results"),this.is_multiple?(this.search_choices=this.container.down("ul.chosen-choices"),this.search_container=this.container.down("li.search-field")):(this.search_container=this.container.down("div.chosen-search"),this.selected_item=this.container.down(".chosen-single")),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field.fire("chosen:ready",{chosen:this})},i.prototype.register_observers=function(){var e=this;return this.container.observe("mousedown",function(t){return e.container_mousedown(t)}),this.container.observe("mouseup",function(t){return e.container_mouseup(t)}),this.container.observe("mouseenter",function(t){return e.mouse_enter(t)}),this.container.observe("mouseleave",function(t){return e.mouse_leave(t)}),this.search_results.observe("mouseup",function(t){return e.search_results_mouseup(t)}),this.search_results.observe("mouseover",function(t){return e.search_results_mouseover(t)}),this.search_results.observe("mouseout",function(t){return e.search_results_mouseout(t)}),this.search_results.observe("mousewheel",function(t){return e.search_results_mousewheel(t)}),this.search_results.observe("DOMMouseScroll",function(t){return e.search_results_mousewheel(t)}),this.search_results.observe("touchstart",function(t){return e.search_results_touchstart(t)}),this.search_results.observe("touchmove",function(t){return e.search_results_touchmove(t)}),this.search_results.observe("touchend",function(t){return e.search_results_touchend(t)}),this.form_field.observe("chosen:updated",function(t){return e.results_update_field(t)}),this.form_field.observe("chosen:activate",function(t){return e.activate_field(t)}),this.form_field.observe("chosen:open",function(t){return e.container_mousedown(t)}),this.form_field.observe("chosen:close",function(t){return e.input_blur(t)}),this.search_field.observe("blur",function(t){return e.input_blur(t)}),this.search_field.observe("keyup",function(t){return e.keyup_checker(t)}),this.search_field.observe("keydown",function(t){return e.keydown_checker(t)}),this.search_field.observe("focus",function(t){return e.input_focus(t)}),this.search_field.observe("cut",function(t){return e.clipboard_event_checker(t)}),this.search_field.observe("paste",function(t){return e.clipboard_event_checker(t)}),this.is_multiple?this.search_choices.observe("click",function(t){return e.choices_click(t)}):this.container.observe("click",function(e){return e.preventDefault()})},i.prototype.destroy=function(){return this.container.ownerDocument.stopObserving("click",this.click_test_action),this.form_field.stopObserving(),this.container.stopObserving(),this.search_results.stopObserving(),this.search_field.stopObserving(),null!=this.form_field_label&&this.form_field_label.stopObserving(),this.is_multiple?(this.search_choices.stopObserving(),this.container.select(".search-choice-close").each(function(e){return e.stopObserving()})):this.selected_item.stopObserving(),this.search_field.tabIndex&&(this.form_field.tabIndex=this.search_field.tabIndex),this.container.remove(),this.form_field.show()},i.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field.disabled,this.is_disabled?(this.container.addClassName("chosen-disabled"),this.search_field.disabled=!0,this.is_multiple||this.selected_item.stopObserving("focus",this.activate_action),this.close_field()):(this.container.removeClassName("chosen-disabled"),this.search_field.disabled=!1,this.is_multiple?void 0:this.selected_item.observe("focus",this.activate_action))},i.prototype.container_mousedown=function(e){if(!this.is_disabled&&(e&&"mousedown"===e.type&&!this.results_showing&&e.stop(),null==e||!e.target.hasClassName("search-choice-close")))return this.active_field?this.is_multiple||!e||e.target!==this.selected_item&&!e.target.up("a.chosen-single")||this.results_toggle():(this.is_multiple&&this.search_field.clear(),this.container.ownerDocument.observe("click",this.click_test_action),this.results_show()),this.activate_field()},i.prototype.container_mouseup=function(e){if("ABBR"===e.target.nodeName&&!this.is_disabled)return this.results_reset(e)},i.prototype.search_results_mousewheel=function(e){var t;if(null!=(t=-e.wheelDelta||e.detail))return e.preventDefault(),"DOMMouseScroll"===e.type&&(t*=40),this.search_results.scrollTop=t+this.search_results.scrollTop},i.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClassName("chosen-container-active"))return this.close_field()},i.prototype.close_field=function(){return this.container.ownerDocument.stopObserving("click",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClassName("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},i.prototype.activate_field=function(){return this.container.addClassName("chosen-container-active"),this.active_field=!0,this.search_field.value=this.search_field.value,this.search_field.focus()},i.prototype.test_active_click=function(e){return e.target.up(".chosen-container")===this.container?this.active_field=!0:this.close_field()},i.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=t.select_to_array(this.form_field),this.is_multiple?this.search_choices.select("li.search-choice").invoke("remove"):this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field.readOnly=!0,this.container.addClassName("chosen-container-single-nosearch")):(this.search_field.readOnly=!1,this.container.removeClassName("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},i.prototype.result_do_highlight=function(e){var t,s,i,r,o;return this.result_clear_highlight(),this.result_highlight=e,this.result_highlight.addClassName("highlighted"),i=parseInt(this.search_results.getStyle("maxHeight"),10),o=this.search_results.scrollTop,r=i+o,s=this.result_highlight.positionedOffset().top,t=s+this.result_highlight.getHeight(),t>=r?this.search_results.scrollTop=t-i>0?t-i:0:s<o?this.search_results.scrollTop=s:void 0},i.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClassName("highlighted"),this.result_highlight=null},i.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field.fire("chosen:maxselected",{chosen:this}),!1):(this.container.addClassName("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.value=this.search_field.value,this.winnow_results(),this.form_field.fire("chosen:showing_dropdown",{chosen:this}))},i.prototype.update_results_content=function(e){return this.search_results.update(e)},i.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClassName("chosen-with-drop"),this.form_field.fire("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},i.prototype.set_tab_index=function(){var e;if(this.form_field.tabIndex)return e=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field.tabIndex=e},i.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field.up("label"),null==this.form_field_label&&(this.form_field_label=$$("label[for='"+this.form_field.id+"']").first()),null!=this.form_field_label)return this.form_field_label.observe("click",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},i.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.value=this.default_text,this.search_field.addClassName("default")):(this.search_field.value="",this.search_field.removeClassName("default"))},i.prototype.search_results_mouseup=function(e){var t;if(t=e.target.hasClassName("active-result")?e.target:e.target.up(".active-result"))return this.result_highlight=t,this.result_select(e),this.search_field.focus()},i.prototype.search_results_mouseover=function(e){var t;if(t=e.target.hasClassName("active-result")?e.target:e.target.up(".active-result"))return this.result_do_highlight(t)},i.prototype.search_results_mouseout=function(e){if(e.target.hasClassName("active-result")||e.target.up(".active-result"))return this.result_clear_highlight()},i.prototype.choice_build=function(e){var t,s,i=this;return t=new Element("li",{"class":"search-choice"}).update("<span>"+e.html+"</span>"),e.disabled?t.addClassName("search-choice-disabled"):(s=new Element("a",{href:"#","class":"search-choice-close",rel:e.array_index}),s.observe("click",function(e){return i.choice_destroy_link_click(e)}),t.insert(s)),this.search_container.insert({before:t})},i.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(e.target)},i.prototype.choice_destroy=function(e){if(this.result_deselect(e.readAttribute("rel")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.value.length<1&&this.results_hide(),e.up("li").remove(),this.search_field_scale()},i.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),"function"==typeof Event.simulate&&this.form_field.simulate("change"),this.active_field)return this.results_hide()},i.prototype.results_reset_cleanup=function(){var e;if(this.current_selectedIndex=this.form_field.selectedIndex,e=this.selected_item.down("abbr"))return e.remove()},i.prototype.result_select=function(e){var t,s;if(this.result_highlight)return t=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field.fire("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?t.removeClassName("active-result"):this.reset_single_select_options(),t.addClassName("result-selected"),s=this.results_data[t.getAttribute("data-option-array-index")],s.selected=!0,this.form_field.options[s.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(s):this.single_set_selected_text(s.text),(e.metaKey||e.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.value="","function"!=typeof Event.simulate||!this.is_multiple&&this.form_field.selectedIndex===this.current_selectedIndex||this.form_field.simulate("change"),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},i.prototype.single_set_selected_text=function(e){return null==e&&(e=this.default_text),e===this.default_text?this.selected_item.addClassName("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClassName("chosen-default")),this.selected_item.down("span").update(e)},i.prototype.result_deselect=function(e){var t;return t=this.results_data[e],!this.form_field.options[t.options_index].disabled&&(t.selected=!1,this.form_field.options[t.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),"function"==typeof Event.simulate&&this.form_field.simulate("change"),this.search_field_scale(),!0)},i.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.down("abbr")||this.selected_item.down("span").insert({after:'<abbr class="search-choice-close"></abbr>'}),this.selected_item.addClassName("chosen-single-with-deselect")},i.prototype.get_search_text=function(){return this.search_field.value===this.default_text?"":this.search_field.value.strip().escapeHTML()},i.prototype.winnow_results_set_highlight=function(){var e;if(this.is_multiple||(e=this.search_results.down(".result-selected.active-result")),null==e&&(e=this.search_results.down(".active-result")),null!=e)return this.result_do_highlight(e)},i.prototype.no_results=function(e){return this.search_results.insert(this.no_results_temp.evaluate({terms:e})),this.form_field.fire("chosen:no_results",{chosen:this})},i.prototype.no_results_clear=function(){var e,t;for(e=null,t=[];e=this.search_results.down(".no-results");)t.push(e.remove());return t},i.prototype.keydown_arrow=function(){var e;return this.results_showing&&this.result_highlight?(e=this.result_highlight.next(".active-result"))?this.result_do_highlight(e):void 0:this.results_show()},i.prototype.keyup_arrow=function(){var e,t,s;return this.results_showing||this.is_multiple?this.result_highlight?(s=this.result_highlight.previousSiblings(),e=this.search_results.select("li.active-result"),t=s.intersect(e),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},i.prototype.keydown_backstroke=function(){var e;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.down("a")),this.clear_backstroke()):(e=this.search_container.siblings().last())&&e.hasClassName("search-choice")&&!e.hasClassName("search-choice-disabled")?(this.pending_backstroke=e,this.pending_backstroke&&this.pending_backstroke.addClassName("search-choice-focus"),this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClassName("search-choice-focus")):void 0},i.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClassName("search-choice-focus"),this.pending_backstroke=null},i.prototype.keydown_checker=function(e){var t,s;switch(t=null!=(s=e.which)?s:e.keyCode,this.search_field_scale(),8!==t&&this.pending_backstroke&&this.clear_backstroke(),t){case 8:this.backstroke_length=this.search_field.value.length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(e),this.mouse_on_container=!1;break;case 13:e.preventDefault();break;case 38:e.preventDefault(),this.keyup_arrow();break;case 40:e.preventDefault(),this.keydown_arrow()}},i.prototype.search_field_scale=function(){var e,t,s,i,r,o,l,n;if(this.is_multiple){for(0,o=0,i="position:absolute; left: -1000px; top: -1000px; display:none;",r=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],l=0,n=r.length;l<n;l++)s=r[l],i+=s+":"+this.search_field.getStyle(s)+";";return e=new Element("div",{style:i}).update(this.search_field.value.escapeHTML()),document.body.appendChild(e),o=Element.measure(e,"width")+25,e.remove(),t=this.container.getWidth(),o>t-10&&(o=t-10),this.search_field.setStyle({width:o+"px"})}},i}(e)}).call(this);
//chosen script
/*!

### this is amended for adding new options when not found ###
Chosen, a Select Box Enhancer for jQuery and Prototype
by Patrick Filler for Harvest, http://getharvest.com

Version 1.1.0
Full source at https://github.com/harvesthq/chosen
Copyright (c) 2011 Harvest http://getharvest.com

MIT License, https://github.com/harvesthq/chosen/blob/master/LICENSE.md
This file is generated by `grunt build`, do not edit it by hand.
*/
(function(){var t,e,s,i,r,o={}.hasOwnProperty,n=function(t,e){function s(){this.constructor=t}for(var i in e)o.call(e,i)&&(t[i]=e[i]);return s.prototype=e.prototype,t.prototype=new s,t.__super__=e.prototype,t};i=function(){function t(){this.options_index=0,this.parsed=[]}return t.prototype.add_node=function(t){return"OPTGROUP"===t.nodeName.toUpperCase()?this.add_group(t):this.add_option(t)},t.prototype.add_group=function(t){var e,s,i,r,o,n;for(e=this.parsed.length,this.parsed.push({array_index:e,group:!0,label:this.escapeExpression(t.label),children:0,disabled:t.disabled}),o=t.childNodes,n=[],i=0,r=o.length;i<r;i++)s=o[i],n.push(this.add_option(s,e,t.disabled));return n},t.prototype.add_option=function(t,e,s){if("OPTION"===t.nodeName.toUpperCase())return""!==t.text?(null!=e&&(this.parsed[e].children+=1),this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,value:t.value,text:t.text,html:t.innerHTML,selected:t.selected,disabled:!0===s?s:t.disabled,group_array_index:e,classes:t.className,style:t.style.cssText})):this.parsed.push({array_index:this.parsed.length,options_index:this.options_index,empty:!0}),this.options_index+=1},t.prototype.escapeExpression=function(t){var e,s;return null==t||!1===t?"":/[\&\<\>\"\'\`]/.test(t)?(e={"<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#x27;","`":"&#x60;"},s=/&(?!\w+;)|[\<\>\"\'\`]/g,t.replace(s,function(t){return e[t]||"&amp;"})):t},t}(),i.select_to_array=function(t){var e,s,r,o,n;for(s=new i,n=t.childNodes,r=0,o=n.length;r<o;r++)e=n[r],s.add_node(e);return s.parsed},e=function(){function e(t,s){this.form_field=t,this.options=null!=s?s:{},e.browser_is_supported()&&(this.is_multiple=this.form_field.multiple,this.set_default_text(),this.set_default_values(),this.setup(),this.set_up_html(),this.register_observers())}return e.prototype.set_default_values=function(){var t=this;return this.click_test_action=function(e){return t.test_active_click(e)},this.activate_action=function(e){return t.activate_field(e)},this.active_field=!1,this.mouse_on_container=!1,this.results_showing=!1,this.result_highlighted=null,this.allow_single_deselect=null!=this.options.allow_single_deselect&&null!=this.form_field.options[0]&&""===this.form_field.options[0].text&&this.options.allow_single_deselect,this.disable_search_threshold=this.options.disable_search_threshold||0,this.disable_search=this.options.disable_search||!1,this.enable_split_word_search=null==this.options.enable_split_word_search||this.options.enable_split_word_search,this.group_search=null==this.options.group_search||this.options.group_search,this.search_contains=this.options.search_contains||!1,this.single_backstroke_delete=null==this.options.single_backstroke_delete||this.options.single_backstroke_delete,this.max_selected_options=this.options.max_selected_options||Infinity,this.inherit_select_classes=this.options.inherit_select_classes||!1,this.display_selected_options=null==this.options.display_selected_options||this.options.display_selected_options,this.display_disabled_options=null==this.options.display_disabled_options||this.options.display_disabled_options},e.prototype.set_default_text=function(){return this.form_field.getAttribute("data-placeholder")?this.default_text=this.form_field.getAttribute("data-placeholder"):this.is_multiple?this.default_text=this.options.placeholder_text_multiple||this.options.placeholder_text||e.default_multiple_text:this.default_text=this.options.placeholder_text_single||this.options.placeholder_text||e.default_single_text,this.results_none_found=this.form_field.getAttribute("data-no_results_text")||this.options.no_results_text||e.default_no_result_text},e.prototype.mouse_enter=function(){return this.mouse_on_container=!0},e.prototype.mouse_leave=function(){return this.mouse_on_container=!1},e.prototype.input_focus=function(){var t=this;if(this.is_multiple){if(!this.active_field)return setTimeout(function(){return t.container_mousedown()},50)}else if(!this.active_field)return this.activate_field()},e.prototype.input_blur=function(){var t=this;if(!this.mouse_on_container)return this.active_field=!1,setTimeout(function(){return t.blur_test()},100)},e.prototype.results_option_build=function(t){var e,s,i,r,o;for(e="",o=this.results_data,i=0,r=o.length;i<r;i++)s=o[i],s.group?e+=this.result_add_group(s):e+=this.result_add_option(s),(null!=t?t.first:void 0)&&(s.selected&&this.is_multiple?this.choice_build(s):s.selected&&!this.is_multiple&&this.single_set_selected_text(s.text));return e},e.prototype.result_add_option=function(t){var e,s;return t.search_match&&this.include_option_in_results(t)?(e=[],t.disabled||t.selected&&this.is_multiple||e.push("active-result"),!t.disabled||t.selected&&this.is_multiple||e.push("disabled-result"),t.selected&&e.push("result-selected"),null!=t.group_array_index&&e.push("group-option"),""!==t.classes&&e.push(t.classes),s=document.createElement("li"),s.className=e.join(" "),s.style.cssText=t.style,s.setAttribute("data-option-array-index",t.array_index),s.innerHTML=t.search_text,this.outerHTML(s)):""},e.prototype.result_add_group=function(t){var e;return(t.search_match||t.group_match)&&t.active_options>0?(e=document.createElement("li"),e.className="group-result",e.innerHTML=t.search_text,this.outerHTML(e)):""},e.prototype.results_update_field=function(){if(this.set_default_text(),this.is_multiple||this.results_reset_cleanup(),this.result_clear_highlight(),this.results_build(),this.results_showing)return this.winnow_results()},e.prototype.reset_single_select_options=function(){var t,e,s,i,r;for(i=this.results_data,r=[],e=0,s=i.length;e<s;e++)t=i[e],t.selected?r.push(t.selected=!1):r.push(void 0);return r},e.prototype.results_toggle=function(){return this.results_showing?this.results_hide():this.results_show()},e.prototype.results_search=function(){return this.results_showing?this.winnow_results():this.results_show()},e.prototype.winnow_results=function(){var t,e,s,i,r,o,n,h,l,c,a,_,u;for(this.no_results_clear(),r=0,n=this.get_search_text(),t=n.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&"),i=this.search_contains?"":"^",s=new RegExp(i+t,"i"),c=new RegExp(t,"i"),u=this.results_data,a=0,_=u.length;a<_;a++)e=u[a],e.search_match=!1,o=null,this.include_option_in_results(e)&&(e.group&&(e.group_match=!1,e.active_options=0),null!=e.group_array_index&&this.results_data[e.group_array_index]&&(o=this.results_data[e.group_array_index],0===o.active_options&&o.search_match&&(r+=1),o.active_options+=1),e.group&&!this.group_search||(e.search_text=e.group?e.label:e.html,e.search_match=this.search_string_match(e.search_text,s),e.search_match&&!e.group&&(r+=1),e.search_match?(n.length&&(h=e.search_text.search(c),l=e.search_text.substr(0,h+n.length)+"</em>"+e.search_text.substr(h+n.length),e.search_text=l.substr(0,h)+"<em>"+l.substr(h)),null!=o&&(o.group_match=!0)):null!=e.group_array_index&&this.results_data[e.group_array_index].search_match&&(e.search_match=!0)));return this.result_clear_highlight(),r<1&&n.length?(this.update_results_content(""),this.no_results(n)):(this.update_results_content(this.results_option_build()),this.winnow_results_set_highlight())},e.prototype.search_string_match=function(t,e){var s,i,r,o;if(e.test(t))return!0;if(this.enable_split_word_search&&(t.indexOf(" ")>=0||0===t.indexOf("["))&&(i=t.replace(/\[|\]/g,"").split(" "),i.length))for(r=0,o=i.length;r<o;r++)if(s=i[r],e.test(s))return!0},e.prototype.choices_count=function(){var t,e,s,i;if(null!=this.selected_option_count)return this.selected_option_count;for(this.selected_option_count=0,i=this.form_field.options,e=0,s=i.length;e<s;e++)t=i[e],t.selected&&(this.selected_option_count+=1);return this.selected_option_count},e.prototype.choices_click=function(t){if(t.preventDefault(),!this.results_showing&&!this.is_disabled)return this.results_show()},e.prototype.keyup_checker=function(e){var s,i;switch(s=null!=(i=e.which)?i:e.keyCode,this.search_field_scale(),s){case 8:if(this.is_multiple&&this.backstroke_length<1&&this.choices_count()>0)return this.keydown_backstroke();if(!this.pending_backstroke)return this.result_clear_highlight(),this.results_search();break;case 13:if(e.preventDefault(),this.results_showing)return!this.is_multiple||this.result_highlight?this.result_select(e):(t(this.form_field).append("<option>"+t(e.target).val()+"</option>"),t(this.form_field).trigger("chosen:updated"),this.result_highlight=this.search_results.find("li.active-result").last(),this.result_select(e));break;case 27:return this.results_showing&&this.results_hide(),!0;case 9:case 38:case 40:case 16:case 91:case 17:break;default:var r=this.results_search();return this.result_clear_highlight(),r}},e.prototype.clipboard_event_checker=function(){var t=this;return setTimeout(function(){return t.results_search()},50)},e.prototype.container_width=function(){return null!=this.options.width?this.options.width:this.form_field.offsetWidth+"px"},e.prototype.include_option_in_results=function(t){return!(this.is_multiple&&!this.display_selected_options&&t.selected)&&(!(!this.display_disabled_options&&t.disabled)&&!t.empty)},e.prototype.search_results_touchstart=function(t){return this.touch_started=!0,this.search_results_mouseover(t)},e.prototype.search_results_touchmove=function(t){return this.touch_started=!1,this.search_results_mouseout(t)},e.prototype.search_results_touchend=function(t){if(this.touch_started)return this.search_results_mouseup(t)},e.prototype.outerHTML=function(t){var e;return t.outerHTML?t.outerHTML:(e=document.createElement("div"),e.appendChild(t),e.innerHTML)},e.browser_is_supported=function(){return"Microsoft Internet Explorer"===window.navigator.appName?document.documentMode>=8:!/iP(od|hone)/i.test(window.navigator.userAgent)&&(!/Android/i.test(window.navigator.userAgent)||!/Mobile/i.test(window.navigator.userAgent))},e.default_multiple_text="Select Some Options",e.default_single_text="Select an Option",e.default_no_result_text="No results match",e}(),t=jQuery,t.fn.extend({chosen:function(i){return e.browser_is_supported()?this.each(function(){var e,r;e=t(this),r=e.data("chosen"),"destroy"===i&&r?r.destroy():r||e.data("chosen",new s(this,i))}):this}}),s=function(e){function s(){return r=s.__super__.constructor.apply(this,arguments)}return n(s,e),s.prototype.setup=function(){return this.form_field_jq=t(this.form_field),this.current_selectedIndex=this.form_field.selectedIndex,this.is_rtl=this.form_field_jq.hasClass("chosen-rtl")},s.prototype.set_up_html=function(){var e,s;return e=["chosen-container"],e.push("chosen-container-"+(this.is_multiple?"multi":"single")),this.inherit_select_classes&&this.form_field.className&&e.push(this.form_field.className),this.is_rtl&&e.push("chosen-rtl"),s={"class":e.join(" "),style:"width: "+this.container_width()+";",title:this.form_field.title},this.form_field.id.length&&(s.id=this.form_field.id.replace(/[^\w]/g,"_")+"_chosen"),this.container=t("<div />",s),this.is_multiple?this.container.html('<ul class="chosen-choices"><li class="search-field"><input type="text" value="'+this.default_text+'" class="default" autocomplete="off" style="width:25px;" /></li></ul><div class="chosen-drop"><ul class="chosen-results"></ul></div>'):this.container.html('<a class="chosen-single chosen-default" tabindex="-1"><span>'+this.default_text+'</span><div><b></b></div></a><div class="chosen-drop"><div class="chosen-search"><input type="text" autocomplete="off" /></div><ul class="chosen-results"></ul></div>'),this.form_field_jq.hide().after(this.container),this.dropdown=this.container.find("div.chosen-drop").first(),this.search_field=this.container.find("input").first(),this.search_results=this.container.find("ul.chosen-results").first(),this.search_field_scale(),this.search_no_results=this.container.find("li.no-results").first(),this.is_multiple?(this.search_choices=this.container.find("ul.chosen-choices").first(),this.search_container=this.container.find("li.search-field").first()):(this.search_container=this.container.find("div.chosen-search").first(),this.selected_item=this.container.find(".chosen-single").first()),this.results_build(),this.set_tab_index(),this.set_label_behavior(),this.form_field_jq.trigger("chosen:ready",{chosen:this})},s.prototype.register_observers=function(){var t=this;return this.container.bind("mousedown.chosen",function(e){t.container_mousedown(e)}),this.container.bind("mouseup.chosen",function(e){t.container_mouseup(e)}),this.container.bind("mouseenter.chosen",function(e){t.mouse_enter(e)}),this.container.bind("mouseleave.chosen",function(e){t.mouse_leave(e)}),this.search_results.bind("mouseup.chosen",function(e){t.search_results_mouseup(e)}),this.search_results.bind("mouseover.chosen",function(e){t.search_results_mouseover(e)}),this.search_results.bind("mouseout.chosen",function(e){t.search_results_mouseout(e)}),this.search_results.bind("mousewheel.chosen DOMMouseScroll.chosen",function(e){t.search_results_mousewheel(e)}),this.search_results.bind("touchstart.chosen",function(e){t.search_results_touchstart(e)}),this.search_results.bind("touchmove.chosen",function(e){t.search_results_touchmove(e)}),this.search_results.bind("touchend.chosen",function(e){t.search_results_touchend(e)}),this.form_field_jq.bind("chosen:updated.chosen",function(e){t.results_update_field(e)}),this.form_field_jq.bind("chosen:activate.chosen",function(e){t.activate_field(e)}),this.form_field_jq.bind("chosen:open.chosen",function(e){t.container_mousedown(e)}),this.form_field_jq.bind("chosen:close.chosen",function(e){t.input_blur(e)}),this.search_field.bind("blur.chosen",function(e){t.input_blur(e)}),this.search_field.bind("keyup.chosen",function(e){t.keyup_checker(e)}),this.search_field.bind("keydown.chosen",function(e){t.keydown_checker(e)}),this.search_field.bind("focus.chosen",function(e){t.input_focus(e)}),this.search_field.bind("cut.chosen",function(e){t.clipboard_event_checker(e)}),this.search_field.bind("paste.chosen",function(e){t.clipboard_event_checker(e)}),this.is_multiple?this.search_choices.bind("click.chosen",function(e){t.choices_click(e)}):this.container.bind("click.chosen",function(t){t.preventDefault()})},s.prototype.destroy=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.search_field[0].tabIndex&&(this.form_field_jq[0].tabIndex=this.search_field[0].tabIndex),this.container.remove(),this.form_field_jq.removeData("chosen"),this.form_field_jq.show()},s.prototype.search_field_disabled=function(){return this.is_disabled=this.form_field_jq[0].disabled,this.is_disabled?(this.container.addClass("chosen-disabled"),this.search_field[0].disabled=!0,this.is_multiple||this.selected_item.unbind("focus.chosen",this.activate_action),this.close_field()):(this.container.removeClass("chosen-disabled"),this.search_field[0].disabled=!1,this.is_multiple?void 0:this.selected_item.bind("focus.chosen",this.activate_action))},s.prototype.container_mousedown=function(e){if(!this.is_disabled&&(e&&"mousedown"===e.type&&!this.results_showing&&e.preventDefault(),null==e||!t(e.target).hasClass("search-choice-close")))return this.active_field?this.is_multiple||!e||t(e.target)[0]!==this.selected_item[0]&&!t(e.target).parents("a.chosen-single").length||(e.preventDefault(),this.results_toggle()):(this.is_multiple&&this.search_field.val(""),t(this.container[0].ownerDocument).bind("click.chosen",this.click_test_action),this.results_show()),this.activate_field()},s.prototype.container_mouseup=function(t){if("ABBR"===t.target.nodeName&&!this.is_disabled)return this.results_reset(t)},s.prototype.search_results_mousewheel=function(t){var e;if(t.originalEvent&&(e=-t.originalEvent.wheelDelta||t.originalEvent.detail),null!=e)return t.preventDefault(),"DOMMouseScroll"===t.type&&(e*=40),this.search_results.scrollTop(e+this.search_results.scrollTop())},s.prototype.blur_test=function(){if(!this.active_field&&this.container.hasClass("chosen-container-active"))return this.close_field()},s.prototype.close_field=function(){return t(this.container[0].ownerDocument).unbind("click.chosen",this.click_test_action),this.active_field=!1,this.results_hide(),this.container.removeClass("chosen-container-active"),this.clear_backstroke(),this.show_search_field_default(),this.search_field_scale()},s.prototype.activate_field=function(){return this.container.addClass("chosen-container-active"),this.active_field=!0,this.search_field.val(this.search_field.val()),this.search_field.focus()},s.prototype.test_active_click=function(e){var s;return s=t(e.target).closest(".chosen-container"),s.length&&this.container[0]===s[0]?this.active_field=!0:this.close_field()},s.prototype.results_build=function(){return this.parsing=!0,this.selected_option_count=null,this.results_data=i.select_to_array(this.form_field),this.is_multiple?this.search_choices.find("li.search-choice").remove():this.is_multiple||(this.single_set_selected_text(),this.disable_search||this.form_field.options.length<=this.disable_search_threshold?(this.search_field[0].readOnly=!0,this.container.addClass("chosen-container-single-nosearch")):(this.search_field[0].readOnly=!1,this.container.removeClass("chosen-container-single-nosearch"))),this.update_results_content(this.results_option_build({first:!0})),this.search_field_disabled(),this.show_search_field_default(),this.search_field_scale(),this.parsing=!1},s.prototype.result_do_highlight=function(t){var e,s,i,r,o;if(t.length){if(this.result_clear_highlight(),this.result_highlight=t,this.result_highlight.addClass("highlighted"),i=parseInt(this.search_results.css("maxHeight"),10),o=this.search_results.scrollTop(),r=i+o,s=this.result_highlight.position().top+this.search_results.scrollTop(),(e=s+this.result_highlight.outerHeight())>=r)return this.search_results.scrollTop(e-i>0?e-i:0);if(s<o)return this.search_results.scrollTop(s)}},s.prototype.result_clear_highlight=function(){return this.result_highlight&&this.result_highlight.removeClass("highlighted"),this.result_highlight=null},s.prototype.results_show=function(){return this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.container.addClass("chosen-with-drop"),this.results_showing=!0,this.search_field.focus(),this.search_field.val(this.search_field.val()),this.winnow_results(),this.form_field_jq.trigger("chosen:showing_dropdown",{chosen:this}))},s.prototype.update_results_content=function(t){return this.search_results.html(t)},s.prototype.results_hide=function(){return this.results_showing&&(this.result_clear_highlight(),this.container.removeClass("chosen-with-drop"),this.form_field_jq.trigger("chosen:hiding_dropdown",{chosen:this})),this.results_showing=!1},s.prototype.set_tab_index=function(){var t;if(this.form_field.tabIndex)return t=this.form_field.tabIndex,this.form_field.tabIndex=-1,this.search_field[0].tabIndex=t},s.prototype.set_label_behavior=function(){var e=this;if(this.form_field_label=this.form_field_jq.parents("label"),!this.form_field_label.length&&this.form_field.id.length&&(this.form_field_label=t("label[for='"+this.form_field.id+"']")),this.form_field_label.length>0)return this.form_field_label.bind("click.chosen",function(t){return e.is_multiple?e.container_mousedown(t):e.activate_field()})},s.prototype.show_search_field_default=function(){return this.is_multiple&&this.choices_count()<1&&!this.active_field?(this.search_field.val(this.default_text),this.search_field.addClass("default")):(this.search_field.val(""),this.search_field.removeClass("default"))},s.prototype.search_results_mouseup=function(e){var s;if(s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first(),s.length)return this.result_highlight=s,this.result_select(e),this.search_field.focus()},s.prototype.search_results_mouseover=function(e){var s;if(s=t(e.target).hasClass("active-result")?t(e.target):t(e.target).parents(".active-result").first())return this.result_do_highlight(s)},s.prototype.search_results_mouseout=function(e){if(t(e.target).hasClass("active-result"))return this.result_clear_highlight()},s.prototype.choice_build=function(e){var s,i,r=this;return s=t("<li />",{"class":"search-choice"}).html("<span>"+e.html+"</span>"),e.disabled?s.addClass("search-choice-disabled"):(i=t("<a />",{"class":"search-choice-close","data-option-array-index":e.array_index}),i.bind("click.chosen",function(t){return r.choice_destroy_link_click(t)}),s.append(i)),this.search_container.before(s)},s.prototype.choice_destroy_link_click=function(e){if(e.preventDefault(),e.stopPropagation(),!this.is_disabled)return this.choice_destroy(t(e.target))},s.prototype.choice_destroy=function(t){if(this.result_deselect(t[0].getAttribute("data-option-array-index")))return this.show_search_field_default(),this.is_multiple&&this.choices_count()>0&&this.search_field.val().length<1&&this.results_hide(),t.parents("li").first().remove(),this.search_field_scale()},s.prototype.results_reset=function(){if(this.reset_single_select_options(),this.form_field.options[0].selected=!0,this.single_set_selected_text(),this.show_search_field_default(),this.results_reset_cleanup(),this.form_field_jq.trigger("change"),this.active_field)return this.results_hide()},s.prototype.results_reset_cleanup=function(){return this.current_selectedIndex=this.form_field.selectedIndex,this.selected_item.find("abbr").remove()},s.prototype.result_select=function(t){var e,s;if(this.result_highlight)return e=this.result_highlight,this.result_clear_highlight(),this.is_multiple&&this.max_selected_options<=this.choices_count()?(this.form_field_jq.trigger("chosen:maxselected",{chosen:this}),!1):(this.is_multiple?e.removeClass("active-result"):this.reset_single_select_options(),s=this.results_data[e[0].getAttribute("data-option-array-index")],s.selected=!0,this.form_field.options[s.options_index].selected=!0,this.selected_option_count=null,this.is_multiple?this.choice_build(s):this.single_set_selected_text(s.text),(t.metaKey||t.ctrlKey)&&this.is_multiple||this.results_hide(),this.search_field.val(""),(this.is_multiple||this.form_field.selectedIndex!==this.current_selectedIndex)&&this.form_field_jq.trigger("change",{selected:this.form_field.options[s.options_index].value}),this.current_selectedIndex=this.form_field.selectedIndex,this.search_field_scale())},s.prototype.single_set_selected_text=function(t){return null==t&&(t=this.default_text),t===this.default_text?this.selected_item.addClass("chosen-default"):(this.single_deselect_control_build(),this.selected_item.removeClass("chosen-default")),this.selected_item.find("span").text(t)},s.prototype.result_deselect=function(t){var e;return e=this.results_data[t],!this.form_field.options[e.options_index].disabled&&(e.selected=!1,this.form_field.options[e.options_index].selected=!1,this.selected_option_count=null,this.result_clear_highlight(),this.results_showing&&this.winnow_results(),this.form_field_jq.trigger("change",{deselected:this.form_field.options[e.options_index].value}),this.search_field_scale(),!0)},s.prototype.single_deselect_control_build=function(){if(this.allow_single_deselect)return this.selected_item.find("abbr").length||this.selected_item.find("span").first().after('<abbr class="search-choice-close"></abbr>'),this.selected_item.addClass("chosen-single-with-deselect")},s.prototype.get_search_text=function(){return this.search_field.val()===this.default_text?"":t("<div/>").text(t.trim(this.search_field.val())).html()},s.prototype.winnow_results_set_highlight=function(){var t,e;if(e=this.is_multiple?[]:this.search_results.find(".result-selected.active-result"),null!=(t=e.length?e.first():this.search_results.find(".active-result").first()))return this.result_do_highlight(t)},s.prototype.no_results=function(e){var s;return s=t('<li class="no-results">'+this.results_none_found+' "<span></span>"</li>'),s.find("span").first().html(e),this.search_results.append(s),this.form_field_jq.trigger("chosen:no_results",{chosen:this})},s.prototype.no_results_clear=function(){return this.search_results.find(".no-results").remove()},s.prototype.keydown_arrow=function(){var t;return this.results_showing&&this.result_highlight?(t=this.result_highlight.nextAll("li.active-result").first())?this.result_do_highlight(t):void 0:this.results_show()},s.prototype.keyup_arrow=function(){var t;return this.results_showing||this.is_multiple?this.result_highlight?(t=this.result_highlight.prevAll("li.active-result"),t.length?this.result_do_highlight(t.first()):(this.choices_count()>0&&this.results_hide(),this.result_clear_highlight())):void 0:this.results_show()},s.prototype.keydown_backstroke=function(){var t;return this.pending_backstroke?(this.choice_destroy(this.pending_backstroke.find("a").first()),this.clear_backstroke()):(t=this.search_container.siblings("li.search-choice").last(),t.length&&!t.hasClass("search-choice-disabled")?(this.pending_backstroke=t,this.single_backstroke_delete?this.keydown_backstroke():this.pending_backstroke.addClass("search-choice-focus")):void 0)},s.prototype.clear_backstroke=function(){return this.pending_backstroke&&this.pending_backstroke.removeClass("search-choice-focus"),this.pending_backstroke=null},s.prototype.keydown_checker=function(t){var e,s;switch(e=null!=(s=t.which)?s:t.keyCode,this.search_field_scale(),8!==e&&this.pending_backstroke&&this.clear_backstroke(),e){case 8:this.backstroke_length=this.search_field.val().length;break;case 9:this.results_showing&&!this.is_multiple&&this.result_select(t),this.mouse_on_container=!1;break;case 13:t.preventDefault();break;case 38:t.preventDefault(),this.keyup_arrow();break;case 40:t.preventDefault(),this.keydown_arrow()}},s.prototype.search_field_scale=function(){var e,s,i,r,o,n,h,l;if(this.is_multiple){for(0,n=0,r="position:absolute; left: -1000px; top: -1000px; display:none;",o=["font-size","font-style","font-weight","font-family","line-height","text-transform","letter-spacing"],h=0,l=o.length;h<l;h++)i=o[h],r+=i+":"+this.search_field.css(i)+";";return e=t("<div />",{style:r}),e.text(this.search_field.val()),t("body").append(e),n=e.width()+25,e.remove(),s=this.container.outerWidth(),n>s-10&&(n=s-10),this.search_field.css({width:n+"px"})}},s}(e)}).call(this);
//zeroclipboard
/*!
 * ZeroClipboard
 * The ZeroClipboard library provides an easy way to copy text to the clipboard using an invisible Adobe Flash movie and a JavaScript interface.
 * Copyright (c) 2014 Jon Rohan, James M. Greene
 * Licensed MIT
 * http://zeroclipboard.org/
 * v2.1.1
 */
!function(e,t){"use strict";var n,r=e,a=r.document,i=r.navigator,o=r.setTimeout,l=r.Number.parseInt||r.parseInt,s=r.Number.parseFloat||r.parseFloat,c=r.Number.isNaN||r.isNaN,u=r.encodeURIComponent,f=r.Math,p=r.Date,d=r.ActiveXObject,h=r.Array.prototype.slice,y=r.Object.keys,v=r.Object.prototype.hasOwnProperty,m=function(){return"function"==typeof r.Object.defineProperty&&function(){try{var e={};return r.Object.defineProperty(e,"y",{value:"z"}),"z"===e.y}catch(e){return!1}}()?r.Object.defineProperty:void 0}(),g=function(e){return h.call(e,0)},b=function(e,t,n){if("function"==typeof t.indexOf)return t.indexOf(e,n);var r,a=t.length;for(void 0===n?n=0:0>n&&(n=a+n),r=n;a>r;r++)if(v.call(t,r)&&t[r]===e)return r;return-1},w=function(){var e,n,r,a,i,o=g(arguments),l=o[0]||{};for(e=1,n=o.length;n>e;e++)if(null!=(r=o[e]))for(a in r)if(v.call(r,a)){if(l[a],i=r[a],l===i)continue;i!==t&&(l[a]=i)}return l},C=function(e){var t,n,r,a;if("object"!=typeof e||null==e)t=e;else if("number"==typeof e.length)for(t=[],n=0,r=e.length;r>n;n++)v.call(e,n)&&(t[n]=C(e[n]));else{t={};for(a in e)v.call(e,a)&&(t[a]=C(e[a]))}return t},x=function(e,t){for(var n={},r=0,a=t.length;a>r;r++)t[r]in e&&(n[t[r]]=e[t[r]]);return n},T=function(e,t){var n={};for(var r in e)-1===b(r,t)&&(n[r]=e[r]);return n},E=function(e){if(null==e)return[];if(y)return y(e);var t=[];for(var n in e)v.call(e,n)&&t.push(n);return t},D=function(e){if(e)for(var t in e)v.call(e,t)&&delete e[t];return e},j=function(e,t){t in e&&"function"==typeof m&&m(e,t,{value:e[t],writable:!1,configurable:!0,enumerable:!0})},I=function(e){return function(){return e.now?e.now():(new e).getTime()}}(p),k=function(e,t){if(e&&1===e.nodeType&&t&&(1===t.nodeType||9===t.nodeType))do{if(e===t)return!0;e=e.parentNode}while(e);return!1},N={bridge:null,version:"0.0.0",pluginType:"unknown",disabled:null,outdated:null,unavailable:null,deactivated:null,overdue:null,ready:null},O="11.0.0",L={},z={},_=null,S={ready:"Flash communication is established",error:{"flash-disabled":"Flash is disabled or not installed","flash-outdated":"Flash is too outdated to support ZeroClipboard","flash-unavailable":"Flash is unable to communicate bidirectionally with JavaScript","flash-deactivated":"Flash is too outdated for your browser and/or is configured as click-to-activate","flash-overdue":"Flash communication was established but NOT within the acceptable time limit"}},F=function(){var e,t,n,r,i="ZeroClipboard.swf";if(!a.currentScript||!(r=a.currentScript.src)){var o=a.getElementsByTagName("script");if("readyState"in o[0])for(e=o.length;e--&&("interactive"!==o[e].readyState||!(r=o[e].src)););else if("loading"===a.readyState)r=o[o.length-1].src;else{for(e=o.length;e--;){if(!(n=o[e].src)){t=null;break}if(n=n.split("#")[0].split("?")[0],n=n.slice(0,n.lastIndexOf("/")+1),null==t)t=n;else if(t!==n){t=null;break}}null!==t&&(r=t)}}return r&&(r=r.split("#")[0].split("?")[0],i=r.slice(0,r.lastIndexOf("/")+1)+i),i}(),A={swfPath:F,trustedDomains:e.location.host?[e.location.host]:[],cacheBust:!0,forceEnhancedClipboard:!1,flashLoadTimeout:3e4,autoActivate:!0,bubbleEvents:!0,containerId:"global-zeroclipboard-html-bridge",containerClass:"global-zeroclipboard-container",swfObjectId:"global-zeroclipboard-flash-bridge",hoverClass:"zeroclipboard-is-hover",activeClass:"zeroclipboard-is-active",forceHandCursor:!1,title:null,zIndex:999999999},X=function(e){if("object"==typeof e&&null!==e)for(var t in e)if(v.call(e,t))if(/^(?:forceHandCursor|title|zIndex|bubbleEvents)$/.test(t))A[t]=e[t];else if(null==N.bridge)if("containerId"===t||"swfObjectId"===t){if(!q(e[t]))throw new Error("The specified `"+t+"` value is not valid as an HTML4 Element ID");A[t]=e[t]}else A[t]=e[t];return"string"==typeof e&&e?v.call(A,e)?A[e]:void 0:C(A)},Y=function(){return{browser:x(i,["userAgent","platform","appName"]),flash:T(N,["bridge"]),zeroclipboard:{version:je.version,config:je.config()}}},$=function(){return!!(N.disabled||N.outdated||N.unavailable||N.deactivated)},B=function(e,t){var n,r,a,i={};if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&je.on(n,e[n]);if(a&&a.length){for(n=0,r=a.length;r>n;n++)e=a[n].replace(/^on/,""),i[e]=!0,L[e]||(L[e]=[]),L[e].push(t);if(i.ready&&N.ready&&je.emit({type:"ready"}),i.error){var o=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=o.length;r>n;n++)if(!0===N[o[n]]){je.emit({type:"error",name:"flash-"+o[n]});break}}}return je},P=function(e,t){var n,r,a,i,o;if(0===arguments.length)i=E(L);else if("string"==typeof e&&e)i=e.split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&je.off(n,e[n]);if(i&&i.length)for(n=0,r=i.length;r>n;n++)if(e=i[n].toLowerCase().replace(/^on/,""),(o=L[e])&&o.length)if(t)for(a=b(t,o);-1!==a;)o.splice(a,1),a=b(t,o,a);else o.length=0;return je},H=function(e){return"string"==typeof e&&e?C(L[e])||null:C(L)},M=function(e){var t,n,r;return e=Q(e),e&&!ie(e)?"ready"===e.type&&!0===N.overdue?je.emit({type:"error",name:"flash-overdue"}):(t=w({},e),ae.call(this,t),"copy"===e.type&&(r=fe(z),n=r.data,_=r.formatMap),n):void 0},R=function(){if("boolean"!=typeof N.ready&&(N.ready=!1),!je.isFlashUnusable()&&null===N.bridge){var e=A.flashLoadTimeout;"number"==typeof e&&e>=0&&o(function(){"boolean"!=typeof N.deactivated&&(N.deactivated=!0),!0===N.deactivated&&je.emit({type:"error",name:"flash-deactivated"})},e),N.overdue=!1,ce()}},Z=function(){je.clearData(),je.blur(),je.emit("destroy"),ue(),je.off()},V=function(e,t){var n;if("object"==typeof e&&e&&void 0===t)n=e,je.clearData();else{if("string"!=typeof e||!e)return;n={},n[e]=t}for(var r in n)"string"==typeof r&&r&&v.call(n,r)&&"string"==typeof n[r]&&n[r]&&(z[r]=n[r])},K=function(e){void 0===e?(D(z),_=null):"string"==typeof e&&v.call(z,e)&&delete z[e]},U=function(e){return void 0===e?C(z):"string"==typeof e&&v.call(z,e)?z[e]:void 0},G=function(e){if(e&&1===e.nodeType){n&&(be(n,A.activeClass),n!==e&&be(n,A.hoverClass)),n=e,ge(e,A.hoverClass);var t=e.getAttribute("title")||A.title;if("string"==typeof t&&t){var r=se(N.bridge);r&&r.setAttribute("title",t)}var a=!0===A.forceHandCursor||"pointer"===we(e,"cursor");Ee(a),Te()}},J=function(){var e=se(N.bridge);e&&(e.removeAttribute("title"),e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.top="1px"),n&&(be(n,A.hoverClass),be(n,A.activeClass),n=null)},W=function(){return n||null},q=function(e){return"string"==typeof e&&e&&/^[A-Za-z][A-Za-z0-9_:\-\.]*$/.test(e)},Q=function(e){var t;if("string"==typeof e&&e?(t=e,e={}):"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(t=e.type),t){w(e,{type:t.toLowerCase(),target:e.target||n||null,relatedTarget:e.relatedTarget||null,currentTarget:N&&N.bridge||null,timeStamp:e.timeStamp||I()||null});var r=S[e.type];return"error"===e.type&&e.name&&r&&(r=r[e.name]),r&&(e.message=r),"ready"===e.type&&w(e,{target:null,version:N.version}),"error"===e.type&&(/^flash-(disabled|outdated|unavailable|deactivated|overdue)$/.test(e.name)&&w(e,{target:null,minimumVersion:O}),/^flash-(outdated|unavailable|deactivated|overdue)$/.test(e.name)&&w(e,{version:N.version})),"copy"===e.type&&(e.clipboardData={setData:je.setData,clearData:je.clearData}),"aftercopy"===e.type&&(e=pe(e,_)),e.target&&!e.relatedTarget&&(e.relatedTarget=ee(e.target)),e=te(e)}},ee=function(e){var t=e&&e.getAttribute&&e.getAttribute("data-clipboard-target");return t?a.getElementById(t):null},te=function(e){if(e&&/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)){var n=e.target,i="_mouseover"===e.type&&e.relatedTarget?e.relatedTarget:t,o="_mouseout"===e.type&&e.relatedTarget?e.relatedTarget:t,l=xe(n),s=r.screenLeft||r.screenX||0,c=r.screenTop||r.screenY||0,u=a.body.scrollLeft+a.documentElement.scrollLeft,f=a.body.scrollTop+a.documentElement.scrollTop,p=l.left+("number"==typeof e._stageX?e._stageX:0),d=l.top+("number"==typeof e._stageY?e._stageY:0),h=p-u,y=d-f,v=s+h,m=c+y,g="number"==typeof e.movementX?e.movementX:0,b="number"==typeof e.movementY?e.movementY:0;delete e._stageX,delete e._stageY,w(e,{srcElement:n,fromElement:i,toElement:o,screenX:v,screenY:m,pageX:p,pageY:d,clientX:h,clientY:y,x:h,y:y,movementX:g,movementY:b,offsetX:0,offsetY:0,layerX:0,layerY:0})}return e},ne=function(e){var t=e&&"string"==typeof e.type&&e.type||"";return!/^(?:(?:before)?copy|destroy)$/.test(t)},re=function(e,t,n,r){r?o(function(){e.apply(t,n)},0):e.apply(t,n)},ae=function(e){if("object"==typeof e&&e&&e.type){var t=ne(e),n=L["*"]||[],a=L[e.type]||[],i=n.concat(a);if(i&&i.length){var o,l,s,c,u,f=this;for(o=0,l=i.length;l>o;o++)s=i[o],c=f,"string"==typeof s&&"function"==typeof r[s]&&(s=r[s]),"object"==typeof s&&s&&"function"==typeof s.handleEvent&&(c=s,s=s.handleEvent),"function"==typeof s&&(u=w({},e),re(s,c,[u],t))}return this}},ie=function(e){var t=e.target||n||null,r="swf"===e._source;switch(delete e._source,e.type){case"error":b(e.name,["flash-disabled","flash-outdated","flash-deactivated","flash-overdue"])&&w(N,{disabled:"flash-disabled"===e.name,outdated:"flash-outdated"===e.name,unavailable:"flash-unavailable"===e.name,deactivated:"flash-deactivated"===e.name,overdue:"flash-overdue"===e.name,ready:!1});break;case"ready":var a=!0===N.deactivated;w(N,{disabled:!1,outdated:!1,unavailable:!1,deactivated:!1,overdue:a,ready:!a});break;case"copy":var i,o,l=e.relatedTarget;!z["text/html"]&&!z["text/plain"]&&l&&(o=l.value||l.outerHTML||l.innerHTML)&&(i=l.value||l.textContent||l.innerText)?(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",i),o!==i&&e.clipboardData.setData("text/html",o)):!z["text/plain"]&&e.target&&(i=e.target.getAttribute("data-clipboard-text"))&&(e.clipboardData.clearData(),e.clipboardData.setData("text/plain",i));break;case"aftercopy":je.clearData(),t&&t!==me()&&t.focus&&t.focus();break;case"_mouseover":je.focus(t),!0===A.bubbleEvents&&r&&(t&&t!==e.relatedTarget&&!k(e.relatedTarget,t)&&oe(w({},e,{type:"mouseenter",bubbles:!1,cancelable:!1})),oe(w({},e,{type:"mouseover"})));break;case"_mouseout":je.blur(),!0===A.bubbleEvents&&r&&(t&&t!==e.relatedTarget&&!k(e.relatedTarget,t)&&oe(w({},e,{type:"mouseleave",bubbles:!1,cancelable:!1})),oe(w({},e,{type:"mouseout"})));break;case"_mousedown":ge(t,A.activeClass),!0===A.bubbleEvents&&r&&oe(w({},e,{type:e.type.slice(1)}));break;case"_mouseup":be(t,A.activeClass),!0===A.bubbleEvents&&r&&oe(w({},e,{type:e.type.slice(1)}));break;case"_click":case"_mousemove":!0===A.bubbleEvents&&r&&oe(w({},e,{type:e.type.slice(1)}))}return!!/^_(?:click|mouse(?:over|out|down|up|move))$/.test(e.type)||void 0},oe=function(e){if(e&&"string"==typeof e.type&&e){var t,n=e.target||null,i=n&&n.ownerDocument||a,o={view:i.defaultView||r,canBubble:!0,cancelable:!0,detail:"click"===e.type?1:0,button:"number"==typeof e.which?e.which-1:"number"==typeof e.button?e.button:i.createEvent?0:1},l=w(o,e);n&&i.createEvent&&n.dispatchEvent&&(l=[l.type,l.canBubble,l.cancelable,l.view,l.detail,l.screenX,l.screenY,l.clientX,l.clientY,l.ctrlKey,l.altKey,l.shiftKey,l.metaKey,l.button,l.relatedTarget],t=i.createEvent("MouseEvents"),t.initMouseEvent&&(t.initMouseEvent.apply(t,l),t._source="js",n.dispatchEvent(t)))}},le=function(){var e=a.createElement("div");return e.id=A.containerId,e.className=A.containerClass,e.style.position="absolute",e.style.left="0px",e.style.top="-9999px",e.style.width="1px",e.style.height="1px",e.style.zIndex=""+De(A.zIndex),e},se=function(e){for(var t=e&&e.parentNode;t&&"OBJECT"===t.nodeName&&t.parentNode;)t=t.parentNode;return t||null},ce=function(){var e,t=N.bridge,n=se(t);if(!t){var i=ve(r.location.host,A),o="never"===i?"none":"all",l=he(A),s=A.swfPath+de(A.swfPath,A);n=le();var c=a.createElement("div");n.appendChild(c),a.body.appendChild(n);var u=a.createElement("div"),f="activex"===N.pluginType;u.innerHTML='<object id="'+A.swfObjectId+'" name="'+A.swfObjectId+'" width="100%" height="100%" '+(f?'classid="clsid:d27cdb6e-ae6d-11cf-96b8-444553540000"':'type="application/x-shockwave-flash" data="'+s+'"')+">"+(f?'<param name="movie" value="'+s+'"/>':"")+'<param name="allowScriptAccess" value="'+i+'"/><param name="allowNetworking" value="'+o+'"/><param name="menu" value="false"/><param name="wmode" value="transparent"/><param name="flashvars" value="'+l+'"/></object>',t=u.firstChild,u=null,t.ZeroClipboard=je,n.replaceChild(t,c)}return t||(t=a[A.swfObjectId],t&&(e=t.length)&&(t=t[e-1]),!t&&n&&(t=n.firstChild)),N.bridge=t||null,t},ue=function(){var e=N.bridge;if(e){var t=se(e);t&&("activex"===N.pluginType&&"readyState"in e?(e.style.display="none",function n(){if(4===e.readyState){for(var r in e)"function"==typeof e[r]&&(e[r]=null);e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t)}else o(n,10)}()):(e.parentNode&&e.parentNode.removeChild(e),t.parentNode&&t.parentNode.removeChild(t))),N.ready=null,N.bridge=null,N.deactivated=null}},fe=function(e){var t={},n={};if("object"==typeof e&&e){for(var r in e)if(r&&v.call(e,r)&&"string"==typeof e[r]&&e[r])switch(r.toLowerCase()){case"text/plain":case"text":case"air:text":case"flash:text":t.text=e[r],n.text=r;break;case"text/html":case"html":case"air:html":case"flash:html":t.html=e[r],n.html=r;break;case"application/rtf":case"text/rtf":case"rtf":case"richtext":case"air:rtf":case"flash:rtf":t.rtf=e[r],n.rtf=r}return{data:t,formatMap:n}}},pe=function(e,t){if("object"!=typeof e||!e||"object"!=typeof t||!t)return e;var n={};for(var r in e)if(v.call(e,r)){if("success"!==r&&"data"!==r){n[r]=e[r];continue}n[r]={};var a=e[r];for(var i in a)i&&v.call(a,i)&&v.call(t,i)&&(n[r][t[i]]=a[i])}return n},de=function(e,t){return null==t||t&&!0===t.cacheBust?(-1===e.indexOf("?")?"?":"&")+"noCache="+I():""},he=function(e){var t,n,a,i,o="",l=[];if(e.trustedDomains&&("string"==typeof e.trustedDomains?i=[e.trustedDomains]:"object"==typeof e.trustedDomains&&"length"in e.trustedDomains&&(i=e.trustedDomains)),i&&i.length)for(t=0,n=i.length;n>t;t++)if(v.call(i,t)&&i[t]&&"string"==typeof i[t]){if(!(a=ye(i[t])))continue;if("*"===a){l=[a];break}l.push.apply(l,[a,"//"+a,r.location.protocol+"//"+a])}return l.length&&(o+="trustedOrigins="+u(l.join(","))),!0===e.forceEnhancedClipboard&&(o+=(o?"&":"")+"forceEnhancedClipboard=true"),"string"==typeof e.swfObjectId&&e.swfObjectId&&(o+=(o?"&":"")+"swfObjectId="+u(e.swfObjectId)),o},ye=function(e){if(null==e||""===e)return null;if(""===(e=e.replace(/^\s+|\s+$/g,"")))return null;var t=e.indexOf("//");e=-1===t?e:e.slice(t+2);var n=e.indexOf("/");return e=-1===n?e:-1===t||0===n?null:e.slice(0,n),e&&".swf"===e.slice(-4).toLowerCase()?null:e||null},ve=function(){var e=function(e,t){var n,r,a;if(null!=e&&"*"!==t[0]&&("string"==typeof e&&(e=[e]),"object"==typeof e&&"number"==typeof e.length))for(n=0,r=e.length;r>n;n++)if(v.call(e,n)&&(a=ye(e[n]))){if("*"===a){t.length=0,t.push("*");break}-1===b(a,t)&&t.push(a)}};return function(t,n){var r=ye(n.swfPath);null===r&&(r=t);var a=[];e(n.trustedOrigins,a),e(n.trustedDomains,a);var i=a.length;if(i>0){if(1===i&&"*"===a[0])return"always";if(-1!==b(t,a))return 1===i&&t===r?"sameDomain":"always"}return"never"}}(),me=function(){try{return a.activeElement}catch(e){return null}},ge=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)||e.classList.add(t),e;if(t&&"string"==typeof t){var n=(t||"").split(/\s+/);if(1===e.nodeType)if(e.className){for(var r=" "+e.className+" ",a=e.className,i=0,o=n.length;o>i;i++)r.indexOf(" "+n[i]+" ")<0&&(a+=" "+n[i]);e.className=a.replace(/^\s+|\s+$/g,"")}else e.className=t}return e},be=function(e,t){if(!e||1!==e.nodeType)return e;if(e.classList)return e.classList.contains(t)&&e.classList.remove(t),e;if("string"==typeof t&&t){var n=t.split(/\s+/);if(1===e.nodeType&&e.className){for(var r=(" "+e.className+" ").replace(/[\n\t]/g," "),a=0,i=n.length;i>a;a++)r=r.replace(" "+n[a]+" "," ");e.className=r.replace(/^\s+|\s+$/g,"")}}return e},we=function(e,t){var n=r.getComputedStyle(e,null).getPropertyValue(t);return"cursor"!==t||n&&"auto"!==n||"A"!==e.nodeName?n:"pointer"},Ce=function(){var e,t,n,r=1;return"function"==typeof a.body.getBoundingClientRect&&(e=a.body.getBoundingClientRect(),t=e.right-e.left,n=a.body.offsetWidth,r=f.round(t/n*100)/100),r},xe=function(e){var t={left:0,top:0,width:0,height:0};if(e.getBoundingClientRect){var n,i,o,l=e.getBoundingClientRect();"pageXOffset"in r&&"pageYOffset"in r?(n=r.pageXOffset,i=r.pageYOffset):(o=Ce(),n=f.round(a.documentElement.scrollLeft/o),i=f.round(a.documentElement.scrollTop/o));var s=a.documentElement.clientLeft||0,c=a.documentElement.clientTop||0;t.left=l.left+n-s,t.top=l.top+i-c,t.width="width"in l?l.width:l.right-l.left,t.height="height"in l?l.height:l.bottom-l.top}return t},Te=function(){var e;if(n&&(e=se(N.bridge))){var t=xe(n);w(e.style,{width:t.width+"px",height:t.height+"px",top:t.top+"px",left:t.left+"px",zIndex:""+De(A.zIndex)})}},Ee=function(e){!0===N.ready&&(N.bridge&&"function"==typeof N.bridge.setHandCursor?N.bridge.setHandCursor(e):N.ready=!1)},De=function(e){if(/^(?:auto|inherit)$/.test(e))return e;var t;return"number"!=typeof e||c(e)?"string"==typeof e&&(t=De(l(e,10))):t=e,"number"==typeof t?t:"auto"};!function(e){function t(e){var t=e.match(/[\d]+/g);return t.length=3,t.join(".")}function n(e){return!!e&&(e=e.toLowerCase())&&(/^(pepflashplayer\.dll|libpepflashplayer\.so|pepperflashplayer\.plugin)$/.test(e)||"chrome.plugin"===e.slice(-13))}function r(e){e&&(c=!0,e.version&&(p=t(e.version)),!p&&e.description&&(p=t(e.description)),e.filename&&(f=n(e.filename)))}var a,o,l,c=!1,u=!1,f=!1,p="";if(i.plugins&&i.plugins.length)a=i.plugins["Shockwave Flash"],r(a),i.plugins["Shockwave Flash 2.0"]&&(c=!0,p="2.0.0.11");else if(i.mimeTypes&&i.mimeTypes.length)l=i.mimeTypes["application/x-shockwave-flash"],a=l&&l.enabledPlugin,r(a);else if(void 0!==e){u=!0;try{o=new e("ShockwaveFlash.ShockwaveFlash.7"),c=!0,p=t(o.GetVariable("$version"))}catch(n){try{o=new e("ShockwaveFlash.ShockwaveFlash.6"),c=!0,p="6.0.21"}catch(n){try{o=new e("ShockwaveFlash.ShockwaveFlash"),c=!0,p=t(o.GetVariable("$version"))}catch(e){u=!1}}}}N.disabled=!0!==c,N.outdated=p&&s(p)<s(O),N.version=p||"0.0.0",N.pluginType=f?"pepper":u?"activex":c?"netscape":"unknown"}(d);var je=function(){return this instanceof je?void("function"==typeof je._createClient&&je._createClient.apply(this,g(arguments))):new je};je.version="2.1.1",j(je,"version"),je.config=function(){return X.apply(this,g(arguments))},je.state=function(){return Y.apply(this,g(arguments))},je.isFlashUnusable=function(){return $.apply(this,g(arguments))},je.on=function(){return B.apply(this,g(arguments))},je.off=function(){return P.apply(this,g(arguments))},je.handlers=function(){return H.apply(this,g(arguments))},je.emit=function(){return M.apply(this,g(arguments))},je.create=function(){return R.apply(this,g(arguments))},je.destroy=function(){return Z.apply(this,g(arguments))},je.setData=function(){return V.apply(this,g(arguments))},je.clearData=function(){return K.apply(this,g(arguments))},je.getData=function(){return U.apply(this,g(arguments))},je.focus=je.activate=function(){return G.apply(this,g(arguments))},je.blur=je.deactivate=function(){return J.apply(this,g(arguments))},je.activeElement=function(){return W.apply(this,g(arguments))};var Ie=0,ke={},Ne=0,Oe={},Le={};w(A,{autoActivate:!0});var ze=function(e){var t=this;t.id=""+Ie++,ke[t.id]={instance:t,elements:[],handlers:{}},e&&t.clip(e),je.on("*",function(e){return t.emit(e)}),je.on("destroy",function(){t.destroy()}),je.create()},_e=function(e,t){var n,r,a,i={},o=ke[this.id]&&ke[this.id].handlers;if("string"==typeof e&&e)a=e.toLowerCase().split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.on(n,e[n]);if(a&&a.length){for(n=0,r=a.length;r>n;n++)e=a[n].replace(/^on/,""),i[e]=!0,o[e]||(o[e]=[]),o[e].push(t);if(i.ready&&N.ready&&this.emit({type:"ready",client:this}),i.error){var l=["disabled","outdated","unavailable","deactivated","overdue"];for(n=0,r=l.length;r>n;n++)if(N[l[n]]){this.emit({type:"error",name:"flash-"+l[n],client:this});break}}}return this},Se=function(e,t){var n,r,a,i,o,l=ke[this.id]&&ke[this.id].handlers;if(0===arguments.length)i=E(l);else if("string"==typeof e&&e)i=e.split(/\s+/);else if("object"==typeof e&&e&&void 0===t)for(n in e)v.call(e,n)&&"string"==typeof n&&n&&"function"==typeof e[n]&&this.off(n,e[n]);if(i&&i.length)for(n=0,r=i.length;r>n;n++)if(e=i[n].toLowerCase().replace(/^on/,""),(o=l[e])&&o.length)if(t)for(a=b(t,o);-1!==a;)o.splice(a,1),a=b(t,o,a);else o.length=0;return this},Fe=function(e){var t=null,n=ke[this.id]&&ke[this.id].handlers;return n&&(t="string"==typeof e&&e?n[e]?n[e].slice(0):[]:C(n)),t},Ae=function(e){if(Pe.call(this,e)){"object"==typeof e&&e&&"string"==typeof e.type&&e.type&&(e=w({},e));var t=w({},Q(e),{client:this});He.call(this,t)}return this},Xe=function(e){e=Me(e);for(var t=0;t<e.length;t++)if(v.call(e,t)&&e[t]&&1===e[t].nodeType){e[t].zcClippingId?-1===b(this.id,Oe[e[t].zcClippingId])&&Oe[e[t].zcClippingId].push(this.id):(e[t].zcClippingId="zcClippingId_"+Ne++,Oe[e[t].zcClippingId]=[this.id],!0===A.autoActivate&&Re(e[t]));var n=ke[this.id]&&ke[this.id].elements;-1===b(e[t],n)&&n.push(e[t])}return this},Ye=function(e){var t=ke[this.id];if(!t)return this;var n,r=t.elements;e=void 0===e?r.slice(0):Me(e);for(var a=e.length;a--;)if(v.call(e,a)&&e[a]&&1===e[a].nodeType){for(n=0;-1!==(n=b(e[a],r,n));)r.splice(n,1);var i=Oe[e[a].zcClippingId];if(i){for(n=0;-1!==(n=b(this.id,i,n));)i.splice(n,1);0===i.length&&(!0===A.autoActivate&&Ze(e[a]),delete e[a].zcClippingId)}}return this},$e=function(){var e=ke[this.id];return e&&e.elements?e.elements.slice(0):[]},Be=function(){this.unclip(),this.off(),delete ke[this.id]},Pe=function(e){if(!e||!e.type)return!1;if(e.client&&e.client!==this)return!1;var t=ke[this.id]&&ke[this.id].elements,n=!!t&&t.length>0,r=!e.target||n&&-1!==b(e.target,t),a=e.relatedTarget&&n&&-1!==b(e.relatedTarget,t),i=e.client&&e.client===this;return!!(r||a||i)},He=function(e){if("object"==typeof e&&e&&e.type){var t=ne(e),n=ke[this.id]&&ke[this.id].handlers["*"]||[],a=ke[this.id]&&ke[this.id].handlers[e.type]||[],i=n.concat(a);if(i&&i.length){var o,l,s,c,u,f=this;for(o=0,l=i.length;l>o;o++)s=i[o],c=f,"string"==typeof s&&"function"==typeof r[s]&&(s=r[s]),"object"==typeof s&&s&&"function"==typeof s.handleEvent&&(c=s,s=s.handleEvent),"function"==typeof s&&(u=w({},e),re(s,c,[u],t))}return this}},Me=function(e){return"string"==typeof e&&(e=[]),"number"!=typeof e.length?[e]:e},Re=function(e){if(e&&1===e.nodeType){var t=function(e){(e||(e=r.event))&&("js"!==e._source&&(e.stopImmediatePropagation(),e.preventDefault()),delete e._source)},n=function(n){(n||(n=r.event))&&(t(n),je.focus(e))};e.addEventListener("mouseover",n,!1),e.addEventListener("mouseout",t,!1),e.addEventListener("mouseenter",t,!1),e.addEventListener("mouseleave",t,!1),e.addEventListener("mousemove",t,!1),Le[e.zcClippingId]={mouseover:n,mouseout:t,mouseenter:t,mouseleave:t,mousemove:t}}},Ze=function(e){if(e&&1===e.nodeType){var t=Le[e.zcClippingId];if("object"==typeof t&&t){for(var n,r,a=["move","leave","enter","out","over"],i=0,o=a.length;o>i;i++)n="mouse"+a[i],"function"==typeof(r=t[n])&&e.removeEventListener(n,r,!1);delete Le[e.zcClippingId]}}};je._createClient=function(){ze.apply(this,g(arguments))},je.prototype.on=function(){return _e.apply(this,g(arguments))},je.prototype.off=function(){return Se.apply(this,g(arguments))},je.prototype.handlers=function(){return Fe.apply(this,g(arguments))},je.prototype.emit=function(){return Ae.apply(this,g(arguments))},je.prototype.clip=function(){return Xe.apply(this,g(arguments))},je.prototype.unclip=function(){return Ye.apply(this,g(arguments))},je.prototype.elements=function(){return $e.apply(this,g(arguments))},je.prototype.destroy=function(){return Be.apply(this,g(arguments))},je.prototype.setText=function(e){return je.setData("text/plain",e),this},je.prototype.setHtml=function(e){return je.setData("text/html",e),this},je.prototype.setRichText=function(e){return je.setData("application/rtf",e),this},je.prototype.setData=function(){return je.setData.apply(this,g(arguments)),this},je.prototype.clearData=function(){return je.clearData.apply(this,g(arguments)),this},je.prototype.getData=function(){return je.getData.apply(this,g(arguments))},"function"==typeof define&&define.amd?define(function(){return je}):"object"==typeof module&&module&&"object"==typeof module.exports&&module.exports?module.exports=je:e.ZeroClipboard=je}(function(){return this}());
//readmore script
/*!
 * Readmore.js jQuery plugin
 * Author: @jed_foster
 * Project home: jedfoster.github.io/Readmore.js
 * Licensed under the MIT license
 */
!function(e){function t(t,o){if(this.element=t,this.options=e.extend({},i,o),e(this.element).data("max-height",this.options.maxHeight),e(this.element).data("height-margin",this.options.heightMargin),delete this.options.maxHeight,this.options.embedCSS&&!a){var n=".readmore-js-toggle, .readmore-js-section { "+this.options.sectionCSS+" } .readmore-js-section { overflow: hidden; }";!function(e,t){var s=e.createElement("style");s.type="text/css",s.styleSheet?s.styleSheet.cssText=t:s.appendChild(e.createTextNode(t)),e.getElementsByTagName("head")[0].appendChild(s)}(document,n),a=!0}this._defaults=i,this._name=s,this.init()}var s="readmore",i={speed:100,maxHeight:200,heightMargin:16,moreLink:'<a href="#">Read More</a>',lessLink:'<a href="#">Close</a>',embedCSS:!0,sectionCSS:"display: block; width: 100%;",startOpen:!1,expandedClass:"readmore-js-expanded",collapsedClass:"readmore-js-collapsed",beforeToggle:function(){},afterToggle:function(){}},a=!1;t.prototype={init:function(){var t=this;e(this.element).each(function(){var s=e(this),i=s.css("max-height").replace(/[^-\d\.]/g,"")>s.data("max-height")?s.css("max-height").replace(/[^-\d\.]/g,""):s.data("max-height"),a=s.data("height-margin");if("none"!=s.css("max-height")&&s.css("max-height","none"),t.setBoxHeight(s),s.outerHeight(!0)<=i+a)return!0;s.addClass("readmore-js-section "+t.options.collapsedClass).data("collapsedHeight",i);var o=t.options.startOpen?t.options.lessLink:t.options.moreLink;s.after(e(o).on("click",function(e){t.toggleSlider(this,s,e)}).addClass("readmore-js-toggle")),t.options.startOpen||s.css({height:i})}),e(window).on("resize",function(){t.resizeBoxes()})},toggleSlider:function(t,s,i){i.preventDefault();var a=this,o=newLink=sectionClass="",n=!1,h=e(s).data("collapsedHeight");e(s).height()<=h?(o=e(s).data("expandedHeight")+"px",newLink="lessLink",n=!0,sectionClass=a.options.expandedClass):(o=h,newLink="moreLink",sectionClass=a.options.collapsedClass),a.options.beforeToggle(t,s,n),e(s).animate({height:o},{duration:a.options.speed,complete:function(){a.options.afterToggle(t,s,n),e(t).replaceWith(e(a.options[newLink]).on("click",function(e){a.toggleSlider(this,s,e)}).addClass("readmore-js-toggle")),e(this).removeClass(a.options.collapsedClass+" "+a.options.expandedClass).addClass(sectionClass)}})},setBoxHeight:function(e){var t=e.clone().css({height:"auto",width:e.width(),overflow:"hidden"}).insertAfter(e),s=t.outerHeight(!0);t.remove(),e.data("expandedHeight",s)},resizeBoxes:function(){var t=this;e(".readmore-js-section").each(function(){var s=e(this);t.setBoxHeight(s),(s.height()>s.data("expandedHeight")||s.hasClass(t.options.expandedClass)&&s.height()<s.data("expandedHeight"))&&s.css("height",s.data("expandedHeight"))})},destroy:function(){var t=this;e(this.element).each(function(){var s=e(this);s.removeClass("readmore-js-section "+t.options.collapsedClass+" "+t.options.expandedClass).css({"max-height":"",height:"auto"}).next(".readmore-js-toggle").remove(),s.removeData()})}},e.fn[s]=function(i){var a=arguments;return i===undefined||"object"==typeof i?this.each(function(){if(e.data(this,"plugin_"+s)){var a=e.data(this,"plugin_"+s);a.destroy.apply(a)}e.data(this,"plugin_"+s,new t(this,i))}):"string"==typeof i&&"_"!==i[0]&&"init"!==i?this.each(function(){var o=e.data(this,"plugin_"+s);o instanceof t&&"function"==typeof o[i]&&o[i].apply(o,Array.prototype.slice.call(a,1))}):void 0}}(jQuery);
//general popup script
var sourceListHtmlReturned=function(i,t){var o=$("#popup-window");$_data=$(t),i&&$_data.find(".card-header").remove(),o.html($_data);var a=$(window).height()-$(".navbar:first").height()-1;o.height()>a&&o.dialog("option","height",a),wagn.initializeEditors(o.find("div:first")),o.find("div:first").trigger("slotReady")},gettingSourceListHtmlFail=function(i){var t=$("#popup-window"),o=$(i.responseText);t.html(o)},linkOnClick=function(i){i.preventDefault();var t=$(this),o=t.attr("href"),a="{{loading gif|source;size:large}}",n="center";t.hasClass("position-right")&&(n={of:".navbar",my:"right bottom",at:"right top",collision:"flipfit"}),t.hasClass("position-left")&&(n={my:"left bottom",at:"left top",of:".navbar",collision:"flipfit"});var e='<i class="fa fa-arrows"></i>';t.data("popup-title")&&(e=t.data("popup-title"));var l=$("#popup-window");0===l.length&&$("#main").prepend('<div id="popup-window" style="display:none;"></div>'),l=$("#popup-window"),l.html("<img src='"+a+"' />"),l.removeAttr("style"),l.dialog({height:"auto",minWidth:700,position:n,title:e,closeOnEscape:!1,resizable:!1,draggable:!0,close:function(){l.dialog("destroy")}});var r=t.hasClass("no-header"),s=t.hasClass("popup-original-link");$.ajax(o+(s?"":"?view=content")).done(function(i){sourceListHtmlReturned(r,i)}).fail(gettingSourceListHtmlFail);return!1};wagn.slotReady(function(i){i.find(".show-link-in-popup").each(function(){$(this).off("click").click(linkOnClick)})});
//script: fake loader
!function(i){function s(){var s=i(window).width(),c=i(window).height(),d=i(".fl").outerWidth(),e=i(".fl").outerHeight();i(".fl").css({position:"absolute",left:s/2-d/2,top:c/2-e/2})}i.fn.fakeLoader=function(c){var d=i.extend({timeToHide:1200,pos:"fixed",top:"0px",left:"0px",width:"100%",height:"100%",zIndex:"999",bgColor:"#2ecc71",spinner:"spinner7",imagePath:""},c),e='<div class="fl spinner1"><div class="double-bounce1"></div><div class="double-bounce2"></div></div>',l=i(this),n={position:d.pos,width:d.width,height:d.height,top:d.top,left:d.left};return l.css(n),l.each(function(){switch(d.spinner){case"spinner1":l.html(e);break;case"spinner2":l.html('<div class="fl spinner2"><div class="spinner-container container1"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container2"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div><div class="spinner-container container3"><div class="circle1"></div><div class="circle2"></div><div class="circle3"></div><div class="circle4"></div></div></div>');break;case"spinner3":l.html('<div class="fl spinner3"><div class="dot1"></div><div class="dot2"></div></div>');break;case"spinner4":l.html('<div class="fl spinner4"></div>');break;case"spinner5":l.html('<div class="fl spinner5"><div class="cube1"></div><div class="cube2"></div></div>');break;case"spinner6":l.html('<div class="fl spinner6"><div class="rect1"></div><div class="rect2"></div><div class="rect3"></div><div class="rect4"></div><div class="rect5"></div></div>');break;case"spinner7":l.html('<div class="fl spinner7"><div class="circ1"></div><div class="circ2"></div><div class="circ3"></div><div class="circ4"></div></div>');break;default:l.html(e)}""!=d.imagePath&&l.html('<div class="fl"><img src="'+d.imagePath+'"></div>'),s()}),setTimeout(function(){i(l).fadeOut()},d.timeToHide),this.css({backgroundColor:d.bgColor,zIndex:d.zIndex})},i(window).load(function(){s(),i(window).resize(function(){s()})})}(jQuery);
//script: vega
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?e(exports):"function"==typeof define&&define.amd?define(["exports"],e):e(t.vega=t.vega||{})}(this,function(t){"use strict";function e(t){var e,n,r,i,a,o,u,s,f=t.maxbins||20,c=t.base||10,l=Math.log(c),h=t.divide||[5,2],d=t.extent[0],p=t.extent[1],g=p-d;if(t.step)e=t.step;else if(t.steps){for(a=g/f,o=0,u=t.steps.length;o<u&&t.steps[o]<a;++o);e=t.steps[Math.max(0,o-1)]}else{for(n=Math.ceil(Math.log(f)/l),r=t.minstep||0,e=Math.max(r,Math.pow(c,Math.round(Math.log(g)/l)-n));Math.ceil(g/e)>f;)e*=c;for(o=0,u=h.length;o<u;++o)(a=e/h[o])>=r&&g/a<=f&&(e=a)}return a=Math.log(e),i=a>=0?0:1+~~(-a/l),s=Math.pow(c,-i-1),(t.nice||void 0===t.nice)&&(d=Math.min(d,Math.floor(d/e+s)*e),p=Math.ceil(p/e)*e),{start:d,stop:p,step:e}}function n(t,e){var n,i=[],a=t.length,o=-1;if(null==e)for(;++o<a;)isNaN(n=r(t[o]))||i.push(n);else for(;++o<a;)isNaN(n=r(e(t[o],o,t)))||i.push(n);return i}function r(t){return null===t?NaN:+t}function i(t,e){return t<e?-1:t>e?1:t>=e?0:NaN}function a(t){return 1===t.length&&(t=o(t)),{left:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)<0?r=a+1:i=a}return r},right:function(e,n,r,i){for(null==r&&(r=0),null==i&&(i=e.length);r<i;){var a=r+i>>>1;t(e[a],n)>0?i=a:r=a+1}return r}}}function o(t){return function(e,n){return i(t(e),n)}}function u(t){return null===t?NaN:+t}function s(t,e){var n,r,i=t.length,a=0,o=-1,s=0,f=0;if(null==e)for(;++o<i;)isNaN(n=u(t[o]))||(r=n-s,s+=r/++a,f+=r*(n-s));else for(;++o<i;)isNaN(n=u(e(t[o],o,t)))||(r=n-s,s+=r/++a,f+=r*(n-s));if(a>1)return f/(a-1)}function f(t,e){var n,r,i,a=t.length,o=-1;if(null==e){for(;++o<a;)if(null!=(n=t[o])&&n>=n)for(r=i=n;++o<a;)null!=(n=t[o])&&(r>n&&(r=n),i<n&&(i=n))}else for(;++o<a;)if(null!=(n=e(t[o],o,t))&&n>=n)for(r=i=n;++o<a;)null!=(n=e(t[o],o,t))&&(r>n&&(r=n),i<n&&(i=n));return[r,i]}function c(t,e,n){t=+t,e=+e,n=(i=arguments.length)<2?(e=t,t=0,1):i<3?1:+n;for(var r=-1,i=0|Math.max(0,Math.ceil((e-t)/n)),a=new Array(i);++r<i;)a[r]=t+r*n;return a}function l(t,e,n){var r,i,a,o=e<t,u=-1;if(o&&(r=t,t=e,e=r),0===(a=h(t,e,n))||!isFinite(a))return[];if(a>0)for(t=Math.ceil(t/a),e=Math.floor(e/a),i=new Array(r=Math.ceil(e-t+1));++u<r;)i[u]=(t+u)*a;else for(t=Math.floor(t*a),e=Math.ceil(e*a),i=new Array(r=Math.ceil(t-e+1));++u<r;)i[u]=(t-u)/a;return o&&i.reverse(),i}function h(t,e,n){var r=(e-t)/Math.max(0,n),i=Math.floor(Math.log(r)/Math.LN10),a=r/Math.pow(10,i);return i>=0?(a>=GM?10:a>=WM?5:a>=HM?2:1)*Math.pow(10,i):-Math.pow(10,-i)/(a>=GM?10:a>=WM?5:a>=HM?2:1)}function d(t,e,n){var r=Math.abs(e-t)/Math.max(0,n),i=Math.pow(10,Math.floor(Math.log(r)/Math.LN10)),a=r/i;return a>=GM?i*=10:a>=WM?i*=5:a>=HM&&(i*=2),e<t?-i:i}function p(t){return Math.ceil(Math.log(t.length)/Math.LN2)+1}function g(t,e,n){if(null==n&&(n=u),r=t.length){if((e=+e)<=0||r<2)return+n(t[0],0,t);if(e>=1)return+n(t[r-1],r-1,t);var r,i=(r-1)*e,a=Math.floor(i),o=+n(t[a],a,t);return o+(+n(t[a+1],a+1,t)-o)*(i-a)}}function v(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&n>r&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&n>r&&(r=n);return r}function m(t,e){var n,r=t.length,i=r,a=-1,o=0;if(null==e)for(;++a<r;)isNaN(n=u(t[a]))?--i:o+=n;else for(;++a<r;)isNaN(n=u(e(t[a],a,t)))?--i:o+=n;if(i)return o/i}function y(t,e){var n,r=t.length,a=-1,o=[];if(null==e)for(;++a<r;)isNaN(n=u(t[a]))||o.push(n);else for(;++a<r;)isNaN(n=u(e(t[a],a,t)))||o.push(n);return g(o.sort(i),.5)}function b(t){for(var e,n,r,i=t.length,a=-1,o=0;++a<i;)o+=t[a].length;for(n=new Array(o);--i>=0;)for(r=t[i],e=r.length;--e>=0;)n[--o]=r[e];return n}function _(t,e){var n,r,i=t.length,a=-1;if(null==e){for(;++a<i;)if(null!=(n=t[a])&&n>=n)for(r=n;++a<i;)null!=(n=t[a])&&r>n&&(r=n)}else for(;++a<i;)if(null!=(n=e(t[a],a,t))&&n>=n)for(r=n;++a<i;)null!=(n=e(t[a],a,t))&&r>n&&(r=n);return r}function x(t,e){for(var n=e.length,r=new Array(n);n--;)r[n]=t[e[n]];return r}function w(t,e){var n,r=t.length,i=-1,a=0;if(null==e)for(;++i<r;)(n=+t[i])&&(a+=n);else for(;++i<r;)(n=+e(t[i],i,t))&&(a+=n);return a}function M(t,e,r,a){var o,u,s,f,c=n(t,a),l=c.length,h=e;for(s=0,f=Array(h);s<h;++s){for(o=0,u=0;u<l;++u)o+=c[~~(Math.random()*l)];f[s]=o/l}return[g(f.sort(i),r/2),g(f,1-r/2)]}function k(t,e){null==e&&(e=t,t=0);var n,r,i,a={};return a.min=function(t){return arguments.length?(n=t||0,i=r-n,a):n},a.max=function(t){return arguments.length?(r=t||0,i=r-n,a):r},a.sample=function(){return n+Math.floor(i*Math.random())},a.pdf=function(t){return t===Math.floor(t)&&t>=n&&t<r?1/i:0},a.cdf=function(t){var e=Math.floor(t);return e<n?0:e>=r?1:(e-n+1)/i},a.icdf=function(t){return t>=0&&t<=1?n-1+Math.floor(t*i):NaN},a.min(t).max(e)}function E(t,e){var n,r,i=NaN,a={};return a.mean=function(t){return arguments.length?(n=t||0,i=NaN,a):n},a.stdev=function(t){return arguments.length?(r=null==t?1:t,i=NaN,a):r},a.sample=function(){var t,e,a=0,o=0;if(i===i)return a=i,i=NaN,a;do{a=2*Math.random()-1,o=2*Math.random()-1,t=a*a+o*o}while(0===t||t>1);return e=Math.sqrt(-2*Math.log(t)/t),i=n+o*e*r,n+a*e*r},a.pdf=function(t){var e=Math.exp(Math.pow(t-n,2)/(-2*Math.pow(r,2)));return 1/(r*Math.sqrt(2*Math.PI))*e},a.cdf=function(t){var e,i=(t-n)/r,a=Math.abs(i);if(a>37)e=0;else{var o,u=Math.exp(-a*a/2);a<7.07106781186547?(o=.0352624965998911*a+.700383064443688,o=o*a+6.37396220353165,o=o*a+33.912866078383,o=o*a+112.079291497871,o=o*a+221.213596169931,o=o*a+220.206867912376,e=u*o,o=.0883883476483184*a+1.75566716318264,o=o*a+16.064177579207,o=o*a+86.7807322029461,o=o*a+296.564248779674,o=o*a+637.333633378831,o=o*a+793.826512519948,o=o*a+440.413735824752,e/=o):(o=a+.65,o=a+4/o,o=a+3/o,o=a+2/o,o=a+1/o,e=u/o/2.506628274631)}return i>0?1-e:e},a.icdf=function(t){if(t<=0||t>=1)return NaN;var e=2*t-1,i=8*(Math.PI-3)/(3*Math.PI*(4-Math.PI)),a=2/(Math.PI*i)+Math.log(1-Math.pow(e,2))/2,o=Math.log(1-e*e)/i,u=(e>0?1:-1)*Math.sqrt(Math.sqrt(a*a-o)-a);return n+r*Math.SQRT2*u},a.mean(t).stdev(e)}function S(t,e){var r=n(t,e);return[g(r.sort(i),.25),g(r,.5),g(r,.75)]}function A(t,e){var n=E(),r={},i=0;return r.data=function(n){return arguments.length?(t=n,i=n?n.length:0,r.bandwidth(e)):t},r.bandwidth=function(n){return arguments.length?(e=n,!e&&t&&(e=C(t)),r):e},r.sample=function(){return t[~~(Math.random()*i)]+e*n.sample()},r.pdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.pdf((r-t[o])/e);return a/e/i},r.cdf=function(r){for(var a=0,o=0;o<i;++o)a+=n.cdf((r-t[o])/e);return a/i},r.icdf=function(){throw Error("KDE icdf not supported.")},r.data(t)}function C(t){var e=t.length,n=S(t),r=(n[2]-n[0])/1.34;return 1.06*Math.min(Math.sqrt(s(t)),r)*Math.pow(e,-.2)}function N(t,e){function n(t){var e,n=[],r=0;for(e=0;e<a;++e)r+=n[e]=null==t[e]?1:+t[e];for(e=0;e<a;++e)n[e]/=r;return n}var r,i={},a=0;return i.weights=function(t){return arguments.length?(r=n(e=t||[]),i):e},i.distributions=function(n){return arguments.length?(n?(a=n.length,t=n):(a=0,t=[]),i.weights(e)):t},i.sample=function(){for(var e=Math.random(),n=t[a-1],i=r[0],o=0;o<a-1;i+=r[++o])if(e<i){n=t[o];break}return n.sample()},i.pdf=function(e){for(var n=0,i=0;i<a;++i)n+=r[i]*t[i].pdf(e);return n},i.cdf=function(e){for(var n=0,i=0;i<a;++i)n+=r[i]*t[i].cdf(e);return n},i.icdf=function(){throw Error("Mixture icdf not supported.")},i.distributions(t).weights(e)}function z(t,e){null==e&&(e=null==t?1:t,t=0);var n,r,i,a={};return a.min=function(t){return arguments.length?(n=t||0,i=r-n,a):n},a.max=function(t){return arguments.length?(r=t||0,i=r-n,a):r},a.sample=function(){return n+i*Math.random()},a.pdf=function(t){return t>=n&&t<=r?1/i:0},a.cdf=function(t){return t<n?0:t>r?1:(t-n)/i},a.icdf=function(t){return t>=0&&t<=1?n+t*i:NaN},a.min(t).max(e)}function T(t,e,n){return t.fields=e||[],t.fname=n,t}function O(t){return null==t?null:t.fname}function R(t){return null==t?null:t.fields}function P(t){throw Error(t)}function D(t){function e(){a.push(f+t.substring(n,r)),f="",n=r+1}var n,r,i,a=[],o=null,u=0,s=t.length,f="";for(t+="",n=r=0;r<s;++r)if("\\"===(i=t[r]))f+=t.substring(n,r),n=++r;else if(i===o)e(),o=null,u=-1;else{if(o)continue;n===u&&'"'===i?(n=r+1,o=i):n===u&&"'"===i?(n=r+1,o=i):"."!==i||u?"["===i?(r>n&&e(),u=n=r+1):"]"===i&&(u||P("Access path missing open bracket: "+t),u>0&&e(),u=0,n=r+1):r>n?e():n=r+1}return u&&P("Access path missing closing bracket: "+t),o&&P("Access path missing closing quote: "+t),r>n&&(++r,e()),a}function L(t){return t===Object(t)}function q(t){return"string"==typeof t}function U(t){return XM(t)?"["+t.map(U)+"]":L(t)||q(t)?JSON.stringify(t).replace("\u2028","\\u2028").replace("\u2029","\\u2029"):t}function F(t,e){var n=D(t),r="return _["+n.map(U).join("][")+"];";return T(Function("_",r),[t=1===n.length?n[0]:t],e||t)}function j(t,e,n){var r=[e].concat([].slice.call(n));console[t].apply(console,r)}function I(t){var e=t||nk;return{level:function(t){return arguments.length?(e=+t,this):e},warn:function(){return e>=rk&&j("warn","WARN",arguments),this},info:function(){return e>=ik&&j("log","INFO",arguments),this},debug:function(){return e>=ak&&j("log","DEBUG",arguments),this}}}function $(t){return null!=t?XM(t)?t:[t]:[]}function B(t,e){var n,r,i,a,o,u,s,f,c=[],l=(t=$(t)).map(function(t,e){return null==t?null:(c.push(e),D(t).map(U).join("]["))}),h=c.length-1,d=$(e),p="var u,v;return ";if(h<0)return null;for(r=0;r<=h;++r)n=c[r],i=l[n],a="(u=a["+i+"])",o="(v=b["+i+"])",u="((v=v instanceof Date?+v:v),(u=u instanceof Date?+u:u))",s="descending"!==d[n]?(f=1,-1):(f=-1,1),p+="("+a+"<"+o+"||u==null)&&v!=null?"+s+":(u>v||v==null)&&u!=null?"+f+":"+u+"!==u&&v===v?"+s+":v!==v&&u===u?"+f+(n<h?":":":0");return T(Function("a","b",p+";"),t.filter(function(t){return null!=t}))}function Y(t){return"function"==typeof t}function G(t){return Y(t)?t:function(){return t}}function W(t,e){function n(){e(i),r=i=null}var r,i;return function(e){i=e,r&&clearTimeout(r),r=setTimeout(n,t)}}function H(t){for(var e,n,r=1,i=arguments.length;r<i;++r){e=arguments[r];for(n in e)t[n]=e[n]}return t}function X(t,e){var n,r,i,a,o,u=-1,s=t.length;if(null==e){for(;++u<s;)if(null!=(r=t[u])&&r>=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=t[u])&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}else{for(;++u<s;)if(null!=(r=e(t[u],u,t))&&r>=r){n=i=r;break}for(a=o=u;++u<s;)null!=(r=e(t[u],u,t))&&(n>r&&(n=r,a=u),i<r&&(i=r,o=u))}return[a,o]}function V(t){function e(t){return i.hasOwnProperty(t)&&i[t]!==ok}var n,r,i={};return n={size:0,empty:0,object:i,has:e,get:function(t){return e(t)?i[t]:void 0},set:function(t,r){return e(t)||(++n.size,i[t]===ok&&--n.empty),i[t]=r,this},"delete":function(t){return e(t)&&(--n.size,++n.empty,i[t]=ok),this},clear:function(){n.size=n.empty=0,n.object=i={}},test:function(t){return arguments.length?(r=t,n):r},clean:function(){var t,e,a={},o=0;for(t in i)(e=i[t])===ok||r&&r(e)||(a[t]=e,++o);n.size=o,n.empty=0,n.object=i=a}},t&&Object.keys(t).forEach(function(e){n.set(e,t[e])}),n}function J(t,e){var n=t.prototype=Object.create(e.prototype);return n.constructor=t,n}function Z(t){return"boolean"==typeof t}function Q(t){return"[object Date]"===Object.prototype.toString.call(t)}function K(t){return"number"==typeof t}function tt(t){return"[object RegExp]"===Object.prototype.toString.call(t)}function et(t){return t=t?$(t):t,T(t&&t.length?Function("_","return ''+"+t.map(function(t){return"_["+D(t).map(U).join("][")+"]"}).join("+'|'+")+";"):function(){return""},t,"key")}function nt(t,e,n,r){var i=e.length,a=n.length;if(!a)return e;if(!i)return n;for(var o=r||new e.constructor(i+a),u=0,s=0,f=0;u<i&&s<a;++f)o[f]=t(e[u],n[s])>0?n[s++]:e[u++];for(;u<i;++u,++f)o[f]=e[u];for(;s<a;++s,++f)o[f]=n[s];return o}function rt(t,e){for(var n="";--e>=0;)n+=t;return n}function it(t,e,n,r){var i=n||" ",a=t+"",o=e-a.length;return o<=0?a:"left"===r?rt(i,o)+a:"center"===r?rt(i,~~(o/2))+a+rt(i,Math.ceil(o/2)):a+rt(i,o)}function at(t){return t[t.length-1]}function ot(t){return null==t||""===t?null:!(!t||"false"===t||"0"===t||!t)}function ut(t){return K(t)?t:Q(t)?t:Date.parse(t)}function st(t,e){return e=e||ut,null==t||""===t?null:e(t)}function ft(t){return null==t||""===t?null:+t}function ct(t){return null==t||""===t?null:t+""}function lt(t){for(var e={},n=0,r=t.length;n<r;++n)e[t[n]]=1;return e}function ht(t,e,n,r){var i=null!=r?r:"\u2026",a=t+"",o=a.length,u=Math.max(0,e-i.length);return o<=e?a:"left"===n?i+a.slice(o-u):"center"===n?a.slice(0,Math.ceil(u/2))+i+a.slice(o-~~(u/2)):a.slice(0,u)+i}function dt(t,e,n){if(t){var r,i=0,a=t.length;if(e)for(;i<a;++i)(r=e(t[i]))&&n(r,i,t);else t.forEach(n)}}function pt(){}function gt(t,e){var n=new pt;if(t instanceof pt)t.each(function(t,e){n.set(e,t)});else if(Array.isArray(t)){var r,i=-1,a=t.length;if(null==e)for(;++i<a;)n.set(i,t[i]);else for(;++i<a;)n.set(e(r=t[i],i,t),r)}else if(t)for(var o in t)n.set(o,t[o]);return n}function vt(){function t(e,i,o,u){if(i>=a.length)return null!=r?r(e):null!=n?e.sort(n):e;for(var s,f,c,l=-1,h=e.length,d=a[i++],p=gt(),g=o();++l<h;)(c=p.get(s=d(f=e[l])+""))?c.push(f):p.set(s,[f]);return p.each(function(e,n){u(g,n,t(e,i,o,u))}),g}function e(t,n){if(++n>a.length)return t;var i,u=o[n-1];return null!=r&&n>=a.length?i=t.entries():(i=[],t.each(function(t,r){i.push({key:r,values:e(t,n)})})),null!=u?i.sort(function(t,e){return u(t.key,e.key)}):i}var n,r,i,a=[],o=[];return i={object:function(e){return t(e,0,mt,yt)},map:function(e){return t(e,0,bt,_t)},entries:function(n){return e(t(n,0,bt,_t),0)},key:function(t){return a.push(t),i},sortKeys:function(t){return o[a.length-1]=t,i},sortValues:function(t){return n=t,i},rollup:function(t){return r=t,i}}}function mt(){return{}}function yt(t,e,n){t[e]=n}function bt(){return gt()}function _t(t,e,n){t.set(e,n)}function xt(){for(var t,e=0,n=arguments.length,r={};e<n;++e){if(!(t=arguments[e]+"")||t in r)throw new Error("illegal type: "+t);r[t]=[]}return new wt(r)}function wt(t){this._=t}function Mt(t,e){return t.trim().split(/^|\s+/).map(function(t){var n="",r=t.indexOf(".");if(r>=0&&(n=t.slice(r+1),t=t.slice(0,r)),t&&!e.hasOwnProperty(t))throw new Error("unknown type: "+t);return{type:t,name:n}})}function kt(t,e){for(var n,r=0,i=t.length;r<i;++r)if((n=t[r]).name===e)return n.value}function Et(t,e,n){for(var r=0,i=t.length;r<i;++r)if(t[r].name===e){t[r]=uk,t=t.slice(0,r).concat(t.slice(r+1));break}return null!=n&&t.push({name:e,value:n}),t}function St(t,e){function n(t){var e,n=f.status;if(!n&&Ct(f)||n>=200&&n<300||304===n){if(a)try{e=a.call(r,f)}catch(t){return void u.call("error",r,t)}else e=f;u.call("load",r,e)}else u.call("error",r,t)}var r,i,a,o,u=xt("beforesend","progress","load","error"),s=gt(),f=new XMLHttpRequest,c=null,l=null,h=0;if("undefined"==typeof XDomainRequest||"withCredentials"in f||!/^(http(s)?:)?\/\//.test(t)||(f=new XDomainRequest),"onload"in f?f.onload=f.onerror=f.ontimeout=n:f.onreadystatechange=function(t){f.readyState>3&&n(t)},f.onprogress=function(t){u.call("progress",r,t)},r={header:function(t,e){return t=(t+"").toLowerCase(),arguments.length<2?s.get(t):(null==e?s.remove(t):s.set(t,e+""),r)},mimeType:function(t){return arguments.length?(i=null==t?null:t+"",r):i},responseType:function(t){return arguments.length?(o=t,r):o},timeout:function(t){return arguments.length?(h=+t,r):h},user:function(t){return arguments.length<1?c:(c=null==t?null:t+"",r)},password:function(t){return arguments.length<1?l:(l=null==t?null:t+"",r)},response:function(t){return a=t,r},get:function(t,e){return r.send("GET",t,e)},post:function(t,e){return r.send("POST",t,e)},send:function(e,n,a){return f.open(e,t,!0,c,l),null==i||s.has("accept")||s.set("accept",i+",*/*"),f.setRequestHeader&&s.each(function(t,e){f.setRequestHeader(e,t)}),null!=i&&f.overrideMimeType&&f.overrideMimeType(i),null!=o&&(f.responseType=o),h>0&&(f.timeout=h),null==a&&"function"==typeof n&&(a=n,n=null),null!=a&&1===a.length&&(a=At(a)),null!=a&&r.on("error",a).on("load",function(t){a(null,t)}),u.call("beforesend",r,f),f.send(null==n?null:n),r},abort:function(){return f.abort(),r},on:function(){var t=u.on.apply(u,arguments);return t===u?r:t}},null!=e){if("function"!=typeof e)throw new Error("invalid callback: "+e);return r.get(e)}return r}function At(t){return function(e,n){t(null==e?n:null)}}function Ct(t){var e=t.responseType;return e&&"text"!==e?t.response:t.responseText}function Nt(t){return new Function("d","return {"+t.map(function(t,e){return JSON.stringify(t)+": d["+e+"]"}).join(",")+"}")}function zt(t,e){var n=Nt(t);return function(r,i){return e(n(r),i,t)}}function Tt(t){var e=Object.create(null),n=[];return t.forEach(function(t){for(var r in t)r in e||n.push(e[r]=r)}),n}function Ot(t){function e(t,e){var r,i,a=n(t,function(t,n){if(r)return r(t,n-1);i=t,r=e?zt(t,e):Nt(t)});return a.columns=i,a}function n(t,e){function n(){if(c>=f)return o;if(i)return i=!1,a;var e,n=c;if(34===t.charCodeAt(n)){for(var r=n;r++<f;)if(34===t.charCodeAt(r)){if(34!==t.charCodeAt(r+1))break;++r}return c=r+2,e=t.charCodeAt(r+1),13===e?(i=!0,10===t.charCodeAt(r+2)&&++c):10===e&&(i=!0),t.slice(n+1,r).replace(/""/g,'"')}for(;c<f;){var u=1;if(10===(e=t.charCodeAt(c++)))i=!0;else if(13===e)i=!0,10===t.charCodeAt(c)&&(++c,++u);else if(e!==s)continue;return t.slice(n,c-u)}return t.slice(n)}for(var r,i,a={},o={},u=[],f=t.length,c=0,l=0;(r=n())!==o;){for(var h=[];r!==a&&r!==o;)h.push(r),r=n();e&&null==(h=e(h,l++))||u.push(h)}return u}function r(e,n){return null==n&&(n=Tt(e)),[n.map(o).join(t)].concat(e.map(function(e){return n.map(function(t){return o(e[t])}).join(t)})).join("\n")}function i(t){return t.map(a).join("\n")}function a(e){return e.map(o).join(t)}function o(t){return null==t?"":u.test(t+="")?'"'+t.replace(/\"/g,'""')+'"':t}var u=new RegExp('["'+t+"\n\r]"),s=t.charCodeAt(0);return{parse:e,parseRows:n,format:r,formatRows:i}}function Rt(t){return{options:t||{},sanitize:Lt,load:Dt,file:Ut,http:qt}}function Pt(t,e){return H({},t.options,e)}function Dt(t,e){var n=this;return n.sanitize(t,e).then(function(t){var r=t.href;return jt(r,fk)?n.file(r.slice(fk.length)):n.http(r,e)})}function Lt(t,e){return e=Pt(this,e),new Promise(function(n,r){var i,a,o,u;if(null==t||"string"!=typeof t)return void r("Sanitize failure, invalid URI: "+U(t));a=sk.test(t),(u=e.baseURL)&&!a&&(jt(t,"/")||"/"===u[u.length-1]||(t="/"+t),t=u+t),o=(i=jt(t,fk))||"file"===e.mode||"http"!==e.mode&&!a&&Ft(),o?t=(i?"":fk)+t:jt(t,"//")&&(t=(e.defaultProtocol||"http")+":"+t),n({href:t})})}function qt(t,e){return e=Pt(this,e),new Promise(function(n,r){var i,a=St(t);for(i in e.headers)a.header(i,e.headers[i]);ck.forEach(function(t){e[t]&&a[t](e[t])}),a.on("error",function(e){r(e||"Error loading URL: "+t)}).on("load",function(t){var e=t&&t.responseText;t&&0!==t.status?n(e):r(e||"Error")}).get()})}function Ut(t){return new Promise(function(e,n){var r=Ft();r?r.readFile(t,function(t,r){t?n(t):e(r)}):n("No file system access for "+t)})}function Ft(){var t="function"==typeof require&&require("fs");return t&&Y(t.readFile)?t:null}function jt(t,e){return null!=t&&0===t.lastIndexOf(e,0)}function It(t,e){var n,r,i,a,o=hk.slice();for(r=0,i=t.length;r<i;++r){for(n=e?t[r][e]:t[r],a=0;a<o.length;++a)Bt(n)&&!o[a](n)&&(o.splice(a,1),--a);if(0===o.length)return"string"}return dk[hk.indexOf(o[0])]}function $t(t,e){return e.reduce(function(e,n){return e[n]=It(t,n),e},{})}function Bt(t){return null!=t&&t===t}function Yt(t){return"true"===t||"false"===t||!0===t||!1===t}function Gt(t){return!isNaN(Date.parse(t))}function Wt(t){return!(isNaN(+t)||t instanceof Date)}function Ht(t){return Wt(t)&&(t=+t)==~~t}function Xt(t){return function(e,n){var r={delimiter:t};return Vt(e,n?H(n,r):r)}}function Vt(t,e){return e.header&&(t=e.header.map(U).join(e.delimiter)+"\n"+t),Ot(e.delimiter).parse(t+"")}function Jt(t){return!("function"!=typeof Buffer||!Y(Buffer.isBuffer))&&Buffer.isBuffer(t)}function Zt(t,e){var n=e&&e.property?F(e.property):ZM;return L(t)&&!Jt(t)?Qt(n(t)):n(JSON.parse(t))}function Qt(t,e){return e&&e.copy?JSON.parse(JSON.stringify(t)):t}function Kt(){}function te(t){if(!t)return Kt;var e,n,r=t.scale[0],i=t.scale[1],a=t.translate[0],o=t.translate[1];return function(t,u){u||(e=n=0),t[0]=(e+=t[0])*r+a,t[1]=(n+=t[1])*i+o}}function ee(t,e){for(var n,r=t.length,i=r-e;i<--r;)n=t[i],t[i++]=t[r],t[r]=n}function ne(t,e){return"GeometryCollection"===e.type?{type:"FeatureCollection",features:e.geometries.map(function(e){return re(t,e)})}:re(t,e)}function re(t,e){var n={type:"Feature",id:e.id,properties:e.properties||{},geometry:ie(t,e)};return null==e.id&&delete n.id,n}function ie(t,e){function n(t,e){e.length&&e.pop();for(var n,r=f[t<0?~t:t],i=0,a=r.length;i<a;++i)e.push(n=r[i].slice()),s(n,i);t<0&&ee(e,a)}function r(t){return t=t.slice(),s(t,0),t}function i(t){for(var e=[],r=0,i=t.length;r<i;++r)n(t[r],e);return e.length<2&&e.push(e[0].slice()),e}function a(t){for(var e=i(t);e.length<4;)e.push(e[0].slice());return e}function o(t){return t.map(a)}function u(t){var e=t.type;return"GeometryCollection"===e?{type:e,geometries:t.geometries.map(u)}:e in c?{type:e,coordinates:c[e](t)}:null}var s=te(t.transform),f=t.arcs,c={Point:function(t){return r(t.coordinates)},MultiPoint:function(t){return t.coordinates.map(r)},LineString:function(t){return i(t.arcs)},MultiLineString:function(t){return t.arcs.map(i)},Polygon:function(t){return o(t.arcs)},MultiPolygon:function(t){return t.arcs.map(o)}};return u(e)}function ae(t,e){function n(e){var n,r=t.arcs[e<0?~e:e],i=r[0];return t.transform?(n=[0,0],r.forEach(function(t){n[0]+=t[0],n[1]+=t[1]})):n=r[r.length-1],e<0?[n,i]:[i,n]}function r(t,e){for(var n in t){var r=t[n];delete e[r.start],delete r.start,delete r.end,r.forEach(function(t){i[t<0?~t:t]=1}),u.push(r)}}var i={},a={},o={},u=[],s=-1;return e.forEach(function(n,r){var i,a=t.arcs[n<0?~n:n];a.length<3&&!a[1][0]&&!a[1][1]&&(i=e[++s],e[s]=n,e[r]=i)}),e.forEach(function(t){var e,r,i=n(t),u=i[0],s=i[1];if(e=o[u])if(delete o[e.end],e.push(t),e.end=s,r=a[s]){delete a[r.start];var f=r===e?e:e.concat(r);a[f.start=e.start]=o[f.end=r.end]=f}else a[e.start]=o[e.end]=e;else if(e=a[s])if(delete a[e.start],e.unshift(t),e.start=u,r=o[u]){delete o[r.end];var c=r===e?e:r.concat(e);a[c.start=r.start]=o[c.end=e.end]=c}else a[e.start]=o[e.end]=e;else e=[t],a[e.start=u]=o[e.end=s]=e}),r(o,a),r(a,o),e.forEach(function(t){i[t<0?~t:t]||u.push([t])}),u}function oe(t){return ie(t,ue.apply(this,arguments))}function ue(t,e,n){function r(t){var e=t<0?~t:t;(f[e]||(f[e]=[])).push({i:t,g:s})}function i(t){t.forEach(r)}function a(t){t.forEach(i)}function o(t){"GeometryCollection"===t.type?t.geometries.forEach(o):t.type in c&&(s=t,c[t.type](t.arcs))}var u=[];if(arguments.length>1){var s,f=[],c={LineString:i,MultiLineString:a,Polygon:a,MultiPolygon:function(t){t.forEach(a)}};o(e),f.forEach(arguments.length<3?function(t){u.push(t[0].i)}:function(t){n(t[0].g,t[t.length-1].g)&&u.push(t[0].i)})}else for(var l=0,h=t.arcs.length;l<h;++l)u.push(l);return{type:"MultiLineString",arcs:ae(t,u)}}function se(t,e){var n,r;return t=Zt(t,e),e&&(r=e.feature)?(n=t.objects[r])?ne(t,n).features:P("Invalid TopoJSON object: "+r):e&&(r=e.mesh)?(n=t.objects[r])?[oe(t,n)]:P("Invalid TopoJSON object: "+r):void P("Missing TopoJSON feature or mesh parameter.")}function fe(t,e){return arguments.length>1?(pk[t]=e,this):pk.hasOwnProperty(t)?pk[t]:null}function ce(t,e,n,r){function i(e){return t(e=new Date(+e)),e}return i.floor=i,i.ceil=function(n){return t(n=new Date(n-1)),e(n,1),t(n),n},i.round=function(t){var e=i(t),n=i.ceil(t);return t-e<n-t?e:n},i.offset=function(t,n){return e(t=new Date(+t),null==n?1:Math.floor(n)),t},i.range=function(n,r,a){var o=[];if(n=i.ceil(n),a=null==a?1:Math.floor(a),!(n<r&&a>0))return o;do{o.push(new Date(+n))}while(e(n,a),t(n),n<r);return o},i.filter=function(n){return ce(function(e){if(e>=e)for(;t(e),!n(e);)e.setTime(e-1)},function(t,r){if(t>=t)for(;--r>=0;)for(;e(t,1),!n(t););})},n&&(i.count=function(e,r){return gk.setTime(+e),vk.setTime(+r),t(gk),t(vk),Math.floor(n(gk,vk))},i.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?i.filter(r?function(e){return r(e)%t==0}:function(e){return i.count(0,e)%t==0}):i:null}),i}function le(t){return ce(function(e){e.setDate(e.getDate()-(e.getDay()+7-t)%7),e.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+7*e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*yk)/bk})}function he(t){return ce(function(e){e.setUTCDate(e.getUTCDate()-(e.getUTCDay()+7-t)%7),e.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+7*e)},function(t,e){return(e-t)/bk})}function de(t){if(0<=t.y&&t.y<100){var e=new Date(-1,t.m,t.d,t.H,t.M,t.S,t.L);return e.setFullYear(t.y),e}return new Date(t.y,t.m,t.d,t.H,t.M,t.S,t.L)}function pe(t){if(0<=t.y&&t.y<100){var e=new Date(Date.UTC(-1,t.m,t.d,t.H,t.M,t.S,t.L));return e.setUTCFullYear(t.y),e}return new Date(Date.UTC(t.y,t.m,t.d,t.H,t.M,t.S,t.L))}function ge(t){return{y:t,m:0,d:1,H:0,M:0,S:0,L:0}}function ve(t){function e(t,e){return function(n){var r,i,a,o=[],u=-1,s=0,f=t.length;for(n instanceof Date||(n=new Date(+n));++u<f;)37===t.charCodeAt(u)&&(o.push(t.slice(s,u)),null!=(i=jk[r=t.charAt(++u)])?r=t.charAt(++u):i="e"===r?" ":"0",(a=e[r])&&(r=a(n,i)),o.push(r),s=u+1);return o.push(t.slice(s,u)),o.join("")}}function n(t,e){return function(n){var i=ge(1900);if(r(i,t,n+="",0)!=n.length)return null;if("p"in i&&(i.H=i.H%12+12*i.p),"W"in i||"U"in i){"w"in i||(i.w="W"in i?1:0);var a="Z"in i?pe(ge(i.y)).getUTCDay():e(ge(i.y)).getDay();i.m=0,i.d="W"in i?(i.w+6)%7+7*i.W-(a+5)%7:i.w+7*i.U-(a+6)%7}return"Z"in i?(i.H+=i.Z/100|0,i.M+=i.Z%100,pe(i)):e(i)}}function r(t,e,n,r){for(var i,a,o=0,u=e.length,s=n.length;o<u;){if(r>=s)return-1;if(37===(i=e.charCodeAt(o++))){if(i=e.charAt(o++),!(a=$[i in jk?e.charAt(o++):i])||(r=a(t,n,r))<0)return-1}else if(i!=n.charCodeAt(r++))return-1}return r}function i(t,e,n){var r=z.exec(e.slice(n));return r?(t.p=T[r[0].toLowerCase()],n+r[0].length):-1}function a(t,e,n){var r=P.exec(e.slice(n));return r?(t.w=D[r[0].toLowerCase()],n+r[0].length):-1}function o(t,e,n){var r=O.exec(e.slice(n));return r?(t.w=R[r[0].toLowerCase()],n+r[0].length):-1}function u(t,e,n){var r=U.exec(e.slice(n));return r?(t.m=F[r[0].toLowerCase()],n+r[0].length):-1}function s(t,e,n){var r=L.exec(e.slice(n));return r?(t.m=q[r[0].toLowerCase()],n+r[0].length):-1}function f(t,e,n){return r(t,w,e,n)}function c(t,e,n){return r(t,M,e,n)}function l(t,e,n){return r(t,k,e,n)}function h(t){return A[t.getDay()]}function d(t){return S[t.getDay()]}function p(t){return N[t.getMonth()]}function g(t){return C[t.getMonth()]}function v(t){return E[+(t.getHours()>=12)]}function m(t){return A[t.getUTCDay()]}function y(t){return S[t.getUTCDay()]}function b(t){return N[t.getUTCMonth()]}function _(t){return C[t.getUTCMonth()]}function x(t){return E[+(t.getUTCHours()>=12)]}var w=t.dateTime,M=t.date,k=t.time,E=t.periods,S=t.days,A=t.shortDays,C=t.months,N=t.shortMonths,z=be(E),T=_e(E),O=be(S),R=_e(S),P=be(A),D=_e(A),L=be(C),q=_e(C),U=be(N),F=_e(N),j={a:h,A:d,b:p,B:g,c:null,d:De,e:De,H:Le,I:qe,j:Ue,L:Fe,m:je,M:Ie,p:v,S:$e,U:Be,w:Ye,W:Ge,x:null,X:null,y:We,Y:He,Z:Xe,"%":cn},I={a:m,A:y,b:b,B:_,c:null,d:Ve,e:Ve,H:Je,I:Ze,j:Qe,L:Ke,m:tn,M:en,p:x,S:nn,U:rn,w:an,W:on,x:null,X:null,y:un,Y:sn,Z:fn,"%":cn},$={a:a,A:o,b:u,B:s,c:f,d:Ce,e:Ce,H:ze,I:ze,j:Ne,L:Re,m:Ae,M:Te,p:i,S:Oe,U:we,w:xe,W:Me,x:c,X:l,y:Ee,Y:ke,Z:Se,"%":Pe};return j.x=e(M,j),j.X=e(k,j),j.c=e(w,j),I.x=e(M,I),I.X=e(k,I),I.c=e(w,I),{format:function(t){var n=e(t+="",j);return n.toString=function(){return t},n},parse:function(t){var e=n(t+="",de);return e.toString=function(){return t},e},utcFormat:function(t){var n=e(t+="",I);return n.toString=function(){return t},n},utcParse:function(t){var e=n(t,pe);return e.toString=function(){return t},e}}}function me(t,e,n){var r=t<0?"-":"",i=(r?-t:t)+"",a=i.length;return r+(a<n?new Array(n-a+1).join(e)+i:i)}function ye(t){return t.replace(Bk,"\\$&")}function be(t){return new RegExp("^(?:"+t.map(ye).join("|")+")","i")}function _e(t){for(var e={},n=-1,r=t.length;++n<r;)e[t[n].toLowerCase()]=n;return e}function xe(t,e,n){var r=Ik.exec(e.slice(n,n+1));return r?(t.w=+r[0],n+r[0].length):-1}function we(t,e,n){var r=Ik.exec(e.slice(n));return r?(t.U=+r[0],n+r[0].length):-1}function Me(t,e,n){var r=Ik.exec(e.slice(n));return r?(t.W=+r[0],n+r[0].length):-1}function ke(t,e,n){var r=Ik.exec(e.slice(n,n+4));return r?(t.y=+r[0],n+r[0].length):-1}function Ee(t,e,n){var r=Ik.exec(e.slice(n,n+2));return r?(t.y=+r[0]+(+r[0]>68?1900:2e3),n+r[0].length):-1}function Se(t,e,n){var r=/^(Z)|([+-]\d\d)(?:\:?(\d\d))?/.exec(e.slice(n,n+6));return r?(t.Z=r[1]?0:-(r[2]+(r[3]||"00")),n+r[0].length):-1}function Ae(t,e,n){var r=Ik.exec(e.slice(n,n+2));return r?(t.m=r[0]-1,n+r[0].length):-1}function Ce(t,e,n){var r=Ik.exec(e.slice(n,n+2));return r?(t.d=+r[0],n+r[0].length):-1}function Ne(t,e,n){var r=Ik.exec(e.slice(n,n+3));return r?(t.m=0,t.d=+r[0],n+r[0].length):-1}function ze(t,e,n){var r=Ik.exec(e.slice(n,n+2));return r?(t.H=+r[0],n+r[0].length):-1}function Te(t,e,n){var r=Ik.exec(e.slice(n,n+2));return r?(t.M=+r[0],n+r[0].length):-1}function Oe(t,e,n){var r=Ik.exec(e.slice(n,n+2));return r?(t.S=+r[0],n+r[0].length):-1}function Re(t,e,n){var r=Ik.exec(e.slice(n,n+3));return r?(t.L=+r[0],n+r[0].length):-1}function Pe(t,e,n){var r=$k.exec(e.slice(n,n+1));return r?n+r[0].length:-1}function De(t,e){return me(t.getDate(),e,2)}function Le(t,e){return me(t.getHours(),e,2)}function qe(t,e){return me(t.getHours()%12||12,e,2)}function Ue(t,e){return me(1+Mk.count(Ak(t),t),e,3)}function Fe(t,e){return me(t.getMilliseconds(),e,3)}function je(t,e){return me(t.getMonth()+1,e,2)}function Ie(t,e){return me(t.getMinutes(),e,2)}function $e(t,e){return me(t.getSeconds(),e,2)}function Be(t,e){return me(kk.count(Ak(t),t),e,2)}function Ye(t){return t.getDay()}function Ge(t,e){return me(Ek.count(Ak(t),t),e,2)}function We(t,e){return me(t.getFullYear()%100,e,2)}function He(t,e){return me(t.getFullYear()%1e4,e,4)}function Xe(t){var e=t.getTimezoneOffset();return(e>0?"-":(e*=-1,"+"))+me(e/60|0,"0",2)+me(e%60,"0",2)}function Ve(t,e){return me(t.getUTCDate(),e,2)}function Je(t,e){return me(t.getUTCHours(),e,2)}function Ze(t,e){return me(t.getUTCHours()%12||12,e,2)}function Qe(t,e){return me(1+zk.count(Pk(t),t),e,3)}function Ke(t,e){return me(t.getUTCMilliseconds(),e,3)}function tn(t,e){return me(t.getUTCMonth()+1,e,2)}function en(t,e){return me(t.getUTCMinutes(),e,2)}function nn(t,e){return me(t.getUTCSeconds(),e,2)}function rn(t,e){return me(Tk.count(Pk(t),t),e,2)}function an(t){return t.getUTCDay()}function on(t,e){return me(Ok.count(Pk(t),t),e,2)}function un(t,e){return me(t.getUTCFullYear()%100,e,2)}function sn(t,e){return me(t.getUTCFullYear()%1e4,e,4)}function fn(){return"+0000"}function cn(){return"%"}function ln(t){return Dk=ve(t),Lk=Dk.format,qk=Dk.parse,Uk=Dk.utcFormat,Fk=Dk.utcParse,Dk}function hn(t,e,n){e=e||{};var r=fe(e.type||"json");return r||P("Unknown data format type: "+e.type),t=r(t,e),e.parse&&dn(t,e.parse,n),t.hasOwnProperty("columns")&&delete t.columns,t}function dn(t,e,n){n=n||qk;var r,i,a,o,u,s,f,c=t.columns||Object.keys(t[0]);for("auto"===e&&(e=$t(t,c)),c=Object.keys(e),r=c.map(function(t){var r,i,a=e[t];if(a&&(0===a.indexOf("date:")||0===a.indexOf("utc:")))return r=a.split(/:(.+)?/,2),i=r[1],("'"===i[0]&&"'"===i[i.length-1]||'"'===i[0]&&'"'===i[i.length-1])&&(i=i.slice(1,-1)),"utc"===r[0]?Fk(i):n(i);if(!lk[a])throw Error("Illegal format pattern: "+t+":"+a);return lk[a]}),o=0,s=t.length,f=c.length;o<s;++o)for(i=t[o],u=0;u<f;++u)a=c[u],i[a]=r[u](i[a])}function pn(t){this.clear(),t&&this.union(t)}function gn(t,e){var n,r=[];return n={id:"gradient_"+Gk++,x1:t?t[0]:0,y1:t?t[1]:0,x2:e?e[0]:1,y2:e?e[1]:0,stops:r,stop:function(t,e){return r.push({offset:t,color:e}),n}}}function vn(t){this.mark=t,this.bounds=this.bounds||new pn}function mn(t){vn.call(this,t),this.items=this.items||[]}function yn(t,e,n){return!t&&"undefined"!=typeof document&&document.createElement&&(t=document),t?n?t.createElementNS(n,e):t.createElement(e):null}function bn(t,e){e=e.toLowerCase();for(var n=t.childNodes,r=0,i=n.length;r<i;++r)if(n[r].tagName.toLowerCase()===e)return n[r]}function _n(t,e,n,r){var i,a=t.childNodes[e];return a&&a.tagName.toLowerCase()===n.toLowerCase()||(i=a||null,a=yn(t.ownerDocument,n,r),t.insertBefore(a,i)),a}function xn(t,e){for(var n=t.childNodes,r=n.length;r>e;)t.removeChild(n[--r]);return t}function wn(t){return"mark-"+t.marktype+(t.role?" role-"+t.role:"")+(t.name?" "+t.name:"")}function Mn(t,e){var n=yn(null,"canvas");if(n&&n.getContext)n.width=t,n.height=e;else if(Wk)try{n=new Wk(t,e)}catch(t){n=null}return n}function kn(t){this._pending=0,this._loader=t||Rt()}function En(t){t._pending+=1}function Sn(t){t._pending-=1}function An(){this._x0=this._y0=this._x1=this._y1=null,this._=""}function Cn(){return new An}function Nn(t){return function(){return t}}function zn(t){
return t>1?0:t<-1?oE:Math.acos(t)}function Tn(t){return t>=1?uE:t<=-1?-uE:Math.asin(t)}function On(t){return t.innerRadius}function Rn(t){return t.outerRadius}function Pn(t){return t.startAngle}function Dn(t){return t.endAngle}function Ln(t){return t&&t.padAngle}function qn(t,e,n,r,i,a,o,u){var s=n-t,f=r-e,c=o-i,l=u-a,h=(c*(e-a)-l*(t-i))/(l*s-c*f);return[t+h*s,e+h*f]}function Un(t,e,n,r,i,a,o){var u=t-n,s=e-r,f=(o?a:-a)/iE(u*u+s*s),c=f*s,l=-f*u,h=t+c,d=e+l,p=n+c,g=r+l,v=(h+p)/2,m=(d+g)/2,y=p-h,b=g-d,_=y*y+b*b,x=i-a,w=h*g-p*d,M=(b<0?-1:1)*iE(eE(0,x*x*_-w*w)),k=(w*b-y*M)/_,E=(-w*y-b*M)/_,S=(w*b+y*M)/_,A=(-w*y+b*M)/_,C=k-v,N=E-m,z=S-v,T=A-m;return C*C+N*N>z*z+T*T&&(k=S,E=A),{cx:k,cy:E,x01:-c,y01:-l,x11:k*(i/x-1),y11:E*(i/x-1)}}function Fn(t){this._context=t}function jn(t){return new Fn(t)}function In(t){return t[0]}function $n(t){return t[1]}function Bn(){function t(t){var u,s,f,c=t.length,l=!1;for(null==i&&(o=a(f=Cn())),u=0;u<=c;++u)!(u<c&&r(s=t[u],u,t))===l&&((l=!l)?o.lineStart():o.lineEnd()),l&&o.point(+e(s,u,t),+n(s,u,t));if(f)return o=null,f+""||null}var e=In,n=$n,r=Nn(!0),i=null,a=jn,o=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Nn(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Nn(+e),t):n},t.defined=function(e){return arguments.length?(r="function"==typeof e?e:Nn(!!e),t):r},t.curve=function(e){return arguments.length?(a=e,null!=i&&(o=a(i)),t):a},t.context=function(e){return arguments.length?(null==e?i=o=null:o=a(i=e),t):i},t}function Yn(){function t(t){var e,c,l,h,d,p=t.length,g=!1,v=new Array(p),m=new Array(p);for(null==u&&(f=s(d=Cn())),e=0;e<=p;++e){if(!(e<p&&o(h=t[e],e,t))===g)if(g=!g)c=e,f.areaStart(),f.lineStart();else{for(f.lineEnd(),f.lineStart(),l=e-1;l>=c;--l)f.point(v[l],m[l]);f.lineEnd(),f.areaEnd()}g&&(v[e]=+n(h,e,t),m[e]=+i(h,e,t),f.point(r?+r(h,e,t):v[e],a?+a(h,e,t):m[e]))}if(d)return f=null,d+""||null}function e(){return Bn().defined(o).curve(s).context(u)}var n=In,r=null,i=Nn(0),a=$n,o=Nn(!0),u=null,s=jn,f=null;return t.x=function(e){return arguments.length?(n="function"==typeof e?e:Nn(+e),r=null,t):n},t.x0=function(e){return arguments.length?(n="function"==typeof e?e:Nn(+e),t):n},t.x1=function(e){return arguments.length?(r=null==e?null:"function"==typeof e?e:Nn(+e),t):r},t.y=function(e){return arguments.length?(i="function"==typeof e?e:Nn(+e),a=null,t):i},t.y0=function(e){return arguments.length?(i="function"==typeof e?e:Nn(+e),t):i},t.y1=function(e){return arguments.length?(a=null==e?null:"function"==typeof e?e:Nn(+e),t):a},t.lineX0=t.lineY0=function(){return e().x(n).y(i)},t.lineY1=function(){return e().x(n).y(a)},t.lineX1=function(){return e().x(r).y(i)},t.defined=function(e){return arguments.length?(o="function"==typeof e?e:Nn(!!e),t):o},t.curve=function(e){return arguments.length?(s=e,null!=u&&(f=s(u)),t):s},t.context=function(e){return arguments.length?(null==e?u=f=null:f=s(u=e),t):u},t}function Gn(){}function Wn(t,e,n){t._context.bezierCurveTo((2*t._x0+t._x1)/3,(2*t._y0+t._y1)/3,(t._x0+2*t._x1)/3,(t._y0+2*t._y1)/3,(t._x0+4*t._x1+e)/6,(t._y0+4*t._y1+n)/6)}function Hn(t){this._context=t}function Xn(t){return new Hn(t)}function Vn(t){this._context=t}function Jn(t){return new Vn(t)}function Zn(t){this._context=t}function Qn(t){return new Zn(t)}function Kn(t,e){this._basis=new Hn(t),this._beta=e}function tr(t,e,n){t._context.bezierCurveTo(t._x1+t._k*(t._x2-t._x0),t._y1+t._k*(t._y2-t._y0),t._x2+t._k*(t._x1-e),t._y2+t._k*(t._y1-n),t._x2,t._y2)}function er(t,e){this._context=t,this._k=(1-e)/6}function nr(t,e){this._context=t,this._k=(1-e)/6}function rr(t,e){this._context=t,this._k=(1-e)/6}function ir(t,e,n){var r=t._x1,i=t._y1,a=t._x2,o=t._y2;if(t._l01_a>aE){var u=2*t._l01_2a+3*t._l01_a*t._l12_a+t._l12_2a,s=3*t._l01_a*(t._l01_a+t._l12_a);r=(r*u-t._x0*t._l12_2a+t._x2*t._l01_2a)/s,i=(i*u-t._y0*t._l12_2a+t._y2*t._l01_2a)/s}if(t._l23_a>aE){var f=2*t._l23_2a+3*t._l23_a*t._l12_a+t._l12_2a,c=3*t._l23_a*(t._l23_a+t._l12_a);a=(a*f+t._x1*t._l23_2a-e*t._l12_2a)/c,o=(o*f+t._y1*t._l23_2a-n*t._l12_2a)/c}t._context.bezierCurveTo(r,i,a,o,t._x2,t._y2)}function ar(t,e){this._context=t,this._alpha=e}function or(t,e){this._context=t,this._alpha=e}function ur(t,e){this._context=t,this._alpha=e}function sr(t){this._context=t}function fr(t){return new sr(t)}function cr(t){return t<0?-1:1}function lr(t,e,n){var r=t._x1-t._x0,i=e-t._x1,a=(t._y1-t._y0)/(r||i<0&&-0),o=(n-t._y1)/(i||r<0&&-0),u=(a*i+o*r)/(r+i);return(cr(a)+cr(o))*Math.min(Math.abs(a),Math.abs(o),.5*Math.abs(u))||0}function hr(t,e){var n=t._x1-t._x0;return n?(3*(t._y1-t._y0)/n-e)/2:e}function dr(t,e,n){var r=t._x0,i=t._y0,a=t._x1,o=t._y1,u=(a-r)/3;t._context.bezierCurveTo(r+u,i+u*e,a-u,o-u*n,a,o)}function pr(t){this._context=t}function gr(t){this._context=new vr(t)}function vr(t){this._context=t}function mr(t){return new pr(t)}function yr(t){return new gr(t)}function br(t){this._context=t}function _r(t){var e,n,r=t.length-1,i=new Array(r),a=new Array(r),o=new Array(r);for(i[0]=0,a[0]=2,o[0]=t[0]+2*t[1],e=1;e<r-1;++e)i[e]=1,a[e]=4,o[e]=4*t[e]+2*t[e+1];for(i[r-1]=2,a[r-1]=7,o[r-1]=8*t[r-1]+t[r],e=1;e<r;++e)n=i[e]/a[e-1],a[e]-=n,o[e]-=n*o[e-1];for(i[r-1]=o[r-1]/a[r-1],e=r-2;e>=0;--e)i[e]=(o[e]-i[e+1])/a[e];for(a[r-1]=(t[r]+i[r-1])/2,e=0;e<r-1;++e)a[e]=2*t[e+1]-i[e+1];return[i,a]}function xr(t){return new br(t)}function wr(t,e){this._context=t,this._t=e}function Mr(t){return new wr(t,.5)}function kr(t){return new wr(t,0)}function Er(t){return new wr(t,1)}function Sr(t,e,n){var r=yE.hasOwnProperty(t)&&yE[t],i=null;return r&&(i=r.curve||r[e||"vertical"],r.tension&&null!=n&&(i=i[r.tension](n))),i}function Ar(t){var e,n,r,i,a,o,u,s,f,c,l,h=[];for(e=t.slice().replace(_E[0],"###$1").split(_E[1]).slice(1),s=0,c=e.length;s<c;++s){for(n=e[s],r=n.slice(1).trim().replace(_E[2],"$1###$2").split(_E[3]),o=n.charAt(0),i=[o],f=0,l=r.length;f<l;++f)(a=+r[f])===a&&i.push(a);if(u=bE[o.toLowerCase()],i.length-1>u)for(f=1,l=i.length;f<l;f+=u)h.push([o].concat(i.slice(f,f+u)));else h.push(i)}return h}function Cr(t,e,n,r,i,a,o,u,s){var f=ME.call(arguments);if(xE[f])return xE[f];var c=o*(Math.PI/180),l=Math.sin(c),h=Math.cos(c);n=Math.abs(n),r=Math.abs(r);var d=h*(u-t)*.5+l*(s-e)*.5,p=h*(s-e)*.5-l*(u-t)*.5,g=d*d/(n*n)+p*p/(r*r);g>1&&(g=Math.sqrt(g),n*=g,r*=g);var v=h/n,m=l/n,y=-l/r,b=h/r,_=v*u+m*s,x=y*u+b*s,w=v*t+m*e,M=y*t+b*e,k=(w-_)*(w-_)+(M-x)*(M-x),E=1/k-.25;E<0&&(E=0);var S=Math.sqrt(E);a==i&&(S=-S);var A=.5*(_+w)-S*(M-x),C=.5*(x+M)+S*(w-_),N=Math.atan2(x-C,_-A),z=Math.atan2(M-C,w-A),T=z-N;T<0&&1===a?T+=2*Math.PI:T>0&&0===a&&(T-=2*Math.PI);for(var O=Math.ceil(Math.abs(T/(.5*Math.PI+.001))),R=[],P=0;P<O;++P){var D=N+P*T/O,L=N+(P+1)*T/O;R[P]=[A,C,D,L,n,r,l,h]}return xE[f]=R}function Nr(t){var e=ME.call(t);if(wE[e])return wE[e];var n=t[0],r=t[1],i=t[2],a=t[3],o=t[4],u=t[5],s=t[6],f=t[7],c=f*o,l=-s*u,h=s*o,d=f*u,p=Math.cos(i),g=Math.sin(i),v=Math.cos(a),m=Math.sin(a),y=.5*(a-i),b=Math.sin(.5*y),_=8/3*b*b/Math.sin(y),x=n+p-_*g,w=r+g+_*p,M=n+v,k=r+m,E=M+_*m,S=k-_*v;return wE[e]=[c*x+l*w,h*x+d*w,c*E+l*S,h*E+d*S,c*M+l*k,h*M+d*k]}function zr(t,e){var n=kE[0]=t[0];if("a"===n||"A"===n)kE[1]=e*t[1],kE[2]=e*t[2],kE[6]=e*t[6],kE[7]=e*t[7];else for(var r=1,i=t.length;r<i;++r)kE[r]=e*t[r];return kE}function Tr(t,e,n,r,i){var a,o,u,s,f,c=null,l=0,h=0,d=0,p=0;null==n&&(n=0),null==r&&(r=0),null==i&&(i=1),t.beginPath&&t.beginPath();for(var g=0,v=e.length;g<v;++g){switch(a=e[g],1!==i&&(a=zr(a,i)),a[0]){case"l":l+=a[1],h+=a[2],t.lineTo(l+n,h+r);break;case"L":l=a[1],h=a[2],t.lineTo(l+n,h+r);break;case"h":l+=a[1],t.lineTo(l+n,h+r);break;case"H":l=a[1],t.lineTo(l+n,h+r);break;case"v":h+=a[1],t.lineTo(l+n,h+r);break;case"V":h=a[1],t.lineTo(l+n,h+r);break;case"m":l+=a[1],h+=a[2],t.moveTo(l+n,h+r);break;case"M":l=a[1],h=a[2],t.moveTo(l+n,h+r);break;case"c":o=l+a[5],u=h+a[6],d=l+a[3],p=h+a[4],t.bezierCurveTo(l+a[1]+n,h+a[2]+r,d+n,p+r,o+n,u+r),l=o,h=u;break;case"C":l=a[5],h=a[6],d=a[3],p=a[4],t.bezierCurveTo(a[1]+n,a[2]+r,d+n,p+r,l+n,h+r);break;case"s":o=l+a[3],u=h+a[4],d=2*l-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,l+a[1]+n,h+a[2]+r,o+n,u+r),d=l+a[1],p=h+a[2],l=o,h=u;break;case"S":o=a[3],u=a[4],d=2*l-d,p=2*h-p,t.bezierCurveTo(d+n,p+r,a[1]+n,a[2]+r,o+n,u+r),l=o,h=u,d=a[1],p=a[2];break;case"q":o=l+a[3],u=h+a[4],d=l+a[1],p=h+a[2],t.quadraticCurveTo(d+n,p+r,o+n,u+r),l=o,h=u;break;case"Q":o=a[3],u=a[4],t.quadraticCurveTo(a[1]+n,a[2]+r,o+n,u+r),l=o,h=u,d=a[1],p=a[2];break;case"t":o=l+a[1],u=h+a[2],null===c[0].match(/[QqTt]/)?(d=l,p=h):"t"===c[0]?(d=2*l-s,p=2*h-f):"q"===c[0]&&(d=2*l-d,p=2*h-p),s=d,f=p,t.quadraticCurveTo(d+n,p+r,o+n,u+r),l=o,h=u,d=l+a[1],p=h+a[2];break;case"T":o=a[1],u=a[2],d=2*l-d,p=2*h-p,t.quadraticCurveTo(d+n,p+r,o+n,u+r),l=o,h=u;break;case"a":Or(t,l+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+l+n,a[7]+h+r]),l+=a[6],h+=a[7];break;case"A":Or(t,l+n,h+r,[a[1],a[2],a[3],a[4],a[5],a[6]+n,a[7]+r]),l=a[6],h=a[7];break;case"z":case"Z":t.closePath()}c=a}}function Or(t,e,n,r){for(var i=Cr(r[5],r[6],r[0],r[1],r[3],r[4],r[2],e,n),a=0;a<i.length;++a){var o=Nr(i[a]);t.bezierCurveTo(o[0],o[1],o[2],o[3],o[4],o[5])}}function Rr(t){return AE.hasOwnProperty(t)?AE[t]:Pr(t)}function Pr(t){if(!CE.hasOwnProperty(t)){var e=Ar(t);CE[t]={draw:function(t,n){Tr(t,e,0,0,Math.sqrt(n)/2)}}}return CE[t]}function Dr(t){return t.x}function Lr(t){return t.y}function qr(t){return t.width}function Ur(t){return t.height}function Fr(t){return function(){return t}}function jr(){function t(t,u,s){var f,c=null!=u?u:+e.call(this,t),l=null!=s?s:+n.call(this,t),h=+r.call(this,t),d=+i.call(this,t),p=+a.call(this,t);if(o||(o=f=Cn()),p<=0)o.rect(c,l,h,d);else{var g=c+h,v=l+d;o.moveTo(c+p,l),o.lineTo(g-p,l),o.quadraticCurveTo(g,l,g,l+p),o.lineTo(g,v-p),o.quadraticCurveTo(g,v,g-p,v),o.lineTo(c+p,v),o.quadraticCurveTo(c,v,c,v-p),o.lineTo(c,l+p),o.quadraticCurveTo(c,l,c+p,l),o.closePath()}if(f)return o=null,f+""||null}var e=Dr,n=Lr,r=qr,i=Ur,a=Fr(0),o=null;return t.x=function(n){return arguments.length?(e="function"==typeof n?n:Fr(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:Fr(+e),t):n},t.width=function(e){return arguments.length?(r="function"==typeof e?e:Fr(+e),t):r},t.height=function(e){return arguments.length?(i="function"==typeof e?e:Fr(+e),t):i},t.cornerRadius=function(e){return arguments.length?(a="function"==typeof e?e:Fr(+e),t):a},t.context=function(e){return arguments.length?(o=null==e?null:e,t):o},t}function Ir(){function t(t,e,n){var r=n/2;if(o){var i=s-e,a=t-u;if(i||a){var l=Math.sqrt(i*i+a*a),h=(i/=l)*f,d=(a/=l)*f,p=Math.atan2(a,i);c.moveTo(u-h,s-d),c.lineTo(t-i*r,e-a*r),c.arc(t,e,r,p-NE,p),c.lineTo(u+h,s+d),c.arc(u,s,f,p,p+NE)}else c.arc(t,e,r,0,2*NE);c.closePath()}else o=1;u=t,s=e,f=r}function e(e){var u,s,f,l=e.length,h=!1;for(null==c&&(c=f=Cn()),u=0;u<=l;++u)!(u<l&&a(s=e[u],u,e))===h&&(h=!h)&&(o=0),h&&t(+n(s,u,e),+r(s,u,e),+i(s,u,e));if(f)return c=null,f+""||null}var n,r,i,a,o,u,s,f,c=null;return e.x=function(t){return arguments.length?(n=t,e):n},e.y=function(t){return arguments.length?(r=t,e):r},e.size=function(t){return arguments.length?(i=t,e):i},e.defined=function(t){return arguments.length?(a=t,e):a},e.context=function(t){return arguments.length?(c=null==t?null:t,e):c},e}function $r(t){return t.x||0}function Br(t){return t.y||0}function Yr(t){return t.width||0}function Gr(t){return t.size||1}function Wr(t){return t.height||0}function Hr(t){return(t.x||0)+(t.width||0)}function Xr(t){return(t.y||0)+(t.height||0)}function Vr(t){return t.cornerRadius||0}function Jr(t){return t.padAngle||0}function Zr(t){return!(!1===t.defined)}function Qr(t){return null==t.size?64:t.size}function Kr(t){return Rr(t.shape||"circle")}function ti(t,e){return zE.context(t)(e)}function ei(t,e){var n=e[0],r=n.interpolate||"linear";return("horizontal"===n.orient?OE:TE).curve(Sr(r,n.orient,n.tension)).context(t)(e)}function ni(t,e){var n=e[0],r=n.interpolate||"linear";return RE.curve(Sr(r,n.orient,n.tension)).context(t)(e)}function ri(t,e,n,r){return PE.context(t)(e,n,r)}function ii(t,e){return(e.mark.shape||e.shape).context(t)(e)}function ai(t,e){return DE.context(t)(e)}function oi(t,e){return LE.context(t)(e)}function ui(t,e){return e.stroke&&0!==e.opacity&&0!==e.strokeOpacity&&t.expand(null!=e.strokeWidth?+e.strokeWidth:1),t}function si(t){return mE=t,si}function fi(){}function ci(t,e){mE.add(t,e)}function li(t,e,n){for(var r=n.width(),i=n.height(),a=n.x1+e.x1*r,o=n.y1+e.y1*i,u=n.x1+e.x2*r,s=n.y1+e.y2*i,f=e.stops,c=0,l=f.length,h=t.createLinearGradient(a,o,u,s);c<l;++c)h.addColorStop(f[c].offset,f[c].color);return h}function hi(t,e,n){return n.id?li(t,n,e.bounds):n}function di(t,e,n){return(n*=null==e.fillOpacity?1:e.fillOpacity)>0&&(t.globalAlpha=n,t.fillStyle=hi(t,e,e.fill),!0)}function pi(t,e,n){var r=null!=(r=e.strokeWidth)?r:1;return!(r<=0)&&(n*=null==e.strokeOpacity?1:e.strokeOpacity)>0&&(t.globalAlpha=n,t.strokeStyle=hi(t,e,e.stroke),t.lineWidth=r,t.lineCap=e.strokeCap||"butt",t.lineJoin=e.strokeJoin||"miter",t.miterLimit=e.strokeMiterLimit||10,t.setLineDash&&(t.setLineDash(e.strokeDash||$E),t.lineDashOffset=e.strokeDashOffset||0),!0)}function gi(t,e){return t.zindex-e.zindex||t.index-e.index}function vi(t){if(!t.zdirty)return t.zitems;var e,n,r,i=t.items,a=[];for(n=0,r=i.length;n<r;++n)e=i[n],e.index=n,e.zindex&&a.push(e);return t.zdirty=!1,t.zitems=a.sort(gi)}function mi(t,e){var n,r,i=t.items;if(i&&i.length){var a=vi(t);if(a&&a.length){for(n=0,r=i.length;n<r;++n)i[n].zindex||e(i[n]);i=a}for(n=0,r=i.length;n<r;++n)e(i[n])}}function yi(t,e){var n,r,i=t.items;if(!i||!i.length)return null;var a=vi(t);for(a&&a.length&&(i=a),r=i.length;--r>=0;)if(n=e(i[r]))return n;if(i===a)for(i=t.items,r=i.length;--r>=0;)if(!i[r].zindex&&(n=e(i[r])))return n;return null}function bi(t){return function(e,n,r){mi(n,function(n){r&&!r.intersects(n.bounds)||xi(t,e,n,n)})}}function _i(t){return function(e,n,r){!n.items.length||r&&!r.intersects(n.bounds)||xi(t,e,n.items[0],n.items)}}function xi(t,e,n,r){var i=null==n.opacity?1:n.opacity;0!==i&&(t(e,r)||(n.fill&&di(e,n,i)&&e.fill(),n.stroke&&pi(e,n,i)&&e.stroke()))}function wi(t){return t||(t=BE),function(e,n,r,i,a,o){return e.pixelRatio>1&&(r*=e.pixelRatio,i*=e.pixelRatio),yi(n,function(n){var u=n.bounds;if((!u||u.contains(a,o))&&u)return t(e,n,r,i,a,o)?n:void 0})}}function Mi(t,e){return function(n,r,i,a){var o,u,s=Array.isArray(r)?r[0]:r,f=null==e?s.fill:e,c=s.stroke&&n.isPointInStroke;return c&&(o=s.strokeWidth,u=s.strokeCap,n.lineWidth=null!=o?o:1,n.lineCap=null!=u?u:"butt"),!t(n,r)&&(f&&n.isPointInPath(i,a)||c&&n.isPointInStroke(i,a))}}function ki(t){return wi(Mi(t))}function Ei(t,e){return"translate("+t+","+e+")"}function Si(t){return Ei(t.x||0,t.y||0)}function Ai(t,e){function n(t,n){t("transform",Si(n)),t("d",e(null,n))}function r(t,n){return e(si(t),n),ui(t,n).translate(n.x||0,n.y||0)}function i(t,n){var r=n.x||0,i=n.y||0;t.translate(r,i),t.beginPath(),e(t,n),t.translate(-r,-i)}return{type:t,tag:"path",nested:!1,attr:n,bound:r,draw:bi(i),pick:ki(i)}}function Ci(t,e){function n(t,n){var r=n.mark.items;r.length&&t("d",e(null,r))}function r(t,n){var r=n.items;return 0===r.length?t:(e(si(t),r),ui(t,r[0]))}function i(t,n){t.beginPath(),e(t,n)}function a(t,e,n,r,i,a){var u=e.items,s=e.bounds;return!u||!u.length||s&&!s.contains(i,a)?null:(t.pixelRatio>1&&(n*=t.pixelRatio,r*=t.pixelRatio),o(t,u,n,r)?u[0]:null)}var o=Mi(i);return{type:t,tag:"path",nested:!0,attr:n,bound:r,draw:_i(i),pick:a}}function Ni(){WE=1}function zi(t,e,n){var r=t._defs,i=e.clip_id||(e.clip_id="clip"+WE++),a=r.clipping[i]||(r.clipping[i]={id:i});return a.width=n.width||0,a.height=n.height||0,"url(#"+i+")"}function Ti(t,e){t("transform",Si(e))}function Oi(t,e){var n=e.stroke?HE:0;t("class","background"),t("d",ri(null,e,n,n))}function Ri(t,e,n){t("clip-path",e.clip?zi(n,e,e):null)}function Pi(t,e){if(!e.clip&&e.items)for(var n=e.items,r=0,i=n.length;r<i;++r)t.union(n[r].bounds);return(e.clip||e.width||e.height)&&ui(t.add(0,0).add(e.width||0,e.height||0),e),t.translate(e.x||0,e.y||0)}function Di(t,e,n){var r=this;mi(e,function(e){var i,a,o=e.x||0,u=e.y||0,s=e.width||0,f=e.height||0;t.save(),t.translate(o,u),(e.stroke||e.fill)&&(a=null==e.opacity?1:e.opacity)>0&&(t.beginPath(),i=e.stroke?HE:0,ri(t,e,i,i),e.fill&&di(t,e,a)&&t.fill(),e.stroke&&pi(t,e,a)&&t.stroke()),e.clip&&(t.beginPath(),t.rect(0,0,s,f),t.clip()),n&&n.translate(-o,-u),mi(e,function(e){r.draw(t,e,n)}),n&&n.translate(o,u),t.restore()})}function Li(t,e,n,r,i,a){if(e.bounds&&!e.bounds.contains(i,a)||!e.items)return null;var o=this;return yi(e,function(u){var s,f,c,l;if(!(l=u.bounds)||l.contains(i,a))return f=u.x||0,c=u.y||0,t.save(),t.translate(f,c),f=i-f,c=a-c,s=yi(u,function(t){return qi(t,f,c)?o.pick(t,n,r,f,c):null}),t.restore(),s||(s=!1!==e.interactive&&(u.fill||u.stroke)&&f>=0&&f<=u.width&&c>=0&&c<=u.height,s?u:null)})}function qi(t,e,n){return(!1!==t.interactive||"group"===t.marktype)&&t.bounds&&t.bounds.contains(e,n)}function Ui(t,e){var n=t.image;return n&&n.url===t.url||(n={loaded:!1,width:0,height:0},e.loadImage(t.url).then(function(e){t.image=e,t.image.url=t.url})),n}function Fi(t,e){return"center"===t?e/2:"right"===t?e:0}function ji(t,e){return"middle"===t?e/2:"bottom"===t?e:0}function Ii(t,e,n){var r=Ui(e,n),i=e.x||0,a=e.y||0,o=(null!=e.width?e.width:r.width)||0,u=(null!=e.height?e.height:r.height)||0,s=!1===e.aspect?"none":"xMidYMid";i-=Fi(e.align,o),a-=ji(e.baseline,u),t("href",r.src||"","http://www.w3.org/1999/xlink","xlink:href"),t("transform",Ei(i,a)),t("width",o),t("height",u),t("preserveAspectRatio",s)}function $i(t,e){var n=e.image,r=e.x||0,i=e.y||0,a=(null!=e.width?e.width:n&&n.width)||0,o=(null!=e.height?e.height:n&&n.height)||0;return r-=Fi(e.align,a),i-=ji(e.baseline,o),t.set(r,i,r+a,i+o)}function Bi(t,e,n){var r=this;mi(e,function(e){if(!n||n.intersects(e.bounds)){var i,a,o,u,s=Ui(e,r),f=e.x||0,c=e.y||0,l=(null!=e.width?e.width:s.width)||0,h=(null!=e.height?e.height:s.height)||0;f-=Fi(e.align,l),c-=ji(e.baseline,h),!1!==e.aspect&&(a=s.width/s.height,o=e.width/e.height,a===a&&o===o&&a!==o&&(o<a?(u=l/a,c+=(h-u)/2,h=u):(u=h*a,f+=(l-u)/2,l=u))),s.loaded&&(t.globalAlpha=null!=(i=e.opacity)?i:1,t.drawImage(s,f,c,l,h))}})}function Yi(t,e){t("transform",Si(e)),t("d",e.path)}function Gi(t,e){var n=e.path;if(null==n)return!0;var r=e.pathCache;r&&r.path===n||((e.pathCache=r=Ar(n)).path=n),Tr(t,r,e.x,e.y)}function Wi(t,e){return Gi(si(t),e)?t.set(0,0,0,0):ui(t,e)}function Hi(t,e){t("d",ri(null,e))}function Xi(t,e){var n,r;return ui(t.set(n=e.x||0,r=e.y||0,n+e.width||0,r+e.height||0),e)}function Vi(t,e){t.beginPath(),ri(t,e)}function Ji(t,e){t("transform",Si(e)),t("x2",null!=e.x2?e.x2-(e.x||0):0),t("y2",null!=e.y2?e.y2-(e.y||0):0)}function Zi(t,e){var n,r;return ui(t.set(n=e.x||0,r=e.y||0,null!=e.x2?e.x2:n,null!=e.y2?e.y2:r),e)}function Qi(t,e,n){var r,i,a,o;return!(!e.stroke||!pi(t,e,n)||(r=e.x||0,i=e.y||0,a=null!=e.x2?e.x2:r,o=null!=e.y2?e.y2:i,t.beginPath(),t.moveTo(r,i),t.lineTo(a,o),0))}function Ki(t,e,n){mi(e,function(e){if(!n||n.intersects(e.bounds)){var r=null==e.opacity?1:e.opacity;r&&Qi(t,e,r)&&t.stroke()}})}function ta(t,e,n,r){return!!t.isPointInStroke&&Qi(t,e,1)&&t.isPointInStroke(n,r)}function ea(t){return IE=aa(t),na(ua(t))}function na(t){return~~(.8*t.length*IE)}function ra(t){return jE.font=fa(t),ia(ua(t))}function ia(t){return jE.measureText(t).width}function aa(t){return null!=t.fontSize?t.fontSize:11}function oa(t){jE=t&&(jE=Mn(1,1))?jE.getContext("2d"):null,nS.width=jE?ra:ea}function ua(t){var e=t.text;return null==e?"":t.limit>0?sa(t):e+""}function sa(t){var e=+t.limit,n=t.text+"",r=jE?(jE.font=fa(t),ia):(IE=aa(t),na);if(r(n)<e)return n;var i,a=t.ellipsis||"\u2026",o="rtl"===t.dir,u=0,s=n.length;if(e-=r(a),o){for(;u<s;)i=u+s>>>1,r(n.slice(i))>e?u=i+1:s=i;return a+n.slice(u)}for(;u<s;)i=1+(u+s>>>1),r(n.slice(0,i))<e?u=i:s=i-1;return n.slice(0,u)+a}function fa(t,e){var n=t.font;return e&&n&&(n=String(n).replace(/\"/g,"'")),(t.fontStyle?t.fontStyle+" ":"")+(t.fontVariant?t.fontVariant+" ":"")+(t.fontWeight?t.fontWeight+" ":"")+aa(t)+"px "+(n||"sans-serif")}function ca(t){var e=t.baseline,n=aa(t);return Math.round("top"===e?.93*n:"middle"===e?.3*n:"bottom"===e?-.21*n:0)}function la(t,e){var n,r=e.dx||0,i=(e.dy||0)+ca(e),a=e.x||0,o=e.y||0,u=e.angle||0,s=e.radius||0;s&&(n=(e.theta||0)-Math.PI/2,a+=s*Math.cos(n),o+=s*Math.sin(n)),t("text-anchor",rS[e.align]||"start"),u?(n=Ei(a,o)+" rotate("+u+")",(r||i)&&(n+=" "+Ei(r,i))):n=Ei(a+r,o+i),t("transform",n)}function ha(t,e,n){var r,i,a=nS.height(e),o=e.align,u=e.radius||0,s=e.x||0,f=e.y||0,c=e.dx||0,l=(e.dy||0)+ca(e)-Math.round(.8*a);return u&&(i=(e.theta||0)-Math.PI/2,s+=u*Math.cos(i),f+=u*Math.sin(i)),r=nS.width(e),"center"===o?c-=r/2:"right"===o&&(c-=r),t.set(c+=s,l+=f,c+r,l+a),e.angle&&!n&&t.rotate(e.angle*Math.PI/180,s,f),t.expand(n||!r?0:1)}function da(t,e,n){mi(e,function(e){var r,i,a,o,u,s;n&&!n.intersects(e.bounds)||(s=ua(e))&&0!==(r=null==e.opacity?1:e.opacity)&&(t.font=fa(e),t.textAlign=e.align||"left",i=e.x||0,a=e.y||0,(o=e.radius)&&(u=(e.theta||0)-Math.PI/2,i+=o*Math.cos(u),a+=o*Math.sin(u)),e.angle&&(t.save(),t.translate(i,a),t.rotate(e.angle*Math.PI/180),i=a=0),i+=e.dx||0,a+=(e.dy||0)+ca(e),e.fill&&di(t,e,r)&&t.fillText(s,i,a),e.stroke&&pi(t,e,r)&&t.strokeText(s,i,a),e.angle&&t.restore())})}function pa(t,e,n,r,i,a){if(e.fontSize<=0)return!1;if(!e.angle)return!0;var o=ha(iS,e,!0),u=-e.angle*Math.PI/180,s=Math.cos(u),f=Math.sin(u),c=e.x,l=e.y,h=s*i-f*a+(c-c*s+l*f),d=f*i+s*a+(l-c*f-l*s);return o.contains(h,d)}function ga(t,e,n){var r=uS[t.mark.marktype],i=e||r.bound;return r.nested&&(t=t.mark),i(t.bounds||(t.bounds=new pn),t,n)}function va(t,e,n){var r,i,a,o,u=uS[t.marktype],s=u.bound,f=t.items,c=f&&f.length;if(u.nested)return a=c?f[0]:(sS.mark=t,sS),o=ga(a,s,n),e=e&&e.union(o)||o;if(e=e||t.bounds&&t.bounds.clear()||new pn,c)for(r=0,i=f.length;r<i;++r)e.union(ga(f[r],s,n));return t.bounds=e}function ma(t,e){return JSON.stringify(t,fS,e)}function ya(t){return ba("string"==typeof t?JSON.parse(t):t)}function ba(t){var e,n,r,i=t.marktype,a=t.items;if(a)for(n=0,r=a.length;n<r;++n)e=i?"mark":"group",a[n][e]=t,a[n].zindex&&(a[n][e].zdirty=!0),"group"===(i||e)&&ba(a[n]);return i&&va(t),t}function _a(t){arguments.length?this.root=ya(t):(this.root=xa({marktype:"group",name:"root",role:"frame"}),this.root.items=[new mn(this.root)])}function xa(t,e){return{bounds:new pn,clip:!!t.clip,group:e,interactive:!1!==t.interactive,items:[],marktype:t.marktype,name:t.name||void 0,role:t.role||void 0,zindex:t.zindex||0}}function wa(t){this._active=null,this._handlers={},this._loader=t||Rt()}function Ma(t){this._el=null,this._bgcolor=null,this._loader=new kn(t)}function ka(t,e){var n=e.getBoundingClientRect();return[t.clientX-n.left-(e.clientLeft||0),t.clientY-n.top-(e.clientTop||0)]}function Ea(t){wa.call(this,t),this._down=null,this._touch=null,this._first=!0}function Sa(t,e,n){return function(r){var i=this._active,a=this.pickEvent(r);a===i?this.fire(t,r):(i&&i.exit||this.fire(n,r),this._active=a,this.fire(e,r),this.fire(t,r))}}function Aa(t){return function(e){this.fire(t,e),this._active=null}}function Ca(t,e){var n=e.group;t.save(),t.beginPath(),t.rect(0,0,n.width||0,n.height||0),t.clip()}function Na(t,e,n,r){var i="undefined"!=typeof HTMLElement&&t instanceof HTMLElement&&null!=t.parentNode,a=t.getContext("2d"),o=i?pS:1;return t.width=e*o,t.height=n*o,1!==o&&(t.style.width=e+"px",t.style.height=n+"px"),a.pixelRatio=o,a.setTransform(o,0,0,o,o*r[0],o*r[1]),t}function za(t){Ma.call(this,t),this._redraw=!1,this._dirty=new pn}function Ta(t,e,n){return e.expand(1).round(),e.translate(-n[0]%1,-n[1]%1),t.beginPath(),t.rect(e.x1,e.y1,e.width(),e.height()),t.clip(),e}function Oa(t,e){if(null==e)return t;for(var n=mS.clear().union(t);null!=e;e=e.mark.group)n.translate(e.x||0,e.y||0);return n}function Ra(t){wa.call(this,t);var e=this;e._hrefHandler=Pa(e,function(t,n){n&&n.href&&e.handleHref(t,n,n.href)}),e._tooltipHandler=Pa(e,function(t,n){n&&n.tooltip&&e.handleTooltip(t,n,"mouseover"===t.type?n.tooltip:null)})}function Pa(t,e){return function(n){var r=n.target,i=r.__data__;n.vegaType=n.type,i=Array.isArray(i)?i[0]:i,e.call(t._obj,n,i)}}function Da(t,e,n){var r,i,a="<"+t;if(e)for(r in e)null!=(i=e[r])&&(a+=" "+r+'="'+i+'"');return n&&(a+=" "+n),a+">"}function La(t){return"</"+t+">"}function qa(t){Ma.call(this,t),this._dirtyID=1,this._dirty=[],this._svg=null,this._root=null,this._defs=null}function Ua(t,e,n){var r,i,a;for(t=_n(t,n,"linearGradient",wS),t.setAttribute("id",e.id),t.setAttribute("x1",e.x1),t.setAttribute("x2",e.x2),t.setAttribute("y1",e.y1),t.setAttribute("y2",e.y2),r=0,i=e.stops.length;r<i;++r)a=_n(t,r,"stop",wS),a.setAttribute("offset",e.stops[r].offset),a.setAttribute("stop-color",e.stops[r].color);xn(t,r)}function Fa(t,e,n){var r;t=_n(t,n,"clipPath",wS),t.setAttribute("id",e.id),r=_n(t,0,"rect",wS),r.setAttribute("x",0),r.setAttribute("y",0),r.setAttribute("width",e.width),r.setAttribute("height",e.height)}function ja(t,e){for(;t&&t.dirty!==e;t=t.mark.group){if(t.dirty=e,!t.mark||t.mark.dirty===e)return;t.mark.dirty=e}}function Ia(t,e,n){e=e.lastChild;var r,i=0;mi(n,function(n){r=t.draw(e,n,r),++i}),xn(e,1+i)}function $a(t,e,n,r){var i,a=t._svg;if(!a&&(i=e.ownerDocument,a=yn(i,r,wS),t._svg=a,t.mark&&(a.__data__=t,a.__values__={fill:"default"},"g"===r))){var o=yn(i,"path",wS);o.setAttribute("class","background"),a.appendChild(o),o.__data__=t;var u=yn(i,"g",wS);a.appendChild(u),u.__data__=t}return!i&&a.previousSibling===n&&n||e.insertBefore(a,n?n.nextSibling:e.firstChild),a}function Ba(t,e,n){e!==SS[t]&&(null!=e?n?ES.setAttributeNS(n,t,e):ES.setAttribute(t,e):n?ES.removeAttributeNS(n,t):ES.removeAttribute(t),SS[t]=e)}function Ya(){return"undefined"!=typeof window?window.location.href:""}function Ga(t){Ma.call(this,t),this._text={head:"",root:"",foot:"",defs:"",body:""},this._defs={gradient:{},clipping:{}}}function Wa(t,e,n,r){zS[r||t]=e}function Ha(t,e,n,r){if(null==t)return"";var i,a,o,u,s,f="";for("bgrect"===n&&!1===e.interactive&&(f+="pointer-events: none;"),"text"===n&&(f+="font: "+fa(t)+";"),i=0,a=xS.length;i<a;++i)o=xS[i],u=_S[o],s=t[o],null==s?"fill"===u&&(f+=(f.length?" ":"")+"fill: none;"):(s.id&&(r.gradient[s.id]=s,s="url(#"+s.id+")"),f+=(f.length?" ":"")+u+": "+s+";");return f?'style="'+f+'"':null}function Xa(t){return t.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")}function Va(t,e){return t=String(t||"").toLowerCase(),arguments.length>1?(OS[t]=e,this):OS[t]}function Ja(t,e,n){return t===e||("path"===n?Za(t,e):t instanceof Date&&e instanceof Date?+t==+e:K(t)&&K(e)?Math.abs(t-e)<=RS:t&&e&&(L(t)||L(e))?null!=t&&null!=e&&Qa(t,e):t==e)}function Za(t,e){return Ja(Ar(t),Ar(e))}function Qa(t,e){var n,r,i=Object.keys(t),a=Object.keys(e);if(i.length!==a.length)return!1;for(i.sort(),a.sort(),r=i.length-1;r>=0;r--)if(i[r]!=a[r])return!1;for(r=i.length-1;r>=0;r--)if(n=i[r],!Ja(t[n],e[n],n))return!1;return typeof t==typeof e}function Ka(t){var e=t||ZM,n=[],r={};return n.add=function(t){var i=e(t);return r[i]||(r[i]=1,n.push(t)),n},n.remove=function(t){var i,a=e(t);return r[a]&&(r[a]=0,(i=n.indexOf(t))>=0&&n.splice(i,1)),n},n}function to(t){return t._id}function eo(t){var e=t===Object(t)?t:{data:t};return e._id||(e._id=++PS),e}function no(t){return eo(ro(t,{}))}function ro(t,e){for(var n in t)"_id"!==n&&(e[n]=t[n]);return e}function io(t,e){return e._id=t._id,e}function ao(t){return t&&t.constructor===oo}function oo(){var t=[],e=[],n=[],r=[],i=[],a=!1;return{constructor:oo,insert:function(e){for(var n=$(e),r=0,i=n.length;r<i;++r)t.push(n[r]);return this},remove:function(t){for(var n=Y(t)?r:e,i=$(t),a=0,o=i.length;a<o;++a)n.push(i[a]);return this},modify:function(t,e,r){var a={field:e,value:G(r)};return Y(t)?(a.filter=t,i.push(a)):(a.tuple=t,n.push(a)),this},encode:function(t,e){return Y(t)?i.push({filter:t,field:e}):n.push({tuple:t,field:e}),this},reflow:function(){return a=!0,this},pulse:function(o,u){function s(t,e,n){n?t[e]=n(t):o.encode=e,a||(f[t._id]=t)}var f,c,l,h,d,p,g;for(c=0,l=t.length;c<l;++c)o.add.push(eo(t[c]));for(f={},c=0,l=e.length;c<l;++c)p=e[c],f[p._id]=p;for(c=0,l=r.length;c<l;++c)d=r[c],u.forEach(function(t){d(t)&&(f[t._id]=t)});for(g in f)o.rem.push(f[g]);for(f={},c=0,l=n.length;c<l;++c)h=n[c],s(h.tuple,h.field,h.value),o.modifies(h.field);for(c=0,l=i.length;c<l;++c)h=i[c],d=h.filter,u.forEach(function(t){d(t)&&s(t,h.field,h.value)}),o.modifies(h.field);if(a)o.mod=e.length||r.length?u.filter(function(t){return f.hasOwnProperty(t._id)}):u.slice();else for(g in f)o.mod.push(f[g]);return o}}}function uo(){Object.defineProperty(this,DS,{writable:!0,value:{}})}function so(t,e,n,r){this.id=++qS,this.value=t,this.stamp=-1,this.rank=-1,this.qrank=-1,this.flags=0,e&&(this._update=e),n&&this.parameters(n,r)}function fo(t){return function(e){var n=this.flags;return 0===arguments.length?!!(n&t):(this.flags=e?n|t:n&~t,this)}}function co(t,e,n,r){var i=1,a=t instanceof so?t:t&&t.prototype instanceof so?new t:Y(t)?new so(null,t):(i=0,new so(t,e));return this.rank(a),i&&(r=n,n=e),n&&this.connect(a,a.parameters(n,r)),this.touch(a),a}function lo(t,e){var n,r,i=t.rank;for(n=0,r=e.length;n<r;++n)if(i<e[n].rank)return void this.rerank(t)}function ho(t,e,n){this.id=++jS,this.value=null,n&&(this.receive=n),t&&(this._filter=t),e&&(this._apply=e)}function po(t,e,n){return new ho(t,e,n)}function go(t,e,n,r){var i,a=this,o=po(n,r),u=function(t){t.dataflow=a,o.receive(t),a.run()};i="string"==typeof t&&"undefined"!=typeof document?document.querySelectorAll(t):$(t);for(var s=0,f=i.length;s<f;++s)i[s].addEventListener(e,u);return o}function vo(t,e,n,r,i){return(t instanceof so?yo:mo)(this,t,e,n,r,i),this}function mo(t,e,n,r,i,a){var o,u,s=H({},a,$S);Y(n)||(n=G(n)),void 0===r?o=function(e){t.touch(n(e))}:Y(r)?(u=new so(null,r,i,!1),o=function(e){var r=n(e),i=(u.evaluate(e),u.value);ao(i)?t.pulse(r,i,a):t.update(r,i,s)}):o=function(e){t.update(n(e),r,s)},e.apply(o)}function yo(t,e,n,r,i,a){var o,u;void 0===r?u=n:(o=Y(r)?r:G(r),r=n?function(t,e){var r=o(t,e);return n.skip()?r:n.skip(!0).value=r}:o,u=new so(null,r,i,!1),u.modified(a&&a.force),u.rank=0,n&&(u.skip(!0),u.value=n.value,u.targets().add(n))),e.targets().add(u)}function bo(t){t.rank=++this._rank}function _o(t){for(var e,n,r,i=[t];i.length;)if(this.rank(e=i.pop()),n=e._targets)for(r=n.length;--r>=0;)i.push(e=n[r]),e===t&&this.error("Cycle detected in dataflow graph.")}function xo(t,e,n){this.dataflow=t,this.stamp=null==e?-1:e,this.add=[],this.rem=[],this.mod=[],this.fields=null,this.encode=n||null}function wo(t,e){return t?function(n,r){return t(n,r)&&e(n,r)}:e}function Mo(t,e){var n={};return t.visit(e,function(t){n[t._id]=1}),function(t){return n[t._id]?null:t}}function ko(t,e){var n=e||GS;return this._pulse?this._enqueue(t):this._touched.add(t),n.skip&&t.skip(!0),this}function Eo(t,e,n){var r=n||GS;return(t.set(e)||r.force)&&this.touch(t,r),this}function So(t,e,n){this.touch(t,n||GS);var r=new xo(this,this._clock+(this._pulse?0:1));return r.target=t,this._pulses[t.id]=e.pulse(r,t.value),this}function Ao(t,e,n){return this.pulse(t,this.changeset().insert(hn(e,n)))}function Co(t){var e,n,r=new Promise(function(t,r){e=t,n=r});return r.requests=0,r.done=function(){0==--r.requests&&t.runAfter(function(){t._pending=null;try{t.run(),e(t)}catch(t){n(t)}})},t._pending=r}function No(t,e,n){var r=this,i=r._pending||Co(r);i.requests+=1,r.loader().load(e,{context:"dataflow"}).then(function(e){r.ingest(t,e,n)},function(t){r.warn("Loading failed: "+e,t),i.done()}).then(i.done)["catch"](function(t){r.warn(t)})}function zo(t,e,n,r){var i,a,o,u,s,f=this,c=0;for(this.dataflow=t,this.stamp=e,this.fields=null,this.encode=r||null,this.pulses=n,o=0,u=n.length;o<u;++o)if(i=n[o],i.stamp===e){if(i.fields){a=f.fields||(f.fields={});for(s in i.fields)a[s]=1}i.changed(f.ADD)&&(c|=f.ADD),i.changed(f.REM)&&(c|=f.REM),i.changed(f.MOD)&&(c|=f.MOD)}this.changes=c}function To(t){if(!this._touched.length)return 0;if(this._pending)return this.info("Awaiting requests, delaying dataflow run."),0;var e,n,r,i=this,a=0,o=i.logLevel();i._pulse=new xo(i,++i._clock,t),o>=ik&&(r=Date.now(),i.debug("-- START PROPAGATION ("+i._clock+") -----")),i._touched.forEach(function(t){i._enqueue(t,!0)}),i._touched=Ka(JM);try{for(;i._heap.size()>0;)e=i._heap.pop(),e.rank===e.qrank?(n=e.run(i._getPulse(e,t)),o>=ak&&i.debug(e.id,n===BS?"STOP":n,e),n!==BS&&(i._pulse=n,e._targets&&e._targets.forEach(function(t){i._enqueue(t)})),++a):i._enqueue(e,!0)}catch(t){i.error(t)}if(i._pulses={},i._pulse=null,o>=ik&&(r=Date.now()-r,i.info("> Pulse "+i._clock+": "+a+" operators; "+r+"ms")),i._postrun.length){var u=i._postrun;i._postrun=[],u.forEach(function(t){try{t(i)}catch(t){i.error(t)}})}return a}function Oo(){return this._pending||Promise.resolve(this.run())}function Ro(t){if(this._pulse)this._postrun.push(t);else try{t(this)}catch(t){this.error(t)}}
function Po(t,e){var n=!this._pulses[t.id];n&&(this._pulses[t.id]=this._pulse),(n||e)&&(t.qrank=t.rank,this._heap.push(t))}function Do(t,e){var n,r=t.source,i=this._clock;return r&&XM(r)?(n=r.map(function(t){return t.pulse}),new zo(this,i,n,e)):(r=r&&r.pulse,n=this._pulses[t.id],r&&r!==BS&&(r.stamp===i&&n.target!==t?n=r:n.source=r.source),n)}function Lo(t){this.cmp=t,this.nodes=[]}function qo(t,e,n,r){var i,a,o;for(i=t[n];n>e&&(o=n-1>>1,a=t[o],r(i,a)<0);)t[n]=a,n=o;return t[n]=i}function Uo(t,e,n){for(var r,i=e,a=t.length,o=t[e],u=2*e+1;u<a;)r=u+1,r<a&&n(t[u],t[r])>=0&&(u=r),t[e]=t[u],e=u,u=2*e+1;return t[e]=o,qo(t,i,e,n)}function Fo(){this._log=I(),this._clock=0,this._rank=0,this._loader=Rt(),this._touched=Ka(JM),this._pulses={},this._pulse=null,this._heap=new Lo(function(t,e){return t.qrank-e.qrank}),this._postrun=[]}function jo(t){return function(){return this._log[t].apply(this,arguments)}}function Io(t,e){so.call(this,t,null,e)}function $o(t,e){var n=t.type;Bo(n,t),Yo(n,e)}function Bo(t,e){return t=t&&t.toLowerCase(),arguments.length>1?(ZS[t]=e,this):ZS.hasOwnProperty(t)?ZS[t]:null}function Yo(t,e){return arguments.length>1?(JS[t]=e,this):JS.hasOwnProperty(t)?JS[t]:null}function Go(t){this._key=t||"_id",this._add=[],this._rem=[],this._ext=null,this._get=null,this._q=null}function Wo(t,e){return KS[t](e)}function Ho(t){return function(e){var n=H({init:"",add:"",rem:"",idx:0},t);return n.out=e||t.name,n}}function Xo(t,e){return t.idx-e.idx}function Vo(t,e){function n(t,r){function i(e){t[e]||n(t,t[e]=KS[e]())}return r.req&&r.req.forEach(i),e&&r.str&&r.str.forEach(i),t}var r,i=t.reduce(n,t.reduce(function(t,e){return t[e.name]=e,t},{})),a=[];for(r in i)a.push(i[r]);return a.sort(Xo)}function Jo(t,e){var n=e||ZM,r=Vo(t,!0),i="this.cell = cell; this.tuple = t; this.valid = 0; this.missing = 0;",a="if(v==null){++this.missing; return;} if(v!==v) return; ++this.valid;",o="if(v==null){--this.missing; return;} if(v!==v) return; --this.valid;",u="var t = this.tuple; var cell = this.cell;";return r.forEach(function(t){t.idx<0?(i=t.init+i,a=t.add+a,o=t.rem+o):(i+=t.init,a+=t.add,o+=t.rem)}),t.slice().sort(Xo).forEach(function(t){u+="t['"+t.out+"']="+t.set+";"}),u+="return t;",i=Function("cell","t",i),i.prototype.add=Function("v","t",a),i.prototype.rem=Function("v","t",o),i.prototype.set=Function(u),i.prototype.get=n,i.fields=t.map(function(t){return t.out}),i}function Zo(t){Io.call(this,null,t),this._adds=[],this._mods=[],this._alen=0,this._mlen=0,this._drop=!0,this._cross=!1,this._dims=[],this._dnames=[],this._measures=[],this._countOnly=!1,this._counts=null,this._prev=null,this._inputs=null,this._outputs=null}function Qo(t,e,n){return n||t+(e?"_"+e:"")}function Ko(t){var e,n=this._dims,r=n.length,i=String(n[0](t));for(e=1;e<r;++e)i+="|"+n[e](t);return i}function tu(t){Io.call(this,null,t)}function eu(t){Io.call(this,[],t)}function nu(t){so.call(this,null,ru,t)}function ru(t){return this.value&&!t.modified()?this.value:B(t.fields,t.orders)}function iu(t){Io.call(this,null,t)}function au(t,e,n){switch(e){case"upper":t=t.toUpperCase();break;case"lower":t=t.toLowerCase()}return t.match(n)}function ou(t){Io.call(this,null,t)}function uu(t,e,n,r){for(var i,a,o=[],u={},s=t.length,f=0;f<s;++f)for(u[e]=a=t[f],i=0;i<s;++i)u[n]=t[i],r(u)&&(o.push(eo(u)),u={},u[e]=a);return o}function su(t,e){var n=t[aA];rA.hasOwnProperty(n)||P("Unknown distribution function: "+n);var r=rA[n]();for(var i in t)i===oA?r.data((t.from||e()).map(t[i])):i===iA?r[i](t[i].map(function(t){return su(t,e)})):typeof r[i]===aA&&r[i](t[i]);return r}function fu(t){Io.call(this,null,t)}function cu(t){return function(){return t.materialize(t.SOURCE).source}}function lu(t){Io.call(this,[1/0,-1/0],t)}function hu(t,e){so.call(this,t),this.parent=e}function du(t){Io.call(this,{},t),this._keys=V();var e=this._targets=[];e.active=0,e.forEach=function(t){for(var n=0,r=e.active;n<r;++n)t(e[n],n,e)}}function pu(t){so.call(this,null,gu,t)}function gu(t){return this.value&&!t.modified()?this.value:XM(t.name)?$(t.name).map(function(t){return F(t)}):F(t.name,t.as)}function vu(t){Io.call(this,V(),t)}function mu(t){Io.call(this,{},t)}function yu(t){return t.fields.join("|")}function bu(t){Io.call(this,null,t)}function _u(t){Io.call(this,[],t)}function xu(t){Io.call(this,[],t)}function wu(t){var e,n=t.method||fA.value;if(null!=fA[n])return n===fA.value?(e=void 0!==t.value?t.value:0,function(){return e}):fA[n];P("Unrecognized imputation method: "+n)}function Mu(t){var e=t.field;return function(t){return t?e(t):NaN}}function ku(t,e,n){var r,i,a,o,u,s,f,c,l,h=function(t){return t(l)},d=[],p=[],g={},v={};for(s=0,c=t.length;s<c;++s)l=t[s],i=(r=n.map(h))+"",f=g[i]||(g[i]=p.push(r)),o=(a=e?e.map(h):cA)+"",(u=v[o])||(u=v[o]=[],d.push(u),u.values=a),u[f-1]=l;return d.domain=p,d}function Eu(t){Zo.call(this,t)}function Su(t){so.call(this,null,Au,t)}function Au(t){return this.value&&!t.modified()?this.value:et(t.fields)}function Cu(t){Io.call(this,{},t)}function Nu(t){so.call(this,null,zu,t)}function zu(t){if(this.value&&!t.modified())return this.value;var e,n,r,i=1/0,a=-1/0,o=t.extents;for(e=0,n=o.length;e<n;++e)r=o[e],r[0]<i&&(i=r[0]),r[1]>a&&(a=r[1]);return[i,a]}function Tu(t){so.call(this,null,Ou,t)}function Ou(t){return this.value&&!t.modified()?this.value:t.values.reduce(function(t,e){return t.concat(e)},[])}function Ru(t){Io.call(this,null,t)}function Pu(t){du.call(this,t)}function Du(t){Io.call(this,null,t)}function Lu(t){Io.call(this,null,t)}function qu(t){Io.call(this,null,t)}function Uu(t){Io.call(this,[],t),this.count=0}function Fu(t){Io.call(this,null,t)}function ju(t){Io.call(this,null,t),this.modified(!0)}function Iu(t){Io.call(this,V(),t)}function $u(t){Io.call(this,null,t)}function Bu(t){return function(e){var n,r=e[0],i=e[1];return i<r&&(n=r,r=i,i=n),[t.invert(r),t.invert(i)]}}function Yu(t){return function(e){var n,r,i,a,o=t.range(),u=e[0],s=e[1],f=-1;for(s<u&&(r=u,u=s,s=r),i=0,a=o.length;i<a;++i)o[i]>=u&&o[i]<=s&&(f<0&&(f=i),n=i);if(!(f<0))return u=t.invertExtent(o[f]),s=t.invertExtent(o[n]),[void 0===u[0]?u[1]:u[0],void 0===s[1]?s[0]:s[1]]}}function Gu(t,e,n){var r=t-e+2*n;return t?r>0?r:1:0}function Wu(t){function e(e){var a=e+"",o=n.get(a);if(!o){if(i!==RA)return i;n.set(a,o=r.push(e))}return t[(o-1)%t.length]}var n=gt(),r=[],i=RA;return t=null==t?[]:OA.call(t),e.domain=function(t){if(!arguments.length)return r.slice();r=[],n=gt();for(var i,a,o=-1,u=t.length;++o<u;)n.has(a=(i=t[o])+"")||n.set(a,r.push(i));return e},e.range=function(n){return arguments.length?(t=OA.call(n),e):t.slice()},e.unknown=function(t){return arguments.length?(i=t,e):i},e.copy=function(){return Wu().domain(r).range(t).unknown(i)},e}function Hu(t,e,n){t.prototype=e.prototype=n,n.constructor=t}function Xu(t,e){var n=Object.create(t.prototype);for(var r in e)n[r]=e[r];return n}function Vu(){}function Ju(t){var e;return t=(t+"").trim().toLowerCase(),(e=qA.exec(t))?(e=parseInt(e[1],16),new es(e>>8&15|e>>4&240,e>>4&15|240&e,(15&e)<<4|15&e,1)):(e=UA.exec(t))?Zu(parseInt(e[1],16)):(e=FA.exec(t))?new es(e[1],e[2],e[3],1):(e=jA.exec(t))?new es(255*e[1]/100,255*e[2]/100,255*e[3]/100,1):(e=IA.exec(t))?Qu(e[1],e[2],e[3],e[4]):(e=$A.exec(t))?Qu(255*e[1]/100,255*e[2]/100,255*e[3]/100,e[4]):(e=BA.exec(t))?ns(e[1],e[2]/100,e[3]/100,1):(e=YA.exec(t))?ns(e[1],e[2]/100,e[3]/100,e[4]):GA.hasOwnProperty(t)?Zu(GA[t]):"transparent"===t?new es(NaN,NaN,NaN,0):null}function Zu(t){return new es(t>>16&255,t>>8&255,255&t,1)}function Qu(t,e,n,r){return r<=0&&(t=e=n=NaN),new es(t,e,n,r)}function Ku(t){return t instanceof Vu||(t=Ju(t)),t?(t=t.rgb(),new es(t.r,t.g,t.b,t.opacity)):new es}function ts(t,e,n,r){return 1===arguments.length?Ku(t):new es(t,e,n,null==r?1:r)}function es(t,e,n,r){this.r=+t,this.g=+e,this.b=+n,this.opacity=+r}function ns(t,e,n,r){return r<=0?t=e=n=NaN:n<=0||n>=1?t=e=NaN:e<=0&&(t=NaN),new as(t,e,n,r)}function rs(t){if(t instanceof as)return new as(t.h,t.s,t.l,t.opacity);if(t instanceof Vu||(t=Ju(t)),!t)return new as;if(t instanceof as)return t;t=t.rgb();var e=t.r/255,n=t.g/255,r=t.b/255,i=Math.min(e,n,r),a=Math.max(e,n,r),o=NaN,u=a-i,s=(a+i)/2;return u?(o=e===a?(n-r)/u+6*(n<r):n===a?(r-e)/u+2:(e-n)/u+4,u/=s<.5?a+i:2-a-i,o*=60):u=s>0&&s<1?0:o,new as(o,u,s,t.opacity)}function is(t,e,n,r){return 1===arguments.length?rs(t):new as(t,e,n,null==r?1:r)}function as(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function os(t,e,n){return 255*(t<60?e+(n-e)*t/60:t<180?n:t<240?e+(n-e)*(240-t)/60:e)}function us(t){if(t instanceof fs)return new fs(t.l,t.a,t.b,t.opacity);if(t instanceof vs){var e=t.h*WA;return new fs(t.l,Math.cos(e)*t.c,Math.sin(e)*t.c,t.opacity)}t instanceof es||(t=Ku(t));var n=ds(t.r),r=ds(t.g),i=ds(t.b),a=cs((.4124564*n+.3575761*r+.1804375*i)/XA),o=cs((.2126729*n+.7151522*r+.072175*i)/VA);return new fs(116*o-16,500*(a-o),200*(o-cs((.0193339*n+.119192*r+.9503041*i)/JA)),t.opacity)}function ss(t,e,n,r){return 1===arguments.length?us(t):new fs(t,e,n,null==r?1:r)}function fs(t,e,n,r){this.l=+t,this.a=+e,this.b=+n,this.opacity=+r}function cs(t){return t>tC?Math.pow(t,1/3):t/KA+ZA}function ls(t){return t>QA?t*t*t:KA*(t-ZA)}function hs(t){return 255*(t<=.0031308?12.92*t:1.055*Math.pow(t,1/2.4)-.055)}function ds(t){return(t/=255)<=.04045?t/12.92:Math.pow((t+.055)/1.055,2.4)}function ps(t){if(t instanceof vs)return new vs(t.h,t.c,t.l,t.opacity);t instanceof fs||(t=us(t));var e=Math.atan2(t.b,t.a)*HA;return new vs(e<0?e+360:e,Math.sqrt(t.a*t.a+t.b*t.b),t.l,t.opacity)}function gs(t,e,n,r){return 1===arguments.length?ps(t):new vs(t,e,n,null==r?1:r)}function vs(t,e,n,r){this.h=+t,this.c=+e,this.l=+n,this.opacity=+r}function ms(t){if(t instanceof bs)return new bs(t.h,t.s,t.l,t.opacity);t instanceof es||(t=Ku(t));var e=t.r/255,n=t.g/255,r=t.b/255,i=(sC*r+oC*e-uC*n)/(sC+oC-uC),a=r-i,o=(aC*(n-i)-rC*a)/iC,u=Math.sqrt(o*o+a*a)/(aC*i*(1-i)),s=u?Math.atan2(o,a)*HA-120:NaN;return new bs(s<0?s+360:s,u,i,t.opacity)}function ys(t,e,n,r){return 1===arguments.length?ms(t):new bs(t,e,n,null==r?1:r)}function bs(t,e,n,r){this.h=+t,this.s=+e,this.l=+n,this.opacity=+r}function _s(t,e,n,r,i){var a=t*t,o=a*t;return((1-3*t+3*a-o)*e+(4-6*a+3*o)*n+(1+3*t+3*a-3*o)*r+o*i)/6}function xs(t){var e=t.length-1;return function(n){var r=n<=0?n=0:n>=1?(n=1,e-1):Math.floor(n*e),i=t[r],a=t[r+1],o=r>0?t[r-1]:2*i-a,u=r<e-1?t[r+2]:2*a-i;return _s((n-r/e)*e,o,i,a,u)}}function ws(t){var e=t.length;return function(n){var r=Math.floor(((n%=1)<0?++n:n)*e),i=t[(r+e-1)%e],a=t[r%e],o=t[(r+1)%e],u=t[(r+2)%e];return _s((n-r/e)*e,i,a,o,u)}}function Ms(t){return function(){return t}}function ks(t,e){return function(n){return t+n*e}}function Es(t,e,n){return t=Math.pow(t,n),e=Math.pow(e,n)-t,n=1/n,function(r){return Math.pow(t+r*e,n)}}function Ss(t,e){var n=e-t;return n?ks(t,n>180||n<-180?n-360*Math.round(n/360):n):Ms(isNaN(t)?e:t)}function As(t){return 1==(t=+t)?Cs:function(e,n){return n-e?Es(e,n,t):Ms(isNaN(e)?n:e)}}function Cs(t,e){var n=e-t;return n?ks(t,n):Ms(isNaN(t)?e:t)}function Ns(t){return function(e){var n,r,i=e.length,a=new Array(i),o=new Array(i),u=new Array(i);for(n=0;n<i;++n)r=ts(e[n]),a[n]=r.r||0,o[n]=r.g||0,u[n]=r.b||0;return a=t(a),o=t(o),u=t(u),r.opacity=1,function(t){return r.r=a(t),r.g=o(t),r.b=u(t),r+""}}}function zs(t,e){var n,r=e?e.length:0,i=t?Math.min(r,t.length):0,a=new Array(r),o=new Array(r);for(n=0;n<i;++n)a[n]=qs(t[n],e[n]);for(;n<r;++n)o[n]=e[n];return function(t){for(n=0;n<i;++n)o[n]=a[n](t);return o}}function Ts(t,e){var n=new Date;return t=+t,e-=t,function(r){return n.setTime(t+e*r),n}}function Os(t,e){return t=+t,e-=t,function(n){return t+e*n}}function Rs(t,e){var n,r={},i={};null!==t&&"object"==typeof t||(t={}),null!==e&&"object"==typeof e||(e={});for(n in e)n in t?r[n]=qs(t[n],e[n]):i[n]=e[n];return function(t){for(n in r)i[n]=r[n](t);return i}}function Ps(t){return function(){return t}}function Ds(t){return function(e){return t(e)+""}}function Ls(t,e){var n,r,i,a=mC.lastIndex=yC.lastIndex=0,o=-1,u=[],s=[];for(t+="",e+="";(n=mC.exec(t))&&(r=yC.exec(e));)(i=r.index)>a&&(i=e.slice(a,i),u[o]?u[o]+=i:u[++o]=i),(n=n[0])===(r=r[0])?u[o]?u[o]+=r:u[++o]=r:(u[++o]=null,s.push({i:o,x:Os(n,r)})),a=yC.lastIndex;return a<e.length&&(i=e.slice(a),u[o]?u[o]+=i:u[++o]=i),u.length<2?s[0]?Ds(s[0].x):Ps(e):(e=s.length,function(t){for(var n,r=0;r<e;++r)u[(n=s[r]).i]=n.x(t);return u.join("")})}function qs(t,e){var n,r=typeof e;return null==e||"boolean"===r?Ms(e):("number"===r?Os:"string"===r?(n=Ju(e))?(e=n,pC):Ls:e instanceof Ju?pC:e instanceof Date?Ts:Array.isArray(e)?zs:"function"!=typeof e.valueOf&&"function"!=typeof e.toString||isNaN(e)?Rs:Os)(t,e)}function Us(t,e){return t=+t,e-=t,function(n){return Math.round(t+e*n)}}function Fs(t,e,n,r,i,a){var o,u,s;return(o=Math.sqrt(t*t+e*e))&&(t/=o,e/=o),(s=t*n+e*r)&&(n-=t*s,r-=e*s),(u=Math.sqrt(n*n+r*r))&&(n/=u,r/=u,s/=u),t*r<e*n&&(t=-t,e=-e,s=-s,o=-o),{translateX:i,translateY:a,rotate:Math.atan2(e,t)*bC,skewX:Math.atan(s)*bC,scaleX:o,scaleY:u}}function js(t){return"none"===t?_C:(fC||(fC=document.createElement("DIV"),cC=document.documentElement,lC=document.defaultView),fC.style.transform=t,t=lC.getComputedStyle(cC.appendChild(fC),null).getPropertyValue("transform"),cC.removeChild(fC),t=t.slice(7,-1).split(","),Fs(+t[0],+t[1],+t[2],+t[3],+t[4],+t[5]))}function Is(t){return null==t?_C:(hC||(hC=document.createElementNS("http://www.w3.org/2000/svg","g")),hC.setAttribute("transform",t),(t=hC.transform.baseVal.consolidate())?(t=t.matrix,Fs(t.a,t.b,t.c,t.d,t.e,t.f)):_C)}function $s(t,e,n,r){function i(t){return t.length?t.pop()+" ":""}function a(t,r,i,a,o,u){if(t!==i||r!==a){var s=o.push("translate(",null,e,null,n);u.push({i:s-4,x:Os(t,i)},{i:s-2,x:Os(r,a)})}else(i||a)&&o.push("translate("+i+e+a+n)}function o(t,e,n,a){t!==e?(t-e>180?e+=360:e-t>180&&(t+=360),a.push({i:n.push(i(n)+"rotate(",null,r)-2,x:Os(t,e)})):e&&n.push(i(n)+"rotate("+e+r)}function u(t,e,n,a){t!==e?a.push({i:n.push(i(n)+"skewX(",null,r)-2,x:Os(t,e)}):e&&n.push(i(n)+"skewX("+e+r)}function s(t,e,n,r,a,o){if(t!==n||e!==r){var u=a.push(i(a)+"scale(",null,",",null,")");o.push({i:u-4,x:Os(t,n)},{i:u-2,x:Os(e,r)})}else 1===n&&1===r||a.push(i(a)+"scale("+n+","+r+")")}return function(e,n){var r=[],i=[];return e=t(e),n=t(n),a(e.translateX,e.translateY,n.translateX,n.translateY,r,i),o(e.rotate,n.rotate,r,i),u(e.skewX,n.skewX,r,i),s(e.scaleX,e.scaleY,n.scaleX,n.scaleY,r,i),e=n=null,function(t){for(var e,n=-1,a=i.length;++n<a;)r[(e=i[n]).i]=e.x(t);return r.join("")}}}function Bs(t){return((t=Math.exp(t))+1/t)/2}function Ys(t){return((t=Math.exp(t))-1/t)/2}function Gs(t){return((t=Math.exp(2*t))-1)/(t+1)}function Ws(t,e){var n,r,i=t[0],a=t[1],o=t[2],u=e[0],s=e[1],f=e[2],c=u-i,l=s-a,h=c*c+l*l;if(h<SC)r=Math.log(f/o)/MC,n=function(t){return[i+t*c,a+t*l,o*Math.exp(MC*t*r)]};else{var d=Math.sqrt(h),p=(f*f-o*o+EC*h)/(2*o*kC*d),g=(f*f-o*o-EC*h)/(2*f*kC*d),v=Math.log(Math.sqrt(p*p+1)-p),m=Math.log(Math.sqrt(g*g+1)-g);r=(m-v)/MC,n=function(t){var e=t*r,n=Bs(v),u=o/(kC*d)*(n*Gs(MC*e+v)-Ys(v));return[i+u*c,a+u*l,o*n/Bs(MC*e+v)]}}return n.duration=1e3*r,n}function Hs(t){return function(e,n){var r=t((e=is(e)).h,(n=is(n)).h),i=Cs(e.s,n.s),a=Cs(e.l,n.l),o=Cs(e.opacity,n.opacity);return function(t){return e.h=r(t),e.s=i(t),e.l=a(t),e.opacity=o(t),e+""}}}function Xs(t,e){var n=Cs((t=ss(t)).l,(e=ss(e)).l),r=Cs(t.a,e.a),i=Cs(t.b,e.b),a=Cs(t.opacity,e.opacity);return function(e){return t.l=n(e),t.a=r(e),t.b=i(e),t.opacity=a(e),t+""}}function Vs(t){return function(e,n){var r=t((e=gs(e)).h,(n=gs(n)).h),i=Cs(e.c,n.c),a=Cs(e.l,n.l),o=Cs(e.opacity,n.opacity);return function(t){return e.h=r(t),e.c=i(t),e.l=a(t),e.opacity=o(t),e+""}}}function Js(t){return function e(n){function r(e,r){var i=t((e=ys(e)).h,(r=ys(r)).h),a=Cs(e.s,r.s),o=Cs(e.l,r.l),u=Cs(e.opacity,r.opacity);return function(t){return e.h=i(t),e.s=a(t),e.l=o(Math.pow(t,n)),e.opacity=u(t),e+""}}return n=+n,r.gamma=e,r}(1)}function Zs(t,e){for(var n=new Array(e),r=0;r<e;++r)n[r]=t(r/(e-1));return n}function Qs(t){return function(){return t}}function Ks(t){return+t}function tf(t,e){return(e-=t=+t)?function(n){return(n-t)/e}:Qs(e)}function ef(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=e?0:t>=n?1:r(t)}}}function nf(t){return function(e,n){var r=t(e=+e,n=+n);return function(t){return t<=0?e:t>=1?n:r(t)}}}function rf(t,e,n,r){var i=t[0],a=t[1],o=e[0],u=e[1];return a<i?(i=n(a,i),o=r(u,o)):(i=n(i,a),o=r(o,u)),function(t){return o(i(t))}}function af(t,e,n,r){var i=Math.min(t.length,e.length)-1,a=new Array(i),o=new Array(i),u=-1;for(t[i]<t[0]&&(t=t.slice().reverse(),e=e.slice().reverse());++u<i;)a[u]=n(t[u],t[u+1]),o[u]=r(e[u],e[u+1]);return function(e){var n=BM(t,e,1,i)-1;return o[n](a[n](e))}}function of(t,e){return e.domain(t.domain()).range(t.range()).interpolate(t.interpolate()).clamp(t.clamp())}function uf(t,e){function n(){return i=Math.min(u.length,s.length)>2?af:rf,a=o=null,r}function r(e){return(a||(a=i(u,s,c?ef(t):t,f)))(+e)}var i,a,o,u=PC,s=PC,f=qs,c=!1;return r.invert=function(t){return(o||(o=i(s,u,tf,c?nf(e):e)))(+t)},r.domain=function(t){return arguments.length?(u=TA.call(t,Ks),n()):u.slice()},r.range=function(t){return arguments.length?(s=OA.call(t),n()):s.slice()},r.rangeRound=function(t){return s=OA.call(t),f=Us,n()},r.clamp=function(t){return arguments.length?(c=!!t,n()):c},r.interpolate=function(t){return arguments.length?(f=t,n()):f},n()}function sf(t,e){if((n=(t=e?t.toExponential(e-1):t.toExponential()).indexOf("e"))<0)return null;var n,r=t.slice(0,n);return[r.length>1?r[0]+r.slice(2):r,+t.slice(n+1)]}function ff(t){return t=sf(Math.abs(t)),t?t[1]:NaN}function cf(t,e){return function(n,r){for(var i=n.length,a=[],o=0,u=t[0],s=0;i>0&&u>0&&(s+u+1>r&&(u=Math.max(1,r-s)),a.push(n.substring(i-=u,i+u)),!((s+=u+1)>r));)u=t[o=(o+1)%t.length];return a.reverse().join(e)}}function lf(t){return function(e){return e.replace(/[0-9]/g,function(e){return t[+e]})}}function hf(t,e){t=t.toPrecision(e);t:for(var n,r=t.length,i=1,a=-1;i<r;++i)switch(t[i]){case".":a=n=i;break;case"0":0===a&&(a=i),n=i;break;case"e":break t;default:a>0&&(a=0)}return a>0?t.slice(0,a)+t.slice(n+1):t}function df(t,e){var n=sf(t,e);if(!n)return t+"";var r=n[0],i=n[1],a=i-(dC=3*Math.max(-8,Math.min(8,Math.floor(i/3))))+1,o=r.length;return a===o?r:a>o?r+new Array(a-o+1).join("0"):a>0?r.slice(0,a)+"."+r.slice(a):"0."+new Array(1-a).join("0")+sf(t,Math.max(0,e+a-1))[0]}function pf(t,e){var n=sf(t,e);if(!n)return t+"";var r=n[0],i=n[1];return i<0?"0."+new Array(-i).join("0")+r:r.length>i+1?r.slice(0,i+1)+"."+r.slice(i+1):r+new Array(i-r.length+2).join("0")}function gf(t){return new vf(t)}function vf(t){if(!(e=LC.exec(t)))throw new Error("invalid format: "+t);var e,n=e[1]||" ",r=e[2]||">",i=e[3]||"-",a=e[4]||"",o=!!e[5],u=e[6]&&+e[6],s=!!e[7],f=e[8]&&+e[8].slice(1),c=e[9]||"";"n"===c?(s=!0,c="g"):DC[c]||(c=""),(o||"0"===n&&"="===r)&&(o=!0,n="0",r="="),this.fill=n,this.align=r,this.sign=i,this.symbol=a,this.zero=o,this.width=u,this.comma=s,this.precision=f,this.type=c}function mf(t){return t}function yf(t){function e(t){function e(t){var e,i,u,c=v,_=m;if("c"===g)_=y(t)+_,t="";else{t=+t;var x=t<0;if(t=y(Math.abs(t),p),x&&0==+t&&(x=!1),c=(x?"("===f?f:"-":"-"===f||"("===f?"":f)+c,_=_+("s"===g?jC[8+dC/3]:"")+(x&&"("===f?")":""),b)for(e=-1,i=t.length;++e<i;)if(48>(u=t.charCodeAt(e))||u>57){_=(46===u?a+t.slice(e+1):t.slice(e))+_,t=t.slice(0,e);break}}d&&!l&&(t=r(t,1/0));var w=c.length+t.length+_.length,M=w<h?new Array(h-w+1).join(n):"";switch(d&&l&&(t=r(M+t,M.length?h-_.length:1/0),M=""),s){case"<":t=c+t+_+M;break;case"=":t=c+M+t+_;break;case"^":t=M.slice(0,w=M.length>>1)+c+t+_+M.slice(w);break;default:t=M+c+t+_}return o(t)}t=gf(t);var n=t.fill,s=t.align,f=t.sign,c=t.symbol,l=t.zero,h=t.width,d=t.comma,p=t.precision,g=t.type,v="$"===c?i[0]:"#"===c&&/[boxX]/.test(g)?"0"+g.toLowerCase():"",m="$"===c?i[1]:/[%p]/.test(g)?u:"",y=DC[g],b=!g||/[defgprs%]/.test(g);return p=null==p?g?6:12:/[gprs]/.test(g)?Math.max(1,Math.min(21,p)):Math.max(0,Math.min(20,p)),e.toString=function(){return t+""},e}function n(t,n){var r=e((t=gf(t),t.type="f",t)),i=3*Math.max(-8,Math.min(8,Math.floor(ff(n)/3))),a=Math.pow(10,-i),o=jC[8+i/3];return function(t){return r(a*t)+o}}var r=t.grouping&&t.thousands?cf(t.grouping,t.thousands):mf,i=t.currency,a=t.decimal,o=t.numerals?lf(t.numerals):mf,u=t.percent||"%";return{format:e,formatPrefix:n}}function bf(t){return qC=yf(t),UC=qC.format,FC=qC.formatPrefix,qC}function _f(t){return Math.max(0,-ff(Math.abs(t)))}function xf(t,e){return Math.max(0,3*Math.max(-8,Math.min(8,Math.floor(ff(e)/3)))-ff(Math.abs(t)))}function wf(t,e){return t=Math.abs(t),e=Math.abs(e)-t,Math.max(0,ff(e)-ff(t))+1}function Mf(t,e,n){var r,i=t[0],a=t[t.length-1],o=d(i,a,null==e?10:e);switch(n=gf(null==n?",f":n),n.type){case"s":var u=Math.max(Math.abs(i),Math.abs(a));return null!=n.precision||isNaN(r=xf(o,u))||(n.precision=r),FC(n,u);case"":case"e":case"g":case"p":case"r":null!=n.precision||isNaN(r=wf(o,Math.max(Math.abs(i),Math.abs(a))))||(n.precision=r-("e"===n.type));break;case"f":case"%":null!=n.precision||isNaN(r=_f(o))||(n.precision=r-2*("%"===n.type))}return UC(n)}function kf(t){var e=t.domain;return t.ticks=function(t){var n=e();return l(n[0],n[n.length-1],null==t?10:t)},t.tickFormat=function(t,n){return Mf(e(),t,n)},t.nice=function(n){null==n&&(n=10);var r,i=e(),a=0,o=i.length-1,u=i[a],s=i[o];return s<u&&(r=u,u=s,s=r,r=a,a=o,o=r),r=h(u,s,n),r>0?(u=Math.floor(u/r)*r,s=Math.ceil(s/r)*r,r=h(u,s,n)):r<0&&(u=Math.ceil(u*r)/r,s=Math.floor(s*r)/r,r=h(u,s,n)),r>0?(i[a]=Math.floor(u/r)*r,i[o]=Math.ceil(s/r)*r,e(i)):r<0&&(i[a]=Math.ceil(u*r)/r,i[o]=Math.floor(s*r)/r,e(i)),t},t}function Ef(){var t=uf(tf,Os);return t.copy=function(){return of(t,Ef())},kf(t)}function Sf(){function t(t){return+t}var e=[0,1];return t.invert=t,t.domain=t.range=function(n){return arguments.length?(e=TA.call(n,Ks),t):e.slice()},t.copy=function(){return Sf().domain(e)},kf(t)}function Af(t,e){t=t.slice();var n,r=0,i=t.length-1,a=t[r],o=t[i];return o<a&&(n=r,r=i,i=n,n=a,a=o,o=n),t[r]=e.floor(a),t[i]=e.ceil(o),t}function Cf(t,e){return(e=Math.log(e/t))?function(n){return Math.log(n/t)/e}:Qs(e)}function Nf(t,e){return t<0?function(n){return-Math.pow(-e,n)*Math.pow(-t,1-n)}:function(n){return Math.pow(e,n)*Math.pow(t,1-n)}}function zf(t){return isFinite(t)?+("1e"+t):t<0?0:t}function Tf(t){return 10===t?zf:t===Math.E?Math.exp:function(e){return Math.pow(t,e)}}function Of(t){return t===Math.E?Math.log:10===t&&Math.log10||2===t&&Math.log2||(t=Math.log(t),function(e){return Math.log(e)/t})}function Rf(t){return function(e){return-t(-e)}}function Pf(){function t(){return i=Of(r),a=Tf(r),n()[0]<0&&(i=Rf(i),a=Rf(a)),e}var e=uf(Cf,Nf).domain([1,10]),n=e.domain,r=10,i=Of(10),a=Tf(10);return e.base=function(e){return arguments.length?(r=+e,t()):r},e.domain=function(e){return arguments.length?(n(e),t()):n()},e.ticks=function(t){var e,o=n(),u=o[0],s=o[o.length-1];(e=s<u)&&(d=u,u=s,s=d);var f,c,h,d=i(u),p=i(s),g=null==t?10:+t,v=[];if(!(r%1)&&p-d<g){if(d=Math.round(d)-1,p=Math.round(p)+1,u>0){for(;d<p;++d)for(c=1,f=a(d);c<r;++c)if(!((h=f*c)<u)){if(h>s)break;v.push(h)}}else for(;d<p;++d)for(c=r-1,f=a(d);c>=1;--c)if(!((h=f*c)<u)){if(h>s)break;v.push(h)}}else v=l(d,p,Math.min(p-d,g)).map(a);return e?v.reverse():v},e.tickFormat=function(t,n){if(null==n&&(n=10===r?".0e":","),"function"!=typeof n&&(n=UC(n)),t===1/0)return n;null==t&&(t=10);var o=Math.max(1,r*t/e.ticks().length);return function(t){var e=t/a(Math.round(i(t)));return e*r<r-.5&&(e*=r),e<=o?n(t):""}},e.nice=function(){return n(Af(n(),{floor:function(t){return a(Math.floor(i(t)))},ceil:function(t){return a(Math.ceil(i(t)))}}))},e.copy=function(){return of(e,Pf().base(r))},e}function Df(t,e){return t<0?-Math.pow(-t,e):Math.pow(t,e)}function Lf(){function t(t,e){return(e=Df(e,n)-(t=Df(t,n)))?function(r){return(Df(r,n)-t)/e}:Qs(e)}function e(t,e){return e=Df(e,n)-(t=Df(t,n)),function(r){return Df(t+e*r,1/n)}}var n=1,r=uf(t,e),i=r.domain;return r.exponent=function(t){return arguments.length?(n=+t,i(i())):n},r.copy=function(){return of(r,Lf().exponent(n))},kf(r)}function qf(){return Lf().exponent(.5)}function Uf(){function t(){var t=0,i=Math.max(1,r.length);for(a=new Array(i-1);++t<i;)a[t-1]=g(n,t/i);return e}function e(t){if(!isNaN(t=+t))return r[BM(a,t)]}var n=[],r=[],a=[];return e.invertExtent=function(t){var e=r.indexOf(t);return e<0?[NaN,NaN]:[e>0?a[e-1]:n[0],e<a.length?a[e]:n[n.length-1]]},e.domain=function(e){if(!arguments.length)return n.slice();n=[];for(var r,a=0,o=e.length;a<o;++a)null==(r=e[a])||isNaN(r=+r)||n.push(r);return n.sort(i),t()},e.range=function(e){return arguments.length?(r=OA.call(e),t()):r.slice()},e.quantiles=function(){return a.slice()},e.copy=function(){return Uf().domain(n).range(r)},e}function Ff(){function t(t){if(t<=t)return o[BM(a,t,0,i)]}function e(){var e=-1;for(a=new Array(i);++e<i;)a[e]=((e+1)*r-(e-i)*n)/(i+1);return t}var n=0,r=1,i=1,a=[.5],o=[0,1];return t.domain=function(t){return arguments.length?(n=+t[0],r=+t[1],e()):[n,r]},t.range=function(t){return arguments.length?(i=(o=OA.call(t)).length-1,e()):o.slice()},t.invertExtent=function(t){var e=o.indexOf(t);return e<0?[NaN,NaN]:e<1?[n,a[0]]:e>=i?[a[i-1],r]:[a[e-1],a[e]]},t.copy=function(){return Ff().domain([n,r]).range(o)},kf(t)}function jf(){function t(t){if(t<=t)return n[BM(e,t,0,r)]}var e=[.5],n=[0,1],r=1;return t.domain=function(i){return arguments.length?(e=OA.call(i),r=Math.min(e.length,n.length-1),t):e.slice()},t.range=function(i){return arguments.length?(n=OA.call(i),r=Math.min(e.length,n.length-1),t):n.slice()},t.invertExtent=function(t){var r=n.indexOf(t);return[e[r-1],e[r]]},t.copy=function(){return jf().domain(e).range(n)},t}function If(t){return new Date(t)}function $f(t){return t instanceof Date?+t:+new Date(+t)}function Bf(t,e,n,r,i,o,u,s,f){function c(a){return(u(a)<a?v:o(a)<a?m:i(a)<a?y:r(a)<a?b:e(a)<a?n(a)<a?_:x:t(a)<a?w:M)(a)}function l(e,n,r,i){if(null==e&&(e=10),"number"==typeof e){var o=Math.abs(r-n)/e,u=a(function(t){return t[2]}).right(k,o);u===k.length?(i=d(n/HC,r/HC,e),e=t):u?(u=k[o/k[u-1][2]<k[u][2]/o?u-1:u],i=u[1],e=u[0]):(i=d(n,r,e),e=s)}return null==i?e:e.every(i)}var h=uf(tf,Os),p=h.invert,g=h.domain,v=f(".%L"),m=f(":%S"),y=f("%I:%M"),b=f("%I %p"),_=f("%a %d"),x=f("%b %d"),w=f("%B"),M=f("%Y"),k=[[u,1,IC],[u,5,5*IC],[u,15,15*IC],[u,30,30*IC],[o,1,$C],[o,5,5*$C],[o,15,15*$C],[o,30,30*$C],[i,1,BC],[i,3,3*BC],[i,6,6*BC],[i,12,12*BC],[r,1,YC],[r,2,2*YC],[n,1,GC],[e,1,WC],[e,3,3*WC],[t,1,HC]];return h.invert=function(t){return new Date(p(t))},h.domain=function(t){return arguments.length?g(TA.call(t,$f)):g().map(If)},h.ticks=function(t,e){var n,r=g(),i=r[0],a=r[r.length-1],o=a<i;return o&&(n=i,i=a,a=n),n=l(t,i,a,e),n=n?n.range(i,a+1):[],o?n.reverse():n},h.tickFormat=function(t,e){return null==e?c:f(e)},h.nice=function(t,e){var n=g();return(t=l(t,n[0],n[n.length-1],e))?g(Af(n,t)):h},h.copy=function(){return of(h,Bf(t,e,n,r,i,o,u,s,f))},h}function Yf(){return Bf(Ak,Sk,kk,Mk,wk,xk,_k,mk,Lk).domain([new Date(2e3,0,1),new Date(2e3,0,2)])}function Gf(){return Bf(Pk,Rk,Tk,zk,Nk,Ck,_k,mk,Uk).domain([Date.UTC(2e3,0,1),Date.UTC(2e3,0,2)])}function Wf(t){return t.match(/.{6}/g).map(function(t){return"#"+t})}function Hf(t){var e=t.length;return function(n){return t[Math.max(0,Math.min(e-1,Math.floor(n*e)))]}}function Xf(){function t(){var t=i().length,r=o[1]<o[0],h=o[r-0],d=o[1-r],p=Gu(t,s,f);e=(d-h)/(p||1),u&&(e=Math.floor(e)),h+=(d-h-e*(t-s))*l,n=e*(1-s),u&&(h=Math.round(h),n=Math.round(n));var g=c(t).map(function(t){return h+e*t});return a(r?g.reverse():g)}var e,n,r=Wu().unknown(void 0),i=r.domain,a=r.range,o=[0,1],u=!1,s=0,f=0,l=.5;return delete r.unknown,r.domain=function(e){return arguments.length?(i(e),t()):i()},r.range=function(e){return arguments.length?(o=[+e[0],+e[1]],t()):o.slice()},r.rangeRound=function(e){return o=[+e[0],+e[1]],u=!0,t()},r.bandwidth=function(){return n},r.step=function(){return e},r.round=function(e){return arguments.length?(u=!!e,t()):u},r.padding=function(e){return arguments.length?(s=f=Math.max(0,Math.min(1,e)),t()):s},r.paddingInner=function(e){return arguments.length?(s=Math.max(0,Math.min(1,e)),t()):s},r.paddingOuter=function(e){return arguments.length?(f=Math.max(0,Math.min(1,e)),t()):f},r.align=function(e){return arguments.length?(l=Math.max(0,Math.min(1,e)),t()):l},r.invertRange=function(t){if(null!=t[0]&&null!=t[1]){var e,r,u,s=+t[0],f=+t[1],c=o[1]<o[0],l=c?a().reverse():a(),h=l.length-1;if(s===s&&f===f&&(f<s&&(u=s,s=f,f=u),!(f<l[0]||s>o[1-c])))return e=Math.max(0,BM(l,s)-1),r=s===f?e:BM(l,f)-1,s-l[e]>n+1e-10&&++e,c&&(u=e,e=h-r,r=h-u),e>r?void 0:i().slice(e,r+1)}},r.invert=function(t){var e=r.invertRange([t,t]);return e?e[0]:e},r.copy=function(){return Xf().domain(i()).range(o).round(u).paddingInner(s).paddingOuter(f).align(l)},t()}function Vf(t){var e=t.copy;return t.padding=t.paddingOuter,delete t.paddingInner,t.copy=function(){return Vf(e())},t}function Jf(){return Vf(Xf().paddingInner(1))}function Zf(t){return nN.call(t,function(t){return+t})}function Qf(){function t(t){return n(t)}function e(t){r=Zf(t),n.domain([r[0],at(r)])}var n=Ef(),r=[];return t.domain=function(n){return arguments.length?(e(n),t):r.slice()},t.range=function(e){return arguments.length?(n.range(e),t):n.range()},t.rangeRound=function(e){return arguments.length?(n.rangeRound(e),t):n.rangeRound()},t.interpolate=function(e){return arguments.length?(n.interpolate(e),t):n.interpolate()},t.invert=function(t){return n.invert(t)},t.ticks=function(e){var n=r.length,i=~~(n/(e||n));return i<2?t.domain():r.filter(function(t,e){return!(e%i)})},t.tickFormat=function(){return n.tickFormat.apply(n,arguments)},t.copy=function(){return Qf().domain(t.domain()).range(t.range())},t}function Kf(){function t(t){return null==t||t!==t?void 0:n[(BM(e,t)-1)%n.length]}var e=[],n=[];return t.domain=function(n){return arguments.length?(e=Zf(n),t):e.slice()},t.range=function(e){return arguments.length?(n=rN.call(e),t):n.slice()},t.copy=function(){return Kf().domain(t.domain()).range(t.range())},t}function tc(t){function e(){var t=r.domain();i=t[0],a=at(t)-i}function n(e){var n=(e-i)/a;return t(o?Math.max(0,Math.min(1,n)):n)}var r=Ef(),i=0,a=1,o=!1;return n.clamp=function(t){return arguments.length?(o=!!t,n):o},n.domain=function(t){return arguments.length?(r.domain(t),e(),n):r.domain()},n.interpolator=function(e){return arguments.length?(t=e,n):t},n.copy=function(){return tc().domain(r.domain()).clamp(o).interpolator(t)},n.ticks=function(t){return r.ticks(t)},n.tickFormat=function(t,e){return r.tickFormat(t,e)},n.nice=function(t){return r.nice(t),e(),n},n}function ec(t,e){return function(){var n=e();return n.invertRange||(n.invertRange=n.invert?Bu(n):n.invertExtent?Yu(n):void 0),n.type=t,n}}function nc(t,e){return arguments.length>1?(iN[t]=ec(t,e),this):iN.hasOwnProperty(t)?iN[t]:void 0}function rc(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function ic(t){for(var e=t.length/6|0,n=new Array(e),r=0;r<e;)n[r]="#"+t.slice(6*r,6*++r);return n}function ac(t){return gC(t[t.length-1])}function oc(t,e){bz[t]=mz["interpolate"+e],yz[t]=mz["scheme"+e]}function uc(t,e){if(arguments.length>1)return bz[t]=e,this;var n=t.split("-");return t=n[0],n=+n[1]+1,n&&yz.hasOwnProperty(t)?yz[t][n-1]:!n&&bz.hasOwnProperty(t)?bz[t]:void 0}function sc(t,e){var n=e[0],r=at(e)-n;return function(e){return t(n+e*r)}}function fc(t,e,n){return"linear"===t.type||"sequential"===t.type?function(t){return(t-e)/(n-e)}:t.copy().domain([e,n]).range([0,1]).interpolate(cc)}function cc(t,e){var n=e-t;return function(e){return t+e*n}}function lc(t,e){var n=RC[hc(t)];return null!=e&&n&&n.gamma?n.gamma(e):n}function hc(t){return"interpolate"+t.toLowerCase().split("-").map(function(t){return t[0].toUpperCase()+t.slice(1)}).join("")}function dc(t,e){return t-e}function pc(t){for(var e=0,n=t.length,r=t[n-1][1]*t[0][0]-t[n-1][0]*t[0][1];++e<n;)r+=t[e-1][1]*t[e][0]-t[e-1][0]*t[e][1];return r}function gc(t){return function(){return t}}function vc(t,e){for(var n,r=-1,i=e.length;++r<i;)if(n=mc(t,e[r]))return n;return 0}function mc(t,e){for(var n=e[0],r=e[1],i=-1,a=0,o=t.length,u=o-1;a<o;u=a++){var s=t[a],f=s[0],c=s[1],l=t[u],h=l[0],d=l[1];if(yc(s,l,e))return 0;c>r!=d>r&&n<(h-f)*(r-c)/(d-c)+f&&(i=-i)}return i}function yc(t,e,n){var r;return bc(t,e,n)&&_c(t[r=+(t[0]===e[0])],n[r],e[r])}function bc(t,e,n){return(e[0]-t[0])*(n[1]-t[1])==(n[0]-t[0])*(e[1]-t[1])}function _c(t,e,n){return t<=e&&e<=n||n<=e&&e<=t}function xc(){}function wc(){function t(t){var n=o(t);if(Array.isArray(n))n=n.slice().sort(dc);else{var r=f(t),i=r[0],a=r[1];n=d(i,a,n),n=c(Math.floor(i/n)*n,Math.floor(a/n)*n,n)}return n.map(function(n){var r=[],i=[];return e(t,n,function(e){u(e,t,n),pc(e)>0?r.push([e]):i.push(e)}),i.forEach(function(t){for(var e,n=0,i=r.length;n<i;++n)if(vc((e=r[n])[0],t))return void e.push(t)}),r
}).map(function(t,e){return{type:"MultiPolygon",value:n[e],coordinates:t}})}function e(t,e,r){function o(t){var e,i,a=[t[0][0]+u,t[0][1]+s],o=[t[1][0]+u,t[1][1]+s],f=n(a),c=n(o);(e=p[f])?(i=d[c])?(delete p[e.end],delete d[i.start],e===i?(e.ring.push(o),r(e.ring)):d[e.start]=p[i.end]={start:e.start,end:i.end,ring:e.ring.concat(i.ring)}):(delete p[e.end],e.ring.push(o),p[e.end=c]=e):(e=d[c])?(i=p[f])?(delete d[e.start],delete p[i.end],e===i?(e.ring.push(o),r(e.ring)):d[i.start]=p[e.end]={start:i.start,end:e.end,ring:i.ring.concat(e.ring)}):(delete d[e.start],e.ring.unshift(a),d[e.start=f]=e):d[f]=p[c]={start:f,end:c,ring:[a,o]}}var u,s,f,c,l,h,d=new Array,p=new Array;for(u=s=-1,c=t[0]>=e,wz[c<<1].forEach(o);++u<i-1;)f=c,c=t[u+1]>=e,wz[f|c<<1].forEach(o);for(wz[c<<0].forEach(o);++s<a-1;){for(u=-1,c=t[s*i+i]>=e,l=t[s*i]>=e,wz[c<<1|l<<2].forEach(o);++u<i-1;)f=c,c=t[s*i+i+u+1]>=e,h=l,l=t[s*i+u+1]>=e,wz[f|c<<1|l<<2|h<<3].forEach(o);wz[c|l<<3].forEach(o)}for(u=-1,l=t[s*i]>=e,wz[l<<2].forEach(o);++u<i-1;)h=l,l=t[s*i+u+1]>=e,wz[l<<2|h<<3].forEach(o);wz[l<<3].forEach(o)}function n(t){return 2*t[0]+t[1]*(i+1)*4}function r(t,e,n){t.forEach(function(t){var r,o=t[0],u=t[1],s=0|o,f=0|u,c=e[f*i+s];o>0&&o<i&&s===o&&(r=e[f*i+s-1],t[0]=o+(n-r)/(c-r)-.5),u>0&&u<a&&f===u&&(r=e[(f-1)*i+s],t[1]=u+(n-r)/(c-r)-.5)})}var i=1,a=1,o=p,u=r;return t.size=function(e){if(!arguments.length)return[i,a];var n=Math.ceil(e[0]),r=Math.ceil(e[1]);if(!(n>0&&r>0))throw new Error("invalid size");return i=n,a=r,t},t.thresholds=function(e){return arguments.length?(o="function"==typeof e?e:gc(Array.isArray(e)?xz.call(e):e),t):o},t.smooth=function(e){return arguments.length?(u=e?r:xc,t):u===r},t}function Mc(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<i;++o)for(var u=0,s=0;u<r+n;++u)u<r&&(s+=t.data[u+o*r]),u>=n&&(u>=a&&(s-=t.data[u-a+o*r]),e.data[u-n+o*r]=s/Math.min(u+1,r-1+a-u,a))}function kc(t,e,n){for(var r=t.width,i=t.height,a=1+(n<<1),o=0;o<r;++o)for(var u=0,s=0;u<i+n;++u)u<i&&(s+=t.data[o+u*r]),u>=n&&(u>=a&&(s-=t.data[o+(u-a)*r]),e.data[o+(u-n)*r]=s/Math.min(u+1,i-1+a-u,a))}function Ec(t){return t[0]}function Sc(t){return t[1]}function Ac(){function t(t){var n=new Float32Array(g*m),r=new Float32Array(g*m);t.forEach(function(t,e,r){var i=o(t,e,r)+p>>h,a=u(t,e,r)+p>>h;i>=0&&i<g&&a>=0&&a<m&&++n[i+a*g]}),Mc({width:g,height:m,data:n},{width:g,height:m,data:r},l>>h),kc({width:g,height:m,data:r},{width:g,height:m,data:n},l>>h),Mc({width:g,height:m,data:n},{width:g,height:m,data:r},l>>h),kc({width:g,height:m,data:r},{width:g,height:m,data:n},l>>h),Mc({width:g,height:m,data:n},{width:g,height:m,data:r},l>>h),kc({width:g,height:m,data:r},{width:g,height:m,data:n},l>>h);var i=y(n);if(!Array.isArray(i)){var a=v(n);i=d(0,a,i),i=c(0,Math.floor(a/i)*i,i),i.shift()}return wc().thresholds(i).size([g,m])(n).map(e)}function e(t){return t.value*=Math.pow(2,-2*h),t.coordinates.forEach(n),t}function n(t){t.forEach(r)}function r(t){t.forEach(i)}function i(t){t[0]=t[0]*Math.pow(2,h)-p,t[1]=t[1]*Math.pow(2,h)-p}function a(){return p=3*l,g=s+2*p>>h,m=f+2*p>>h,t}var o=Ec,u=Sc,s=960,f=500,l=20,h=2,p=3*l,g=s+2*p>>h,m=f+2*p>>h,y=gc(20);return t.x=function(e){return arguments.length?(o="function"==typeof e?e:gc(+e),t):o},t.y=function(e){return arguments.length?(u="function"==typeof e?e:gc(+e),t):u},t.size=function(t){if(!arguments.length)return[s,f];var e=Math.ceil(t[0]),n=Math.ceil(t[1]);if(!(e>=0||e>=0))throw new Error("invalid size");return s=e,f=n,a()},t.cellSize=function(t){if(!arguments.length)return 1<<h;if(!((t=+t)>=1))throw new Error("invalid cell size");return h=Math.floor(Math.log(t)/Math.LN2),a()},t.thresholds=function(e){return arguments.length?(y="function"==typeof e?e:gc(Array.isArray(e)?xz.call(e):e),t):y},t.bandwidth=function(t){if(!arguments.length)return Math.sqrt(l*(l+1));if(!((t=+t)>=0))throw new Error("invalid bandwidth");return l=Math.round((Math.sqrt(4*t*t+1)-1)/2),a()},t}function Cc(t){Io.call(this,null,t)}function Nc(){return new zc}function zc(){this.reset()}function Tc(t,e,n){var r=t.s=e+n,i=r-e,a=r-i;t.t=e-a+(n-i)}function Oc(t){return t>1?0:t<-1?Az:Math.acos(t)}function Rc(t){return t>1?Cz:t<-1?-Cz:Math.asin(t)}function Pc(){}function Dc(t,e){t&&Wz.hasOwnProperty(t.type)&&Wz[t.type](t,e)}function Lc(t,e,n){var r,i=-1,a=t.length-n;for(e.lineStart();++i<a;)r=t[i],e.point(r[0],r[1],r[2]);e.lineEnd()}function qc(t,e){var n=-1,r=t.length;for(e.polygonStart();++n<r;)Lc(t[n],e,1);e.polygonEnd()}function Uc(t,e){t&&Gz.hasOwnProperty(t.type)?Gz[t.type](t,e):Dc(t,e)}function Fc(t){return[Dz(t[1],t[0]),Rc(t[2])]}function jc(t){var e=t[0],n=t[1],r=Lz(n);return[r*Lz(e),r*Iz(e),Iz(n)]}function Ic(t,e){return t[0]*e[0]+t[1]*e[1]+t[2]*e[2]}function $c(t,e){return[t[1]*e[2]-t[2]*e[1],t[2]*e[0]-t[0]*e[2],t[0]*e[1]-t[1]*e[0]]}function Bc(t,e){t[0]+=e[0],t[1]+=e[1],t[2]+=e[2]}function Yc(t,e){return[t[0]*e,t[1]*e,t[2]*e]}function Gc(t){var e=Bz(t[0]*t[0]+t[1]*t[1]+t[2]*t[2]);t[0]/=e,t[1]/=e,t[2]/=e}function Wc(t,e){function n(n,r){return n=t(n,r),e(n[0],n[1])}return t.invert&&e.invert&&(n.invert=function(n,r){return(n=e.invert(n,r))&&t.invert(n[0],n[1])}),n}function Hc(t,e){return[t>Az?t-zz:t<-Az?t+zz:t,e]}function Xc(t,e,n){return(t%=zz)?e||n?Wc(Jc(t),Zc(e,n)):Jc(t):e||n?Zc(e,n):Hc}function Vc(t){return function(e,n){return e+=t,[e>Az?e-zz:e<-Az?e+zz:e,n]}}function Jc(t){var e=Vc(t);return e.invert=Vc(-t),e}function Zc(t,e){function n(t,e){var n=Lz(e),u=Lz(t)*n,s=Iz(t)*n,f=Iz(e),c=f*r+u*i;return[Dz(s*a-c*o,u*r-f*i),Rc(c*a+s*o)]}var r=Lz(t),i=Iz(t),a=Lz(e),o=Iz(e);return n.invert=function(t,e){var n=Lz(e),u=Lz(t)*n,s=Iz(t)*n,f=Iz(e),c=f*a-s*o;return[Dz(s*a+f*o,u*r+c*i),Rc(c*r-u*i)]},n}function Qc(t){function e(e){return e=t(e[0]*Oz,e[1]*Oz),e[0]*=Tz,e[1]*=Tz,e}return t=Xc(t[0]*Oz,t[1]*Oz,t.length>2?t[2]*Oz:0),e.invert=function(e){return e=t.invert(e[0]*Oz,e[1]*Oz),e[0]*=Tz,e[1]*=Tz,e},e}function Kc(t,e,n,r,i,a){if(n){var o=Lz(e),u=Iz(e),s=r*n;null==i?(i=e+r*zz,a=e-s/2):(i=tl(o,i),a=tl(o,a),(r>0?i<a:i>a)&&(i+=r*zz));for(var f,c=i;r>0?c>a:c<a;c-=s)f=Fc([o,-u*Lz(c),-u*Iz(c)]),t.point(f[0],f[1])}}function tl(t,e){e=jc(e),e[0]-=t,Gc(e);var n=Oc(-e[1]);return((-e[2]<0?-n:n)+zz-Sz)%zz}function el(){var t,e=[];return{point:function(e,n){t.push([e,n])},lineStart:function(){e.push(t=[])},lineEnd:Pc,rejoin:function(){e.length>1&&e.push(e.pop().concat(e.shift()))},result:function(){var n=e;return e=[],t=null,n}}}function nl(t,e,n,r,i,a){var o,u=t[0],s=t[1],f=e[0],c=e[1],l=0,h=1,d=f-u,p=c-s;if(o=n-u,d||!(o>0)){if(o/=d,d<0){if(o<l)return;o<h&&(h=o)}else if(d>0){if(o>h)return;o>l&&(l=o)}if(o=i-u,d||!(o<0)){if(o/=d,d<0){if(o>h)return;o>l&&(l=o)}else if(d>0){if(o<l)return;o<h&&(h=o)}if(o=r-s,p||!(o>0)){if(o/=p,p<0){if(o<l)return;o<h&&(h=o)}else if(p>0){if(o>h)return;o>l&&(l=o)}if(o=a-s,p||!(o<0)){if(o/=p,p<0){if(o>h)return;o>l&&(l=o)}else if(p>0){if(o<l)return;o<h&&(h=o)}return l>0&&(t[0]=u+l*d,t[1]=s+l*p),h<1&&(e[0]=u+h*d,e[1]=s+h*p),!0}}}}}function rl(t,e){return Rz(t[0]-e[0])<Sz&&Rz(t[1]-e[1])<Sz}function il(t,e,n,r){this.x=t,this.z=e,this.o=n,this.e=r,this.v=!1,this.n=this.p=null}function al(t,e,n,r,i){var a,o,u=[],s=[];if(t.forEach(function(t){if(!((e=t.length-1)<=0)){var e,n,r=t[0],o=t[e];if(rl(r,o)){for(i.lineStart(),a=0;a<e;++a)i.point((r=t[a])[0],r[1]);return void i.lineEnd()}u.push(n=new il(r,t,null,!0)),s.push(n.o=new il(r,null,n,!1)),u.push(n=new il(o,t,null,!1)),s.push(n.o=new il(o,null,n,!0))}}),u.length){for(s.sort(e),ol(u),ol(s),a=0,o=s.length;a<o;++a)s[a].e=n=!n;for(var f,c,l=u[0];;){for(var h=l,d=!0;h.v;)if((h=h.n)===l)return;f=h.z,i.lineStart();do{if(h.v=h.o.v=!0,h.e){if(d)for(a=0,o=f.length;a<o;++a)i.point((c=f[a])[0],c[1]);else r(h.x,h.n.x,1,i);h=h.n}else{if(d)for(f=h.p.z,a=f.length-1;a>=0;--a)i.point((c=f[a])[0],c[1]);else r(h.x,h.p.x,-1,i);h=h.p}h=h.o,f=h.z,d=!d}while(!h.v);i.lineEnd()}}}function ol(t){if(e=t.length){for(var e,n,r=0,i=t[0];++r<e;)i.n=n=t[r],n.p=i,i=n;i.n=n=t[0],n.p=i}}function ul(t,e,n,r){function i(i,a){return t<=i&&i<=n&&e<=a&&a<=r}function a(i,a,u,f){var c=0,l=0;if(null==i||(c=o(i,u))!==(l=o(a,u))||s(i,a)<0^u>0){do{f.point(0===c||3===c?t:n,c>1?r:e)}while((c=(c+u+4)%4)!==l)}else f.point(a[0],a[1])}function o(r,i){return Rz(r[0]-t)<Sz?i>0?0:3:Rz(r[0]-n)<Sz?i>0?2:1:Rz(r[1]-e)<Sz?i>0?1:0:i>0?3:2}function u(t,e){return s(t.x,e.x)}function s(t,e){var n=o(t,1),r=o(e,1);return n!==r?n-r:0===n?e[1]-t[1]:1===n?t[0]-e[0]:2===n?t[1]-e[1]:e[0]-t[0]}return function(o){function s(t,e){i(t,e)&&A.point(t,e)}function f(){for(var e=0,n=0,i=v.length;n<i;++n)for(var a,o,u=v[n],s=1,f=u.length,c=u[0],l=c[0],h=c[1];s<f;++s)a=l,o=h,c=u[s],l=c[0],h=c[1],o<=r?h>r&&(l-a)*(r-o)>(h-o)*(t-a)&&++e:h<=r&&(l-a)*(r-o)<(h-o)*(t-a)&&--e;return e}function c(){A=C,g=[],v=[],S=!0}function l(){var t=f(),e=S&&t,n=(g=b(g)).length;(e||n)&&(o.polygonStart(),e&&(o.lineStart(),a(null,null,1,o),o.lineEnd()),n&&al(g,u,t,a,o),o.polygonEnd()),A=o,g=v=m=null}function h(){N.point=p,v&&v.push(m=[]),E=!0,k=!1,w=M=NaN}function d(){g&&(p(y,_),x&&k&&C.rejoin(),g.push(C.result())),N.point=s,k&&A.lineEnd()}function p(a,o){var u=i(a,o);if(v&&m.push([a,o]),E)y=a,_=o,x=u,E=!1,u&&(A.lineStart(),A.point(a,o));else if(u&&k)A.point(a,o);else{var s=[w=Math.max(nT,Math.min(eT,w)),M=Math.max(nT,Math.min(eT,M))],f=[a=Math.max(nT,Math.min(eT,a)),o=Math.max(nT,Math.min(eT,o))];nl(s,f,t,e,n,r)?(k||(A.lineStart(),A.point(s[0],s[1])),A.point(f[0],f[1]),u||A.lineEnd(),S=!1):u&&(A.lineStart(),A.point(a,o),S=!1)}w=a,M=o,k=u}var g,v,m,y,_,x,w,M,k,E,S,A=o,C=el(),N={point:s,lineStart:h,lineEnd:d,polygonStart:c,polygonEnd:l};return N}}function sl(t,e){var n=e[0],r=e[1],i=[Iz(n),-Lz(n),0],a=0,o=0;rT.reset();for(var u=0,s=t.length;u<s;++u)if(c=(f=t[u]).length)for(var f,c,l=f[c-1],h=l[0],d=l[1]/2+Nz,p=Iz(d),g=Lz(d),v=0;v<c;++v,h=y,p=_,g=x,l=m){var m=f[v],y=m[0],b=m[1]/2+Nz,_=Iz(b),x=Lz(b),w=y-h,M=w>=0?1:-1,k=M*w,E=k>Az,S=p*_;if(rT.add(Dz(S*M*Iz(k),g*x+S*Lz(k))),a+=E?w+M*zz:w,E^h>=n^y>=n){var A=$c(jc(l),jc(m));Gc(A);var C=$c(i,A);Gc(C);var N=(E^w>=0?-1:1)*Rc(C[2]);(r>N||r===N&&(A[0]||A[1]))&&(o+=E^w>=0?1:-1)}}return(a<-Sz||a<Sz&&rT<-Sz)^1&o}function fl(t,e,n){var r=c(t,e-Sz,n).concat(e);return function(t){return r.map(function(e){return[t,e]})}}function cl(t,e,n){var r=c(t,e-Sz,n).concat(e);return function(t){return r.map(function(e){return[e,t]})}}function ll(){function t(){return{type:"MultiLineString",coordinates:e()}}function e(){return c(qz(a/m)*m,i,m).map(d).concat(c(qz(f/y)*y,s,y).map(p)).concat(c(qz(r/g)*g,n,g).filter(function(t){return Rz(t%m)>Sz}).map(l)).concat(c(qz(u/v)*v,o,v).filter(function(t){return Rz(t%y)>Sz}).map(h))}var n,r,i,a,o,u,s,f,l,h,d,p,g=10,v=g,m=90,y=360,b=2.5;return t.lines=function(){return e().map(function(t){return{type:"LineString",coordinates:t}})},t.outline=function(){return{type:"Polygon",coordinates:[d(a).concat(p(s).slice(1),d(i).reverse().slice(1),p(f).reverse().slice(1))]}},t.extent=function(e){return arguments.length?t.extentMajor(e).extentMinor(e):t.extentMinor()},t.extentMajor=function(e){return arguments.length?(a=+e[0][0],i=+e[1][0],f=+e[0][1],s=+e[1][1],a>i&&(e=a,a=i,i=e),f>s&&(e=f,f=s,s=e),t.precision(b)):[[a,f],[i,s]]},t.extentMinor=function(e){return arguments.length?(r=+e[0][0],n=+e[1][0],u=+e[0][1],o=+e[1][1],r>n&&(e=r,r=n,n=e),u>o&&(e=u,u=o,o=e),t.precision(b)):[[r,u],[n,o]]},t.step=function(e){return arguments.length?t.stepMajor(e).stepMinor(e):t.stepMinor()},t.stepMajor=function(e){return arguments.length?(m=+e[0],y=+e[1],t):[m,y]},t.stepMinor=function(e){return arguments.length?(g=+e[0],v=+e[1],t):[g,v]},t.precision=function(e){return arguments.length?(b=+e,l=fl(u,o,90),h=cl(r,n,b),d=fl(f,s,90),p=cl(a,i,b),t):b},t.extentMajor([[-180,-90+Sz],[180,90-Sz]]).extentMinor([[-180,-80-Sz],[180,80+Sz]])}function hl(t){return t}function dl(){oT.point=pl}function pl(t,e){oT.point=gl,Hz=Vz=t,Xz=Jz=e}function gl(t,e){aT.add(Jz*t-Vz*e),Vz=t,Jz=e}function vl(){gl(Hz,Xz)}function ml(t,e){t<uT&&(uT=t),t>fT&&(fT=t),e<sT&&(sT=e),e>cT&&(cT=e)}function yl(t,e){hT+=t,dT+=e,++pT}function bl(){xT.point=_l}function _l(t,e){xT.point=xl,yl(Kz=t,tT=e)}function xl(t,e){var n=t-Kz,r=e-tT,i=Bz(n*n+r*r);gT+=i*(Kz+t)/2,vT+=i*(tT+e)/2,mT+=i,yl(Kz=t,tT=e)}function wl(){xT.point=yl}function Ml(){xT.point=El}function kl(){Sl(Zz,Qz)}function El(t,e){xT.point=Sl,yl(Zz=Kz=t,Qz=tT=e)}function Sl(t,e){var n=t-Kz,r=e-tT,i=Bz(n*n+r*r);gT+=i*(Kz+t)/2,vT+=i*(tT+e)/2,mT+=i,i=tT*t-Kz*e,yT+=i*(Kz+t),bT+=i*(tT+e),_T+=3*i,yl(Kz=t,tT=e)}function Al(t){this._context=t}function Cl(t,e){CT.point=Nl,MT=ET=t,kT=ST=e}function Nl(t,e){ET-=t,ST-=e,AT.add(Bz(ET*ET+ST*ST)),ET=t,ST=e}function zl(){this._string=[]}function Tl(t){return"m0,"+t+"a"+t+","+t+" 0 1,1 0,"+-2*t+"a"+t+","+t+" 0 1,1 0,"+2*t+"z"}function Ol(t,e){function n(t){return t&&("function"==typeof a&&i.pointRadius(+a.apply(this,arguments)),Uc(t,r(i))),i.result()}var r,i,a=4.5;return n.area=function(t){return Uc(t,r(oT)),oT.result()},n.measure=function(t){return Uc(t,r(CT)),CT.result()},n.bounds=function(t){return Uc(t,r(lT)),lT.result()},n.centroid=function(t){return Uc(t,r(xT)),xT.result()},n.projection=function(e){return arguments.length?(r=null==e?(t=null,hl):(t=e).stream,n):t},n.context=function(t){return arguments.length?(i=null==t?(e=null,new zl):new Al(e=t),"function"!=typeof a&&i.pointRadius(a),n):e},n.pointRadius=function(t){return arguments.length?(a="function"==typeof t?t:(i.pointRadius(+t),+t),n):a},n.projection(t).context(e)}function Rl(t,e,n,r){return function(i,a){function o(e,n){var r=i(e,n);t(e=r[0],n=r[1])&&a.point(e,n)}function u(t,e){var n=i(t,e);v.point(n[0],n[1])}function s(){w.point=u,v.lineStart()}function f(){w.point=o,v.lineEnd()}function c(t,e){g.push([t,e]);var n=i(t,e);_.point(n[0],n[1])}function l(){_.lineStart(),g=[]}function h(){c(g[0][0],g[0][1]),_.lineEnd();var t,e,n,r,i=_.clean(),o=y.result(),u=o.length;if(g.pop(),d.push(g),g=null,u)if(1&i){if(n=o[0],(e=n.length-1)>0){for(x||(a.polygonStart(),x=!0),a.lineStart(),t=0;t<e;++t)a.point((r=n[t])[0],r[1]);a.lineEnd()}}else u>1&&2&i&&o.push(o.pop().concat(o.shift())),p.push(o.filter(Pl))}var d,p,g,v=e(a),m=i.invert(r[0],r[1]),y=el(),_=e(y),x=!1,w={point:o,lineStart:s,lineEnd:f,polygonStart:function(){w.point=c,w.lineStart=l,w.lineEnd=h,p=[],d=[]},polygonEnd:function(){w.point=o,w.lineStart=s,w.lineEnd=f,p=b(p);var t=sl(d,m);p.length?(x||(a.polygonStart(),x=!0),al(p,Dl,t,n,a)):t&&(x||(a.polygonStart(),x=!0),a.lineStart(),n(null,null,1,a),a.lineEnd()),x&&(a.polygonEnd(),x=!1),p=d=null},sphere:function(){a.polygonStart(),a.lineStart(),n(null,null,1,a),a.lineEnd(),a.polygonEnd()}};return w}}function Pl(t){return t.length>1}function Dl(t,e){return((t=t.x)[0]<0?t[1]-Cz-Sz:Cz-t[1])-((e=e.x)[0]<0?e[1]-Cz-Sz:Cz-e[1])}function Ll(t){var e,n=NaN,r=NaN,i=NaN;return{lineStart:function(){t.lineStart(),e=1},point:function(a,o){var u=a>0?Az:-Az,s=Rz(a-n);Rz(s-Az)<Sz?(t.point(n,r=(r+o)/2>0?Cz:-Cz),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),t.point(a,r),e=0):i!==u&&s>=Az&&(Rz(n-i)<Sz&&(n-=i*Sz),Rz(a-u)<Sz&&(a-=u*Sz),r=ql(n,r,a,o),t.point(i,r),t.lineEnd(),t.lineStart(),t.point(u,r),e=0),t.point(n=a,r=o),i=u},lineEnd:function(){t.lineEnd(),n=r=NaN},clean:function(){return 2-e}}}function ql(t,e,n,r){var i,a,o=Iz(t-n);return Rz(o)>Sz?Pz((Iz(e)*(a=Lz(r))*Iz(n)-Iz(r)*(i=Lz(e))*Iz(t))/(i*a*o)):(e+r)/2}function Ul(t,e,n,r){var i;if(null==t)i=n*Cz,r.point(-Az,i),r.point(0,i),r.point(Az,i),r.point(Az,0),r.point(Az,-i),r.point(0,-i),r.point(-Az,-i),r.point(-Az,0),r.point(-Az,i);else if(Rz(t[0]-e[0])>Sz){var a=t[0]<e[0]?Az:-Az;i=n*a/2,r.point(-a,i),r.point(0,i),r.point(a,i)}else r.point(e[0],e[1])}function Fl(t,e){function n(n,r,i,a){Kc(a,t,e,i,n,r)}function r(t,e){return Lz(t)*Lz(e)>u}function i(t){var e,n,i,u,c;return{lineStart:function(){u=i=!1,c=1},point:function(l,h){var d,p=[l,h],g=r(l,h),v=s?g?0:o(l,h):g?o(l+(l<0?Az:-Az),h):0;if(!e&&(u=i=g)&&t.lineStart(),g!==i&&(!(d=a(e,p))||rl(e,d)||rl(p,d))&&(p[0]+=Sz,p[1]+=Sz,g=r(p[0],p[1])),g!==i)c=0,g?(t.lineStart(),d=a(p,e),t.point(d[0],d[1])):(d=a(e,p),t.point(d[0],d[1]),t.lineEnd()),e=d;else if(f&&e&&s^g){var m;v&n||!(m=a(p,e,!0))||(c=0,s?(t.lineStart(),t.point(m[0][0],m[0][1]),t.point(m[1][0],m[1][1]),t.lineEnd()):(t.point(m[1][0],m[1][1]),t.lineEnd(),t.lineStart(),t.point(m[0][0],m[0][1])))}!g||e&&rl(e,p)||t.point(p[0],p[1]),e=p,i=g,n=v},lineEnd:function(){i&&t.lineEnd(),e=null},clean:function(){return c|(u&&i)<<1}}}function a(t,e,n){var r=jc(t),i=jc(e),a=[1,0,0],o=$c(r,i),s=Ic(o,o),f=o[0],c=s-f*f;if(!c)return!n&&t;var l=u*s/c,h=-u*f/c,d=$c(a,o),p=Yc(a,l);Bc(p,Yc(o,h));var g=d,v=Ic(p,g),m=Ic(g,g),y=v*v-m*(Ic(p,p)-1);if(!(y<0)){var b=Bz(y),_=Yc(g,(-v-b)/m);if(Bc(_,p),_=Fc(_),!n)return _;var x,w=t[0],M=e[0],k=t[1],E=e[1];M<w&&(x=w,w=M,M=x);var S=M-w,A=Rz(S-Az)<Sz,C=A||S<Sz;if(!A&&E<k&&(x=k,k=E,E=x),C?A?k+E>0^_[1]<(Rz(_[0]-w)<Sz?k:E):k<=_[1]&&_[1]<=E:S>Az^(w<=_[0]&&_[0]<=M)){var N=Yc(g,(-v+b)/m);return Bc(N,p),[_,Fc(N)]}}}function o(e,n){var r=s?t:Az-t,i=0;return e<-r?i|=1:e>r&&(i|=2),n<-r?i|=4:n>r&&(i|=8),i}var u=Lz(t),s=u>0,f=Rz(u)>Sz;return Rl(r,i,n,s?[0,-t]:[-Az,t-Az])}function jl(t){return function(e){var n=new Il;for(var r in t)n[r]=t[r];return n.stream=e,n}}function Il(){}function $l(t,e,n){var r=e[1][0]-e[0][0],i=e[1][1]-e[0][1],a=t.clipExtent&&t.clipExtent();t.scale(150).translate([0,0]),null!=a&&t.clipExtent(null),Uc(n,t.stream(lT));var o=lT.result(),u=Math.min(r/(o[1][0]-o[0][0]),i/(o[1][1]-o[0][1])),s=+e[0][0]+(r-u*(o[1][0]+o[0][0]))/2,f=+e[0][1]+(i-u*(o[1][1]+o[0][1]))/2;return null!=a&&t.clipExtent(a),t.scale(150*u).translate([s,f])}function Bl(t,e,n){return $l(t,[[0,0],e],n)}function Yl(t,e){return+e?Wl(t,e):Gl(t)}function Gl(t){return jl({point:function(e,n){e=t(e,n),this.stream.point(e[0],e[1])}})}function Wl(t,e){function n(r,i,a,o,u,s,f,c,l,h,d,p,g,v){var m=f-r,y=c-i,b=m*m+y*y;if(b>4*e&&g--){var _=o+h,x=u+d,w=s+p,M=Bz(_*_+x*x+w*w),k=Rc(w/=M),E=Rz(Rz(w)-1)<Sz||Rz(a-l)<Sz?(a+l)/2:Dz(x,_),S=t(E,k),A=S[0],C=S[1],N=A-r,z=C-i,T=y*N-m*z;(T*T/b>e||Rz((m*N+y*z)/b-.5)>.3||o*h+u*d+s*p<TT)&&(n(r,i,a,o,u,s,A,C,E,_/=M,x/=M,w,g,v),v.point(A,C),n(A,C,E,_,x,w,f,c,l,h,d,p,g,v))}}return function(e){function r(n,r){n=t(n,r),e.point(n[0],n[1])}function i(){m=NaN,w.point=a,e.lineStart()}function a(r,i){var a=jc([r,i]),o=t(r,i);n(m,y,v,b,_,x,m=o[0],y=o[1],v=r,b=a[0],_=a[1],x=a[2],zT,e),e.point(m,y)}function o(){w.point=r,e.lineEnd()}function u(){i(),w.point=s,w.lineEnd=f}function s(t,e){a(c=t,e),l=m,h=y,d=b,p=_,g=x,w.point=a}function f(){n(m,y,v,b,_,x,l,h,c,d,p,g,zT,e),w.lineEnd=o,o()}var c,l,h,d,p,g,v,m,y,b,_,x,w={point:r,lineStart:i,lineEnd:o,polygonStart:function(){e.polygonStart(),w.lineStart=u},polygonEnd:function(){e.polygonEnd(),w.lineStart=i}};return w}}function Hl(t){return Xl(function(){return t})()}function Xl(t){function e(t){return t=c(t[0]*Oz,t[1]*Oz),[t[0]*v+u,s-t[1]*v]}function n(t){return(t=c.invert((t[0]-u)/v,(s-t[1])/v))&&[t[0]*Tz,t[1]*Tz]}function r(t,e){return t=o(t,e),[t[0]*v+u,s-t[1]*v]}function i(){c=Wc(f=Xc(x,w,M),o);var t=o(b,_);return u=m-t[0]*v,s=y+t[1]*v,a()}function a(){return p=g=null,e}var o,u,s,f,c,l,h,d,p,g,v=150,m=480,y=250,b=0,_=0,x=0,w=0,M=0,k=null,E=NT,S=null,A=hl,C=.5,N=Yl(r,C);return e.stream=function(t){return p&&g===t?p:p=OT(E(f,N(A(g=t))))},e.clipAngle=function(t){return arguments.length?(E=+t?Fl(k=t*Oz,6*Oz):(k=null,NT),a()):k*Tz},e.clipExtent=function(t){return arguments.length?(A=null==t?(S=l=h=d=null,hl):ul(S=+t[0][0],l=+t[0][1],h=+t[1][0],d=+t[1][1]),a()):null==S?null:[[S,l],[h,d]]},e.scale=function(t){return arguments.length?(v=+t,i()):v},e.translate=function(t){return arguments.length?(m=+t[0],y=+t[1],i()):[m,y]},e.center=function(t){return arguments.length?(b=t[0]%360*Oz,_=t[1]%360*Oz,i()):[b*Tz,_*Tz]},e.rotate=function(t){return arguments.length?(x=t[0]%360*Oz,w=t[1]%360*Oz,M=t.length>2?t[2]%360*Oz:0,i()):[x*Tz,w*Tz,M*Tz]},e.precision=function(t){return arguments.length?(N=Yl(r,C=t*t),a()):Bz(C)},e.fitExtent=function(t,n){return $l(e,t,n)},e.fitSize=function(t,n){return Bl(e,t,n)},function(){return o=t.apply(this,arguments),e.invert=o.invert&&n,i()}}function Vl(t){var e=0,n=Az/3,r=Xl(t),i=r(e,n);return i.parallels=function(t){return arguments.length?r(e=t[0]*Oz,n=t[1]*Oz):[e*Tz,n*Tz]},i}function Jl(t){function e(t,e){return[t*n,Iz(e)/n]}var n=Lz(t);return e.invert=function(t,e){return[t/n,Rc(e*n)]},e}function Zl(t,e){function n(t,e){var n=Bz(a-2*i*Iz(e))/i;return[n*Iz(t*=i),o-n*Lz(t)]}var r=Iz(t),i=(r+Iz(e))/2;if(Rz(i)<Sz)return Jl(t);var a=1+r*(2*i-r),o=Bz(a)/i;return n.invert=function(t,e){var n=o-e;return[Dz(t,Rz(n))/i*$z(n),Rc((a-(t*t+n*n)*i*i)/(2*i))]},n}function Ql(){return Vl(Zl).scale(155.424).center([0,33.6442])}function Kl(){return Ql().parallels([29.5,45.5]).scale(1070).translate([480,250]).rotate([96,0]).center([-.6,38.7])}function th(t){var e=t.length;return{point:function(n,r){for(var i=-1;++i<e;)t[i].point(n,r)},sphere:function(){for(var n=-1;++n<e;)t[n].sphere()},lineStart:function(){for(var n=-1;++n<e;)t[n].lineStart()},lineEnd:function(){for(var n=-1;++n<e;)t[n].lineEnd()},polygonStart:function(){for(var n=-1;++n<e;)t[n].polygonStart()},polygonEnd:function(){for(var n=-1;++n<e;)t[n].polygonEnd()}}}function eh(){function t(t){var e=t[0],n=t[1];return u=null,i.point(e,n),u||(a.point(e,n),u)||(o.point(e,n),u)}function e(){return n=r=null,t}var n,r,i,a,o,u,s=Kl(),f=Ql().rotate([154,0]).center([-2,58.5]).parallels([55,65]),c=Ql().rotate([157,0]).center([-3,19.9]).parallels([8,18]),l={point:function(t,e){u=[t,e]}};return t.invert=function(t){var e=s.scale(),n=s.translate(),r=(t[0]-n[0])/e,i=(t[1]-n[1])/e;return(i>=.12&&i<.234&&r>=-.425&&r<-.214?f:i>=.166&&i<.234&&r>=-.214&&r<-.115?c:s).invert(t)},t.stream=function(t){return n&&r===t?n:n=th([s.stream(r=t),f.stream(t),c.stream(t)])},t.precision=function(t){return arguments.length?(s.precision(t),f.precision(t),c.precision(t),e()):s.precision()},t.scale=function(e){return arguments.length?(s.scale(e),f.scale(.35*e),c.scale(e),t.translate(s.translate())):s.scale()},t.translate=function(t){if(!arguments.length)return s.translate();var n=s.scale(),r=+t[0],u=+t[1];return i=s.translate(t).clipExtent([[r-.455*n,u-.238*n],[r+.455*n,u+.238*n]]).stream(l),a=f.translate([r-.307*n,u+.201*n]).clipExtent([[r-.425*n+Sz,u+.12*n+Sz],[r-.214*n-Sz,u+.234*n-Sz]]).stream(l),o=c.translate([r-.205*n,u+.212*n]).clipExtent([[r-.214*n+Sz,u+.166*n+Sz],[r-.115*n-Sz,u+.234*n-Sz]]).stream(l),e()},t.fitExtent=function(e,n){return $l(t,e,n)},t.fitSize=function(e,n){return Bl(t,e,n)},t.scale(1070)}function nh(t){return function(e,n){var r=Lz(e),i=Lz(n),a=t(r*i);return[a*i*Iz(e),a*Iz(n)]}}function rh(t){return function(e,n){var r=Bz(e*e+n*n),i=t(r),a=Iz(i),o=Lz(i);return[Dz(e*a,r*o),Rc(r&&n*a/r)]}}function ih(){return Hl(RT).scale(124.75).clipAngle(179.999)}function ah(){return Hl(PT).scale(79.4188).clipAngle(179.999)}function oh(t,e){return[t,Fz(Yz((Cz+e)/2))]}function uh(){return sh(oh).scale(961/zz)}function sh(t){function e(){var e=Az*u(),o=a(Qc(a.rotate()).invert([0,0]));return f(null==c?[[o[0]-e,o[1]-e],[o[0]+e,o[1]+e]]:t===oh?[[Math.max(o[0]-e,c),n],[Math.min(o[0]+e,r),i]]:[[c,Math.max(o[1]-e,n)],[r,Math.min(o[1]+e,i)]])}var n,r,i,a=Hl(t),o=a.center,u=a.scale,s=a.translate,f=a.clipExtent,c=null;return a.scale=function(t){return arguments.length?(u(t),e()):u()},a.translate=function(t){return arguments.length?(s(t),e()):s()},a.center=function(t){return arguments.length?(o(t),e()):o()},a.clipExtent=function(t){return arguments.length?(null==t?c=n=r=i=null:(c=+t[0][0],n=+t[0][1],r=+t[1][0],i=+t[1][1]),e()):null==c?null:[[c,n],[r,i]]},e()}function fh(t){return Yz((Cz+t)/2)}function ch(t,e){function n(t,e){a>0?e<-Cz+Sz&&(e=-Cz+Sz):e>Cz-Sz&&(e=Cz-Sz);var n=a/jz(fh(e),i);return[n*Iz(i*t),a-n*Lz(i*t)]}var r=Lz(t),i=t===e?Iz(t):Fz(r/Lz(e))/Fz(fh(e)/fh(t)),a=r*jz(fh(t),i)/i;return i?(n.invert=function(t,e){var n=a-e,r=$z(i)*Bz(t*t+n*n);return[Dz(t,Rz(n))/i*$z(n),2*Pz(jz(a/r,1/i))-Cz]},n):oh}function lh(){return Vl(ch).scale(109.5).parallels([30,30])}function hh(t,e){return[t,e]}function dh(){return Hl(hh).scale(152.63)}function ph(t,e){function n(t,e){var n=a-e,r=i*t;return[n*Iz(r),a-n*Lz(r)]}var r=Lz(t),i=t===e?Iz(t):(r-Lz(e))/(e-t),a=r/i+t;return Rz(i)<Sz?hh:(n.invert=function(t,e){var n=a-e;return[Dz(t,Rz(n))/i*$z(n),a-$z(i)*Bz(t*t+n*n)]},n)}function gh(){return Vl(ph).scale(131.154).center([0,13.9389])}function vh(t,e){var n=Lz(e),r=Lz(t)*n;return[n*Iz(t)/r,Iz(e)/r]}function mh(){return Hl(vh).scale(144.049).clipAngle(60)}function yh(t,e){return[Lz(e)*Iz(t),Iz(e)]}function bh(){return Hl(yh).scale(249.5).clipAngle(90+Sz)}function _h(t,e){var n=Lz(e),r=1+Lz(t)*n;return[n*Iz(t)/r,Iz(e)/r]}function xh(){return Hl(_h).scale(250).clipAngle(142)}function wh(t,e){return[Fz(Yz((Cz+e)/2)),-t]}function Mh(){var t=sh(wh),e=t.center,n=t.rotate;return t.center=function(t){return arguments.length?e([-t[1],t[0]]):(t=e(),[t[1],-t[0]])},t.rotate=function(t){return arguments.length?n([t[0],t[1],t.length>2?t[2]+90:90]):(t=n(),[t[0],t[1],t[2]-90])},n([0,0,90]).scale(159.155)}function kh(t,e){return function n(){var r=e();return r.type=t,r.path=Ol().projection(r),r.copy=r.copy||function(){var t=n();return LT.forEach(function(e){r.hasOwnProperty(e)&&t[e](r[e]())}),t.path.pointRadius(r.path.pointRadius()),t},r}}function Eh(t,e){return arguments.length>1?(qT[t]=kh(t,e),this):qT.hasOwnProperty(t)?qT[t]:null}function Sh(t){return t&&t.path||DT}function Ah(t){Io.call(this,null,t)}function Ch(t){Io.call(this,null,t)}function Nh(t){Io.call(this,null,t)}function zh(t,e){var n=function(n){return t(e(n))};return n.context=function(e){return t.context(e),n},n}function Th(t){Io.call(this,[],t),this.generator=ll()}function Oh(t){Io.call(this,null,t),this.modified(!0)}function Rh(t,e){var n=Ph(e.fit);e.extent?t.fitExtent(e.extent,n):e.size&&t.fitSize(e.size,n)}function Ph(t){return XM(t)?t.length>1?{type:"FeatureCollection",features:t}:t[0]:t}function Dh(t){var e=Eh((t||"mercator").toLowerCase());return e||P("Unrecognized projection type: "+t),e()}function Lh(t,e,n){Y(t[e])&&t[e](n)}function qh(t,e){var n=t.range(),r=n[0],i=at(n);return r>i&&(n=i,i=r,r=n),e.filter(function(e){return!((e=t(e))<r||e>i)})}function Uh(t,e){return t.ticks?t.ticks(e):t.domain()}function Fh(t,e,n){var r=t.tickFormat?t.tickFormat(e,n):String;return t.type===YT?jh(r,Ih(n)):r}function jh(t,e){return function(n){return t(n)?e(n):""}}function Ih(t){var e=gf(t||",");if(null==e.precision){switch(e.precision=12,e.type){case"%":e.precision-=2;break;case"e":e.precision-=1}return $h(UC(e),UC(".1f")(1)[1])}return UC(e)}function $h(t,e){return function(n){var r,i,a=t(n),o=a.indexOf(e);if(o<0)return a;for(r=Bh(a,o),i=r<a.length?a.slice(r):"";--r>o;)if("0"!==a[r]){++r;break}return a.slice(0,r)+i}}function Bh(t,e){var n,r=t.lastIndexOf("e");if(r>0)return r;for(r=t.length;--r>e;)if((n=t.charCodeAt(r))>=48&&n<=57)return r+1}function Yh(t){Io.call(this,null,t)}function Gh(t){Io.call(this,null,t)}function Wh(){return eo({})}function Hh(t){return t.exit}function Xh(t){Io.call(this,null,t)}function Vh(t,e,n){if(n)return t.domain();var r=KT[t.type];return r?r(t):Uh(t,e)}function Jh(t){var e=t.domain(),n=e[0],r=at(e),i=t.range().length,a=new Array(i),o=0;for(a[0]=n;++o<i;)a[o]=(o*r-(o-i)*n)/i;return a.max=r,a}function Zh(t){var e=t.domain(),n=[e[0]].concat(t.quantiles());return n.max=at(e),n}function Qh(t){var e=[-1/0].concat(t.domain());return e.max=1/0,e}function Kh(t){var e=t.domain();return e.max=e.pop(),e}function td(t,e){return KT[t.type]?ed(e):rd(e)}function ed(t){return function(e,n,r){var i=r[n+1]||r.max||1/0,a=nd(e,t),o=nd(i,t);return a&&o?a+"\u2013"+o:o?"< "+o:"\u2265 "+a}}function nd(t,e){return isFinite(t)?e(t):null}function rd(t){return function(e){return t(e)}}function id(t){Io.call(this,[],t)}function ad(t){return t.source.x}function od(t){return t.source.y}function ud(t){return t.target.x}function sd(t){return t.target.y}function fd(t){Io.call(this,{},t)}function cd(t,e,n,r){return"M"+t+","+e+"L"+n+","+r}function ld(t,e,n,r){return cd(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))}function hd(t,e,n,r){var i=n-t,a=r-e,o=Math.sqrt(i*i+a*a)/2;return"M"+t+","+e+"A"+o+","+o+" "+180*Math.atan2(a,i)/Math.PI+" 0 1 "+n+","+r}function dd(t,e,n,r){return hd(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))}function pd(t,e,n,r){var i=n-t,a=r-e,o=.2*(i+a),u=.2*(a-i);return"M"+t+","+e+"C"+(t+o)+","+(e+u)+" "+(n+u)+","+(r-o)+" "+n+","+r}function gd(t,e,n,r){return pd(e*Math.cos(t),e*Math.sin(t),r*Math.cos(n),r*Math.sin(n))}function vd(t,e,n,r){return"M"+t+","+e+"V"+r+"H"+n}function md(t,e,n,r){return"M"+t+","+e+"H"+n+"V"+r}function yd(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),u=Math.sin(n);return"M"+e*i+","+e*a+"A"+e+","+e+" 0 0,"+((Math.abs(n-t)>Math.PI?n<=t:n>t)?1:0)+" "+e*o+","+e*u+"L"+r*o+","+r*u}function bd(t,e,n,r){var i=(t+n)/2;return"M"+t+","+e+"C"+i+","+e+" "+i+","+r+" "+n+","+r}function _d(t,e,n,r){var i=(e+r)/2;return"M"+t+","+e+"C"+t+","+i+" "+n+","+i+" "+n+","+r}function xd(t,e,n,r){var i=Math.cos(t),a=Math.sin(t),o=Math.cos(n),u=Math.sin(n),s=(e+r)/2;return"M"+e*i+","+e*a+"C"+s*i+","+s*a+" "+s*o+","+s*u+" "+r*o+","+r*u}function wd(t){Io.call(this,null,t)}function Md(t){Io.call(this,null,t),this.modified(!0)}function kd(t,e,n){var r=Ed(t,e.domainRaw);if(r>-1)return r;var i,a,o=e.domain,u=e.zero||void 0===e.zero&&nO[t.type];return o?((u||null!=e.domainMin||null!=e.domainMax||null!=e.domainMid)&&(i=(o=o.slice()).length-1||1,u&&(o[0]>0&&(o[0]=0),o[i]<0&&(o[i]=0)),null!=e.domainMin&&(o[0]=e.domainMin),null!=e.domainMax&&(o[i]=e.domainMax),null!=e.domainMid&&(a=e.domainMid,(a<o[0]||a>o[i])&&n.warn("Scale domainMid exceeds domain min or max.",a),o.splice(i,0,a))),t.domain(o),e.nice&&t.nice&&t.nice(!0!==e.nice&&+e.nice||null),o.length):0}function Ed(t,e){return e?(t.domain(e),e.length):-1}function Sd(t,e,n){var r=e.round||!1,i=e.range;if(null!=e.rangeStep)i=Ad(t.type,e,n);else if(e.scheme){if(i=Cd(t.type,e,n),Y(i))return t.interpolator(i)}else if(i&&t.type===QT)return t.interpolator(gC(zd(i,e.reverse)));i&&e.interpolate&&t.interpolate?t.interpolate(lc(e.interpolate,e.interpolateGamma)):Y(t.round)?t.round(r):Y(t.rangeRound)&&t.interpolate(r?Us:qs),i&&t.range(zd(i,e.reverse))}function Ad(t,e,n){t!==GT&&t!==WT&&P("Only band and point scales support rangeStep.");var r=(null!=e.paddingOuter?e.paddingOuter:e.padding)||0,i=t===WT?1:(null!=e.paddingInner?e.paddingInner:e.padding)||0;return[0,e.rangeStep*Gu(n,i,r)]}function Cd(t,e,n){var r,i=e.scheme.toLowerCase(),a=uc(i),o=e.schemeExtent;return a||P("Unrecognized scheme name: "+e.scheme),n=t===JT?n+1:t===ZT?n-1:t===XT||t===VT?+e.schemeCount||eO:n,t===QT?Nd(a,o,e.reverse):!o&&(r=uc(i+"-"+n))?r:Y(a)?Td(Nd(a,o),n):t===HT?a:a.slice(0,n)}function Nd(t,e,n){return Y(t)&&(e||n)?sc(t,zd(e||[0,1],n)):t}function zd(t,e){return e?t.slice().reverse():t}function Td(t,e){for(var n=new Array(e),r=e-1||1,i=0;i<e;++i)n[i]=t(i/r);return n}function Od(t){Io.call(this,null,t)}function Rd(t){Io.call(this,null,t)}function Pd(t,e,n,r,i){for(var a,o=(e-t.sum)/2,u=t.length,s=0;s<u;++s)a=t[s],a[r]=o,a[i]=o+=Math.abs(n(a))}function Dd(t,e,n,r,i){for(var a,o=1/t.sum,u=0,s=t.length,f=0,c=0;f<s;++f)a=t[f],a[r]=u,a[i]=u=o*(c+=Math.abs(n(a)))}function Ld(t,e,n,r,i){for(var a,o,u=0,s=0,f=t.length,c=0;c<f;++c)o=t[c],a=n(o),a<0?(o[r]=s,o[i]=s+=a):(o[r]=u,o[i]=u+=a)}function qd(t,e,n,r){var i,a,o,u,s,f,c,l,h,d=[],p=function(t){return t(s)};if(null==e)d.push(t.slice());else for(i={},a=0,o=t.length;a<o;++a)s=t[a],f=e.map(p),c=i[f]||(d.push(i[f]=[]),i[f]),c.push(s);for(f=0,h=0,u=d.length;f<u;++f){for(c=d[f],a=0,l=0,o=c.length;a<o;++a)l+=Math.abs(r(c[a]));c.sum=l,l>h&&(h=l),n&&c.sort(n)}return d.max=h,d}function Ud(t,e){function n(){var n,i,a=r.length,o=0,u=0;for(n=0;n<a;++n)i=r[n],o+=i.x,u+=i.y;for(o=o/a-t,u=u/a-e,n=0;n<a;++n)i=r[n],i.x-=o,i.y-=u}var r;return null==t&&(t=0),null==e&&(e=0),n.initialize=function(t){r=t},n.x=function(e){return arguments.length?(t=+e,n):t},n.y=function(t){return arguments.length?(e=+t,n):e},n}function Fd(t){return function(){return t}}function jd(){return 1e-6*(Math.random()-.5)}function Id(t){var e=+this._x.call(null,t),n=+this._y.call(null,t);return $d(this.cover(e,n),e,n,t)}function $d(t,e,n,r){if(isNaN(e)||isNaN(n))return t;var i,a,o,u,s,f,c,l,h,d=t._root,p={data:r},g=t._x0,v=t._y0,m=t._x1,y=t._y1;if(!d)return t._root=p,t;for(;d.length;)if((f=e>=(a=(g+m)/2))?g=a:m=a,(c=n>=(o=(v+y)/2))?v=o:y=o,i=d,!(d=d[l=c<<1|f]))return i[l]=p,t;if(u=+t._x.call(null,d.data),s=+t._y.call(null,d.data),e===u&&n===s)return p.next=d,i?i[l]=p:t._root=p,t;do{i=i?i[l]=new Array(4):t._root=new Array(4),(f=e>=(a=(g+m)/2))?g=a:m=a,(c=n>=(o=(v+y)/2))?v=o:y=o}while((l=c<<1|f)==(h=(s>=o)<<1|u>=a));return i[h]=d,i[l]=p,t}function Bd(t){var e,n,r,i,a=t.length,o=new Array(a),u=new Array(a),s=1/0,f=1/0,c=-1/0,l=-1/0;for(n=0;n<a;++n)isNaN(r=+this._x.call(null,e=t[n]))||isNaN(i=+this._y.call(null,e))||(o[n]=r,u[n]=i,r<s&&(s=r),r>c&&(c=r),i<f&&(f=i),
i>l&&(l=i));for(c<s&&(s=this._x0,c=this._x1),l<f&&(f=this._y0,l=this._y1),this.cover(s,f).cover(c,l),n=0;n<a;++n)$d(this,o[n],u[n],t[n]);return this}function Yd(t,e){if(isNaN(t=+t)||isNaN(e=+e))return this;var n=this._x0,r=this._y0,i=this._x1,a=this._y1;if(isNaN(n))i=(n=Math.floor(t))+1,a=(r=Math.floor(e))+1;else{if(!(n>t||t>i||r>e||e>a))return this;var o,u,s=i-n,f=this._root;switch(u=(e<(r+a)/2)<<1|t<(n+i)/2){case 0:do{o=new Array(4),o[u]=f,f=o}while(s*=2,i=n+s,a=r+s,t>i||e>a);break;case 1:do{o=new Array(4),o[u]=f,f=o}while(s*=2,n=i-s,a=r+s,n>t||e>a);break;case 2:do{o=new Array(4),o[u]=f,f=o}while(s*=2,i=n+s,r=a-s,t>i||r>e);break;case 3:do{o=new Array(4),o[u]=f,f=o}while(s*=2,n=i-s,r=a-s,n>t||r>e)}this._root&&this._root.length&&(this._root=f)}return this._x0=n,this._y0=r,this._x1=i,this._y1=a,this}function Gd(){var t=[];return this.visit(function(e){if(!e.length)do{t.push(e.data)}while(e=e.next)}),t}function Wd(t){return arguments.length?this.cover(+t[0][0],+t[0][1]).cover(+t[1][0],+t[1][1]):isNaN(this._x0)?void 0:[[this._x0,this._y0],[this._x1,this._y1]]}function Hd(t,e,n,r,i){this.node=t,this.x0=e,this.y0=n,this.x1=r,this.y1=i}function Xd(t,e,n){var r,i,a,o,u,s,f,c=this._x0,l=this._y0,h=this._x1,d=this._y1,p=[],g=this._root;for(g&&p.push(new Hd(g,c,l,h,d)),null==n?n=1/0:(c=t-n,l=e-n,h=t+n,d=e+n,n*=n);s=p.pop();)if(!(!(g=s.node)||(i=s.x0)>h||(a=s.y0)>d||(o=s.x1)<c||(u=s.y1)<l))if(g.length){var v=(i+o)/2,m=(a+u)/2;p.push(new Hd(g[3],v,m,o,u),new Hd(g[2],i,m,v,u),new Hd(g[1],v,a,o,m),new Hd(g[0],i,a,v,m)),(f=(e>=m)<<1|t>=v)&&(s=p[p.length-1],p[p.length-1]=p[p.length-1-f],p[p.length-1-f]=s)}else{var y=t-+this._x.call(null,g.data),b=e-+this._y.call(null,g.data),_=y*y+b*b;if(_<n){var x=Math.sqrt(n=_);c=t-x,l=e-x,h=t+x,d=e+x,r=g.data}}return r}function Vd(t){if(isNaN(a=+this._x.call(null,t))||isNaN(o=+this._y.call(null,t)))return this;var e,n,r,i,a,o,u,s,f,c,l,h,d=this._root,p=this._x0,g=this._y0,v=this._x1,m=this._y1;if(!d)return this;if(d.length)for(;;){if((f=a>=(u=(p+v)/2))?p=u:v=u,(c=o>=(s=(g+m)/2))?g=s:m=s,e=d,!(d=d[l=c<<1|f]))return this;if(!d.length)break;(e[l+1&3]||e[l+2&3]||e[l+3&3])&&(n=e,h=l)}for(;d.data!==t;)if(r=d,!(d=d.next))return this;return(i=d.next)&&delete d.next,r?(i?r.next=i:delete r.next,this):e?(i?e[l]=i:delete e[l],(d=e[0]||e[1]||e[2]||e[3])&&d===(e[3]||e[2]||e[1]||e[0])&&!d.length&&(n?n[h]=d:this._root=d),this):(this._root=i,this)}function Jd(t){for(var e=0,n=t.length;e<n;++e)this.remove(t[e]);return this}function Zd(){return this._root}function Qd(){var t=0;return this.visit(function(e){if(!e.length)do{++t}while(e=e.next)}),t}function Kd(t){var e,n,r,i,a,o,u=[],s=this._root;for(s&&u.push(new Hd(s,this._x0,this._y0,this._x1,this._y1));e=u.pop();)if(!t(s=e.node,r=e.x0,i=e.y0,a=e.x1,o=e.y1)&&s.length){var f=(r+a)/2,c=(i+o)/2;(n=s[3])&&u.push(new Hd(n,f,c,a,o)),(n=s[2])&&u.push(new Hd(n,r,c,f,o)),(n=s[1])&&u.push(new Hd(n,f,i,a,c)),(n=s[0])&&u.push(new Hd(n,r,i,f,c))}return this}function tp(t){var e,n=[],r=[];for(this._root&&n.push(new Hd(this._root,this._x0,this._y0,this._x1,this._y1));e=n.pop();){var i=e.node;if(i.length){var a,o=e.x0,u=e.y0,s=e.x1,f=e.y1,c=(o+s)/2,l=(u+f)/2;(a=i[0])&&n.push(new Hd(a,o,u,c,l)),(a=i[1])&&n.push(new Hd(a,c,u,s,l)),(a=i[2])&&n.push(new Hd(a,o,l,c,f)),(a=i[3])&&n.push(new Hd(a,c,l,s,f))}r.push(e)}for(;e=r.pop();)t(e.node,e.x0,e.y0,e.x1,e.y1);return this}function ep(t){return t[0]}function np(t){return arguments.length?(this._x=t,this):this._x}function rp(t){return t[1]}function ip(t){return arguments.length?(this._y=t,this):this._y}function ap(t,e,n){var r=new op(null==e?ep:e,null==n?rp:n,NaN,NaN,NaN,NaN);return null==t?r:r.addAll(t)}function op(t,e,n,r,i,a){this._x=t,this._y=e,this._x0=n,this._y0=r,this._x1=i,this._y1=a,this._root=void 0}function up(t){for(var e={data:t.data},n=e;t=t.next;)n=n.next={data:t.data};return e}function sp(t){return t.x+t.vx}function fp(t){return t.y+t.vy}function cp(t){function e(){function t(t,e,n,r,i){var a=t.data,u=t.r,d=l+u;if(!a)return e>f+d||r<f-d||n>c+d||i<c-d;if(a.index>s.index){var p=f-a.x-a.vx,g=c-a.y-a.vy,v=p*p+g*g;v<d*d&&(0===p&&(p=jd(),v+=p*p),0===g&&(g=jd(),v+=g*g),v=(d-(v=Math.sqrt(v)))/v*o,s.vx+=(p*=v)*(d=(u*=u)/(h+u)),s.vy+=(g*=v)*d,a.vx-=p*(d=1-d),a.vy-=g*d)}}for(var e,r,s,f,c,l,h,d=i.length,p=0;p<u;++p)for(r=ap(i,sp,fp).visitAfter(n),e=0;e<d;++e)s=i[e],l=a[s.index],h=l*l,f=s.x+s.vx,c=s.y+s.vy,r.visit(t)}function n(t){if(t.data)return t.r=a[t.data.index];for(var e=t.r=0;e<4;++e)t[e]&&t[e].r>t.r&&(t.r=t[e].r)}function r(){if(i){var e,n,r=i.length;for(a=new Array(r),e=0;e<r;++e)n=i[e],a[n.index]=+t(n,e,i)}}var i,a,o=1,u=1;return"function"!=typeof t&&(t=Fd(null==t?1:+t)),e.initialize=function(t){i=t,r()},e.iterations=function(t){return arguments.length?(u=+t,e):u},e.strength=function(t){return arguments.length?(o=+t,e):o},e.radius=function(n){return arguments.length?(t="function"==typeof n?n:Fd(+n),r(),e):t},e}function lp(t){return t.index}function hp(t,e){var n=t.get(e);if(!n)throw new Error("missing: "+e);return n}function dp(t){function e(t){return 1/Math.min(f[t.source.index],f[t.target.index])}function n(e){for(var n=0,r=t.length;n<p;++n)for(var i,a,s,f,l,h,d,g=0;g<r;++g)i=t[g],a=i.source,s=i.target,f=s.x+s.vx-a.x-a.vx||jd(),l=s.y+s.vy-a.y-a.vy||jd(),h=Math.sqrt(f*f+l*l),h=(h-u[g])/h*e*o[g],f*=h,l*=h,s.vx-=f*(d=c[g]),s.vy-=l*d,a.vx+=f*(d=1-d),a.vy+=l*d}function r(){if(s){var e,n,r=s.length,h=t.length,d=gt(s,l);for(e=0,f=new Array(r);e<h;++e)n=t[e],n.index=e,"object"!=typeof n.source&&(n.source=hp(d,n.source)),"object"!=typeof n.target&&(n.target=hp(d,n.target)),f[n.source.index]=(f[n.source.index]||0)+1,f[n.target.index]=(f[n.target.index]||0)+1;for(e=0,c=new Array(h);e<h;++e)n=t[e],c[e]=f[n.source.index]/(f[n.source.index]+f[n.target.index]);o=new Array(h),i(),u=new Array(h),a()}}function i(){if(s)for(var e=0,n=t.length;e<n;++e)o[e]=+h(t[e],e,t)}function a(){if(s)for(var e=0,n=t.length;e<n;++e)u[e]=+d(t[e],e,t)}var o,u,s,f,c,l=lp,h=e,d=Fd(30),p=1;return null==t&&(t=[]),n.initialize=function(t){s=t,r()},n.links=function(e){return arguments.length?(t=e,r(),n):t},n.id=function(t){return arguments.length?(l=t,n):l},n.iterations=function(t){return arguments.length?(p=+t,n):p},n.strength=function(t){return arguments.length?(h="function"==typeof t?t:Fd(+t),i(),n):h},n.distance=function(t){return arguments.length?(d="function"==typeof t?t:Fd(+t),a(),n):d},n}function pp(){return gO||(yO(gp),gO=mO.now()+vO)}function gp(){gO=0}function vp(){this._call=this._time=this._next=null}function mp(t,e,n){var r=new vp;return r.restart(t,e,n),r}function yp(){pp(),++cO;for(var t,e=sO;e;)(t=gO-e._time)>=0&&e._call.call(null,t),e=e._next;--cO}function bp(){gO=(pO=mO.now())+vO,cO=lO=0;try{yp()}finally{cO=0,xp(),gO=0}}function _p(){var t=mO.now(),e=t-pO;e>dO&&(vO-=e,pO=t)}function xp(){for(var t,e,n=sO,r=1/0;n;)n._call?(r>n._time&&(r=n._time),t=n,n=n._next):(e=n._next,n._next=null,n=t?t._next=e:sO=e);fO=t,wp(r)}function wp(t){if(!cO){lO&&(lO=clearTimeout(lO));var e=t-gO;e>24?(t<1/0&&(lO=setTimeout(bp,e)),hO&&(hO=clearInterval(hO))):(hO||(pO=gO,hO=setInterval(_p,dO)),cO=1,yO(bp))}}function Mp(t){return t.x}function kp(t){return t.y}function Ep(t){function e(){n(),d.call("tick",a),o<u&&(h.stop(),d.call("end",a))}function n(){var e,n,r=t.length;for(o+=(f-o)*s,l.each(function(t){t(o)}),e=0;e<r;++e)n=t[e],null==n.fx?n.x+=n.vx*=c:(n.x=n.fx,n.vx=0),null==n.fy?n.y+=n.vy*=c:(n.y=n.fy,n.vy=0)}function r(){for(var e,n=0,r=t.length;n<r;++n){if(e=t[n],e.index=n,isNaN(e.x)||isNaN(e.y)){var i=bO*Math.sqrt(n),a=n*_O;e.x=i*Math.cos(a),e.y=i*Math.sin(a)}(isNaN(e.vx)||isNaN(e.vy))&&(e.vx=e.vy=0)}}function i(e){return e.initialize&&e.initialize(t),e}var a,o=1,u=.001,s=1-Math.pow(u,1/300),f=0,c=.6,l=gt(),h=mp(e),d=xt("tick","end");return null==t&&(t=[]),r(),a={tick:n,restart:function(){return h.restart(e),a},stop:function(){return h.stop(),a},nodes:function(e){return arguments.length?(t=e,r(),l.each(i),a):t},alpha:function(t){return arguments.length?(o=+t,a):o},alphaMin:function(t){return arguments.length?(u=+t,a):u},alphaDecay:function(t){return arguments.length?(s=+t,a):+s},alphaTarget:function(t){return arguments.length?(f=+t,a):f},velocityDecay:function(t){return arguments.length?(c=1-t,a):1-c},force:function(t,e){return arguments.length>1?(null==e?l.remove(t):l.set(t,i(e)),a):l.get(t)},find:function(e,n,r){var i,a,o,u,s,f=0,c=t.length;for(null==r?r=1/0:r*=r,f=0;f<c;++f)u=t[f],i=e-u.x,a=n-u.y,(o=i*i+a*a)<r&&(s=u,r=o);return s},on:function(t,e){return arguments.length>1?(d.on(t,e),a):d.on(t)}}}function Sp(){function t(t){var e,u=i.length,s=ap(i,Mp,kp).visitAfter(n);for(o=t,e=0;e<u;++e)a=i[e],s.visit(r)}function e(){if(i){var t,e,n=i.length;for(u=new Array(n),t=0;t<n;++t)e=i[t],u[e.index]=+s(e,t,i)}}function n(t){var e,n,r,i,a,o=0;if(t.length){for(r=i=a=0;a<4;++a)(e=t[a])&&(n=e.value)&&(o+=n,r+=n*e.x,i+=n*e.y);t.x=r/o,t.y=i/o}else{e=t,e.x=e.data.x,e.y=e.data.y;do{o+=u[e.data.index]}while(e=e.next)}t.value=o}function r(t,e,n,r){if(!t.value)return!0;var i=t.x-a.x,s=t.y-a.y,h=r-e,d=i*i+s*s;if(h*h/l<d)return d<c&&(0===i&&(i=jd(),d+=i*i),0===s&&(s=jd(),d+=s*s),d<f&&(d=Math.sqrt(f*d)),a.vx+=i*t.value*o/d,a.vy+=s*t.value*o/d),!0;if(!(t.length||d>=c)){(t.data!==a||t.next)&&(0===i&&(i=jd(),d+=i*i),0===s&&(s=jd(),d+=s*s),d<f&&(d=Math.sqrt(f*d)));do{t.data!==a&&(h=u[t.data.index]*o/d,a.vx+=i*h,a.vy+=s*h)}while(t=t.next)}}var i,a,o,u,s=Fd(-30),f=1,c=1/0,l=.81;return t.initialize=function(t){i=t,e()},t.strength=function(n){return arguments.length?(s="function"==typeof n?n:Fd(+n),e(),t):s},t.distanceMin=function(e){return arguments.length?(f=e*e,t):Math.sqrt(f)},t.distanceMax=function(e){return arguments.length?(c=e*e,t):Math.sqrt(c)},t.theta=function(e){return arguments.length?(l=e*e,t):Math.sqrt(l)},t}function Ap(t){function e(t){for(var e,n=0,o=r.length;n<o;++n)e=r[n],e.vx+=(a[n]-e.x)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)i[e]=isNaN(a[e]=+t(r[e],e,r))?0:+o(r[e],e,r)}}var r,i,a,o=Fd(.1);return"function"!=typeof t&&(t=Fd(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(o="function"==typeof t?t:Fd(+t),n(),e):o},e.x=function(r){return arguments.length?(t="function"==typeof r?r:Fd(+r),n(),e):t},e}function Cp(t){function e(t){for(var e,n=0,o=r.length;n<o;++n)e=r[n],e.vy+=(a[n]-e.y)*i[n]*t}function n(){if(r){var e,n=r.length;for(i=new Array(n),a=new Array(n),e=0;e<n;++e)i[e]=isNaN(a[e]=+t(r[e],e,r))?0:+o(r[e],e,r)}}var r,i,a,o=Fd(.1);return"function"!=typeof t&&(t=Fd(null==t?0:+t)),e.initialize=function(t){r=t,n()},e.strength=function(t){return arguments.length?(o="function"==typeof t?t:Fd(+t),n(),e):o},e.y=function(r){return arguments.length?(t="function"==typeof r?r:Fd(+r),n(),e):t},e}function Np(t){Io.call(this,null,t)}function zp(t,e){return function(){t.touch(e).run()}}function Tp(t,e){var n=Ep(t),r=!1,i=n.stop,a=n.restart;return n.stopped=function(){return r},n.restart=function(){return r=!1,a()},n.stop=function(){return r=!0,i()},Op(n,e,!0).on("end",function(){r=!0})}function Op(t,e,n){var r,i,a,o=$(e.forces);for(r=0,i=MO.length;r<i;++r)(a=MO[r])!==wO&&e.modified(a)&&t[a](e[a]);for(r=0,i=o.length;r<i;++r)(n||e.modified(wO,r))&&t.force(wO+r,Rp(o[r]));for(i=t.numForces||0;r<i;++r)t.force(wO+r,null);return t.numForces=o.length,t}function Rp(t){var e,n;xO.hasOwnProperty(t.force)||P("Unrecognized force: "+t.force),e=xO[t.force]();for(n in t)Y(e[n])&&e[n](t[n]);return e}function Pp(t,e){return t.parent===e.parent?1:2}function Dp(t){return t.reduce(Lp,0)/t.length}function Lp(t,e){return t+e.x}function qp(t){return 1+t.reduce(Up,0)}function Up(t,e){return Math.max(t,e.y)}function Fp(t){for(var e;e=t.children;)t=e[0];return t}function jp(t){for(var e;e=t.children;)t=e[e.length-1];return t}function Ip(){function t(t){var a,o=0;t.eachAfter(function(t){var n=t.children;n?(t.x=Dp(n),t.y=qp(n)):(t.x=a?o+=e(t,a):0,t.y=0,a=t)});var u=Fp(t),s=jp(t),f=u.x-e(u,s)/2,c=s.x+e(s,u)/2;return t.eachAfter(i?function(e){e.x=(e.x-t.x)*n,e.y=(t.y-e.y)*r}:function(e){e.x=(e.x-f)/(c-f)*n,e.y=(1-(t.y?e.y/t.y:1))*r})}var e=Pp,n=1,r=1,i=!1;return t.separation=function(n){return arguments.length?(e=n,t):e},t.size=function(e){return arguments.length?(i=!1,n=+e[0],r=+e[1],t):i?null:[n,r]},t.nodeSize=function(e){return arguments.length?(i=!0,n=+e[0],r=+e[1],t):i?[n,r]:null},t}function $p(t){var e=0,n=t.children,r=n&&n.length;if(r)for(;--r>=0;)e+=n[r].value;else e=1;t.value=e}function Bp(){return this.eachAfter($p)}function Yp(t){var e,n,r,i,a=this,o=[a];do{for(e=o.reverse(),o=[];a=e.pop();)if(t(a),n=a.children)for(r=0,i=n.length;r<i;++r)o.push(n[r])}while(o.length);return this}function Gp(t){for(var e,n,r=this,i=[r];r=i.pop();)if(t(r),e=r.children)for(n=e.length-1;n>=0;--n)i.push(e[n]);return this}function Wp(t){for(var e,n,r,i=this,a=[i],o=[];i=a.pop();)if(o.push(i),e=i.children)for(n=0,r=e.length;n<r;++n)a.push(e[n]);for(;i=o.pop();)t(i);return this}function Hp(t){return this.eachAfter(function(e){for(var n=+t(e.data)||0,r=e.children,i=r&&r.length;--i>=0;)n+=r[i].value;e.value=n})}function Xp(t){return this.eachBefore(function(e){e.children&&e.children.sort(t)})}function Vp(t){for(var e=this,n=Jp(e,t),r=[e];e!==n;)e=e.parent,r.push(e);for(var i=r.length;t!==n;)r.splice(i,0,t),t=t.parent;return r}function Jp(t,e){if(t===e)return t;var n=t.ancestors(),r=e.ancestors(),i=null;for(t=n.pop(),e=r.pop();t===e;)i=t,t=n.pop(),e=r.pop();return i}function Zp(){for(var t=this,e=[t];t=t.parent;)e.push(t);return e}function Qp(){var t=[];return this.each(function(e){t.push(e)}),t}function Kp(){var t=[];return this.eachBefore(function(e){e.children||t.push(e)}),t}function tg(){var t=this,e=[];return t.each(function(n){n!==t&&e.push({source:n.parent,target:n})}),e}function eg(t,e){var n,r,i,a,o,u=new og(t),s=+t.value&&(u.value=t.value),f=[u];for(null==e&&(e=rg);n=f.pop();)if(s&&(n.value=+n.data.value),(i=e(n.data))&&(o=i.length))for(n.children=new Array(o),a=o-1;a>=0;--a)f.push(r=n.children[a]=new og(i[a])),r.parent=n,r.depth=n.depth+1;return u.eachBefore(ag)}function ng(){return eg(this).eachBefore(ig)}function rg(t){return t.children}function ig(t){t.data=t.data.data}function ag(t){var e=0;do{t.height=e}while((t=t.parent)&&t.height<++e)}function og(t){this.data=t,this.depth=this.height=0,this.parent=null}function ug(t){this._=t,this.next=null}function sg(t){for(var e=(t=t.slice()).length,n=null,r=n;e;){var i=new ug(t[e-1]);r=r?r.next=i:n=i,t[void 0]=t[--e]}return{head:n,tail:r}}function fg(t){return lg(sg(t),[])}function cg(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r-e.r;return i*i+1e-6>n*n+r*r}function lg(t,e){var n,r,i,a=null,o=t.head;switch(e.length){case 1:n=hg(e[0]);break;case 2:n=dg(e[0],e[1]);break;case 3:n=pg(e[0],e[1],e[2])}for(;o;)i=o._,r=o.next,n&&cg(n,i)?a=o:(a?(t.tail=a,a.next=null):t.head=t.tail=null,e.push(i),n=lg(t,e),e.pop(),t.head?(o.next=t.head,t.head=o):(o.next=null,t.head=t.tail=o),a=t.tail,a.next=r),o=r;return t.tail=a,n}function hg(t){return{x:t.x,y:t.y,r:t.r}}function dg(t,e){var n=t.x,r=t.y,i=t.r,a=e.x,o=e.y,u=e.r,s=a-n,f=o-r,c=u-i,l=Math.sqrt(s*s+f*f);return{x:(n+a+s/l*c)/2,y:(r+o+f/l*c)/2,r:(l+i+u)/2}}function pg(t,e,n){var r=t.x,i=t.y,a=t.r,o=e.x,u=e.y,s=e.r,f=n.x,c=n.y,l=n.r,h=2*(r-o),d=2*(i-u),p=2*(s-a),g=r*r+i*i-a*a-o*o-u*u+s*s,v=2*(r-f),m=2*(i-c),y=2*(l-a),b=r*r+i*i-a*a-f*f-c*c+l*l,_=v*d-h*m,x=(d*b-m*g)/_-r,w=(m*p-d*y)/_,M=(v*g-h*b)/_-i,k=(h*y-v*p)/_,E=w*w+k*k-1,S=2*(x*w+M*k+a),A=x*x+M*M-a*a,C=(-S-Math.sqrt(S*S-4*E*A))/(2*E);return{x:x+w*C+r,y:M+k*C+i,r:C}}function gg(t,e,n){var r=t.x,i=t.y,a=e.r+n.r,o=t.r+n.r,u=e.x-r,s=e.y-i,f=u*u+s*s;if(f){var c=.5+((o*=o)-(a*=a))/(2*f),l=Math.sqrt(Math.max(0,2*a*(o+f)-(o-=f)*o-a*a))/(2*f);n.x=r+c*u+l*s,n.y=i+c*s-l*u}else n.x=r+o,n.y=i}function vg(t,e){var n=e.x-t.x,r=e.y-t.y,i=t.r+e.r;return i*i-1e-6>n*n+r*r}function mg(t,e,n){var r=t._,i=t.next._,a=r.r+i.r,o=(r.x*i.r+i.x*r.r)/a-e,u=(r.y*i.r+i.y*r.r)/a-n;return o*o+u*u}function yg(t){this._=t,this.next=null,this.previous=null}function bg(t){if(!(i=t.length))return 0;var e,n,r,i;if(e=t[0],e.x=0,e.y=0,!(i>1))return e.r;if(n=t[1],e.x=-n.r,n.x=e.r,n.y=0,!(i>2))return e.r+n.r;gg(n,e,r=t[2]);var a,o,u,s,f,c,l,h=e.r*e.r,d=n.r*n.r,p=r.r*r.r,g=h+d+p,v=h*e.x+d*n.x+p*r.x,m=h*e.y+d*n.y+p*r.y;e=new yg(e),n=new yg(n),r=new yg(r),e.next=r.previous=n,n.next=e.previous=r,r.next=n.previous=e;t:for(u=3;u<i;++u){gg(e._,n._,r=t[u]),r=new yg(r),s=n.next,f=e.previous,c=n._.r,l=e._.r;do{if(c<=l){if(vg(s._,r._)){n=s,e.next=n,n.previous=e,--u;continue t}c+=s._.r,s=s.next}else{if(vg(f._,r._)){e=f,e.next=n,n.previous=e,--u;continue t}l+=f._.r,f=f.previous}}while(s!==f.next);for(r.previous=e,r.next=n,e.next=n.previous=n=r,g+=p=r._.r*r._.r,v+=p*r._.x,m+=p*r._.y,h=mg(e,a=v/g,o=m/g);(r=r.next)!==n;)(p=mg(r,a,o))<h&&(e=r,h=p);n=e.next}for(e=[n._],r=n;(r=r.next)!==n;)e.push(r._);for(r=fg(e),u=0;u<i;++u)e=t[u],e.x-=r.x,e.y-=r.y;return r.r}function _g(t){return null==t?null:xg(t)}function xg(t){if("function"!=typeof t)throw new Error;return t}function wg(){return 0}function Mg(t){return function(){return t}}function kg(t){return Math.sqrt(t.value)}function Eg(){function t(t){return t.x=n/2,t.y=r/2,e?t.eachBefore(Sg(e)).eachAfter(Ag(i,.5)).eachBefore(Cg(1)):t.eachBefore(Sg(kg)).eachAfter(Ag(wg,1)).eachAfter(Ag(i,t.r/Math.min(n,r))).eachBefore(Cg(Math.min(n,r)/(2*t.r))),t}var e=null,n=1,r=1,i=wg;return t.radius=function(n){return arguments.length?(e=_g(n),t):e},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i="function"==typeof e?e:Mg(+e),t):i},t}function Sg(t){return function(e){e.children||(e.r=Math.max(0,+t(e)||0))}}function Ag(t,e){return function(n){if(r=n.children){var r,i,a,o=r.length,u=t(n)*e||0;if(u)for(i=0;i<o;++i)r[i].r+=u;if(a=bg(r),u)for(i=0;i<o;++i)r[i].r-=u;n.r=a+u}}}function Cg(t){return function(e){var n=e.parent;e.r*=t,n&&(e.x=n.x+t*e.x,e.y=n.y+t*e.y)}}function Ng(t){t.x0=Math.round(t.x0),t.y0=Math.round(t.y0),t.x1=Math.round(t.x1),t.y1=Math.round(t.y1)}function zg(t,e,n,r,i){for(var a,o=t.children,u=-1,s=o.length,f=t.value&&(r-e)/t.value;++u<s;)a=o[u],a.y0=n,a.y1=i,a.x0=e,a.x1=e+=a.value*f}function Tg(){function t(t){var o=t.height+1;return t.x0=t.y0=i,t.x1=n,t.y1=r/o,t.eachBefore(e(r,o)),a&&t.eachBefore(Ng),t}function e(t,e){return function(n){n.children&&zg(n,n.x0,t*(n.depth+1)/e,n.x1,t*(n.depth+2)/e);var r=n.x0,a=n.y0,o=n.x1-i,u=n.y1-i;o<r&&(r=o=(r+o)/2),u<a&&(a=u=(a+u)/2),n.x0=r,n.y0=a,n.x1=o,n.y1=u}}var n=1,r=1,i=0,a=!1;return t.round=function(e){return arguments.length?(a=!!e,t):a},t.size=function(e){return arguments.length?(n=+e[0],r=+e[1],t):[n,r]},t.padding=function(e){return arguments.length?(i=+e,t):i},t}function Og(t){return t.id}function Rg(t){return t.parentId}function Pg(){function t(t){var r,i,a,o,u,s,f,c=t.length,l=new Array(c),h={};for(i=0;i<c;++i)r=t[i],u=l[i]=new og(r),null!=(s=e(r,i,t))&&(s+="")&&(f=AO+(u.id=s),h[f]=f in h?NO:u);for(i=0;i<c;++i)if(u=l[i],null!=(s=n(t[i],i,t))&&(s+="")){if(!(o=h[AO+s]))throw new Error("missing: "+s);if(o===NO)throw new Error("ambiguous: "+s);o.children?o.children.push(u):o.children=[u],u.parent=o}else{if(a)throw new Error("multiple roots");a=u}if(!a)throw new Error("no root");if(a.parent=CO,a.eachBefore(function(t){t.depth=t.parent.depth+1,--c}).eachBefore(ag),a.parent=null,c>0)throw new Error("cycle");return a}var e=Og,n=Rg;return t.id=function(n){return arguments.length?(e=xg(n),t):e},t.parentId=function(e){return arguments.length?(n=xg(e),t):n},t}function Dg(t,e){return t.parent===e.parent?1:2}function Lg(t){var e=t.children;return e?e[0]:t.t}function qg(t){var e=t.children;return e?e[e.length-1]:t.t}function Ug(t,e,n){var r=n/(e.i-t.i);e.c-=r,e.s+=n,t.c+=r,e.z+=n,e.m+=n}function Fg(t){for(var e,n=0,r=0,i=t.children,a=i.length;--a>=0;)e=i[a],e.z+=n,e.m+=n,n+=e.s+(r+=e.c)}function jg(t,e,n){return t.a.parent===e.parent?t.a:n}function Ig(t,e){this._=t,this.parent=null,this.children=null,this.A=null,this.a=this,this.z=0,this.m=0,this.c=0,this.s=0,this.t=null,this.i=e}function $g(t){for(var e,n,r,i,a,o=new Ig(t,0),u=[o];e=u.pop();)if(r=e._.children)for(e.children=new Array(a=r.length),i=a-1;i>=0;--i)u.push(n=e.children[i]=new Ig(r[i],i)),n.parent=e;return(o.parent=new Ig(null,0)).children=[o],o}function Bg(){function t(t){var r=$g(t);if(r.eachAfter(e),r.parent.m=-r.z,r.eachBefore(n),s)t.eachBefore(i);else{var f=t,c=t,l=t;t.eachBefore(function(t){t.x<f.x&&(f=t),t.x>c.x&&(c=t),t.depth>l.depth&&(l=t)});var h=f===c?1:a(f,c)/2,d=h-f.x,p=o/(c.x+h+d),g=u/(l.depth||1);t.eachBefore(function(t){t.x=(t.x+d)*p,t.y=t.depth*g})}return t}function e(t){var e=t.children,n=t.parent.children,i=t.i?n[t.i-1]:null;if(e){Fg(t);var o=(e[0].z+e[e.length-1].z)/2;i?(t.z=i.z+a(t._,i._),t.m=t.z-o):t.z=o}else i&&(t.z=i.z+a(t._,i._));t.parent.A=r(t,i,t.parent.A||n[0])}function n(t){t._.x=t.z+t.parent.m,t.m+=t.parent.m}function r(t,e,n){if(e){for(var r,i=t,o=t,u=e,s=i.parent.children[0],f=i.m,c=o.m,l=u.m,h=s.m;u=qg(u),i=Lg(i),u&&i;)s=Lg(s),o=qg(o),o.a=t,r=u.z+l-i.z-f+a(u._,i._),r>0&&(Ug(jg(u,t,n),t,r),f+=r,c+=r),l+=u.m,f+=i.m,h+=s.m,c+=o.m;u&&!qg(o)&&(o.t=u,o.m+=l-c),i&&!Lg(s)&&(s.t=i,s.m+=f-h,n=t)}return n}function i(t){t.x*=o,t.y=t.depth*u}var a=Dg,o=1,u=1,s=null;return t.separation=function(e){return arguments.length?(a=e,t):a},t.size=function(e){return arguments.length?(s=!1,o=+e[0],u=+e[1],t):s?null:[o,u]},t.nodeSize=function(e){return arguments.length?(s=!0,o=+e[0],u=+e[1],t):s?[o,u]:null},t}function Yg(t,e,n,r,i){for(var a,o=t.children,u=-1,s=o.length,f=t.value&&(i-n)/t.value;++u<s;)a=o[u],a.x0=e,a.x1=r,a.y0=n,a.y1=n+=a.value*f}function Gg(t,e,n,r,i,a){for(var o,u,s,f,c,l,h,d,p,g,v,m=[],y=e.children,b=0,_=0,x=y.length,w=e.value;b<x;){s=i-n,f=a-r;do{c=y[_++].value}while(!c&&_<x);for(l=h=c,g=Math.max(f/s,s/f)/(w*t),v=c*c*g,p=Math.max(h/v,v/l);_<x;++_){if(c+=u=y[_].value,u<l&&(l=u),u>h&&(h=u),v=c*c*g,(d=Math.max(h/v,v/l))>p){c-=u;break}p=d}m.push(o={value:c,dice:s<f,children:y.slice(b,_)}),o.dice?zg(o,n,r,i,w?r+=f*c/w:a):Yg(o,n,r,w?n+=s*c/w:i,a),w-=c,b=_}return m}function Wg(){function t(t){return t.x0=t.y0=0,t.x1=i,t.y1=a,t.eachBefore(e),o=[0],r&&t.eachBefore(Ng),t}function e(t){var e=o[t.depth],r=t.x0+e,i=t.y0+e,a=t.x1-e,h=t.y1-e;a<r&&(r=a=(r+a)/2),h<i&&(i=h=(i+h)/2),t.x0=r,t.y0=i,t.x1=a,t.y1=h,t.children&&(e=o[t.depth+1]=u(t)/2,r+=l(t)-e,i+=s(t)-e,a-=f(t)-e,h-=c(t)-e,a<r&&(r=a=(r+a)/2),h<i&&(i=h=(i+h)/2),n(t,r,i,a,h))}var n=TO,r=!1,i=1,a=1,o=[0],u=wg,s=wg,f=wg,c=wg,l=wg;return t.round=function(e){return arguments.length?(r=!!e,t):r},t.size=function(e){return arguments.length?(i=+e[0],a=+e[1],t):[i,a]},t.tile=function(e){return arguments.length?(n=xg(e),t):n},t.padding=function(e){return arguments.length?t.paddingInner(e).paddingOuter(e):t.paddingInner()},t.paddingInner=function(e){return arguments.length?(u="function"==typeof e?e:Mg(+e),t):u},t.paddingOuter=function(e){return arguments.length?t.paddingTop(e).paddingRight(e).paddingBottom(e).paddingLeft(e):t.paddingTop()},t.paddingTop=function(e){return arguments.length?(s="function"==typeof e?e:Mg(+e),t):s},t.paddingRight=function(e){return arguments.length?(f="function"==typeof e?e:Mg(+e),t):f},t.paddingBottom=function(e){return arguments.length?(c="function"==typeof e?e:Mg(+e),t):c},t.paddingLeft=function(e){return arguments.length?(l="function"==typeof e?e:Mg(+e),t):l},t}function Hg(t,e,n,r,i){function a(t,e,n,r,i,o,u){if(t>=e-1){var f=s[t];return f.x0=r,f.y0=i,f.x1=o,void(f.y1=u)}for(var l=c[t],h=n/2+l,d=t+1,p=e-1;d<p;){var g=d+p>>>1;c[g]<h?d=g+1:p=g}h-c[d-1]<c[d]-h&&t+1<d&&--d;var v=c[d]-l,m=n-v;if(o-r>u-i){var y=(r*m+o*v)/n;a(t,d,v,r,i,y,u),a(d,e,m,y,i,o,u)}else{var b=(i*m+u*v)/n;a(t,d,v,r,i,o,b),a(d,e,m,r,b,o,u)}}var o,u,s=t.children,f=s.length,c=new Array(f+1);for(c[0]=u=o=0;o<f;++o)c[o+1]=u+=s[o].value;a(0,f,t.value,e,n,r,i)}function Xg(t,e,n,r,i){(1&t.depth?Yg:zg)(t,e,n,r,i)}function Vg(t){Io.call(this,null,t)}function Jg(t){return t.values}function Zg(t){Io.call(this,null,t)}function Qg(t){Io.call(this,{},t)}function Kg(t){var e;return t.parent&&(e=t.parent.data)&&null!=to(e)&&e}function tv(t){var e=t||"tidy";if(PO.hasOwnProperty(e))return PO[e]();P("Unrecognized Tree layout method: "+e)}function ev(){var t=Wg();return t.ratio=function(e){var n=t.tile();n.ratio&&t.tile(n.ratio(e))},t.method=function(e){RO.hasOwnProperty(e)?t.tile(RO[e]):P("Unrecognized Treemap layout method: "+e)},t}function nv(t){Io.call(this,null,t)}function rv(t,e,n){for(var r,i=0,a=e.length;i<a;++i)(r=e[i])in n&&t[r](n[r])}function iv(t,e,n){for(var r=t.data,i=0,a=e.length-1;i<a;++i)r[n[i]]=t[e[i]];r[n[a]]=t.children?t.children.length:0}function av(t){nv.call(this,t)}function ov(t){nv.call(this,t)}function uv(t){nv.call(this,t)}function sv(t){nv.call(this,t)}function fv(t){return function(){return t}}function cv(t){return t[0]}function lv(t){return t[1]}function hv(){this._=null}function dv(t){t.U=t.C=t.L=t.R=t.P=t.N=null}function pv(t,e){var n=e,r=e.R,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.R=r.L,n.R&&(n.R.U=n),r.L=n}function gv(t,e){var n=e,r=e.L,i=n.U;i?i.L===n?i.L=r:i.R=r:t._=r,r.U=i,n.U=r,n.L=r.R,n.L&&(n.L.U=n),r.R=n}function vv(t){for(;t.L;)t=t.L;return t}function mv(t,e,n,r){var i=[null,null],a=WO.push(i)-1;return i.left=t,i.right=e,n&&bv(i,t,e,n),r&&bv(i,e,t,r),YO[t.index].halfedges.push(a),YO[e.index].halfedges.push(a),i}function yv(t,e,n){var r=[e,n];return r.left=t,r}function bv(t,e,n,r){t[0]||t[1]?t.left===n?t[1]=r:t[0]=r:(t[0]=r,t.left=e,t.right=n)}function _v(t,e,n,r,i){var a,o=t[0],u=t[1],s=o[0],f=o[1],c=u[0],l=u[1],h=0,d=1,p=c-s,g=l-f;if(a=e-s,p||!(a>0)){if(a/=p,p<0){if(a<h)return;a<d&&(d=a)}else if(p>0){if(a>d)return;a>h&&(h=a)}if(a=r-s,p||!(a<0)){if(a/=p,p<0){if(a>d)return;a>h&&(h=a)}else if(p>0){if(a<h)return;a<d&&(d=a)}if(a=n-f,g||!(a>0)){if(a/=g,g<0){if(a<h)return;a<d&&(d=a)}else if(g>0){if(a>d)return;a>h&&(h=a)}if(a=i-f,g||!(a<0)){if(a/=g,g<0){if(a>d)return;a>h&&(h=a)}else if(g>0){if(a<h)return;a<d&&(d=a)}return!(h>0||d<1)||(h>0&&(t[0]=[s+h*p,f+h*g]),d<1&&(t[1]=[s+d*p,f+d*g]),!0)}}}}}function xv(t,e,n,r,i){var a=t[1];if(a)return!0;var o,u,s=t[0],f=t.left,c=t.right,l=f[0],h=f[1],d=c[0],p=c[1],g=(l+d)/2,v=(h+p)/2;if(p===h){if(g<e||g>=r)return;if(l>d){if(s){if(s[1]>=i)return}else s=[g,n];a=[g,i]}else{if(s){if(s[1]<n)return}else s=[g,i];a=[g,n]}}else if(o=(l-d)/(p-h),u=v-o*g,o<-1||o>1)if(l>d){if(s){if(s[1]>=i)return}else s=[(n-u)/o,n];a=[(i-u)/o,i]}else{if(s){if(s[1]<n)return}else s=[(i-u)/o,i];a=[(n-u)/o,n]}else if(h<p){if(s){if(s[0]>=r)return}else s=[e,o*e+u];a=[r,o*r+u]}else{if(s){if(s[0]<e)return}else s=[r,o*r+u];a=[e,o*e+u]}return t[0]=s,t[1]=a,!0}function wv(t,e,n,r){for(var i,a=WO.length;a--;)xv(i=WO[a],t,e,n,r)&&_v(i,t,e,n,r)&&(Math.abs(i[0][0]-i[1][0])>VO||Math.abs(i[0][1]-i[1][1])>VO)||delete WO[a]}function Mv(t){return YO[t.index]={site:t,halfedges:[]}}function kv(t,e){var n=t.site,r=e.left,i=e.right;return n===i&&(i=r,r=n),i?Math.atan2(i[1]-r[1],i[0]-r[0]):(n===r?(r=e[1],i=e[0]):(r=e[0],i=e[1]),Math.atan2(r[0]-i[0],i[1]-r[1]))}function Ev(t,e){return e[+(e.left!==t.site)]}function Sv(t,e){return e[+(e.left===t.site)]}function Av(){for(var t,e,n,r,i=0,a=YO.length;i<a;++i)if((t=YO[i])&&(r=(e=t.halfedges).length)){var o=new Array(r),u=new Array(r);for(n=0;n<r;++n)o[n]=n,u[n]=kv(t,WO[e[n]]);for(o.sort(function(t,e){return u[e]-u[t]}),n=0;n<r;++n)u[n]=e[o[n]];for(n=0;n<r;++n)e[n]=u[n]}}function Cv(t,e,n,r){var i,a,o,u,s,f,c,l,h,d,p,g,v=YO.length,m=!0;for(i=0;i<v;++i)if(a=YO[i]){for(o=a.site,s=a.halfedges,u=s.length;u--;)WO[s[u]]||s.splice(u,1);for(u=0,f=s.length;u<f;)d=Sv(a,WO[s[u]]),p=d[0],g=d[1],c=Ev(a,WO[s[++u%f]]),l=c[0],h=c[1],(Math.abs(p-l)>VO||Math.abs(g-h)>VO)&&(s.splice(u,0,WO.push(yv(o,d,Math.abs(p-t)<VO&&r-g>VO?[t,Math.abs(l-t)<VO?h:r]:Math.abs(g-r)<VO&&n-p>VO?[Math.abs(h-r)<VO?l:n,r]:Math.abs(p-n)<VO&&g-e>VO?[n,Math.abs(l-n)<VO?h:e]:Math.abs(g-e)<VO&&p-t>VO?[Math.abs(h-e)<VO?l:t,e]:null))-1),++f);f&&(m=!1)}if(m){var y,b,_,x=1/0;for(i=0,m=null;i<v;++i)(a=YO[i])&&(o=a.site,y=o[0]-t,b=o[1]-e,(_=y*y+b*b)<x&&(x=_,m=a));if(m){var w=[t,e],M=[t,r],k=[n,r],E=[n,e];m.halfedges.push(WO.push(yv(o=m.site,w,M))-1,WO.push(yv(o,M,k))-1,WO.push(yv(o,k,E))-1,WO.push(yv(o,E,w))-1)}}for(i=0;i<v;++i)(a=YO[i])&&(a.halfedges.length||delete YO[i])}function Nv(){dv(this),this.x=this.y=this.arc=this.site=this.cy=null}function zv(t){var e=t.P,n=t.N;if(e&&n){var r=e.site,i=t.site,a=n.site;if(r!==a){var o=i[0],u=i[1],s=r[0]-o,f=r[1]-u,c=a[0]-o,l=a[1]-u,h=2*(s*l-f*c);if(!(h>=-JO)){var d=s*s+f*f,p=c*c+l*l,g=(l*d-f*p)/h,v=(s*p-c*d)/h,m=HO.pop()||new Nv;m.arc=t,m.site=i,m.x=g+o,m.y=(m.cy=v+u)+Math.sqrt(g*g+v*v),t.circle=m;for(var y=null,b=GO._;b;)if(m.y<b.y||m.y===b.y&&m.x<=b.x){if(!b.L){y=b.P;break}b=b.L}else{if(!b.R){y=b;break}b=b.R}GO.insert(y,m),y||($O=m)}}}}function Tv(t){var e=t.circle;e&&(e.P||($O=e.N),GO.remove(e),HO.push(e),dv(e),t.circle=null)}function Ov(){dv(this),this.edge=this.site=this.circle=null}function Rv(t){var e=XO.pop()||new Ov;return e.site=t,e}function Pv(t){Tv(t),BO.remove(t),XO.push(t),dv(t)}function Dv(t){var e=t.circle,n=e.x,r=e.cy,i=[n,r],a=t.P,o=t.N,u=[t];Pv(t);for(var s=a;s.circle&&Math.abs(n-s.circle.x)<VO&&Math.abs(r-s.circle.cy)<VO;)a=s.P,u.unshift(s),Pv(s),s=a;u.unshift(s),Tv(s);for(var f=o;f.circle&&Math.abs(n-f.circle.x)<VO&&Math.abs(r-f.circle.cy)<VO;)o=f.N,u.push(f),Pv(f),f=o;u.push(f),Tv(f);var c,l=u.length;for(c=1;c<l;++c)f=u[c],s=u[c-1],bv(f.edge,s.site,f.site,i);s=u[0],f=u[l-1],f.edge=mv(s.site,f.site,null,i),zv(s),zv(f)}function Lv(t){for(var e,n,r,i,a=t[0],o=t[1],u=BO._;u;)if((r=qv(u,o)-a)>VO)u=u.L;else{if(!((i=a-Uv(u,o))>VO)){r>-VO?(e=u.P,n=u):i>-VO?(e=u,n=u.N):e=n=u;break}if(!u.R){e=u;break}u=u.R}Mv(t);var s=Rv(t);if(BO.insert(e,s),e||n){if(e===n)return Tv(e),n=Rv(e.site),BO.insert(s,n),s.edge=n.edge=mv(e.site,s.site),zv(e),void zv(n);if(!n)return void(s.edge=mv(e.site,s.site));Tv(e),Tv(n);var f=e.site,c=f[0],l=f[1],h=t[0]-c,d=t[1]-l,p=n.site,g=p[0]-c,v=p[1]-l,m=2*(h*v-d*g),y=h*h+d*d,b=g*g+v*v,_=[(v*y-d*b)/m+c,(h*b-g*y)/m+l];bv(n.edge,f,p,_),s.edge=mv(f,t,null,_),n.edge=mv(t,p,null,_),zv(e),zv(n)}}function qv(t,e){var n=t.site,r=n[0],i=n[1],a=i-e;if(!a)return r;var o=t.P;if(!o)return-1/0;n=o.site;var u=n[0],s=n[1],f=s-e;if(!f)return u;var c=u-r,l=1/a-1/f,h=c/f;return l?(-h+Math.sqrt(h*h-2*l*(c*c/(-2*f)-s+f/2+i-a/2)))/l+r:(r+u)/2}function Uv(t,e){var n=t.N;if(n)return qv(n,e);var r=t.site;return r[1]===e?r[0]:1/0}function Fv(t,e,n){return(t[0]-n[0])*(e[1]-t[1])-(t[0]-e[0])*(n[1]-t[1])}function jv(t,e){return e[1]-t[1]||e[0]-t[0]}function Iv(t,e){var n,r,i,a=t.sort(jv).pop();for(WO=[],YO=new Array(t.length),BO=new hv,GO=new hv;;)if(i=$O,a&&(!i||a[1]<i.y||a[1]===i.y&&a[0]<i.x))a[0]===n&&a[1]===r||(Lv(a),n=a[0],r=a[1]),a=t.pop();else{if(!i)break;Dv(i.arc)}if(Av(),e){var o=+e[0][0],u=+e[0][1],s=+e[1][0],f=+e[1][1];wv(o,u,s,f),Cv(o,u,s,f)}this.edges=WO,this.cells=YO,BO=GO=WO=YO=null}function $v(){function t(t){return new Iv(t.map(function(r,i){var a=[Math.round(e(r,i,t)/VO)*VO,Math.round(n(r,i,t)/VO)*VO];return a.index=i,a.data=r,a}),r)}var e=cv,n=lv,r=null;return t.polygons=function(e){return t(e).polygons()},t.links=function(e){return t(e).links()},t.triangles=function(e){return t(e).triangles()},t.x=function(n){return arguments.length?(e="function"==typeof n?n:fv(+n),t):e},t.y=function(e){return arguments.length?(n="function"==typeof e?e:fv(+e),t):n},t.extent=function(e){return arguments.length?(r=null==e?null:[[+e[0][0],+e[0][1]],[+e[1][0],+e[1][1]]],t):r&&[[r[0][0],r[0][1]],[r[1][0],r[1][1]]]},t.size=function(e){return arguments.length?(r=null==e?null:[[0,0],[+e[0],+e[1]]],t):r&&[r[1][0]-r[0][0],r[1][1]-r[0][1]]},t}function Bv(t){Io.call(this,null,t)}function Yv(){function t(t){t.width=t.height=1;var e=Math.sqrt(t.getContext("2d").getImageData(0,0,1,1).data.length>>2);t.width=(KO<<5)/e,t.height=tR/e;var n=t.getContext("2d");return n.fillStyle=n.strokeStyle="red",n.textAlign="center",{context:n,ratio:e}}function e(t,e,n){for(var r,i,a,o=e.x,u=e.y,s=Math.sqrt(f[0]*f[0]+f[1]*f[1]),l=c(f),d=h()<.5?1:-1,p=-d;(r=l(p+=d))&&(i=~~r[0],a=~~r[1],!(Math.min(Math.abs(i),Math.abs(a))>=s));)if(e.x=o+i,e.y=u+a,!(e.x+e.x0<0||e.y+e.y0<0||e.x+e.x1>f[0]||e.y+e.y1>f[1])&&(!n||!Wv(e,t,f[0]))&&(!n||Xv(e,n))){for(var g,v=e.sprite,m=e.width>>5,y=f[0]>>5,b=e.x-(m<<4),_=127&b,x=32-_,w=e.y1-e.y0,M=(e.y+e.y0)*y+(b>>5),k=0;k<w;k++){g=0;for(var E=0;E<=m;E++)t[M+E]|=g<<x|(E<m?(g=v[k*m+E])>>>_:0);M+=y}return e.sprite=null,!0}return!1}var n,r,i,a,o,u,s,f=[256,256],c=Vv,l=[],h=Math.random,d={},p=Qv;return d.layout=function(){for(var c=t(p()),d=Zv((f[0]>>5)*f[1]),g=null,v=l.length,m=-1,y=[],b=l.map(function(t){return{text:n(t),font:r(t),style:a(t),weight:o(t),rotate:u(t),size:~~i(t),padding:s(t),xoff:0,yoff:0,x1:0,y1:0,x0:0,y0:0,hasText:!1,sprite:null,datum:t}}).sort(function(t,e){return e.size-t.size});++m<v;){var _=b[m];_.x=f[0]*(h()+.5)>>1,_.y=f[1]*(h()+.5)>>1,Gv(c,_,b,m),
_.hasText&&e(d,_,g)&&(y.push(_),g?Hv(g,_):g=[{x:_.x+_.x0,y:_.y+_.y0},{x:_.x+_.x1,y:_.y+_.y1}],_.x-=f[0]>>1,_.y-=f[1]>>1)}return y},d.words=function(t){return arguments.length?(l=t,d):l},d.size=function(t){return arguments.length?(f=[+t[0],+t[1]],d):f},d.font=function(t){return arguments.length?(r=Kv(t),d):r},d.fontStyle=function(t){return arguments.length?(a=Kv(t),d):a},d.fontWeight=function(t){return arguments.length?(o=Kv(t),d):o},d.rotate=function(t){return arguments.length?(u=Kv(t),d):u},d.text=function(t){return arguments.length?(n=Kv(t),d):n},d.spiral=function(t){return arguments.length?(c=eR[t]||t,d):c},d.fontSize=function(t){return arguments.length?(i=Kv(t),d):i},d.padding=function(t){return arguments.length?(s=Kv(t),d):s},d.random=function(t){return arguments.length?(h=t,d):h},d}function Gv(t,e,n,r){if(!e.sprite){var i=t.context,a=t.ratio;i.clearRect(0,0,(KO<<5)/a,tR/a);var o,u,s,f,c,l=0,h=0,d=0,p=n.length;for(--r;++r<p;){if(e=n[r],i.save(),i.font=e.style+" "+e.weight+" "+~~((e.size+1)/a)+"px "+e.font,o=i.measureText(e.text+"m").width*a,s=e.size<<1,e.rotate){var g=Math.sin(e.rotate*QO),v=Math.cos(e.rotate*QO),m=o*v,y=o*g,b=s*v,_=s*g;o=Math.max(Math.abs(m+_),Math.abs(m-_))+31>>5<<5,s=~~Math.max(Math.abs(y+b),Math.abs(y-b))}else o=o+31>>5<<5;if(s>d&&(d=s),l+o>=KO<<5&&(l=0,h+=d,d=0),h+s>=tR)break;i.translate((l+(o>>1))/a,(h+(s>>1))/a),e.rotate&&i.rotate(e.rotate*QO),i.fillText(e.text,0,0),e.padding&&(i.lineWidth=2*e.padding,i.strokeText(e.text,0,0)),i.restore(),e.width=o,e.height=s,e.xoff=l,e.yoff=h,e.x1=o>>1,e.y1=s>>1,e.x0=-e.x1,e.y0=-e.y1,e.hasText=!0,l+=o}for(var x=i.getImageData(0,0,(KO<<5)/a,tR/a).data,w=[];--r>=0;)if(e=n[r],e.hasText){for(o=e.width,u=o>>5,s=e.y1-e.y0,f=0;f<s*u;f++)w[f]=0;if(null==(l=e.xoff))return;h=e.yoff;var M=0,k=-1;for(c=0;c<s;c++){for(f=0;f<o;f++){var E=u*c+(f>>5),S=x[(h+c)*(KO<<5)+(l+f)<<2]?1<<31-f%32:0;w[E]|=S,M|=S}M?k=c:(e.y0++,s--,c--,h++)}e.y1=e.y0+k,e.sprite=w.slice(0,(e.y1-e.y0)*u)}}}function Wv(t,e,n){n>>=5;for(var r,i=t.sprite,a=t.width>>5,o=t.x-(a<<4),u=127&o,s=32-u,f=t.y1-t.y0,c=(t.y+t.y0)*n+(o>>5),l=0;l<f;l++){r=0;for(var h=0;h<=a;h++)if((r<<s|(h<a?(r=i[l*a+h])>>>u:0))&e[c+h])return!0;c+=n}return!1}function Hv(t,e){var n=t[0],r=t[1];e.x+e.x0<n.x&&(n.x=e.x+e.x0),e.y+e.y0<n.y&&(n.y=e.y+e.y0),e.x+e.x1>r.x&&(r.x=e.x+e.x1),e.y+e.y1>r.y&&(r.y=e.y+e.y1)}function Xv(t,e){return t.x+t.x1>e[0].x&&t.x+t.x0<e[1].x&&t.y+t.y1>e[0].y&&t.y+t.y0<e[1].y}function Vv(t){var e=t[0]/t[1];return function(t){return[e*(t*=.1)*Math.cos(t),t*Math.sin(t)]}}function Jv(t){var e=4*t[0]/t[1],n=0,r=0;return function(t){var i=t<0?-1:1;switch(Math.sqrt(1+4*i*t)-i&3){case 0:n+=e;break;case 1:r+=4;break;case 2:n-=e;break;default:r-=4}return[n,r]}}function Zv(t){for(var e=[],n=-1;++n<t;)e[n]=0;return e}function Qv(){try{var t="undefined"!=typeof document&&document.createElement?document.createElement("canvas"):0;return t&&t.getContext?t:new(require("canvas"))}catch(t){P("Canvas unavailable. Run in browser or install node-canvas.")}}function Kv(t){return"function"==typeof t?t:function(){return t}}function tm(t){Io.call(this,Yv(),t)}function em(t,e){var n=new JS.Extent;return n.transform({field:t,modified:tk},e),n.value}function nm(t){return new Uint8Array(t)}function rm(t){return new Uint16Array(t)}function im(t){return new Uint32Array(t)}function am(){var t=8,e=[],n=im(0),r=um(0,t),i=um(0,t);return{data:function(){return e},seen:function(){return n=om(n,e.length)},add:function(t){for(var n,r=0,i=e.length,a=t.length;r<a;++r)n=t[r],n._index=i++,e.push(n)},remove:function(t,n){var a,o,u,s=e.length,f=Array(s-t),c=e;for(o=0;!n[o]&&o<s;++o)f[o]=e[o],c[o]=o;for(u=o;o<s;++o)a=e[o],n[o]?c[o]=-1:(c[o]=u,r[u]=r[o],i[u]=i[o],f[u]=a,a._index=u++),r[o]=0;return e=f,c},size:function(){return e.length},curr:function(){return r},prev:function(){return i},reset:function(t){i[t]=r[t]},all:function(){return t<257?255:t<65537?65535:4294967295},set:function(t,e){r[t]|=e},clear:function(t,e){r[t]&=~e},resize:function(e,n){(e>r.length||n>t)&&(t=Math.max(n,t),r=um(e,t,r),i=um(e,t))}}}function om(t,e,n){return t.length>=e?t:(n=n||new t.constructor(e),n.set(t),n)}function um(t,e,n){var r=(e<257?nm:e<65537?rm:im)(t);return n&&r.set(n),r}function sm(t,e,n){var r=1<<e;return{one:r,zero:~r,range:n.slice(),bisect:t.bisect,index:t.index,size:t.size,onAdd:function(t,e){var n,i=this,a=i.bisect(i.range,t.value),o=t.index,u=a[0],s=a[1],f=o.length;for(n=0;n<u;++n)e[o[n]]|=r;for(n=s;n<f;++n)e[o[n]]|=r;return i}}}function fm(){function t(t,e,n){if(!e.length)return[];var r,u,s,f=o,c=e.length,l=Array(c),h=im(c);for(s=0;s<c;++s)l[s]=t(e[s]),h[s]=s;if(l=cm(l,h),f)r=a,u=i,a=Array(f+c),i=im(f+c),lm(n,r,u,f,l,h,c,a,i);else{if(n>0)for(s=0;s<c;++s)h[s]+=n;a=l,i=h}return o=f+c,{index:h,value:l}}function e(t,e){var n,r,u,s=o;for(r=0;!e[i[r]]&&r<s;++r);for(u=r;r<s;++r)e[n=i[r]]||(i[u]=n,a[u]=a[r],++u);o=s-t}function n(t){for(var e=0,n=o;e<n;++e)i[e]=t[i[e]]}function r(t,e){var n=e?e.length:(e=a,o);return[YM(e,t[0],0,n),BM(e,t[1],0,n)]}var i=im(0),a=[],o=0;return{insert:t,remove:e,bisect:r,reindex:n,index:function(){return i},size:function(){return o}}}function cm(t,e){return t.sort.call(e,function(e,n){var r=t[e],i=t[n];return r<i?-1:r>i?1:0}),x(t,e)}function lm(t,e,n,r,i,a,o,u,s){var f,c=0,l=0;for(f=0;c<r&&l<o;++f)e[c]<i[l]?(u[f]=e[c],s[f]=n[c++]):(u[f]=i[l],s[f]=a[l++]+t);for(;c<r;++c,++f)u[f]=e[c],s[f]=n[c];for(;l<o;++l,++f)u[f]=i[l],s[f]=a[l]+t}function hm(t){Io.call(this,am(),t),this._indices=null,this._dims=null}function dm(t){Io.call(this,null,t)}function pm(t){Io.call(this,null,t)}function gm(t,e,n){return e(t.bounds.clear(),t,n)}function vm(t){Io.call(this,null,t)}function mm(t){var e=t.groups,n=t.parent;return e&&1===e.size?e.get(Object.keys(e.object)[0]):e&&n?e.lookup(n):null}function ym(t){Io.call(this,null,t)}function bm(t,e){return!(t.x2-1<e.x1||t.x1+1>e.x2||t.y2-1<e.y1||t.y1+1>e.y2)}function _m(t){for(var e,n=1,r=t.length,i=t[0].bounds;n<r;i=e,++n)if(bm(i,e=t[n].bounds))return!0}function xm(t){var e=t.bounds;return e.width()>1&&e.height()>1}function wm(t){Io.call(this,null,t)}function Mm(t){for(var e,n,r=t.items,i=r.length,a=0,o={marks:[],rowheaders:[],rowfooters:[],colheaders:[],colfooters:[],rowtitle:null,coltitle:null};a<i;++a)if(e=r[a],n=e.items,"group"===e.marktype)switch(e.role){case lR:case hR:break;case dR:km(n,o.rowheaders);break;case pR:km(n,o.rowfooters);break;case vR:km(n,o.colheaders);break;case mR:km(n,o.colfooters);break;case gR:o.rowtitle=n[0];break;case yR:o.coltitle=n[0];break;default:km(n,o.marks)}return o}function km(t,e){for(var n=0,r=t.length;n<r;++n)e.push(t[n])}function Em(t){return{x1:0,y1:0,x2:t.width||0,y2:t.height||0}}function Sm(t){return t.bounds.clone().translate(-(t.x||0),-(t.y||0))}function Am(t,e){return{x1:t.x,y1:t.y,x2:t.x+t.width,y2:t.y+t.height}[e]}function Cm(t,e){return t.bounds[e]}function Nm(t,e,n){return(L(t)?t[e]:t)||n||0}function zm(t,e,n){function r(t,e){return Math.floor(Math.min(t,e))}function i(t,e){return Math.ceil(Math.max(t,e))}var a,o,u,s,f,c,l,h,d,p,g,v=Mm(e,n),m=v.marks,y="flush"===n.bounds,b=y?Em:Sm,_=new pn(0,0,0,0),x=Nm(n.align,"column"),w=Nm(n.align,"row"),M=Nm(n.padding,"column"),k=Nm(n.padding,"row"),E=n.offset,S=n.columns||m.length,A=S<0?1:Math.ceil(m.length/S),C=A*S,N=[],z=[],T=m.length;for(o=0;o<T;++o)s=b(m[o]),c=o%S==0?0:Math.ceil(b(m[o-1]).x2),l=o<S?0:Math.ceil(b(m[o-S]).y2),h=(s.x1<0?Math.ceil(-s.x1):0)+c,d=(s.y1<0?Math.ceil(-s.y1):0)+l,N.push(h+M),z.push(d+k),t.dirty(m[o]);for(o=0;o<T;++o)o%S==0&&(N[o]=0),o<S&&(z[o]=0);if("each"===x)for(u=1;u<S;++u){for(g=0,o=u;o<T;o+=S)g<N[o]&&(g=N[o]);for(o=u;o<T;o+=S)N[o]=g}else if("all"===x){for(g=0,o=0;o<T;++o)o%S&&g<N[o]&&(g=N[o]);for(o=0;o<T;++o)o%S&&(N[o]=g)}if("each"===w)for(u=1;u<A;++u){for(g=0,o=u*S,a=o+S;o<a;++o)g<z[o]&&(g=z[o]);for(o=u*S;o<a;++o)z[o]=g}else if("all"===w){for(g=0,o=S;o<T;++o)g<z[o]&&(g=z[o]);for(o=S;o<T;++o)z[o]=g}for(h=0,o=0;o<T;++o)f=m[o],c=f.x||0,f.x=h=N[o]+(o%S?h:0),f.bounds.translate(h-c,0);for(u=0;u<S;++u)for(d=0,o=u;o<T;o+=S)f=m[o],l=f.y||0,f.y=d+=z[o],f.bounds.translate(0,d-l);for(o=0;o<T;++o)m[o].mark.bounds.clear();for(o=0;o<T;++o)f=m[o],t.dirty(f),_.union(f.mark.bounds.union(f.bounds));b=y?Am:Cm,h=Tm(t,v.rowheaders,m,S,A,-Nm(E,"rowHeader"),r,0,b,"x1",0,S,1),d=Tm(t,v.colheaders,m,S,S,-Nm(E,"columnHeader"),r,1,b,"y1",0,1,S),Tm(t,v.rowfooters,m,S,A,Nm(E,"rowFooter"),i,0,b,"x2",S-1,S,1),Tm(t,v.colfooters,m,S,S,Nm(E,"columnFooter"),i,1,b,"y2",C-S,1,S),v.rowtitle&&(g=h-Nm(E,"rowTitle"),p=Nm(n.titleBand,"row",.5),Om(t,v.rowtitle,g,0,_,p)),v.coltitle&&(g=d-Nm(E,"columnTitle"),p=Nm(n.titleBand,"column",.5),Om(t,v.coltitle,g,1,_,p))}function Tm(t,e,n,r,i,a,o,u,s,f,c,l,h){var d,p,g,v,m,y,b,_,x,w=n.length,M=0,k=0;for(d=c;d<w;d+=l)n[d]&&(M=o(M,s(n[d],f)));if(!e.length)return M;for(e.length>i&&(t.warn("Grid headers exceed limit: "+i),e=e.slice(0,i)),M+=a,p=0,v=e.length;p<v;++p)t.dirty(e[p]),e[p].mark.bounds.clear();for(d=c,p=0,v=e.length;p<v;++p,d+=l){for(y=e[p],m=y.mark.bounds,g=d;null==(b=n[g]);g-=h);u?(_=b.x,x=M):(_=M,x=b.y),m.union(y.bounds.translate(_-(y.x||0),x-(y.y||0))),y.x=_,y.y=x,t.dirty(y),k=o(k,m[f])}return k}function Om(t,e,n,r,i,a){if(e){t.dirty(e);var o=n,u=n;r?o=Math.round(i.x1+a*i.width()):u=Math.round(i.y1+a*i.height()),e.bounds.translate(o-(e.x||0),u-(e.y||0)),e.mark.bounds.clear().union(e.bounds),e.x=o,e.y=u,t.dirty(e)}}function Rm(t){Io.call(this,null,t)}function Pm(t,e,n){var r,i,a,o,u,s,f=e.items,c=Math.max(0,e.width||0),l=Math.max(0,e.height||0),h=(new pn).set(0,0,c,l),d=h.clone(),p=h.clone(),g=[];for(u=0,s=f.length;u<s;++u)switch(i=f[u],i.role){case wR:d.union(o=Um(t,i,c,l)),Lm(i)&&p.union(o);break;case MR:r=i;break;case ER:g.push(i);break;case kR:case SR:case AR:case CR:case NR:case zR:p.union(i.bounds);break;default:h.union(i.bounds)}if(r&&(d.union(o=Fm(t,r,d)),Lm(r)&&p.union(o)),g.length)for(a={left:0,right:0,margin:n.legendMargin||8},u=0,s=g.length;u<s;++u)o=jm(t,g[u],a,p,c,l),n.autosize&&n.autosize.type===bR?h.add(o.x1,0).add(o.x2,0):h.union(o);Im(t,e,h.union(p).union(d),n)}function Dm(t,e,n){return t[e]===n?0:(t[e]=n,1)}function Lm(t){var e=t.items[0].datum.orient;return"left"===e||"right"===e}function qm(t){var e=+t.grid;return[t.ticks?e++:-1,t.labels?e++:-1,e+ +t.domain]}function Um(t,e,n,r){var i,a,o=e.items[0],u=o.datum,s=u.orient,f=qm(u),c=o.range,l=o.offset,h=o.position,d=o.minExtent,p=o.maxExtent,g=u.title&&o.items[f[2]].items[0],v=o.titlePadding,m=o.bounds,y=0,b=0;switch(OR.clear().union(m),m.clear(),(i=f[0])>-1&&m.union(o.items[i].bounds),(i=f[1])>-1&&m.union(o.items[i].bounds),s){case"top":y=h||0,b=-l,a=Math.max(d,Math.min(p,-m.y1)),g&&(g.auto?(g.y=-(a+=v),a+=g.bounds.height()):m.union(g.bounds)),m.add(0,-a).add(c,0);break;case"left":y=-l,b=h||0,a=Math.max(d,Math.min(p,-m.x1)),g&&(g.auto?(g.x=-(a+=v),a+=g.bounds.width()):m.union(g.bounds)),m.add(-a,0).add(0,c);break;case"right":y=n+l,b=h||0,a=Math.max(d,Math.min(p,m.x2)),g&&(g.auto?(g.x=a+=v,a+=g.bounds.width()):m.union(g.bounds)),m.add(0,0).add(a,c);break;case"bottom":y=h||0,b=r+l,a=Math.max(d,Math.min(p,m.y2)),g&&(g.auto?(g.y=a+=v,a+=g.bounds.height()):m.union(g.bounds)),m.add(0,0).add(c,a);break;default:y=o.x,b=o.y}return ui(m.translate(y,b),o),Dm(o,"x",y+TR)|Dm(o,"y",b+TR)&&(o.bounds=OR,t.dirty(o),o.bounds=m,t.dirty(o)),o.mark.bounds.clear().union(m)}function Fm(t,e,n){var r=e.items[0],i=r.datum,a=i.orient,o=r.offset,u=r.bounds,s=0,f=0;switch(OR.clear().union(u),a){case"top":s=r.x,f=n.y1-o;break;case"left":s=n.x1-o,f=r.y;break;case"right":s=n.x2+o,f=r.y;break;case"bottom":s=r.x,f=n.y2+o;break;default:s=r.x,f=r.y}return u.translate(s-r.x,f-r.y),Dm(r,"x",s)|Dm(r,"y",f)&&(r.bounds=OR,t.dirty(r),r.bounds=u,t.dirty(r)),e.bounds.clear().union(u)}function jm(t,e,n,r,i,a){var o,u,s=e.items[0],f=s.datum,c=f.orient,l=s.offset,h=s.bounds,d=0,p=n[c]||0;switch(OR.clear().union(h),h.clear(),s.items.forEach(function(t){h.union(t.bounds)}),o=Math.round(h.width())+2*s.padding-1,u=Math.round(h.height())+2*s.padding-1,c){case"left":d-=o+l-Math.floor(r.x1),n.left+=u+n.margin;break;case"right":d+=l+Math.ceil(r.x2),n.right+=u+n.margin;break;case"top-left":d+=l,p+=l;break;case"top-right":d+=i-o-l,p+=l;break;case"bottom-left":d+=l,p+=a-u-l;break;case"bottom-right":d+=i-o-l,p+=a-u-l;break;default:d=s.x,p=s.y}return ui(h.set(d,p,d+o,p+u),s),Dm(s,"x",d)|Dm(s,"width",o)|Dm(s,"y",p)|Dm(s,"height",u)&&(s.bounds=OR,t.dirty(s),s.bounds=h,t.dirty(s)),s.mark.bounds.clear().union(h)}function Im(t,e,n,r){var i=r.autosize&&r.autosize.type,a=r.autosize&&r.autosize.resize,o=t._width,u=t._height;if(!(t._autosize<1)&&i){var s=Math.max(0,e.width||0),f=Math.max(0,Math.ceil(-n.x1)),c=Math.max(0,Math.ceil(n.x2-s)),l=Math.max(0,e.height||0),h=Math.max(0,Math.ceil(-n.y1)),d=Math.max(0,Math.ceil(n.y2-l));i===xR?(o=s,u=l,f=0,h=0):i===bR?(s=Math.max(0,o-f-c),l=Math.max(0,u-h-d)):i===_R&&(o=s+f+c,u=l+h+d),t.autosize(o,u,s,l,[f,h],a)}}function $m(t){var e=t._signals.cursor;e||(t._signals.cursor=e=t.add({user:RR,item:null})),t.on(t.events("view","mousemove"),e,function(t,n){var r=e.value,i=r?q(r)?r:r.user:RR,a=n.item&&n.item.cursor||null;return r&&i===r.user&&a==r.item?r:{user:i,item:a}}),t.add(null,function(t){var e=t.cursor,n=this.value;return q(e)||(n=e.item,e=e.user),Bm(e&&e!==RR?e:n||e),n},{cursor:e})}function Bm(t){"undefined"!=typeof document&&document.body&&(document.body.style.cursor=t)}function Ym(t,e){var n=t._runtime.data;return n.hasOwnProperty(e)||t.error("Unrecognized data set: "+e),n[e]}function Gm(t){return Ym(this,t).values.value}function Wm(t,e){ao(e)||this.error("Second argument to changes must be a changeset.");var n=Ym(this,t);return n.modified=!0,this.pulse(n.input,e)}function Hm(t,e){return Wm.call(this,t,oo().insert(e))}function Xm(t,e){return Wm.call(this,t,oo().remove(e))}function Vm(t){var e=t.padding();return Math.max(0,t._width+e.left+e.right)}function Jm(t){var e=t.padding();return Math.max(0,t._height+e.top+e.bottom)}function Zm(t){var e=t.padding(),n=t._origin;return[e.left+n[0],e.top+n[1]]}function Qm(t){var e=Zm(t);t._renderer.background(t._background),t._renderer.resize(Vm(t),Jm(t),e),t._handler.origin(e)}function Km(t,e,n){var r,i,a,o=t._renderer.element();return o&&(a=Zm(t),i=e.changedTouches?e.changedTouches[0]:e,r=ka(i,o),r[0]-=a[0],r[1]-=a[1]),e.dataflow=t,e.vega=ty(t,n,r),e.item=n,e}function ty(t,e,n){function r(t){var n,r=a;if(t)for(n=e;n;n=n.mark.group)if(n.mark.name===t){r=n;break}return r&&r.mark&&r.mark.interactive?r:{}}function i(t){if(!t)return n;q(t)&&(t=r(t));for(var e=n.slice();t;)e[0]-=t.x||0,e[1]-=t.y||0,t=t.mark&&t.mark.group;return e}var a=e?"group"===e.mark.marktype?e:e.mark.group:null;return{view:G(t),item:G(e||{}),group:r,xy:i,x:function(t){return i(t)[0]},y:function(t){return i(t)[1]}}}function ey(t,e,n){var r,i=this,a=new ho(n),o=function(e,n){i.preventDefault()&&t===PR&&e.preventDefault(),a.receive(Km(i,e,n)),i.run()};if(t===PR)return i.addEventListener(e,o),a;if(t===DR?"undefined"!=typeof window&&(r=[window]):"undefined"!=typeof document&&(r=document.querySelectorAll(t)),!r)return i.warn("Can not resolve event source: "+t),a;for(var u=0,s=r.length;u<s;++u)r[u].addEventListener(e,o);return i._eventListeners.push({type:e,sources:r,handler:o}),a}function ny(t){return t.item}function ry(t){var e=t.item.mark.source;return e.source||e}function iy(t){return function(e,n){return n.vega.view().changeset().encode(n.item,t)}}function ay(t,e){return t=t||"hover",e=[e||"update",t],this.on(this.events("view","mouseover",ny),ry,iy(t)),this.on(this.events("view","mouseout",ny),ry,iy(e)),this}function oy(){for(var t,e,n=this._eventListeners,r=n.length;--r>=0;)for(e=n[r],t=e.sources.length;--t>=0;)e.sources[t].removeEventListener(e.type,e.handler)}function uy(t,e,n){var r=document.createElement(t);for(var i in e)r.setAttribute(i,e[i]);return null!=n&&(r.textContent=n),r}function sy(t,e,n){var r=n.param,i=n.state;return i||(i=n.state={elements:null,active:!1,set:null,update:function(e){i.source=!0,t.signal(r.signal,e).run()}},r.debounce&&(i.update=W(r.debounce,i.update))),q(e)&&(e=document.querySelector(e)),fy(i,e,r,t.signal(r.signal)),i.active||(t.on(t._signals[r.signal],null,function(){i.source?i.source=!1:i.set(t.signal(r.signal))}),i.active=!0),i}function fy(t,e,n,r){var i=uy("div",{"class":LR});i.appendChild(uy("span",{"class":qR},n.name||n.signal)),e.appendChild(i);var a=cy;switch(n.input){case"checkbox":a=ly;break;case"select":a=hy;break;case"radio":a=dy;break;case"range":a=py}a(t,i,n,r)}function cy(t,e,n,r){var i=uy("input");for(var a in n)"signal"!==a&&"element"!==a&&i.setAttribute("input"===a?"type":a,n[a]);i.setAttribute("name",n.signal),i.value=r,e.appendChild(i),i.addEventListener("input",function(){t.update(i.value)}),t.elements=[i],t.set=function(t){i.value=t}}function ly(t,e,n,r){var i={type:"checkbox",name:n.signal};r&&(i.checked=!0);var a=uy("input",i);e.appendChild(a),a.addEventListener("change",function(){t.update(a.checked)}),t.elements=[a],t.set=function(t){a.checked=!!t||null}}function hy(t,e,n,r){var i=uy("select",{name:n.signal});n.options.forEach(function(t){var e={value:t};gy(t,r)&&(e.selected=!0),i.appendChild(uy("option",e,t+""))}),e.appendChild(i),i.addEventListener("change",function(){t.update(n.options[i.selectedIndex])}),t.elements=[i],t.set=function(t){for(var e=0,r=n.options.length;e<r;++e)if(gy(n.options[e],t))return void(i.selectedIndex=e)}}function dy(t,e,n,r){var i=uy("span",{"class":UR});e.appendChild(i),t.elements=n.options.map(function(e){var a=FR+n.signal+"-"+e,o={id:a,type:"radio",name:n.signal,value:e};gy(e,r)&&(o.checked=!0);var u=uy("input",o);return u.addEventListener("change",function(){t.update(e)}),i.appendChild(u),i.appendChild(uy("label",{"for":a},e+"")),u}),t.set=function(e){for(var n=t.elements,r=0,i=n.length;r<i;++r)gy(n[r].value,e)&&(n[r].checked=!0)}}function py(t,e,n,r){function i(){f.textContent=s.value,t.update(+s.value)}r=void 0!==r?r:(+n.max+ +n.min)/2;var a=n.min||Math.min(0,+r)||0,o=n.max||Math.max(100,+r)||100,u=n.step||d(a,o,100),s=uy("input",{type:"range",name:n.signal,min:a,max:o,step:u});s.value=r;var f=uy("label",{},+r);e.appendChild(s),e.appendChild(f),s.addEventListener("input",i),s.addEventListener("change",i),t.elements=[s],t.set=function(t){s.value=t,f.textContent=t}}function gy(t,e){return t===e||t+""==e+""}function vy(t,e,n,r){return e=e||new r(t.loader()),e.initialize(n,Vm(t),Jm(t),Zm(t)).background(t._background)}function my(t,e,n,r){var i=(new r).scene(t.scenegraph().root).initialize(n,Zm(t),t);return e&&(i.handleTooltip=e.handleTooltip,e.handlers().forEach(function(t){i.on(t.type,t.handler)})),i}function yy(t,e){var n,r,i=this,a=i._renderType,o=Va(a);return t=i._el=t?by(i,t):null,o||i.error("Unrecognized renderer type: "+a),n=o.handler||Ea,r=t?o.renderer:o.headless,i._renderer=r?vy(i,i._renderer,t,r):null,i._handler=my(i,i._handler,t,n),i._redraw=!0,t&&(e=e?by(i,e):t.appendChild(uy("div",{"class":"vega-bindings"})),i._bind.forEach(function(t){t.param.element&&by(i,t.param.element)}),i._bind.forEach(function(t){sy(i,t.param.element||e,t)})),i}function by(t,e){return"string"==typeof e&&(e="undefined"!=typeof document?document.querySelector(e):t.error("DOM document instance not found.")),e.innerHTML="",e}function _y(t,e){var n=Va(e);return n&&n.headless?t.runAsync().then(function(){return vy(t,null,null,n.headless).renderAsync(t._scenegraph.root)}):Promise.reject("Unrecognized renderer type: "+e)}function xy(t){return t!==TS.Canvas&&t!==TS.SVG&&t!==TS.PNG?Promise.reject("Unrecognized image type: "+t):_y(this,t).then(function(e){return t===TS.SVG?wy(e.svg(),"image/svg+xml"):e.canvas().toDataURL("image/png")})}function wy(t,e){var n=new Blob([t],{type:e});return window.URL.createObjectURL(n)}function My(){return _y(this,TS.Canvas).then(function(t){return t.canvas()})}function ky(){return _y(this,TS.SVG).then(function(t){return t.svg()})}function Ey(t,e){return t=t||e.autosize,L(t)?t:(t=t||"pad",{type:t})}function Sy(t,e){return t=t||e.padding,L(t)?t:(t=+t||0,{top:t,bottom:t,left:t,right:t})}function Ay(t,e){P(t+' for "outer" push: '+U(e))}function Cy(t,e){var n=t.name;if(t.push===jR)e.signals[n]||Ay("No prior signal definition",n),IR.forEach(function(e){void 0!==t[e]&&Ay("Invalid property ",e)});else{var r=e.addSignal(n,t.value);!1===t.react&&(r.react=!1),t.bind&&e.addBinding(n,t.bind)}}function Ny(t){this.type=t}function zy(t){switch(t.type){case"ArrayExpression":return t.elements;case"BinaryExpression":case"LogicalExpression":return[t.left,t.right];case"CallExpression":var e=t.arguments.slice();return e.unshift(t.callee),e;case"ConditionalExpression":return[t.test,t.consequent,t.alternate];case"MemberExpression":return[t.object,t.property];case"ObjectExpression":return t.properties;case"Property":return[t.key,t.value];case"UnaryExpression":return[t.argument];case"Identifier":case"Literal":case"RawCode":default:return[]}}function Ty(t,e){if(!t)throw new Error("ASSERT: "+e)}function Oy(t){return t>=48&&t<=57}function Ry(t){return"0123456789abcdefABCDEF".indexOf(t)>=0}function Py(t){return"01234567".indexOf(t)>=0}function Dy(t){return 32===t||9===t||11===t||12===t||160===t||t>=5760&&[5760,6158,8192,8193,8194,8195,8196,8197,8198,8199,8200,8201,8202,8239,8287,12288,65279].indexOf(t)>=0}function Ly(t){return 10===t||13===t||8232===t||8233===t}function qy(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||92===t||t>=128&&MP.test(String.fromCharCode(t))}function Uy(t){return 36===t||95===t||t>=65&&t<=90||t>=97&&t<=122||t>=48&&t<=57||92===t||t>=128&&kP.test(String.fromCharCode(t))}function Fy(){for(var t;BR<YR&&(t=$R.charCodeAt(BR),Dy(t)||Ly(t));)++BR}function jy(t){var e,n,r,i=0;for(n="u"===t?4:2,e=0;e<n;++e)BR<YR&&Ry($R[BR])?(r=$R[BR++],i=16*i+"0123456789abcdef".indexOf(r.toLowerCase())):pb({},lP,xP);return String.fromCharCode(i)}function Iy(){var t,e,n,r;for(t=$R[BR],e=0,"}"===t&&pb({},lP,xP);BR<YR&&(t=$R[BR++],Ry(t));)e=16*e+"0123456789abcdef".indexOf(t.toLowerCase());return(e>1114111||"}"!==t)&&pb({},lP,xP),e<=65535?String.fromCharCode(e):(n=55296+(e-65536>>10),r=56320+(e-65536&1023),String.fromCharCode(n,r))}function $y(){var t,e;for(t=$R.charCodeAt(BR++),e=String.fromCharCode(t),92===t&&(117!==$R.charCodeAt(BR)&&pb({},lP,xP),++BR,t=jy("u"),t&&"\\"!==t&&qy(t.charCodeAt(0))||pb({},lP,xP),e=t);BR<YR&&(t=$R.charCodeAt(BR),Uy(t));)++BR,e+=String.fromCharCode(t),92===t&&(e=e.substr(0,e.length-1),117!==$R.charCodeAt(BR)&&pb({},lP,xP),++BR,t=jy("u"),t&&"\\"!==t&&Uy(t.charCodeAt(0))||pb({},lP,xP),e+=t);return e}function By(){var t,e;for(t=BR++;BR<YR;){if(92===(e=$R.charCodeAt(BR)))return BR=t,$y();if(!Uy(e))break;++BR}return $R.slice(t,BR)}function Yy(){var t,e,n;return t=BR,e=92===$R.charCodeAt(BR)?$y():By(),n=1===e.length?XR:EP.hasOwnProperty(e)?VR:"null"===e?JR:"true"===e||"false"===e?WR:XR,{type:n,value:e,start:t,end:BR}}function Gy(){var t,e,n,r,i=BR,a=$R.charCodeAt(BR),o=$R[BR];switch(a){case 46:case 40:case 41:case 59:case 44:case 123:case 125:case 91:case 93:case 58:case 63:case 126:return++BR,{type:QR,value:String.fromCharCode(a),start:i,end:BR};default:if(61===(t=$R.charCodeAt(BR+1)))switch(a){case 43:case 45:case 47:case 60:case 62:case 94:case 124:case 37:case 38:case 42:return BR+=2,{type:QR,value:String.fromCharCode(a)+String.fromCharCode(t),start:i,end:BR};case 33:case 61:return BR+=2,61===$R.charCodeAt(BR)&&++BR,{type:QR,value:$R.slice(i,BR),start:i,end:BR}}}return">>>="===(r=$R.substr(BR,4))?(BR+=4,{type:QR,value:r,start:i,end:BR}):">>>"===(n=r.substr(0,3))||"<<="===n||">>="===n?(BR+=3,{type:QR,value:n,start:i,end:BR}):(e=n.substr(0,2),o===e[1]&&"+-<>&|".indexOf(o)>=0||"=>"===e?(BR+=2,{type:QR,value:e,start:i,end:BR}):"<>=!+-*%&|^/".indexOf(o)>=0?(++BR,{type:QR,value:o,start:i,end:BR}):void pb({},lP,xP))}function Wy(t){for(var e="";BR<YR&&Ry($R[BR]);)e+=$R[BR++];return 0===e.length&&pb({},lP,xP),qy($R.charCodeAt(BR))&&pb({},lP,xP),{type:ZR,value:parseInt("0x"+e,16),start:t,end:BR}}function Hy(t){for(var e="0"+$R[BR++];BR<YR&&Py($R[BR]);)e+=$R[BR++];return(qy($R.charCodeAt(BR))||Oy($R.charCodeAt(BR)))&&pb({},lP,xP),{type:ZR,value:parseInt(e,8),octal:!0,start:t,end:BR}}function Xy(){var t,e,n;if(n=$R[BR],Ty(Oy(n.charCodeAt(0))||"."===n,"Numeric literal must start with a decimal digit or a decimal point"),e=BR,t="","."!==n){if(t=$R[BR++],n=$R[BR],"0"===t){if("x"===n||"X"===n)return++BR,Wy(e);if(Py(n))return Hy(e);n&&Oy(n.charCodeAt(0))&&pb({},lP,xP)}for(;Oy($R.charCodeAt(BR));)t+=$R[BR++];n=$R[BR]}if("."===n){for(t+=$R[BR++];Oy($R.charCodeAt(BR));)t+=$R[BR++];n=$R[BR]}if("e"===n||"E"===n)if(t+=$R[BR++],n=$R[BR],"+"!==n&&"-"!==n||(t+=$R[BR++]),Oy($R.charCodeAt(BR)))for(;Oy($R.charCodeAt(BR));)t+=$R[BR++];else pb({},lP,xP);return qy($R.charCodeAt(BR))&&pb({},lP,xP),{type:ZR,value:parseFloat(t),start:e,end:BR}}function Vy(){var t,e,n,r,i="",a=!1;for(t=$R[BR],Ty("'"===t||'"'===t,"String literal must starts with a quote"),e=BR,++BR;BR<YR;){if((n=$R[BR++])===t){t="";break}if("\\"===n)if((n=$R[BR++])&&Ly(n.charCodeAt(0)))"\r"===n&&"\n"===$R[BR]&&++BR;else switch(n){case"u":case"x":"{"===$R[BR]?(++BR,i+=Iy()):i+=jy(n);break;case"n":i+="\n";break;case"r":i+="\r";break;case"t":i+="\t";break;case"b":i+="\b";break;case"f":i+="\f";break;case"v":i+="\x0B";break;default:Py(n)?(r="01234567".indexOf(n),0!==r&&(a=!0),BR<YR&&Py($R[BR])&&(a=!0,r=8*r+"01234567".indexOf($R[BR++]),"0123".indexOf(n)>=0&&BR<YR&&Py($R[BR])&&(r=8*r+"01234567".indexOf($R[BR++]))),i+=String.fromCharCode(r)):i+=n}else{if(Ly(n.charCodeAt(0)))break;i+=n}}return""!==t&&pb({},lP,xP),{type:KR,value:i,octal:a,start:e,end:BR}}function Jy(t,e){var n=t;e.indexOf("u")>=0&&(n=n.replace(/\\u\{([0-9a-fA-F]+)\}/g,function(t,e){if(parseInt(e,16)<=1114111)return"x";pb({},mP)}).replace(/[\uD800-\uDBFF][\uDC00-\uDFFF]/g,"x"));try{new RegExp(n)}catch(t){pb({},mP)}try{return new RegExp(t,e)}catch(t){return null}}function Zy(){var t,e,n,r,i;for(t=$R[BR],Ty("/"===t,"Regular expression literal must start with a slash"),e=$R[BR++],n=!1,r=!1;BR<YR;)if(t=$R[BR++],e+=t,"\\"===t)t=$R[BR++],Ly(t.charCodeAt(0))&&pb({},yP),e+=t;else if(Ly(t.charCodeAt(0)))pb({},yP);else if(n)"]"===t&&(n=!1);else{if("/"===t){r=!0;break}"["===t&&(n=!0)}return r||pb({},yP),i=e.substr(1,e.length-2),{value:i,literal:e}}function Qy(){var t,e,n;for(e="",n="";BR<YR&&(t=$R[BR],Uy(t.charCodeAt(0)));)++BR,"\\"===t&&BR<YR?pb({},lP,xP):(n+=t,e+=t);return n.search(/[^gimuy]/g)>=0&&pb({},mP,n),{value:n,literal:e}}function Ky(){var t,e,n,r;return GR=null,Fy(),t=BR,e=Zy(),n=Qy(),r=Jy(e.value,n.value),{literal:e.literal+n.literal,value:r,regex:{pattern:e.value,flags:n.value},start:t,end:BR}}function tb(t){return t.type===XR||t.type===VR||t.type===WR||t.type===JR}function eb(){var t;return Fy(),BR>=YR?{type:HR,start:BR,end:BR}:(t=$R.charCodeAt(BR),qy(t)?Yy():40===t||41===t||59===t?Gy():39===t||34===t?Vy():46===t?Oy($R.charCodeAt(BR+1))?Xy():Gy():Oy(t)?Xy():Gy())}function nb(){var t;return t=GR,BR=t.end,GR=eb(),BR=t.end,t}function rb(){var t;t=BR,GR=eb(),BR=t}function ib(t){var e=new Ny(tP);return e.elements=t,e}function ab(t,e,n){var r=new Ny("||"===t||"&&"===t?oP:eP);return r.operator=t,r.left=e,r.right=n,r}function ob(t,e){var n=new Ny(nP);return n.callee=t,n.arguments=e,n}function ub(t,e,n){var r=new Ny(rP);return r.test=t,r.consequent=e,r.alternate=n,r}function sb(t){var e=new Ny(iP);return e.name=t,e}function fb(t){var e=new Ny(aP);return e.value=t.value,e.raw=$R.slice(t.start,t.end),t.regex&&("//"===e.raw&&(e.raw="/(?:)/"),e.regex=t.regex),e}function cb(t,e,n){var r=new Ny(uP);return r.computed="["===t,r.object=e,r.property=n,r.computed||(n.member=!0),r}function lb(t){var e=new Ny(sP);return e.properties=t,e}function hb(t,e,n){var r=new Ny(fP);return r.key=e,r.value=n,r.kind=t,r}function db(t,e){var n=new Ny(cP);return n.operator=t,n.argument=e,n.prefix=!0,n}function pb(t,e){var n,r=Array.prototype.slice.call(arguments,2),i=e.replace(/%(\d)/g,function(t,e){return Ty(e<r.length,"Message reference must be in range"),r[e]});throw n=new Error(i),n.index=BR,n.description=i,n}function gb(t){t.type===HR&&pb(t,vP),t.type===ZR&&pb(t,hP),t.type===KR&&pb(t,dP),t.type===XR&&pb(t,pP),t.type===VR&&pb(t,gP),pb(t,lP,t.value)}function vb(t){var e=nb();e.type===QR&&e.value===t||gb(e)}function mb(t){return GR.type===QR&&GR.value===t}function yb(t){return GR.type===VR&&GR.value===t}function bb(){var t=[];for(BR=GR.start,vb("[");!mb("]");)mb(",")?(nb(),t.push(null)):(t.push(Pb()),mb("]")||vb(","));return nb(),ib(t)}function _b(){var t;return BR=GR.start,t=nb(),t.type===KR||t.type===ZR?(t.octal&&pb(t,bP),fb(t)):sb(t.value)}function xb(){var t,e,n,r;return BR=GR.start,t=GR,t.type===XR?(n=_b(),vb(":"),r=Pb(),hb("init",n,r)):t.type!==HR&&t.type!==QR?(e=_b(),vb(":"),r=Pb(),hb("init",e,r)):void gb(t)}function wb(){var t,e,n,r=[],i={},a=String;for(BR=GR.start,vb("{");!mb("}");)t=xb(),e=t.key.type===iP?t.key.name:a(t.key.value),n="$"+e,Object.prototype.hasOwnProperty.call(i,n)?pb({},_P):i[n]=!0,r.push(t),mb("}")||vb(",");return vb("}"),lb(r)}function Mb(){var t;return vb("("),t=Db(),vb(")"),t}function kb(){var t,e,n;if(mb("("))return Mb();if(mb("["))return bb();if(mb("{"))return wb();if(t=GR.type,BR=GR.start,t===XR||SP[GR.value])n=sb(nb().value);else if(t===KR||t===ZR)GR.octal&&pb(GR,bP),n=fb(nb());else{if(t===VR)throw new Error(wP);t===WR?(e=nb(),e.value="true"===e.value,n=fb(e)):t===JR?(e=nb(),e.value=null,n=fb(e)):mb("/")||mb("/=")?(n=fb(Ky()),rb()):gb(nb())}return n}function Eb(){var t=[];if(vb("("),!mb(")"))for(;BR<YR&&(t.push(Pb()),!mb(")"));)vb(",");return vb(")"),t}function Sb(){var t;return BR=GR.start,t=nb(),tb(t)||gb(t),sb(t.value)}function Ab(){return vb("."),Sb()}function Cb(){var t;return vb("["),t=Db(),vb("]"),t}function Nb(){var t,e,n;for(t=kb();;)if(mb("."))n=Ab(),t=cb(".",t,n);else if(mb("("))e=Eb(),t=ob(t,e);else{if(!mb("["))break;n=Cb(),t=cb("[",t,n)}return t}function zb(){var t=Nb();if(GR.type===QR&&(mb("++")||mb("--")))throw new Error(wP);return t}function Tb(){var t,e;if(GR.type!==QR&&GR.type!==VR)e=zb();else{if(mb("++")||mb("--"))throw new Error(wP);if(mb("+")||mb("-")||mb("~")||mb("!"))t=nb(),e=Tb(),e=db(t.value,e);else{if(yb("delete")||yb("void")||yb("typeof"))throw new Error(wP);e=zb()}}return e}function Ob(t){var e=0;if(t.type!==QR&&t.type!==VR)return 0;switch(t.value){case"||":e=1;break;case"&&":e=2;break;case"|":e=3;break;case"^":e=4;break;case"&":e=5;break;case"==":case"!=":case"===":case"!==":e=6;break;case"<":case">":case"<=":case">=":case"instanceof":case"in":e=7;break;case"<<":case">>":case">>>":e=8;break;case"+":case"-":e=9;break;case"*":case"/":case"%":e=11}return e}function Rb(){var t,e,n,r,i,a,o,u,s,f;if(t=GR,s=Tb(),r=GR,0===(i=Ob(r)))return s;for(r.prec=i,nb(),e=[t,GR],o=Tb(),a=[s,r,o];(i=Ob(GR))>0;){for(;a.length>2&&i<=a[a.length-2].prec;)o=a.pop(),u=a.pop().value,s=a.pop(),e.pop(),n=ab(u,s,o),a.push(n);r=nb(),r.prec=i,a.push(r),e.push(GR),n=Tb(),a.push(n)}for(f=a.length-1,n=a[f],e.pop();f>1;)e.pop(),n=ab(a[f-1].value,a[f-2],n),f-=2;return n}function Pb(){var t,e,n;return t=Rb(),mb("?")&&(nb(),e=Pb(),vb(":"),n=Pb(),t=ub(t,e,n)),t}function Db(){var t=Pb();if(mb(","))throw new Error(wP);return t}function Lb(t){$R=t,BR=0,YR=$R.length,GR=null,rb();var e=Db();if(GR.type!==HR)throw new Error("Unexpect token after expression.");return e}function qb(t){function e(e,n,r,i){var a=t(n[0]);return r&&(a=r+"("+a+")",0===r.lastIndexOf("new ",0)&&(a="("+a+")")),a+"."+e+(i<0?"":0===i?"()":"("+n.slice(1).map(t).join(",")+")")}function n(t,n,r){return function(i){return e(t,i,n,r)}}var r="new Date";return{isNaN:"isNaN",isFinite:"isFinite",abs:"Math.abs",acos:"Math.acos",asin:"Math.asin",atan:"Math.atan",atan2:"Math.atan2",ceil:"Math.ceil",cos:"Math.cos",exp:"Math.exp",floor:"Math.floor",log:"Math.log",max:"Math.max",min:"Math.min",pow:"Math.pow",random:"Math.random",round:"Math.round",sin:"Math.sin",sqrt:"Math.sqrt",tan:"Math.tan",clamp:function(e){e.length<3&&P("Missing arguments to clamp function."),e.length>3&&P("Too many arguments to clamp function.");var n=e.map(t);return"Math.max("+n[1]+", Math.min("+n[2]+","+n[0]+"))"},now:"Date.now",utc:"Date.UTC",datetime:r,date:n("getDate",r,0),day:n("getDay",r,0),year:n("getFullYear",r,0),month:n("getMonth",r,0),hours:n("getHours",r,0),minutes:n("getMinutes",r,0),seconds:n("getSeconds",r,0),milliseconds:n("getMilliseconds",r,0),time:n("getTime",r,0),timezoneoffset:n("getTimezoneOffset",r,0),utcdate:n("getUTCDate",r,0),utcday:n("getUTCDay",r,0),utcyear:n("getUTCFullYear",r,0),utcmonth:n("getUTCMonth",r,0),utchours:n("getUTCHours",r,0),utcminutes:n("getUTCMinutes",r,0),utcseconds:n("getUTCSeconds",r,0),utcmilliseconds:n("getUTCMilliseconds",r,0),length:n("length",null,-1),indexof:n("indexOf",null),lastindexof:n("lastIndexOf",null),slice:n("slice",null),parseFloat:"parseFloat",parseInt:"parseInt",upper:n("toUpperCase","String",0),lower:n("toLowerCase","String",0),substring:n("substring","String"),replace:n("replace","String"),
regexp:"RegExp",test:n("test","RegExp"),"if":function(e){e.length<3&&P("Missing arguments to if function."),e.length>3&&P("Too many arguments to if function.");var n=e.map(t);return"("+n[0]+"?"+n[1]+":"+n[2]+")"}}}function Ub(t){var e={};return function(n,r){return(e[r]||(e[r]=t(r)))(n)}}function Fb(t,e,n){return RP.setMonth(t),RP.setDate(e),zP(RP,n)}function jb(t){return Fb(t,1,"%B")}function Ib(t){return Fb(t,1,"%b")}function $b(t){return Fb(0,2+t,"%A")}function Bb(t){return Fb(0,2+t,"%a")}function Yb(t){return 1+~~(new Date(t).getMonth()/3)}function Gb(t){return 1+~~(new Date(t).getUTCMonth()/3)}function Wb(t,e,n){try{t[e].apply(t,["EXPRESSION"].concat([].slice.call(n)))}catch(e){t.warn(e)}return n[n.length-1]}function Hb(){return Wb(this.context.dataflow,"warn",arguments)}function Xb(){return Wb(this.context.dataflow,"info",arguments)}function Vb(){return Wb(this.context.dataflow,"debug",arguments)}function Jb(t){var e=this.context.group,n=!1;if(e)for(;t;){if(t===e){n=!0;break}t=t.mark.group}return n}function Zb(t,e,n){var r,i=t[0],a=t[1];return a<i&&(r=a,a=i,i=r),r=a-i,r>=n-e?[e,n]:[Math.min(Math.max(i,e),n-r),Math.min(Math.max(a,r),n)]}function Qb(){return"Math.sqrt(Math.pow(event.touches[0].clientX - event.touches[1].clientX, 2) + Math.pow(event.touches[0].clientY - event.touches[1].clientY, 2))"}function Kb(){return"Math.atan2(event.touches[1].clientY - event.touches[0].clientY,event.touches[1].clientX - event.touches[0].clientX)"}function t_(){return PP?PP.screen:{}}function e_(){return PP?[PP.innerWidth,PP.innerHeight]:[void 0,void 0]}function n_(t){return t[t.length-1]-t[0]||0}function r_(t,e){var n;return Y(t)?t:q(t)?(n=e.scales[t])&&n.value:void 0}function i_(t,e,n){var r=UP+n;if(!e.hasOwnProperty(r))try{e[r]=t.scaleRef(n)}catch(t){}}function a_(t,e,n,r){if(e[0].type===DP)i_(n,r,e[0].value);else if(e[0].type===LP)for(t in n.scales)i_(n,r,t)}function o_(t,e){var n=r_(t,(e||this).context);return n&&n.range?n.range():[]}function u_(t,e){var n=r_(t,(e||this).context);return n?n.domain():[]}function s_(t,e){var n=r_(t,(e||this).context);return n&&n.bandwidth?n.bandwidth():0}function f_(t,e,n){return Gu(t||0,e||0,n||0)}function c_(t,e){var n=r_(t,(e||this).context);return n?n.copy():void 0}function l_(t,e,n){var r=r_(t,(n||this).context);return r?r(e):void 0}function h_(t,e,n){var r=r_(t,(n||this).context);return r?XM(e)?(r.invertRange||r.invert)(e):(r.invert||r.invertExtent)(e):void 0}function d_(t,e,n,r){var i=gn(e,n),a=t.domain(),o=a[0],u=a[a.length-1],s=fc(t,o,u);t.ticks&&(a=t.ticks(+r||15),o!==a[0]&&a.unshift(o),u!==a[a.length-1]&&a.push(u));for(var f=0,c=a.length;f<c;++f)i.stop(s(a[f]),t(a[f]));return i}function p_(t){return function(e,n,r){var i=r_(e,(r||this).context);return i&&i.path[t](n)}}function g_(t){var e=this.context.data[t];return e?e.values.value:[]}function v_(t,e,n,r){e[0].type!==DP&&P("First argument to data functions must be a string literal.");var i=e[0].value,a=FP+i;r.hasOwnProperty(a)||(r[a]=n.getData(i).tuplesRef())}function m_(t,e,n){var r=this.context.data[t]["index:"+e],i=r?r.value.get(n):void 0;return i?i.count:i}function y_(t,e,n,r){e[0].type!==DP&&P("First argument to indata must be a string literal."),e[1].type!==DP&&P("Second argument to indata must be a string literal.");var i=e[0].value,a=e[1].value,o=qP+a;r.hasOwnProperty(o)||(r[o]=n.getData(i).indataRef(n,a))}function b_(t){return t.data}function __(t,e){var n=g_.call(e,t);return n.root&&n.root.lookup||BP}function x_(t,e,n){var r=__(t,this),i=r[e],a=r[n];return i&&a?i.path(a).map(b_):void 0}function w_(t,e){var n=__(t,this)[e];return n?n.ancestors().map(b_):void 0}function M_(t,e){var n,r=e[0],i=e[e.length-1];return r>i&&(n=r,r=i,i=n),r<=t&&t<=i}function k_(t,e,n){if(t){var r=this.context.dataflow,i=t.mark.source;r.pulse(i,r.changeset().encode(t,e))}return void 0!==n?n:t}function E_(t){return function(e){for(var n in t)if("_id"!==n&&e[n]!==t[n])return!1;return!0}}function S_(t,e,n,r,i,a){var o,u,s=this.context.dataflow,f=this.context.data[t],c=f.input,l=f.changes,h=s.stamp();if(!1===s._trigger||!(c.value.length||e||r))return 0;if((!l||l.stamp<h)&&(f.changes=l=s.changeset(),l.stamp=h,s.runAfter(function(){f.modified=!0,s.pulse(c,l).run()})),n&&(o=!0===n?tk:XM(n)||null!=n._id?n:E_(n),l.remove(o)),e&&l.insert(e),r&&(o=E_(r),c.value.some(o)?l.remove(o):l.insert(r)),i)for(u in a)l.modify(i,u,a[u]);return 1}function A_(t,e){for(var n,r=e.fields,i=e.values,a=e.getter||(e.getter=[]),o=e.bins,u=r.length,s=0;s<u;++s)if(a[s]=a[s]||F(r[s]),n=a[s](t),Q(n)&&(n=ft(n)),Q(i[s])&&(i[s]=ft(i[s])),o&&o[r[s]]){if(Q(i[s][0])&&(i[s]=i[s].map(ft)),!M_(n,i[s]))return!1}else if(n!==i[s])return!1;return!0}function C_(t,e){for(var n,r,i,a=e.intervals,o=a.length,u=0;u<o;++u){if(r=a[u].extent,n=a[u].getter||(a[u].getter=F(a[u].field)),i=n(t),!r||r[0]===r[1])return!0;if(Q(i)&&(i=ft(i)),Q(r[0])&&(r=a[u].extent=r.map(ft)),K(r[0])&&!M_(i,r))return!1;if(q(r[0])&&r.indexOf(i)<0)return!1}return!0}function N_(t,e,n,r,i,a){for(var o,u,s=this.context.data[t],f=s?s.values.value:[],c=r!==YP,l=f.length,h=0;h<l;++h)if(o=f[h],u=e===o.unit,!(i===WP&&u||i===GP&&!u)&&(u=a(n,o),c^u))return u;return!l||c}function z_(t,e,n,r,i){return N_.call(this,t,e,n,r,i,A_)}function T_(t,e,n,r,i){return N_.call(this,t,e,n,r,i,C_)}function O_(t,e,n,r){var i,a,o,u,s=this.context.data[t],f=s?s.values.value:[],c=f[0],l=0;if(c){for(i=e?c.encodings.length:c.fields.length;l<i;++l)if(e&&c.encodings[l]===e||n&&c.fields[l]===n){a=l,u=c.bins&&c.bins[c.fields[l]];break}return o=f.reduce(function(t,e){return t.push({unit:e.unit,value:e.values[a]}),t},[]),u?D_(o,r):P_(o,r)}}function R_(t,e,n,r){var i,a,o,u,s,f=this.context.data[t],c=f?f.values.value:[],l=c[0],h=0;if(l){for(i=l.intervals.length;h<i;++h)if(a=l.intervals[h],e&&a.encoding===e||n&&a.field===n){o=h,s=a.extent.length>2;break}return u=c.reduce(function(t,e){var n=e.intervals[o].extent,r=s?n.map(function(t){return{unit:e.unit,value:t}}):{unit:e.unit,value:n};return s?(t.push.apply(t,r),t):(t.push(r),t)},[]),s?P_(u,r):D_(u,r)}}function P_(t,e){for(var n,r,i,a,o={},u=0,s={},f=[],c=0,l=t.length;c<l;++c)n=t[c],r=n.unit,a=n.value,o[r]||(o[r]=++u),(i=s[a])||(s[a]=i={value:a,units:{},count:0}),i.units[r]||(i.units[r]=++i.count);for(a in s)i=s[a],e!==YP&&i.count!==u||f.push(i.value);return f.length?f:void 0}function D_(t,e){for(var n,r,i,a,o=e===YP?L_:q_,u=0,s=t.length;u<s;++u)n=t[u].value,Q(n[0])&&(n=n.map(ft)),i=n[0],a=n[1],i>a&&(a=n[1],i=n[0]),r=r?o(r,i,a):[i,a];return r&&r.length&&+r[0]!=+r[1]?r:void 0}function L_(t,e,n){return t[0]>e&&(t[0]=e),t[1]<n&&(t[1]=n),t}function q_(t,e,n){return n<t[0]||t[1]<e?[]:(t[0]<e&&(t[0]=e),t[1]>n&&(t[1]=n),t)}function U_(t,e,n){return 1===arguments.length?HP[t]:(HP[t]=e,n&&(ZP[t]=n),eD&&(eD.functions[t]=JP+t),this)}function F_(t){var e=qb(t);XP.forEach(function(t){e[t]=VP+t});for(var n in HP)e[n]=JP+n;return e}function j_(t,e,n){var r,i,a={};try{r=Lb(t)}catch(e){P("Expression parse error: "+U(t))}return r.visit(function(t){if("CallExpression"===t.type){var n=t.callee.name,r=tD.visitors[n];r&&r(n,t.arguments,e,a)}}),i=eD(r),i.globals.forEach(function(t){var n=nD+t;!a.hasOwnProperty(n)&&e.getSignal(t)&&(a[n]=e.signalRef(t))}),{$expr:n?n+"return("+i.code+");":i.code,$fields:i.fields,$params:a}}function I_(t,e){return t.signal?e.getSignal(t.signal).id:t.scale?e.getScale(t.scale).id:B_(t,e)}function $_(t){return t===iD?rD:t||rD}function B_(t,e){return(t.merge?Y_:t.stream?G_:t.type?W_:P("Invalid stream specification: "+U(t)))(t,e)}function Y_(t,e){var n=t.merge.map(function(t){return B_(t,e)}),r=H_({merge:n},t,e);return e.addStream(r).id}function G_(t,e){var n=B_(t.stream,e),r=H_({stream:n},t,e);return e.addStream(r).id}function W_(t,e){var n=e.event($_(t.source),t.type),r=H_({stream:n},t,e);return 1===Object.keys(r).length?n:e.addStream(r).id}function H_(t,e,n){var r=e.between;return r&&(2!==r.length&&P('Stream "between" parameter must have 2 entries: '+U(e)),t.between=[B_(r[0],n),B_(r[1],n)]),r=e.filter?$(e.filter):[],(e.marktype||e.markname||e.markrole)&&r.push(X_(e.marktype,e.markname,e.markrole)),e.source===iD&&r.push("inScope(event.item)"),r.length&&(t.filter=j_("("+r.join(")&&(")+")").$expr),null!=(r=e.throttle)&&(t.throttle=+r),null!=(r=e.debounce)&&(t.debounce=+r),e.consume&&(t.consume=!0),t}function X_(t,e,n){var r="event.item";return r+(t&&"*"!==t?"&&"+r+".mark.marktype==='"+t+"'":"")+(n?"&&"+r+".mark.role==='"+n+"'":"")+(e?"&&"+r+".mark.name==='"+e+"'":"")}function V_(t,e,n){return QP=e||aD,KP=n||gD,Q_(t.trim()).map(K_)}function J_(t){return KP.hasOwnProperty(t)}function Z_(t,e,n,r,i){for(var a,o=0,u=t.length;e<u;++e){if(a=t[e],!o&&a===n)return e;i&&i.indexOf(a)>=0?--o:r&&r.indexOf(a)>=0&&++o}return e}function Q_(t){for(var e=[],n=0,r=t.length,i=0;i<r;)i=Z_(t,i,lD,oD+sD,uD+fD),e.push(t.substring(n,i).trim()),n=++i;if(0===e.length)throw"Empty event selector: "+t;return e}function K_(t){return"["===t[0]?tx(t):ex(t)}function tx(t){var e,n,r=t.length,i=1;if((i=Z_(t,i,uD,oD,uD))===r)throw"Empty between selector: "+t;if(e=Q_(t.substring(1,i)),2!==e.length)throw"Between selector must have two elements: "+t;if(t=t.slice(i+1).trim(),t[0]!==dD)throw"Expected '>' after between selector: "+t;return e=e.map(K_),n=K_(t.slice(1).trim()),n.between?{between:e,stream:n}:(n.between=e,n)}function ex(t){var e,n,r={source:QP},i=[],a=[0,0],o=0,u=0,s=t.length,f=0;if(t[s-1]===fD){if(!((f=t.lastIndexOf(sD))>=0))throw"Unmatched right brace: "+t;try{a=nx(t.substring(f+1,s-1))}catch(e){throw"Invalid throttle specification: "+t}t=t.slice(0,f).trim(),s=t.length,f=0}if(!s)throw t;if(t[0]===hD&&(o=++f),e=Z_(t,f,cD),e<s&&(i.push(t.substring(u,e).trim()),u=f=++e),(f=Z_(t,f,oD))===s)i.push(t.substring(u,s).trim());else if(i.push(t.substring(u,f).trim()),n=[],(u=++f)===s)throw"Unmatched left bracket: "+t;for(;f<s;){if((f=Z_(t,f,uD))===s)throw"Unmatched left bracket: "+t;if(n.push(t.substring(u,f).trim()),f<s-1&&t[++f]!==oD)throw"Expected left bracket: "+t;u=++f}if(!(s=i.length)||pD.test(i[s-1]))throw"Invalid event selector: "+t;return s>1?(r.type=i[1],o?r.markname=i[0].slice(1):J_(i[0])?r.marktype=i[0]:r.source=i[0]):r.type=i[0],"!"===r.type.slice(-1)&&(r.consume=!0,r.type=r.type.slice(0,-1)),null!=n&&(r.filter=n),a[0]&&(r.throttle=a[0]),a[1]&&(r.debounce=a[1]),r}function nx(t){var e=t.split(lD);if(!t.length||e.length>2)throw t;return e.map(function(e){var n=+e;if(n!==n)throw t;return n})}function rx(t,e,n){var r,i=t.events,a=t.update,o=t.encode,u=[],s="";i||P("Signal update missing events specification."),q(i)&&(i=V_(i)),i=$(i).filter(function(t){return t.signal||t.scale?(u.push(t),0):1}),i.length&&u.push(i.length>1?{merge:i}:i[0]),null!=o&&(a&&P("Signal encode and update are mutually exclusive."),a="encode(item(),"+U(o)+")"),s=q(a)?j_(a,e,vD):null!=a.expr?j_(a.expr,e,vD):null!=a.value?a.value:null!=a.signal?{$expr:"_.value",$params:{value:e.signalRef(a.signal)}}:P("Invalid signal update specification."),r={target:n,update:s},t.force&&(r.options={force:!0}),u.forEach(function(t){t={source:I_(t,e)},e.addUpdate(H(t,r))})}function ix(t,e){var n=e.getSignal(t.name);if(t.update){var r=j_(t.update,e);n.update=r.$expr,n.params=r.$params}t.on&&t.on.forEach(function(t){rx(t,e,n.id)})}function ax(t,e,n,r){this.id=-1,this.type=t,this.value=e,this.params=n,r&&(this.parent=r)}function ox(t,e,n,r){return new ax(t,e,n,r)}function ux(t,e){return ox("Operator",t,e)}function sx(t){var e={$ref:t.id};return t.id<0&&(t.refs=t.refs||[]).push(e),e}function fx(t,e){return e?{$field:t,$name:e}:{$field:t}}function cx(t,e){return{$compare:t,$order:e}}function lx(t){return{$key:t}}function hx(t){return L(t)?(t.order===yD?"-":"+")+dx(t.op,t.field):""}function dx(t,e){return(t&&t.signal?"$"+t.signal:t||"")+(t&&e?"_":"")+(e&&e.signal?"$"+e.signal:e||"")}function px(t){return t&&t.signal}function gx(t){return function(e,n,r){return ox(t,n,e||void 0,r)}}function vx(t){return XD.hasOwnProperty(t)}function mx(t){return"quantile"===t}function yx(t,e){var n=t.type||"linear";HD.hasOwnProperty(n)||P("Unrecognized scale type: "+U(n)),e.addScale(t.name,{type:n,domain:void 0})}function bx(t,e){var n,r=e.getScale(t.name).params;r.domain=Mx(t.domain,t,e),null!=t.range&&(r.range=Rx(t,e,r)),null!=t.interpolate&&Ox(t.interpolate,r);for(n in t)r.hasOwnProperty(n)||"name"===n||(r[n]=_x(t[n],e))}function _x(t,e){return L(t)?t.signal?e.signalRef(t.signal):P("Unsupported object: "+U(t)):t}function xx(t,e){return t.signal?e.signalRef(t.signal):t.map(function(t){return _x(t,e)})}function wx(t){P("Can not find data set: "+U(t))}function Mx(t,e,n){return t?t.signal?n.signalRef(t.signal):(XM(t)?kx:t.fields?Sx:Ex)(t,e,n):void(null==e.domainMin&&null==e.domainMax||P("No scale domain defined for domainMin/domainMax to override."))}function kx(t,e,n){return t.map(function(t){return _x(t,n)})}function Ex(t,e,n){var r=n.getData(t.data);return r||wx(t.data),vx(e.type)?r.valuesRef(n,t.field,Nx(t.sort,!1)):mx(e.type)?r.domainRef(n,t.field):r.extentRef(n,t.field)}function Sx(t,e,n){var r=t.data,i=t.fields.reduce(function(t,e){return e=q(e)?{data:r,field:e}:XM(e)||e.signal?Ax(e,n):e,t.push(e),t},[]);return(vx(e.type)?Cx:mx(e.type)?zx:Tx)(t,n,i)}function Ax(t,e){var n="_:vega:_"+GD++,r=wD({});return XM(t)?r.value={$ingest:t}:t.signal&&e.signalRef("modify("+U(n)+","+t.signal+", true)"),e.addDataPipeline(n,[r,ID({})]),{data:n,field:"data"}}function Cx(t,e,n){var r,i,a,o;return r=n.map(function(t){var n=e.getData(t.data);return n||wx(t.data),n.countsRef(e,t.field)}),i=e.add(bD({groupby:mD,ops:["sum"],fields:[e.fieldRef("count")],as:["count"],pulse:r})),a=e.add(wD({pulse:sx(i)})),o=e.add(YD({field:mD,sort:e.sortRef(Nx(t.sort,!0)),pulse:sx(a)})),sx(o)}function Nx(t,e){return t&&(t.field||t.op?t.field||"count"===t.op?e&&t.field?P("Multiple domain scales can not sort by field."):e&&t.op&&"count"!==t.op&&P("Multiple domain scales support op count only."):P("No field provided for sort aggregate op: "+t.op):L(t)?t.field="key":t={field:"key"}),t}function zx(t,e,n){var r=n.map(function(t){var n=e.getData(t.data);return n||wx(t.data),n.domainRef(e,t.field)});return sx(e.add(OD({values:r})))}function Tx(t,e,n){var r=n.map(function(t){var n=e.getData(t.data);return n||wx(t.data),n.extentRef(e,t.field)});return sx(e.add(TD({extents:r})))}function Ox(t,e){e.interpolate=_x(t.type||t),null!=t.gamma&&(e.interpolateGamma=_x(t.gamma))}function Rx(t,e,n){var r=t.range,i=e.config.range;if(r.signal)return e.signalRef(r.signal);if(q(r)){if(i&&i.hasOwnProperty(r))return t=H({},t,{range:i[r]}),Rx(t,e,n);"width"===r?r=[0,{signal:"width"}]:"height"===r?r=vx(t.type)?[0,{signal:"height"}]:[{signal:"height"},0]:P("Unrecognized scale range value: "+U(r))}else{if(r.scheme)return n.scheme=_x(r.scheme,e),r.extent&&(n.schemeExtent=xx(r.extent,e)),void(r.count&&(n.schemeCount=_x(r.count,e)));if(r.step)return void(n.rangeStep=_x(r.step,e));if(vx(t.type)&&!XM(r))return Mx(r,t,e);XM(r)||P("Unsupported range type: "+U(r))}return r.map(function(t){return _x(t,e)})}function Px(t,e){var n={};for(var r in t)"name"!==r&&(n[r]=Dx(t[r],e));e.addProjection(t.name,n)}function Dx(t,e){return XM(t)?t.map(function(t){return Dx(t,e)}):L(t)?t.signal?e.signalRef(t.signal):P("Unsupported parameter object: "+U(t)):t}function Lx(t,e){var n="";return VD[e]?n:(t.x2&&(t.x?(JD[e]&&(n+="if(o.x>o.x2)$=o.x,o.x=o.x2,o.x2=$;"),n+="o.width=o.x2-o.x;"):t.width?n+="o.x=o.x2-o.width;":n+="o.x=o.x2;"),t.xc&&(t.width?n+="o.x=o.xc-o.width/2;":n+="o.x=o.xc;"),t.y2&&(t.y?(JD[e]&&(n+="if(o.y>o.y2)$=o.y,o.y=o.y2,o.y2=$;"),n+="o.height=o.y2-o.y;"):t.height?n+="o.y=o.y2-o.height;":n+="o.y=o.y2;"),t.yc&&(t.height?n+="o.y=o.yc-o.height/2;":n+="o.y=o.yc;"),n)}function qx(t,e,n,r){function i(t,i,a,o){return"this."+t+"("+[Wx(null,i,e,n,r),Wx(null,a,e,n,r),Wx(null,o,e,n,r)].join(",")+").toString()"}return t.c?i("hcl",t.h,t.c,t.l):t.h||t.s?i("hsl",t.h,t.s,t.l):t.l||t.a?i("lab",t.l,t.a,t.b):t.r||t.g||t.b?i("rgb",t.r,t.g,t.b):null}function Ux(t,e,n,r){var i=j_(t,e);return i.$fields.forEach(function(t){r[t]=1}),H(n,i.$params),i.$expr}function Fx(t,e,n,r){return jx(L(t)?t:{datum:t},e,n,r)}function jx(t,e,n,r){var i,a,o;if(t.signal)i="datum",o=Ux(t.signal,e,n,r);else if(t.group||t.parent){for(a=Math.max(1,t.level||1),i="item";a-- >0;)i+=".mark.group";t.parent?(o=t.parent,i+=".datum"):o=t.group}else t.datum?(i="datum",o=t.datum):P("Invalid field reference: "+U(t));return t.signal||(q(o)?(r[o]=1,o=D(o).map(U).join("][")):o=jx(o,e,n,r)),i+"["+o+"]"}function Ix(t,e,n,r,i){var a,o,u,s=Bx(t.scale,n,r,i);return null!=t.range?(a=+t.range,o=s+".range()",e=0===a?o+"[0]":"($="+o+","+(1===a?"$[$.length-1]":"$[0]+"+a+"*($[$.length-1]-$[0])")+")"):(void 0!==e&&(e=s+"("+e+")"),t.band&&(u=$x(t.scale,n))&&(o=s+".bandwidth",a=+t.band,a=o+"()"+(1===a?"":"*"+a),u<0&&(a="("+o+"?"+a+":0)"),e=(e?e+"+":"")+a,t.extra&&(e="(datum.extra?"+s+"(datum.extra.value):"+e+")")),null==e&&(e="0")),e}function $x(t,e){if(!q(t))return-1;var n=e.scaleType(t);return"band"===n||"point"===n?1:0}function Bx(t,e,n,r){var i;if(q(t))i=UP+t,n.hasOwnProperty(i)||(n[i]=e.scaleRef(t)),i=U(i);else{for(i in e.scales)n[UP+i]=e.scaleRef(i);i=U(UP)+"+"+(t.signal?"("+Ux(t.signal,e,n,r)+")":Fx(t,e,n,r))}return"_["+i+"]"}function Yx(t,e,n,r){return"this.gradient("+Bx(t.gradient,e,n,r)+","+U(t.start)+","+U(t.stop)+","+U(t.count)+")"}function Gx(t,e,n,r){return L(t)?"("+Wx(null,t,e,n,r)+")":t}function Wx(t,e,n,r,i){if(null!=e.gradient)return Yx(e,n,r,i);var a=e.signal?Ux(e.signal,n,r,i):e.color?qx(e.color,n,r,i):null!=e.field?Fx(e.field,n,r,i):void 0!==e.value?U(e.value):void 0;return null!=e.scale&&(a=Ix(e,a,n,r,i)),void 0===a&&(a=null),null!=e.exponent&&(a="Math.pow("+a+","+Gx(e.exponent,n,r,i)+")"),null!=e.mult&&(a+="*"+Gx(e.mult,n,r,i)),null!=e.offset&&(a+="+"+Gx(e.offset,n,r,i)),e.round&&(a="Math.round("+a+")"),a}function Hx(t,e,n){return t+"["+U(e)+"]="+n+";"}function Xx(t,e,n,r,i){var a="";return e.forEach(function(e){var o=Wx(t,e,n,r,i);a+=e.test?Ux(e.test,n,r,i)+"?"+o+":":o}),Hx("o",t,a)}function Vx(t,e,n,r){var i,a,o,u={},s="var o=item,datum=o.datum,$;";for(i in t)a=t[i],XM(a)?s+=Xx(i,a,r,n,u):(o=Wx(i,a,r,n,u),s+=Hx("o",i,o));return s+=Lx(t,e),s+="return 1;",{$expr:s,$fields:Object.keys(u),$output:Object.keys(t)}}function Jx(t){return L(t)?t:{value:t}}function Zx(t,e,n){return null!=n?(t[e]={value:n},1):0}function Qx(t,e,n){for(var r in e)n&&n.hasOwnProperty(r)||(t[r]=H(t[r]||{},e[r]));return t}function Kx(t,e,n,r,i){var a,o;i=i||{},i.encoders={$encode:a={}},t=tw(t,e,n,r.config);for(o in t)a[o]=Vx(t[o],e,i,r);return i}function tw(t,e,n,r){var i,a;"legend"!=n&&0!==String(n).indexOf("axis")||(n=null),r=n===QD?r.group:n===ZD||r[e=n]?H({},r.mark,r[e]):{},i={};for(a in r)ew(a,t)||("fill"===a||"stroke"===a)&&(ew("fill",t)||ew("stroke",t))||(i[a]={value:r[a]});return t=H({},t),t.enter=H(i,t.enter),t}function ew(t,e){return e.enter&&e.enter[t]||e.update&&e.update[t]}function nw(t,e,n,r,i,a){return{type:t,name:a?a.name:void 0,role:e,key:n,from:r,interactive:!(!a||!a.interactive),encode:Qx(i,a,dL)}}function rw(t,e,n){var r,i,a={value:0},o={};return o.enter=r={opacity:a,x:a,y:a},Zx(r,"width",e.gradientWidth),Zx(r,"height",e.gradientHeight),Zx(r,"stroke",e.gradientStrokeColor),Zx(r,"strokeWidth",e.gradientStrokeWidth),o.exit={opacity:a},o.update=i={x:a,y:a,fill:{gradient:t},opacity:{value:1}},Zx(i,"width",e.gradientWidth),Zx(i,"height",e.gradientHeight),nw(gL,sL,void 0,void 0,o,n)}function iw(t,e,n,r){var i,a,o={value:0},u={};return u.enter=i={opacity:o,text:{field:kL}},Zx(i,"fill",e.labelColor),Zx(i,"font",e.labelFont),Zx(i,"fontSize",e.labelFontSize),Zx(i,"baseline",e.gradientLabelBaseline),Zx(i,"limit",e.gradientLabelLimit),u.exit={opacity:o},u.update=a={opacity:{value:1}},i.x=a.x={field:SL,mult:e.gradientWidth},i.y=a.y={value:e.gradientHeight,offset:e.gradientLabelOffset},i.align=a.align={signal:TL},nw(yL,fL,SL,r,u,n)}function aw(t,e,n,r){var i,a,o={value:0},u={};return u.enter=i={opacity:o,text:{field:kL}},Zx(i,"align",e.labelAlign),Zx(i,"baseline",e.labelBaseline),Zx(i,"fill",e.labelColor),Zx(i,"font",e.labelFont),Zx(i,"fontSize",e.labelFontSize),Zx(i,"limit",e.labelLimit),u.exit={opacity:o},u.update=a={opacity:{value:1}},i.x=a.x={field:EL,offset:e.labelOffset},i.y=a.y={field:AL,mult:.5,offset:{field:CL,offset:{field:{group:"entryPadding"},mult:{field:ML}}}},nw(yL,fL,NL,r,u,n)}function ow(t,e,n,r){var i,a,o={value:0},u={};return u.enter=i={opacity:o},Zx(i,"shape",e.symbolType),Zx(i,"size",e.symbolSize),Zx(i,"strokeWidth",e.symbolStrokeWidth),t.fill||Zx(i,"stroke",e.symbolColor),u.exit={opacity:o},u.update=a={opacity:{value:1}},i.x=a.x={field:EL,mult:.5},i.y=a.y={field:AL,mult:.5,offset:{field:CL,offset:{field:{group:"entryPadding"},mult:{field:ML}}}},zL.forEach(function(e){t[e]&&(a[e]=i[e]={scale:t[e],field:NL})}),nw(mL,cL,NL,r,u,n)}function uw(t,e,n,r){var i,a={value:0},o=t.title,u={};return u.enter=i={x:{field:{group:"padding"}},y:{field:{group:"padding"}},opacity:a},Zx(i,"align",e.titleAlign),Zx(i,"baseline",e.titleBaseline),Zx(i,"fill",e.titleColor),Zx(i,"font",e.titleFont),Zx(i,"fontSize",e.titleFontSize),Zx(i,"fontWeight",e.titleFontWeight),Zx(i,"limit",e.titleLimit),u.exit={opacity:a},u.update={opacity:{value:1},text:o&&o.signal?{signal:o.signal}:{value:o+""}},nw(yL,lL,null,r,u,n)}function sw(t,e,n,r,i,a){return{type:pL,name:e,role:t,from:n,interactive:r,encode:i,marks:a}}function fw(t){var e=t.role||"";return e.indexOf("axis")&&e.indexOf("legend")?t.type===pL?KD:e||ZD:e}function cw(t){return{clip:t.clip||!1,interactive:!1!==t.interactive,marktype:t.type,name:t.name||void 0,role:t.role||fw(t),zindex:+t.zindex||void 0}}function lw(t){return t}function hw(t,e){var n=Bo(t.type);n||P("Unrecognized transform type: "+U(t.type));var r=ox(n.type,null,dw(n,t,e));return t.signal&&e.addSignal(t.signal,e.proxy(r)),r.metadata=n.metadata||{},r}function dw(t,e,n){var r,i,a,o={};for(i=0,a=t.params.length;i<a;++i)r=t.params[i],o[r.name]=pw(r,e,n);return o}function pw(t,e,n){var r=t.type,i=e[t.name];return"index"===r?vw(t,e,n):void 0===i?void(t.required&&P("Missing required "+U(e.type)+" parameter: "+U(t.name))):"param"===r?mw(t,e,n):"projection"===r?n.projectionRef(e[t.name]):t.array&&!px(i)?i.map(function(e){return gw(t,e,n)}):gw(t,i,n)}function gw(t,e,n){var r=t.type;if(px(e))return ww(r)?P("Expression references can not be signals."):Mw(r)?n.fieldRef(e):kw(r)?n.compareRef(e):n.signalRef(e.signal);var i=t.expr||Mw(r);return i&&bw(e)?j_(e.expr,n):i&&_w(e)?fx(e.field):ww(r)?j_(e,n):xw(r)?sx(n.getData(e).values):Mw(r)?fx(e):kw(r)?n.compareRef(e):e}function vw(t,e,n){return q(e.from)||P('Lookup "from" parameter must be a string literal.'),n.getData(e.from).lookupRef(n,e.key)}function mw(t,e,n){var r=e[t.name];return t.array?(XM(r)||P("Expected an array of sub-parameters. Instead: "+U(r)),r.map(function(e){return yw(t,e,n)})):yw(t,r,n)}function yw(t,e,n){var r,i,a,o,u;for(o=0,u=t.params.length;o<u;++o){i=t.params[o];for(a in i.key)if(i.key[a]!==e[a]){i=null;break}if(i)break}return i||P("Unsupported parameter: "+U(e)),r=H(dw(i,e,n),i.key),sx(n.add(PD(r)))}function bw(t){return t&&t.expr}function _w(t){return t&&t.field}function xw(t){return"data"===t}function ww(t){return"expr"===t}function Mw(t){return"field"===t}function kw(t){return"compare"===t}function Ew(t,e,n){var r,i,a,o,u;return t?(r=t.facet)&&(e||P("Only group marks can be faceted."),null!=r.field?o=u=sx(n.getData(r.data).output):(i=n.keyRef(r.groupby),t.data?u=sx(n.getData(t.data).aggregate):(a=hw(H({type:"aggregate",groupby:$(r.groupby)},r.aggregate)),a.params.key=i,a.params.pulse=sx(n.getData(r.data).output),o=u=sx(n.add(a))))):o=sx(n.add(wD(null,[{}]))),o||(o=t.$ref?t:sx(t.mark?n.getData(lw(t.mark)).output:n.getData(t.data).output)),{key:i,pulse:o,parent:u}}function Sw(t,e,n,r,i){this.scope=t,this.input=e,this.output=n,this.values=r,this.aggregate=i,this.index={}}function Aw(t){return q(t)?t:null}function Cw(t,e,n){var r,i=dx(n.op,n.field);if(e.ops){for(var a=0,o=e.as.length;a<o;++a)if(e.as[a]===i)return}else e.ops=["count"],e.fields=[null],e.as=["count"];n.op&&(e.ops.push((r=n.op.signal)?t.signalRef(r):n.op),e.fields.push(t.fieldRef(n.field)),e.as.push(i))}function Nw(t,e,n,r,i,a,o){var u,s,f=e[n]||(e[n]={}),c=hx(a),l=Aw(i);if(null!=l&&(t=e.scope,l+=c?"|"+c:"",u=f[l]),!u){var h=a?{field:mD,pulse:e.countsRef(t,i,a)}:{field:t.fieldRef(i),pulse:sx(e.output)};c&&(h.sort=t.sortRef(a)),s=t.add(ox(r,void 0,h)),o&&(e.index[i]=s),u=sx(s),null!=l&&(f[l]=u)}return u}function zw(t,e,n){var r,i,a,o,u=t.from.facet,s=u.name,f=sx(e.getData(u.data).output);u.name||P("Facet must have a name: "+U(u)),u.data||P("Facet must reference a data set: "+U(u)),u.field?o=e.add(DD({field:e.fieldRef(u.field),pulse:f})):u.groupby?o=e.add(SD({key:e.keyRef(u.groupby),group:sx(e.proxy(n.parent)),pulse:f})):P("Facet must specify groupby or field: "+U(u)),r=e.fork(),i=r.add(wD()),a=r.add(ID({pulse:sx(i)})),r.addData(s,new Sw(r,i,i,a)),r.addSignal("parent",null),o.params.subflow={$subflow:Zw(t,r).toRuntime()}}function Tw(t,e,n){var r=e.add(DD({pulse:n.pulse})),i=e.fork();i.add(ID()),i.addSignal("parent",null),r.params.subflow={$subflow:Zw(t,i).toRuntime()}}function Ow(t,e,n){var r,i,a=t.remove,o=t.insert,u=t.toggle,s=t.modify,f=t.values,c=e.add(ux());r="if("+t.trigger+',modify("'+n+'",'+[o,a,u,s,f].map(function(t){return null==t?"null":t}).join(",")+"),0)",i=j_(r,e),c.update=i.$expr,c.params=i.$params}function Rw(t,e){var n,r,i,a,o,u,s,f,c,l,h,d,p,g=fw(t),v=t.type===pL,m=t.from&&t.from.facet,y=t.layout||g===KD||g===QD,b=g===ZD||y||m;i=Ew(t.from,v,e),r=e.add(kD({key:i.key||(t.key?fx(t.key):void 0),pulse:i.pulse,clean:!v})),c=sx(r),r=a=e.add(wD({pulse:c})),r=e.add(zD({markdef:cw(t),context:{$context:!0},groups:e.lookup(),parent:e.signals.parent?e.signalRef("parent"):null,index:e.markpath(),pulse:sx(r)})),l=sx(r),r=e.add(ED(Kx(t.encode,t.type,g,e,{pulse:l}))),r.params.parent=e.encode(),t.transform&&t.transform.forEach(function(t){var n=hw(t,e);(n.metadata.generates||n.metadata.changes)&&P("Mark transforms should not generate new data."),n.params.pulse=sx(r),e.add(r=n)}),t.sort&&(r=e.add($D({sort:e.compareRef(t.sort),pulse:sx(r)}))),h=sx(r),(m||y)&&(y=e.add(BD({layout:e.objectProperty(t.layout),legendMargin:e.config.legendMargin,mark:l,pulse:h})),d=sx(y)),o=e.add(xD({mark:l,pulse:d||h})),p=sx(o),v&&(b&&(n=e.operators,n.pop(),y&&n.pop()),e.pushState(h,d||p,c),m?zw(t,e,i):b?Tw(t,e,i):Zw(t,e),e.popState(),b&&(y&&n.push(y),n.push(o))),t.overlap&&(p=sx(e.add(RD({method:!0===t.overlap?"parity":t.overlap,pulse:p})))),u=e.add(FD({pulse:p})),s=e.add(ID({pulse:p},void 0,e.parent())),null!=t.name&&(f=lw(t.name),e.addData(f,new Sw(e,a,u,s)),t.on&&t.on.forEach(function(t){(t.insert||t.remove||t.toggle)&&P("Marks only support modify triggers."),Ow(t,e,f)}))}function Pw(t,e){var n,r,i,a,o,u,s,f,c=t.type||"symbol",l=e.config.legend,h=t.name||void 0,d=t.encode||{},p=!!t.interactive,g=t.size||t.shape||t.fill||t.stroke||t.strokeDash||t.opacity;return g||P("Missing valid scale for legend."),n={orient:Dw(t.orient,l.orient),title:null!=t.title},r=sx(e.add(wD(null,[n]))),u=Qx({enter:qw(l),update:{offset:Jx(Dw(t.offset,l.offset)),padding:Jx(Dw(t.padding,l.padding)),titlePadding:Jx(Dw(t.titlePadding,l.titlePadding))}},d.legend),s={update:{x:{field:{group:"padding"}},y:{field:{group:"padding"}},entryPadding:Jx(Dw(t.entryPadding,l.entryPadding))}},"gradient"===c?(i=sx(e.add(ND({type:"gradient",scale:e.scaleRef(g),count:e.property(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),f=[rw(g,l,d.gradient),iw(t,l,d.labels,i)]):(i=sx(e.add(ND({size:Lw(t,l,d.labels),scale:e.scaleRef(g),count:e.property(t.tickCount),values:e.property(t.values),formatSpecifier:e.property(t.format)}))),f=[ow(t,l,d.symbols,i),aw(t,l,d.labels,i)]),f=[sw(uL,null,r,p,s,f)],n.title&&(o=uw(t,l,d.title,r),s.update.y.offset={field:{group:"titlePadding"},offset:o.encode.update.fontSize||o.encode.enter.fontSize},f.push(o)),a=sw(oL,h,r,p,u,f),t.zindex&&(a.zindex=t.zindex),Rw(a,e)}function Dw(t,e){return null!=t?t:e}function Lw(t,e,n){var r,i=+e.symbolSize;return r=n&&n.update&&n.update.fontSize,r||(r=n&&n.enter&&n.enter.fontSize),r&&(r=r.value),r||(r=+e.labelFontSize),t.size?{$expr:"Math.max(Math.ceil(Math.sqrt(_.scale(datum))),"+r+")"}:Math.max(Math.ceil(Math.sqrt(i)),r)}function qw(t){var e={};return Zx(e,"fill",t.fillColor)+Zx(e,"stroke",t.strokeColor)+Zx(e,"strokeWidth",t.strokeWidth)+Zx(e,"strokeDash",t.strokeDash)+Zx(e,"cornerRadius",t.cornerRadius)?e:void 0}function Uw(t,e){t=q(t)?{text:t}:t;var n,r,i,a=e.config.title,o=H({},t.encode);return n={orient:null!=t.orient?t.orient:a.orient},r=sx(e.add(wD(null,[n]))),o.name=t.name,o.interactive=t.interactive,i=Fw(t,a,o,r),t.zindex&&(i.zindex=t.zindex),Rw(i,e)}function Fw(t,e,n,r){var i,a,o,u,s,f,c=t.text,l=t.orient||e.orient,h=t.anchor||e.anchor,d=l===_L||l===bL?-1:1,p=l===bL||l===wL,g={group:p?"width":"height"},v={};return v.enter=i={opacity:{value:0}},Zx(i,"fill",e.color),Zx(i,"font",e.font),Zx(i,"fontSize",e.fontSize),Zx(i,"fontWeight",e.fontWeight),v.exit={opacity:{value:0}},v.update=a={opacity:{value:1},text:L(c)?c:{value:c+""},offset:Jx((null!=t.offset?t.offset:e.offset)||0)},"start"===h?(s=0,f="left"):"end"===h?(s=1,f="right"):(s=.5,f="center"),o={field:g,mult:s},u=d<0?{value:0}:p?{field:{group:"height"}}:{field:{group:"width"}},p?(a.x=o,a.y=u,a.angle={value:0},a.baseline={value:l===bL?"bottom":"top"}):(a.x=u,a.y=o,a.angle={value:90*d},a.baseline={value:"bottom"}),a.align={value:f},a.limit={field:g},Zx(a,"angle",e.angle),Zx(a,"baseline",e.baseline),Zx(a,"limit",e.limit),nw(yL,hL,null,r,v,n)}function jw(t,e){var n=[];t.transform&&t.transform.forEach(function(t){n.push(hw(t,e))}),t.on&&t.on.forEach(function(n){Ow(n,e,t.name)}),e.addDataPipeline(t.name,Iw(t,e,n))}function Iw(t,e,n){var r,i,a,o,u,s=[],f=null,c=!1,l=!1;for(t.values?s.push(f=$w({$ingest:t.values,$format:t.format})):t.url?s.push(f=$w({$request:t.url,$format:t.format})):t.source&&(r=e.getData(t.source),f=r.output,s.push(null)),i=0,a=n.length;i<a;++i)o=n[i],u=o.metadata,f||u.source||s.push(f=$w()),s.push(o),u.generates&&(l=!0),u.modifies&&!l&&(c=!0),u.source?f=o:u.changes&&(f=null);return r&&(s[0]=UD({derive:c,pulse:sx(r.output)}),c&&s.splice(1,0,$w())),f||s.push($w()),s.push(ID({})),s}function $w(t){var e=wD({},t);return e.metadata={source:!0},e}function Bw(t,e){var n=e.config,r=t.orient,i=r===bL||r===wL?n.axisX:n.axisY,a=n["axis"+r[0].toUpperCase()+r.slice(1)],o="band"===e.scaleType(t.scale)&&n.axisBand;return i||a||o?H({},n.axis,i,a,o):n.axis}function Yw(t,e,n,r){var i,a,o,u,s,f=t.orient,c={value:0},l={};return l.enter=i={opacity:c},Zx(i,"stroke",e.domainColor),Zx(i,"strokeWidth",e.domainWidth),l.exit={opacity:c},l.update=a={opacity:{value:1}},f===bL||f===wL?(o="x",s="y"):(o="y",s="x"),u=o+"2",i[s]=c,a[o]=i[o]=Gw(t,0),a[u]=i[u]=Gw(t,1),nw(vL,eL,null,r,l,n)}function Gw(t,e){return{scale:t.scale,range:e}}function Ww(t,e,n,r){var i,a,o,u,s,f,c,l,h=t.orient,d=t.gridScale,p=h===_L||h===bL?1:-1,g=p*t.offset||0,v={value:0},m={};return m.enter=i={opacity:v},Zx(i,"stroke",e.gridColor),Zx(i,"strokeWidth",e.gridWidth),Zx(i,"strokeDash",e.gridDash),m.exit=a={opacity:v},m.update=o={},Zx(o,"opacity",e.gridOpacity),u={scale:t.scale,field:NL,band:e.bandPosition,round:e.tickRound,extra:e.tickExtra,offset:e.tickOffset},h===bL||h===wL?(s="x",f="y",l="height"):(s="y",f="x",l="width"),c=f+"2",o[s]=i[s]=a[s]=u,d?(i[f]={scale:d,range:0,mult:p,offset:g},o[c]=i[c]={scale:d,range:1,mult:p,offset:g}):(i[f]={value:g},o[c]=i[c]={signal:l,mult:p,offset:g}),nw(vL,nL,NL,r,m,n)}function Hw(t,e,n,r,i){var a,o,u,s,f,c=t.orient,l=c===_L||c===bL?-1:1,h={value:0},d={};return d.enter=a={opacity:h},Zx(a,"stroke",e.tickColor),Zx(a,"strokeWidth",e.tickWidth),d.exit=o={opacity:h},d.update=u={opacity:{value:1}},s=Jx(i),s.mult=l,f={scale:t.scale,field:NL,band:e.bandPosition,round:e.tickRound,extra:e.tickExtra,offset:e.tickOffset},c===bL||c===wL?(u.y=a.y=h,u.y2=a.y2=s,u.x=a.x=o.x=f):(u.x=a.x=h,u.x2=a.x2=s,u.y=a.y=o.y=f),nw(vL,iL,NL,r,d,n)}function Xw(t,e,n,r,i){var a,o,u,s,f,c=t.orient,l=t.labelOverlap,h=c===_L||c===bL?-1:1,d=null!=t.labelPadding?t.labelPadding:e.labelPadding,p={value:0},g={};return g.enter=a={opacity:p},Zx(a,"angle",e.labelAngle),Zx(a,"fill",e.labelColor),Zx(a,"font",e.labelFont),Zx(a,"fontSize",e.labelFontSize),Zx(a,"limit",e.labelLimit),g.exit=o={opacity:p},g.update=u={opacity:{value:1},text:{field:kL}},s=Jx(i),s.mult=h,s.offset=Jx(d),s.offset.mult=h,f={scale:t.scale,field:NL,band:.5,offset:e.tickOffset},c===bL||c===wL?(u.y=a.y=s,u.x=a.x=o.x=f,Zx(u,"align","center"),Zx(u,"baseline",c===bL?"bottom":"top")):(u.x=a.x=s,u.y=a.y=o.y=f,Zx(u,"align",c===xL?"left":"right"),Zx(u,"baseline","middle")),t=nw(yL,rL,NL,r,g,n),t.overlap=l||e.labelOverlap,t}function Vw(t,e,n,r){var i,a,o,u=t.orient,s=t.title,f=u===_L||u===bL?-1:1,c=u===bL||u===wL,l={};return l.enter=i={opacity:{value:0}},
Zx(i,"align",e.titleAlign),Zx(i,"fill",e.titleColor),Zx(i,"font",e.titleFont),Zx(i,"fontSize",e.titleFontSize),Zx(i,"fontWeight",e.titleFontWeight),Zx(i,"limit",e.titleLimit),l.exit={opacity:{value:0}},l.update=a={opacity:{value:1},text:s&&s.signal?{signal:s.signal}:{value:s+""}},o={scale:t.scale,range:.5},c?(a.x=o,a.angle={value:0},a.baseline={value:u===bL?"bottom":"top"}):(a.y=o,a.angle={value:90*f},a.baseline={value:"bottom"}),Zx(a,"angle",e.titleAngle),Zx(a,"baseline",e.titleBaseline),!Zx(a,"x",e.titleX)&&c&&!ew(n,"x")&&(l.enter.auto={value:!0}),!Zx(a,"y",e.titleY)&&!c&&!ew(n,"y")&&(l.enter.auto={value:!0}),nw(yL,aL,null,r,l,n)}function Jw(t,e){var n,r,i,a,o,u,s,f=Bw(t,e),c=t.name||void 0,l=t.encode||{},h=!!t.interactive;return n={orient:t.orient,ticks:null!=t.ticks?!!t.ticks:f.ticks,labels:null!=t.labels?!!t.labels:f.labels,grid:null!=t.grid?!!t.grid:f.grid,domain:null!=t.domain?!!t.domain:f.domain,title:null!=t.title},r=sx(e.add(wD({},[n]))),u=Qx({update:{range:{signal:'abs(span(range("'+t.scale+'")))'},offset:Jx(t.offset||0),position:Jx(t.position||0),titlePadding:Jx(t.titlePadding||f.titlePadding),minExtent:Jx(t.minExtent||f.minExtent),maxExtent:Jx(t.maxExtent||f.maxExtent)}},l.axis),i=sx(e.add(_D({scale:e.scaleRef(t.scale),extra:f.tickExtra,count:e.property(t.tickCount),values:e.objectProperty(t.values),formatSpecifier:e.property(t.format)}))),s=[],n.grid&&s.push(Ww(t,f,l.grid,i)),n.ticks&&(a=null!=t.tickSize?t.tickSize:f.tickSize,s.push(Hw(t,f,l.ticks,i,a))),n.labels&&(a=n.ticks?a:0,s.push(Xw(t,f,l.labels,i,a))),n.domain&&s.push(Yw(t,f,l.domain,r)),n.title&&s.push(Vw(t,f,l.title,r)),o=sw(tL,c,r,h,u,s),t.zindex&&(o.zindex=t.zindex),Rw(o,e)}function Zw(t,e,n){var r=$(t.signals),i=$(t.scales);return n||r.forEach(function(t){Cy(t,e)}),$(t.projections).forEach(function(t){Px(t,e)}),i.forEach(function(t){yx(t,e)}),$(t.data).forEach(function(t){jw(t,e)}),i.forEach(function(t){bx(t,e)}),r.forEach(function(t){ix(t,e)}),$(t.axes).forEach(function(t){Jw(t,e)}),$(t.marks).forEach(function(t){Rw(t,e)}),$(t.legends).forEach(function(t){Pw(t,e)}),t.title&&Uw(t.title,e),e.parseLambdas(),e}function Qw(t,e){var n,r,i,a,o,u=e.config;return e.background=t.background||u.background,o=sx(e.root=e.add(ux())),e.addSignal("width",t.width||-1),e.addSignal("height",t.height||-1),e.addSignal("padding",Sy(t.padding,u)),$(t.signals).forEach(function(t){RL[t.name]||Cy(t,e)}),r=e.add(wD()),i=Qx({enter:{x:{value:0},y:{value:0}},update:{width:{signal:"width"},height:{signal:"height"}}},t.encode),i=e.add(ED(Kx(i,pL,QD,e,{pulse:sx(r)}))),a=e.add(BD({layout:e.objectProperty(t.layout),legendMargin:u.legendMargin,autosize:Ey(t.autosize,u),mark:o,pulse:sx(i)})),e.operators.pop(),e.pushState(sx(i),sx(a),null),Zw(t,e,!0),e.operators.push(a),n=e.add(xD({mark:o,pulse:sx(a)})),n=e.add(FD({pulse:sx(n)})),n=e.add(ID({pulse:sx(n)})),e.addData("root",new Sw(e,r,r,n)),e}function Kw(t){this.config=t,this.bindings=[],this.field={},this.signals={},this.lambdas={},this.scales={},this.events={},this.data={},this.streams=[],this.updates=[],this.operators=[],this.background=null,this._id=0,this._subid=0,this._nextsub=[0],this._parent=[],this._encode=[],this._lookup=[],this._markpath=[]}function tM(t){this.config=t.config,this.field=Object.create(t.field),this.signals=Object.create(t.signals),this.lambdas=Object.create(t.lambdas),this.scales=Object.create(t.scales),this.events=Object.create(t.events),this.data=Object.create(t.data),this.streams=[],this.updates=[],this.operators=[],this._id=0,this._subid=++t._nextsub[0],this._nextsub=t._nextsub,this._parent=t._parent.slice(),this._encode=t._encode.slice(),this._lookup=t._lookup.slice(),this._markpath=t._markpath}function eM(t){return(XM(t)?nM:rM)(t)}function nM(t){for(var e,n="[",r=0,i=t.length;r<i;++r)e=t[r],n+=(r>0?",":"")+(L(e)?e.signal||eM(e):U(e));return n+"]"}function rM(t){var e,n,r="{",i=0;for(e in t)n=t[e],r+=(++i>1?",":"")+U(e)+":"+(L(n)?n.signal||eM(n):U(n));return r+"}"}function iM(t){var e=aM();return(t||[]).forEach(function(t){var n;if(t)for(n in t)e[n]=L(e[n])?H(e[n],t[n]):e[n]=t[n]}),e}function aM(){return{padding:0,autosize:"pad",background:null,group:null,mark:null,arc:{fill:qL},area:{fill:qL},image:null,line:{stroke:qL,strokeWidth:LL},path:{stroke:qL},rect:{fill:qL},rule:{stroke:UL},shape:{stroke:qL},symbol:{fill:qL,size:64},text:{fill:UL,font:"sans-serif",fontSize:11},point:{size:DL,strokeWidth:LL,shape:"circle"},circle:{size:DL,strokeWidth:LL},square:{size:DL,strokeWidth:LL},axis:{minExtent:0,maxExtent:200,bandPosition:.5,domain:!0,domainWidth:1,domainColor:UL,grid:!1,gridWidth:1,gridColor:jL,gridDash:[],gridOpacity:1,labels:!0,labelAngle:0,labelColor:UL,labelFont:"sans-serif",labelFontSize:10,labelLimit:180,labelPadding:2,ticks:!0,tickColor:UL,tickOffset:0,tickRound:!0,tickSize:5,tickWidth:1,titleAlign:"center",titlePadding:2,titleColor:UL,titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold"},axisBand:{tickOffset:-1},legend:{orient:"right",offset:18,padding:0,entryPadding:5,titlePadding:5,gradientWidth:100,gradientHeight:20,gradientStrokeColor:jL,gradientStrokeWidth:0,gradientLabelBaseline:"top",gradientLabelOffset:2,labelColor:UL,labelFontSize:10,labelFont:"sans-serif",labelAlign:"left",labelBaseline:"middle",labelOffset:8,labelLimit:160,symbolType:"circle",symbolSize:100,symbolColor:FL,symbolStrokeWidth:1.5,titleColor:UL,titleFont:"sans-serif",titleFontSize:11,titleFontWeight:"bold",titleAlign:"left",titleBaseline:"top",titleLimit:180},title:{orient:"top",anchor:"middle",offset:2,color:UL,font:"sans-serif",fontSize:13,fontWeight:"bold"},range:{category:{scheme:"tableau10"},ordinal:{scheme:"blues",extent:[.2,1]},heatmap:{scheme:"viridis"},ramp:{scheme:"blues",extent:[.2,1]},diverging:{scheme:"blueorange"},symbol:["circle","square","triangle-up","cross","diamond","triangle-right","triangle-down","triangle-left"]}}}function oM(t,e){return L(t)||P("Input Vega specification must be an object."),Qw(t,new Kw(iM([e,t.config]))).toRuntime()}function uM(t,e,n){";"!==e[e.length-1]&&(e="return("+e+");");var r=Function.apply(null,t.concat(e));return n&&n.functions?r.bind(n.functions):r}function sM(t,e){return uM(["_"],t,e)}function fM(t,e){return uM(["datum","_"],t,e)}function cM(t,e){return uM(["event"],t,e)}function lM(t,e){return uM(["_","event"],t,e)}function hM(t,e){return uM(["item","_"],t,e)}function dM(t,e,n){n=n||{};var r,i;for(r in t)i=t[r],i&&i.$expr&&i.$params&&dM(i.$params,e,n),n[r]=XM(i)?i.map(function(t){return pM(t,e)}):pM(i,e);return n}function pM(t,e){if(!t||!L(t))return t;for(var n,r=0,i=IL.length;r<i;++r)if(n=IL[r],t.hasOwnProperty(n.key))return n.parse(t,e);return t}function gM(t,e){return e.get(t.$ref)||P("Operator not defined: "+t.$ref)}function vM(t,e){var n="e:"+t.$expr;return e.fn[n]||(e.fn[n]=T(fM(t.$expr,e),t.$fields,t.$name))}function mM(t,e){var n="k:"+t.$key;return e.fn[n]||(e.fn[n]=et(t.$key))}function yM(t,e){var n="f:"+t.$field+"_"+t.$name;return e.fn[n]||(e.fn[n]=F(t.$field,t.$name))}function bM(t,e){var n="c:"+t.$compare+"_"+t.$order;return e.fn[n]||(e.fn[n]=B(t.$compare,t.$order))}function _M(t,e){var n,r,i=t.$encode,a={};for(n in i)r=i[n],a[n]=T(hM(r.$expr,e),r.$fields),a[n].output=r.$output;return a}function xM(t,e){return e}function wM(t,e){var n=t.$subflow;return function(t,r,i){var a=AM(n,e.fork()),o=a.get(n.operators[0].id),u=a.signals.parent;return u&&u.set(i),o}}function MM(t,e){"Operator"!==t.type&&t.type?e.transform(t,t.type):e.operator(t,t.update?sM(t.update,e):null)}function kM(t,e){var n,r;t.params&&((n=e.get(t.id))||P("Invalid operator id: "+t.id),r=dM(t.params,e),e.dataflow.connect(n,n.parameters(r)))}function EM(t,e){var n,r=null!=t.filter?cM(t.filter,e):void 0,i=null!=t.stream?e.get(t.stream):void 0;t.source?i=e.events(t.source,t.type,r):t.merge&&(n=t.merge.map(e.get.bind(e)),i=n[0].merge.apply(n[0],n.slice(1))),t.between&&(n=t.between.map(e.get.bind(e)),i=i.between(n[0],n[1])),t.filter&&(i=i.filter(r)),null!=t.throttle&&(i=i.throttle(+t.throttle)),null!=t.debounce&&(i=i.debounce(+t.debounce)),null==i&&P("Invalid stream definition: "+JSON.stringify(t)),t.consume&&i.consume(!0),e.stream(t,i)}function SM(t,e){var n=e.get(t.source),r=null,i=t.update,a=void 0;n||P("Source not defined: "+t.source),r=t.target&&t.target.$expr?cM(t.target.$expr,e):e.get(t.target),i&&i.$expr&&(i.$params&&(a=dM(i.$params,e)),i=lM(i.$expr,e)),e.update(t,n,r,i,a)}function AM(t,e){var n=t.operators||[];return t.background&&(e.background=t.background),n.forEach(function(t){MM(t,e)}),n.forEach(function(t){kM(t,e)}),(t.streams||[]).forEach(function(t){EM(t,e)}),(t.updates||[]).forEach(function(t){SM(t,e)}),e.resolve()}function CM(t){var e=this,n={};if(t.signals){var r=n.signals={};Object.keys(e.signals).forEach(function(n){var i=e.signals[n];t.signals(n,i)&&(r[n]=i.value)})}if(t.data){var i=n.data={};Object.keys(e.data).forEach(function(n){var r=e.data[n];t.data(n,r)&&(i[n]=r.input.value)})}return e.subcontext&&!1!==t.recurse&&(n.subcontext=e.subcontext.map(function(e){return e.getState(t)})),n}function NM(t){var e=this,n=e.dataflow,r=t.data,i=t.signals;Object.keys(i||{}).forEach(function(t){n.update(e.signals[t],i[t],$L)}),Object.keys(r||{}).forEach(function(t){n.pulse(e.data[t].input,n.changeset().remove(tk).insert(r[t]))}),(t.subcontext||[]).forEach(function(t,e){var n=n.subcontext[e];n&&n.setState(t)})}function zM(t,e,n){return new TM(t,e,n)}function TM(t,e,n){this.dataflow=t,this.transforms=e,this.events=t.events.bind(t),this.signals={},this.scales={},this.nodes={},this.data={},this.fn={},n&&(this.functions=Object.create(n),this.functions.context=this)}function OM(t){this.dataflow=t.dataflow,this.transforms=t.transforms,this.functions=t.functions,this.events=t.events,this.signals=Object.create(t.signals),this.scales=Object.create(t.scales),this.nodes=Object.create(t.nodes),this.data=Object.create(t.data),this.fn=Object.create(t.fn),t.functions&&(this.functions=Object.create(t.functions),this.functions.context=this)}function RM(t,e,n){return AM(e,zM(t,JS,n||HP))}function PM(t,e){var n=t.add(null,function(n){t["_"+e]=n.size,t._autosize=t._resize=1},{size:t._signals[e]});return n.rank=0,n}function DM(t,e,n,r,i,a){this.runAfter(function(o){var u=0;o._autosize=0,o.width()!==n&&(u=1,o.width(n),o._resizeWidth.skip(!0)),o.height()!==r&&(u=1,o.height(r),o._resizeHeight.skip(!0)),o._width!==t&&(o._resize=1,o._width=t),o._height!==e&&(o._resize=1,o._height=e),o._origin[0]===i[0]&&o._origin[1]===i[1]||(o._resize=1,o._origin=i),u&&o.run("enter"),a&&o.runAfter(function(){o.resize()})})}function LM(t){return this._runtime.getState(t||{data:qM,signals:UM,recurse:!0})}function qM(t,e){return e.modified&&XM(e.input.value)&&t.indexOf("_:vega:_")}function UM(t,e){return!("parent"===t||e instanceof JS.Proxy)}function FM(t){var e=this;return e._trigger=!1,e._runtime.setState(t),e.run().runAfter(function(){e._trigger=!0}),this}function jM(t,e){e=e||{},Fo.call(this),this.loader(e.loader||this._loader),this.logLevel(e.logLevel||0),this._el=null,this._renderType=e.renderer||TS.Canvas,this._scenegraph=new _a;var n=this._scenegraph.root;this._renderer=null,this._redraw=!0,this._handler=(new Ea).scene(n),this._eventListeners=[],this._preventDefault=!0;var r=RM(this,t,e.functions);this._runtime=r,this._signals=r.signals,this._bind=(t.bindings||[]).map(function(t){return{state:null,param:H({},t)}}),r.root&&r.root.set(n),n.source=r.data.root.input,this.pulse(r.data.root.input,this.changeset().insert(n.items)),this._background=r.background||null,this._width=this.width(),this._height=this.height(),this._origin=[0,0],this._resize=0,this._autosize=1,this._resizeWidth=PM(this,"width"),this._resizeHeight=PM(this,"height"),$m(this)}function IM(t,e){return t._signals.hasOwnProperty(e)?t._signals[e]:t.error("Unrecognized signal name: "+U(e))}var $M=a(i),BM=$M.right,YM=$M.left,GM=Math.sqrt(50),WM=Math.sqrt(10),HM=Math.sqrt(2),XM=Array.isArray,VM=[],JM=F("id"),ZM=T(function(t){return t},VM,"identity"),QM=T(function(){return 0},VM,"zero"),KM=T(function(){return 1},VM,"one"),tk=T(function(){return!0},VM,"true"),ek=T(function(){return!1},VM,"false"),nk=0,rk=1,ik=2,ak=3,ok={};pt.prototype=gt.prototype={constructor:pt,has:function(t){return"$"+t in this},get:function(t){return this["$"+t]},set:function(t,e){return this["$"+t]=e,this},remove:function(t){var e="$"+t;return e in this&&delete this[e]},clear:function(){for(var t in this)"$"===t[0]&&delete this[t]},keys:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(e.slice(1));return t},values:function(){var t=[];for(var e in this)"$"===e[0]&&t.push(this[e]);return t},entries:function(){var t=[];for(var e in this)"$"===e[0]&&t.push({key:e.slice(1),value:this[e]});return t},size:function(){var t=0;for(var e in this)"$"===e[0]&&++t;return t},empty:function(){for(var t in this)if("$"===t[0])return!1;return!0},each:function(t){for(var e in this)"$"===e[0]&&t(this[e],e.slice(1),this)}};var uk=(gt.prototype,{value:function(){}});wt.prototype=xt.prototype={constructor:wt,on:function(t,e){var n,r=this._,i=Mt(t+"",r),a=-1,o=i.length;if(!(arguments.length<2)){if(null!=e&&"function"!=typeof e)throw new Error("invalid callback: "+e);for(;++a<o;)if(n=(t=i[a]).type)r[n]=Et(r[n],t.name,e);else if(null==e)for(n in r)r[n]=Et(r[n],t.name,null);return this}for(;++a<o;)if((n=(t=i[a]).type)&&(n=kt(r[n],t.name)))return n},copy:function(){var t={},e=this._;for(var n in e)t[n]=e[n].slice();return new wt(t)},call:function(t,e){if((n=arguments.length-2)>0)for(var n,r,i=new Array(n),a=0;a<n;++a)i[a]=arguments[a+2];if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(r=this._[t],a=0,n=r.length;a<n;++a)r[a].value.apply(e,i)},apply:function(t,e,n){if(!this._.hasOwnProperty(t))throw new Error("unknown type: "+t);for(var r=this._[t],i=0,a=r.length;i<a;++i)r[i].value.apply(e,n)}};var sk=(Ot(","),Ot("\t"),/^([A-Za-z]+:)?\/\//),fk="file://",ck=["mimeType","responseType","user","password"],lk={"boolean":ot,integer:ft,number:ft,date:st,string:ct},hk=[Yt,Ht,Wt,Gt],dk=["boolean","integer","number","date"],pk={dsv:Vt,csv:Xt(","),tsv:Xt("\t"),json:Zt,topojson:se},gk=new Date,vk=new Date,mk=ce(function(){},function(t,e){t.setTime(+t+e)},function(t,e){return e-t});mk.every=function(t){return t=Math.floor(t),isFinite(t)&&t>0?t>1?ce(function(e){e.setTime(Math.floor(e/t)*t)},function(e,n){e.setTime(+e+n*t)},function(e,n){return(n-e)/t}):mk:null};var yk=6e4,bk=6048e5,_k=ce(function(t){t.setTime(1e3*Math.floor(t/1e3))},function(t,e){t.setTime(+t+1e3*e)},function(t,e){return(e-t)/1e3},function(t){return t.getUTCSeconds()}),xk=ce(function(t){t.setTime(Math.floor(t/yk)*yk)},function(t,e){t.setTime(+t+e*yk)},function(t,e){return(e-t)/yk},function(t){return t.getMinutes()}),wk=ce(function(t){var e=t.getTimezoneOffset()*yk%36e5;e<0&&(e+=36e5),t.setTime(36e5*Math.floor((+t-e)/36e5)+e)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getHours()}),Mk=ce(function(t){t.setHours(0,0,0,0)},function(t,e){t.setDate(t.getDate()+e)},function(t,e){return(e-t-(e.getTimezoneOffset()-t.getTimezoneOffset())*yk)/864e5},function(t){return t.getDate()-1}),kk=le(0),Ek=le(1),Sk=ce(function(t){t.setDate(1),t.setHours(0,0,0,0)},function(t,e){t.setMonth(t.getMonth()+e)},function(t,e){return e.getMonth()-t.getMonth()+12*(e.getFullYear()-t.getFullYear())},function(t){return t.getMonth()}),Ak=ce(function(t){t.setMonth(0,1),t.setHours(0,0,0,0)},function(t,e){t.setFullYear(t.getFullYear()+e)},function(t,e){return e.getFullYear()-t.getFullYear()},function(t){return t.getFullYear()});Ak.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ce(function(e){e.setFullYear(Math.floor(e.getFullYear()/t)*t),e.setMonth(0,1),e.setHours(0,0,0,0)},function(e,n){e.setFullYear(e.getFullYear()+n*t)}):null};var Ck=ce(function(t){t.setUTCSeconds(0,0)},function(t,e){t.setTime(+t+e*yk)},function(t,e){return(e-t)/yk},function(t){return t.getUTCMinutes()}),Nk=ce(function(t){t.setUTCMinutes(0,0,0)},function(t,e){t.setTime(+t+36e5*e)},function(t,e){return(e-t)/36e5},function(t){return t.getUTCHours()}),zk=ce(function(t){t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCDate(t.getUTCDate()+e)},function(t,e){return(e-t)/864e5},function(t){return t.getUTCDate()-1}),Tk=he(0),Ok=he(1),Rk=ce(function(t){t.setUTCDate(1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCMonth(t.getUTCMonth()+e)},function(t,e){return e.getUTCMonth()-t.getUTCMonth()+12*(e.getUTCFullYear()-t.getUTCFullYear())},function(t){return t.getUTCMonth()}),Pk=ce(function(t){t.setUTCMonth(0,1),t.setUTCHours(0,0,0,0)},function(t,e){t.setUTCFullYear(t.getUTCFullYear()+e)},function(t,e){return e.getUTCFullYear()-t.getUTCFullYear()},function(t){return t.getUTCFullYear()});Pk.every=function(t){return isFinite(t=Math.floor(t))&&t>0?ce(function(e){e.setUTCFullYear(Math.floor(e.getUTCFullYear()/t)*t),e.setUTCMonth(0,1),e.setUTCHours(0,0,0,0)},function(e,n){e.setUTCFullYear(e.getUTCFullYear()+n*t)}):null};var Dk,Lk,qk,Uk,Fk,jk={"-":"",_:" ",0:"0"},Ik=/^\s*\d+/,$k=/^%/,Bk=/[\\\^\$\*\+\?\|\[\]\(\)\.\{\}]/g;ln({dateTime:"%x, %X",date:"%-m/%-d/%Y",time:"%-I:%M:%S %p",periods:["AM","PM"],days:["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday"],shortDays:["Sun","Mon","Tue","Wed","Thu","Fri","Sat"],months:["January","February","March","April","May","June","July","August","September","October","November","December"],shortMonths:["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"]});var Yk=(Date.prototype.toISOString||Uk("%Y-%m-%dT%H:%M:%S.%LZ"),+new Date("2000-01-01T00:00:00.000Z")||Fk("%Y-%m-%dT%H:%M:%S.%LZ"),pn.prototype);Yk.clone=function(){return new pn(this)},Yk.clear=function(){return this.x1=+Number.MAX_VALUE,this.y1=+Number.MAX_VALUE,this.x2=-Number.MAX_VALUE,this.y2=-Number.MAX_VALUE,this},Yk.empty=function(){return this.x1===+Number.MAX_VALUE&&this.y1===+Number.MAX_VALUE&&this.x2===-Number.MAX_VALUE&&this.y2===-Number.MAX_VALUE},Yk.set=function(t,e,n,r){return n<t?(this.x2=t,this.x1=n):(this.x1=t,this.x2=n),r<e?(this.y2=e,this.y1=r):(this.y1=e,this.y2=r),this},Yk.add=function(t,e){return t<this.x1&&(this.x1=t),e<this.y1&&(this.y1=e),t>this.x2&&(this.x2=t),e>this.y2&&(this.y2=e),this},Yk.expand=function(t){return this.x1-=t,this.y1-=t,this.x2+=t,this.y2+=t,this},Yk.round=function(){return this.x1=Math.floor(this.x1),this.y1=Math.floor(this.y1),this.x2=Math.ceil(this.x2),this.y2=Math.ceil(this.y2),this},Yk.translate=function(t,e){return this.x1+=t,this.x2+=t,this.y1+=e,this.y2+=e,this},Yk.rotate=function(t,e,n){var r=Math.cos(t),i=Math.sin(t),a=e-e*r+n*i,o=n-e*i-n*r,u=this.x1,s=this.x2,f=this.y1,c=this.y2;return this.clear().add(r*u-i*f+a,i*u+r*f+o).add(r*u-i*c+a,i*u+r*c+o).add(r*s-i*f+a,i*s+r*f+o).add(r*s-i*c+a,i*s+r*c+o)},Yk.union=function(t){return t.x1<this.x1&&(this.x1=t.x1),t.y1<this.y1&&(this.y1=t.y1),t.x2>this.x2&&(this.x2=t.x2),t.y2>this.y2&&(this.y2=t.y2),this},Yk.intersect=function(t){return t.x1>this.x1&&(this.x1=t.x1),t.y1>this.y1&&(this.y1=t.y1),t.x2<this.x2&&(this.x2=t.x2),t.y2<this.y2&&(this.y2=t.y2),this},Yk.encloses=function(t){return t&&this.x1<=t.x1&&this.x2>=t.x2&&this.y1<=t.y1&&this.y2>=t.y2},Yk.alignsWith=function(t){return t&&(this.x1==t.x1||this.x2==t.x2||this.y1==t.y1||this.y2==t.y2)},Yk.intersects=function(t){return t&&!(this.x2<t.x1||this.x1>t.x2||this.y2<t.y1||this.y1>t.y2)},Yk.contains=function(t,e){return!(t<this.x1||t>this.x2||e<this.y1||e>this.y2)},Yk.width=function(){return this.x2-this.x1},Yk.height=function(){return this.y2-this.y1};var Gk=0;J(mn,vn);var Wk;try{Wk=require("canvas")}catch(t){Wk=null}var Hk="undefined"!=typeof Image?Image:Wk&&Wk.Image||null,Xk=kn.prototype;Xk.pending=function(){return this._pending},Xk.sanitizeURL=function(t){var e=this;return En(e),e._loader.sanitize(t,{context:"href"}).then(function(t){return Sn(e),t})["catch"](function(){return Sn(e),null})},Xk.loadImage=function(t){var e=this;return En(e),e._loader.sanitize(t,{context:"image"}).then(function(t){var n=t.href;if(!n||!Hk)throw"Image unsupported.";var r=new Hk;return r.onload=function(){Sn(e),r.loaded=!0},r.onerror=function(){Sn(e),r.loaded=!1},r.src=n,r})["catch"](function(){return Sn(e),{loaded:!1,width:0,height:0}})},Xk.ready=function(){var t=this;return new Promise(function(e){function n(r){t.pending()?setTimeout(function(){n(!0)},10):e(r)}n(!1)})};var Vk=Math.PI,Jk=2*Vk,Zk=Jk-1e-6;An.prototype=Cn.prototype={constructor:An,moveTo:function(t,e){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)},closePath:function(){null!==this._x1&&(this._x1=this._x0,this._y1=this._y0,this._+="Z")},lineTo:function(t,e){this._+="L"+(this._x1=+t)+","+(this._y1=+e)},quadraticCurveTo:function(t,e,n,r){this._+="Q"+ +t+","+ +e+","+(this._x1=+n)+","+(this._y1=+r)},bezierCurveTo:function(t,e,n,r,i,a){this._+="C"+ +t+","+ +e+","+ +n+","+ +r+","+(this._x1=+i)+","+(this._y1=+a)},arcTo:function(t,e,n,r,i){t=+t,e=+e,n=+n,r=+r,i=+i;var a=this._x1,o=this._y1,u=n-t,s=r-e,f=a-t,c=o-e,l=f*f+c*c;if(i<0)throw new Error("negative radius: "+i);if(null===this._x1)this._+="M"+(this._x1=t)+","+(this._y1=e);else if(l>1e-6)if(Math.abs(c*u-s*f)>1e-6&&i){var h=n-a,d=r-o,p=u*u+s*s,g=h*h+d*d,v=Math.sqrt(p),m=Math.sqrt(l),y=i*Math.tan((Vk-Math.acos((p+l-g)/(2*v*m)))/2),b=y/m,_=y/v;Math.abs(b-1)>1e-6&&(this._+="L"+(t+b*f)+","+(e+b*c)),this._+="A"+i+","+i+",0,0,"+ +(c*h>f*d)+","+(this._x1=t+_*u)+","+(this._y1=e+_*s)}else this._+="L"+(this._x1=t)+","+(this._y1=e)},arc:function(t,e,n,r,i,a){t=+t,e=+e,n=+n;var o=n*Math.cos(r),u=n*Math.sin(r),s=t+o,f=e+u,c=1^a,l=a?r-i:i-r;if(n<0)throw new Error("negative radius: "+n);null===this._x1?this._+="M"+s+","+f:(Math.abs(this._x1-s)>1e-6||Math.abs(this._y1-f)>1e-6)&&(this._+="L"+s+","+f),n&&(l<0&&(l=l%Jk+Jk),l>Zk?this._+="A"+n+","+n+",0,1,"+c+","+(t-o)+","+(e-u)+"A"+n+","+n+",0,1,"+c+","+(this._x1=s)+","+(this._y1=f):l>1e-6&&(this._+="A"+n+","+n+",0,"+ +(l>=Vk)+","+c+","+(this._x1=t+n*Math.cos(i))+","+(this._y1=e+n*Math.sin(i))))},rect:function(t,e,n,r){this._+="M"+(this._x0=this._x1=+t)+","+(this._y0=this._y1=+e)+"h"+ +n+"v"+ +r+"h"+-n+"Z"},toString:function(){return this._}};var Qk=Math.abs,Kk=Math.atan2,tE=Math.cos,eE=Math.max,nE=Math.min,rE=Math.sin,iE=Math.sqrt,aE=1e-12,oE=Math.PI,uE=oE/2,sE=2*oE;Fn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:this._context.lineTo(t,e)}}};var fE={draw:function(t,e){var n=Math.sqrt(e/oE);t.moveTo(n,0),t.arc(0,0,n,0,sE)}};Math.sin(oE/10),Math.sin(7*oE/10);Math.sin(sE/10),Math.cos(sE/10),Hn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){switch(this._point){case 3:Wn(this,this._x1,this._y1);case 2:this._context.lineTo(this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,this._context.lineTo((5*this._x0+this._x1)/6,(5*this._y0+this._y1)/6);default:Wn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Vn.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._y0=this._y1=this._y2=this._y3=this._y4=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x2,this._y2),this._context.closePath();break;case 2:this._context.moveTo((this._x2+2*this._x3)/3,(this._y2+2*this._y3)/3),this._context.lineTo((this._x3+2*this._x2)/3,(this._y3+2*this._y2)/3),this._context.closePath();break;case 3:this.point(this._x2,this._y2),this.point(this._x3,this._y3),this.point(this._x4,this._y4)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x2=t,this._y2=e;break;case 1:this._point=2,this._x3=t,this._y3=e;break;case 2:this._point=3,this._x4=t,this._y4=e,this._context.moveTo((this._x0+4*this._x1+t)/6,(this._y0+4*this._y1+e)/6);break;default:Wn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Zn.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3;var n=(this._x0+4*this._x1+t)/6,r=(this._y0+4*this._y1+e)/6;this._line?this._context.lineTo(n,r):this._context.moveTo(n,r);break;case 3:this._point=4;default:Wn(this,t,e)}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e}},Kn.prototype={lineStart:function(){this._x=[],this._y=[],this._basis.lineStart()},lineEnd:function(){var t=this._x,e=this._y,n=t.length-1;if(n>0)for(var r,i=t[0],a=e[0],o=t[n]-i,u=e[n]-a,s=-1;++s<=n;)r=s/n,this._basis.point(this._beta*t[s]+(1-this._beta)*(i+r*o),this._beta*e[s]+(1-this._beta)*(a+r*u));this._x=this._y=null,this._basis.lineEnd()},point:function(t,e){this._x.push(+t),this._y.push(+e)}};var cE=function t(e){function n(t){return 1===e?new Hn(t):new Kn(t,e)}return n.beta=function(e){return t(+e)},n}(.85);er.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:tr(this,this._x1,this._y1)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2,this._x1=t,this._y1=e;break;case 2:this._point=3;default:tr(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var lE=function t(e){function n(t){return new er(t,e)}return n.tension=function(e){return t(+e)},n}(0);nr.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:tr(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var hE=function t(e){function n(t){return new nr(t,e)}return n.tension=function(e){return t(+e)},n}(0);rr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:tr(this,t,e)}this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var dE=function t(e){function n(t){return new rr(t,e)}return n.tension=function(e){return t(+e)},n}(0);ar.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x2,this._y2);break;case 3:this.point(this._x2,this._y2)}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3;default:ir(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var pE=function t(e){function n(t){return e?new ar(t,e):new er(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);or.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._x0=this._x1=this._x2=this._x3=this._x4=this._x5=this._y0=this._y1=this._y2=this._y3=this._y4=this._y5=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){switch(this._point){case 1:this._context.moveTo(this._x3,this._y3),this._context.closePath();break;case 2:this._context.lineTo(this._x3,this._y3),this._context.closePath();break;case 3:this.point(this._x3,this._y3),this.point(this._x4,this._y4),this.point(this._x5,this._y5)}},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1,this._x3=t,this._y3=e;break;case 1:this._point=2,this._context.moveTo(this._x4=t,this._y4=e);break;case 2:this._point=3,this._x5=t,this._y5=e;break;default:ir(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var gE=function t(e){function n(t){return e?new or(t,e):new nr(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);ur.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._x2=this._y0=this._y1=this._y2=NaN,this._l01_a=this._l12_a=this._l23_a=this._l01_2a=this._l12_2a=this._l23_2a=this._point=0},lineEnd:function(){(this._line||0!==this._line&&3===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){if(t=+t,e=+e,this._point){var n=this._x2-t,r=this._y2-e;this._l23_a=Math.sqrt(this._l23_2a=Math.pow(n*n+r*r,this._alpha))}switch(this._point){case 0:this._point=1;break;case 1:this._point=2;break;case 2:this._point=3,this._line?this._context.lineTo(this._x2,this._y2):this._context.moveTo(this._x2,this._y2);break;case 3:this._point=4;default:ir(this,t,e)}this._l01_a=this._l12_a,this._l12_a=this._l23_a,this._l01_2a=this._l12_2a,this._l12_2a=this._l23_2a,this._x0=this._x1,this._x1=this._x2,this._x2=t,this._y0=this._y1,this._y1=this._y2,this._y2=e}};var vE=function t(e){function n(t){return e?new ur(t,e):new rr(t,0)}return n.alpha=function(e){return t(+e)},n}(.5);sr.prototype={areaStart:Gn,areaEnd:Gn,lineStart:function(){this._point=0},lineEnd:function(){this._point&&this._context.closePath()},point:function(t,e){t=+t,e=+e,this._point?this._context.lineTo(t,e):(this._point=1,this._context.moveTo(t,e))}},pr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x0=this._x1=this._y0=this._y1=this._t0=NaN,this._point=0},lineEnd:function(){switch(this._point){case 2:this._context.lineTo(this._x1,this._y1);break;case 3:dr(this,this._t0,hr(this,this._t0))}(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line=1-this._line},point:function(t,e){var n=NaN;if(t=+t,e=+e,t!==this._x1||e!==this._y1){switch(this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;break;case 2:this._point=3,dr(this,hr(this,n=lr(this,t,e)),n);break;default:dr(this,this._t0,n=lr(this,t,e))}this._x0=this._x1,this._x1=t,this._y0=this._y1,this._y1=e,this._t0=n}}},(gr.prototype=Object.create(pr.prototype)).point=function(t,e){pr.prototype.point.call(this,e,t)},vr.prototype={moveTo:function(t,e){this._context.moveTo(e,t)},closePath:function(){this._context.closePath()},lineTo:function(t,e){this._context.lineTo(e,t)},bezierCurveTo:function(t,e,n,r,i,a){
this._context.bezierCurveTo(e,t,r,n,a,i)}},br.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=[],this._y=[]},lineEnd:function(){var t=this._x,e=this._y,n=t.length;if(n)if(this._line?this._context.lineTo(t[0],e[0]):this._context.moveTo(t[0],e[0]),2===n)this._context.lineTo(t[1],e[1]);else for(var r=_r(t),i=_r(e),a=0,o=1;o<n;++a,++o)this._context.bezierCurveTo(r[0][a],i[0][a],r[1][a],i[1][a],t[o],e[o]);(this._line||0!==this._line&&1===n)&&this._context.closePath(),this._line=1-this._line,this._x=this._y=null},point:function(t,e){this._x.push(+t),this._y.push(+e)}},wr.prototype={areaStart:function(){this._line=0},areaEnd:function(){this._line=NaN},lineStart:function(){this._x=this._y=NaN,this._point=0},lineEnd:function(){0<this._t&&this._t<1&&2===this._point&&this._context.lineTo(this._x,this._y),(this._line||0!==this._line&&1===this._point)&&this._context.closePath(),this._line>=0&&(this._t=1-this._t,this._line=1-this._line)},point:function(t,e){switch(t=+t,e=+e,this._point){case 0:this._point=1,this._line?this._context.lineTo(t,e):this._context.moveTo(t,e);break;case 1:this._point=2;default:if(this._t<=0)this._context.lineTo(this._x,e),this._context.lineTo(t,e);else{var n=this._x*(1-this._t)+t*this._t;this._context.lineTo(n,this._y),this._context.lineTo(n,e)}}this._x=t,this._y=e}};var mE,yE={basis:{curve:Xn},"basis-closed":{curve:Jn},"basis-open":{curve:Qn},bundle:{curve:cE,tension:"beta",value:.85},cardinal:{curve:lE,tension:"tension",value:0},"cardinal-open":{curve:dE,tension:"tension",value:0},"cardinal-closed":{curve:hE,tension:"tension",value:0},"catmull-rom":{curve:pE,tension:"alpha",value:.5},"catmull-rom-closed":{curve:gE,tension:"alpha",value:.5},"catmull-rom-open":{curve:vE,tension:"alpha",value:.5},linear:{curve:jn},"linear-closed":{curve:fr},monotone:{horizontal:yr,vertical:mr},natural:{curve:xr},step:{curve:Mr},"step-after":{curve:Er},"step-before":{curve:kr}},bE={m:2,l:2,h:1,v:1,c:6,s:4,q:4,t:2,a:7},_E=[/([MLHVCSQTAZmlhvcsqtaz])/g,/###/,/(\d)([-+])/g,/\s|,|###/],xE={},wE={},ME=[].join,kE=["l",0,0,0,0,0,0,0],EE=2*Math.PI,SE=Math.sqrt(3)/2,AE={circle:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(n,0),t.arc(0,0,n,0,EE)}},cross:{draw:function(t,e){var n=Math.sqrt(e)/2,r=n/2.5;t.moveTo(-n,-r),t.lineTo(-n,r),t.lineTo(-r,r),t.lineTo(-r,n),t.lineTo(r,n),t.lineTo(r,r),t.lineTo(n,r),t.lineTo(n,-r),t.lineTo(r,-r),t.lineTo(r,-n),t.lineTo(-r,-n),t.lineTo(-r,-r),t.closePath()}},diamond:{draw:function(t,e){var n=Math.sqrt(e)/2;t.moveTo(-n,0),t.lineTo(0,-n),t.lineTo(n,0),t.lineTo(0,n),t.closePath()}},square:{draw:function(t,e){var n=Math.sqrt(e),r=-n/2;t.rect(r,r,n,n)}},"triangle-up":{draw:function(t,e){var n=Math.sqrt(e)/2,r=SE*n;t.moveTo(0,-r),t.lineTo(-n,r),t.lineTo(n,r),t.closePath()}},"triangle-down":{draw:function(t,e){var n=Math.sqrt(e)/2,r=SE*n;t.moveTo(0,r),t.lineTo(-n,-r),t.lineTo(n,-r),t.closePath()}},"triangle-right":{draw:function(t,e){var n=Math.sqrt(e)/2,r=SE*n;t.moveTo(r,0),t.lineTo(-r,-n),t.lineTo(-r,n),t.closePath()}},"triangle-left":{draw:function(t,e){var n=Math.sqrt(e)/2,r=SE*n;t.moveTo(-r,0),t.lineTo(r,-n),t.lineTo(r,n),t.closePath()}}},CE={},NE=Math.PI,zE=function(){function t(){var t,f,c=+e.apply(this,arguments),l=+n.apply(this,arguments),h=a.apply(this,arguments)-uE,d=o.apply(this,arguments)-uE,p=Qk(d-h),g=d>h;if(s||(s=t=Cn()),l<c&&(f=l,l=c,c=f),l>aE)if(p>sE-aE)s.moveTo(l*tE(h),l*rE(h)),s.arc(0,0,l,h,d,!g),c>aE&&(s.moveTo(c*tE(d),c*rE(d)),s.arc(0,0,c,d,h,g));else{var v,m,y=h,b=d,_=h,x=d,w=p,M=p,k=u.apply(this,arguments)/2,E=k>aE&&(i?+i.apply(this,arguments):iE(c*c+l*l)),S=nE(Qk(l-c)/2,+r.apply(this,arguments)),A=S,C=S;if(E>aE){var N=Tn(E/c*rE(k)),z=Tn(E/l*rE(k));(w-=2*N)>aE?(N*=g?1:-1,_+=N,x-=N):(w=0,_=x=(h+d)/2),(M-=2*z)>aE?(z*=g?1:-1,y+=z,b-=z):(M=0,y=b=(h+d)/2)}var T=l*tE(y),O=l*rE(y),R=c*tE(x),P=c*rE(x);if(S>aE){var D=l*tE(b),L=l*rE(b),q=c*tE(_),U=c*rE(_);if(p<oE){var F=w>aE?qn(T,O,q,U,D,L,R,P):[R,P],j=T-F[0],I=O-F[1],$=D-F[0],B=L-F[1],Y=1/rE(zn((j*$+I*B)/(iE(j*j+I*I)*iE($*$+B*B)))/2),G=iE(F[0]*F[0]+F[1]*F[1]);A=nE(S,(c-G)/(Y-1)),C=nE(S,(l-G)/(Y+1))}}M>aE?C>aE?(v=Un(q,U,T,O,l,C,g),m=Un(D,L,R,P,l,C,g),s.moveTo(v.cx+v.x01,v.cy+v.y01),C<S?s.arc(v.cx,v.cy,C,Kk(v.y01,v.x01),Kk(m.y01,m.x01),!g):(s.arc(v.cx,v.cy,C,Kk(v.y01,v.x01),Kk(v.y11,v.x11),!g),s.arc(0,0,l,Kk(v.cy+v.y11,v.cx+v.x11),Kk(m.cy+m.y11,m.cx+m.x11),!g),s.arc(m.cx,m.cy,C,Kk(m.y11,m.x11),Kk(m.y01,m.x01),!g))):(s.moveTo(T,O),s.arc(0,0,l,y,b,!g)):s.moveTo(T,O),c>aE&&w>aE?A>aE?(v=Un(R,P,D,L,c,-A,g),m=Un(T,O,q,U,c,-A,g),s.lineTo(v.cx+v.x01,v.cy+v.y01),A<S?s.arc(v.cx,v.cy,A,Kk(v.y01,v.x01),Kk(m.y01,m.x01),!g):(s.arc(v.cx,v.cy,A,Kk(v.y01,v.x01),Kk(v.y11,v.x11),!g),s.arc(0,0,c,Kk(v.cy+v.y11,v.cx+v.x11),Kk(m.cy+m.y11,m.cx+m.x11),g),s.arc(m.cx,m.cy,A,Kk(m.y11,m.x11),Kk(m.y01,m.x01),!g))):s.arc(0,0,c,x,_,g):s.lineTo(R,P)}else s.moveTo(0,0);if(s.closePath(),t)return s=null,t+""||null}var e=On,n=Rn,r=Nn(0),i=null,a=Pn,o=Dn,u=Ln,s=null;return t.centroid=function(){var t=(+e.apply(this,arguments)+ +n.apply(this,arguments))/2,r=(+a.apply(this,arguments)+ +o.apply(this,arguments))/2-oE/2;return[tE(r)*t,rE(r)*t]},t.innerRadius=function(n){return arguments.length?(e="function"==typeof n?n:Nn(+n),t):e},t.outerRadius=function(e){return arguments.length?(n="function"==typeof e?e:Nn(+e),t):n},t.cornerRadius=function(e){return arguments.length?(r="function"==typeof e?e:Nn(+e),t):r},t.padRadius=function(e){return arguments.length?(i=null==e?null:"function"==typeof e?e:Nn(+e),t):i},t.startAngle=function(e){return arguments.length?(a="function"==typeof e?e:Nn(+e),t):a},t.endAngle=function(e){return arguments.length?(o="function"==typeof e?e:Nn(+e),t):o},t.padAngle=function(e){return arguments.length?(u="function"==typeof e?e:Nn(+e),t):u},t.context=function(e){return arguments.length?(s=null==e?null:e,t):s},t}().cornerRadius(Vr).padAngle(Jr),TE=Yn().x($r).y1(Br).y0(Xr).defined(Zr),OE=Yn().y(Br).x1($r).x0(Hr).defined(Zr),RE=Bn().x($r).y(Br).defined(Zr),PE=jr().x($r).y(Br).width(Yr).height(Wr).cornerRadius(Vr),DE=function(){function t(){var t;if(r||(r=t=Cn()),e.apply(this,arguments).draw(r,+n.apply(this,arguments)),t)return r=null,t+""||null}var e=Nn(fE),n=Nn(64),r=null;return t.type=function(n){return arguments.length?(e="function"==typeof n?n:Nn(n),t):e},t.size=function(e){return arguments.length?(n="function"==typeof e?e:Nn(+e),t):n},t.context=function(e){return arguments.length?(r=null==e?null:e,t):r},t}().type(Kr).size(Qr),LE=Ir().x($r).y(Br).defined(Zr).size(Gr),qE=2*Math.PI,UE=qE/4,FE=qE-1e-8;si.beginPath=fi,si.closePath=fi,si.moveTo=ci,si.lineTo=ci,si.rect=function(t,e,n,r){ci(t,e),ci(t+n,e+r)},si.quadraticCurveTo=function(t,e,n,r){ci(t,e),ci(n,r)},si.bezierCurveTo=function(t,e,n,r,i,a){ci(t,e),ci(n,r),ci(i,a)},si.arc=function(t,e,n,r,i,a){function o(t){f=n*Math.cos(t),c=n*Math.sin(t),f<l&&(l=f),f>h&&(h=f),c<d&&(d=c),c>p&&(p=c)}if(Math.abs(i-r)>FE)return ci(t-n,e-n),void ci(t+n,e+n);var u,s,f,c,l=1/0,h=-1/0,d=1/0,p=-1/0;if(o(r),o(i),i!==r)if(r%=qE,r<0&&(r+=qE),i%=qE,i<0&&(i+=qE),i<r&&(a=!a,u=r,r=i,i=u),a)for(i-=qE,u=r-r%UE,s=0;s<3&&u>i;++s,u-=UE)o(u);else for(u=r-r%UE+UE,s=0;s<3&&u<i;++s,u+=UE)o(u);ci(t+l,e+d),ci(t+h,e+p)};var jE,IE,$E=[],BE=function(){return!0},YE=Ai("arc",ti),GE=Ci("area",ei),WE=1,HE=.5,XE={type:"group",tag:"g",nested:!1,attr:Ti,bound:Pi,draw:Di,pick:Li,background:Oi,foreground:Ri},VE={type:"image",tag:"image",nested:!1,attr:Ii,bound:$i,draw:Bi,pick:wi(),get:Ui,xOffset:Fi,yOffset:ji},JE=Ci("line",ni),ZE={type:"path",tag:"path",nested:!1,attr:Yi,bound:Wi,draw:bi(Gi),pick:ki(Gi)},QE={type:"rect",tag:"path",nested:!1,attr:Hi,bound:Xi,draw:bi(Vi),pick:ki(Vi)},KE={type:"rule",tag:"line",nested:!1,attr:Ji,bound:Zi,draw:Ki,pick:wi(ta)},tS=Ai("shape",ii),eS=Ai("symbol",ai),nS={height:aa,measureWidth:ra,estimateWidth:ea,width:ea,canvas:oa};oa(!0);var rS={left:"start",center:"middle",right:"end"},iS=new pn,aS={type:"text",tag:"text",nested:!1,attr:la,bound:ha,draw:da,pick:wi(pa)},oS=Ci("trail",oi),uS={arc:YE,area:GE,group:XE,image:VE,line:JE,path:ZE,rect:QE,rule:KE,shape:tS,symbol:eS,text:aS,trail:oS},sS={mark:null},fS=["marktype","name","role","interactive","clip","items","zindex","x","y","width","height","align","baseline","fill","fillOpacity","opacity","stroke","strokeOpacity","strokeWidth","strokeCap","strokeDash","strokeDashOffset","startAngle","endAngle","innerRadius","outerRadius","cornerRadius","padAngle","interpolate","tension","orient","defined","url","path","x2","y2","size","shape","text","angle","theta","radius","dx","dy","font","fontSize","fontWeight","fontStyle","fontVariant"],cS=_a.prototype;cS.toJSON=function(t){return ma(this.root,t||0)},cS.mark=function(t,e,n){e=e||this.root.items[0];var r=xa(t,e);return e.items[n]=r,r.zindex&&(r.group.zdirty=!0),r};var lS=wa.prototype;lS.initialize=function(t,e,n){return this._el=t,this._obj=n||null,this.origin(e)},lS.element=function(){return this._el},lS.origin=function(t){return this._origin=t||[0,0],this},lS.scene=function(t){return arguments.length?(this._scene=t,this):this._scene},lS.on=function(){},lS.off=function(){},lS.handlers=function(){var t,e=this._handlers,n=[];for(t in e)n.push.apply(n,e[t]);return n},lS.eventName=function(t){var e=t.indexOf(".");return e<0?t:t.slice(0,e)},lS.handleHref=function(t,e,n){this._loader.sanitize(n,{context:"href"}).then(function(e){var n=new MouseEvent(t.type,t),r=yn(null,"a");for(var i in e)r.setAttribute(i,e[i]);r.dispatchEvent(n)})["catch"](function(){})},lS.handleTooltip=function(t,e,n){this._el.setAttribute("title",n||"")};var hS=Ma.prototype;hS.initialize=function(t,e,n,r){return this._el=t,this.resize(e,n,r)},hS.element=function(){return this._el},hS.scene=function(){return this._el&&this._el.firstChild},hS.background=function(t){return 0===arguments.length?this._bgcolor:(this._bgcolor=t,this)},hS.resize=function(t,e,n){return this._width=t,this._height=e,this._origin=n||[0,0],this},hS.dirty=function(){},hS.render=function(t){var e=this;return e._call=function(){e._render(t)},e._call(),e._call=null,e},hS._render=function(){},hS.renderAsync=function(t){var e=this.render(t);return this._ready?this._ready.then(function(){return e}):Promise.resolve(e)},hS._load=function(t,e){var n=this,r=n._loader[t](e);if(!n._ready){var i=n._call;n._ready=n._loader.ready().then(function(t){t&&i(),n._ready=null})}return r},hS.sanitizeURL=function(t){return this._load("sanitizeURL",t)},hS.loadImage=function(t){return this._load("loadImage",t)};var dS=J(Ea,wa);dS.initialize=function(t,e,n){var r=this._canvas=t&&bn(t,"canvas");if(r){var i=this;this.events.forEach(function(t){r.addEventListener(t,function(e){dS[t]?dS[t].call(i,e):i.fire(t,e)})})}return wa.prototype.initialize.call(this,t,e,n)},dS.canvas=function(){return this._canvas},dS.context=function(){return this._canvas.getContext("2d")},dS.events=["keydown","keypress","keyup","dragenter","dragleave","dragover","mousedown","mouseup","mousemove","mouseout","mouseover","click","dblclick","wheel","mousewheel","touchstart","touchmove","touchend"],dS.DOMMouseScroll=function(t){this.fire("mousewheel",t)},dS.mousemove=Sa("mousemove","mouseover","mouseout"),dS.dragover=Sa("dragover","dragenter","dragleave"),dS.mouseout=Aa("mouseout"),dS.dragleave=Aa("dragleave"),dS.mousedown=function(t){this._down=this._active,this.fire("mousedown",t)},dS.click=function(t){this._down===this._active&&(this.fire("click",t),this._down=null)},dS.touchstart=function(t){this._touch=this.pickEvent(t.changedTouches[0]),this._first&&(this._active=this._touch,this._first=!1),this.fire("touchstart",t,!0)},dS.touchmove=function(t){this.fire("touchmove",t,!0)},dS.touchend=function(t){this.fire("touchend",t,!0),this._touch=null},dS.fire=function(t,e,n){var r,i,a=n?this._touch:this._active,o=this._handlers[t];if("click"===t&&a&&a.href?this.handleHref(e,a,a.href):("mouseover"===t||"mouseout"===t)&&a&&a.tooltip&&this.handleTooltip(e,a,"mouseover"===t?a.tooltip:null),o)for(e.vegaType=t,r=0,i=o.length;r<i;++r)o[r].handler.call(this._obj,e,a)},dS.on=function(t,e){var n=this.eventName(t),r=this._handlers;return(r[n]||(r[n]=[])).push({type:t,handler:e}),this},dS.off=function(t,e){var n,r=this.eventName(t),i=this._handlers[r];if(i){for(n=i.length;--n>=0;)i[n].type===t&&(e&&i[n].handler!==e||i.splice(n,1));return this}},dS.pickEvent=function(t){var e=ka(t,this._canvas),n=this._origin;return this.pick(this._scene,e[0],e[1],e[0]-n[0],e[1]-n[1])},dS.pick=function(t,e,n,r,i){var a=this.context();return uS[t.marktype].pick.call(this,a,t,e,n,r,i)};var pS="undefined"!=typeof window?window.devicePixelRatio||1:1,gS=J(za,Ma),vS=Ma.prototype,mS=new pn;gS.initialize=function(t,e,n,r){return this._canvas=Mn(1,1),t&&(xn(t,0).appendChild(this._canvas),this._canvas.setAttribute("class","marks")),vS.initialize.call(this,t,e,n,r)},gS.resize=function(t,e,n){return vS.resize.call(this,t,e,n),Na(this._canvas,this._width,this._height,this._origin),this._redraw=!0,this},gS.canvas=function(){return this._canvas},gS.context=function(){return this._canvas?this._canvas.getContext("2d"):null},gS.dirty=function(t){var e=Oa(t.bounds,t.mark.group);this._dirty.union(e)},gS._render=function(t){var e=this.context(),n=this._origin,r=this._width,i=this._height,a=this._dirty;return e.save(),a=this._redraw||a.empty()?(this._redraw=!1,null):Ta(e,a,n),this.clear(-n[0],-n[1],r,i),this.draw(e,t,a),e.restore(),this._dirty.clear(),this},gS.draw=function(t,e,n){var r=uS[e.marktype];e.clip&&Ca(t,e),r.draw.call(this,t,e,n),e.clip&&t.restore()},gS.clear=function(t,e,n,r){var i=this.context();i.clearRect(t,e,n,r),null!=this._bgcolor&&(i.fillStyle=this._bgcolor,i.fillRect(t,e,n,r))};var yS=J(Ra,wa);yS.initialize=function(t,e,n){var r=this._svg;return r&&(r.removeEventListener("click",this._hrefHandler),r.removeEventListener("mouseover",this._tooltipHandler),r.removeEventListener("mouseout",this._tooltipHandler)),this._svg=r=t&&bn(t,"svg"),r&&(r.addEventListener("click",this._hrefHandler),r.addEventListener("mouseover",this._tooltipHandler),r.addEventListener("mouseout",this._tooltipHandler)),wa.prototype.initialize.call(this,t,e,n)},yS.svg=function(){return this._svg},yS.on=function(t,e){var n=this.eventName(t),r=this._handlers,i={type:t,handler:e,listener:Pa(this,e)};return(r[n]||(r[n]=[])).push(i),this._svg&&this._svg.addEventListener(n,i.listener),this},yS.off=function(t,e){var n,r=this.eventName(t),i=this._svg,a=this._handlers[r];if(a){for(n=a.length;--n>=0;)(a[n].type===t&&!e||a[n].handler===e)&&(this._svg&&i.removeEventListener(r,a[n].listener),a.splice(n,1));return this}};var bS={version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"},_S={fill:"fill",fillOpacity:"fill-opacity",stroke:"stroke",strokeWidth:"stroke-width",strokeOpacity:"stroke-opacity",strokeCap:"stroke-linecap",strokeJoin:"stroke-linejoin",strokeDash:"stroke-dasharray",strokeDashOffset:"stroke-dashoffset",strokeMiterLimit:"stroke-miterlimit",opacity:"opacity"},xS=Object.keys(_S),wS=bS.xmlns,MS=J(qa,Ma),kS=Ma.prototype;MS.initialize=function(t,e,n,r){return t&&(this._svg=_n(t,0,"svg",wS),this._svg.setAttribute("class","marks"),xn(t,1),this._root=_n(this._svg,0,"g",wS),xn(this._svg,1)),this._defs={gradient:{},clipping:{}},this.background(this._bgcolor),kS.initialize.call(this,t,e,n,r)},MS.background=function(t){return arguments.length&&this._svg&&this._svg.style.setProperty("background-color",t),kS.background.apply(this,arguments)},MS.resize=function(t,e,n){return kS.resize.call(this,t,e,n),this._svg&&(this._svg.setAttribute("width",this._width),this._svg.setAttribute("height",this._height),this._svg.setAttribute("viewBox","0 0 "+this._width+" "+this._height),this._root.setAttribute("transform","translate("+this._origin+")")),this._dirty=[],this},MS.svg=function(){if(!this._svg)return null;var t={"class":"marks",width:this._width,height:this._height,viewBox:"0 0 "+this._width+" "+this._height};for(var e in bS)t[e]=bS[e];return Da("svg",t)+this._svg.innerHTML+La("svg")},MS._render=function(t){return this._dirtyCheck()&&(this._dirtyAll&&this._resetDefs(),this.draw(this._root,t),xn(this._root,1)),this.updateDefs(),this._dirty=[],++this._dirtyID,this},MS.updateDefs=function(){var t,e=this._svg,n=this._defs,r=n.el,i=0;for(t in n.gradient)r||(n.el=r=_n(e,0,"defs",wS)),Ua(r,n.gradient[t],i++);for(t in n.clipping)r||(n.el=r=_n(e,0,"defs",wS)),Fa(r,n.clipping[t],i++);r&&(0===i?(e.removeChild(r),n.el=null):xn(r,i))},MS._resetDefs=function(){var t=this._defs;t.gradient={},t.clipping={}},MS.dirty=function(t){t.dirty!==this._dirtyID&&(t.dirty=this._dirtyID,this._dirty.push(t))},MS.isDirty=function(t){return this._dirtyAll||!t._svg||t.dirty===this._dirtyID},MS._dirtyCheck=function(){this._dirtyAll=!0;var t=this._dirty;if(!t.length)return!0;var e,n,r,i,a,o,u,s=++this._dirtyID;for(a=0,o=t.length;a<o;++a)e=t[a],n=e.mark,n.marktype!==r&&(r=n.marktype,i=uS[r]),n.zdirty&&n.dirty!==s&&(this._dirtyAll=!1,n.dirty=s,ja(n.group,s)),e.exit?(i.nested&&n.items.length?(u=n.items[0],u._svg&&this._update(i,u._svg,u)):e._svg&&e._svg.parentNode.removeChild(e._svg),e._svg=null):(e=i.nested?n.items[0]:e,e._update!==s&&(e._svg&&e._svg.ownerSVGElement?this._update(i,e._svg,e):(this._dirtyAll=!1,ja(e,s)),e._update=s));return!this._dirtyAll},MS.draw=function(t,e,n){function r(t){var e=a.isDirty(t),n=$a(t,i,f,o.tag);e&&(a._update(o,n,t),s&&Ia(a,n,t)),f=n,++c}if(!this.isDirty(e))return e._svg;var i,a=this,o=uS[e.marktype],u=!1===e.interactive?"none":null,s="g"===o.tag,f=null,c=0;return i=$a(e,t,n,"g"),i.setAttribute("class",wn(e)),!s&&u&&i.style.setProperty("pointer-events",u),e.clip&&i.setAttribute("clip-path",zi(a,e,e.group)),o.nested?e.items.length&&r(e.items[0]):mi(e,r),xn(i,c),i};var ES=null,SS=null,AS={group:function(t,e,n){SS=e.__values__,ES=e.childNodes[1],t.foreground(Ba,n,this),ES=e.childNodes[0],t.background(Ba,n,this);var r=!1===n.mark.interactive?"none":null;r!==SS.events&&(ES.style.setProperty("pointer-events",r),SS.events=r)},text:function(t,e,n){var r=ua(n);r!==SS.text&&(e.textContent=r,SS.text=r),(r=fa(n))!==SS.font&&(e.style.setProperty("font",r),SS.font=r)}};MS._update=function(t,e,n){ES=e,SS=e.__values__,t.attr(Ba,n,this);var r=AS[t.type];r&&r.call(this,t,e,n),this.style(ES,n)},MS.style=function(t,e){if(null!=e){var n,r,i,a,o;for(n=0,r=xS.length;n<r;++n)i=xS[n],(o=e[i])!==SS[i]&&(a=_S[i],null==o?"fill"===a?t.style.setProperty(a,"none"):t.style.removeProperty(a):(o.id&&(this._defs.gradient[o.id]=o,o="url("+Ya()+"#"+o.id+")"),t.style.setProperty(a,o+"")),SS[i]=o)}};var CS=J(Ga,Ma),NS=Ma.prototype;CS.resize=function(t,e,n){NS.resize.call(this,t,e,n);var r=this._origin,i=this._text,a={"class":"marks",width:this._width,height:this._height,viewBox:"0 0 "+this._width+" "+this._height};for(var o in bS)a[o]=bS[o];return i.head=Da("svg",a),i.root=Da("g",{transform:"translate("+r+")"}),i.foot=La("g")+La("svg"),this},CS.svg=function(){var t=this._text;return t.head+t.defs+t.root+t.body+t.foot},CS._render=function(t){return this._text.body=this.mark(t),this._text.defs=this.buildDefs(),this},CS.buildDefs=function(){var t,e,n,r,i=this._defs,a="";for(e in i.gradient){for(n=i.gradient[e],r=n.stops,a+=Da("linearGradient",{id:e,x1:n.x1,x2:n.x2,y1:n.y1,y2:n.y2}),t=0;t<r.length;++t)a+=Da("stop",{offset:r[t].offset,"stop-color":r[t].color})+La("stop");a+=La("linearGradient")}for(e in i.clipping)n=i.clipping[e],a+=Da("clipPath",{id:e}),a+=Da("rect",{x:0,y:0,width:n.width,height:n.height})+La("rect"),a+=La("clipPath");return a.length>0?Da("defs")+a+La("defs"):""};var zS;CS.attributes=function(t,e){return zS={},t(Wa,e,this),zS},CS.href=function(t){var e,n=this,r=t.href;if(r){if(e=n._hrefs&&n._hrefs[r])return e;n.sanitizeURL(r).then(function(t){t["xlink:href"]=t.href,t.href=null,(n._hrefs||(n._hrefs={}))[r]=t})}return null},CS.mark=function(t){function e(e){var s=r.href(e);s&&(u+=Da("a",s)),n="g"!==a?Ha(e,t,a,o):null,u+=Da(a,r.attributes(i.attr,e),n),"text"===a?u+=Xa(ua(e)):"g"===a&&(u+=Da("path",r.attributes(i.background,e),Ha(e,t,"bgrect",o))+La("path"),u+=Da("g",r.attributes(i.foreground,e))+r.markGroup(e)+La("g")),u+=La(a),s&&(u+=La("a"))}var n,r=this,i=uS[t.marktype],a=i.tag,o=this._defs,u="";return"g"!==a&&!1===t.interactive&&(n='style="pointer-events: none;"'),u+=Da("g",{"class":wn(t),"clip-path":t.clip?zi(r,t,t.group):null},n),i.nested?t.items&&t.items.length&&e(t.items[0]):mi(t,e),u+La("g")},CS.markGroup=function(t){var e=this,n="";return mi(t,function(t){n+=e.mark(t)}),n};var TS={Canvas:"canvas",PNG:"png",SVG:"svg",None:"none"},OS={};OS.canvas=OS.png={renderer:za,headless:za,handler:Ea},OS.svg={renderer:qa,headless:Ga,handler:Ra},OS.none={};var RS=1e-9,PS=1,DS="_:mod:_",LS=uo.prototype;LS.set=function(t,e,n,r){var i=this,a=i[t],o=i[DS];return null!=e&&e>=0?(a[e]!==n||r)&&(a[e]=n,o[e+":"+t]=-1,o[t]=-1):(a!==n||r)&&(i[t]=n,o[t]=XM(n)?n.length:-1),i},LS.modified=function(t,e){var n,r=this[DS];if(!arguments.length){for(n in r)if(r[n])return!0;return!1}if(XM(t)){for(n=0;n<t.length;++n)if(r[t[n]])return!0;return!1}return null!=e&&e>=0?e<r[t]||!!r[e+":"+t]:!!r[t]},LS.clear=function(){return this[DS]={},this};var qS=0,US=new uo,FS=so.prototype;FS.targets=function(){return this._targets||(this._targets=Ka(JM))},FS.set=function(t){return this.value!==t?(this.value=t,1):0},FS.skip=fo(1),FS.modified=fo(2),FS.parameters=function(t,e){function n(t,n,r){r instanceof so?(r!==u&&(e&&r.targets().add(u),c.push(r)),f.push({op:r,name:t,index:n})):s.set(t,n,r)}e=!1!==e;var r,i,a,o,u=this,s=u._argval=u._argval||new uo,f=u._argops=u._argops||[],c=[];for(r in t)if(i=t[r],"pulse"===r)$(i).forEach(function(t){t instanceof so?t!==u&&(t.targets().add(u),c.push(t)):P("Pulse parameters must be operator instances.")}),u.source=i;else if(XM(i))for(s.set(r,-1,Array(a=i.length)),o=0;o<a;++o)n(r,o,i[o]);else n(r,-1,i);return this.marshall().clear(),c},FS.marshall=function(t){var e,n,r,i,a,o=this._argval||US,u=this._argops;if(u&&(r=u.length))for(n=0;n<r;++n)e=u[n],i=e.op,a=i.modified()&&i.stamp===t,o.set(e.name,e.index,i.value,a);return o},FS.evaluate=function(t){if(this._update){var e=this.marshall(t.stamp),n=this._update(e,t);if(e.clear(),n!==this.value)this.value=n;else if(!this.modified())return t.StopPropagation}},FS.run=function(t){if(t.stamp<=this.stamp)return t.StopPropagation;var e=this.skip()?(this.skip(!1),0):this.evaluate(t);return this.stamp=t.stamp,this.pulse=e||t};var jS=0,IS=ho.prototype;IS._filter=tk,IS._apply=ZM,IS.targets=function(){return this._targets||(this._targets=Ka(JM))},IS.consume=function(t){return arguments.length?(this._consume=!!t,this):!!this._consume},IS.receive=function(t){if(this._filter(t)){for(var e=this.value=this._apply(t),n=this._targets,r=n?n.length:0,i=0;i<r;++i)n[i].receive(e);this._consume&&(t.preventDefault(),t.stopPropagation())}},IS.filter=function(t){var e=po(t);return this.targets().add(e),e},IS.apply=function(t){var e=po(null,t);return this.targets().add(e),e},IS.merge=function(){var t=po();this.targets().add(t);for(var e=0,n=arguments.length;e<n;++e)arguments[e].targets().add(t);return t},IS.throttle=function(t){var e=-1;return this.filter(function(){var n=Date.now();return n-e>t?(e=n,1):0})},IS.debounce=function(t){var e=po();return this.targets().add(po(null,null,W(t,function(t){var n=t.dataflow;e.receive(t),n&&n.run&&n.run()}))),e},IS.between=function(t,e){var n=!1;return t.targets().add(po(null,null,function(){n=!0})),e.targets().add(po(null,null,function(){n=!1})),this.filter(function(){return n})};var $S={skip:!0},BS={},YS=xo.prototype;YS.StopPropagation=BS,YS.ADD=1,YS.REM=2,YS.MOD=4,YS.ADD_REM=3,YS.ADD_MOD=5,YS.ALL=7,YS.REFLOW=8,YS.SOURCE=16,YS.NO_SOURCE=32,YS.NO_FIELDS=64,YS.fork=function(t){return new xo(this.dataflow).init(this,t)},YS.addAll=function(){var t=this;return this.source&&this.source.length!==this.add.length?(t=new xo(this.dataflow).init(this),t.add=t.source,t):t},YS.init=function(t,e){var n=this;return n.stamp=t.stamp,n.encode=t.encode,!t.fields||64&e||(n.fields=t.fields),n.add=1&e?(n.addF=t.addF,t.add):(n.addF=null,[]),n.rem=2&e?(n.remF=t.remF,t.rem):(n.remF=null,[]),n.mod=4&e?(n.modF=t.modF,t.mod):(n.modF=null,[]),n.source=32&e?(n.srcF=null,null):(n.srcF=t.srcF,t.source),n},YS.runAfter=function(t){this.dataflow.runAfter(t)},YS.changed=function(t){var e=t||7;return 1&e&&this.add.length||2&e&&this.rem.length||4&e&&this.mod.length},YS.reflow=function(t){if(t)return this.fork(7).reflow();var e=this.add.length,n=this.source&&this.source.length;return n&&n!==e&&(this.mod=this.source,e&&this.filter(4,Mo(this,1))),this},YS.modifies=function(t){var e=$(t),n=this.fields||(this.fields={});return e.forEach(function(t){n[t]=!0}),this},YS.modified=function(t){var e=this.fields;return!(!this.mod.length||!e)&&(arguments.length?XM(t)?t.some(function(t){return e[t]}):e[t]:!!e)},YS.filter=function(t,e){var n=this;return 1&t&&(n.addF=wo(n.addF,e)),2&t&&(n.remF=wo(n.remF,e)),4&t&&(n.modF=wo(n.modF,e)),16&t&&(n.srcF=wo(n.srcF,e)),n},YS.materialize=function(t){t=t||7;var e=this;return 1&t&&e.addF&&(e.add=e.add.filter(e.addF),e.addF=null),2&t&&e.remF&&(e.rem=e.rem.filter(e.remF),e.remF=null),4&t&&e.modF&&(e.mod=e.mod.filter(e.modF),e.modF=null),16&t&&e.srcF&&(e.source=e.source.filter(e.srcF),e.srcF=null),e},YS.visit=function(t,e){var n,r,i=e;return 16&t?(dt(this.source,this.srcF,i),this):(1&t&&dt(this.add,this.addF,i),2&t&&dt(this.rem,this.remF,i),4&t&&dt(this.mod,this.modF,i),8&t&&(n=this.source)&&((r=this.add.length+this.mod.length)===n.length||(r?dt(n,Mo(this,5),i):dt(n,this.srcF,i))),this)};var GS={skip:!1,force:!1},WS=J(zo,xo);WS.fork=function(){return arguments.length&&arguments[0]&xo.prototype.ALL&&P("MultiPulse fork does not support tuple change sets."),new xo(this.dataflow).init(this,0)},WS.changed=function(t){return this.changes&t},WS.modified=function(t){var e=this,n=e.fields;return n&&e.changes&e.MOD?XM(t)?t.some(function(t){return n[t]}):n[t]:0},WS.filter=function(){P("MultiPulse does not support filtering.")},WS.materialize=function(){P("MultiPulse does not support materialization.")},WS.visit=function(t,e){var n=this,r=n.pulses,i=r.length,a=0;if(t&n.SOURCE)for(;a<i;++a)r[a].visit(t,e);else for(;a<i;++a)r[a].stamp===n.stamp&&r[a].visit(t,e);return n};var HS=Lo.prototype;HS.size=function(){return this.nodes.length},HS.clear=function(){return this.nodes=[],this},HS.peek=function(){return this.nodes[0]},HS.push=function(t){var e=this.nodes;return e.push(t),qo(e,0,e.length-1,this.cmp)},HS.pop=function(){var t,e=this.nodes,n=e.pop();return e.length?(t=e[0],e[0]=n,Uo(e,0,this.cmp)):t=n,t},HS.replace=function(t){var e=this.nodes,n=e[0];return e[0]=t,Uo(e,0,this.cmp),n},HS.pushpop=function(t){var e=this.nodes,n=e[0];return e.length&&this.cmp(n,t)<0&&(e[0]=t,t=n,Uo(e,0,this.cmp)),t};var XS=Fo.prototype;XS.stamp=function(){return this._clock},XS.loader=function(t){return arguments.length?(this._loader=t,this):this._loader},XS.cleanThreshold=1e4,XS.add=co,XS.connect=lo,XS.rank=bo,XS.rerank=_o,XS.pulse=So,XS.touch=ko,XS.update=Eo,XS.changeset=oo,XS.ingest=Ao,XS.request=No,XS.events=go,XS.on=vo,XS.run=To,XS.runAsync=Oo,XS.runAfter=Ro,XS._enqueue=Po,XS._getPulse=Do,XS.warn=jo("warn"),XS.info=jo("info"),XS.debug=jo("debug"),XS.logLevel=jo("level"),XS.error=function(t){throw t};var VS=J(Io,so);VS.run=function(t){if(t.stamp<=this.stamp)return t.StopPropagation;var e=(this.skip()?(this.skip(!1),0):this.evaluate(t))||t;return e!==t.StopPropagation&&(this.pulse=e),this.stamp=t.stamp,e},VS.evaluate=function(t){var e=this.marshall(t.stamp),n=this.transform(e,t);return e.clear(),n},VS.transform=function(){};var JS={},ZS={},QS=Go.prototype;QS.add=function(t){this._add.push(t)},QS.rem=function(t){this._rem.push(t)},QS.values=function(){if(this._get=null,0===this._rem.length)return this._add;var t,e,n,r=this._add,i=this._rem,a=this._key,o=r.length,u=i.length,s=Array(o-u),f={};for(t=0;t<u;++t)f[i[t][a]]=1;for(t=0,e=0;t<o;++t)f[(n=r[t])[a]]?f[n[a]]=0:s[e++]=n;return this._rem=[],this._add=s},QS.distinct=function(t){for(var e,n=this.values(),r=n.length,i={},a=0;--r>=0;)e=t(n[r])+"",i.hasOwnProperty(e)||(i[e]=1,++a);return a},QS.extent=function(t){if(this._get!==t||!this._ext){var e=this.values(),n=X(e,t);this._ext=[e[n[0]],e[n[1]]],this._get=t}return this._ext},QS.argmin=function(t){return this.extent(t)[0]||{}},QS.argmax=function(t){return this.extent(t)[1]||{}},QS.min=function(t){var e=this.extent(t)[0];return null!=e?t(e):1/0},QS.max=function(t){var e=this.extent(t)[1];return null!=e?t(e):-1/0},QS.quartile=function(t){return this._get===t&&this._q||(this._q=S(this.values(),t),this._get=t),this._q},QS.q1=function(t){return this.quartile(t)[0]},QS.q2=function(t){return this.quartile(t)[1]},QS.q3=function(t){return this.quartile(t)[2]},QS.ci=function(t){return this._get===t&&this._ci||(this._ci=M(this.values(),1e3,.05,t),this._get=t),this._ci},QS.ci0=function(t){return this.ci(t)[0]},QS.ci1=function(t){return this.ci(t)[1]};var KS={values:Ho({name:"values",init:"cell.store = true;",set:"cell.data.values()",idx:-1}),count:Ho({name:"count",set:"cell.num"}),missing:Ho({name:"missing",set:"this.missing"}),valid:Ho({name:"valid",set:"this.valid"}),sum:Ho({name:"sum",init:"this.sum = 0;",add:"this.sum += v;",rem:"this.sum -= v;",set:"this.sum"}),mean:Ho({name:"mean",init:"this.mean = 0;",add:"var d = v - this.mean; this.mean += d / this.valid;",rem:"var d = v - this.mean; this.mean -= this.valid ? d / this.valid : this.mean;",set:"this.mean"}),average:Ho({name:"average",set:"this.mean",req:["mean"],idx:1}),variance:Ho({name:"variance",init:"this.dev = 0;",add:"this.dev += d * (v - this.mean);",rem:"this.dev -= d * (v - this.mean);",set:"this.valid > 1 ? this.dev / (this.valid-1) : 0",req:["mean"],idx:1}),variancep:Ho({name:"variancep",set:"this.valid > 1 ? this.dev / this.valid : 0",req:["variance"],idx:2}),stdev:Ho({name:"stdev",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid-1)) : 0",req:["variance"],idx:2}),stdevp:Ho({name:"stdevp",set:"this.valid > 1 ? Math.sqrt(this.dev / this.valid) : 0",req:["variance"],idx:2}),stderr:Ho({name:"stderr",set:"this.valid > 1 ? Math.sqrt(this.dev / (this.valid * (this.valid-1))) : 0",req:["variance"],idx:2}),distinct:Ho({name:"distinct",set:"cell.data.distinct(this.get)",req:["values"],idx:3}),ci0:Ho({name:"ci0",set:"cell.data.ci0(this.get)",req:["values"],idx:3}),ci1:Ho({name:"ci1",set:"cell.data.ci1(this.get)",req:["values"],idx:3}),median:Ho({name:"median",set:"cell.data.q2(this.get)",req:["values"],idx:3}),q1:Ho({name:"q1",set:"cell.data.q1(this.get)",req:["values"],idx:3}),q3:Ho({name:"q3",set:"cell.data.q3(this.get)",req:["values"],idx:3}),argmin:Ho({name:"argmin",add:"if (v < this.min) this.argmin = t;",rem:"if (v <= this.min) this.argmin = null;",set:"this.argmin || cell.data.argmin(this.get)",req:["min"],str:["values"],idx:3}),argmax:Ho({name:"argmax",add:"if (v > this.max) this.argmax = t;",rem:"if (v >= this.max) this.argmax = null;",set:"this.argmax || cell.data.argmax(this.get)",req:["max"],str:["values"],idx:3}),min:Ho({name:"min",init:"this.min = null;",add:"if (v < this.min || this.min === null) this.min = v;",rem:"if (v <= this.min) this.min = NaN;",set:"this.min = (isNaN(this.min) ? cell.data.min(this.get) : this.min)",str:["values"],idx:4}),max:Ho({name:"max",init:"this.max = null;",add:"if (v > this.max || this.max === null) this.max = v;",rem:"if (v >= this.max) this.max = NaN;",set:"this.max = (isNaN(this.max) ? cell.data.max(this.get) : this.max)",str:["values"],idx:4})},tA=J(Zo,Io);tA.transform=function(t,e){var n,r=this,i=e.fork(e.NO_SOURCE|e.NO_FIELDS);return this.stamp=i.stamp,this.value&&((n=t.modified())||e.modified(this._inputs))?(this._prev=this.value,this.value=n?this.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(this.value=this.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),i.modifies(this._outputs),r._drop=!1!==t.drop,t.cross&&r._dims.length>1&&(r._drop=!1,this.cross()),r.changes(i)},tA.cross=function(){function t(t){var e,n,r,u;for(e in t)for(r=t[e].tuple,n=0;n<o;++n)a[n][u=r[i[n]]]=u}function e(t,u,s){var f,c,l=i[s],h=a[s++];for(f in h)u[l]=h[f],c=t?t+"|"+f:f,s<o?e(c,u,s):r[c]||n.cell(c,u)}var n=this,r=n.value,i=n._dnames,a=i.map(function(){return{}}),o=i.length;t(n._prev),t(r),e("",{},0)},tA.init=function(t){function e(t){for(var e,r=t.fields,a=0,o=r.length;a<o;++a)i[e=r[a]]||(i[e]=1,n.push(e))}var n=this._inputs=[],r=this._outputs=[],i={};this._dims=$(t.groupby),this._dnames=this._dims.map(function(t){var n=O(t);return e(t),r.push(n),n}),this.cellkey=t.key?t.key:0===this._dims.length?function(){return""}:1===this._dims.length?this._dims[0]:Ko,this._countOnly=!0,this._counts=[],this._measures=[];var a,o,u,s,f,c,l=t.fields||[null],h=t.ops||["count"],d=t.as||[],p=l.length,g={};for(p!==h.length&&P("Unmatched number of fields and aggregate ops."),c=0;c<p;++c)a=l[c],
o=h[c],null==a&&"count"!==o&&P("Null aggregate field specified."),s=O(a),f=Qo(o,s,d[c]),r.push(f),"count"!==o?(u=g[s],u||(e(a),u=g[s]=[],u.field=a,this._measures.push(u)),"count"!==o&&(this._countOnly=!1),u.push(Wo(o,f))):this._counts.push(f);return this._measures=this._measures.map(function(t){return Jo(t,t.field)}),{}},tA.cellkey=Ko,tA.cell=function(t,e){var n=this.value[t];return n?0===n.num&&this._drop&&n.stamp<this.stamp?(n.stamp=this.stamp,this._adds[this._alen++]=n):n.stamp<this.stamp&&(n.stamp=this.stamp,this._mods[this._mlen++]=n):(n=this.value[t]=this.newcell(t,e),this._adds[this._alen++]=n),n},tA.newcell=function(t,e){var n={key:t,num:0,agg:null,tuple:this.newtuple(e,this._prev&&this._prev[t]),stamp:this.stamp,store:!1};if(!this._countOnly){var r,i=this._measures,a=i.length;for(n.agg=Array(a),r=0;r<a;++r)n.agg[r]=new i[r](n,n.tuple)}return n.store&&(n.data=new Go),n},tA.newtuple=function(t,e){var n,r,i=this._dnames,a=this._dims,o={};for(n=0,r=a.length;n<r;++n)o[i[n]]=a[n](t);return e?io(e.tuple,o):eo(o)},tA.add=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num+=1,!this._countOnly)for(a.store&&a.data.add(t),e=a.agg,n=0,r=e.length;n<r;++n)e[n].add(e[n].get(t),t)},tA.rem=function(t){var e,n,r,i=this.cellkey(t),a=this.cell(i,t);if(a.num-=1,!this._countOnly)for(a.store&&a.data.rem(t),e=a.agg,n=0,r=e.length;n<r;++n)e[n].rem(e[n].get(t),t)},tA.celltuple=function(t){var e,n,r,i=t.tuple,a=this._counts;for(t.store&&t.data.values(),n=0,r=a.length;n<r;++n)i[a[n]]=t.num;if(!this._countOnly)for(e=t.agg,n=0,r=e.length;n<r;++n)e[n].set();return i},tA.changes=function(t){var e,n,r,i,a=this._adds,o=this._mods,u=this._prev,s=this._drop,f=t.add,c=t.rem,l=t.mod;if(u)for(n in u)c.push(u[n].tuple);for(r=0,i=this._alen;r<i;++r)f.push(this.celltuple(a[r])),a[r]=null;for(r=0,i=this._mlen;r<i;++r)e=o[r],(0===e.num&&s?c:l).push(this.celltuple(e)),o[r]=null;return this._alen=this._mlen=0,this._prev=null,t};var eA=J(tu,Io);eA.transform=function(t,e){var n=this._bins(t),r=n.start,i=n.step,a=t.as||["bin0","bin1"],o=a[0],u=a[1],s=t.modified()?(e=e.reflow(!0),e.SOURCE):e.modified(R(t.field))?e.ADD_MOD:e.ADD;return e.visit(s,function(t){var e=n(t);t[o]=e,t[u]=null==e?null:r+i*(1+(e-r)/i)}),e.modifies(a)},eA._bins=function(t){if(this.value&&!t.modified())return this.value;var n,r,i=t.field,a=e(t),o=a.start,u=a.stop,s=a.step;null!=(n=t.anchor)&&(r=n-(o+s*Math.floor((n-o)/s)),o+=r,u+=r);var f=function(t){var e=i(t);return null==e?null:(e=Math.max(o,Math.min(+e,u-s)),o+s*Math.floor((e-o)/s))};return f.start=o,f.stop=u,f.step=s,this.value=T(f,R(i),t.name||"bin_"+O(i))},J(eu,Io).transform=function(t,e){var n,r=e.fork(e.ALL),i=e.changed(e.ADD),a=e.changed(),o=t.sort,u=this.value,s=function(t){u.push(t)},f=0;return r.rem.length&&(n={},r.visit(r.REM,function(t){n[t._id]=1,++f}),u=u.filter(function(t){return!n[t._id]})),o?((t.modified("sort")||e.modified(o.fields))&&(u.sort(o),a=!0),i&&(u=nt(o,u,r.add.sort(o)))):i&&r.visit(r.ADD,s),this.modified(a),this.value=r.source=u,r},J(nu,so);var nA=J(iu,Io);nA.transform=function(t,e){function n(e){return function(n){for(var r,i=au(u(n),t["case"],a)||[],s=0,f=i.length;s<f;++s)o.test(r=i[s])||e(r)}}var r=this._parameterCheck(t,e),i=this._counts,a=this._match,o=this._stop,u=t.field,s=t.as||["text","count"],f=n(function(t){i[t]=1+(i[t]||0)}),c=n(function(t){i[t]-=1});return r?e.visit(e.SOURCE,f):(e.visit(e.ADD,f),e.visit(e.REM,c)),this._finish(e,s)},nA._parameterCheck=function(t,e){var n=!1;return!t.modified("stopwords")&&this._stop||(this._stop=new RegExp("^"+(t.stopwords||"")+"$","i"),n=!0),!t.modified("pattern")&&this._match||(this._match=new RegExp(t.pattern||"[\\w']+","g"),n=!0),(t.modified("field")||e.modified(t.field.fields))&&(n=!0),n&&(this._counts={}),n},nA._finish=function(t,e){var n,r,i,a=this._counts,o=this._tuples||(this._tuples={}),u=e[0],s=e[1],f=t.fork();for(n in a)r=o[n],i=a[n]||0,!r&&i?(o[n]=r=eo({}),r[u]=n,r[s]=i,f.add.push(r)):0===i?(r&&f.rem.push(r),a[n]=null,o[n]=null):r[s]!==i&&(r[s]=i,f.mod.push(r));return f.modifies(e)},J(ou,Io).transform=function(t,e){var n=e.fork(e.NO_SOURCE),r=this.value,i=t.as||["a","b"],a=i[0],o=i[1];return!r||e.changed(e.ADD_REM)||t.modified("as")||t.modified("filter")?(r&&(n.rem=r),n.add=this.value=uu(e.source,a,o,t.filter||tk)):n.mod=r,n.source=this.value,n.modifies(i)};var rA={kde:A,mixture:N,normal:E,uniform:z},iA="distributions",aA="function",oA="field";J(fu,Io).transform=function(t,e){var n=e.fork(e.NO_SOURCE|e.NO_FIELDS);if(!this.value||e.changed()||t.modified()){var r=su(t.distribution,cu(e)),i=t.method||"pdf";"pdf"!==i&&"cdf"!==i&&P("Invalid density method: "+i),t.extent||r.data||P("Missing density extent parameter."),i=r[i];var a=t.as||["value","density"],o=t.extent||f(r.data()),u=(o[1]-o[0])/(t.steps||100),s=c(o[0],o[1]+u/2,u).map(function(t){var e={};return e[a[0]]=t,e[a[1]]=i(t),eo(e)});this.value&&(n.rem=this.value),this.value=n.add=n.source=s}return n},J(lu,Io).transform=function(t,e){var n,r=this.value,i=t.field,a=r[0],o=r[1],u=e.ADD;n=e.changed()||e.modified(i.fields)||t.modified("field"),n&&(u=e.SOURCE,a=1/0,o=-1/0),e.visit(u,function(t){var e=i(t);e<a&&(a=e),e>o&&(o=e)}),this.value=[a,o]};var uA=J(hu,so);uA.connect=function(t){return this.targets().add(t),t.source=this},uA.add=function(t){this.value.add.push(t)},uA.rem=function(t){this.value.rem.push(t)},uA.mod=function(t){this.value.mod.push(t)},uA.init=function(t){this.value.init(t,t.NO_SOURCE)},uA.evaluate=function(){return this.value};var sA=J(du,Io);sA.activate=function(t){this._targets[this._targets.active++]=t},sA.subflow=function(t,e,n,r){var i,a,o=this.value,u=o.hasOwnProperty(t)&&o[t];return u?u.value.stamp<n.stamp&&(u.init(n),this.activate(u)):(a=r||(a=this._group[t])&&a.tuple,i=n.dataflow,u=i.add(new hu(n.fork(n.NO_SOURCE),this)).connect(e(i,t,a)),o[t]=u,this.activate(u)),u},sA.transform=function(t,e){function n(t){return i.subflow(t,o,e)}var r=e.dataflow,i=this,a=t.key,o=t.subflow,u=this._keys,s=t.modified("key");return this._group=t.group||{},this._targets.active=0,e.visit(e.ADD,function(t){var e=a(t);u.set(t._id,e),n(e).add(t)}),e.visit(e.REM,function(t){var e=u.get(t._id);u["delete"](t._id),n(e).rem(t)}),s||e.modified(a.fields)?e.visit(e.MOD,function(t){var e=u.get(t._id),r=a(t);e===r?n(r).mod(t):(u.set(t._id,r),n(e).rem(t),n(r).add(t))}):e.changed(e.MOD)&&e.visit(e.MOD,function(t){n(u.get(t._id)).mod(t)}),s&&e.visit(e.REFLOW,function(t){var e=u.get(t._id),r=a(t);e!==r&&(u.set(t._id,r),n(e).rem(t),n(r).add(t))}),u.empty>r.cleanThreshold&&r.runAfter(u.clean),e},J(pu,so),J(vu,Io).transform=function(t,e){function n(e){var n=f(e,t),r=i.get(e._id);n&&r?(i["delete"](e._id),o.push(e)):n||r?c&&n&&!r&&s.push(e):(i.set(e._id,1),u.push(e))}var r=e.dataflow,i=this.value,a=e.fork(),o=a.add,u=a.rem,s=a.mod,f=t.expr,c=!0;return e.visit(e.REM,function(t){i.has(t._id)?i["delete"](t._id):u.push(t)}),e.visit(e.ADD,function(e){f(e,t)?o.push(e):i.set(e._id,1)}),e.visit(e.MOD,n),t.modified()&&(c=!1,e.visit(e.REFLOW,n)),i.empty>r.cleanThreshold&&r.runAfter(i.clean),a},J(mu,Io).transform=function(t,e){function n(t){for(var e,n=a[t._id]=Array(h),r=0;r<h;++r)e=n[r]=no(t),e[f]=l[r],e[c]=u[r](t),p.add.push(e)}function r(t){for(var e,n=a[t._id],r=0;r<h;++r)v&1<<r&&(e=ro(t,n[r],d),e[f]=l[r],e[c]=u[r](t),p.mod.push(e))}var i,a=this.value,o=t.modified("fields"),u=t.fields,s=t.as||["key","value"],f=s[0],c=s[1],l=u.map(yu),h=u.length,d=e.stamp,p=e.fork(e.NO_SOURCE),g=0,v=0;if(o){for(i in a)p.rem.push.apply(p.rem,a[i]);a=this.value={},e.visit(e.SOURCE,n)}else{for(e.visit(e.ADD,n);g<h;++g)e.modified(u[g].fields)&&(v|=1<<g);v&&e.visit(e.MOD,r),e.visit(e.REM,function(t){p.rem.push.apply(p.rem,a[t._id]),a[t._id]=null})}return p.modifies(s)},J(bu,Io).transform=function(t,e){function n(e){e[i]=r(e,t)}var r=t.expr,i=t.as,a=t.modified(),o=t.initonly?e.ADD:a?e.SOURCE:e.modified(r.fields)?e.ADD_MOD:e.ADD;return a&&(e=e.materialize().reflow(!0)),e.visit(o,n).modifies(i)},J(_u,Io).transform=function(t,e){var n,r,i,a=this.value,o=e.fork(e.ALL),u=t.size-a.length,s=t.generator;if(u>0){for(n=[];--u>=0;)n.push(i=eo(s(t))),a.push(i);o.add=o.add.length?o.materialize(o.ADD).add.concat(n):n}else r=a.slice(0,-u),o.rem=o.rem.length?o.materialize(o.REM).rem.concat(r):r,a=a.slice(-u);return o.source=this.value=a,o};var fA={value:"value",median:y,mean:m,min:_,max:v},cA=[];J(xu,Io).transform=function(t,e){var n,r,i,a,o,u,s,f,c,l,h=e.fork(e.ALL),d=wu(t),p=Mu(t),g=O(t.field),v=t.groupby.map(O),m=t.orderby.map(O),y=ku(e.source,t.groupby,t.orderby),b=[],_=this.value,x=y.domain.length;for(o=0,f=y.length;o<f;++o)for(n=y[o],i=n.values,r=NaN,s=0;s<x;++s)if(null==n[s]){for(a=y.domain[s],l={_impute:!0},u=0,c=i.length;u<c;++u)l[v[u]]=i[u];for(u=0,c=a.length;u<c;++u)l[m[u]]=a[u];l[g]=isNaN(r)?r=d(n,p):r,b.push(eo(l))}return b.length&&(h.add=h.materialize(h.ADD).add.concat(b)),_.length&&(h.rem=h.materialize(h.REM).rem.concat(_)),this.value=b,h};var lA=J(Eu,Zo);lA.transform=function(t,e){var n,r=this,i=t.modified();return r.value&&(i||e.modified(r._inputs))?(n=r.value=i?r.init(t):{},e.visit(e.SOURCE,function(t){r.add(t)})):(n=r.value=r.value||this.init(t),e.visit(e.REM,function(t){r.rem(t)}),e.visit(e.ADD,function(t){r.add(t)})),r.changes(),e.visit(e.SOURCE,function(t){ro(n[r.cellkey(t)].tuple,t)}),e.reflow(i).modifies(this._outputs)},lA.changes=function(){var t,e,n=this._adds,r=this._mods;for(t=0,e=this._alen;t<e;++t)this.celltuple(n[t]),n[t]=null;for(t=0,e=this._mlen;t<e;++t)this.celltuple(r[t]),r[t]=null;this._alen=this._mlen=0},J(Su,so),J(Cu,Io).transform=function(t,e){var n,r,i,a=e,o=t.as,u=t.fields,s=t.index,f=t.values,c=null==t["default"]?null:t["default"],l=t.modified(),h=l?e.SOURCE:e.ADD,d=u.length;return f?(r=f.length,d>1&&!o&&P('Multi-field lookup requires explicit "as" parameter.'),o&&o.length!==d*r&&P('The "as" parameter has too few output field names.'),o=o||f.map(O),n=function(t){for(var e,n,i=0,a=0;i<d;++i)if(null==(n=s.get(u[i](t))))for(e=0;e<r;++e,++a)t[o[a]]=c;else for(e=0;e<r;++e,++a)t[o[a]]=f[e](n)}):(o||P("Missing output field names."),n=function(t){for(var e,n=0;n<d;++n)e=s.get(u[n](t)),t[o[n]]=null==e?c:e}),l?a=e.reflow(!0):(i=u.some(function(t){return e.modified(t.fields)}),h|=i?e.MOD:0),e.visit(h,n),a.modifies(o)},J(Nu,so),J(Tu,so),J(Ru,Io),Ru.prototype.transform=function(t,e){return this.modified(t.modified()),this.value=t,e.fork(e.NO_SOURCE|e.NO_FIELDS)},J(Pu,du).transform=function(t,e){var n=this,r=t.subflow,i=t.field;return t.modified("field")&&P("PreFacet does not support field modification."),this._targets.active=0,e.visit(e.MOD,function(t){var a=n.subflow(t._id,r,e,t);i?i(t).forEach(function(t){a.mod(t)}):a.mod(t)}),e.visit(e.ADD,function(t){var a=n.subflow(t._id,r,e,t);i?i(t).forEach(function(t){a.add(eo(t))}):a.add(t)}),e.visit(e.REM,function(t){var a=n.subflow(t._id,r,e,t);i?i(t).forEach(function(t){a.rem(t)}):a.rem(t)}),e},J(Du,Io).transform=function(t,e){return this.value=t.value,t.modified("value")?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},J(Lu,Io).transform=function(t,e){e.source||P("Rank transform requires an upstream data source.");var n,r=t.normalize,i=t.field,a=t.as||"rank",o={},u=-1;return i?(e.visit(e.SOURCE,function(t){var e=i(t);null==o[e]&&(o[e]=++u)}),e.visit(e.SOURCE,r&&--u?function(t){t[a]=o[i(t)]/u}:function(t){t[a]=o[i(t)]})):(u+=e.source.length,n=-1,e.visit(e.SOURCE,r&&u?function(t){t[a]=++n/u}:function(t){t[a]=++n})),e.reflow(t.modified()).modifies(a)},J(qu,Io).transform=function(t,e){var n,r=this.value||(n=e=e.addAll(),this.value={});return t.derive&&(n=e.fork(),e.visit(e.ADD,function(t){var e=no(t);r[t._id]=e,n.add.push(e)}),e.visit(e.MOD,function(t){n.mod.push(ro(t,r[t._id]))}),e.visit(e.REM,function(t){n.rem.push(r[t._id]),r[t._id]=null})),n},J(Uu,Io).transform=function(t,e){function n(t){var e,n;o.length<a?o.push(t):(n=~~(u*Math.random()))<o.length&&n>=s&&(e=o[n],f[e._id]&&r.rem.push(e),o[n]=t),++u}var r=e.fork(),i=t.modified("size"),a=t.size,o=this.value,u=this.count,s=0,f=o.reduce(function(t,e){return t[e._id]=1,t},{});if(e.rem.length&&(e.visit(e.REM,function(t){f[t._id]&&(f[t._id]=-1,r.rem.push(t)),--u}),o=o.filter(function(t){return-1!==f[t._id]})),(e.rem.length||i)&&o.length<a&&e.source&&(s=u=o.length,e.visit(e.SOURCE,function(t){f[t._id]||n(t)}),s=-1),i&&o.length>a){for(var c=0,l=o.length-a;c<l;++c)f[o[c]._id]=-1,r.rem.push(o[c]);o=o.slice(l)}return e.mod.length&&e.visit(e.MOD,function(t){f[t._id]&&r.mod.push(t)}),e.add.length&&e.visit(e.ADD,n),(e.add.length||s<0)&&(r.add=o.filter(function(t){return!f[t._id]})),this.count=u,this.value=r.source=o,r},J(Fu,Io).transform=function(t,e){if(!this.value||t.modified()){var n=e.materialize().fork(e.MOD);return n.rem=this.value?e.rem.concat(this.value):e.rem,n.source=this.value=c(t.start,t.stop,t.step||1).map(eo),n.add=e.add.concat(this.value),n}},J(ju,Io).transform=function(t,e){return this.value=e.source,e.changed()?e.fork(e.NO_SOURCE|e.NO_FIELDS):e.StopPropagation},J(Iu,Io).transform=function(t,e){function n(t){a.set(i(t),t)}var r=e.dataflow,i=t.field,a=this.value,o=!0;return t.modified("field")||e.modified(i.fields)?(a.clear(),e.visit(e.SOURCE,n)):e.changed()?(e.visit(e.REM,function(t){a["delete"](i(t))}),e.visit(e.ADD,n)):o=!1,this.modified(o),a.empty>r.cleanThreshold&&r.runAfter(a.clean),e.fork()},J($u,Io).transform=function(t,e){(!this.value||t.modified("field")||t.modified("sort")||e.changed()||t.sort&&e.modified(t.sort.fields))&&(this.value=(t.sort?e.source.slice().sort(t.sort):e.source).map(t.field))};var hA={type:"Aggregate",metadata:{generates:!0,changes:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax"]},{name:"as",type:"string",array:!0},{name:"drop",type:"boolean","default":!0},{name:"cross",type:"boolean","default":!1},{name:"key",type:"field"}]},dA={type:"Bin",metadata:{modifies:!0},params:[{name:"field",type:"field",required:!0},{name:"anchor",type:"number"},{name:"maxbins",type:"number","default":20},{name:"base",type:"number","default":10},{name:"divide",type:"number",array:!0,"default":[5,2]},{name:"extent",type:"number",array:!0,length:2,required:!0},{name:"step",type:"number"},{name:"steps",type:"number",array:!0},{name:"minstep",type:"number","default":0},{name:"nice",type:"boolean","default":!0},{name:"name",type:"string"},{name:"as",type:"string",array:!0,length:2,"default":["bin0","bin1"]}]},pA={type:"Collect",metadata:{source:!0},params:[{name:"sort",type:"compare"}]},gA={type:"CountPattern",metadata:{generates:!0,changes:!0},params:[{name:"field",type:"field",required:!0},{name:"case",type:"enum",values:["upper","lower","mixed"],"default":"mixed"},{name:"pattern",type:"string","default":'[\\w"]+'},{name:"stopwords",type:"string","default":""},{name:"as",type:"string",array:!0,length:2,"default":["text","count"]}]},vA={type:"Cross",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"filter",type:"expr"},{name:"as",type:"string",array:!0,length:2,"default":["a","b"]}]},mA=[{key:{"function":"normal"},params:[{name:"mean",type:"number","default":0},{name:"stdev",type:"number","default":1}]},{key:{"function":"uniform"},params:[{name:"min",type:"number","default":0},{name:"max",type:"number","default":1}]},{key:{"function":"kde"},params:[{name:"field",type:"field",required:!0},{name:"from",type:"data"},{name:"bandwidth",type:"number","default":0}]}],yA={key:{"function":"mixture"},params:[{name:"distributions",type:"param",array:!0,params:mA},{name:"weights",type:"number",array:!0}]},bA={type:"Density",metadata:{generates:!0,source:!0},params:[{name:"extent",type:"number",array:!0,length:2},{name:"steps",type:"number","default":100},{name:"method",type:"string","default":"pdf",values:["pdf","cdf"]},{name:"distribution",type:"param",params:mA.concat(yA)},{name:"as",type:"string",array:!0,"default":["value","density"]}]},_A={type:"Extent",metadata:{},params:[{name:"field",type:"field",required:!0}]},xA={type:"Filter",metadata:{changes:!0},params:[{name:"expr",type:"expr",required:!0}]},wA={type:"Fold",metadata:{generates:!0,changes:!0},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0,length:2,"default":["key","value"]}]},MA={type:"Formula",metadata:{modifies:!0},params:[{name:"expr",type:"expr",required:!0},{name:"as",type:"string",required:!0},{name:"initonly",type:"boolean"}]},kA={type:"Impute",metadata:{changes:!0},params:[{name:"field",type:"field",required:!0},{name:"groupby",type:"field",array:!0},{name:"orderby",type:"field",array:!0},{name:"method",type:"enum","default":"value",values:["value","mean","median","max","min"]},{name:"value","default":0}]},EA={type:"JoinAggregate",metadata:{modifies:!0},params:[{name:"groupby",type:"field",array:!0},{name:"fields",type:"field",array:!0},{name:"ops",type:"enum",array:!0,values:["count","valid","missing","distinct","sum","mean","average","variance","variancep","stdev","stdevp","stderr","median","q1","q3","ci0","ci1","min","max","argmin","argmax"]},{name:"as",type:"string",array:!0},{name:"key",type:"field"}]},SA={type:"Lookup",metadata:{modifies:!0},params:[{name:"index",type:"index",params:[{name:"from",type:"data",required:!0},{name:"key",type:"field",required:!0}]},{name:"values",type:"field",array:!0},{name:"fields",type:"field",array:!0,required:!0},{name:"as",type:"string",array:!0},{name:"default","default":null}]},AA={type:"Rank",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"normalize",type:"boolean","default":!1},{name:"as",type:"string","default":"rank"}]},CA={type:"Sample",metadata:{source:!0,changes:!0},params:[{name:"size",type:"number","default":1e3}]},NA={type:"Sequence",metadata:{generates:!0,source:!0},params:[{name:"start",type:"number",required:!0},{name:"stop",type:"number",required:!0},{name:"step",type:"number","default":1}],output:["value"]};$o(hA,Zo),$o(dA,tu),$o(pA,eu),$o(gA,iu),$o(vA,ou),$o(bA,fu),$o(_A,lu),$o(xA,vu),$o(wA,mu),$o(MA,bu),$o(kA,xu),$o(EA,Eu),$o(SA,Cu),$o(AA,Lu),$o(CA,Uu),$o(NA,Fu),Yo("Compare",nu),Yo("Facet",du),Yo("Field",pu),Yo("Generate",_u),Yo("Key",Su),Yo("MultiExtent",Nu),Yo("MultiValues",Tu),Yo("Params",Ru),Yo("PreFacet",Pu),Yo("Proxy",Du),Yo("Relay",qu),Yo("Sieve",ju),Yo("Subflow",hu),Yo("TupleIndex",Iu),Yo("Values",$u);var zA=Array.prototype,TA=zA.map,OA=zA.slice,RA={name:"implicit"},PA="\\s*([+-]?\\d+)\\s*",DA="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)\\s*",LA="\\s*([+-]?\\d*\\.?\\d+(?:[eE][+-]?\\d+)?)%\\s*",qA=/^#([0-9a-f]{3})$/,UA=/^#([0-9a-f]{6})$/,FA=new RegExp("^rgb\\("+[PA,PA,PA]+"\\)$"),jA=new RegExp("^rgb\\("+[LA,LA,LA]+"\\)$"),IA=new RegExp("^rgba\\("+[PA,PA,PA,DA]+"\\)$"),$A=new RegExp("^rgba\\("+[LA,LA,LA,DA]+"\\)$"),BA=new RegExp("^hsl\\("+[DA,LA,LA]+"\\)$"),YA=new RegExp("^hsla\\("+[DA,LA,LA,DA]+"\\)$"),GA={aliceblue:15792383,antiquewhite:16444375,aqua:65535,aquamarine:8388564,azure:15794175,beige:16119260,bisque:16770244,black:0,blanchedalmond:16772045,blue:255,blueviolet:9055202,brown:10824234,burlywood:14596231,cadetblue:6266528,chartreuse:8388352,chocolate:13789470,coral:16744272,cornflowerblue:6591981,cornsilk:16775388,crimson:14423100,cyan:65535,darkblue:139,darkcyan:35723,darkgoldenrod:12092939,darkgray:11119017,darkgreen:25600,darkgrey:11119017,darkkhaki:12433259,darkmagenta:9109643,darkolivegreen:5597999,darkorange:16747520,darkorchid:10040012,darkred:9109504,darksalmon:15308410,darkseagreen:9419919,darkslateblue:4734347,darkslategray:3100495,darkslategrey:3100495,darkturquoise:52945,darkviolet:9699539,deeppink:16716947,deepskyblue:49151,dimgray:6908265,dimgrey:6908265,dodgerblue:2003199,firebrick:11674146,floralwhite:16775920,forestgreen:2263842,fuchsia:16711935,gainsboro:14474460,ghostwhite:16316671,gold:16766720,goldenrod:14329120,gray:8421504,green:32768,greenyellow:11403055,grey:8421504,honeydew:15794160,hotpink:16738740,indianred:13458524,indigo:4915330,ivory:16777200,khaki:15787660,lavender:15132410,lavenderblush:16773365,lawngreen:8190976,lemonchiffon:16775885,lightblue:11393254,lightcoral:15761536,lightcyan:14745599,lightgoldenrodyellow:16448210,lightgray:13882323,lightgreen:9498256,lightgrey:13882323,lightpink:16758465,lightsalmon:16752762,lightseagreen:2142890,lightskyblue:8900346,lightslategray:7833753,lightslategrey:7833753,lightsteelblue:11584734,lightyellow:16777184,lime:65280,limegreen:3329330,linen:16445670,magenta:16711935,maroon:8388608,mediumaquamarine:6737322,mediumblue:205,mediumorchid:12211667,mediumpurple:9662683,mediumseagreen:3978097,mediumslateblue:8087790,mediumspringgreen:64154,mediumturquoise:4772300,mediumvioletred:13047173,midnightblue:1644912,mintcream:16121850,mistyrose:16770273,moccasin:16770229,navajowhite:16768685,navy:128,oldlace:16643558,olive:8421376,olivedrab:7048739,orange:16753920,orangered:16729344,orchid:14315734,palegoldenrod:15657130,palegreen:10025880,paleturquoise:11529966,palevioletred:14381203,papayawhip:16773077,peachpuff:16767673,peru:13468991,pink:16761035,plum:14524637,powderblue:11591910,purple:8388736,rebeccapurple:6697881,red:16711680,rosybrown:12357519,royalblue:4286945,saddlebrown:9127187,salmon:16416882,sandybrown:16032864,seagreen:3050327,seashell:16774638,sienna:10506797,silver:12632256,skyblue:8900331,slateblue:6970061,slategray:7372944,slategrey:7372944,snow:16775930,springgreen:65407,steelblue:4620980,tan:13808780,teal:32896,thistle:14204888,tomato:16737095,turquoise:4251856,violet:15631086,wheat:16113331,white:16777215,whitesmoke:16119285,yellow:16776960,yellowgreen:10145074};Hu(Vu,Ju,{displayable:function(){return this.rgb().displayable()},toString:function(){return this.rgb()+""}}),Hu(es,ts,Xu(Vu,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new es(this.r*t,this.g*t,this.b*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new es(this.r*t,this.g*t,this.b*t,this.opacity)},rgb:function(){return this},displayable:function(){return 0<=this.r&&this.r<=255&&0<=this.g&&this.g<=255&&0<=this.b&&this.b<=255&&0<=this.opacity&&this.opacity<=1},toString:function(){var t=this.opacity;return t=isNaN(t)?1:Math.max(0,Math.min(1,t)),(1===t?"rgb(":"rgba(")+Math.max(0,Math.min(255,Math.round(this.r)||0))+", "+Math.max(0,Math.min(255,Math.round(this.g)||0))+", "+Math.max(0,Math.min(255,Math.round(this.b)||0))+(1===t?")":", "+t+")")}})),Hu(as,is,Xu(Vu,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new as(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new as(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=this.h%360+360*(this.h<0),e=isNaN(t)||isNaN(this.s)?0:this.s,n=this.l,r=n+(n<.5?n:1-n)*e,i=2*n-r;return new es(os(t>=240?t-240:t+120,i,r),os(t,i,r),os(t<120?t+240:t-120,i,r),this.opacity)},displayable:function(){return(0<=this.s&&this.s<=1||isNaN(this.s))&&0<=this.l&&this.l<=1&&0<=this.opacity&&this.opacity<=1}}));var WA=Math.PI/180,HA=180/Math.PI,XA=.95047,VA=1,JA=1.08883,ZA=4/29,QA=6/29,KA=3*QA*QA,tC=QA*QA*QA;Hu(fs,ss,Xu(Vu,{brighter:function(t){return new fs(this.l+18*(null==t?1:t),this.a,this.b,this.opacity)},darker:function(t){return new fs(this.l-18*(null==t?1:t),this.a,this.b,this.opacity)},rgb:function(){var t=(this.l+16)/116,e=isNaN(this.a)?t:t+this.a/500,n=isNaN(this.b)?t:t-this.b/200;return t=VA*ls(t),e=XA*ls(e),n=JA*ls(n),new es(hs(3.2404542*e-1.5371385*t-.4985314*n),hs(-.969266*e+1.8760108*t+.041556*n),hs(.0556434*e-.2040259*t+1.0572252*n),this.opacity)}})),Hu(vs,gs,Xu(Vu,{brighter:function(t){return new vs(this.h,this.c,this.l+18*(null==t?1:t),this.opacity)},darker:function(t){return new vs(this.h,this.c,this.l-18*(null==t?1:t),this.opacity)},rgb:function(){return us(this).rgb()}}));var eC=-.14861,nC=1.78277,rC=-.29227,iC=-.90649,aC=1.97294,oC=aC*iC,uC=aC*nC,sC=nC*rC-iC*eC;Hu(bs,ys,Xu(Vu,{brighter:function(t){return t=null==t?1/.7:Math.pow(1/.7,t),new bs(this.h,this.s,this.l*t,this.opacity)},darker:function(t){return t=null==t?.7:Math.pow(.7,t),new bs(this.h,this.s,this.l*t,this.opacity)},rgb:function(){var t=isNaN(this.h)?0:(this.h+120)*WA,e=+this.l,n=isNaN(this.s)?0:this.s*e*(1-e),r=Math.cos(t),i=Math.sin(t);return new es(255*(e+n*(eC*r+nC*i)),255*(e+n*(rC*r+iC*i)),255*(e+n*(aC*r)),this.opacity)}}));var fC,cC,lC,hC,dC,pC=function t(e){function n(t,e){var n=r((t=ts(t)).r,(e=ts(e)).r),i=r(t.g,e.g),a=r(t.b,e.b),o=Cs(t.opacity,e.opacity);return function(e){return t.r=n(e),t.g=i(e),t.b=a(e),t.opacity=o(e),t+""}}var r=As(e);return n.gamma=t,n}(1),gC=Ns(xs),vC=Ns(ws),mC=/[-+]?(?:\d+\.?\d*|\.?\d+)(?:[eE][-+]?\d+)?/g,yC=new RegExp(mC.source,"g"),bC=180/Math.PI,_C={translateX:0,translateY:0,rotate:0,skewX:0,scaleX:1,scaleY:1},xC=$s(js,"px, ","px)","deg)"),wC=$s(Is,", ",")",")"),MC=Math.SQRT2,kC=2,EC=4,SC=1e-12,AC=Hs(Ss),CC=Hs(Cs),NC=Vs(Ss),zC=Vs(Cs),TC=Js(Ss),OC=Js(Cs),RC=Object.freeze({interpolate:qs,interpolateArray:zs,interpolateBasis:xs,interpolateBasisClosed:ws,interpolateDate:Ts,interpolateNumber:Os,interpolateObject:Rs,interpolateRound:Us,interpolateString:Ls,interpolateTransformCss:xC,interpolateTransformSvg:wC,interpolateZoom:Ws,interpolateRgb:pC,interpolateRgbBasis:gC,interpolateRgbBasisClosed:vC,interpolateHsl:AC,interpolateHslLong:CC,interpolateLab:Xs,interpolateHcl:NC,interpolateHclLong:zC,interpolateCubehelix:TC,interpolateCubehelixLong:OC,quantize:Zs}),PC=[0,1],DC={"":hf,"%":function(t,e){return(100*t).toFixed(e)},b:function(t){return Math.round(t).toString(2)},c:function(t){return t+""},d:function(t){return Math.round(t).toString(10)},e:function(t,e){return t.toExponential(e)},f:function(t,e){return t.toFixed(e)},g:function(t,e){return t.toPrecision(e)},o:function(t){return Math.round(t).toString(8)},p:function(t,e){return pf(100*t,e)},r:pf,s:df,X:function(t){return Math.round(t).toString(16).toUpperCase()},x:function(t){return Math.round(t).toString(16)}},LC=/^(?:(.)?([<>=^]))?([+\-\( ])?([$#])?(0)?(\d+)?(,)?(\.\d+)?([a-z%])?$/i;gf.prototype=vf.prototype,vf.prototype.toString=function(){return this.fill+this.align+this.sign+this.symbol+(this.zero?"0":"")+(null==this.width?"":Math.max(1,0|this.width))+(this.comma?",":"")+(null==this.precision?"":"."+Math.max(0,0|this.precision))+this.type};var qC,UC,FC,jC=["y","z","a","f","p","n","\xb5","m","","k","M","G","T","P","E","Z","Y"];bf({decimal:".",thousands:",",grouping:[3],currency:["$",""]});var IC=1e3,$C=60*IC,BC=60*$C,YC=24*BC,GC=7*YC,WC=30*YC,HC=365*YC,XC=Wf("1f77b4ff7f0e2ca02cd627289467bd8c564be377c27f7f7fbcbd2217becf"),VC=Wf("393b795254a36b6ecf9c9ede6379398ca252b5cf6bcedb9c8c6d31bd9e39e7ba52e7cb94843c39ad494ad6616be7969c7b4173a55194ce6dbdde9ed6"),JC=Wf("3182bd6baed69ecae1c6dbefe6550dfd8d3cfdae6bfdd0a231a35474c476a1d99bc7e9c0756bb19e9ac8bcbddcdadaeb636363969696bdbdbdd9d9d9"),ZC=Wf("1f77b4aec7e8ff7f0effbb782ca02c98df8ad62728ff98969467bdc5b0d58c564bc49c94e377c2f7b6d27f7f7fc7c7c7bcbd22dbdb8d17becf9edae5");OC(ys(300,.5,0),ys(-240,.5,1));var QC=(OC(ys(-100,.75,.35),ys(80,1.5,.8)),OC(ys(260,.75,.35),ys(80,1.5,.8)),ys(),
Hf(Wf("44015444025645045745055946075a46085c460a5d460b5e470d60470e6147106347116447136548146748166848176948186a481a6c481b6d481c6e481d6f481f70482071482173482374482475482576482677482878482979472a7a472c7a472d7b472e7c472f7d46307e46327e46337f463480453581453781453882443983443a83443b84433d84433e85423f854240864241864142874144874045884046883f47883f48893e49893e4a893e4c8a3d4d8a3d4e8a3c4f8a3c508b3b518b3b528b3a538b3a548c39558c39568c38588c38598c375a8c375b8d365c8d365d8d355e8d355f8d34608d34618d33628d33638d32648e32658e31668e31678e31688e30698e306a8e2f6b8e2f6c8e2e6d8e2e6e8e2e6f8e2d708e2d718e2c718e2c728e2c738e2b748e2b758e2a768e2a778e2a788e29798e297a8e297b8e287c8e287d8e277e8e277f8e27808e26818e26828e26828e25838e25848e25858e24868e24878e23888e23898e238a8d228b8d228c8d228d8d218e8d218f8d21908d21918c20928c20928c20938c1f948c1f958b1f968b1f978b1f988b1f998a1f9a8a1e9b8a1e9c891e9d891f9e891f9f881fa0881fa1881fa1871fa28720a38620a48621a58521a68522a78522a88423a98324aa8325ab8225ac8226ad8127ad8128ae8029af7f2ab07f2cb17e2db27d2eb37c2fb47c31b57b32b67a34b67935b77937b87838b9773aba763bbb753dbc743fbc7340bd7242be7144bf7046c06f48c16e4ac16d4cc26c4ec36b50c46a52c56954c56856c66758c7655ac8645cc8635ec96260ca6063cb5f65cb5e67cc5c69cd5b6ccd5a6ece5870cf5773d05675d05477d1537ad1517cd2507fd34e81d34d84d44b86d54989d5488bd6468ed64590d74393d74195d84098d83e9bd93c9dd93ba0da39a2da37a5db36a8db34aadc32addc30b0dd2fb2dd2db5de2bb8de29bade28bddf26c0df25c2df23c5e021c8e020cae11fcde11dd0e11cd2e21bd5e21ad8e219dae319dde318dfe318e2e418e5e419e7e419eae51aece51befe51cf1e51df4e61ef6e620f8e621fbe723fde725"))),KC=Hf(Wf("00000401000501010601010802010902020b02020d03030f03031204041405041606051806051a07061c08071e0907200a08220b09240c09260d0a290e0b2b100b2d110c2f120d31130d34140e36150e38160f3b180f3d19103f1a10421c10441d11471e114920114b21114e22115024125325125527125829115a2a115c2c115f2d11612f116331116533106734106936106b38106c390f6e3b0f703d0f713f0f72400f74420f75440f764510774710784910784a10794c117a4e117b4f127b51127c52137c54137d56147d57157e59157e5a167e5c167f5d177f5f187f601880621980641a80651a80671b80681c816a1c816b1d816d1d816e1e81701f81721f817320817521817621817822817922827b23827c23827e24828025828125818326818426818627818827818928818b29818c29818e2a81902a81912b81932b80942c80962c80982d80992d809b2e7f9c2e7f9e2f7fa02f7fa1307ea3307ea5317ea6317da8327daa337dab337cad347cae347bb0357bb2357bb3367ab5367ab73779b83779ba3878bc3978bd3977bf3a77c03a76c23b75c43c75c53c74c73d73c83e73ca3e72cc3f71cd4071cf4070d0416fd2426fd3436ed5446dd6456cd8456cd9466bdb476adc4869de4968df4a68e04c67e24d66e34e65e44f64e55064e75263e85362e95462ea5661eb5760ec5860ed5a5fee5b5eef5d5ef05f5ef1605df2625df2645cf3655cf4675cf4695cf56b5cf66c5cf66e5cf7705cf7725cf8745cf8765cf9785df9795df97b5dfa7d5efa7f5efa815ffb835ffb8560fb8761fc8961fc8a62fc8c63fc8e64fc9065fd9266fd9467fd9668fd9869fd9a6afd9b6bfe9d6cfe9f6dfea16efea36ffea571fea772fea973feaa74feac76feae77feb078feb27afeb47bfeb67cfeb77efeb97ffebb81febd82febf84fec185fec287fec488fec68afec88cfeca8dfecc8ffecd90fecf92fed194fed395fed597fed799fed89afdda9cfddc9efddea0fde0a1fde2a3fde3a5fde5a7fde7a9fde9aafdebacfcecaefceeb0fcf0b2fcf2b4fcf4b6fcf6b8fcf7b9fcf9bbfcfbbdfcfdbf")),tN=Hf(Wf("00000401000501010601010802010a02020c02020e03021004031204031405041706041907051b08051d09061f0a07220b07240c08260d08290e092b10092d110a30120a32140b34150b37160b39180c3c190c3e1b0c411c0c431e0c451f0c48210c4a230c4c240c4f260c51280b53290b552b0b572d0b592f0a5b310a5c320a5e340a5f3609613809623909633b09643d09653e0966400a67420a68440a68450a69470b6a490b6a4a0c6b4c0c6b4d0d6c4f0d6c510e6c520e6d540f6d550f6d57106e59106e5a116e5c126e5d126e5f136e61136e62146e64156e65156e67166e69166e6a176e6c186e6d186e6f196e71196e721a6e741a6e751b6e771c6d781c6d7a1d6d7c1d6d7d1e6d7f1e6c801f6c82206c84206b85216b87216b88226a8a226a8c23698d23698f24699025689225689326679526679727669827669a28659b29649d29649f2a63a02a63a22b62a32c61a52c60a62d60a82e5fa92e5eab2f5ead305dae305cb0315bb1325ab3325ab43359b63458b73557b93556ba3655bc3754bd3853bf3952c03a51c13a50c33b4fc43c4ec63d4dc73e4cc83f4bca404acb4149cc4248ce4347cf4446d04545d24644d34743d44842d54a41d74b3fd84c3ed94d3dda4e3cdb503bdd513ade5238df5337e05536e15635e25734e35933e45a31e55c30e65d2fe75e2ee8602de9612bea632aeb6429eb6628ec6726ed6925ee6a24ef6c23ef6e21f06f20f1711ff1731df2741cf3761bf37819f47918f57b17f57d15f67e14f68013f78212f78410f8850ff8870ef8890cf98b0bf98c0af98e09fa9008fa9207fa9407fb9606fb9706fb9906fb9b06fb9d07fc9f07fca108fca309fca50afca60cfca80dfcaa0ffcac11fcae12fcb014fcb216fcb418fbb61afbb81dfbba1ffbbc21fbbe23fac026fac228fac42afac62df9c72ff9c932f9cb35f8cd37f8cf3af7d13df7d340f6d543f6d746f5d949f5db4cf4dd4ff4df53f4e156f3e35af3e55df2e661f2e865f2ea69f1ec6df1ed71f1ef75f1f179f2f27df2f482f3f586f3f68af4f88ef5f992f6fa96f8fb9af9fc9dfafda1fcffa4")),eN=Hf(Wf("0d088710078813078916078a19068c1b068d1d068e20068f2206902406912605912805922a05932c05942e05952f059631059733059735049837049938049a3a049a3c049b3e049c3f049c41049d43039e44039e46039f48039f4903a04b03a14c02a14e02a25002a25102a35302a35502a45601a45801a45901a55b01a55c01a65e01a66001a66100a76300a76400a76600a76700a86900a86a00a86c00a86e00a86f00a87100a87201a87401a87501a87701a87801a87a02a87b02a87d03a87e03a88004a88104a78305a78405a78606a68707a68808a68a09a58b0aa58d0ba58e0ca48f0da4910ea3920fa39410a29511a19613a19814a099159f9a169f9c179e9d189d9e199da01a9ca11b9ba21d9aa31e9aa51f99a62098a72197a82296aa2395ab2494ac2694ad2793ae2892b02991b12a90b22b8fb32c8eb42e8db52f8cb6308bb7318ab83289ba3388bb3488bc3587bd3786be3885bf3984c03a83c13b82c23c81c33d80c43e7fc5407ec6417dc7427cc8437bc9447aca457acb4679cc4778cc4977cd4a76ce4b75cf4c74d04d73d14e72d24f71d35171d45270d5536fd5546ed6556dd7566cd8576bd9586ada5a6ada5b69db5c68dc5d67dd5e66de5f65de6164df6263e06363e16462e26561e26660e3685fe4695ee56a5de56b5de66c5ce76e5be76f5ae87059e97158e97257ea7457eb7556eb7655ec7754ed7953ed7a52ee7b51ef7c51ef7e50f07f4ff0804ef1814df1834cf2844bf3854bf3874af48849f48948f58b47f58c46f68d45f68f44f79044f79143f79342f89441f89540f9973ff9983ef99a3efa9b3dfa9c3cfa9e3bfb9f3afba139fba238fca338fca537fca636fca835fca934fdab33fdac33fdae32fdaf31fdb130fdb22ffdb42ffdb52efeb72dfeb82cfeba2cfebb2bfebd2afebe2afec029fdc229fdc328fdc527fdc627fdc827fdca26fdcb26fccd25fcce25fcd025fcd225fbd324fbd524fbd724fad824fada24f9dc24f9dd25f8df25f8e125f7e225f7e425f6e626f6e826f5e926f5eb27f4ed27f3ee27f3f027f2f227f1f426f1f525f0f724f0f921")),nN=Array.prototype.map,rN=Array.prototype.slice,iN={identity:Sf,linear:Ef,log:Pf,ordinal:Wu,pow:Lf,sqrt:qf,quantile:Uf,quantize:Ff,threshold:jf,time:Yf,utc:Gf,band:Xf,point:Jf,sequential:tc,"bin-linear":Qf,"bin-ordinal":Kf};for(var aN in iN)nc(aN,iN[aN]);var oN=rc("4c78a8f58518e4575672b7b254a24beeca3bb279a2ff9da69d755dbab0ac"),uN=rc("4c78a89ecae9f58518ffbf7954a24b88d27ab79a20f2cf5b43989483bcb6e45756ff9d9879706ebab0acd67195fcbfd2b279a2d6a5c99e765fd8b5a5"),sN=new Array(3).concat("67a9cff7f7f7f1a340","0571b092c5defdb863e66101","0571b092c5def7f7f7fdb863e66101","2166ac67a9cfd1e5f0fee0b6f1a340b35806","2166ac67a9cfd1e5f0f7f7f7fee0b6f1a340b35806","2166ac4393c392c5ded1e5f0fee0b6fdb863e08214b35806","2166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b35806","0530612166ac4393c392c5ded1e5f0fee0b6fdb863e08214b358067f3b08","0530612166ac4393c392c5ded1e5f0f7f7f7fee0b6fdb863e08214b358067f3b08").map(rc),fN=ic("7fc97fbeaed4fdc086ffff99386cb0f0027fbf5b17666666"),cN=ic("1b9e77d95f027570b3e7298a66a61ee6ab02a6761d666666"),lN=ic("a6cee31f78b4b2df8a33a02cfb9a99e31a1cfdbf6fff7f00cab2d66a3d9affff99b15928"),hN=ic("fbb4aeb3cde3ccebc5decbe4fed9a6ffffcce5d8bdfddaecf2f2f2"),dN=ic("b3e2cdfdcdaccbd5e8f4cae4e6f5c9fff2aef1e2cccccccc"),pN=ic("e41a1c377eb84daf4a984ea3ff7f00ffff33a65628f781bf999999"),gN=ic("66c2a5fc8d628da0cbe78ac3a6d854ffd92fe5c494b3b3b3"),vN=ic("8dd3c7ffffb3bebadafb807280b1d3fdb462b3de69fccde5d9d9d9bc80bdccebc5ffed6f"),mN=new Array(3).concat("d8b365f5f5f55ab4ac","a6611adfc27d80cdc1018571","a6611adfc27df5f5f580cdc1018571","8c510ad8b365f6e8c3c7eae55ab4ac01665e","8c510ad8b365f6e8c3f5f5f5c7eae55ab4ac01665e","8c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e","8c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e","5430058c510abf812ddfc27df6e8c3c7eae580cdc135978f01665e003c30","5430058c510abf812ddfc27df6e8c3f5f5f5c7eae580cdc135978f01665e003c30").map(ic),yN=ac(mN),bN=new Array(3).concat("af8dc3f7f7f77fbf7b","7b3294c2a5cfa6dba0008837","7b3294c2a5cff7f7f7a6dba0008837","762a83af8dc3e7d4e8d9f0d37fbf7b1b7837","762a83af8dc3e7d4e8f7f7f7d9f0d37fbf7b1b7837","762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b7837","762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b7837","40004b762a839970abc2a5cfe7d4e8d9f0d3a6dba05aae611b783700441b","40004b762a839970abc2a5cfe7d4e8f7f7f7d9f0d3a6dba05aae611b783700441b").map(ic),_N=ac(bN),xN=new Array(3).concat("e9a3c9f7f7f7a1d76a","d01c8bf1b6dab8e1864dac26","d01c8bf1b6daf7f7f7b8e1864dac26","c51b7de9a3c9fde0efe6f5d0a1d76a4d9221","c51b7de9a3c9fde0eff7f7f7e6f5d0a1d76a4d9221","c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221","c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221","8e0152c51b7dde77aef1b6dafde0efe6f5d0b8e1867fbc414d9221276419","8e0152c51b7dde77aef1b6dafde0eff7f7f7e6f5d0b8e1867fbc414d9221276419").map(ic),wN=ac(xN),MN=new Array(3).concat("998ec3f7f7f7f1a340","5e3c99b2abd2fdb863e66101","5e3c99b2abd2f7f7f7fdb863e66101","542788998ec3d8daebfee0b6f1a340b35806","542788998ec3d8daebf7f7f7fee0b6f1a340b35806","5427888073acb2abd2d8daebfee0b6fdb863e08214b35806","5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b35806","2d004b5427888073acb2abd2d8daebfee0b6fdb863e08214b358067f3b08","2d004b5427888073acb2abd2d8daebf7f7f7fee0b6fdb863e08214b358067f3b08").map(ic),kN=ac(MN),EN=new Array(3).concat("ef8a62f7f7f767a9cf","ca0020f4a58292c5de0571b0","ca0020f4a582f7f7f792c5de0571b0","b2182bef8a62fddbc7d1e5f067a9cf2166ac","b2182bef8a62fddbc7f7f7f7d1e5f067a9cf2166ac","b2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac","b2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac","67001fb2182bd6604df4a582fddbc7d1e5f092c5de4393c32166ac053061","67001fb2182bd6604df4a582fddbc7f7f7f7d1e5f092c5de4393c32166ac053061").map(ic),SN=ac(EN),AN=new Array(3).concat("ef8a62ffffff999999","ca0020f4a582bababa404040","ca0020f4a582ffffffbababa404040","b2182bef8a62fddbc7e0e0e09999994d4d4d","b2182bef8a62fddbc7ffffffe0e0e09999994d4d4d","b2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d","b2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d","67001fb2182bd6604df4a582fddbc7e0e0e0bababa8787874d4d4d1a1a1a","67001fb2182bd6604df4a582fddbc7ffffffe0e0e0bababa8787874d4d4d1a1a1a").map(ic),CN=ac(AN),NN=new Array(3).concat("fc8d59ffffbf91bfdb","d7191cfdae61abd9e92c7bb6","d7191cfdae61ffffbfabd9e92c7bb6","d73027fc8d59fee090e0f3f891bfdb4575b4","d73027fc8d59fee090ffffbfe0f3f891bfdb4575b4","d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4","d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4","a50026d73027f46d43fdae61fee090e0f3f8abd9e974add14575b4313695","a50026d73027f46d43fdae61fee090ffffbfe0f3f8abd9e974add14575b4313695").map(ic),zN=ac(NN),TN=new Array(3).concat("fc8d59ffffbf91cf60","d7191cfdae61a6d96a1a9641","d7191cfdae61ffffbfa6d96a1a9641","d73027fc8d59fee08bd9ef8b91cf601a9850","d73027fc8d59fee08bffffbfd9ef8b91cf601a9850","d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850","d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850","a50026d73027f46d43fdae61fee08bd9ef8ba6d96a66bd631a9850006837","a50026d73027f46d43fdae61fee08bffffbfd9ef8ba6d96a66bd631a9850006837").map(ic),ON=ac(TN),RN=new Array(3).concat("fc8d59ffffbf99d594","d7191cfdae61abdda42b83ba","d7191cfdae61ffffbfabdda42b83ba","d53e4ffc8d59fee08be6f59899d5943288bd","d53e4ffc8d59fee08bffffbfe6f59899d5943288bd","d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd","d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd","9e0142d53e4ff46d43fdae61fee08be6f598abdda466c2a53288bd5e4fa2","9e0142d53e4ff46d43fdae61fee08bffffbfe6f598abdda466c2a53288bd5e4fa2").map(ic),PN=ac(RN),DN=new Array(3).concat("e5f5f999d8c92ca25f","edf8fbb2e2e266c2a4238b45","edf8fbb2e2e266c2a42ca25f006d2c","edf8fbccece699d8c966c2a42ca25f006d2c","edf8fbccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45005824","f7fcfde5f5f9ccece699d8c966c2a441ae76238b45006d2c00441b").map(ic),LN=ac(DN),qN=new Array(3).concat("e0ecf49ebcda8856a7","edf8fbb3cde38c96c688419d","edf8fbb3cde38c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68856a7810f7c","edf8fbbfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d6e016b","f7fcfde0ecf4bfd3e69ebcda8c96c68c6bb188419d810f7c4d004b").map(ic),UN=ac(qN),FN=new Array(3).concat("e0f3dba8ddb543a2ca","f0f9e8bae4bc7bccc42b8cbe","f0f9e8bae4bc7bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc443a2ca0868ac","f0f9e8ccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe08589e","f7fcf0e0f3dbccebc5a8ddb57bccc44eb3d32b8cbe0868ac084081").map(ic),jN=ac(FN),IN=new Array(3).concat("fee8c8fdbb84e34a33","fef0d9fdcc8afc8d59d7301f","fef0d9fdcc8afc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59e34a33b30000","fef0d9fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301f990000","fff7ecfee8c8fdd49efdbb84fc8d59ef6548d7301fb300007f0000").map(ic),$N=ac(IN),BN=new Array(3).concat("ece2f0a6bddb1c9099","f6eff7bdc9e167a9cf02818a","f6eff7bdc9e167a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf1c9099016c59","f6eff7d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016450","fff7fbece2f0d0d1e6a6bddb67a9cf3690c002818a016c59014636").map(ic),YN=ac(BN),GN=new Array(3).concat("ece7f2a6bddb2b8cbe","f1eef6bdc9e174a9cf0570b0","f1eef6bdc9e174a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf2b8cbe045a8d","f1eef6d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0034e7b","fff7fbece7f2d0d1e6a6bddb74a9cf3690c00570b0045a8d023858").map(ic),WN=ac(GN),HN=new Array(3).concat("e7e1efc994c7dd1c77","f1eef6d7b5d8df65b0ce1256","f1eef6d7b5d8df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0dd1c77980043","f1eef6d4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125691003f","f7f4f9e7e1efd4b9dac994c7df65b0e7298ace125698004367001f").map(ic),XN=ac(HN),VN=new Array(3).concat("fde0ddfa9fb5c51b8a","feebe2fbb4b9f768a1ae017e","feebe2fbb4b9f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1c51b8a7a0177","feebe2fcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a0177","fff7f3fde0ddfcc5c0fa9fb5f768a1dd3497ae017e7a017749006a").map(ic),JN=ac(VN),ZN=new Array(3).concat("edf8b17fcdbb2c7fb8","ffffcca1dab441b6c4225ea8","ffffcca1dab441b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c42c7fb8253494","ffffccc7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea80c2c84","ffffd9edf8b1c7e9b47fcdbb41b6c41d91c0225ea8253494081d58").map(ic),QN=ac(ZN),KN=new Array(3).concat("f7fcb9addd8e31a354","ffffccc2e69978c679238443","ffffccc2e69978c67931a354006837","ffffccd9f0a3addd8e78c67931a354006837","ffffccd9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443005a32","ffffe5f7fcb9d9f0a3addd8e78c67941ab5d238443006837004529").map(ic),tz=ac(KN),ez=new Array(3).concat("fff7bcfec44fd95f0e","ffffd4fed98efe9929cc4c02","ffffd4fed98efe9929d95f0e993404","ffffd4fee391fec44ffe9929d95f0e993404","ffffd4fee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c028c2d04","ffffe5fff7bcfee391fec44ffe9929ec7014cc4c02993404662506").map(ic),nz=ac(ez),rz=new Array(3).concat("ffeda0feb24cf03b20","ffffb2fecc5cfd8d3ce31a1c","ffffb2fecc5cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cf03b20bd0026","ffffb2fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cb10026","ffffccffeda0fed976feb24cfd8d3cfc4e2ae31a1cbd0026800026").map(ic),iz=ac(rz),az=new Array(3).concat("deebf79ecae13182bd","eff3ffbdd7e76baed62171b5","eff3ffbdd7e76baed63182bd08519c","eff3ffc6dbef9ecae16baed63182bd08519c","eff3ffc6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b5084594","f7fbffdeebf7c6dbef9ecae16baed64292c62171b508519c08306b").map(ic),oz=ac(az),uz=new Array(3).concat("e5f5e0a1d99b31a354","edf8e9bae4b374c476238b45","edf8e9bae4b374c47631a354006d2c","edf8e9c7e9c0a1d99b74c47631a354006d2c","edf8e9c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45005a32","f7fcf5e5f5e0c7e9c0a1d99b74c47641ab5d238b45006d2c00441b").map(ic),sz=ac(uz),fz=new Array(3).concat("f0f0f0bdbdbd636363","f7f7f7cccccc969696525252","f7f7f7cccccc969696636363252525","f7f7f7d9d9d9bdbdbd969696636363252525","f7f7f7d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525","fffffff0f0f0d9d9d9bdbdbd969696737373525252252525000000").map(ic),cz=ac(fz),lz=new Array(3).concat("efedf5bcbddc756bb1","f2f0f7cbc9e29e9ac86a51a3","f2f0f7cbc9e29e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8756bb154278f","f2f0f7dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a34a1486","fcfbfdefedf5dadaebbcbddc9e9ac8807dba6a51a354278f3f007d").map(ic),hz=ac(lz),dz=new Array(3).concat("fee0d2fc9272de2d26","fee5d9fcae91fb6a4acb181d","fee5d9fcae91fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4ade2d26a50f15","fee5d9fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181d99000d","fff5f0fee0d2fcbba1fc9272fb6a4aef3b2ccb181da50f1567000d").map(ic),pz=ac(dz),gz=new Array(3).concat("fee6cefdae6be6550d","feeddefdbe85fd8d3cd94701","feeddefdbe85fd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3ce6550da63603","feeddefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d948018c2d04","fff5ebfee6cefdd0a2fdae6bfd8d3cf16913d94801a636037f2704").map(ic),vz=ac(gz),mz=Object.freeze({schemeAccent:fN,schemeDark2:cN,schemePaired:lN,schemePastel1:hN,schemePastel2:dN,schemeSet1:pN,schemeSet2:gN,schemeSet3:vN,interpolateBrBG:yN,schemeBrBG:mN,interpolatePRGn:_N,schemePRGn:bN,interpolatePiYG:wN,schemePiYG:xN,interpolatePuOr:kN,schemePuOr:MN,interpolateRdBu:SN,schemeRdBu:EN,interpolateRdGy:CN,schemeRdGy:AN,interpolateRdYlBu:zN,schemeRdYlBu:NN,interpolateRdYlGn:ON,schemeRdYlGn:TN,interpolateSpectral:PN,schemeSpectral:RN,interpolateBuGn:LN,schemeBuGn:DN,interpolateBuPu:UN,schemeBuPu:qN,interpolateGnBu:jN,schemeGnBu:FN,interpolateOrRd:$N,schemeOrRd:IN,interpolatePuBuGn:YN,schemePuBuGn:BN,interpolatePuBu:WN,schemePuBu:GN,interpolatePuRd:XN,schemePuRd:HN,interpolateRdPu:JN,schemeRdPu:VN,interpolateYlGnBu:QN,schemeYlGnBu:ZN,interpolateYlGn:tz,schemeYlGn:KN,interpolateYlOrBr:nz,schemeYlOrBr:ez,interpolateYlOrRd:iz,schemeYlOrRd:rz,interpolateBlues:oz,schemeBlues:az,interpolateGreens:sz,schemeGreens:uz,interpolateGreys:cz,schemeGreys:fz,interpolatePurples:hz,schemePurples:lz,interpolateReds:pz,schemeReds:dz,interpolateOranges:vz,schemeOranges:gz}),yz={blueorange:sN},bz={category10:XC,category20:ZC,category20b:VC,category20c:JC,accent:fN,dark2:cN,paired:lN,pastel1:hN,pastel2:dN,set1:pN,set2:gN,set3:vN,tableau10:oN,tableau20:uN,viridis:QC,magma:KC,inferno:tN,plasma:eN,blueorange:gC(at(sN))};oc("blues","Blues"),oc("greens","Greens"),oc("greys","Greys"),oc("purples","Purples"),oc("reds","Reds"),oc("oranges","Oranges"),oc("brownbluegreen","BrBG"),oc("purplegreen","PRGn"),oc("pinkyellowgreen","PiYG"),oc("purpleorange","PuOr"),oc("redblue","RdBu"),oc("redgrey","RdGy"),oc("redyellowblue","RdYlBu"),oc("redyellowgreen","RdYlGn"),oc("spectral","Spectral"),oc("bluegreen","BuGn"),oc("bluepurple","BuPu"),oc("greenblue","GnBu"),oc("orangered","OrRd"),oc("purplebluegreen","PuBuGn"),oc("purpleblue","PuBu"),oc("purplered","PuRd"),oc("redpurple","RdPu"),oc("yellowgreenblue","YlGnBu"),oc("yellowgreen","YlGn"),oc("yelloworangebrown","YlOrBr"),oc("yelloworangered","YlOrRd");var _z=Array.prototype,xz=_z.slice,wz=[[],[[[1,1.5],[.5,1]]],[[[1.5,1],[1,1.5]]],[[[1.5,1],[.5,1]]],[[[1,.5],[1.5,1]]],[[[1,.5],[.5,1]],[[1,1.5],[1.5,1]]],[[[1,.5],[1,1.5]]],[[[1,.5],[.5,1]]],[[[.5,1],[1,.5]]],[[[1,1.5],[1,.5]]],[[[.5,1],[1,1.5]],[[1.5,1],[1,.5]]],[[[1.5,1],[1,.5]]],[[[.5,1],[1.5,1]]],[[[1,1.5],[1.5,1]]],[[[.5,1],[1,1.5]]],[]],Mz=["values","size","thresholds"],kz=["x","y","size","cellSize","bandwidth","thresholds"];J(Cc,Io).transform=function(t,e){if(this.value&&!e.changed()&&!t.modified())return e.StopPropagation;var n,r,i,a=e.fork(e.NO_SOURCE|e.NO_FIELDS);return t.values?(n=wc(),r=Mz,i=t.values):(n=Ac(),r=kz,i=e.materialize(e.SOURCE).source),r.forEach(function(e){null!=t[e]&&n[e](t[e])}),this.value&&(a.rem=this.value),this.value=a.source=a.add=n(i).map(eo),a},zc.prototype={constructor:zc,reset:function(){this.s=this.t=0},add:function(t){Tc(Ez,t,this.t),Tc(this,Ez.s,this.s),this.s?this.t+=Ez.t:this.s=Ez.t},valueOf:function(){return this.s}};var Ez=new zc,Sz=1e-6,Az=Math.PI,Cz=Az/2,Nz=Az/4,zz=2*Az,Tz=180/Az,Oz=Az/180,Rz=Math.abs,Pz=Math.atan,Dz=Math.atan2,Lz=Math.cos,qz=Math.ceil,Uz=Math.exp,Fz=Math.log,jz=Math.pow,Iz=Math.sin,$z=Math.sign||function(t){return t>0?1:t<0?-1:0},Bz=Math.sqrt,Yz=Math.tan,Gz={Feature:function(t,e){Dc(t.geometry,e)},FeatureCollection:function(t,e){for(var n=t.features,r=-1,i=n.length;++r<i;)Dc(n[r].geometry,e)}},Wz={Sphere:function(t,e){e.sphere()},Point:function(t,e){t=t.coordinates,e.point(t[0],t[1],t[2])},MultiPoint:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)t=n[r],e.point(t[0],t[1],t[2])},LineString:function(t,e){Lc(t.coordinates,e,0)},MultiLineString:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)Lc(n[r],e,0)},Polygon:function(t,e){qc(t.coordinates,e)},MultiPolygon:function(t,e){for(var n=t.coordinates,r=-1,i=n.length;++r<i;)qc(n[r],e)},GeometryCollection:function(t,e){for(var n=t.geometries,r=-1,i=n.length;++r<i;)Dc(n[r],e)}};Nc(),Nc(),Nc(),Hc.invert=Hc;var Hz,Xz,Vz,Jz,Zz,Qz,Kz,tT,eT=1e9,nT=-eT,rT=Nc(),iT=(Nc(),Nc()),aT=Nc(),oT={point:Pc,lineStart:Pc,lineEnd:Pc,polygonStart:function(){oT.lineStart=dl,oT.lineEnd=vl},polygonEnd:function(){oT.lineStart=oT.lineEnd=oT.point=Pc,iT.add(Rz(aT)),aT.reset()},result:function(){var t=iT/2;return iT.reset(),t}},uT=1/0,sT=uT,fT=-uT,cT=fT,lT={point:ml,lineStart:Pc,lineEnd:Pc,polygonStart:Pc,polygonEnd:Pc,result:function(){var t=[[uT,sT],[fT,cT]];return fT=cT=-(sT=uT=1/0),t}},hT=0,dT=0,pT=0,gT=0,vT=0,mT=0,yT=0,bT=0,_T=0,xT={point:yl,lineStart:bl,lineEnd:wl,polygonStart:function(){xT.lineStart=Ml,xT.lineEnd=kl},polygonEnd:function(){xT.point=yl,xT.lineStart=bl,xT.lineEnd=wl},result:function(){var t=_T?[yT/_T,bT/_T]:mT?[gT/mT,vT/mT]:pT?[hT/pT,dT/pT]:[NaN,NaN];return hT=dT=pT=gT=vT=mT=yT=bT=_T=0,t}};Al.prototype={_radius:4.5,pointRadius:function(t){return this._radius=t,this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._context.closePath(),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._context.moveTo(t,e),this._point=1;break;case 1:this._context.lineTo(t,e);break;default:this._context.moveTo(t+this._radius,e),this._context.arc(t,e,this._radius,0,zz)}},result:Pc};var wT,MT,kT,ET,ST,AT=Nc(),CT={point:Pc,lineStart:function(){CT.point=Cl},lineEnd:function(){wT&&Nl(MT,kT),CT.point=Pc},polygonStart:function(){wT=!0},polygonEnd:function(){wT=null},result:function(){var t=+AT;return AT.reset(),t}};zl.prototype={_radius:4.5,_circle:Tl(4.5),pointRadius:function(t){return(t=+t)!==this._radius&&(this._radius=t,this._circle=null),this},polygonStart:function(){this._line=0},polygonEnd:function(){this._line=NaN},lineStart:function(){this._point=0},lineEnd:function(){0===this._line&&this._string.push("Z"),this._point=NaN},point:function(t,e){switch(this._point){case 0:this._string.push("M",t,",",e),this._point=1;break;case 1:this._string.push("L",t,",",e);break;default:null==this._circle&&(this._circle=Tl(this._radius)),this._string.push("M",t,",",e,this._circle)}},result:function(){if(this._string.length){var t=this._string.join("");return this._string=[],t}return null}};var NT=Rl(function(){return!0},Ll,Ul,[-Az,-Cz]);Il.prototype={constructor:Il,point:function(t,e){this.stream.point(t,e)},sphere:function(){this.stream.sphere()},lineStart:function(){this.stream.lineStart()},lineEnd:function(){this.stream.lineEnd()},polygonStart:function(){this.stream.polygonStart()},polygonEnd:function(){this.stream.polygonEnd()}};var zT=16,TT=Lz(30*Oz),OT=jl({point:function(t,e){this.stream.point(t*Oz,e*Oz)}}),RT=nh(function(t){return Bz(2/(1+t))});RT.invert=rh(function(t){return 2*Rc(t/2)});var PT=nh(function(t){return(t=Oc(t))&&t/Iz(t)});PT.invert=rh(function(t){return t}),oh.invert=function(t,e){return[t,2*Pz(Uz(e))-Cz]},hh.invert=hh,vh.invert=rh(Pz),yh.invert=rh(Rc),_h.invert=rh(function(t){return 2*Pz(t)}),wh.invert=function(t,e){return[-e,2*Pz(Uz(t))-Cz]};var DT=Ol(),LT=["clipAngle","clipExtent","scale","translate","center","rotate","parallels","precision","coefficient","distance","fraction","lobes","parallel","radius","ratio","spacing","tilt"],qT={albers:Kl,albersusa:eh,azimuthalequalarea:ih,azimuthalequidistant:ah,conicconformal:lh,conicequalarea:Ql,conicequidistant:gh,equirectangular:dh,gnomonic:mh,mercator:uh,orthographic:bh,stereographic:xh,transversemercator:Mh};for(var UT in qT)Eh(UT,qT[UT]);J(Ah,Io).transform=function(t,e){function n(t){t[u]=a(o(t))}var r,i=e.fork(e.ALL),a=this.value,o=t.field||ZM,u=t.as||"path";return!a||t.modified()?(this.value=a=Sh(t.projection).context(null),i.materialize().reflow().visit(i.SOURCE,n)):(a.context(null),r=o===ZM||e.modified(o.fields),i.visit(r?i.ADD_MOD:i.ADD,n)),i.modifies(u)},J(Ch,Io).transform=function(t,e){function n(t){var e=i([a(t),o(t)]);e?(t[s]=e[0],t[f]=e[1]):(t[s]=void 0,t[f]=void 0)}var r,i=t.projection,a=t.fields[0],o=t.fields[1],u=t.as||["x","y"],s=u[0],f=u[1];return t.modified()?e.materialize().reflow(!0).visit(e.SOURCE,n):(r=e.modified(a.fields)||e.modified(o.fields),e.visit(r?e.ADD_MOD:e.ADD,n)),e.modifies(u)},J(Nh,Io).transform=function(t,e){var n=e.fork(e.ALL),r=this.value,i=t.field||F("datum"),a=t.as||"shape",o=n.ADD_MOD;return r&&!t.modified()||(this.value=r=zh(Sh(t.projection),i),n.materialize().reflow(),o=n.SOURCE),n.visit(o,function(t){t[a]=r}),n.modifies(a)},J(Th,Io).transform=function(t,e){var n,r=e.fork(),i=this.value,a=this.generator;if(!i.length||t.modified())for(var o in t)Y(a[o])&&a[o](t[o]);return n=a(),i.length?(n._id=i[0]._id,r.mod.push(n)):r.add.push(eo(n)),i[0]=n,r.source=i,r},J(Oh,Io).transform=function(t,e){var n=this.value;return!n||t.modified("type")?(this.value=n=Dh(t.type),LT.forEach(function(e){null!=t[e]&&Lh(n,e,t[e])})):LT.forEach(function(e){t.modified(e)&&Lh(n,e,t[e])}),null!=t.pointRadius&&n.path.pointRadius(t.pointRadius),t.fit&&Rh(n,t),e.fork(e.NO_SOURCE|e.NO_FIELDS)};var FT={type:"Contour",metadata:{generates:!0,source:!0},params:[{name:"size",type:"number",array:!0,length:2,required:!0},{name:"values",type:"number",array:!0},{name:"x",type:"field"},{name:"y",type:"field"},{name:"cellSize",type:"number"},{name:"bandwidth",type:"number"},{name:"thresholds",type:"number"}]},jT={type:"GeoPath",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field"},{name:"as",type:"string","default":"path"}]},IT={type:"GeoPoint",metadata:{modifies:!0},params:[{name:"projection",type:"projection",required:!0},{name:"fields",type:"field",array:!0,required:!0,length:2},{name:"as",type:"string",array:!0,length:2,"default":["x","y"]}]},$T={type:"GeoShape",metadata:{modifies:!0},params:[{name:"projection",type:"projection"},{name:"field",type:"field","default":"datum"},{name:"as",type:"string","default":"shape"}]},BT={type:"Graticule",metadata:{source:!0,generates:!0,changes:!0},params:[{name:"extent",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMajor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"extentMinor",type:"array",array:!0,length:2,content:{type:"number",array:!0,length:2}},{name:"step",type:"number",array:!0,length:2},{name:"stepMajor",type:"number",array:!0,length:2,"default":[90,360]},{name:"stepMinor",type:"number",array:!0,length:2,"default":[10,10]},{name:"precision",type:"number","default":2.5}]};$o(FT,Cc),$o(jT,Ah),$o(IT,Ch),$o($T,Nh),$o(BT,Th),Yo("Projection",Oh);var YT="log",GT="band",WT="point",HT="ordinal",XT="quantile",VT="quantize",JT="threshold",ZT="bin-ordinal",QT="sequential";J(Yh,Io).transform=function(t,e){if(this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=this.value,i=t.scale,a=t.count,o=t.format||Fh(i,a,t.formatSpecifier),u=t.values?qh(i,t.values):Uh(i,a);return r&&(n.rem=r),r=u.map(function(t){return eo({value:t,label:o(t)})}),t.extra&&r.push(eo({extra:{value:r[0].value},label:""})),n.source=n.add=this.value=r,n},J(Gh,Io).transform=function(t,e){var n=e.dataflow,r=e.fork(e.NO_SOURCE|e.NO_FIELDS),i=t.item||Wh,a=t.key||to,o=this.value;return o||(e=e.addAll(),this.value=o=V().test(Hh),o.lookup=function(t){return o.get(a(t))}),(t.modified("key")||e.modified(a))&&P("DataJoin does not support modified key function or fields."),e.visit(e.ADD,function(t){var e=a(t),n=o.get(e);n?(n.exit?(--o.empty,r.add):r.mod).push(n):(o.set(e,n=i(t)),r.add.push(n)),n.datum=t,n.exit=!1}),e.visit(e.MOD,function(t){var e=a(t),n=o.get(e);n&&(n.datum=t,r.mod.push(n))}),e.visit(e.REM,function(t){var e=a(t),n=o.get(e);t!==n.datum||n.exit||(r.rem.push(n),n.exit=!0,++o.empty)}),e.changed(e.ADD_MOD)&&r.modifies("datum"),t.clean&&o.empty>n.cleanThreshold&&n.runAfter(o.clean),r},J(Xh,Io).transform=function(t,e){var n=e.fork(e.ADD_REM),r=t.encoders,i=e.encode;if(XM(i)){if(!n.changed()&&!i.every(function(t){return r[t]}))return e.StopPropagation;i=i[0]}var a="enter"===i,o=r.update||ek,u=r.enter||ek,s=r.exit||ek,f=(i&&!a?r[i]:o)||ek;if(e.changed(e.ADD)&&(e.visit(e.ADD,function(e){u(e,t),o(e,t),f!==ek&&f!==o&&f(e,t)}),n.modifies(u.output),n.modifies(o.output),f!==ek&&f!==o&&n.modifies(f.output)),e.changed(e.REM)&&s!==ek&&(e.visit(e.REM,function(e){s(e,t)}),n.modifies(s.output)),a||f!==ek){var c=e.MOD|(t.modified()?e.REFLOW:0);a?(e.visit(c,function(e){var r=u(e,t);(f(e,t)||r)&&n.mod.push(e)}),n.mod.length&&n.modifies(u.output)):e.visit(c,function(e){f(e,t)&&n.mod.push(e)}),n.mod.length&&n.modifies(f.output)}return n.changed()?n:e.StopPropagation};var KT={};KT[XT]=Zh,KT[VT]=Jh,KT[JT]=Qh,KT["bin-linear"]=Kh,KT[ZT]=Kh,J(id,Io).transform=function(t,e){if(null!=this.value&&!t.modified())return e.StopPropagation;var n=e.fork(e.NO_SOURCE|e.NO_FIELDS),r=0,i=this.value,a="gradient"===t.type,o=t.scale,u=null==t.count?5:t.count,s=t.format||Fh(o,u,t.formatSpecifier),f=t.values||Vh(o,u,a);if(s=td(o,s),i&&(n.rem=i),a)var c=t.values?o.domain():f,l=fc(o,c[0],at(c));else{var h,d=t.size;Y(d)?(t.values||0!==o(f[0])||(f=f.slice(1)),h=f.reduce(function(e,n){return Math.max(e,d(n,t))},0)):d=G(h=d||8)}return i=f.map(function(e,n){var i=eo({index:n,label:s(e,n,f),value:e});return a?i.perc=l(e):(i.offset=h,i.size=d(e,t),i.total=Math.round(r),r+=i.size),i}),n.source=n.add=this.value=i,n};var tO=V({line:cd,"line-radial":ld,arc:hd,"arc-radial":dd,curve:pd,"curve-radial":gd,"orthogonal-horizontal":vd,"orthogonal-vertical":md,"orthogonal-radial":yd,"diagonal-horizontal":bd,"diagonal-vertical":_d,"diagonal-radial":xd});J(fd,Io).transform=function(t,e){var n=t.sourceX||ad,r=t.sourceY||od,i=t.targetX||ud,a=t.targetY||sd,o=t.as||"path",u=t.orient||"vertical",s=t.shape||"line",f=tO.get(s+"-"+u)||tO.get(s);return f||P("LinkPath unsupported type: "+t.shape+(t.orient?"-"+t.orient:"")),e.visit(e.SOURCE,function(t){t[o]=f(n(t),r(t),i(t),a(t))}),e.reflow(t.modified()).modifies(o)},J(wd,Io).transform=function(t,e){var n,r,i,a=t.as||["startAngle","endAngle"],o=a[0],u=a[1],s=t.field||KM,f=t.startAngle||0,l=null!=t.endAngle?t.endAngle:2*Math.PI,h=e.source,d=h.map(s),p=d.length,g=f,v=(l-f)/w(d),m=c(p);for(t.sort&&m.sort(function(t,e){return d[t]-d[e]}),n=0;n<p;++n)i=d[m[n]],r=h[m[n]],r[o]=g,r[u]=g+=i*v;return this.value=d,e.reflow(t.modified()).modifies(a)};var eO=5,nO=lt(["linear","pow","sqrt"]),rO=lt(["set","modified","clear","type","scheme","schemeExtent","schemeCount","domain","domainMin","domainMid","domainMax","domainRaw","nice","zero","range","rangeStep","round","reverse","interpolate","interpolateGamma"]);J(Md,Io).transform=function(t,e){var n,r=e.dataflow,i=this.value;i&&!t.modified("type")||(this.value=i=nc((t.type||"linear").toLowerCase())());for(n in t)rO[n]||(Y(i[n])?i[n](t[n]):r.warn("Unsupported scale property: "+n));return Sd(i,t,kd(i,t)),e.fork(e.NO_SOURCE|e.NO_FIELDS)},J(Od,Io).transform=function(t,e){var n=t.modified("sort")||e.changed(e.ADD)||e.modified(t.sort.fields)||e.modified("datum");return n&&e.source.sort(t.sort),this.modified(n),e},J(Rd,Io).transform=function(t,e){var n,r,i,a,o=t.as||["y0","y1"],u=o[0],s=o[1],f=t.field||KM,c="center"===t.offset?Pd:"normalize"===t.offset?Dd:Ld;for(n=qd(e.source,t.groupby,t.sort,f),r=0,i=n.length,a=n.max;r<i;++r)c(n[r],a,f,u,s);return e.reflow(t.modified()).modifies(o)};var iO={type:"LinkPath",metadata:{modifies:!0},params:[{name:"sourceX",type:"field","default":"source.x"},{name:"sourceY",type:"field","default":"source.y"},{name:"targetX",type:"field","default":"target.x"},{name:"targetY",type:"field","default":"target.y"},{name:"orient",
type:"enum","default":"vertical",values:["horizontal","vertical","radial"]},{name:"shape",type:"enum","default":"line",values:["line","arc","curve","diagonal","orthogonal"]},{name:"as",type:"string","default":"path"}]},aO={type:"Pie",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"startAngle",type:"number","default":0},{name:"endAngle",type:"number","default":6.283185307179586},{name:"sort",type:"boolean","default":!1},{name:"as",type:"string",array:!0,length:2,"default":["startAngle","endAngle"]}]},oO={type:"Stack",metadata:{modifies:!0},params:[{name:"field",type:"field"},{name:"groupby",type:"field",array:!0},{name:"sort",type:"compare"},{name:"offset",type:"enum","default":"zero",values:["zero","center","normalize"]},{name:"as",type:"string",array:!0,length:2,"default":["y0","y1"]}]};$o(iO,fd),$o(aO,wd),$o(oO,Rd),Yo("AxisTicks",Yh),Yo("DataJoin",Gh),Yo("Encode",Xh),Yo("LegendEntries",id),Yo("Scale",Md),Yo("SortItems",Od);var uO=ap.prototype=op.prototype;uO.copy=function(){var t,e,n=new op(this._x,this._y,this._x0,this._y0,this._x1,this._y1),r=this._root;if(!r)return n;if(!r.length)return n._root=up(r),n;for(t=[{source:r,target:n._root=new Array(4)}];r=t.pop();)for(var i=0;i<4;++i)(e=r.source[i])&&(e.length?t.push({source:e,target:r.target[i]=new Array(4)}):r.target[i]=up(e));return n},uO.add=Id,uO.addAll=Bd,uO.cover=Yd,uO.data=Gd,uO.extent=Wd,uO.find=Xd,uO.remove=Vd,uO.removeAll=Jd,uO.root=Zd,uO.size=Qd,uO.visit=Kd,uO.visitAfter=tp,uO.x=np,uO.y=ip;var sO,fO,cO=0,lO=0,hO=0,dO=1e3,pO=0,gO=0,vO=0,mO="object"==typeof performance&&performance.now?performance:Date,yO="object"==typeof window&&window.requestAnimationFrame?window.requestAnimationFrame.bind(window):function(t){setTimeout(t,17)};vp.prototype=mp.prototype={constructor:vp,restart:function(t,e,n){if("function"!=typeof t)throw new TypeError("callback is not a function");n=(null==n?pp():+n)+(null==e?0:+e),this._next||fO===this||(fO?fO._next=this:sO=this,fO=this),this._call=t,this._time=n,wp()},stop:function(){this._call&&(this._call=null,this._time=1/0,wp())}};var bO=10,_O=Math.PI*(3-Math.sqrt(5)),xO={center:Ud,collide:cp,nbody:Sp,link:dp,x:Ap,y:Cp},wO="forces",MO=["alpha","alphaMin","alphaTarget","velocityDecay","forces"],kO=["static","iterations"],EO=["x","y","vx","vy"],SO=J(Np,Io);SO.transform=function(t,e){var n=this.value,r=e.changed(e.ADD_REM),i=t.modified(MO),a=t.iterations||300;if(n?(r&&(e.modifies("index"),n.nodes(e.source)),i&&Op(n,t)):(this.value=n=Tp(e.source,t),n.on("tick",zp(e.dataflow,this)),t["static"]||(r=!0,n.tick()),e.modifies("index")),i||r||t.modified(kO)||e.changed()&&t.restart)if(n.alpha(Math.max(n.alpha(),t.alpha||1)).alphaDecay(1-Math.pow(n.alphaMin(),1/a)),t["static"])for(n.stop();--a>=0;)n.tick();else if(n.stopped()&&n.restart(),!r)return e.StopPropagation;return this.finish(t,e)},SO.finish=function(t,e){for(var n,r=e.dataflow,i=this._argops,a=0,o=i.length;a<o;++a)if(n=i[a],n.name===wO&&"link"===n.op._argval.force)for(var u,s=n.op._argops,f=0,c=s.length;f<c;++f)if("links"===s[f].name&&(u=s[f].op.source)){r.pulse(u,r.changeset().reflow());break}return e.reflow(t.modified()).modifies(EO)},$o({type:"Force",metadata:{modifies:!0},params:[{name:"static",type:"boolean","default":!1},{name:"restart",type:"boolean","default":!1},{name:"iterations",type:"number","default":300},{name:"alpha",type:"number","default":1},{name:"alphaMin",type:"number","default":.001},{name:"alphaTarget",type:"number","default":0},{name:"velocityDecay",type:"number","default":.4},{name:"forces",type:"param",array:!0,params:[{key:{force:"center"},params:[{name:"x",type:"number","default":0},{name:"y",type:"number","default":0}]},{key:{force:"collide"},params:[{name:"radius",type:"number",expr:!0},{name:"strength",type:"number","default":.7},{name:"iterations",type:"number","default":1}]},{key:{force:"nbody"},params:[{name:"strength",type:"number","default":-30},{name:"theta",type:"number","default":.9},{name:"distanceMin",type:"number","default":1},{name:"distanceMax",type:"number"}]},{key:{force:"link"},params:[{name:"links",type:"data"},{name:"id",type:"field"},{name:"distance",type:"number","default":30,expr:!0},{name:"strength",type:"number",expr:!0},{name:"iterations",type:"number","default":1}]},{key:{force:"x"},params:[{name:"strength",type:"number","default":.1},{name:"x",type:"field"}]},{key:{force:"y"},params:[{name:"strength",type:"number","default":.1},{name:"y",type:"field"}]}]},{name:"as",type:"string",array:!0,modify:!1,"default":["x","y","vx","vy"]}]},Np),og.prototype=eg.prototype={constructor:og,count:Bp,each:Yp,eachAfter:Wp,eachBefore:Gp,sum:Hp,sort:Xp,path:Vp,ancestors:Zp,descendants:Qp,leaves:Kp,links:tg,copy:ng};var AO="$",CO={depth:-1},NO={};Ig.prototype=Object.create(og.prototype);var zO=(1+Math.sqrt(5))/2,TO=function t(e){function n(t,n,r,i,a){Gg(e,t,n,r,i,a)}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(zO),OO=function t(e){function n(t,n,r,i,a){if((o=t._squarify)&&o.ratio===e)for(var o,u,s,f,c,l=-1,h=o.length,d=t.value;++l<h;){for(u=o[l],s=u.children,f=u.value=0,c=s.length;f<c;++f)u.value+=s[f].value;u.dice?zg(u,n,r,i,r+=(a-r)*u.value/d):Yg(u,n,r,n+=(i-n)*u.value/d,a),d-=u.value}else t._squarify=o=Gg(e,t,n,r,i,a),o.ratio=e}return n.ratio=function(e){return t((e=+e)>1?e:1)},n}(zO);J(Vg,Io).transform=function(t,e){e.source||P("Nest transform requires an upstream data source.");var n,r,i,a,o=t.key||to;return(!this.value||(a=t.modified())||e.changed())&&(n=$(t.keys).reduce(function(t,e){return t.key(e),t},vt()).entries(e.source),r=eg({values:n},Jg),i=r.lookup={},r.each(function(t){null!=to(t.data)&&(i[o(t.data)]=t)}),this.value=r),e.source.root=this.value,a?e.fork(e.ALL):e},J(Zg,Io).transform=function(t,e){e.source||P("Stratify transform requires an upstream data source.");var n,r,i=t.modified();return(!this.value||i||e.changed(e.ADD_REM)||e.modified(t.key.fields)||e.modified(t.parentKey.fields))&&(n=Pg().id(t.key).parentId(t.parentKey)(e.source),r=n.lookup={},n.each(function(e){r[t.key(e.data)]=e}),this.value=n),e.source.root=this.value,i?e.fork(e.ALL):e},J(Qg,Io).transform=function(t,e){function n(t){var e=a[t];e&&(u[t]=1,s.mod.push(e))}e.source&&e.source.root||P("TreeLinks transform requires a backing tree data source.");var r=e.source.root,i=r.lookup,a=this.value,o=t.key||to,u={},s=e.fork();return e.visit(e.REM,function(t){var e=o(t),n=a[e];n&&(delete a[e],s.rem.push(n))}),e.visit(e.ADD,function(t){var e,n=o(t);(e=Kg(i[n]))&&(s.add.push(a[n]=eo({source:e,target:t})),u[n]=1)}),e.visit(e.MOD,function(t){var e=o(t),r=i[e],a=r.children;if(n(e),a)for(var s=0,f=a.length;s<f;++s)u[e=o(a[s].data)]||n(e)}),s};var RO={binary:Hg,dice:zg,slice:Yg,slicedice:Xg,squarify:TO,resquarify:OO},PO={tidy:Bg,cluster:Ip};J(nv,Io).transform=function(t,e){e.source&&e.source.root||P(this.constructor.name+" transform requires a backing tree data source.");var n=this.layout(t.method),r=this.fields,i=e.source.root,a=t.as||r;t.field&&i.sum(t.field),t.sort&&i.sort(t.sort),rv(n,this.params,t);try{this.value=n(i)}catch(t){P(t)}return i.each(function(t){iv(t,r,a)}),e.reflow(t.modified()).modifies(a).modifies("leaf")},J(av,nv),av.prototype.layout=tv,av.prototype.params=["size","nodeSize","separation"],av.prototype.fields=["x","y","depth","children"],J(ov,nv),ov.prototype.layout=ev,ov.prototype.params=["method","ratio","size","round","padding","paddingInner","paddingOuter","paddingTop","paddingRight","paddingBottom","paddingLeft"],ov.prototype.fields=["x0","y0","x1","y1","depth","children"],J(uv,nv),uv.prototype.layout=Tg,uv.prototype.params=["size","round","padding"],uv.prototype.fields=ov.prototype.fields,J(sv,nv),sv.prototype.layout=Eg,sv.prototype.params=["size","padding"],sv.prototype.fields=["x","y","r","depth","children"];var DO={type:"Nest",metadata:{treesource:!0},params:[{name:"keys",type:"field",array:!0},{name:"key",type:"field"}]},LO={type:"Stratify",metadata:{treesource:!0},params:[{name:"key",type:"field",required:!0},{name:"parentKey",type:"field",required:!0}]},qO={type:"TreeLinks",metadata:{tree:!0,generates:!0,changes:!0},params:[{name:"key",type:"field"}]},UO={type:"Pack",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number","default":0},{name:"radius",type:"field","default":null},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:3,"default":["x","y","r","depth","children"]}]},FO={type:"Partition",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"padding",type:"number","default":0},{name:"round",type:"boolean","default":!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,"default":["x0","y0","x1","y1","depth","children"]}]},jO={type:"Tree",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum","default":"tidy",values:["tidy","cluster"]},{name:"size",type:"number",array:!0,length:2},{name:"nodeSize",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,"default":["x","y","depth","children"]}]},IO={type:"Treemap",metadata:{tree:!0,modifies:!0},params:[{name:"field",type:"field"},{name:"sort",type:"compare"},{name:"method",type:"enum","default":"squarify",values:["squarify","resquarify","binary","dice","slice","slicedice"]},{name:"padding",type:"number","default":0},{name:"paddingInner",type:"number","default":0},{name:"paddingOuter",type:"number","default":0},{name:"paddingTop",type:"number","default":0},{name:"paddingRight",type:"number","default":0},{name:"paddingBottom",type:"number","default":0},{name:"paddingLeft",type:"number","default":0},{name:"ratio",type:"number","default":1.618033988749895},{name:"round",type:"boolean","default":!1},{name:"size",type:"number",array:!0,length:2},{name:"as",type:"string",array:!0,length:4,"default":["x0","y0","x1","y1","depth","children"]}]};$o(DO,Vg),$o(LO,Zg),$o(qO,Qg),$o(UO,sv),$o(FO,uv),$o(jO,av),$o(IO,ov),hv.prototype={constructor:hv,insert:function(t,e){var n,r,i;if(t){if(e.P=t,e.N=t.N,t.N&&(t.N.P=e),t.N=e,t.R){for(t=t.R;t.L;)t=t.L;t.L=e}else t.R=e;n=t}else this._?(t=vv(this._),e.P=null,e.N=t,t.P=t.L=e,n=t):(e.P=e.N=null,this._=e,n=null);for(e.L=e.R=null,e.U=n,e.C=!0,t=e;n&&n.C;)r=n.U,n===r.L?(i=r.R,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.R&&(pv(this,n),t=n,n=t.U),n.C=!1,r.C=!0,gv(this,r))):(i=r.L,i&&i.C?(n.C=i.C=!1,r.C=!0,t=r):(t===n.L&&(gv(this,n),t=n,n=t.U),n.C=!1,r.C=!0,pv(this,r))),n=t.U;this._.C=!1},remove:function(t){t.N&&(t.N.P=t.P),t.P&&(t.P.N=t.N),t.N=t.P=null;var e,n,r,i=t.U,a=t.L,o=t.R;if(n=a?o?vv(o):a:o,i?i.L===t?i.L=n:i.R=n:this._=n,a&&o?(r=n.C,n.C=t.C,n.L=a,a.U=n,n!==o?(i=n.U,n.U=t.U,t=n.R,i.L=t,n.R=o,o.U=n):(n.U=i,i=n,t=n.R)):(r=t.C,t=n),t&&(t.U=i),!r){if(t&&t.C)return void(t.C=!1);do{if(t===this._)break;if(t===i.L){if(e=i.R,e.C&&(e.C=!1,i.C=!0,pv(this,i),e=i.R),e.L&&e.L.C||e.R&&e.R.C){e.R&&e.R.C||(e.L.C=!1,e.C=!0,gv(this,e),e=i.R),e.C=i.C,i.C=e.R.C=!1,pv(this,i),t=this._;break}}else if(e=i.L,e.C&&(e.C=!1,i.C=!0,gv(this,i),e=i.L),e.L&&e.L.C||e.R&&e.R.C){e.L&&e.L.C||(e.R.C=!1,e.C=!0,pv(this,e),e=i.L),e.C=i.C,i.C=e.L.C=!1,gv(this,i),t=this._;break}e.C=!0,t=i,i=i.U}while(!t.C);t&&(t.C=!1)}}};var $O,BO,YO,GO,WO,HO=[],XO=[],VO=1e-6,JO=1e-12;Iv.prototype={constructor:Iv,polygons:function(){var t=this.edges;return this.cells.map(function(e){var n=e.halfedges.map(function(n){return Ev(e,t[n])});return n.data=e.site.data,n})},triangles:function(){var t=[],e=this.edges;return this.cells.forEach(function(n,r){if(a=(i=n.halfedges).length)for(var i,a,o,u=n.site,s=-1,f=e[i[a-1]],c=f.left===u?f.right:f.left;++s<a;)o=c,f=e[i[s]],c=f.left===u?f.right:f.left,o&&c&&r<o.index&&r<c.index&&Fv(u,o,c)<0&&t.push([u.data,o.data,c.data])}),t},links:function(){return this.edges.filter(function(t){return t.right}).map(function(t){return{source:t.left.data,target:t.right.data}})},find:function(t,e,n){for(var r,i,a=this,o=a._found||0,u=a.cells.length;!(i=a.cells[o]);)if(++o>=u)return null;var s=t-i.site[0],f=e-i.site[1],c=s*s+f*f;do{i=a.cells[r=o],o=null,i.halfedges.forEach(function(n){var r=a.edges[n],u=r.left;if(u!==i.site&&u||(u=r.right)){var s=t-u[0],f=e-u[1],l=s*s+f*f;l<c&&(c=l,o=u.index)}})}while(null!==o);return a._found=r,null==n||c<=n*n?i.site:null}};var ZO=[[-1e5,-1e5],[1e5,1e5]];J(Bv,Io).transform=function(t,e){var n,r,i,a,o=t.as||"path",u=e.source;for(n=$v().x(t.x).y(t.y),t.size?n.size(t.size):n.extent(t.extent||ZO),this.value=n=n(u),r=n.polygons(),i=0,a=u.length;i<a;++i)u[i][o]=r[i]?"M"+r[i].join("L")+"Z":null;return e.reflow(t.modified()).modifies(o)},$o({type:"Voronoi",metadata:{modifies:!0},params:[{name:"x",type:"field",required:!0},{name:"y",type:"field",required:!0},{name:"size",type:"number",array:!0,length:2},{name:"extent",type:"array",array:!0,length:2,"default":[[-1e5,-1e5],[1e5,1e5]],content:{type:"number",array:!0,length:2}},{name:"as",type:"string","default":"path"}]},Bv);var QO=Math.PI/180,KO=64,tR=2048,eR={archimedean:Vv,rectangular:Jv},nR=["x","y","font","fontSize","fontStyle","fontWeight","angle"],rR=["text","font","rotate","fontSize","fontStyle","fontWeight"];J(tm,Io).transform=function(t,e){function n(n){var r=t[n];return Y(r)&&e.modified(r.fields)}var r=t.modified();if(r||e.changed(e.ADD_REM)||rR.some(n)){var i,a=this.value,o=t.as||nR,u=t.fontSize||14;if(Y(u)?i=t.fontSizeRange:u=G(u),i){var s=u,f=nc("sqrt")().domain(em(s,e)).range(i);u=function(t){return f(s(t))}}var c=e.materialize(e.SOURCE).source;c.forEach(function(t){t[o[0]]=NaN,t[o[1]]=NaN,t[o[3]]=0});for(var l,h,d=a.words(c).text(t.text).size(t.size||[500,500]).padding(t.padding||1).spiral(t.spiral||"archimedean").rotate(t.rotate||0).font(t.font||"sans-serif").fontStyle(t.fontStyle||"normal").fontWeight(t.fontWeight||"normal").fontSize(u).layout(),p=a.size(),g=p[0]>>1,v=p[1]>>1,m=0,y=d.length;m<y;++m)l=d[m],h=l.datum,h[o[0]]=l.x+g,h[o[1]]=l.y+v,h[o[2]]=l.font,h[o[3]]=l.size,h[o[4]]=l.style,h[o[5]]=l.weight,h[o[6]]=l.rotate;return e.reflow(r).modifies(o)}},$o({type:"Wordcloud",metadata:{modifies:!0},params:[{name:"size",type:"number",array:!0,length:2},{name:"font",type:"string",expr:!0,"default":"sans-serif"},{name:"fontStyle",type:"string",expr:!0,"default":"normal"},{name:"fontWeight",type:"string",expr:!0,"default":"normal"},{name:"fontSize",type:"number",expr:!0,"default":14},{name:"fontSizeRange",type:"number",array:!0,"null":!0,"default":[10,50]},{name:"rotate",type:"number",expr:!0,"default":0},{name:"text",type:"field"},{name:"spiral",type:"string",values:["archimedean","rectangular"]},{name:"padding",type:"number",expr:!0},{name:"as",type:"string",array:!0,length:7,"default":["x","y","font","fontSize","fontStyle","fontWeight","angle"]}]},tm);var iR=J(hm,Io);iR.transform=function(t,e){return this._dims?t.modified("fields")||t.fields.some(function(t){return e.modified(t.fields)})?this.reinit(t,e):this.eval(t,e):this.init(t,e)},iR.init=function(t,e){for(var n,r,i=t.fields,a=t.query,o=this._indices={},u=this._dims=[],s=a.length,f=0;f<s;++f)n=i[f].fname,r=o[n]||(o[n]=fm()),u.push(sm(r,f,a[f]));return this.eval(t,e)},iR.reinit=function(t,e){var n,r,i,a,o,u,s,f,c,l=e.materialize().fork(),h=t.fields,d=t.query,p=this._indices,g=this._dims,v=this.value,m=v.curr(),y=v.prev(),b=v.all(),_=l.rem=l.add,x=l.mod,w=d.length,M={};if(y.set(m),e.rem.length&&(o=this.remove(t,e,l)),e.add.length&&v.add(e.add),e.mod.length)for(u={},a=e.mod,s=0,f=a.length;s<f;++s)u[a[s]._index]=1;for(s=0;s<w;++s)c=h[s],(!g[s]||t.modified("fields",s)||e.modified(c.fields))&&(i=c.fname,(n=M[i])||(p[i]=r=fm(),M[i]=n=r.insert(c,e.source,0)),g[s]=sm(r,s,d[s]).onAdd(n,m));for(s=0,f=v.data().length;s<f;++s)o[s]||(y[s]!==m[s]?_.push(s):u[s]&&m[s]!==b&&x.push(s));return v.mask=(1<<w)-1,l},iR.eval=function(t,e){var n=e.materialize().fork(),r=this._dims.length,i=0;return e.rem.length&&(this.remove(t,e,n),i|=(1<<r)-1),t.modified("query")&&!t.modified("fields")&&(i|=this.update(t,e,n)),e.add.length&&(this.insert(t,e,n),i|=(1<<r)-1),e.mod.length&&(this.modify(e,n),i|=(1<<r)-1),this.value.mask=i,n},iR.insert=function(t,e,n){var r,i,a,o=e.add,u=this.value,s=this._dims,f=this._indices,c=t.fields,l={},h=n.add,d=u.size(),p=d+o.length,g=s.length;u.resize(p,g),u.add(o);var v=u.curr(),m=u.prev(),y=u.all();for(r=0;r<g;++r)i=c[r].fname,a=l[i]||(l[i]=f[i].insert(c[r],o,d)),s[r].onAdd(a,v);for(;d<p;++d)m[d]=y,v[d]!==y&&h.push(d)},iR.modify=function(t,e){var n,r,i,a=e.mod,o=this.value,u=o.curr(),s=o.all(),f=t.mod;for(n=0,r=f.length;n<r;++n)i=f[n]._index,u[i]!==s&&a.push(i)},iR.remove=function(t,e,n){var r,i,a,o,u=this._indices,s=this.value,f=s.curr(),c=s.prev(),l=s.all(),h={},d=n.rem,p=e.rem;for(r=0,i=p.length;r<i;++r)a=p[r]._index,h[a]=1,c[a]=o=f[a],f[a]=l,o!==l&&d.push(a);for(a in u)u[a].remove(i,h);return this.reindex(e,i,h),h},iR.reindex=function(t,e,n){var r=this._indices,i=this.value;t.runAfter(function(){var t=i.remove(e,n);for(var a in r)r[a].reindex(t)})},iR.update=function(t,e,n){var r,i,a=this._dims,o=t.query,u=e.stamp,s=a.length,f=0;for(n.filters=0,i=0;i<s;++i)t.modified("query",i)&&(r=i,++f);if(1===f)f=a[r].one,this.incrementOne(a[r],o[r],n.add,n.rem);else for(i=0,f=0;i<s;++i)t.modified("query",i)&&(f|=a[i].one,this.incrementAll(a[i],o[i],u,n.add),n.rem=n.add);return f},iR.incrementAll=function(t,e,n,r){var i,a,o,u=this.value,s=u.seen(),f=u.curr(),c=u.prev(),l=t.index(),h=t.bisect(t.range),d=t.bisect(e),p=d[0],g=d[1],v=h[0],m=h[1],y=t.one;if(p<v)for(i=p,a=Math.min(v,g);i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(p>v)for(i=v,a=Math.min(p,m);i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;if(g>m)for(i=Math.max(p,m),a=g;i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;else if(g<m)for(i=Math.max(v,g),a=m;i<a;++i)o=l[i],s[o]!==n&&(c[o]=f[o],s[o]=n,r.push(o)),f[o]^=y;t.range=e.slice()},iR.incrementOne=function(t,e,n,r){var i,a,o,u=this.value,s=u.curr(),f=t.index(),c=t.bisect(t.range),l=t.bisect(e),h=l[0],d=l[1],p=c[0],g=c[1],v=t.one;if(h<p)for(i=h,a=Math.min(p,d);i<a;++i)o=f[i],s[o]^=v,n.push(o);else if(h>p)for(i=p,a=Math.min(h,g);i<a;++i)o=f[i],s[o]^=v,r.push(o);if(d>g)for(i=Math.max(h,g),a=d;i<a;++i)o=f[i],s[o]^=v,n.push(o);else if(d<g)for(i=Math.max(p,d),a=g;i<a;++i)o=f[i],s[o]^=v,r.push(o);t.range=e.slice()};var aR={type:"CrossFilter",metadata:{},params:[{name:"fields",type:"field",array:!0,required:!0},{name:"query",type:"array",array:!0,required:!0,content:{type:"number",array:!0,length:2}}]};J(dm,Io).transform=function(t,e){var n=~(t.ignore||0),r=t.filter,i=r.mask;if(0==(i&n))return e.StopPropagation;var a=e.fork(e.ALL),o=r.data(),u=r.curr(),s=r.prev(),f=function(t){return u[t]&n?null:o[t]};return a.filter(a.MOD,f),i&i-1?(a.filter(a.ADD,function(t){var e=u[t]&n;return!e&&e^s[t]&n?o[t]:null}),a.filter(a.REM,function(t){var e=u[t]&n;return!e||e^e^s[t]&n?null:o[t]})):(a.filter(a.ADD,f),a.filter(a.REM,function(t){return(u[t]&n)===i?o[t]:null})),a.filter(a.SOURCE,function(t){return f(t._index)})};var oR={type:"ResolveFilter",metadata:{},params:[{name:"ignore",type:"number",required:!0,description:"A bit mask indicating which filters to ignore."},{name:"filter",type:"object",required:!0,description:"Per-tuple filter bitmaps from a CrossFilter transform."}]};$o(aR,hm),$o(oR,dm);var uR=J(pm,Io),sR=new pn;uR.transform=function(t,e){var n,r=e.dataflow,i=t.mark,a=i.marktype,o=uS[a],u=o.bound,s=i.clip,f=i.bounds;return o.nested?(i.items.length&&r.dirty(i.items[0]),f=gm(i,u),i.items.forEach(function(t){t.bounds.clear().union(f)})):"group"===a||t.modified()?(e.visit(e.MOD,function(t){r.dirty(t)}),f.clear(),i.items.forEach(function(t){f.union(gm(t,u))})):(n=e.changed(e.REM),e.visit(e.ADD,function(t){f.union(gm(t,u))}),e.visit(e.MOD,function(t){n=n||f.alignsWith(t.bounds),r.dirty(t),f.union(gm(t,u))}),n&&!s&&(f.clear(),i.items.forEach(function(t){f.union(t.bounds)}))),s&&f.intersect(sR.set(0,0,i.group.width,i.group.height)),e.modifies("bounds")},J(vm,Io).transform=function(t,e){var n=this.value;n||(n=e.dataflow.scenegraph().mark(t.markdef,mm(t),t.index),n.group.context=t.context,t.context.group||(t.context.group=n.group),n.source=this,this.value=n);var r="group"===n.marktype?mn:vn;return e.visit(e.ADD,function(t){r.call(t,n)}),n.items=e.source,e};var fR=J(ym,Io),cR={parity:function(t){return t.filter(function(t,e){return e%2?t.opacity=0:1})},greedy:function(t){var e;return t.filter(function(t,n){return n&&bm(e.bounds,t.bounds)?t.opacity=0:(e=t,1)})}};fR.transform=function(t,e){var n=cR[t.method]||cR.parity,r=e.materialize(e.SOURCE).source,i=r;if("greedy"===t.method&&(i=r=r.filter(xm)),i.length>=3&&_m(i)){e=e.reflow(t.modified()).modifies("opacity");do{i=n(i)}while(i.length>=3&&_m(i));i.length<3&&!at(r).opacity&&(i.length>1&&(at(i).opacity=0),at(r).opacity=1)}return e},J(wm,Io).transform=function(t,e){var n=e.dataflow;if(e.visit(e.ALL,function(t){n.dirty(t)}),e.fields&&e.fields.zindex){var r=e.source&&e.source[0];r&&(r.mark.zdirty=!0)}};var lR="axis",hR="legend",dR="row-header",pR="row-footer",gR="row-title",vR="column-header",mR="column-footer",yR="column-title",bR="fit",_R="pad",xR="none",wR="axis",MR="title",kR="frame",ER="legend",SR="scope",AR="row-header",CR="row-footer",NR="column-header",zR="column-footer",TR=.5,OR=new pn;J(Rm,Io).transform=function(t,e){var n=e.dataflow;return t.mark.items.forEach(function(e){t.layout&&zm(n,e,t.layout),Pm(n,e,t)}),e};var RR="default",PR="view",DR="window",LR="vega-bind",qR="vega-bind-name",UR="vega-bind-radio",FR="vega-option-",jR="outer",IR=["value","update","react","bind"];Ny.prototype.visit=function(t){var e,n,r,i=this;if(t(i))return 1;for(e=zy(i),n=0,r=e.length;n<r;++n)if(e[n].visit(t))return 1};var $R,BR,YR,GR,WR=1,HR=2,XR=3,VR=4,JR=5,ZR=6,QR=7,KR=8,tP="ArrayExpression",eP="BinaryExpression",nP="CallExpression",rP="ConditionalExpression",iP="Identifier",aP="Literal",oP="LogicalExpression",uP="MemberExpression",sP="ObjectExpression",fP="Property",cP="UnaryExpression",lP="Unexpected token %0",hP="Unexpected number",dP="Unexpected string",pP="Unexpected identifier",gP="Unexpected reserved word",vP="Unexpected end of input",mP="Invalid regular expression",yP="Invalid regular expression: missing /",bP="Octal literals are not allowed in strict mode.",_P="Duplicate data property in object literal not allowed in strict mode",xP="ILLEGAL",wP="Disabled.",MP=new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0-\u08b2\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0980\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191e\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005-\u3007\u3021-\u3029\u3031-\u3035\u3038-\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua69d\ua6a0-\ua6ef\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\ua9e0-\ua9e4\ua9e6-\ua9ef\ua9fa-\ua9fe\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa7e-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),kP=new RegExp("[\xaa\xb5\xba\xc0-\xd6\xd8-\xf6\xf8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0300-\u0374\u0376\u0377\u037a-\u037d\u037f\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u0483-\u0487\u048a-\u052f\u0531-\u0556\u0559\u0561-\u0587\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u05d0-\u05ea\u05f0-\u05f2\u0610-\u061a\u0620-\u0669\u066e-\u06d3\u06d5-\u06dc\u06df-\u06e8\u06ea-\u06fc\u06ff\u0710-\u074a\u074d-\u07b1\u07c0-\u07f5\u07fa\u0800-\u082d\u0840-\u085b\u08a0-\u08b2\u08e4-\u0963\u0966-\u096f\u0971-\u0983\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bc-\u09c4\u09c7\u09c8\u09cb-\u09ce\u09d7\u09dc\u09dd\u09df-\u09e3\u09e6-\u09f1\u0a01-\u0a03\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a3c\u0a3e-\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a59-\u0a5c\u0a5e\u0a66-\u0a75\u0a81-\u0a83\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abc-\u0ac5\u0ac7-\u0ac9\u0acb-\u0acd\u0ad0\u0ae0-\u0ae3\u0ae6-\u0aef\u0b01-\u0b03\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3c-\u0b44\u0b47\u0b48\u0b4b-\u0b4d\u0b56\u0b57\u0b5c\u0b5d\u0b5f-\u0b63\u0b66-\u0b6f\u0b71\u0b82\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bbe-\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcd\u0bd0\u0bd7\u0be6-\u0bef\u0c00-\u0c03\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c39\u0c3d-\u0c44\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c58\u0c59\u0c60-\u0c63\u0c66-\u0c6f\u0c81-\u0c83\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbc-\u0cc4\u0cc6-\u0cc8\u0cca-\u0ccd\u0cd5\u0cd6\u0cde\u0ce0-\u0ce3\u0ce6-\u0cef\u0cf1\u0cf2\u0d01-\u0d03\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d-\u0d44\u0d46-\u0d48\u0d4a-\u0d4e\u0d57\u0d60-\u0d63\u0d66-\u0d6f\u0d7a-\u0d7f\u0d82\u0d83\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0dca\u0dcf-\u0dd4\u0dd6\u0dd8-\u0ddf\u0de6-\u0def\u0df2\u0df3\u0e01-\u0e3a\u0e40-\u0e4e\u0e50-\u0e59\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb9\u0ebb-\u0ebd\u0ec0-\u0ec4\u0ec6\u0ec8-\u0ecd\u0ed0-\u0ed9\u0edc-\u0edf\u0f00\u0f18\u0f19\u0f20-\u0f29\u0f35\u0f37\u0f39\u0f3e-\u0f47\u0f49-\u0f6c\u0f71-\u0f84\u0f86-\u0f97\u0f99-\u0fbc\u0fc6\u1000-\u1049\u1050-\u109d\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u135d-\u135f\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u16ee-\u16f8\u1700-\u170c\u170e-\u1714\u1720-\u1734\u1740-\u1753\u1760-\u176c\u176e-\u1770\u1772\u1773\u1780-\u17d3\u17d7\u17dc\u17dd\u17e0-\u17e9\u180b-\u180d\u1810-\u1819\u1820-\u1877\u1880-\u18aa\u18b0-\u18f5\u1900-\u191e\u1920-\u192b\u1930-\u193b\u1946-\u196d\u1970-\u1974\u1980-\u19ab\u19b0-\u19c9\u19d0-\u19d9\u1a00-\u1a1b\u1a20-\u1a5e\u1a60-\u1a7c\u1a7f-\u1a89\u1a90-\u1a99\u1aa7\u1ab0-\u1abd\u1b00-\u1b4b\u1b50-\u1b59\u1b6b-\u1b73\u1b80-\u1bf3\u1c00-\u1c37\u1c40-\u1c49\u1c4d-\u1c7d\u1cd0-\u1cd2\u1cd4-\u1cf6\u1cf8\u1cf9\u1d00-\u1df5\u1dfc-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u200c\u200d\u203f\u2040\u2054\u2071\u207f\u2090-\u209c\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2160-\u2188\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d7f-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2de0-\u2dff\u2e2f\u3005-\u3007\u3021-\u302f\u3031-\u3035\u3038-\u303c\u3041-\u3096\u3099\u309a\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua62b\ua640-\ua66f\ua674-\ua67d\ua67f-\ua69d\ua69f-\ua6f1\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua7ad\ua7b0\ua7b1\ua7f7-\ua827\ua840-\ua873\ua880-\ua8c4\ua8d0-\ua8d9\ua8e0-\ua8f7\ua8fb\ua900-\ua92d\ua930-\ua953\ua960-\ua97c\ua980-\ua9c0\ua9cf-\ua9d9\ua9e0-\ua9fe\uaa00-\uaa36\uaa40-\uaa4d\uaa50-\uaa59\uaa60-\uaa76\uaa7a-\uaac2\uaadb-\uaadd\uaae0-\uaaef\uaaf2-\uaaf6\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uab30-\uab5a\uab5c-\uab5f\uab64\uab65\uabc0-\uabea\uabec\uabed\uabf0-\uabf9\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe00-\ufe0f\ufe20-\ufe2d\ufe33\ufe34\ufe4d-\ufe4f\ufe70-\ufe74\ufe76-\ufefc\uff10-\uff19\uff21-\uff3a\uff3f\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]"),EP={"if":1,"in":1,"do":1,"var":1,"for":1,"new":1,"try":1,"let":1,"this":1,"else":1,"case":1,"void":1,"with":1,"enum":1,"while":1,"break":1,"catch":1,"throw":1,"const":1,"yield":1,"class":1,"super":1,"return":1,"typeof":1,"delete":1,"switch":1,"export":1,"import":1,"public":1,"static":1,"default":1,"finally":1,"extends":1,"package":1,"private":1,"function":1,"continue":1,"debugger":1,"interface":1,"protected":1,"instanceof":1,"implements":1},SP={"if":1,"this":1},AP={NaN:"NaN",E:"Math.E",LN2:"Math.LN2",LN10:"Math.LN10",LOG2E:"Math.LOG2E",LOG10E:"Math.LOG10E",PI:"Math.PI",SQRT1_2:"Math.SQRT1_2",SQRT2:"Math.SQRT2",MIN_VALUE:"Number.MIN_VALUE",MAX_VALUE:"Number.MAX_VALUE"},CP=Ub(UC),NP=Ub(Uk),zP=Ub(Lk),TP=Ub(Fk),OP=Ub(qk),RP=new Date(2e3,0,1),PP="undefined"!=typeof window&&window||null,DP="Literal",LP="Identifier",qP="@",UP="%",FP=":",jP=p_("area"),IP=p_("bounds"),$P=p_("centroid"),BP={},YP="union",GP="unit",WP="others",HP={isArray:XM,isBoolean:Z,isDate:Q,isNumber:K,isObject:L,isRegExp:tt,isString:q,toBoolean:ot,toDate:st,toNumber:ft,toString:ct,pad:it,truncate:ht,rgb:ts,lab:ss,hcl:gs,hsl:is,sequence:c,
format:CP,utcFormat:NP,utcParse:TP,timeFormat:zP,timeParse:OP,monthFormat:jb,monthAbbrevFormat:Ib,dayFormat:$b,dayAbbrevFormat:Bb,quarter:Yb,utcquarter:Gb,warn:Hb,info:Xb,debug:Vb,inScope:Jb,clampRange:Zb,pinchDistance:Qb,pinchAngle:Kb,screen:t_,windowsize:e_,span:n_,bandspace:f_,inrange:M_,encode:k_,modify:S_},XP=["view","item","group","xy","x","y"],VP="event.vega.",JP="this.",ZP={};U_("bandwidth",s_,a_),U_("copy",c_,a_),U_("domain",u_,a_),U_("range",o_,a_),U_("invert",h_,a_),U_("scale",l_,a_),U_("gradient",d_,a_),U_("geoArea",jP,a_),U_("geoBounds",IP,a_),U_("geoCentroid",$P,a_),U_("indata",m_,y_),U_("data",g_,v_),U_("vlPoint",z_,v_),U_("vlInterval",T_,v_),U_("vlPointDomain",O_,v_),U_("vlIntervalDomain",R_,v_),U_("treePath",x_,v_),U_("treeAncestors",w_,v_);var QP,KP,tD={blacklist:["_"],whitelist:["datum","event","item"],fieldvar:"datum",globalvar:function(t){return"_["+U("$"+t)+"]"},functions:F_,constants:AP,visitors:ZP},eD=function(t){function e(t){if(q(t))return t;var e=d[t.type];return null==e&&P("Unsupported type: "+t.type),e(t)}function n(t){var n={code:e(t),globals:Object.keys(f),fields:Object.keys(c)};return f={},c={},n}t=t||{};var r=t.whitelist?lt(t.whitelist):{},i=t.blacklist?lt(t.blacklist):{},a=t.constants||AP,o=(t.functions||qb)(e),u=t.globalvar,s=t.fieldvar,f={},c={},l=0,h=Y(u)?u:function(t){return u+'["'+t+'"]'},d={Literal:function(t){return t.raw},Identifier:function(t){var e=t.name;return l>0?e:i.hasOwnProperty(e)?P("Illegal identifier: "+e):a.hasOwnProperty(e)?a[e]:r.hasOwnProperty(e)?e:(f[e]=1,h(e))},MemberExpression:function(t){var n=!t.computed,r=e(t.object);n&&(l+=1);var i=e(t.property);return r===s&&(c[i]=1),n&&(l-=1),r+(n?"."+i:"["+i+"]")},CallExpression:function(t){"Identifier"!==t.callee.type&&P("Illegal callee type: "+t.callee.type);var n=t.callee.name,r=t.arguments,i=o.hasOwnProperty(n)&&o[n];return i||P("Unrecognized function: "+n),Y(i)?i(r):i+"("+r.map(e).join(",")+")"},ArrayExpression:function(t){return"["+t.elements.map(e).join(",")+"]"},BinaryExpression:function(t){return"("+e(t.left)+t.operator+e(t.right)+")"},UnaryExpression:function(t){return"("+t.operator+e(t.argument)+")"},ConditionalExpression:function(t){return"("+e(t.test)+"?"+e(t.consequent)+":"+e(t.alternate)+")"},LogicalExpression:function(t){return"("+e(t.left)+t.operator+e(t.right)+")"},ObjectExpression:function(t){return"{"+t.properties.map(e).join(",")+"}"},Property:function(t){l+=1;var n=e(t.key);return l-=1,n+":"+e(t.value)}};return n.functions=o,n.constants=a,n}(tD),nD="$",rD="view",iD="scope",aD="view",oD="[",uD="]",sD="{",fD="}",cD=":",lD=",",hD="@",dD=">",pD=/[\[\]\{\}]/,gD={"*":1,arc:1,area:1,group:1,image:1,line:1,path:1,rect:1,rule:1,shape:1,symbol:1,text:1,trail:1},vD="var datum=event.item&&event.item.datum;",mD=fx("key"),yD="descending",bD=gx("Aggregate"),_D=gx("AxisTicks"),xD=gx("Bound"),wD=gx("Collect"),MD=gx("Compare"),kD=gx("DataJoin"),ED=gx("Encode"),SD=gx("Facet"),AD=gx("Field"),CD=gx("Key"),ND=gx("LegendEntries"),zD=gx("Mark"),TD=gx("MultiExtent"),OD=gx("MultiValues"),RD=gx("Overlap"),PD=gx("Params"),DD=gx("PreFacet"),LD=gx("Projection"),qD=gx("Proxy"),UD=gx("Relay"),FD=gx("Render"),jD=gx("Scale"),ID=gx("Sieve"),$D=gx("SortItems"),BD=gx("ViewLayout"),YD=gx("Values"),GD=0,WD=["identity","ordinal","band","point","bin-linear","bin-ordinal","linear","pow","sqrt","log","sequential","time","utc","quantize","quantile","threshold"],HD=lt(WD),XD=lt(WD.slice(1,6)),VD=lt(["rule"]),JD=lt(["group","image","rect"]),ZD="mark",QD="frame",KD="scope",tL="axis",eL="axis-domain",nL="axis-grid",rL="axis-label",iL="axis-tick",aL="axis-title",oL="legend",uL="legend-entry",sL="legend-gradient",fL="legend-label",cL="legend-symbol",lL="legend-title",hL="title",dL={name:1,interactive:1},pL="group",gL="rect",vL="rule",mL="symbol",yL="text",bL="top",_L="left",xL="right",wL="bottom",ML="index",kL="label",EL="offset",SL="perc",AL="size",CL="total",NL="value",zL=["shape","size","fill","stroke","strokeDash","opacity"],TL="datum."+SL+'<=0?"left":datum.'+SL+'>=1?"right":"center"';Sw.fromEntries=function(t,e){var n=e.length,r=1,i=e[0],a=e[n-1],o=e[n-2],u=null;for(t.add(e[0]);r<n;++r)e[r].params.pulse=sx(e[r-1]),t.add(e[r]),"Aggregate"===e[r].type&&(u=e[r]);return new Sw(t,i,o,a,u)};var OL=Sw.prototype;OL.countsRef=function(t,e,n){var r,i,a,o=this,u=o.counts||(o.counts={}),s=Aw(e);return null!=s&&(t=o.scope,r=u[s]),r?n&&n.field&&Cw(t,r.agg.params,n):(a={groupby:t.fieldRef(e,"key"),pulse:sx(o.output)},n&&n.field&&Cw(t,a,n),i=t.add(bD(a)),r=t.add(wD({pulse:sx(i)})),r={agg:i,ref:sx(r)},null!=s&&(u[s]=r)),r.ref},OL.tuplesRef=function(){return sx(this.values)},OL.extentRef=function(t,e){return Nw(t,this,"extent","Extent",e,!1)},OL.domainRef=function(t,e){return Nw(t,this,"domain","Values",e,!1)},OL.valuesRef=function(t,e,n){return Nw(t,this,"vals","Values",e,n||!0)},OL.lookupRef=function(t,e){return Nw(t,this,"lookup","TupleIndex",e,!1)},OL.indataRef=function(t,e){return Nw(t,this,"indata","TupleIndex",e,!0,!0)};var RL=lt(["width","height","padding"]),PL=Kw.prototype=tM.prototype;PL.fork=function(){return new tM(this)},PL.toRuntime=function(){return this.finish(),{background:this.background,operators:this.operators,streams:this.streams,updates:this.updates,bindings:this.bindings}},PL.id=function(){return(this._subid?this._subid+":":0)+this._id++},PL.add=function(t){return this.operators.push(t),t.id=this.id(),t.refs&&(t.refs.forEach(function(e){e.$ref=t.id}),t.refs=null),t},PL.proxy=function(t){var e=t instanceof ax?sx(t):t;return this.add(qD({value:e}))},PL.addStream=function(t){return this.streams.push(t),t.id=this.id(),t},PL.addUpdate=function(t){return this.updates.push(t),t},PL.finish=function(){function t(t,e,n){var r,i;t&&(r=t.data||(t.data={}),i=r[e]||(r[e]=[]),i.push(n))}var e,n;this.root&&(this.root.root=!0);for(e in this.signals)this.signals[e].signal=e;for(e in this.scales)this.scales[e].scale=e;for(e in this.data){n=this.data[e],t(n.input,e,"input"),t(n.output,e,"output"),t(n.values,e,"values");for(var r in n.index)t(n.index[r],e,"index:"+r)}return this},PL.pushState=function(t,e,n){this._encode.push(sx(this.add(ID({pulse:t})))),this._parent.push(e),this._lookup.push(n?sx(this.proxy(n)):null),this._markpath.push(-1)},PL.popState=function(){this._encode.pop(),this._parent.pop(),this._lookup.pop(),this._markpath.pop()},PL.parent=function(){return at(this._parent)},PL.encode=function(){return at(this._encode)},PL.lookup=function(){return at(this._lookup)},PL.markpath=function(){var t=this._markpath;return++t[t.length-1]},PL.fieldRef=function(t,e){if(q(t))return fx(t,e);t.signal||P("Unsupported field reference: "+U(t));var n,r=t.signal,i=this.field[r];return i||(n={name:this.signalRef(r)},e&&(n.as=e),this.field[r]=i=sx(this.add(AD(n)))),i},PL.compareRef=function(t){function e(t){return px(t)?(r=!0,sx(n[t.signal])):t}var n=this.signals,r=!1,i=$(t.field).map(e),a=$(t.order).map(e);return r?sx(this.add(MD({fields:i,orders:a}))):cx(i,a)},PL.keyRef=function(t){function e(t){return px(t)?(r=!0,sx(n[t.signal])):t}var n=this.signals,r=!1;return t=$(t).map(e),r?sx(this.add(CD({fields:t}))):lx(t)},PL.sortRef=function(t){if(!t)return t;var e=[dx(t.op,t.field),"_id"],n=t.order||"ascending";return n.signal?sx(this.add(MD({fields:e,orders:[n=this.signalRef(n.signal),n]}))):cx(e,[n,n])},PL.event=function(t,e){var n=t+":"+e;if(!this.events[n]){var r=this.id();this.streams.push({id:r,source:t,type:e}),this.events[n]=r}return this.events[n]},PL.addSignal=function(t,e){this.signals.hasOwnProperty(t)&&P("Duplicate signal name: "+U(t));var n=e instanceof ax?e:this.add(ux(e));return this.signals[t]=n},PL.getSignal=function(t){return this.signals[t]||P("Unrecognized signal name: "+U(t)),this.signals[t]},PL.signalRef=function(t){return this.signals[t]?sx(this.signals[t]):(this.lambdas.hasOwnProperty(t)||(this.lambdas[t]=this.add(ux(null))),sx(this.lambdas[t]))},PL.parseLambdas=function(){for(var t=Object.keys(this.lambdas),e=0,n=t.length;e<n;++e){var r=t[e],i=j_(r,this),a=this.lambdas[r];a.params=i.$params,a.update=i.$expr}},PL.property=function(t){return t&&t.signal?this.signalRef(t.signal):t},PL.objectProperty=function(t){return t&&L(t)?this.signalRef(t.signal||eM(t)):t},PL.addBinding=function(t,e){this.bindings||P("Nested signals do not support binding: "+U(t)),this.bindings.push(H({signal:t},e))},PL.addScaleProj=function(t,e){this.scales.hasOwnProperty(t)&&P("Duplicate scale or projection name: "+U(t)),this.scales[t]=this.add(e)},PL.addScale=function(t,e){this.addScaleProj(t,jD(e))},PL.addProjection=function(t,e){this.addScaleProj(t,LD(e))},PL.getScale=function(t){return this.scales[t]||P("Unrecognized scale name: "+U(t)),this.scales[t]},PL.projectionRef=PL.scaleRef=function(t){return sx(this.getScale(t))},PL.projectionType=PL.scaleType=function(t){return this.getScale(t).params.type},PL.addData=function(t,e){return this.data.hasOwnProperty(t)&&P("Duplicate data set name: "+U(t)),this.data[t]=e},PL.getData=function(t){return this.data[t]||P("Undefined data set name: "+U(t)),this.data[t]},PL.addDataPipeline=function(t,e){return this.data.hasOwnProperty(t)&&P("Duplicate data set name: "+U(t)),this.addData(t,Sw.fromEntries(this,e))};var DL=30,LL=2,qL="#4c78a8",UL="#000",FL="#888",jL="#ddd",IL=[{key:"$ref",parse:gM},{key:"$key",parse:mM},{key:"$expr",parse:vM},{key:"$field",parse:yM},{key:"$encode",parse:_M},{key:"$compare",parse:bM},{key:"$context",parse:xM},{key:"$subflow",parse:wM}],$L={skip:!0};TM.prototype=OM.prototype={fork:function(){var t=new OM(this);return(this.subcontext||(this.subcontext=[])).push(t),t},get:function(t){return this.nodes[t]},set:function(t,e){return this.nodes[t]=e},add:function(t,e){var n,r=this,i=r.dataflow;if(r.set(t.id,e),"Collect"===t.type&&(n=t.value)&&(n.$ingest?i.ingest(e,n.$ingest,n.$format):n.$request?i.request(e,n.$request,n.$format):i.pulse(e,i.changeset().insert(n))),t.root&&(r.root=e),t.parent){var a=r.get(t.parent.$ref);a?(i.connect(a,[e]),e.targets().add(a)):(r.unresolved=r.unresolved||[]).push(function(){a=r.get(t.parent.$ref),i.connect(a,[e]),e.targets().add(a)})}if(t.signal&&(r.signals[t.signal]=e),t.scale&&(r.scales[t.scale]=e),t.data)for(var o in t.data)n=r.data[o]||(r.data[o]={}),t.data[o].forEach(function(t){n[t]=e})},resolve:function(){return(this.unresolved||[]).forEach(function(t){t()}),delete this.unresolved,this},operator:function(t,e,n){this.add(t,this.dataflow.add(t.value,e,n,t.react))},transform:function(t,e,n){this.add(t,this.dataflow.add(this.transforms[e],n))},stream:function(t,e){this.set(t.id,e)},update:function(t,e,n,r,i){this.dataflow.on(e,n,r,i,t.options)},getState:CM,setState:NM};var BL=J(jM,Fo);BL.run=function(t){return Fo.prototype.run.call(this,t),(this._redraw||this._resize)&&this.render(),this},BL.render=function(){return this._renderer&&(this._resize&&(this._resize=0,Qm(this)),this._renderer.render(this._scenegraph.root)),this._redraw=!1,this},BL.dirty=function(t){this._redraw=!0,this._renderer&&this._renderer.dirty(t)},BL.signal=function(t,e,n){var r=IM(this,t);return 1===arguments.length?r.value:this.update(r,e,n)},BL.scenegraph=function(){return this._scenegraph},BL.background=function(t){return arguments.length?(this._background=t,this._resize=1,this):this._background},BL.width=function(t){return arguments.length?this.signal("width",t):this.signal("width")},BL.height=function(t){return arguments.length?this.signal("height",t):this.signal("height")},BL.padding=function(t){return arguments.length?this.signal("padding",t):this.signal("padding")},BL.renderer=function(t){return arguments.length?(Va(t)||this.error("Unrecognized renderer type: "+t),t!==this._renderType&&(this._renderType=t,this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._renderType},BL.loader=function(t){return arguments.length?(t!==this._loader&&(Fo.prototype.loader.call(this,t),this._renderer&&(this._renderer=null,this.initialize(this._el))),this):this._loader},BL.resize=function(){return this._autosize=1,this},BL.addEventListener=function(t,e){this._handler.on(t,e)},BL.removeEventListener=function(t,e){this._handler.off(t,e)},BL.addSignalListener=function(t,e){var n=IM(this,t),r=function(){e(t,n.value)};this.on(n,null,(r.handler=e,r))},BL.removeSignalListener=function(t,e){var n=IM(this,t),r=n._targets||[],i=r.filter(function(t){var n=t._update;return n&&n.handler===e});i.length&&r.remove(i[0])},BL.preventDefault=function(t){return arguments.length?(this._preventDefault=t,this):this._preventDefault},BL.tooltipHandler=function(t){var e=this._handler;return arguments.length?(e.handleTooltip=t||wa.prototype.handleTooltip,this):e.handleTooltip},BL.events=ey,BL.finalize=oy,BL.hover=ay,BL.autosize=DM,BL.data=Gm,BL.change=Wm,BL.insert=Hm,BL.remove=Xm,BL.initialize=yy,BL.toImageURL=xy,BL.toCanvas=My,BL.toSVG=ky,BL.getState=LM,BL.setState=FM,Yo("Bound",pm),Yo("Mark",vm),Yo("Overlap",ym),Yo("Render",wm),Yo("ViewLayout",Rm),t.version="3.0.0-beta.34",t.Dataflow=Fo,t.EventStream=ho,t.Parameters=uo,t.Pulse=xo,t.MultiPulse=zo,t.Operator=so,t.Transform=Io,t.changeset=oo,t.ingest=eo,t.register=$o,t.definition=Bo,t.definitions=ZS,t.transform=Yo,t.transforms=JS,t.tupleid=to,t.scale=nc,t.scheme=uc,t.interpolate=lc,t.interpolateRange=sc,t.projection=Eh,t.View=jM,t.parse=oM,t.expressionFunction=U_,t.formatLocale=bf,t.timeFormatLocale=ln,t.runtime=AM,t.runtimeContext=zM,t.bin=e,t.bootstrapCI=M,t.randomInteger=k,t.randomKDE=A,t.randomMixture=N,t.randomNormal=E,t.randomUniform=z,t.quartiles=S,t.accessor=T,t.accessorName=O,t.accessorFields=R,t.id=JM,t.identity=ZM,t.zero=QM,t.one=KM,t.truthy=tk,t.falsy=ek,t.logger=I,t.None=nk,t.Warn=rk,t.Info=ik,t.Debug=ak,t.array=$,t.compare=B,t.constant=G,t.debounce=W,t.error=P,t.extend=H,t.extentIndex=X,t.fastmap=V,t.field=F,t.inherits=J,t.isArray=XM,t.isBoolean=Z,t.isDate=Q,t.isFunction=Y,t.isNumber=K,t.isObject=L,t.isRegExp=tt,t.isString=q,t.key=et,t.merge=nt,t.pad=it,t.peek=at,t.repeat=rt,t.splitAccessPath=D,t.stringValue=U,t.toBoolean=ot,t.toDate=st,t.toNumber=ft,t.toString=ct,t.toSet=lt,t.truncate=ht,t.visitArray=dt,t.loader=Rt,t.read=hn,t.inferType=It,t.inferTypes=$t,t.typeParsers=lk,t.formats=fe,t.Bounds=pn,t.Gradient=gn,t.GroupItem=mn,t.ResourceLoader=kn,t.Item=vn,t.Scenegraph=_a,t.Handler=wa,t.Renderer=Ma,t.CanvasHandler=Ea,t.CanvasRenderer=za,t.SVGHandler=Ra,t.SVGRenderer=qa,t.SVGStringRenderer=Ga,t.RenderType=TS,t.renderModule=Va,t.Marks=uS,t.boundContext=si,t.boundStroke=ui,t.boundItem=ga,t.boundMark=va,t.pathCurves=Sr,t.pathSymbols=Rr,t.pathRectangle=jr,t.pathTrail=Ir,t.pathParse=Ar,t.pathRender=Tr,t.point=ka,t.canvas=Mn,t.domCreate=yn,t.domFind=bn,t.domChild=_n,t.domClear=xn,t.openTag=Da,t.closeTag=La,t.font=fa,t.textMetrics=nS,t.resetSVGClipId=Ni,t.sceneEqual=Ja,t.pathEqual=Za,t.sceneToJSON=ma,t.sceneFromJSON=ya,t.sceneZOrder=vi,t.sceneVisit=mi,t.scenePickVisit=yi,Object.defineProperty(t,"__esModule",{value:!0})});
//script wikirate common
(function(){$.extend({wikirate:{ajaxLoader:{head:"#ajax_loader",child:".loader-anime"},initRowRemove:function(t){return t||(t=$("._remove_row")),t.each(function(){var t;return t=$(this),t.on("click",function(){return t.closest("tr").remove()})})},isString:function(t){var e;return null!=(e="string"==typeof t)?e:{"true":!1}},jObj:function(t){return this.isString(t)?$(t):t},loader:function(t,e){var n,i;return null==e&&(e=!1),n=this,t=n.jObj(t),i=n.ajaxLoader,{isLoading:function(){return!!this.child().exists()},add:function(){if(!this.isLoading())return t.append($(i.head).html()),e?this.child().addClass("relative"):void 0},remove:function(){return this.child().remove()},child:function(){return t.find(i.child)}}}}}),window.wikirate=$.wikirate,$.urlParam=function(t){var e;return e=new RegExp("[?&]"+t+"=([^&#]*)").exec(window.location.href),null===e?null:e[1]||0},$.fn.exists=function(){return this.length>0},decko.slotReady(function(t){return t.find(".company_autocomplete").autocomplete({source:"/Companies+*right+*options.json?view=name_match",minLength:2}),t.find(".wikirate_company_autocomplete").autocomplete({source:"/Companies+*right+*options.json?view=name_match",minLength:2}),t.find(".wikirate_topic_autocomplete").autocomplete({source:"/Topic+*right+*options.json?view=name_match",minLength:2}),t.find(".metric_autocomplete").autocomplete({source:"/Metric+*right+*options.json?view=name_match",minLength:2}),wikirate.initRowRemove(t.find("._remove_row"))}),$(document).ready(function(){if($("#Home").exists())return $("#modal-main-slot").on("hidden.bs.modal",function(){return $(this).data("bs.modal",null),$(this).find(".modal-body").empty()})})}).call(this);
//script: new note page
(function(){var e,n,i,t,o;i=null,e=function(e){return encodeURI(e).split(/%..|./).length-1},t=function(n){var i,t;t=100,i=$(".note-counting .note-counting-number"),e(n.val())>t&&n.val(n.val().substring(0,t)),i.html(t-e(n.val()))},n=function(e,n){var i,t;return t=n.val(),i=e.find("#input_box_flag"),0===i.length&&(i=$("<input>").attr({type:"hidden",id:"input_box_flag",value:"false"}),i.appendTo(e.find("form"))),0!==t.length?i.val("true"):i.val("false")},o=function(){if("false"===$("#input_box_flag").val())return $("#input_box_flag").closest("form").submit(),clearInterval(i)},decko.slotReady(function(e){var s,u,a,r;u=e.filter(".TYPE-note.related-view, .TYPE-note.new-view, .TYPE-note.edit-view,.TYPE_PLUS_RIGHT-note-source.edit-view, .RIGHT-source.edit-view, .RIGHT-source.new-view"),u.on({mouseenter:function(){$(this).find(".remove-source").show()},mouseleave:function(){$(this).find(".remove-source").hide()}},".TYPE-source"),u.on("click",".TYPE-source .remove-source",function(){$(this).slot().remove()}),e.hasClass("new-view")&&e.hasClass("TYPE-note")&&(r=e.find("#card_name"),r.length&&t(r),e.find("#card_name").keyup(function(){t($(this))}),a=e.find(".RIGHT-source .sourcebox input"),a.keyup(function(){n(e,$(this))}),e.find(":submit.create-submit-button").click(function(){return"true"!==e.find("#input_box_flag").val()||(i=setInterval(o,500),!1)})),s=e.filter(".TYPE-note.new-view").find("._pDisLink"),s.length&&(s.show(),$(".RIGHT-basi,.RIGHT-tag,.RIGHT-year, .RIGHT-related_overview, .RIGHT-discussion").hide(),$("#_addBasis").click(function(){$(".RIGHT-basi").show(),$(this).hide()}),$("#_addMoreInfo").click(function(){$(".RIGHT-tag,.RIGHT-year,.RIGHT-related_overview, .RIGHT-discussion").show(),$(this).hide()})),e.find("#close-tip").click(function(){$(".note-tip").hide()})})}).call(this);
//script: new source page
(function(){decko.slotReady(function(e){if(e.hasClass("new-view")&&(e.hasClass("TYPE-source")||e.hasClass("TYPE-metric_value")))return e.find("#myTab").find("a").click(function(){var t,a;return t=$(this).data("source-type"),a=e.find(".RIGHT-Xsource_type").find("input:hidden.card-content"),a.val("[["+t+"]]"),a.siblings("ul").find("input[value="+t+"]").prop("checked",!0)})}),$(window).ready(function(){$("#add-company-and-topic").click(function(e){e.preventDefault(),$("#company-topic-meta").fadeIn(),$("#add-company-and-topic").hide()}),$("#add-tags-other").click(function(e){e.preventDefault(),$("#tag-date-others-meta").fadeIn(),$("#add-tags-other").hide()}),$("#suggest_button").on("click",function(){var e,t,a,n,i,o,d;return n=$("#card_subcards__Link_content"),e='<div class="sourceErrorMsg"> Invalid URL. (Valid URL looks like "http://www.example.com")</div>',n.val().match(/^http/)?(n.siblings(".sourceErrorMsg").remove(),!($(this).parents(".modal.fade").length>=1)&&(t="<span class='addSourceLoader'>Loading Metadata...</span>",n.siblings(".addSourceLoader").length>0||n.after(t),$("#loading").fadeIn(),i=$("#card_subcards__Title_content"),d=$("#card_subcards__Website_content").siblings(".pointer-list-ul").find(".pointer-item-text"),o=n.val(),a={},a.view="metadata",a.url=o,void $.ajax(decko.rootPath+"/source.json?"+$.param(a)).done(function(e){var t;i.val(e.title),d.focusin().val(e.website).focusout(),t=$(".new-view.TYPE-source .RIGHT-description").find("textarea:first").attr("id"),tinyMCE.get(t).setContent(e.description),n.siblings(".addSourceLoader").remove()}).error(function(){}).complete(function(){$("#loading").hide(),$(".first-meta").fadeIn()}))):(n.siblings(".sourceErrorMsg").length>0||n.after(e),!1)})})}).call(this);
//script: homepage carousel init
(function(){decko.slotReady(function(i){return i.find("#company-n-topic .company-list .search-result-list, #company-n-topic .topic-list .search-result-list").slick({slidesToShow:3,slidesToScroll:3,dots:!0,variableWidth:!0,responsive:[{breakpoint:1210,settings:{slidesToShow:2,slidesToScroll:3,infinite:!0,dots:!0}},{breakpoint:800,settings:{slidesToShow:1,slidesToScroll:2}}]}),i.find("#banner_column1").slick({dots:!0,autoplay:!0,autoplaySpeed:15e3}),i.find(".x-carousal .pointer-list").slick({dots:!0,autoplay:!0,autoplaySpeed:15e3,adaptiveHeight:!1,fade:!0,cssEase:"linear"}),i.find("#top-banner-wrapper .column-1 .SELF-video_image").click(function(){$("#wikirate-info-video").dialog({modal:!0,width:"auto",close:function(){$("#wikirate-info-video").dialog("destroy")}})})}),$(document).ready(function(){$('a[data-toggle="tab"]').on("shown.bs.tab",function(i){var o;return o=$(i.target).data("target"),console.log(o),$(o).find(".slick-next").trigger("click")}),$(".logged-in").length&&$("#top-banner-wrapper .join-us-button").text("Invite a friend")})}).call(this);
//homepage ie8 handling script
function isIE(e,i){var t,n="IE",m=document.createElement("B"),o=document.documentElement;return e&&(n+=" "+e,i&&(n=i+" "+n)),m.innerHTML="<!--[if "+n+']><b id="iecctest"></b><![endif]-->',o.appendChild(m),t=!!document.getElementById("iecctest"),o.removeChild(m),t}wagn.slotReady(function(){isIE("8")&&$(".STRUCTURE-company_overview .TYPE-image img,      .STRUCTURE-topic_overview .TYPE-image img,      .overview-item  .company-image img,      .overview-item  .topic-image img").css("position","inherit")});
//script: source preview
(function(){this.testSameOrigin=function(e,t){$.getJSON("Source.json?view=check_iframable&url="+e,function(e){var r,i;e.result||($("#webpage-preview").html(""),r=$("<div>",{"class":"redirect-notice"}),""!==t&&(i="/"+t+"?view=content&slot[structure]=source_item_preview",$.ajax(i).done(function(e){r.append(e),r.trigger("slotReady")}).fail(function(e){var t;t=$(e.responseText),t.find(".card-header").remove(),r.append(t)})),$("#webpage-preview").append(r),$("#webpage-preview").addClass("non-previewable"))})},this.resizeIframe=function(e){var t;return t=$(window).height()-$(".navbar").height()-1,e.find(".webpage-preview").height(t)},$(document).ready(function(){var e,t;if($(".preview-view.TYPE-source").exists)return $('[data-toggle="source_preview_tab_ajax"]').click(function(){var e,t,r;return e=$(this),t=e.attr("href"),r=e.attr("data-target"),void 0!==t&&$.get(t,function(e){$(r).html(e)}),e.tab("show"),!1}),$("#logo-bar").dblclick(function(){return!1}),e=$("#source-name").html(),t=$("#source_url").html(),t&&testSameOrigin(t,e),resizeIframe($("body"))})}).call(this);
//modal window script
$(function(){$(".modal-window").dialog({modal:!0,width:"46%",buttons:{Ok:function(){$(this).dialog("close")}}})});
//activate readmore script
wagn.slotReady(function(e){e.find(".card-content.TYPE_PLUS_RIGHT-page-description").readmore({maxHeight:90,embedCSS:!1}),e.find(".titled_with_edit-view.RIGHT-about > .card-content").each(function(){$(this).readmore({maxHeight:180,speed:500})}),e.find(".TYPE-company > .top >  .TYPE_PLUS_RIGHT-company-about.card-content").each(function(){$(this).readmore({maxHeight:190,speed:500})}),e.find(".TYPE-topic > .top >  .TYPE_PLUS_RIGHT-topic-about.card-content").each(function(){$(this).readmore({maxHeight:50,speed:500})}),e.find(".details > .RIGHT-topic_detail > .TYPE_PLUS_RIGHT-analysi-overview").each(function(){$(this).readmore({maxHeight:50,speed:500})}),e.find(".titled_with_edit-view.RIGHT-about > .card-content").each(function(){$(this).readmore("resizeBoxes")})});
//suggested source script
function addSuggestedSource(e,t,i,a){var n=encodeURIComponent(i),o=encodeURIComponent(a),s="http://mklab.iti.gr/wikirate-sandbox/api/index.php/recommendations/?company="+n+"&topic="+o+"&user_id="+t;$.getJSON(s).done(function(t){$.each(t.results,function(t,i){$("#loading_gif").hide();var a=$("<div>",{"class":"suggested-source-item"}),s=$("<div>",{"class":"source-link-image"}),r=$("<div>",{"class":"source-link-title"}),c="";c=i.images.length>0?i.images[0].url:"{{missing image|source;size:small;}}";var u=$('<img src="'+c+'">');s.append(u);var l=getLocation(i.url).hostname,d=$('<a class="preview-page-link" href="/?card[type]=Page&view=preview&layout=source preview page layout&url='+encodeURIComponent(i.url)+"&company="+n+"&topic="+o+'" target="_blank"> '+i.title+" - "+l+" </a>");r.append(d),a.append(s),a.append(r),e.append(a)})}).fail(function(t){e.html("Fail to get suggested sources."),console.log("error with "+t.responseText)})}var getLocation=function(e){var t=document.createElement("a");return t.href=e,t};$(document).ready(function(){var e=$("#company-key-name").html(),t=$("#topic-key-name").html(),i=$("#user-id").html();$(".STRUCTURE-source_link_preview").each(function(){$(this).find("img").each(function(){""==$(this).attr("src")&&$(this).attr("src","{{missing image|source;size:small;}}")})});var a=$(".suggested-source:first");a.length>0&&addSuggestedSource(a,i,e,t)});
//empty tab content script
wagn.slotReady(function(t){t.find(".tab").each(function(){var t=$(this);t.find(".search-no-results").each(function(){if(!($(this).find(".empty-tab").length>0)){var n=$("<div>",{"class":"empty-tab"}),a=t.attr("empty-tab-content");a&&(n.append("<span>"+a+"</span>"),$(this).append(n))}})})});
//script: filter search
(function(){decko.slotReady(function(){return $(".filter-search-form select,.filter-search-form input").change(function(){return $("form").submit()})})}).call(this);
//wikirate coffee
(function(){var t;wagn.editorContentFunctionMap[".source-editor > .pointer-list"]=function(){return t(this.find(".TYPE-source").map(function(){return $(this).attr("data-card-name")}))},t=function(t){var o;return o=$.makeArray(t),o=$.map(o,function(t,n){if(t&&o.indexOf(t)===n)return"[["+t+"]]"}),$.makeArray(o).join("\n")},$(window).ready(function(){return $("body").on("blur",".RIGHT-source .sourcebox input",function(){return $(".TYPE-note .sourcebox button")[0].click()}),$("body").on("click",".RIGHT-source .sourcebox button",function(){var t,o,n,r,e,i;return t=$(this),r=$(this).closest(".sourcebox").find("input"),i=$(this).closest(".sourcebox"),o='<div class="sourceErrorMsg"> Invalid URL. (Valid URL looks like "http://www.example.com")</div>',n=i.find(".sourceErrorMsg"),n.length>0&&n.remove(),0===r.val().length?(i.find(".sourceErrorMsg").remove(),i.append(o),$("#input_box_flag").val("false"),!1):(e=r.closest(".content-editor").find(".source-editor > .pointer-list"),t.html("Adding..."),t.attr("disabled",!0),$.ajax(wagn.rootPath+"/card/create",{data:{success:{view:"content"},slot:{structure:"source item"},sourcebox:"true",card:{type_code:"source",subcards:{"+Link":{content:r.val()}}}},success:function(t){var o;return o=$('<div class="card-slot"></div>'),e.append(o),o.slotSuccess(t),r.val("")},error:function(o){return t.slot().slotError(o.status,o.responseText)},complete:function(){return $("#input_box_flag").val("false"),t.html("Add"),t.attr("disabled",!1)}}),!1)}),$("body").on("click",".wikirate-topic-list",function(t){var o,n,r;return r=$(this),o=r.data("dialog"),n={minWidth:400,maxHeight:400,position:{my:"center",at:"center",of:window}},o?o.dialog(n):$.ajax({url:r.attr("href")}).done(function(t){return o=r.slot().find(".wikirate-topic-dialog"),wagn.dd=o,o.html(t),r.data("dialog",o),o.dialog(n),o.find("a").attr("target","topics")}),t.preventDefault()}),$("#menu-bar").on("mouseenter",".main-links > div",function(){var t;return t=$(this).find("ul").first(),t.menu(),t.show(),t.position({my:"left top",at:"left bottom",of:this})}),$("#menu-bar").on("mouseleave",".main-links > div",function(){var t;return t=$(this).find("ul").first(),t.hide()}),$("body").on("change",".SELF-company_comparison select",function(){return $(this).closest("form").submit()})})}).call(this);
//script: overview page
(function(){$(document).ready(function(){return $("body").on("ajax:success",".slotter",function(){var a,t,r;if(a=$(this),r=a.slot(),a.is("form")&&a.attr("action").indexOf("/card/update/"+r.attr("id"))>-1&&r.hasClass("TYPE_PLUS_RIGHT-analysi-overview")&&(t=$(".card-frame.TYPE-analysi"),t.size()>0))return $.ajax("/"+t.attr("id")).done(function(a){return $(".card-frame.TYPE-analysi:first").slotSuccess(a)})})})}).call(this);
//script: drag and drop
(function(){var t;t=function(t,n,e){return null==e&&(e="desc"),e="desc"===e?1:-1,$(t).find(".yinyang-row").sortElements(function(t,r){return $(t).data("sort-"+n)>$(r).data("sort-"+n)?-1*e:e})},$(document).ready(function(){var n,e,r,o,i,a,d,s,u;for(e=function(t,n){return $(t).closest(".voting").find(".list-drag-and-drop[data-bucket-name="+n+"]")},n=function(t,n){var r,o,i;return r=$(n).closest(".drag-item"),i=r.parent(),o=e(r,t),$(o).append(r),updateHints(i,o)},a=function(t,n){var r,o,i;return r=$(n).closest(".drag-item"),i=r.parent(),o=e(r,t),$(o).prepend(r),updateHints(i,o)},$("body").on("click",".list-drag-and-drop[data-bucket-name=no_vote] .drag-item .vote-up button.vote-link",function(){return n("up_vote",this)}),$("body").on("click",".list-drag-and-drop[data-bucket-name=down_vote] .drag-item .vote-up button.vote-link",function(){return n("no_vote",this)}),$("body").on("click",".list-drag-and-drop[data-bucket-name=up_vote] .drag-item .vote-down button.vote-link",function(){return a("no_vote",this)}),$("body").on("click",".list-drag-and-drop[data-bucket-name=no_vote] .drag-item .vote-down button.vote-link",function(){return a("down_vote",this)}),jQuery.fn.sortElements=function(){var t,n;return n=[].sort,t="You can't sort elements if any one is a descendant of another.",function(e,r){var o;return r=r||function(){return this},o=this.map(function(){var n,e,o;return o=r.call(this),e=o.parentNode,n=e.insertBefore(document.createTextNode(""),o.nextSibling),function(){e===this&&function(){throw new Error(t)}(),e.insertBefore(this,n),e.removeChild(n)}}),n.call(this,e).each(function(t){o[t].call(r.call(this))})}}(),d=$(".yinyang-list"),s=[],r=0,o=d.length;r<o;r++)i=d[r],(u=$(i).data("default-sort"))&&(t(i,u),$(i).closest(".voting").find(".filter-details ."+u).tab("show")),0===$(i).find(".drag-item:visible").length?s.push($(i).find(".empty-message").show()):s.push(void 0);return s}),decko.slotReady(function(n){var e,r,o,i,a;return e=function(t,n){var e,r,o,d,s;return e=n.item,r=e.parent(),r.parent().is(i.parent())?(a(i,r),d=e.data("update-path"),$(r).data("query"),(o=$(e).next(".drag-item"))&&(d+="&insert-before="+o.data("votee-id")),s=e.find(".vote-count"),$(s).closest(".card-slot").load(d)):$(this).sortable("cancel")},i=null,o=function(t,n){var e;if(e=n.item.parent(),!e.parent().is(i.parent()))return $(this).sortable("cancel")},r=function(t,n){return i=n.item.parent()},a=function(t,n){return 0===$(t).find(".drag-item:visible").length&&($(t).find(".unsaved-message").hide(),$(t).find(".empty-message").show()),$(n).find(".empty-message").hide(),$(n).find(".unsaved-message").show()},n.find(".filter-details .filter").on("click",function(){var n;return n=$(this).closest(".votee-filter").next().next(),t(n,$(this).data("sort-key"),$(this).data("sort-order"))}),n.find(".voting .list-drag-and-drop").sortable({connectWith:".voting .list-drag-and-drop",items:".drag-item",update:e,start:r,stop:o,dropOnEmpty:!0,revert:!1})})}).call(this);
//script metrics
(function(){var t,e,i;decko.editorContentFunctionMap[".pairs-editor"]=function(){var t;return t={},this.find("tbody").first().find("tr").each(function(){var e,i;if(e=$(this).find("td"),i=$(e[0]).data("key"))return t[i]=$(e[1]).find("input").val()}),JSON.stringify(t)},$(window).ready(function(){return $("body").on("input","input.metric-weight",function(){var t;return t=0,$(this).closest("tbody").find("input.metric-weight").each(function(){return t+=parseInt($(this).val())}),$(this).closest("tbody").find(".weight-sum").val(t),$(this).closest("form.card-form").find("button[type=submit]").prop("disabled",100!==t)}),$("body").on("click","._add-weight",function(){var t,e,i,n,r;return r=decko.rootPath+"/~"+$(this).data("metric-id"),n={view:"weight_row"},e=$(".TYPE_PLUS_RIGHT-metric-formula.edit-view table.pairs-editor > tbody > tr:last"),t=$("<tr></tr>"),e.before(t),wikirate.loader(t,!0).add(),$.ajax(r,{type:"GET",data:n,success:function(t){var i,n;if(n=$(".TYPE_PLUS_RIGHT-metric-formula.edit-view table.pairs-editor > tbody > tr"),i=$(n[n.length-2]),$(i).html(t),wikirate.initRowRemove(),2===n.size())return n.first().find("input").val(100),e.find("td").removeClass("hidden")}}),i=$(this).closest(".modal"),i.modal("hide"),i.find(".modal-dialog > .modal-content").empty()})}),t=function(t){return t.find(".value_type_field").hide()},i=function(t){if(""!==t)return $("."+t).slideDown(100)},e=function(e,n){var r;return r=function(){switch(n){case"Number":return"number_details";case"Money":return"currency_details";case"Category":case"Multi-Category":return"category_details";default:return""}}(),t(e),i(r)},$(document).ready(function(){return $(".topic-list .RIGHT-topic").readmore({maxHeight:70,heightMargin:16,moreLink:'<a href="#" ><small ">View all</small></a>',lessLink:'<a href="#"><small>View less</small></a>'})}),decko.slotReady(function(i){if(i.find('[data-tooltip="true"]').tooltip(),i.find('input[name="intervaltype"]').on("click",function(){return $(this).closest("label").tab("show")}),i.find(".card-editor.RIGHT-value_type").length&&(t(i),i.find(".card-editor.RIGHT-value_type .pointer-radio input:radio").each(function(){return $(this).is(":checked")&&e(i,$(this).val()),$(this).change(function(){return e(i,$(this).val())})}),i.parent().hasClass("modal-body")))return i.find(".cancel-button").data("dismiss","modal"),i.find("form:first").on("ajax:success",function(){return $("#modal-main-slot").modal("hide"),$("#fakeLoader").fakeLoader({timeToHide:1e6,zIndex:"999",spinner:"spinner1",bgColor:"rgb(255,255,255,0.80)"}),location.reload()})})}).call(this);
//script: import page
(function(){decko.slotReady(function(c){return c.find("#_check_all").change(function(){return $(this).is(":checked")?($("._group_check").prop("checked",!0),c.find(".import_table input:checkbox").prop("checked",!0)):($("._group_check").removeAttr("checked"),c.find(".import_table input:checkbox").removeAttr("checked"))}),c.find("._group_check").change(function(){var e;return e=$(this).data("group"),$(this).is(":checked")?c.find(".import_table").find("tr."+e).each(function(){return $(this).find("input:checkbox").prop("checked",!0)}):($("#_check_all").prop("checked",!1),c.find(".import_table").find("tr."+e).each(function(){return $(this).find("input:checkbox").prop("checked",!1)}))})})}).call(this);
//script: showcase
(function(){decko.slotReady(function(){var e,t,n,o,i,a,r,s,d,c,l,p,u,h,w,v,m,b;for(b=null,l=null,c=!1,v=function(){return $(".open-view.editable.RIGHT-showcase .dropzone").show(),b=$(this).closest(".contribution-tab").data("droptarget")},n=function(){return $(".open-view.editable.RIGHT-showcase .dropzone").hide()},m=function(e,t){return l=this,$(".open-view.editable.RIGHT-showcase .removezone").show(),b=encodeURIComponent($(t.item).slot().data("card-name"))},o=function(){return $(".open-view.editable.RIGHT-showcase .removezone").hide()},t=function(e){return encodeURIComponent($(e).find(">.card-slot.content-view").data("card-name"))},u=function(){var e,t;return t=$(".open-view.card-slot.RIGHT-showcase"),e=encodeURIComponent(t.data("card-name")),$(t).load("/"+e+"?view=open&slot[title]=Showcase&slot[hide]=menu%20toggle",function(){return $(this).children(":first").unwrap(),a()})},e=function(e,n){var o,i;return i="/"+b+"?add_item="+t(n.draggable),o=$(".open-view.RIGHT-showcase div[id='"+b+"']"),o.show().removeClass("hidden"),o.find("> .pointer-list").append("<div class='pointer-item item-content placeholder'><span class='glyphicon glyphicon-hourglass'></span></div>"),$.ajax({url:i,type:"PUT",success:u})},h=function(e,n){return n.draggable.remove(),1===$(l).find(".pointer-item").length&&$(l).hide(),c=!0,$.ajax({url:"/"+b+"?drop_item="+t(n.draggable),type:"PUT",greedy:!0})},r=function(e,n){var i;return o(),c||(i="/"+b+"?insert_item="+t(n.item)+"&item_index="+n.item.index(),$.ajax({url:i,type:"PUT"})),c=!1,!0},a=function(){return $(".open-view.editable.RIGHT-showcase .dropzone").droppable({drop:e}),$(".open-view.editable.RIGHT-showcase .removezone").droppable({drop:h}),$(".open-view.editable.RIGHT-showcase .showcase").sortable({items:"> .pointer-list > .item-content",stop:r,start:m})},a(),p=["note","source","metric","initiative","analysi"],w=[],i=0,d=p.length;i<d;i++)s=p[i],w.push($(".open-view.editable.RIGHT-contributed_"+s+" .tab-pane > div > .search-result-list > .search-result-item").draggable({start:v,stop:n,connectToSortable:".open-view.RIGHT-showcase .showcase_list-view.RIGHT-showcase_"+s+" .showcase",revert:"invalid",helper:"clone",zIndex:1e3}));return w})}).call(this);
//script: company page
(function(){var a,t,e,n;e=null,t=function(){var a,t,n,i,s,o,l;if(e)return e;for(e={},s=window.location.search.substring(1),l=s.split("&"),t=0;t<l.length;)i=l[t].split("="),n=i[0].toLowerCase(),o=i[1],"undefined"==typeof e[n]?e[n]=o:"string"==typeof e[n]?(a=[e[n],o],e[n]=a):e[n].push(o),t++;return e},n=function(){$("#fakeLoader").fakeLoader({timeToHide:1e6,zIndex:"999",spinner:"spinner1",bgColor:"rgb(255,255,255,0.80)"})},a=window.History,decko.slotReady(function(i){var s,o;return(i.hasClass("TYPE-company")||i.hasClass("TYPE-topic"))&&i.hasClass("open-view")&&i.hasClass("ALL")&&(e=null,s=t().tab,0===$("[data-tab-name='"+s+"']").size()&&(s="metric"),o=$("[data-tab-name='"+s+"']"),o.closest("li").addClass("active"),n(),$("#fakeLoader").hide()),i.find(".company-tabs .nav-tabs li a").off("click").click(function(t){var e,n,s,o;return!!(t.shiftKey||t.ctrlKey||t.metaKey)||(i.find(".company-tabs .nav-tabs li").removeClass("active"),$(this).closest("li").addClass("active"),e=$(this),n=e.data("tab-content-url"),s=n+"?view=content",o=".tab-content",void 0===n||($("#fakeLoader").fadeIn(),a.pushState(null,null,window.location.pathname+"?tab="+e.data("tab-name")),$.get(s,function(a){$(o).html(a),$(o).trigger("slotReady"),$("#fakeLoader").fadeOut()}),!1))})})}).call(this);
//note citation script
var ajaxFail=function(e,i){var t=$(i.responseText);e.html(t)},relatedOverviewReturned=function(e,i){e.html(i),e.trigger("slotReady")},citationBoxOnClick=function(){var e=$(this),i=e.attr("id").split("+")[0],t="citation-popup-window",n=$("#"+t);0==n.length&&($("#main").prepend('<div id="'+t+'" style="display:none;"></div>'),n=$("#"+t)),n.html("<img src='{{loading gif|source;size:medium}}' />"),n.dialog({height:"auto",position:{of:e,my:"right top",at:"left top",collision:"none none"},minWidth:500,closeOnEscape:!1,resizable:!1,draggable:!1,close:function(){n.dialog("destroy")}});var o="/"+i+"+related overview?view=content";$.ajax(o).done(function(e){relatedOverviewReturned(n,e)}).fail(function(e,i,t){ajaxFail(n,e,i,t)});return!1},citeSyntaxHelper=function(){var e=$(".RIGHT-overview"),i=$(this).closest(".card-slot").data("card-name");if(e.find(".tinymce-textarea").length>0){var t="{{"+i+"|cite}}";$(".sample-citation .note-tip").show(),$(".sample-citation textarea").val(t),$(".RIGHT-overview")[0].scrollIntoView(!0)}else{var n=window.location.href.indexOf("?")>0?window.location.search+"&":"?",o=window.location.pathname+n+"citable="+i+"&edit_general_overview=true";window.location=o}};wagn.slotReady(function(e){e.find(".titled-view.RIGHT-citation_count").each(function(){}),e.find(".general_overview_cite_btn").on("click",citeSyntaxHelper)}),$(document).ajaxComplete(function(){$(".general_overview_cite_btn").on("click",citeSyntaxHelper)});
//script: metric value
(function(){$.extend(wikirate,{appendNewValueForm:function(e){var t,r,n,i;return t=e.parent().parent().find(".card-slot.answer_table-view"),r=wikirate.loader(t,!0),r.add(),e.hide(),i=$.urlParam("source"),i=null!==i?"&source="+i:"",n=decko.prepUrl(e.data("url")+i),$.get(n,function(e){return t.prepend(e),decko.initializeEditors(t),t.trigger("slotReady"),r.remove()},"html").fail(function(e){return r.remove(),t.prepend(e.responseText)})},handleYearData:function(e,t){var r,n,i,a,o;if(r=e.find(".year input#pointer_item"),r.exists())return i=r.val(),n=!isNaN(t),o=function(){if(n)return e.find(".year input#pointer_item").val(t)},""===i.trim()&&o(),""!==i.trim()&&n&&parseInt(i)!==t&&(a="Note: This source is for "+i+" Would you like to change the year of this answer to "+t+"?",window.confirm(a))?o():void 0},valueChecking:function(e,t){var r,n,i;return i=encodeURIComponent(e.data("path")),t="?set_flag="+t,n=decko.prepUrl(decko.rootPath+"/update/"+i+t),r=e.closest(".double-check"),r.exists()||(r=e.closest(".RIGHT-checked_by")),r.html("loading..."),$.get(n,function(e){var t;return t=$(e).find(".card-body").html(),r.empty().html(t)},"html").fail(function(){return r.html("please <a href=/*signin>sign in</a>")})}}),$(document).ready(function(){return $("#ajax_loader").html(),$("body").on("click","._toggle_button_text",function(){return $(this).text(function(e,t){var r;return r=$(this).data("toggle-text"),$(this).data("toggle-text",t),r})}),$("body").on("click","._value_check_button",function(){return wikirate.valueChecking($(this),"checked")}),$("body").on("click","._value_uncheck_button",function(){return wikirate.valueChecking($(this),"not-checked")}),$("body").on("click","._add_new_value",function(){var e;return e=$(this).closest(".record-row").find(".card-slott.new_answer_form-view form"),e.exists()&&e.hasClass("hide")?(e.removeClass("hide"),$(this).hide()):wikirate.appendNewValueForm($(this))}),$("body").on("click","._form_close_button",function(){return $(this).closest("form").addClass("hide"),$(this).closest(".record-row").find("._add_new_value").show()}),$("body").on("ajax:success",'[data-form-for="new_metric_value"]',function(e,t){var r,n,i,a,o,s,d,c;return i=$("form.new-value-form"),n=i.find(".relevant-sources"),n.text().search("None")>-1&&(n=n.empty()),s=$(t).data("source-for"),c=parseInt($(t).data("year")),d="[data-source-for='"+s+"']",o=$("form.new-value-form").find(d+".source-details-toggle"),o.exists()?(r=o.find("._cite_button"),r.exists()?void 0:(r=$(d+".source-details").find("._cite_button"),wikirate.sourceCiteButtons(r,"cite"))):($(".source-details-toggle").removeClass("active"),a=$("<div>").attr("data-source-for",s).attr("data-year",c).addClass("source-details-toggle active"),a.append($(t).find(".source-info-container").parent()),a.find(".source-link").find("a.known-card, a.source-preview-link").replaceWith(function(){return $("<span>"+$(this).html()+"</span>")}),n.append(a),wikirate.handleYearData(i,c),wikirate.prepareSourceAppend(t))}),function(){var e,t,r;if(t=$("#source-preview-main"),e=$("#metric-container"),r={add:function(){return t.addClass("stick-right"),e.addClass("stick-left")},remove:function(){return t.removeClass("stick-right"),e.removeClass("stick-left")}},$(document).scrollTop()>60?r.add():r.remove(),$(window).scrollTop()>$("#main").height()-$(window).height()+300)return r.remove()}}),decko.slotReady(function(e){var t;if(t=e.find("form.new-value-form").is(":visible"),t?e.find("._add_new_value").hide():e.find("._add_new_value").show(),resizeIframe(e),e.hasClass("_show_add_new_value_button"))return e.parent().find("._add_new_value").show()})}).call(this);
//script: table
(function(){$(document).ready(function(){var t,i,n,e,l,o;return t=null,e=null,$("body").on("click",".tr-details-toggle  td.details",function(){return e=!0}),$("body").on("click",".details-close-icon",function(){return o(this)}),$("body").on("click",".tr-details-toggle",function(){return e?e=null:o(this)}),$("body").on("click",".tr-link",function(){return window.location.href=$(this).data("link-url")}),o=function(i){var e,o;return o=$(i).closest("tr"),t=$(o).find(".details"),t.is(":visible")?(t.hide(),o.removeClass("active")):(e=$(".wikirate-table tr.active"),e.find(".details").hide(),e.removeClass("active"),o.addClass("active"),t.show(),$.trim(t.html())||n(i)),l()},n=function(n){var e;return e=$("#ajax_loader").html(),t.append(e),$(t).load(i(n),function(){return $(t).find(".card-slot").trigger("slotReady")})},i=function(t){var i,n;return $(t).data("details-url")?$(t).data("details-url"):(n=$(t).data("view")||"content",i=$(t).data("append"),"/"+$(t).closest(".card-slot").attr("id")+"+"+i+"?view="+n)},l=function(){var i;if(i=t.closest(".modal-body").exists(),$(document).scrollTop()>56||i?t.addClass("stick"):t.removeClass("stick"),$(window).scrollTop()>$("#main").height()-$(window).height()+300)return t.removeClass("stick")},$(window).scroll(function(){if(t)return l()})})}).call(this);
//script: metric_chart
(function(){var t;decko.slotReady(function(n){var e,r,i,a,u;for(i=n.find(".vis"),a=[],e=0,r=i.length;e<r;e++)u=i[e],a.push($.ajax({url:$(u).data("url"),visID:$(u).attr("id"),dataType:"json",type:"GET",success:function(n){return t(n,this.visID)}}));return a}),t=function(t,n){var e,r;return e=vega.parse(t),r=new vega.View(e).initialize(document.querySelector("#"+n)).hover().run(),r.addEventListener("click",function(t,n){if(n.datum.link)return $.ajax(n.datum.link,{success:function(n){return $(t.target).setSlotContent(n)}})})}}).call(this);
//script: collapse
(function(){var t,l,n,a;$(document).ready(function(){return $("body").on("click.collapse-next","[data-toggle=collapse-next]",function(){return t($(this)).collapse("toggle")}),$("body").on("click",'[data-toggle="collapse"]',function(){var n;if(null!=$(this).data("url")&&(n=$(t(this)),!n.text().length))return l(n,$(this).data("url"))})}),decko.slotReady(function(t){return t.find('[data-toggle="collapse"], [data-toggle="collapse-next"]').each(function(){if(null!=$(this).data("collapse-icon-in")&&n($(this)),null!=$(this).data("collapse-text-in"))return a($(this))})}),a=function(l,n,a){var e;return null==n&&(n=null),null==a&&(a=null),e=$(t(l)),null!=l.data("collapse-text-in")&&(n||(n=l.data("collapse-text-in")),a||(a=l.data("collapse-text-out"))),e.on("hidden.bs.collapse",function(){return l.text(a)}),e.on("shown.bs.collapse",function(){return l.text(n)})},n=function(l,n,a){var e;return null==n&&(n=null),null==a&&(a=null),e=$(t(l)),null!=l.data("collapse-icon-in")&&(n||(n=l.data("collapse-icon-in")||"fa-caret-right"),a||(a=l.data("collapse-icon-out")||"fa-caret-down")),e.on("hide.bs.collapse",function(){return l.parent().find("."+n).removeClass(n).addClass(a)}),e.on("show.bs.collapse",function(){return l.parent().find("."+a).removeClass(a).addClass(n)})},l=function(t,l){return wikirate.loader(t,!0).add(),t.load(l,function(l){var n;return n=$(l).children(".card-slot")[0],null!=n?$(n).trigger("slotReady"):t.slot().trigger("slotReady")})},t=function(t){var l,n,a;return l=$(t),n=null!=l.data("parent")?l.closest(l.data("parent")):l.parent(),a=l.attr("href")||l.data("target")||".collapse",l.data("collapse")&&(a+=l.data("collapse")),l.find(a).length?l.find(a):l.siblings(a).length?l.siblings(a):n.find(a).length?n.find(a):n.siblings(a).length?n.siblings(a):$(a)}}).call(this);
//script: answer source handling
(function(){var e,t,r;$.extend(wikirate,{prepareSourceAppend:function(e){var t,r,n;if(t=$("#source-form-container"),r=$(e).find("#source-name").text(),n=$(e).find("#source_url").text(),resizeIframe(t),n)return testSameOrigin(n,r)},sourceCitation:function(t,n){var o,i,c,a,s;if(o=$("#source-form-container"),i=$(t),c=i.closest("form"),s="#"+i.closest(".TYPE-source").attr("id")+".TYPE-source:first",!c.exists()&&$(t).closest("#source-form-container")&&(c=$(".record-row .card-slot>form")),a={$relSource:c.find(".relevant-sources"),$citedSource:c.find(".cited-sources"),sourceName:i.closest(".TYPE-source").data("card-name"),$sourceContainer:c.find(s).parent().detach(),$sourceFormContr:o.find(s),$hiddenInput:$("<input>").attr("type","hidden").addClass("pointer-select")},"cite"===n&&e(a),"uncite"===n)return r(a)},appendSourceDetails:function(e){var t,r,n;return r=$("#source-form-container"),n=decko.prepUrl(decko.rootPath+e+"?view=source_and_preview"),t=wikirate.loader(r),t.add(),$.get(n,function(e){$(e).find("#source_url").text(),r.prepend(e),wikirate.prepareSourceAppend(e),t.remove()},"html").fail(function(){return t.remove()})}},e=function(e){if($([e.$sourceFormContr.find("._cite_button"),e.$sourceContainer.find("._cite_button")]).each(function(){return t($(this),"cite")}),e.$citedSource.text().search("None")>-1&&e.$citedSource.empty(),e.$hiddenInput.attr("value",e.sourceName),e.$sourceContainer.append(e.$hiddenInput),e.$citedSource.append(e.$sourceContainer.first()),e.$relSource.is(":empty"))return e.$relSource.text("None")},r=function(e){if($([e.$sourceFormContr.find("._cited_button"),e.$sourceContainer.find("._cited_button")]).each(function(){return t($(this),"uncite")}),e.$sourceContainer.find("input").remove(),e.$relSource.text().search("None")>-1&&e.$relSource.empty(),e.$relSource.append(e.$sourceContainer.first()),e.$citedSource.is(":empty"))return e.$citedSource.text("None")},t=function(e,t){var r;return"cite"===t?(r=e.removeClass("_cite_button btn-highlight").addClass("_cited_button btn-success").text("Cited!"),r.hover(function(){return $(this).text("Uncite!").addClass("btn-default")},function(){return $(this).text("Cited!").removeClass("btn-default")})):(r=e.removeClass("_cited_button btn-success").addClass("_cite_button btn-highlight").text("Cite!"),r.unbind("mouseenter mouseleave"))},{appendSourceForm:function(e){var t,r,n,o,i;return o=$("#source-form-container"),n=o.find("form"),t=wikirate.loader(o),r=o.find(".source-details"),n.exists()||t.isLoading()?(n.removeClass("hide"),r.addClass("hide")):($("._blank_state_message").remove(),i=e.data("url"),r.addClass("hide"),t.add(),$.get(i,function(e){o.prepend(e),decko.initializeEditors(o),n=o.find("form"),n.trigger("slotReady"),t.remove()},"html").fail(function(){return t.remove()}))}}),$(document).ready(function(){return $("body").on("click","._cite_button",function(){return wikirate.sourceCitation(this,"cite")}),$("body").on("click","._cited_button",function(){return wikirate.sourceCitation(this,"uncite")}),$("body").on("click","._add_new_source",function(){return wikirate.appendSourceForm($(this))}),$("body").on("click",".source-details-toggle",function(){var e,t,r,n,o,i,c,a;if(n=$("#source-form-container"),o=$(this),i=o.data("source-for"),a=parseInt(o.data("year")),c="[data-source-for='"+i+"']",e=wikirate.loader(n),t=o.closest("form"),!e.isLoading())return $("._blank_state_message").remove(),$(".source-details-toggle").removeClass("active"),$(c+".source-details-toggle").addClass("active"),n.find(".source-details").addClass("hide"),r=n.find(c),n.find("form").addClass("hide"),wikirate.handleYearData(t,a),r.exists()?r.removeClass("hide"):wikirate.appendSourceDetails(i)})})}).call(this);
//script: wikirate_coffee
(function(){var t;decko.editorContentFunctionMap[".source-editor > .pointer-list"]=function(){return t(this.find(".TYPE-source").map(function(){return $(this).attr("data-card-name")}))},t=function(t){var o;return o=$.makeArray(t),o=$.map(o,function(t,n){if(t&&o.indexOf(t)===n)return"[["+t+"]]"}),$.makeArray(o).join("\n")},$(window).ready(function(){return $("body").on("blur",".RIGHT-source .sourcebox input",function(){return $(".TYPE-note .sourcebox button")[0].click()}),$("body").on("click",".RIGHT-source .sourcebox button",function(){var t,o,n,r,e,i;return t=$(this),r=$(this).closest(".sourcebox").find("input"),i=$(this).closest(".sourcebox"),o='<div class="sourceErrorMsg"> Invalid URL. (Valid URL looks like "http://www.example.com")</div>',n=i.find(".sourceErrorMsg"),n.length>0&&n.remove(),0===r.val().length?(i.find(".sourceErrorMsg").remove(),i.append(o),$("#input_box_flag").val("false"),!1):(e=r.closest(".content-editor").find(".source-editor > .pointer-list"),t.html("Adding..."),t.attr("disabled",!0),$.ajax(wagn.rootPath+"/card/create",{data:{success:{view:"content"},slot:{structure:"source item"},sourcebox:"true",card:{type_code:"source",subcards:{"+Link":{content:r.val()}}}},success:function(t){var o;return o=$('<div class="card-slot"></div>'),e.append(o),o.slotSuccess(t),r.val("")},error:function(o){return t.slot().slotError(o.status,o.responseText)},complete:function(){return $("#input_box_flag").val("false"),t.html("Add"),t.attr("disabled",!1)}}),!1)}),$("body").on("click",".wikirate-topic-list",function(t){var o,n,r;return r=$(this),o=r.data("dialog"),n={minWidth:400,maxHeight:400,position:{my:"center",at:"center",of:window}},o?o.dialog(n):$.ajax({url:r.attr("href")}).done(function(t){return o=r.slot().find(".wikirate-topic-dialog"),wagn.dd=o,o.html(t),r.data("dialog",o),o.dialog(n),o.find("a").attr("target","topics")}),t.preventDefault()}),$("#menu-bar").on("mouseenter",".main-links > div",function(){var t;return t=$(this).find("ul").first(),t.menu(),t.show(),t.position({my:"left top",at:"left bottom",of:this})}),$("#menu-bar").on("mouseleave",".main-links > div",function(){var t;return t=$(this).find("ul").first(),t.hide()}),$("body").on("change",".SELF-company_comparison select",function(){return $(this).closest("form").submit()})})}).call(this);
//script: pointer config
(function(){var t,n;$.extend(decko.editorContentFunctionMap,{".pointer-select":function(){return n(this.val())},".pointer-multiselect":function(){return n(this.val())},".pointer-radio-list":function(){return n(this.find("input:checked").val())},".pointer-list-ul":function(){return n(this.find("input").map(function(){return $(this).val()}))},".pointer-checkbox-list":function(){return n(this.find("input:checked").map(function(){return $(this).val()}))},".pointer-select-list":function(){return n(this.find(".pointer-select select").map(function(){return $(this).val()}))},".pointer-mixed":function(){var t;return t=".pointer-checkbox-sublist input:checked,.pointer-sublist-ul input",n(this.find(t).map(function(){return $(this).val()}))},".perm-editor":function(){return t(this)}}),decko.editorInitFunctionMap[".pointer-list-editor"]=function(){return this.sortable({handle:".handle",cancel:""}),decko.initPointerList(this.find("input"))},$.extend(decko,{initPointerList:function(t){var n;return n=t.closest("ul").data("options-card"),n||(n=t.closest(".pointer-list-editor").data("options-card")),t.autocomplete({source:decko.prepUrl(decko.rootPath+"/"+n+".json?view=name_complete")})}}),n=function(t){var n;return n=$.map($.makeArray(t),function(t){if(t)return"[["+t+"]]"}),$.makeArray(n).join("\n")},t=function(t){var i,e;return t.find("#inherit").is(":checked")?"_left":(i=t.find(".perm-group input:checked").map(function(){return $(this).val()}),e=t.find(".perm-indiv input").map(function(){return $(this).val()}),n($.makeArray(i).concat($.makeArray(e))))}}).call(this);
//script: ace config
(function(){var e;decko.addEditor(".ace-editor-textarea",function(){return decko.initAce($(this))},function(){return e(this[0])}),$.extend(decko,{setAceConfig:function(e){var t;return t=function(){try{return $.parseJSON(e)}catch(e){return{}}},decko.aceConfig=t()},configAceEditor:function(e,t){var i,o,n;return i={showGutter:!0,theme:"ace/theme/github",printMargin:!1,tabSize:2,useSoftTabs:!0,maxLines:30},o={mode:"ace/mode/"+t},n=null!=decko.aceConfig?decko.aceConfig:{},$.extend(i,n["default"],n[t],o),e.setOptions(i)},initAce:function(e){var t,i,o;if(!(o=e.attr("data-ace-mode")))return void e.autosize();t=$("<div>",{position:"absolute",width:"auto",height:e.height()}).insertBefore(e),e.css("visibility","hidden"),e.css("height","0px"),ace.config.set("basePath","/assets/ace"),i=ace.edit(t[0]),i.getSession().setValue(e.val()),decko.configAceEditor(i,o)}}),e=function(e){var t,i;return t=$(e).siblings(".ace_editor"),i=ace.edit(t[0]),i.getSession().getValue()},$.extend(decko,{initProseMirror:function(e){var t,i,o;return t={menuBar:!0,tooltipMenu:!1},i={docFormat:"html"},o=null!=decko.proseMirrorConfig?decko.proseMirrorConfig:{},$.extend(t,o,i),createProseMirror(e,t)}})}).call(this);
//script: prosemirror config
(function(){var r;decko.addEditor(".prosemirror-editor",function(){return decko.initProseMirror(this[0].id)},function(){return r(this[0].id)}),$.extend(decko,{setProseMirrorConfig:function(r){var o;return o=function(){try{return $.parseJSON(r)}catch(r){return{}}},decko.proseMirrorConfig=o()},initProseMirror:function(r){var o,e,n;return o={menuBar:!0,tooltipMenu:!1},e={docFormat:"html"},n=null!=decko.proseMirrorConfig?decko.proseMirrorConfig:{},$.extend(o,n,e),createProseMirror(r,o)}}),r=function(r){var o;return o=getProseMirrorContent(r),"<p></p>"===o?"":o}}).call(this);
//script: tinymce config
(function(){decko.addEditor(".tinymce-textarea",function(){return decko.initTinyMCE(this[0].id)},function(){return tinyMCE.get(this[0].id).getContent()}),$.extend(decko,{setTinyMCEConfig:function(n){var t;return t=function(){try{return $.parseJSON(n)}catch(n){return{}}},decko.tinyMCEConfig=t()},initTinyMCE:function(n){var t,e,i;return t={plugins:"autoresize",autoresize_max_height:500},i=null!=decko.tinyMCEConfig?decko.tinyMCEConfig:{},e={mode:"exact",elements:n,content_css:decko.cssPath,entity_encoding:"raw"},$.extend(t,i,e),tinyMCE.init(t)}})}).call(this);
//script: ace
/* ***** BEGIN LICENSE BLOCK *****
 * Distributed under the BSD license:
 *
 * Copyright (c) 2010, Ajax.org B.V.
 * All rights reserved.
 *
 * Redistribution and use in source and binary forms, with or without
 * modification, are permitted provided that the following conditions are met:
 *     * Redistributions of source code must retain the above copyright
 *       notice, this list of conditions and the following disclaimer.
 *     * Redistributions in binary form must reproduce the above copyright
 *       notice, this list of conditions and the following disclaimer in the
 *       documentation and/or other materials provided with the distribution.
 *     * Neither the name of Ajax.org B.V. nor the
 *       names of its contributors may be used to endorse or promote products
 *       derived from this software without specific prior written permission.
 *
 * THIS SOFTWARE IS PROVIDED BY THE COPYRIGHT HOLDERS AND CONTRIBUTORS "AS IS" AND
 * ANY EXPRESS OR IMPLIED WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED
 * WARRANTIES OF MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE
 * DISCLAIMED. IN NO EVENT SHALL AJAX.ORG B.V. BE LIABLE FOR ANY
 * DIRECT, INDIRECT, INCIDENTAL, SPECIAL, EXEMPLARY, OR CONSEQUENTIAL DAMAGES
 * (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT OF SUBSTITUTE GOODS OR SERVICES;
 * LOSS OF USE, DATA, OR PROFITS; OR BUSINESS INTERRUPTION) HOWEVER CAUSED AND
 * ON ANY THEORY OF LIABILITY, WHETHER IN CONTRACT, STRICT LIABILITY, OR TORT
 * (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING IN ANY WAY OUT OF THE USE OF THIS
 * SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY OF SUCH DAMAGE.
 *
 * ***** END LICENSE BLOCK ***** */
!function(){function e(e){var t=function(e,t){return s("",e,t)},o=i;e&&(i[e]||(i[e]={}),o=i[e]),o.define&&o.define.packaged||(n.original=o.define,o.define=n,o.define.packaged=!0),o.require&&o.require.packaged||(s.original=o.require,o.require=t,o.require.packaged=!0)}var t="",i=function(){return this}();if(t||"undefined"==typeof requirejs){var n=function(e,t,i){if("string"!=typeof e)return void(n.original?n.original.apply(window,arguments):(console.error("dropping module because define wasn't a string."),console.trace()));2==arguments.length&&(i=t),n.modules||(n.modules={},n.payloads={}),n.payloads[e]=i,n.modules[e]=null},s=function(e,t,i){if("[object Array]"===Object.prototype.toString.call(t)){for(var n=[],o=0,a=t.length;o<a;++o){var l=r(e,t[o]);if(!l&&s.original)return s.original.apply(window,arguments);n.push(l)}i&&i.apply(null,n)}else{if("string"==typeof t){var h=r(e,t);return!h&&s.original?s.original.apply(window,arguments):(i&&i(),h)}if(s.original)return s.original.apply(window,arguments)}},o=function(e,t){if(-1!==t.indexOf("!")){var i=t.split("!");return o(e,i[0])+"!"+o(e,i[1])}if("."==t.charAt(0)){var n=e.split("/").slice(0,-1).join("/");for(t=n+"/"+t;-1!==t.indexOf(".")&&s!=t;){var s=t;t=t.replace(/\/\.\//,"/").replace(/[^\/]+\/\.\.\//,"")}}return t},r=function(e,t){t=o(e,t);var i=n.modules[t];if(!i){if("function"==typeof(i=n.payloads[t])){var r={},a={id:t,uri:"",exports:r,packaged:!0};r=i(function(e,i){return s(t,e,i)},r,a)||a.exports,n.modules[t]=r,delete n.payloads[t]}i=n.modules[t]=r||i}return i};e(t)}}(),define("ace/lib/regexp",["require","exports","module"],function(){"use strict";function e(e){return(e.global?"g":"")+(e.ignoreCase?"i":"")+(e.multiline?"m":"")+(e.extended?"x":"")+(e.sticky?"y":"")}function t(e,t,i){if(Array.prototype.indexOf)return e.indexOf(t,i);for(var n=i||0;n<e.length;n++)if(e[n]===t)return n;return-1}var i={exec:RegExp.prototype.exec,test:RegExp.prototype.test,match:String.prototype.match,replace:String.prototype.replace,split:String.prototype.split},n=i.exec.call(/()??/,"")[1]===undefined,s=function(){var e=/^/g;return i.test.call(e,""),!e.lastIndex}();s&&n||(RegExp.prototype.exec=function(o){var r,a,l=i.exec.apply(this,arguments);if("string"==typeof o&&l){if(!n&&l.length>1&&t(l,"")>-1&&(a=RegExp(this.source,i.replace.call(e(this),"g","")),i.replace.call(o.slice(l.index),a,function(){for(var e=1;e<arguments.length-2;e++)arguments[e]===undefined&&(l[e]=undefined)})),this._xregexp&&this._xregexp.captureNames)for(var h=1;h<l.length;h++)(r=this._xregexp.captureNames[h-1])&&(l[r]=l[h]);!s&&this.global&&!l[0].length&&this.lastIndex>l.index&&this.lastIndex--}return l},s||(RegExp.prototype.test=function(e){var t=i.exec.call(this,e);return t&&this.global&&!t[0].length&&this.lastIndex>t.index&&this.lastIndex--,!!t}))}),define("ace/lib/es5-shim",["require","exports","module"],function(){function e(){}function t(e){try{return Object.defineProperty(e,"sentinel",{}),"sentinel"in e}catch(e){}}function i(e){return e=+e,e!==e?e=0:0!==e&&e!==1/0&&e!==-1/0&&(e=(e>0||-1)*Math.floor(Math.abs(e))),e}Function.prototype.bind||(Function.prototype.bind=function(t){var i=this;if("function"!=typeof i)throw new TypeError("Function.prototype.bind called on incompatible "+i);var n=u.call(arguments,1),s=function(){if(this instanceof s){var e=i.apply(this,n.concat(u.call(arguments)));return Object(e)===e?e:this}return i.apply(t,n.concat(u.call(arguments)))};return i.prototype&&(e.prototype=i.prototype,s.prototype=new e,e.prototype=null),s});var n,s,o,r,a,l=Function.prototype.call,h=Array.prototype,c=Object.prototype,u=h.slice,d=l.bind(c.toString),g=l.bind(c.hasOwnProperty);if((a=g(c,"__defineGetter__"))&&(n=l.bind(c.__defineGetter__),s=l.bind(c.__defineSetter__),o=l.bind(c.__lookupGetter__),r=l.bind(c.__lookupSetter__)),2!=[1,2].splice(0).length)if(function(){function e(e){var t=new Array(e+2);return t[0]=t[1]=0,t}var t,i=[];if(i.splice.apply(i,e(20)),i.splice.apply(i,e(26)),t=i.length,i.splice(5,0,"XXX"),i.length,t+1==i.length)return!0}()){var f=Array.prototype.splice;Array.prototype.splice=function(e,t){return arguments.length?f.apply(this,[void 0===e?0:e,void 0===t?this.length-e:t].concat(u.call(arguments,2))):[]}}else Array.prototype.splice=function(e,t){var i=this.length;e>0?e>i&&(e=i):void 0==e?e=0:e<0&&(e=Math.max(i+e,0)),e+t<i||(t=i-e);var n=this.slice(e,e+t),s=u.call(arguments,2),o=s.length;if(e===i)o&&this.push.apply(this,s);else{var r=Math.min(t,i-e),a=e+r,l=a+o-r,h=i-a,c=i-r;if(l<a)for(var d=0;d<h;++d)this[l+d]=this[a+d];else if(l>a)for(d=h;d--;)this[l+d]=this[a+d];if(o&&e===c)this.length=c,this.push.apply(this,s);else for(this.length=c+o,d=0;d<o;++d)this[e+d]=s[d]}return n};Array.isArray||(Array.isArray=function(e){return"[object Array]"==d(e)});var m=Object("a"),p="a"!=m[0]||!(0 in m);if(Array.prototype.forEach||(Array.prototype.forEach=function(e){var t=S(this),i=p&&"[object String]"==d(this)?this.split(""):t,n=arguments[1],s=-1,o=i.length>>>0;if("[object Function]"!=d(e))throw new TypeError;for(;++s<o;)s in i&&e.call(n,i[s],s,t)}),Array.prototype.map||(Array.prototype.map=function(e){var t=S(this),i=p&&"[object String]"==d(this)?this.split(""):t,n=i.length>>>0,s=Array(n),o=arguments[1];if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var r=0;r<n;r++)r in i&&(s[r]=e.call(o,i[r],r,t));return s}),Array.prototype.filter||(Array.prototype.filter=function(e){var t,i=S(this),n=p&&"[object String]"==d(this)?this.split(""):i,s=n.length>>>0,o=[],r=arguments[1];if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var a=0;a<s;a++)a in n&&(t=n[a],e.call(r,t,a,i)&&o.push(t));return o}),Array.prototype.every||(Array.prototype.every=function(e){var t=S(this),i=p&&"[object String]"==d(this)?this.split(""):t,n=i.length>>>0,s=arguments[1];if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var o=0;o<n;o++)if(o in i&&!e.call(s,i[o],o,t))return!1;return!0}),Array.prototype.some||(Array.prototype.some=function(e){var t=S(this),i=p&&"[object String]"==d(this)?this.split(""):t,n=i.length>>>0,s=arguments[1];if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");for(var o=0;o<n;o++)if(o in i&&e.call(s,i[o],o,t))return!0;return!1}),Array.prototype.reduce||(Array.prototype.reduce=function(e){var t=S(this),i=p&&"[object String]"==d(this)?this.split(""):t,n=i.length>>>0;if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduce of empty array with no initial value");var s,o=0;if(arguments.length>=2)s=arguments[1];else for(;;){if(o in i){s=i[o++];break}if(++o>=n)throw new TypeError("reduce of empty array with no initial value")}for(;o<n;o++)o in i&&(s=e.call(void 0,s,i[o],o,t));return s}),Array.prototype.reduceRight||(Array.prototype.reduceRight=function(e){var t=S(this),i=p&&"[object String]"==d(this)?this.split(""):t,n=i.length>>>0;if("[object Function]"!=d(e))throw new TypeError(e+" is not a function");if(!n&&1==arguments.length)throw new TypeError("reduceRight of empty array with no initial value");var s,o=n-1;if(arguments.length>=2)s=arguments[1];else for(;;){if(o in i){s=i[o--];break}if(--o<0)throw new TypeError("reduceRight of empty array with no initial value")}do{o in this&&(s=e.call(void 0,s,i[o],o,t))}while(o--);return s}),Array.prototype.indexOf&&-1==[0,1].indexOf(1,2)||(Array.prototype.indexOf=function(e){var t=p&&"[object String]"==d(this)?this.split(""):S(this),n=t.length>>>0;if(!n)return-1;var s=0;for(arguments.length>1&&(s=i(arguments[1])),s=s>=0?s:Math.max(0,n+s);s<n;s++)if(s in t&&t[s]===e)return s;return-1}),Array.prototype.lastIndexOf&&-1==[0,1].lastIndexOf(0,-3)||(Array.prototype.lastIndexOf=function(e){var t=p&&"[object String]"==d(this)?this.split(""):S(this),n=t.length>>>0;if(!n)return-1;var s=n-1;for(arguments.length>1&&(s=Math.min(s,i(arguments[1]))),s=s>=0?s:n-Math.abs(s);s>=0;s--)if(s in t&&e===t[s])return s;return-1}),Object.getPrototypeOf||(Object.getPrototypeOf=function(e){return e.__proto__||(e.constructor?e.constructor.prototype:c)}),!Object.getOwnPropertyDescriptor){Object.getOwnPropertyDescriptor=function(e,t){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.getOwnPropertyDescriptor called on a non-object: "+e);if(g(e,t)){var i,n,s;if(i={enumerable:!0,configurable:!0},a){var l=e.__proto__;e.__proto__=c;var n=o(e,t),s=r(e,t);if(e.__proto__=l,n||s)return n&&(i.get=n),s&&(i.set=s),i}return i.value=e[t],i}}}if(Object.getOwnPropertyNames||(Object.getOwnPropertyNames=function(e){return Object.keys(e)}),!Object.create){var A;A=null===Object.prototype.__proto__?function(){return{__proto__:null}}:function(){var e={};for(var t in e)e[t]=null;return e.constructor=e.hasOwnProperty=e.propertyIsEnumerable=e.isPrototypeOf=e.toLocaleString=e.toString=e.valueOf=e.__proto__=null,e},Object.create=function(e,t){var i;if(null===e)i=A();else{if("object"!=typeof e)throw new TypeError("typeof prototype["+typeof e+"] != 'object'");var n=function(){};n.prototype=e,i=new n,i.__proto__=e}return void 0!==t&&Object.defineProperties(i,t),i}}if(Object.defineProperty){var C=t({}),F="undefined"==typeof document||t(document.createElement("div"));if(!C||!F)var v=Object.defineProperty}if(!Object.defineProperty||v){Object.defineProperty=function(e,t,i){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.defineProperty called on non-object: "+e);if("object"!=typeof i&&"function"!=typeof i||null===i)throw new TypeError("Property description must be an object: "+i);if(v)try{return v.call(Object,e,t,i)}catch(e){}if(g(i,"value"))if(a&&(o(e,t)||r(e,t))){var l=e.__proto__;e.__proto__=c,delete e[t],e[t]=i.value,e.__proto__=l}else e[t]=i.value;else{if(!a)throw new TypeError("getters & setters can not be defined on this javascript engine");g(i,"get")&&n(e,t,i.get),g(i,"set")&&s(e,t,i.set)}return e}}Object.defineProperties||(Object.defineProperties=function(e,t){for(var i in t)g(t,i)&&Object.defineProperty(e,i,t[i]);return e}),Object.seal||(Object.seal=function(e){return e}),Object.freeze||(Object.freeze=function(e){return e});try{Object.freeze(function(){})}catch(e){Object.freeze=function(e){return function(t){return"function"==typeof t?t:e(t)}}(Object.freeze)}if(Object.preventExtensions||(Object.preventExtensions=function(e){return e}),Object.isSealed||(Object.isSealed=function(){return!1}),Object.isFrozen||(Object.isFrozen=function(){return!1}),Object.isExtensible||(Object.isExtensible=function(e){if(Object(e)===e)throw new TypeError;for(var t="";g(e,t);)t+="?";e[t]=!0;var i=g(e,t);return delete e[t],i}),!Object.keys){var w=!0,E=["toString","toLocaleString","valueOf","hasOwnProperty","isPrototypeOf","propertyIsEnumerable","constructor"],$=E.length;for(var y in{toString:null})w=!1;Object.keys=function(e){if("object"!=typeof e&&"function"!=typeof e||null===e)throw new TypeError("Object.keys called on a non-object");var t=[];for(var i in e)g(e,i)&&t.push(i);if(w)for(var n=0,s=$;n<s;n++){var o=E[n];g(e,o)&&t.push(o)}return t}}Date.now||(Date.now=function(){return(new Date).getTime()});var b="\t\n\x0B\f\r \xa0\u1680\u180e\u2000\u2001\u2002\u2003\u2004\u2005\u2006\u2007\u2008\u2009\u200a\u202f\u205f\u3000\u2028\u2029\ufeff";if(!String.prototype.trim||b.trim()){b="["+b+"]";var B=new RegExp("^"+b+b+"*"),D=new RegExp(b+b+"*$");String.prototype.trim=function(){return String(this).replace(B,"").replace(D,"")}}var S=function(e){if(null==e)throw new TypeError("can't convert "+e+" to object");return Object(e)}}),define("ace/lib/fixoldbrowsers",["require","exports","module","ace/lib/regexp","ace/lib/es5-shim"],function(e){"use strict";e("./regexp"),e("./es5-shim")}),define("ace/lib/dom",["require","exports","module"],function(e,t){"use strict";if("undefined"!=typeof document){var i="http://www.w3.org/1999/xhtml";t.getDocumentHead=function(e){return e||(e=document),e.head||e.getElementsByTagName("head")[0]||e.documentElement},t.createElement=function(e,t){return document.createElementNS?document.createElementNS(t||i,e):document.createElement(e)},t.hasCssClass=function(e,t){return-1!==(e.className||"").split(/\s+/g).indexOf(t)},t.addCssClass=function(e,i){t.hasCssClass(e,i)||(e.className+=" "+i)},t.removeCssClass=function(e,t){for(var i=e.className.split(/\s+/g);;){var n=i.indexOf(t);if(-1==n)break;i.splice(n,1)}e.className=i.join(" ")},t.toggleCssClass=function(e,t){for(var i=e.className.split(/\s+/g),n=!0;;){var s=i.indexOf(t);if(-1==s)break;n=!1,i.splice(s,1)}return n&&i.push(t),e.className=i.join(" "),n},t.setCssClass=function(e,i,n){n?t.addCssClass(e,i):t.removeCssClass(e,i)},t.hasCssString=function(e,t){var i,n=0;if(t=t||document,t.createStyleSheet&&(i=t.styleSheets)){for(;n<i.length;)if(i[n++].owningElement.id===e)return!0}else if(i=t.getElementsByTagName("style"))for(;n<i.length;)if(i[n++].id===e)return!0;return!1},t.importCssString=function(e,n,s){if(s=s||document,n&&t.hasCssString(n,s))return null;var o;s.createStyleSheet?(o=s.createStyleSheet(),o.cssText=e,n&&(o.owningElement.id=n)):(o=s.createElementNS?s.createElementNS(i,"style"):s.createElement("style"),o.appendChild(s.createTextNode(e)),n&&(o.id=n),t.getDocumentHead(s).appendChild(o))},t.importCssStylsheet=function(e,i){if(i.createStyleSheet)i.createStyleSheet(e);else{var n=t.createElement("link");n.rel="stylesheet",n.href=e,t.getDocumentHead(i).appendChild(n)}},t.getInnerWidth=function(e){return parseInt(t.computedStyle(e,"paddingLeft"),10)+parseInt(t.computedStyle(e,"paddingRight"),10)+e.clientWidth},t.getInnerHeight=function(e){return parseInt(t.computedStyle(e,"paddingTop"),10)+parseInt(t.computedStyle(e,"paddingBottom"),10)+e.clientHeight},window.pageYOffset!==undefined?(t.getPageScrollTop=function(){return window.pageYOffset},t.getPageScrollLeft=function(){return window.pageXOffset}):(t.getPageScrollTop=function(){return document.body.scrollTop},t.getPageScrollLeft=function(){return document.body.scrollLeft}),window.getComputedStyle?t.computedStyle=function(e,t){return t?(window.getComputedStyle(e,"")||{})[t]||"":window.getComputedStyle(e,"")||{}}:t.computedStyle=function(e,t){return t?e.currentStyle[t]:e.currentStyle},t.scrollbarWidth=function(e){var i=t.createElement("ace_inner");i.style.width="100%",i.style.minWidth="0px",i.style.height="200px",i.style.display="block";var n=t.createElement("ace_outer"),s=n.style;s.position="absolute",s.left="-10000px",s.overflow="hidden",s.width="200px",s.minWidth="0px",s.height="150px",s.display="block",n.appendChild(i);var o=e.documentElement;o.appendChild(n);var r=i.offsetWidth;s.overflow="scroll";var a=i.offsetWidth;return r==a&&(a=n.clientWidth),o.removeChild(n),r-a},t.setInnerHtml=function(e,t){var i=e.cloneNode(!1);return i.innerHTML=t,e.parentNode.replaceChild(i,e),i},"textContent"in document.documentElement?(t.setInnerText=function(e,t){e.textContent=t},t.getInnerText=function(e){return e.textContent}):(t.setInnerText=function(e,t){e.innerText=t},t.getInnerText=function(e){return e.innerText}),t.getParentWindow=function(e){return e.defaultView||e.parentWindow}}}),define("ace/lib/oop",["require","exports","module"],function(e,t){"use strict";t.inherits=function(e,t){e.super_=t,e.prototype=Object.create(t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}})},t.mixin=function(e,t){for(var i in t)e[i]=t[i];return e},t.implement=function(e,i){t.mixin(e,i)}}),define("ace/lib/keys",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop"],function(e,t){"use strict";e("./fixoldbrowsers");var i=e("./oop"),n=function(){var e,t,n={MODIFIER_KEYS:{16:"Shift",17:"Ctrl",18:"Alt",224:"Meta"},KEY_MODS:{ctrl:1,alt:2,option:2,shift:4,"super":8,meta:8,command:8,cmd:8},FUNCTION_KEYS:{8:"Backspace",9:"Tab",13:"Return",19:"Pause",27:"Esc",32:"Space",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"Left",38:"Up",39:"Right",40:"Down",44:"Print",45:"Insert",46:"Delete",96:"Numpad0",97:"Numpad1",98:"Numpad2",99:"Numpad3",100:"Numpad4",101:"Numpad5",102:"Numpad6",103:"Numpad7",104:"Numpad8",105:"Numpad9","-13":"NumpadEnter",112:"F1",113:"F2",114:"F3",115:"F4",116:"F5",117:"F6",118:"F7",119:"F8",120:"F9",121:"F10",122:"F11",123:"F12",144:"Numlock",145:"Scrolllock"},PRINTABLE_KEYS:{32:" ",48:"0",49:"1",50:"2",51:"3",52:"4",53:"5",54:"6",55:"7",56:"8",57:"9",59:";",61:"=",65:"a",66:"b",67:"c",68:"d",69:"e",70:"f",71:"g",72:"h",73:"i",74:"j",75:"k",76:"l",77:"m",78:"n",79:"o",80:"p",81:"q",82:"r",83:"s",84:"t",85:"u",86:"v",87:"w",88:"x",89:"y",90:"z",107:"+",109:"-",110:".",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'"}};for(t in n.FUNCTION_KEYS)e=n.FUNCTION_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);for(t in n.PRINTABLE_KEYS)e=n.PRINTABLE_KEYS[t].toLowerCase(),n[e]=parseInt(t,10);return i.mixin(n,n.MODIFIER_KEYS),i.mixin(n,n.PRINTABLE_KEYS),i.mixin(n,n.FUNCTION_KEYS),n.enter=n["return"],n.escape=n.esc,n.del=n["delete"],n[173]="-",function(){for(var e=["cmd","ctrl","alt","shift"],t=Math.pow(2,e.length);t--;)n.KEY_MODS[t]=e.filter(function(e){return t&n.KEY_MODS[e]}).join("-")+"-"}(),n.KEY_MODS[0]="",n.KEY_MODS[-1]="input",n}();i.mixin(t,n),t.keyCodeToString=function(e){var t=n[e];return"string"!=typeof t&&(t=String.fromCharCode(e)),t.toLowerCase()}}),define("ace/lib/useragent",["require","exports","module"],function(e,t){"use strict";if(t.OS={LINUX:"LINUX",MAC:"MAC",WINDOWS:"WINDOWS"},t.getOS=function(){return t.isMac?t.OS.MAC:t.isLinux?t.OS.LINUX:t.OS.WINDOWS},"object"==typeof navigator){var i=(navigator.platform.match(/mac|win|linux/i)||["other"])[0].toLowerCase(),n=navigator.userAgent;t.isWin="win"==i,t.isMac="mac"==i,t.isLinux="linux"==i,t.isIE="Microsoft Internet Explorer"==navigator.appName||navigator.appName.indexOf("MSAppHost")>=0?parseFloat((n.match(/(?:MSIE |Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]):parseFloat((n.match(/(?:Trident\/[0-9]+[\.0-9]+;.*rv:)([0-9]+[\.0-9]+)/)||[])[1]),t.isOldIE=t.isIE&&t.isIE<9,t.isGecko=t.isMozilla=(window.Controllers||window.controllers)&&"Gecko"===window.navigator.product,t.isOldGecko=t.isGecko&&parseInt((n.match(/rv\:(\d+)/)||[])[1],10)<4,t.isOpera=window.opera&&"[object Opera]"==Object.prototype.toString.call(window.opera),t.isWebKit=parseFloat(n.split("WebKit/")[1])||undefined,t.isChrome=parseFloat(n.split(" Chrome/")[1])||undefined,t.isAIR=n.indexOf("AdobeAIR")>=0,t.isIPad=n.indexOf("iPad")>=0,t.isTouchPad=n.indexOf("TouchPad")>=0,t.isChromeOS=n.indexOf(" CrOS ")>=0}}),define("ace/lib/event",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t){"use strict";function i(e,t,i){var l=o(t);if(!s.isMac&&r){if((r[91]||r[92])&&(l|=8),r.altGr){if(3==(3&l))return;r.altGr=0}if(18===i||17===i){var h="location"in t?t.location:t.keyLocation;if(17===i&&1===h)a=t.timeStamp;else if(18===i&&3===l&&2===h){var c=-a;a=t.timeStamp,c+=a,c<3&&(r.altGr=!0)}}}if(i in n.MODIFIER_KEYS){switch(n.MODIFIER_KEYS[i]){case"Alt":l=2;break;case"Shift":l=4;break;case"Ctrl":l=1;break;default:l=8}i=-1}if(8&l&&(91===i||93===i)&&(i=-1),!l&&13===i){var h="location"in t?t.location:t.keyLocation;if(3===h&&(e(t,l,-i),t.defaultPrevented))return}if(s.isChromeOS&&8&l){if(e(t,l,i),t.defaultPrevented)return;l&=-9}return!!(l||i in n.FUNCTION_KEYS||i in n.PRINTABLE_KEYS)&&e(t,l,i)}var n=e("./keys"),s=e("./useragent");t.addListener=function(e,t,i){if(e.addEventListener)return e.addEventListener(t,i,!1);if(e.attachEvent){var n=function(){i.call(e,window.event)};i._wrapper=n,e.attachEvent("on"+t,n)}},t.removeListener=function(e,t,i){if(e.removeEventListener)return e.removeEventListener(t,i,!1);e.detachEvent&&e.detachEvent("on"+t,i._wrapper||i)},t.stopEvent=function(e){return t.stopPropagation(e),t.preventDefault(e),!1},t.stopPropagation=function(e){e.stopPropagation?e.stopPropagation():e.cancelBubble=!0},t.preventDefault=function(e){e.preventDefault?e.preventDefault():e.returnValue=!1},t.getButton=function(e){return"dblclick"==e.type?0:"contextmenu"==e.type||s.isMac&&e.ctrlKey&&!e.altKey&&!e.shiftKey?2:e.preventDefault?e.button:{1:0,2:2,4:1}[e.button]},t.capture=function(e,i,n){function s(e){i&&i(e),n&&n(e),t.removeListener(document,"mousemove",i,!0),t.removeListener(document,"mouseup",s,!0),t.removeListener(document,"dragstart",s,!0)}return t.addListener(document,"mousemove",i,!0),t.addListener(document,"mouseup",s,!0),t.addListener(document,"dragstart",s,!0),s},t.addMouseWheelListener=function(e,i){"onmousewheel"in e?t.addListener(e,"mousewheel",function(e){var t=8;e.wheelDeltaX!==undefined?(e.wheelX=-e.wheelDeltaX/t,e.wheelY=-e.wheelDeltaY/t):(e.wheelX=0,e.wheelY=-e.wheelDelta/t),i(e)}):"onwheel"in e?t.addListener(e,"wheel",function(e){var t=.35;switch(e.deltaMode){case e.DOM_DELTA_PIXEL:e.wheelX=e.deltaX*t||0,e.wheelY=e.deltaY*t||0;break;case e.DOM_DELTA_LINE:case e.DOM_DELTA_PAGE:e.wheelX=5*(e.deltaX||0),e.wheelY=5*(e.deltaY||0)}i(e)}):t.addListener(e,"DOMMouseScroll",function(e){e.axis&&e.axis==e.HORIZONTAL_AXIS?(e.wheelX=5*(e.detail||0),e.wheelY=0):(e.wheelX=0,e.wheelY=5*(e.detail||0)),i(e)})},t.addMultiMouseDownListener=function(e,i,n,o){var r,a,l,h=0,c={2:"dblclick",3:"tripleclick",4:"quadclick"};t.addListener(e,"mousedown",function(e){if(0!==t.getButton(e)?h=0:e.detail>1?++h>4&&(h=1):h=1,s.isIE){var u=Math.abs(e.clientX-r)>5||Math.abs(e.clientY-a)>5;l&&!u||(h=1),l&&clearTimeout(l),l=setTimeout(function(){l=null},i[h-1]||600),1==h&&(r=e.clientX,a=e.clientY)}if(e._clicks=h,n[o]("mousedown",e),h>4)h=0;else if(h>1)return n[o](c[h],e)}),s.isOldIE&&t.addListener(e,"dblclick",function(e){h=2,l&&clearTimeout(l),l=setTimeout(function(){l=null},i[h-1]||600),n[o]("mousedown",e),n[o](c[h],e)})};var o=!s.isMac||!s.isOpera||"KeyboardEvent"in window?function(e){return 0|(e.ctrlKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.metaKey?8:0)}:function(e){return 0|(e.metaKey?1:0)|(e.altKey?2:0)|(e.shiftKey?4:0)|(e.ctrlKey?8:0)};t.getModifierString=function(e){return n.KEY_MODS[o(e)]};var r=null,a=0;if(t.addCommandKeyListener=function(e,n){var o=t.addListener;if(s.isOldGecko||s.isOpera&&!("KeyboardEvent"in window)){var a=null;o(e,"keydown",function(e){a=e.keyCode}),o(e,"keypress",function(e){return i(n,e,a)})}else{var l=null;o(e,"keydown",function(e){r[e.keyCode]=!0;var t=i(n,e,e.keyCode);return l=e.defaultPrevented,t}),o(e,"keypress",function(e){l&&(e.ctrlKey||e.altKey||e.shiftKey||e.metaKey)&&(t.stopEvent(e),l=null)}),o(e,"keyup",function(e){r[e.keyCode]=null}),r||(r=Object.create(null),o(window,"focus",function(){r=Object.create(null)}))}},window.postMessage&&!s.isOldIE){t.nextTick=function(e,i){i=i||window;var n="zero-timeout-message-"+1;t.addListener(i,"message",function s(o){o.data==n&&(t.stopPropagation(o),t.removeListener(i,"message",s),e())}),i.postMessage(n,"*")}}t.nextFrame=window.requestAnimationFrame||window.mozRequestAnimationFrame||window.webkitRequestAnimationFrame||window.msRequestAnimationFrame||window.oRequestAnimationFrame,t.nextFrame?t.nextFrame=t.nextFrame.bind(window):t.nextFrame=function(e){setTimeout(e,17)}}),define("ace/lib/lang",["require","exports","module"],function(e,t){"use strict";t.last=function(e){return e[e.length-1]},t.stringReverse=function(e){return e.split("").reverse().join("")},t.stringRepeat=function(e,t){for(var i="";t>0;)1&t&&(i+=e),(t>>=1)&&(e+=e);return i};var i=/^\s\s*/,n=/\s\s*$/;t.stringTrimLeft=function(e){return e.replace(i,"")},t.stringTrimRight=function(e){return e.replace(n,"")},t.copyObject=function(e){var t={};for(var i in e)t[i]=e[i];return t},t.copyArray=function(e){for(var t=[],i=0,n=e.length;i<n;i++)e[i]&&"object"==typeof e[i]?t[i]=this.copyObject(e[i]):t[i]=e[i];return t},t.deepCopy=function(e){if("object"!=typeof e||!e)return e;var i=e.constructor;if(i===RegExp)return e;var n=i();for(var s in e)"object"==typeof e[s]?n[s]=t.deepCopy(e[s]):n[s]=e[s];return n},t.arrayToMap=function(e){for(var t={},i=0;i<e.length;i++)t[e[i]]=1;return t},t.createMap=function(e){var t=Object.create(null);for(var i in e)t[i]=e[i];return t},t.arrayRemove=function(e,t){for(var i=0;i<=e.length;i++)t===e[i]&&e.splice(i,1)},t.escapeRegExp=function(e){return e.replace(/([.*+?^${}()|[\]\/\\])/g,"\\$1")},t.escapeHTML=function(e){return e.replace(/&/g,"&#38;").replace(/"/g,"&#34;").replace(/'/g,"&#39;").replace(/</g,"&#60;")},t.getMatchOffsets=function(e,t){var i=[];return e.replace(t,function(e){i.push({offset:arguments[arguments.length-2],length:e.length})}),i},t.deferredCall=function(e){var t=null,i=function(){t=null,e()},n=function(e){return n.cancel(),t=setTimeout(i,e||0),n};return n.schedule=n,n.call=function(){return this.cancel(),e(),n},n.cancel=function(){return clearTimeout(t),t=null,n},n.isPending=function(){return t},n},t.delayedCall=function(e,t){var i=null,n=function(){i=null,e()},s=function(e){null==i&&(i=setTimeout(n,e||t))};return s.delay=function(e){i&&clearTimeout(i),i=setTimeout(n,e||t)},s.schedule=s,s.call=function(){this.cancel(),e()},s.cancel=function(){i&&clearTimeout(i),i=null},s.isPending=function(){return i},s}}),define("ace/keyboard/textinput",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/lib/dom","ace/lib/lang"],function(e,t){"use strict";var i=e("../lib/event"),n=e("../lib/useragent"),s=e("../lib/dom"),o=e("../lib/lang"),r=n.isChrome<18,a=n.isIE,l=function(e,t){function l(e){if(!m){if(D)t=0,i=e?0:u.value.length-1;else var t=e?2:1,i=2;try{u.setSelectionRange(t,i)}catch(e){}}}function h(){m||(u.value=d,n.isWebKit&&v.schedule())}function c(){clearTimeout(H),H=setTimeout(function(){p&&(u.style.cssText=p,p=""),null==t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=!0,t.renderer.$moveTextAreaToCursor())},n.isOldIE?200:0)}var u=s.createElement("textarea");u.className="ace_text-input",n.isTouchPad&&u.setAttribute("x-palm-disable-auto-cap",!0),u.wrap="off",u.autocorrect="off",u.autocapitalize="off",u.spellcheck=!1,u.style.opacity="0",n.isOldIE&&(u.style.top="-100px"),e.insertBefore(u,e.firstChild);var d="\x01\x01",g=!1,f=!1,m=!1,p="",A=!0;try{var C=document.activeElement===u}catch(e){}i.addListener(u,"blur",function(e){t.onBlur(e),C=!1}),i.addListener(u,"focus",function(e){C=!0,t.onFocus(e),l()}),this.focus=function(){u.focus()},this.blur=function(){u.blur()},this.isFocused=function(){return C};var F=o.delayedCall(function(){C&&l(A)}),v=o.delayedCall(function(){m||(u.value=d,C&&l())});n.isWebKit||t.addEventListener("changeSelection",function(){t.selection.isEmpty()!=A&&(A=!A,F.schedule())}),h(),C&&t.onFocus();var w=function(e){return 0===e.selectionStart&&e.selectionEnd===e.value.length};if(!u.setSelectionRange&&u.createTextRange&&(u.setSelectionRange=function(e,t){var i=this.createTextRange();i.collapse(!0),i.moveStart("character",e),i.moveEnd("character",t),i.select()},w=function(e){try{var t=e.ownerDocument.selection.createRange()}catch(e){}return!(!t||t.parentElement()!=e)&&t.text==e.value}),n.isOldIE){var E=!1,$=function(e){if(!E){var t=u.value;if(!m&&t&&t!=d){if(e&&t==d[0])return y.schedule();k(t),E=!0,h(),E=!1}}},y=o.delayedCall($);i.addListener(u,"propertychange",$);var b={13:1,27:1};i.addListener(u,"keyup",function(e){if(!m||u.value&&!b[e.keyCode]||setTimeout(I,0),(u.value.charCodeAt(0)||0)<129)return y.call();m?W():O()}),i.addListener(u,"keydown",function(){y.schedule(50)})}var B=function(){g?g=!1:w(u)?(t.selectAll(),l()):D&&l(t.selection.isEmpty())},D=null;this.setInputHandler=function(e){D=e},this.getInputHandler=function(){return D};var S=!1,k=function(e){D&&(e=D(e),D=null),f?(l(),e&&t.onPaste(e),f=!1):e==d.charAt(0)?S?t.execCommand("del",{source:"ace"}):t.execCommand("backspace",{source:"ace"}):(e.substring(0,2)==d?e=e.substr(2):e.charAt(0)==d.charAt(0)?e=e.substr(1):e.charAt(e.length-1)==d.charAt(0)&&(e=e.slice(0,-1)),e.charAt(e.length-1)==d.charAt(0)&&(e=e.slice(0,-1)),e&&t.onTextInput(e)),S&&(S=!1)},x=function(){if(!m){var e=u.value;k(e),h()}},L=function(e,t){var i=e.clipboardData||window.clipboardData;if(i&&!r){var n=a?"Text":"text/plain";return t?!1!==i.setData(n,t):i.getData(n)}},R=function(e,n){var s=t.getCopyText();if(!s)return i.preventDefault(e);L(e,s)?(n?t.onCut():t.onCopy(),i.preventDefault(e)):(g=!0,u.value=s,u.select(),setTimeout(function(){g=!1,h(),l(),n?t.onCut():t.onCopy()}))},M=function(e){R(e,!0)},T=function(e){R(e,!1)},_=function(e){var s=L(e);"string"==typeof s?(s&&t.onPaste(s),n.isIE&&setTimeout(l),i.preventDefault(e)):(u.value="",f=!0)};i.addCommandKeyListener(u,t.onCommandKey.bind(t)),i.addListener(u,"select",B),i.addListener(u,"input",x),i.addListener(u,"cut",M),i.addListener(u,"copy",T),i.addListener(u,"paste",_),"oncut"in u&&"oncopy"in u&&"onpaste"in u||i.addListener(e,"keydown",function(e){if((!n.isMac||e.metaKey)&&e.ctrlKey)switch(e.keyCode){case 67:T(e);break;case 86:_(e);break;case 88:M(e)}});var O=function(){m||!t.onCompositionStart||t.$readOnly||(m={},t.onCompositionStart(),setTimeout(W,0),t.on("mousedown",I),t.selection.isEmpty()||(t.insert(""),t.session.markUndoGroup(),t.selection.clearSelection()),t.session.markUndoGroup())},W=function(){if(m&&t.onCompositionUpdate&&!t.$readOnly){var e=u.value.replace(/\x01/g,"");if(m.lastValue!==e&&(t.onCompositionUpdate(e),m.lastValue&&t.undo(),m.lastValue=e,m.lastValue)){var i=t.selection.getRange();t.insert(m.lastValue),t.session.markUndoGroup(),m.range=t.selection.getRange(),t.selection.setRange(i),t.selection.clearSelection()}}},I=function(e){if(t.onCompositionEnd&&!t.$readOnly){var i=m;m=!1;var n=setTimeout(function(){n=null;var e=u.value.replace(/\x01/g,"");m||(e==i.lastValue?h():!i.lastValue&&e&&(h(),k(e)))});D=function(e){return n&&clearTimeout(n),(e=e.replace(/\x01/g,""))==i.lastValue?"":(i.lastValue&&n&&t.undo(),e)},t.onCompositionEnd(),t.removeListener("mousedown",I),"compositionend"==e.type&&i.range&&t.selection.setRange(i.range)}},P=o.delayedCall(W,50);i.addListener(u,"compositionstart",O),n.isGecko?i.addListener(u,"text",function(){P.schedule()}):(i.addListener(u,"keyup",function(){P.schedule()}),i.addListener(u,"keydown",function(){P.schedule()})),i.addListener(u,"compositionend",I),this.getElement=function(){return u},this.setReadOnly=function(e){u.readOnly=e},this.onContextMenu=function(e){S=!0,l(t.selection.isEmpty()),t._emit("nativecontextmenu",{target:t,domEvent:e}),this.moveToMouse(e,!0)},this.moveToMouse=function(e,o){if(o||!n.isOldIE){p||(p=u.style.cssText),u.style.cssText=(o?"z-index:100000;":"")+"height:"+u.style.height+";"+(n.isIE?"opacity:0.1;":"");var r=t.container.getBoundingClientRect(),a=s.computedStyle(t.container),l=r.top+(parseInt(a.borderTopWidth)||0),h=r.left+(parseInt(r.borderLeftWidth)||0),d=r.bottom-l-u.clientHeight-2,g=function(e){u.style.left=e.clientX-h-2+"px",u.style.top=Math.min(e.clientY-l-2,d)+"px"};g(e),"mousedown"==e.type&&(t.renderer.$keepTextAreaAtCursor&&(t.renderer.$keepTextAreaAtCursor=null),n.isWin&&!n.isOldIE&&i.capture(t.container,g,c))}},this.onContextMenuClose=c;var H,N=function(e){t.textInput.onContextMenu(e),c()};i.addListener(t.renderer.scroller,"contextmenu",N),i.addListener(u,"contextmenu",N)};t.TextInput=l}),define("ace/mouse/default_handlers",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t){"use strict";function i(e){e.$clickSelection=null;var t=e.editor;t.setDefaultHandler("mousedown",this.onMouseDown.bind(e)),t.setDefaultHandler("dblclick",this.onDoubleClick.bind(e)),t.setDefaultHandler("tripleclick",this.onTripleClick.bind(e)),t.setDefaultHandler("quadclick",this.onQuadClick.bind(e)),t.setDefaultHandler("mousewheel",this.onMouseWheel.bind(e)),["select","startSelect","selectEnd","selectAllEnd","selectByWordsEnd","selectByLinesEnd","dragWait","dragWaitEnd","focusWait"].forEach(function(t){e[t]=this[t]},this),e.selectByLines=this.extendSelectionBy.bind(e,"getLineRange"),e.selectByWords=this.extendSelectionBy.bind(e,"getWordRange")}function n(e,t,i,n){return Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))}function s(e,t){if(e.start.row==e.end.row)var i=2*t.column-e.start.column-e.end.column;else if(e.start.row!=e.end.row-1||e.start.column||e.end.column)var i=2*t.row-e.start.row-e.end.row;else var i=t.column-4;return i<0?{cursor:e.start,anchor:e.end}:{cursor:e.end,anchor:e.start}}e("../lib/dom"),e("../lib/event"),e("../lib/useragent");(function(){this.onMouseDown=function(e){var t=e.inSelection(),i=e.getDocumentPosition();this.mousedownEvent=e;var n=this.editor;return 0!==e.getButton()?(n.getSelectionRange().isEmpty()&&n.selection.moveToPosition(i),void n.textInput.onContextMenu(e.domEvent)):(this.mousedownEvent.time=Date.now(),!t||n.isFocused()||(n.focus(),!this.$focusTimout||this.$clickSelection||n.inMultiSelectMode)?(this.captureMouse(e),this.startSelect(i,e.domEvent._clicks>1),e.preventDefault()):(this.setState("focusWait"),void this.captureMouse(e)))},this.startSelect=function(e,t){e=e||this.editor.renderer.screenToTextCoordinates(this.x,this.y);var i=this.editor
;this.mousedownEvent.getShiftKey()?i.selection.selectToPosition(e):t||i.selection.moveToPosition(e),t||this.select(),i.renderer.scroller.setCapture&&i.renderer.scroller.setCapture(),i.setStyle("ace_selecting"),this.setState("select")},this.select=function(){var e,t=this.editor,i=t.renderer.screenToTextCoordinates(this.x,this.y);if(this.$clickSelection){var n=this.$clickSelection.comparePoint(i);if(-1==n)e=this.$clickSelection.end;else if(1==n)e=this.$clickSelection.start;else{var o=s(this.$clickSelection,i);i=o.cursor,e=o.anchor}t.selection.setSelectionAnchor(e.row,e.column)}t.selection.selectToPosition(i),t.renderer.scrollCursorIntoView()},this.extendSelectionBy=function(e){var t,i=this.editor,n=i.renderer.screenToTextCoordinates(this.x,this.y),o=i.selection[e](n.row,n.column);if(this.$clickSelection){var r=this.$clickSelection.comparePoint(o.start),a=this.$clickSelection.comparePoint(o.end);if(-1==r&&a<=0)t=this.$clickSelection.end,o.end.row==n.row&&o.end.column==n.column||(n=o.start);else if(1==a&&r>=0)t=this.$clickSelection.start,o.start.row==n.row&&o.start.column==n.column||(n=o.end);else if(-1==r&&1==a)n=o.end,t=o.start;else{var l=s(this.$clickSelection,n);n=l.cursor,t=l.anchor}i.selection.setSelectionAnchor(t.row,t.column)}i.selection.selectToPosition(n),i.renderer.scrollCursorIntoView()},this.selectEnd=this.selectAllEnd=this.selectByWordsEnd=this.selectByLinesEnd=function(){this.$clickSelection=null,this.editor.unsetStyle("ace_selecting"),this.editor.renderer.scroller.releaseCapture&&this.editor.renderer.scroller.releaseCapture()},this.focusWait=function(){var e=n(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y),t=Date.now();(e>0||t-this.mousedownEvent.time>this.$focusTimout)&&this.startSelect(this.mousedownEvent.getDocumentPosition())},this.onDoubleClick=function(e){var t=e.getDocumentPosition(),i=this.editor,n=i.session,s=n.getBracketRange(t);s?(s.isEmpty()&&(s.start.column--,s.end.column++),this.setState("select")):(s=i.selection.getWordRange(t.row,t.column),this.setState("selectByWords")),this.$clickSelection=s,this.select()},this.onTripleClick=function(e){var t=e.getDocumentPosition(),i=this.editor;this.setState("selectByLines");var n=i.getSelectionRange();n.isMultiLine()&&n.contains(t.row,t.column)?(this.$clickSelection=i.selection.getLineRange(n.start.row),this.$clickSelection.end=i.selection.getLineRange(n.end.row).end):this.$clickSelection=i.selection.getLineRange(t.row),this.select()},this.onQuadClick=function(){var e=this.editor;e.selectAll(),this.$clickSelection=e.getSelectionRange(),this.setState("selectAll")},this.onMouseWheel=function(e){if(!e.getAccelKey()){e.getShiftKey()&&e.wheelY&&!e.wheelX&&(e.wheelX=e.wheelY,e.wheelY=0);var t=e.domEvent.timeStamp,i=t-(this.$lastScrollTime||0),n=this.editor;return n.renderer.isScrollableBy(e.wheelX*e.speed,e.wheelY*e.speed)||i<200?(this.$lastScrollTime=t,n.renderer.scrollBy(e.wheelX*e.speed,e.wheelY*e.speed),e.stop()):void 0}}}).call(i.prototype),t.DefaultHandlers=i}),define("ace/tooltip",["require","exports","module","ace/lib/oop","ace/lib/dom"],function(e,t){"use strict";function i(e){this.isOpen=!1,this.$element=null,this.$parentNode=e}var n=(e("./lib/oop"),e("./lib/dom"));(function(){this.$init=function(){return this.$element=n.createElement("div"),this.$element.className="ace_tooltip",this.$element.style.display="none",this.$parentNode.appendChild(this.$element),this.$element},this.getElement=function(){return this.$element||this.$init()},this.setText=function(e){n.setInnerText(this.getElement(),e)},this.setHtml=function(e){this.getElement().innerHTML=e},this.setPosition=function(e,t){this.getElement().style.left=e+"px",this.getElement().style.top=t+"px"},this.setClassName=function(e){n.addCssClass(this.getElement(),e)},this.show=function(e,t,i){null!=e&&this.setText(e),null!=t&&null!=i&&this.setPosition(t,i),this.isOpen||(this.getElement().style.display="block",this.isOpen=!0)},this.hide=function(){this.isOpen&&(this.getElement().style.display="none",this.isOpen=!1)},this.getHeight=function(){return this.getElement().offsetHeight},this.getWidth=function(){return this.getElement().offsetWidth}}).call(i.prototype),t.Tooltip=i}),define("ace/mouse/default_gutter_handler",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/event","ace/tooltip"],function(e,t){"use strict";function i(e){function t(){var t=u.getDocumentPosition().row,n=l.$annotations[t];if(!n)return i();if(t==a.session.getLength()){var s=a.renderer.pixelToScreenCoordinates(0,u.y).row,r=u.$pos;if(s>a.session.documentToScreenRow(r.row,r.column))return i()}if(d!=n)if(d=n.text.join("<br/>"),h.setHtml(d),h.show(),a.on("mousewheel",i),e.$tooltipFollowsMouse)o(u);else{var c=l.$cells[a.session.documentToScreenRow(t,0)].element,g=c.getBoundingClientRect(),f=h.getElement().style;f.left=g.right+"px",f.top=g.bottom+"px"}}function i(){c&&(c=clearTimeout(c)),d&&(h.hide(),d=null,a.removeEventListener("mousewheel",i))}function o(e){h.setPosition(e.x,e.y)}var a=e.editor,l=a.renderer.$gutterLayer,h=new n(a.container);e.editor.setDefaultHandler("guttermousedown",function(t){if(a.isFocused()&&0==t.getButton()){if("foldWidgets"!=l.getRegion(t)){var i=t.getDocumentPosition().row,n=a.session.selection;if(t.getShiftKey())n.selectTo(i,0);else{if(2==t.domEvent.detail)return a.selectAll(),t.preventDefault();e.$clickSelection=a.selection.getLineRange(i)}return e.setState("selectByLines"),e.captureMouse(t),t.preventDefault()}}});var c,u,d;e.editor.setDefaultHandler("guttermousemove",function(n){var r=n.domEvent.target||n.domEvent.srcElement;if(s.hasCssClass(r,"ace_fold-widget"))return i();d&&e.$tooltipFollowsMouse&&o(n),u=n,c||(c=setTimeout(function(){c=null,u&&!e.isMousePressed?t():i()},50))}),r.addListener(a.renderer.$gutter,"mouseout",function(){u=null,d&&!c&&(c=setTimeout(function(){c=null,i()},50))}),a.on("changeSession",i)}function n(e){a.call(this,e)}var s=e("../lib/dom"),o=e("../lib/oop"),r=e("../lib/event"),a=e("../tooltip").Tooltip;o.inherits(n,a),function(){this.setPosition=function(e,t){var i=window.innerWidth||document.documentElement.clientWidth,n=window.innerHeight||document.documentElement.clientHeight,s=this.getWidth(),o=this.getHeight();e+=15,t+=15,e+s>i&&(e-=e+s-i),t+o>n&&(t-=20+o),a.prototype.setPosition.call(this,e,t)}}.call(n.prototype),t.GutterHandler=i}),define("ace/mouse/mouse_event",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t){"use strict";var i=e("../lib/event"),n=e("../lib/useragent"),s=t.MouseEvent=function(e,t){this.domEvent=e,this.editor=t,this.x=this.clientX=e.clientX,this.y=this.clientY=e.clientY,this.$pos=null,this.$inSelection=null,this.propagationStopped=!1,this.defaultPrevented=!1};(function(){this.stopPropagation=function(){i.stopPropagation(this.domEvent),this.propagationStopped=!0},this.preventDefault=function(){i.preventDefault(this.domEvent),this.defaultPrevented=!0},this.stop=function(){this.stopPropagation(),this.preventDefault()},this.getDocumentPosition=function(){return this.$pos?this.$pos:(this.$pos=this.editor.renderer.screenToTextCoordinates(this.clientX,this.clientY),this.$pos)},this.inSelection=function(){if(null!==this.$inSelection)return this.$inSelection;var e=this.editor,t=e.getSelectionRange();if(t.isEmpty())this.$inSelection=!1;else{var i=this.getDocumentPosition();this.$inSelection=t.contains(i.row,i.column)}return this.$inSelection},this.getButton=function(){return i.getButton(this.domEvent)},this.getShiftKey=function(){return this.domEvent.shiftKey},this.getAccelKey=n.isMac?function(){return this.domEvent.metaKey}:function(){return this.domEvent.ctrlKey}}).call(s.prototype)}),define("ace/mouse/dragdrop_handler",["require","exports","module","ace/lib/dom","ace/lib/event","ace/lib/useragent"],function(e,t){"use strict";function i(e){function t(e,t){var i=Date.now(),s=!t||e.row!=t.row,o=!t||e.column!=t.column;if(!D||s||o)p.$blockScrolling+=1,p.moveCursorToPosition(e),p.$blockScrolling-=1,D=i,S={x:F,y:v};else{n(S.x,S.y,F,v)>h?D=null:i-D>=l&&(p.renderer.scrollCursorIntoView(),D=null)}}function i(e,t){var i=Date.now(),n=p.renderer.layerConfig.lineHeight,s=p.renderer.layerConfig.characterWidth,o=p.renderer.scroller.getBoundingClientRect(),r={x:{left:F-o.left,right:o.right-F},y:{top:v-o.top,bottom:o.bottom-v}},l=Math.min(r.x.left,r.x.right),h=Math.min(r.y.top,r.y.bottom),c={row:e.row,column:e.column};l/s<=2&&(c.column+=r.x.left<r.x.right?-3:2),h/n<=1&&(c.row+=r.y.top<r.y.bottom?-1:1);var u=e.row!=c.row,d=e.column!=c.column,g=!t||e.row!=t.row;u||d&&!g?B?i-B>=a&&p.renderer.scrollCursorIntoView(c):B=i:B=null}function c(){var e=$;$=p.renderer.screenToTextCoordinates(F,v),t($,e),i($,e)}function u(){E=p.selection.toOrientedRange(),C=p.session.addMarker(E,"ace_selection",p.getSelectionStyle()),p.clearSelection(),p.isFocused()&&p.renderer.$cursorLayer.setBlinking(!1),clearInterval(w),c(),w=setInterval(c,20),x=0,o.addListener(document,"mousemove",g)}function d(){clearInterval(w),p.session.removeMarker(C),C=null,p.$blockScrolling+=1,p.selection.fromOrientedRange(E),p.$blockScrolling-=1,p.isFocused()&&!b&&p.renderer.$cursorLayer.setBlinking(!p.getReadOnly()),E=null,$=null,x=0,B=null,D=null,o.removeListener(document,"mousemove",g)}function g(){null==L&&(L=setTimeout(function(){null!=L&&C&&d()},20))}function f(e){var t=e.types;return!t||Array.prototype.some.call(t,function(e){return"text/plain"==e||"Text"==e})}function m(e){var t=["copy","copymove","all","uninitialized"],i=["move","copymove","linkmove","all","uninitialized"],n=r.isMac?e.altKey:e.ctrlKey,s="uninitialized";try{s=e.dataTransfer.effectAllowed.toLowerCase()}catch(e){}var o="none";return n&&t.indexOf(s)>=0?o="copy":i.indexOf(s)>=0?o="move":t.indexOf(s)>=0&&(o="copy"),o}var p=e.editor,A=s.createElement("img");A.src="data:image/gif;base64,R0lGODlhAQABAAAAACH5BAEKAAEALAAAAAABAAEAAAICTAEAOw==",r.isOpera&&(A.style.cssText="width:1px;height:1px;position:fixed;top:0;left:0;z-index:2147483647;opacity:0;"),["dragWait","dragWaitEnd","startDrag","dragReadyEnd","onMouseDrag"].forEach(function(t){e[t]=this[t]},this),p.addEventListener("mousedown",this.onMouseDown.bind(e));var C,F,v,w,E,$,y,b,B,D,S,k=p.container,x=0;this.onDragStart=function(e){if(this.cancelDrag||!k.draggable){var t=this;return setTimeout(function(){t.startSelect(),t.captureMouse(e)},0),e.preventDefault()}E=p.getSelectionRange();var i=e.dataTransfer;i.effectAllowed=p.getReadOnly()?"copy":"copyMove",r.isOpera&&(p.container.appendChild(A),A.scrollTop=0),i.setDragImage&&i.setDragImage(A,0,0),r.isOpera&&p.container.removeChild(A),i.clearData(),i.setData("Text",p.session.getTextRange()),b=!0,this.setState("drag")},this.onDragEnd=function(e){if(k.draggable=!1,b=!1,this.setState(null),!p.getReadOnly()){var t=e.dataTransfer.dropEffect;y||"move"!=t||p.session.remove(p.getSelectionRange()),p.renderer.$cursorLayer.setBlinking(!0)}this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle("")},this.onDragEnter=function(e){if(!p.getReadOnly()&&f(e.dataTransfer))return F=e.clientX,v=e.clientY,C||u(),x++,e.dataTransfer.dropEffect=y=m(e),o.preventDefault(e)},this.onDragOver=function(e){if(!p.getReadOnly()&&f(e.dataTransfer))return F=e.clientX,v=e.clientY,C||(u(),x++),null!==L&&(L=null),e.dataTransfer.dropEffect=y=m(e),o.preventDefault(e)},this.onDragLeave=function(e){if(--x<=0&&C)return d(),y=null,o.preventDefault(e)},this.onDrop=function(e){if($){var t=e.dataTransfer;if(b)switch(y){case"move":E=E.contains($.row,$.column)?{start:$,end:$}:p.moveText(E,$);break;case"copy":E=p.moveText(E,$,!0)}else{var i=t.getData("Text");E={start:$,end:p.session.insert($,i)},p.focus(),y=null}return d(),o.preventDefault(e)}},o.addListener(k,"dragstart",this.onDragStart.bind(e)),o.addListener(k,"dragend",this.onDragEnd.bind(e)),o.addListener(k,"dragenter",this.onDragEnter.bind(e)),o.addListener(k,"dragover",this.onDragOver.bind(e)),o.addListener(k,"dragleave",this.onDragLeave.bind(e)),o.addListener(k,"drop",this.onDrop.bind(e));var L=null}function n(e,t,i,n){return Math.sqrt(Math.pow(i-e,2)+Math.pow(n-t,2))}var s=e("../lib/dom"),o=e("../lib/event"),r=e("../lib/useragent"),a=200,l=200,h=5;(function(){this.dragWait=function(){Date.now()-this.mousedownEvent.time>this.editor.getDragDelay()&&this.startDrag()},this.dragWaitEnd=function(){this.editor.container.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()),this.selectEnd()},this.dragReadyEnd=function(){this.editor.renderer.$cursorLayer.setBlinking(!this.editor.getReadOnly()),this.editor.unsetStyle("ace_dragging"),this.editor.renderer.setCursorStyle(""),this.dragWaitEnd()},this.startDrag=function(){this.cancelDrag=!1;var e=this.editor;e.container.draggable=!0,e.renderer.$cursorLayer.setBlinking(!1),e.setStyle("ace_dragging");var t=r.isWin?"default":"move";e.renderer.setCursorStyle(t),this.setState("dragReady")},this.onMouseDrag=function(){var e=this.editor.container;if(r.isIE&&"dragReady"==this.state){var t=n(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);t>3&&e.dragDrop()}if("dragWait"===this.state){var t=n(this.mousedownEvent.x,this.mousedownEvent.y,this.x,this.y);t>0&&(e.draggable=!1,this.startSelect(this.mousedownEvent.getDocumentPosition()))}},this.onMouseDown=function(e){if(this.$dragEnabled){this.mousedownEvent=e;var t=this.editor,i=e.inSelection(),n=e.getButton();if(1===(e.domEvent.detail||1)&&0===n&&i){if(e.editor.inMultiSelectMode&&(e.getAccelKey()||e.getShiftKey()))return;this.mousedownEvent.time=Date.now();var s=e.domEvent.target||e.domEvent.srcElement;if("unselectable"in s&&(s.unselectable="on"),t.getDragDelay()){if(r.isWebKit){this.cancelDrag=!0;t.container.draggable=!0}this.setState("dragWait")}else this.startDrag();this.captureMouse(e,this.onMouseDrag.bind(this)),e.defaultPrevented=!0}}}}).call(i.prototype),t.DragdropHandler=i}),define("ace/lib/net",["require","exports","module","ace/lib/dom"],function(e,t){"use strict";var i=e("./dom");t.get=function(e,t){var i=new XMLHttpRequest;i.open("GET",e,!0),i.onreadystatechange=function(){4===i.readyState&&t(i.responseText)},i.send(null)},t.loadScript=function(e,t){var n=i.getDocumentHead(),s=document.createElement("script");s.src=e,n.appendChild(s),s.onload=s.onreadystatechange=function(e,i){!i&&s.readyState&&"loaded"!=s.readyState&&"complete"!=s.readyState||(s=s.onload=s.onreadystatechange=null,i||t())}},t.qualifyURL=function(e){var t=document.createElement("a");return t.href=e,t.href}}),define("ace/lib/event_emitter",["require","exports","module"],function(e,t){"use strict";var i={},n=function(){this.propagationStopped=!0},s=function(){this.defaultPrevented=!0};i._emit=i._dispatchEvent=function(e,t){this._eventRegistry||(this._eventRegistry={}),this._defaultHandlers||(this._defaultHandlers={});var i=this._eventRegistry[e]||[],o=this._defaultHandlers[e];if(i.length||o){"object"==typeof t&&t||(t={}),t.type||(t.type=e),t.stopPropagation||(t.stopPropagation=n),t.preventDefault||(t.preventDefault=s),i=i.slice();for(var r=0;r<i.length&&(i[r](t,this),!t.propagationStopped);r++);return o&&!t.defaultPrevented?o(t,this):void 0}},i._signal=function(e,t){var i=(this._eventRegistry||{})[e];if(i){i=i.slice();for(var n=0;n<i.length;n++)i[n](t,this)}},i.once=function(e,t){var i=this;t&&this.addEventListener(e,function n(){i.removeEventListener(e,n),t.apply(null,arguments)})},i.setDefaultHandler=function(e,t){var i=this._defaultHandlers;if(i||(i=this._defaultHandlers={_disabled_:{}}),i[e]){var n=i[e],s=i._disabled_[e];s||(i._disabled_[e]=s=[]),s.push(n);var o=s.indexOf(t);-1!=o&&s.splice(o,1)}i[e]=t},i.removeDefaultHandler=function(e,t){var i=this._defaultHandlers;if(i){var n=i._disabled_[e];if(i[e]==t){i[e];n&&this.setDefaultHandler(e,n.pop())}else if(n){var s=n.indexOf(t);-1!=s&&n.splice(s,1)}}},i.on=i.addEventListener=function(e,t,i){this._eventRegistry=this._eventRegistry||{};var n=this._eventRegistry[e];return n||(n=this._eventRegistry[e]=[]),-1==n.indexOf(t)&&n[i?"unshift":"push"](t),t},i.off=i.removeListener=i.removeEventListener=function(e,t){this._eventRegistry=this._eventRegistry||{};var i=this._eventRegistry[e];if(i){var n=i.indexOf(t);-1!==n&&i.splice(n,1)}},i.removeAllListeners=function(e){this._eventRegistry&&(this._eventRegistry[e]=[])},t.EventEmitter=i}),define("ace/config",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/lib/net","ace/lib/event_emitter"],function(e,t,i){"no use strict";function n(n){if(c.packaged=n||e.packaged||i.packaged||h.define&&define.packaged,!h.document)return"";for(var o={},r="",a=document.currentScript||document._currentScript,l=a&&a.ownerDocument||document,u=l.getElementsByTagName("script"),d=0;d<u.length;d++){var g=u[d],f=g.src||g.getAttribute("src");if(f){for(var m=g.attributes,p=0,A=m.length;p<A;p++){var C=m[p];0===C.name.indexOf("data-ace-")&&(o[s(C.name.replace(/^data-ace-/,""))]=C.value)}var F=f.match(/^(.*)\/ace(\-\w+)?\.js(\?|$)/);F&&(r=F[1])}}r&&(o.base=o.base||r,o.packaged=!0),o.basePath=o.base,o.workerPath=o.workerPath||o.base,o.modePath=o.modePath||o.base,o.themePath=o.themePath||o.base,delete o.base;for(var v in o)"undefined"!=typeof o[v]&&t.set(v,o[v])}function s(e){return e.replace(/-(.)/g,function(e,t){return t.toUpperCase()})}var o=e("./lib/lang"),r=e("./lib/oop"),a=e("./lib/net"),l=e("./lib/event_emitter").EventEmitter,h=function(){return this}(),c={packaged:!1,workerPath:null,modePath:null,themePath:null,basePath:"",suffix:".js",$moduleUrls:{}};t.get=function(e){if(!c.hasOwnProperty(e))throw new Error("Unknown config key: "+e);return c[e]},t.set=function(e,t){if(!c.hasOwnProperty(e))throw new Error("Unknown config key: "+e);c[e]=t},t.all=function(){return o.copyObject(c)},r.implement(t,l),t.moduleUrl=function(e,t){if(c.$moduleUrls[e])return c.$moduleUrls[e];var i=e.split("/");t=t||i[i.length-2]||"";var n="snippets"==t?"/":"-",s=i[i.length-1];if("worker"==t&&"-"==n){var o=new RegExp("^"+t+"[\\-_]|[\\-_]"+t+"$","g");s=s.replace(o,"")}(!s||s==t)&&i.length>1&&(s=i[i.length-2]);var r=c[t+"Path"];return null==r?r=c.basePath:"/"==n&&(t=n=""),r&&"/"!=r.slice(-1)&&(r+="/"),r+t+n+s+this.get("suffix")},t.setModuleUrl=function(e,t){return c.$moduleUrls[e]=t},t.$loading={},t.loadModule=function(i,n){var s,o;Array.isArray(i)&&(o=i[0],i=i[1]);try{s=e(i)}catch(e){}if(s&&!t.$loading[i])return n&&n(s);if(t.$loading[i]||(t.$loading[i]=[]),t.$loading[i].push(n),!(t.$loading[i].length>1)){var r=function(){e([i],function(e){t._emit("load.module",{name:i,module:e});var n=t.$loading[i];t.$loading[i]=null,n.forEach(function(t){t&&t(e)})})};if(!t.get("packaged"))return r();a.loadScript(t.moduleUrl(i,o),r)}},n(!0),t.init=n;var u={setOptions:function(e){Object.keys(e).forEach(function(t){this.setOption(t,e[t])},this)},getOptions:function(e){var t={};return e?Array.isArray(e)||(t=e,e=Object.keys(t)):e=Object.keys(this.$options),e.forEach(function(e){t[e]=this.getOption(e)},this),t},setOption:function(e,t){if(this["$"+e]!==t){var i=this.$options[e];if(!i)return"undefined"!=typeof console&&console.warn&&console.warn('misspelled option "'+e+'"'),undefined;if(i.forwardTo)return this[i.forwardTo]&&this[i.forwardTo].setOption(e,t);i.handlesSet||(this["$"+e]=t),i&&i.set&&i.set.call(this,t)}},getOption:function(e){var t=this.$options[e];return t?t.forwardTo?this[t.forwardTo]&&this[t.forwardTo].getOption(e):t&&t.get?t.get.call(this):this["$"+e]:("undefined"!=typeof console&&console.warn&&console.warn('misspelled option "'+e+'"'),undefined)}},d={};t.defineOptions=function(e,t,i){return e.$options||(d[t]=e.$options={}),Object.keys(i).forEach(function(t){var n=i[t];"string"==typeof n&&(n={forwardTo:n}),n.name||(n.name=t),e.$options[n.name]=n,"initialValue"in n&&(e["$"+n.name]=n.initialValue)}),r.implement(e,u),this},t.resetOptions=function(e){Object.keys(e.$options).forEach(function(t){var i=e.$options[t];"value"in i&&e.setOption(t,i.value)})},t.setDefaultValue=function(e,i,n){var s=d[e]||(d[e]={});s[i]&&(s.forwardTo?t.setDefaultValue(s.forwardTo,i,n):s[i].value=n)},t.setDefaultValues=function(e,i){Object.keys(i).forEach(function(n){t.setDefaultValue(e,n,i[n])})}}),define("ace/mouse/mouse_handler",["require","exports","module","ace/lib/event","ace/lib/useragent","ace/mouse/default_handlers","ace/mouse/default_gutter_handler","ace/mouse/mouse_event","ace/mouse/dragdrop_handler","ace/config"],function(e,t){"use strict";var i=e("../lib/event"),n=e("../lib/useragent"),s=e("./default_handlers").DefaultHandlers,o=e("./default_gutter_handler").GutterHandler,r=e("./mouse_event").MouseEvent,a=e("./dragdrop_handler").DragdropHandler,l=e("../config"),h=function(e){var t=this;this.editor=e,new s(this),new o(this),new a(this);var r=function(t){!e.isFocused()&&e.textInput&&e.textInput.moveToMouse(t),e.focus()},l=e.renderer.getMouseEventTarget();i.addListener(l,"click",this.onMouseEvent.bind(this,"click")),i.addListener(l,"mousemove",this.onMouseMove.bind(this,"mousemove")),i.addMultiMouseDownListener(l,[400,300,250],this,"onMouseEvent"),e.renderer.scrollBarV&&(i.addMultiMouseDownListener(e.renderer.scrollBarV.inner,[400,300,250],this,"onMouseEvent"),i.addMultiMouseDownListener(e.renderer.scrollBarH.inner,[400,300,250],this,"onMouseEvent"),n.isIE&&(i.addListener(e.renderer.scrollBarV.element,"mousedown",r),i.addListener(e.renderer.scrollBarH.element,"mousemove",r))),i.addMouseWheelListener(e.container,this.onMouseWheel.bind(this,"mousewheel"));var h=e.renderer.$gutter;i.addListener(h,"mousedown",this.onMouseEvent.bind(this,"guttermousedown")),i.addListener(h,"click",this.onMouseEvent.bind(this,"gutterclick")),i.addListener(h,"dblclick",this.onMouseEvent.bind(this,"gutterdblclick")),i.addListener(h,"mousemove",this.onMouseEvent.bind(this,"guttermousemove")),i.addListener(l,"mousedown",r),i.addListener(h,"mousedown",function(t){return e.focus(),i.preventDefault(t)}),e.on("mousemove",function(i){if(!t.state&&!t.$dragDelay&&t.$dragEnabled){var n=e.renderer.screenToTextCoordinates(i.x,i.y),s=e.session.selection.getRange(),o=e.renderer;!s.isEmpty()&&s.insideStart(n.row,n.column)?o.setCursorStyle("default"):o.setCursorStyle("")}})};(function(){this.onMouseEvent=function(e,t){this.editor._emit(e,new r(t,this.editor))},this.onMouseMove=function(e,t){var i=this.editor._eventRegistry&&this.editor._eventRegistry.mousemove;i&&i.length&&this.editor._emit(e,new r(t,this.editor))},this.onMouseWheel=function(e,t){var i=new r(t,this.editor);i.speed=2*this.$scrollSpeed,i.wheelX=t.wheelX,i.wheelY=t.wheelY,this.editor._emit(e,i)},this.setState=function(e){this.state=e},this.captureMouse=function(e,t){this.x=e.x,this.y=e.y,this.isMousePressed=!0;var s=this.editor.renderer;s.$keepTextAreaAtCursor&&(s.$keepTextAreaAtCursor=null);var o=this,a=function(e){if(e){if(n.isWebKit&&!e.which&&o.releaseMouse)return o.releaseMouse();o.x=e.clientX,o.y=e.clientY,t&&t(e),o.mouseEvent=new r(e,o.editor),o.$mouseMoved=!0}},l=function(e){clearInterval(c),h(),o[o.state+"End"]&&o[o.state+"End"](e),o.state="",null==s.$keepTextAreaAtCursor&&(s.$keepTextAreaAtCursor=!0,s.$moveTextAreaToCursor()),o.isMousePressed=!1,o.$onCaptureMouseMove=o.releaseMouse=null,e&&o.onMouseEvent("mouseup",e)},h=function(){o[o.state]&&o[o.state](),o.$mouseMoved=!1};if(n.isOldIE&&"dblclick"==e.domEvent.type)return setTimeout(function(){l(e)});o.$onCaptureMouseMove=a,o.releaseMouse=i.capture(this.editor.container,a,l);var c=setInterval(h,20)},this.releaseMouse=null,this.cancelContextMenu=function(){var e=function(t){t&&t.domEvent&&"contextmenu"!=t.domEvent.type||(this.editor.off("nativecontextmenu",e),t&&t.domEvent&&i.stopEvent(t.domEvent))}.bind(this);setTimeout(e,10),this.editor.on("nativecontextmenu",e)}}).call(h.prototype),l.defineOptions(h.prototype,"mouseHandler",{scrollSpeed:{initialValue:2},dragDelay:{initialValue:n.isMac?150:0},dragEnabled:{initialValue:!0},focusTimout:{initialValue:0},tooltipFollowsMouse:{initialValue:!0}}),t.MouseHandler=h}),define("ace/mouse/fold_handler",["require","exports","module"],function(e,t){"use strict";function i(e){e.on("click",function(t){var i=t.getDocumentPosition(),n=e.session,s=n.getFoldAt(i.row,i.column,1);s&&(t.getAccelKey()?n.removeFold(s):n.expandFold(s),t.stop())}),e.on("gutterclick",function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var i=t.getDocumentPosition().row,n=e.session;n.foldWidgets&&n.foldWidgets[i]&&e.session.onFoldWidgetClick(i,t),e.isFocused()||e.focus(),t.stop()}}),e.on("gutterdblclick",function(t){if("foldWidgets"==e.renderer.$gutterLayer.getRegion(t)){var i=t.getDocumentPosition().row,n=e.session,s=n.getParentFoldRangeData(i,!0),o=s.range||s.firstRange;if(o){i=o.start.row;var r=n.getFoldAt(i,n.getLine(i).length,1);r?n.removeFold(r):(n.addFold("...",o),e.renderer.scrollCursorIntoView({row:o.start.row,column:0}))}t.stop()}})}t.FoldHandler=i}),define("ace/keyboard/keybinding",["require","exports","module","ace/lib/keys","ace/lib/event"],function(e,t){"use strict";var i=e("../lib/keys"),n=e("../lib/event"),s=function(e){this.$editor=e,this.$data={editor:e},this.$handlers=[],this.setDefaultHandler(e.commands)};(function(){this.setDefaultHandler=function(e){this.removeKeyboardHandler(this.$defaultHandler),this.$defaultHandler=e,this.addKeyboardHandler(e,0)},this.setKeyboardHandler=function(e){var t=this.$handlers;if(t[t.length-1]!=e){for(;t[t.length-1]&&t[t.length-1]!=this.$defaultHandler;)this.removeKeyboardHandler(t[t.length-1]);this.addKeyboardHandler(e,1)}},this.addKeyboardHandler=function(e,t){if(e){"function"!=typeof e||e.handleKeyboard||(e.handleKeyboard=e);var i=this.$handlers.indexOf(e);-1!=i&&this.$handlers.splice(i,1),t==undefined?this.$handlers.push(e):this.$handlers.splice(t,0,e),-1==i&&e.attach&&e.attach(this.$editor)}},this.removeKeyboardHandler=function(e){var t=this.$handlers.indexOf(e);return-1!=t&&(this.$handlers.splice(t,1),e.detach&&e.detach(this.$editor),!0)},this.getKeyboardHandler=function(){return this.$handlers[this.$handlers.length-1]},this.getStatusText=function(){var e=this.$data,t=e.editor;return this.$handlers.map(function(i){return i.getStatusText&&i.getStatusText(t,e)||""}).filter(Boolean).join(" ")},this.$callKeyboardHandlers=function(e,t,i,s){for(var o,r=!1,a=this.$editor.commands,l=this.$handlers.length;l--&&!((o=this.$handlers[l].handleKeyboard(this.$data,e,t,i,s))&&o.command&&(r="null"==o.command||a.exec(o.command,this.$editor,o.args,s),r&&s&&-1!=e&&1!=o.passEvent&&1!=o.command.passEvent&&n.stopEvent(s),r)););return r},this.onCommandKey=function(e,t,n){var s=i.keyCodeToString(n);this.$callKeyboardHandlers(t,s,n,e)},this.onTextInput=function(e){this.$callKeyboardHandlers(-1,e)||this.$editor.commands.exec("insertstring",this.$editor,e)}}).call(s.prototype),t.KeyBinding=s}),define("ace/range",["require","exports","module"],function(e,t){"use strict";var i=function(e,t){return e.row-t.row||e.column-t.column},n=function(e,t,i,n){this.start={row:e,column:t},this.end={row:i,column:n}};(function(){this.isEqual=function(e){return this.start.row===e.start.row&&this.end.row===e.end.row&&this.start.column===e.start.column&&this.end.column===e.end.column},this.toString=function(){return"Range: ["+this.start.row+"/"+this.start.column+"] -> ["+this.end.row+"/"+this.end.column+"]"},this.contains=function(e,t){return 0==this.compare(e,t)},this.compareRange=function(e){var t,i=e.end,n=e.start;return t=this.compare(i.row,i.column),1==t?(t=this.compare(n.row,n.column),1==t?2:0==t?1:0):-1==t?-2:(t=this.compare(n.row,n.column),-1==t?-1:1==t?42:0)},this.comparePoint=function(e){return this.compare(e.row,e.column)},this.containsRange=function(e){return 0==this.comparePoint(e.start)&&0==this.comparePoint(e.end)},this.intersects=function(e){var t=this.compareRange(e);return-1==t||0==t||1==t},this.isEnd=function(e,t){return this.end.row==e&&this.end.column==t},this.isStart=function(e,t){return this.start.row==e&&this.start.column==t},this.setStart=function(e,t){"object"==typeof e?(this.start.column=e.column,this.start.row=e.row):(this.start.row=e,this.start.column=t)},this.setEnd=function(e,t){"object"==typeof e?(this.end.column=e.column,this.end.row=e.row):(this.end.row=e,this.end.column=t)},this.inside=function(e,t){return 0==this.compare(e,t)&&(!this.isEnd(e,t)&&!this.isStart(e,t))},this.insideStart=function(e,t){return 0==this.compare(e,t)&&!this.isEnd(e,t)},this.insideEnd=function(e,t){return 0==this.compare(e,t)&&!this.isStart(e,t)},this.compare=function(e,t){return this.isMultiLine()||e!==this.start.row?e<this.start.row?-1:e>this.end.row?1:this.start.row===e?t>=this.start.column?0:-1:this.end.row===e?t<=this.end.column?0:1:0:t<this.start.column?-1:t>this.end.column?1:0},this.compareStart=function(e,t){return this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.compareEnd=function(e,t){return this.end.row==e&&this.end.column==t?1:this.compare(e,t)},this.compareInside=function(e,t){return this.end.row==e&&this.end.column==t?1:this.start.row==e&&this.start.column==t?-1:this.compare(e,t)},this.clipRows=function(e,t){if(this.end.row>t)var i={row:t+1,column:0};else if(this.end.row<e)var i={row:e,column:0};if(this.start.row>t)var s={row:t+1,column:0};else if(this.start.row<e)var s={row:e,column:0};return n.fromPoints(s||this.start,i||this.end)},this.extend=function(e,t){var i=this.compare(e,t);if(0==i)return this;if(-1==i)var s={row:e,column:t};else var o={row:e,column:t};return n.fromPoints(s||this.start,o||this.end)},this.isEmpty=function(){return this.start.row===this.end.row&&this.start.column===this.end.column},this.isMultiLine=function(){return this.start.row!==this.end.row},this.clone=function(){return n.fromPoints(this.start,this.end)},this.collapseRows=function(){return 0==this.end.column?new n(this.start.row,0,Math.max(this.start.row,this.end.row-1),0):new n(this.start.row,0,this.end.row,0)},this.toScreenRange=function(e){var t=e.documentToScreenPosition(this.start),i=e.documentToScreenPosition(this.end);return new n(t.row,t.column,i.row,i.column)},this.moveBy=function(e,t){this.start.row+=e,this.start.column+=t,this.end.row+=e,this.end.column+=t}}).call(n.prototype),n.fromPoints=function(e,t){return new n(e.row,e.column,t.row,t.column)},n.comparePoints=i,n.comparePoints=function(e,t){return e.row-t.row||e.column-t.column},t.Range=n}),define("ace/selection",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter","ace/range"],function(e,t){"use strict";var i=e("./lib/oop"),n=e("./lib/lang"),s=e("./lib/event_emitter").EventEmitter,o=e("./range").Range,r=function(e){this.session=e,this.doc=e.getDocument(),this.clearSelection(),this.lead=this.selectionLead=this.doc.createAnchor(0,0),this.anchor=this.selectionAnchor=this.doc.createAnchor(0,0);var t=this;this.lead.on("change",function(e){t._emit("changeCursor"),t.$isEmpty||t._emit("changeSelection"),t.$keepDesiredColumnOnChange||e.old.column==e.value.column||(t.$desiredColumn=null)}),this.selectionAnchor.on("change",function(){t.$isEmpty||t._emit("changeSelection")})};(function(){i.implement(this,s),this.isEmpty=function(){return this.$isEmpty||this.anchor.row==this.lead.row&&this.anchor.column==this.lead.column},this.isMultiLine=function(){return!this.isEmpty()&&this.getRange().isMultiLine()},this.getCursor=function(){return this.lead.getPosition()},this.setSelectionAnchor=function(e,t){this.anchor.setPosition(e,t),this.$isEmpty&&(this.$isEmpty=!1,this._emit("changeSelection"))},this.getSelectionAnchor=function(){return this.$isEmpty?this.getSelectionLead():this.anchor.getPosition()},this.getSelectionLead=function(){return this.lead.getPosition()},this.shiftSelection=function(e){if(this.$isEmpty)return void this.moveCursorTo(this.lead.row,this.lead.column+e);var t=this.getSelectionAnchor(),i=this.getSelectionLead(),n=this.isBackwards();n&&0===t.column||this.setSelectionAnchor(t.row,t.column+e),(n||0!==i.column)&&this.$moveSelection(function(){this.moveCursorTo(i.row,i.column+e)})},this.isBackwards=function(){var e=this.anchor,t=this.lead;return e.row>t.row||e.row==t.row&&e.column>t.column},this.getRange=function(){var e=this.anchor,t=this.lead;return this.isEmpty()?o.fromPoints(t,t):this.isBackwards()?o.fromPoints(t,e):o.fromPoints(e,t)},this.clearSelection=function(){this.$isEmpty||(this.$isEmpty=!0,this._emit("changeSelection"))},this.selectAll=function(){var e=this.doc.getLength()-1;this.setSelectionAnchor(0,0),this.moveCursorTo(e,this.doc.getLine(e).length)},this.setRange=this.setSelectionRange=function(e,t){t?(this.setSelectionAnchor(e.end.row,e.end.column),this.selectTo(e.start.row,e.start.column)):(this.setSelectionAnchor(e.start.row,e.start.column),this.selectTo(e.end.row,e.end.column)),this.getRange().isEmpty()&&(this.$isEmpty=!0),this.$desiredColumn=null},this.$moveSelection=function(e){var t=this.lead;this.$isEmpty&&this.setSelectionAnchor(t.row,t.column),e.call(this)},this.selectTo=function(e,t){this.$moveSelection(function(){this.moveCursorTo(e,t)})},
this.selectToPosition=function(e){this.$moveSelection(function(){this.moveCursorToPosition(e)})},this.moveTo=function(e,t){this.clearSelection(),this.moveCursorTo(e,t)},this.moveToPosition=function(e){this.clearSelection(),this.moveCursorToPosition(e)},this.selectUp=function(){this.$moveSelection(this.moveCursorUp)},this.selectDown=function(){this.$moveSelection(this.moveCursorDown)},this.selectRight=function(){this.$moveSelection(this.moveCursorRight)},this.selectLeft=function(){this.$moveSelection(this.moveCursorLeft)},this.selectLineStart=function(){this.$moveSelection(this.moveCursorLineStart)},this.selectLineEnd=function(){this.$moveSelection(this.moveCursorLineEnd)},this.selectFileEnd=function(){this.$moveSelection(this.moveCursorFileEnd)},this.selectFileStart=function(){this.$moveSelection(this.moveCursorFileStart)},this.selectWordRight=function(){this.$moveSelection(this.moveCursorWordRight)},this.selectWordLeft=function(){this.$moveSelection(this.moveCursorWordLeft)},this.getWordRange=function(e,t){if(void 0===t){var i=e||this.lead;e=i.row,t=i.column}return this.session.getWordRange(e,t)},this.selectWord=function(){this.setSelectionRange(this.getWordRange())},this.selectAWord=function(){var e=this.getCursor(),t=this.session.getAWordRange(e.row,e.column);this.setSelectionRange(t)},this.getLineRange=function(e,t){var i,n="number"==typeof e?e:this.lead.row,s=this.session.getFoldLine(n);return s?(n=s.start.row,i=s.end.row):i=n,!0===t?new o(n,0,i,this.session.getLine(i).length):new o(n,0,i+1,0)},this.selectLine=function(){this.setSelectionRange(this.getLineRange())},this.moveCursorUp=function(){this.moveCursorBy(-1,0)},this.moveCursorDown=function(){this.moveCursorBy(1,0)},this.moveCursorLeft=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,-1))this.moveCursorTo(e.start.row,e.start.column);else if(0===t.column)t.row>0&&this.moveCursorTo(t.row-1,this.doc.getLine(t.row-1).length);else{var i=this.session.getTabSize();this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(t.column-i,t.column).split(" ").length-1==i?this.moveCursorBy(0,-i):this.moveCursorBy(0,-1)}},this.moveCursorRight=function(){var e,t=this.lead.getPosition();if(e=this.session.getFoldAt(t.row,t.column,1))this.moveCursorTo(e.end.row,e.end.column);else if(this.lead.column==this.doc.getLine(this.lead.row).length)this.lead.row<this.doc.getLength()-1&&this.moveCursorTo(this.lead.row+1,0);else{var i=this.session.getTabSize(),t=this.lead;this.session.isTabStop(t)&&this.doc.getLine(t.row).slice(t.column,t.column+i).split(" ").length-1==i?this.moveCursorBy(0,i):this.moveCursorBy(0,1)}},this.moveCursorLineStart=function(){var e=this.lead.row,t=this.lead.column,i=this.session.documentToScreenRow(e,t),n=this.session.screenToDocumentPosition(i,0),s=this.session.getDisplayLine(e,null,n.row,n.column),o=s.match(/^\s*/);o[0].length==t||this.session.$useEmacsStyleLineStart||(n.column+=o[0].length),this.moveCursorToPosition(n)},this.moveCursorLineEnd=function(){var e=this.lead,t=this.session.getDocumentLastRowColumnPosition(e.row,e.column);if(this.lead.column==t.column){var i=this.session.getLine(t.row);if(t.column==i.length){var n=i.search(/\s+$/);n>0&&(t.column=n)}}this.moveCursorTo(t.row,t.column)},this.moveCursorFileEnd=function(){var e=this.doc.getLength()-1,t=this.doc.getLine(e).length;this.moveCursorTo(e,t)},this.moveCursorFileStart=function(){this.moveCursorTo(0,0)},this.moveCursorLongWordRight=function(){var e=this.lead.row,t=this.lead.column,i=this.doc.getLine(e),n=i.substring(t);this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0;var s=this.session.getFoldAt(e,t,1);return s?void this.moveCursorTo(s.end.row,s.end.column):(this.session.nonTokenRe.exec(n)&&(t+=this.session.nonTokenRe.lastIndex,this.session.nonTokenRe.lastIndex=0,n=i.substring(t)),t>=i.length?(this.moveCursorTo(e,i.length),this.moveCursorRight(),void(e<this.doc.getLength()-1&&this.moveCursorWordRight())):(this.session.tokenRe.exec(n)&&(t+=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),void this.moveCursorTo(e,t)))},this.moveCursorLongWordLeft=function(){var e,t=this.lead.row,i=this.lead.column;if(e=this.session.getFoldAt(t,i,-1))return void this.moveCursorTo(e.start.row,e.start.column);var s=this.session.getFoldStringAt(t,i,-1);null==s&&(s=this.doc.getLine(t).substring(0,i));var o=n.stringReverse(s);if(this.session.nonTokenRe.lastIndex=0,this.session.tokenRe.lastIndex=0,this.session.nonTokenRe.exec(o)&&(i-=this.session.nonTokenRe.lastIndex,o=o.slice(this.session.nonTokenRe.lastIndex),this.session.nonTokenRe.lastIndex=0),i<=0)return this.moveCursorTo(t,0),this.moveCursorLeft(),void(t>0&&this.moveCursorWordLeft());this.session.tokenRe.exec(o)&&(i-=this.session.tokenRe.lastIndex,this.session.tokenRe.lastIndex=0),this.moveCursorTo(t,i)},this.$shortWordEndIndex=function(e){var t,i=0,n=/\s/,s=this.session.tokenRe;if(s.lastIndex=0,this.session.tokenRe.exec(e))i=this.session.tokenRe.lastIndex;else{for(;(t=e[i])&&n.test(t);)i++;if(i<1)for(s.lastIndex=0;(t=e[i])&&!s.test(t);)if(s.lastIndex=0,i++,n.test(t)){if(i>2){i--;break}for(;(t=e[i])&&n.test(t);)i++;if(i>2)break}}return s.lastIndex=0,i},this.moveCursorShortWordRight=function(){var e=this.lead.row,t=this.lead.column,i=this.doc.getLine(e),n=i.substring(t),s=this.session.getFoldAt(e,t,1);if(s)return this.moveCursorTo(s.end.row,s.end.column);if(t==i.length){var o=this.doc.getLength();do{e++,n=this.doc.getLine(e)}while(e<o&&/^\s*$/.test(n));/^\s+/.test(n)||(n=""),t=0}var r=this.$shortWordEndIndex(n);this.moveCursorTo(e,t+r)},this.moveCursorShortWordLeft=function(){var e,t=this.lead.row,i=this.lead.column;if(e=this.session.getFoldAt(t,i,-1))return this.moveCursorTo(e.start.row,e.start.column);var s=this.session.getLine(t).substring(0,i);if(0===i){do{t--,s=this.doc.getLine(t)}while(t>0&&/^\s*$/.test(s));i=s.length,/\s+$/.test(s)||(s="")}var o=n.stringReverse(s),r=this.$shortWordEndIndex(o);return this.moveCursorTo(t,i-r)},this.moveCursorWordRight=function(){this.session.$selectLongWords?this.moveCursorLongWordRight():this.moveCursorShortWordRight()},this.moveCursorWordLeft=function(){this.session.$selectLongWords?this.moveCursorLongWordLeft():this.moveCursorShortWordLeft()},this.moveCursorBy=function(e,t){var i=this.session.documentToScreenPosition(this.lead.row,this.lead.column);0===t&&(this.$desiredColumn?i.column=this.$desiredColumn:this.$desiredColumn=i.column);var n=this.session.screenToDocumentPosition(i.row+e,i.column);0!==e&&0===t&&n.row===this.lead.row&&n.column===this.lead.column&&this.session.lineWidgets&&this.session.lineWidgets[n.row]&&n.row++,this.moveCursorTo(n.row,n.column+t,0===t)},this.moveCursorToPosition=function(e){this.moveCursorTo(e.row,e.column)},this.moveCursorTo=function(e,t,i){var n=this.session.getFoldAt(e,t,1);n&&(e=n.start.row,t=n.start.column),this.$keepDesiredColumnOnChange=!0,this.lead.setPosition(e,t),this.$keepDesiredColumnOnChange=!1,i||(this.$desiredColumn=null)},this.moveCursorToScreen=function(e,t,i){var n=this.session.screenToDocumentPosition(e,t);this.moveCursorTo(n.row,n.column,i)},this.detach=function(){this.lead.detach(),this.anchor.detach(),this.session=this.doc=null},this.fromOrientedRange=function(e){this.setSelectionRange(e,e.cursor==e.start),this.$desiredColumn=e.desiredColumn||this.$desiredColumn},this.toOrientedRange=function(e){var t=this.getRange();return e?(e.start.column=t.start.column,e.start.row=t.start.row,e.end.column=t.end.column,e.end.row=t.end.row):e=t,e.cursor=this.isBackwards()?e.start:e.end,e.desiredColumn=this.$desiredColumn,e},this.getRangeOfMovements=function(e){var t=this.getCursor();try{e.call(null,this);var i=this.getCursor();return o.fromPoints(t,i)}catch(e){return o.fromPoints(t,t)}finally{this.moveCursorToPosition(t)}},this.toJSON=function(){if(this.rangeCount)var e=this.ranges.map(function(e){var t=e.clone();return t.isBackwards=e.cursor==e.start,t});else{var e=this.getRange();e.isBackwards=this.isBackwards()}return e},this.fromJSON=function(e){if(e.start==undefined){if(this.rangeList){this.toSingleRange(e[0]);for(var t=e.length;t--;){var i=o.fromPoints(e[t].start,e[t].end);e.isBackwards&&(i.cursor=i.start),this.addRange(i,!0)}return}e=e[0]}this.rangeList&&this.toSingleRange(e),this.setSelectionRange(e,e.isBackwards)},this.isEqual=function(e){if((e.length||this.rangeCount)&&e.length!=this.rangeCount)return!1;if(!e.length||!this.ranges)return this.getRange().isEqual(e);for(var t=this.ranges.length;t--;)if(!this.ranges[t].isEqual(e[t]))return!1;return!0}}).call(r.prototype),t.Selection=r}),define("ace/tokenizer",["require","exports","module"],function(e,t){"use strict";var i=2e3,n=function(e){this.states=e,this.regExps={},this.matchMappings={};for(var t in this.states){for(var i=this.states[t],n=[],s=0,o=this.matchMappings[t]={defaultToken:"text"},r="g",a=[],l=0;l<i.length;l++){var h=i[l];if(h.defaultToken&&(o.defaultToken=h.defaultToken),h.caseInsensitive&&(r="gi"),null!=h.regex){h.regex instanceof RegExp&&(h.regex=h.regex.toString().slice(1,-1));var c=h.regex,u=new RegExp("(?:("+c+")|(.))").exec("a").length-2;Array.isArray(h.token)?1==h.token.length||1==u?h.token=h.token[0]:u-1!=h.token.length?(this.reportError("number of classes and regexp groups doesn't match",{rule:h,groupCount:u-1}),h.token=h.token[0]):(h.tokenArray=h.token,h.token=null,h.onMatch=this.$arrayTokens):"function"!=typeof h.token||h.onMatch||(h.onMatch=u>1?this.$applyToken:h.token),u>1&&(/\\\d/.test(h.regex)?c=h.regex.replace(/\\([0-9]+)/g,function(e,t){return"\\"+(parseInt(t,10)+s+1)}):(u=1,c=this.removeCapturingGroups(h.regex)),h.splitRegex||"string"==typeof h.token||a.push(h)),o[s]=l,s+=u,n.push(c),h.onMatch||(h.onMatch=null)}}n.length||(o[0]=0,n.push("$")),a.forEach(function(e){e.splitRegex=this.createSplitterRegexp(e.regex,r)},this),this.regExps[t]=new RegExp("("+n.join(")|(")+")|($)",r)}};(function(){this.$setMaxTokenCount=function(e){i=0|e},this.$applyToken=function(e){var t=this.splitRegex.exec(e).slice(1),i=this.token.apply(this,t);if("string"==typeof i)return[{type:i,value:e}];for(var n=[],s=0,o=i.length;s<o;s++)t[s]&&(n[n.length]={type:i[s],value:t[s]});return n},this.$arrayTokens=function(e){if(!e)return[];var t=this.splitRegex.exec(e);if(!t)return"text";for(var i=[],n=this.tokenArray,s=0,o=n.length;s<o;s++)t[s+1]&&(i[i.length]={type:n[s],value:t[s+1]});return i},this.removeCapturingGroups=function(e){return e.replace(/\[(?:\\.|[^\]])*?\]|\\.|\(\?[:=!]|(\()/g,function(e,t){return t?"(?:":e})},this.createSplitterRegexp=function(e,t){if(-1!=e.indexOf("(?=")){var i=0,n=!1,s={};e.replace(/(\\.)|(\((?:\?[=!])?)|(\))|([\[\]])/g,function(e,t,o,r,a,l){return n?n="]"!=a:a?n=!0:r?(i==s.stack&&(s.end=l+1,s.stack=-1),i--):o&&(i++,1!=o.length&&(s.stack=i,s.start=l)),e}),null!=s.end&&/^\)*$/.test(e.substr(s.end))&&(e=e.substring(0,s.start)+e.substr(s.end))}return new RegExp(e,(t||"").replace("g",""))},this.getLineTokens=function(e,t){if(t&&"string"!=typeof t){var n=t.slice(0);t=n[0],"#tmp"===t&&(n.shift(),t=n.shift())}else var n=[];var s=t||"start",o=this.states[s];o||(s="start",o=this.states[s]);var r=this.matchMappings[s],a=this.regExps[s];a.lastIndex=0;for(var l,h=[],c=0,u=0,d={type:null,value:""};l=a.exec(e);){var g=r.defaultToken,f=null,m=l[0],p=a.lastIndex;if(p-m.length>c){var A=e.substring(c,p-m.length);d.type==g?d.value+=A:(d.type&&h.push(d),d={type:g,value:A})}for(var C=0;C<l.length-2;C++)if(l[C+1]!==undefined){f=o[r[C]],g=f.onMatch?f.onMatch(m,s,n):f.token,f.next&&(s="string"==typeof f.next?f.next:f.next(s,n),o=this.states[s],o||(this.reportError("state doesn't exist",s),s="start",o=this.states[s]),r=this.matchMappings[s],c=p,a=this.regExps[s],a.lastIndex=p);break}if(m)if("string"==typeof g)f&&!1===f.merge||d.type!==g?(d.type&&h.push(d),d={type:g,value:m}):d.value+=m;else if(g){d.type&&h.push(d),d={type:null,value:""};for(var C=0;C<g.length;C++)h.push(g[C])}if(c==e.length)break;if(c=p,u++>i){for(u>2*e.length&&this.reportError("infinite loop with in ace tokenizer",{startState:t,line:e});c<e.length;)d.type&&h.push(d),d={value:e.substring(c,c+=2e3),type:"overflow"};s="start",n=[];break}}return d.type&&h.push(d),n.length>1&&n[0]!==s&&n.unshift("#tmp",s),{tokens:h,state:n.length?n:s}},this.reportError=function(e,t){var i=new Error(e);i.data=t,"object"==typeof console&&console.error&&console.error(i),setTimeout(function(){throw i})}}).call(n.prototype),t.Tokenizer=n}),define("ace/mode/text_highlight_rules",["require","exports","module","ace/lib/lang"],function(e,t){"use strict";var i=e("../lib/lang"),n=function(){this.$rules={start:[{token:"empty_line",regex:"^$"},{defaultToken:"text"}]}};(function(){this.addRules=function(e,t){if(t)for(var i in e){for(var n=e[i],s=0;s<n.length;s++){var o=n[s];(o.next||o.onMatch)&&("string"!=typeof o.next?o.nextState&&0!==o.nextState.indexOf(t)&&(o.nextState=t+o.nextState):0!==o.next.indexOf(t)&&(o.next=t+o.next))}this.$rules[t+i]=n}else for(var i in e)this.$rules[i]=e[i]},this.getRules=function(){return this.$rules},this.embedRules=function(e,t,n,s,o){var r="function"==typeof e?(new e).getRules():e;if(s)for(var a=0;a<s.length;a++)s[a]=t+s[a];else{s=[];for(var l in r)s.push(t+l)}if(this.addRules(r,t),n)for(var h=Array.prototype[o?"push":"unshift"],a=0;a<s.length;a++)h.apply(this.$rules[s[a]],i.deepCopy(n));this.$embeds||(this.$embeds=[]),this.$embeds.push(t)},this.getEmbeds=function(){return this.$embeds};var e=function(e,t){return("start"!=e||t.length)&&t.unshift(this.nextState,e),this.nextState},t=function(e,t){return t.shift(),t.shift()||"start"};this.normalizeRules=function(){function i(o){var r=s[o];r.processed=!0;for(var a=0;a<r.length;a++){var l=r[a];!l.regex&&l.start&&(l.regex=l.start,l.next||(l.next=[]),l.next.push({defaultToken:l.token},{token:l.token+".end",regex:l.end||l.start,next:"pop"}),l.token=l.token+".start",l.push=!0);var h=l.next||l.push;if(h&&Array.isArray(h)){var c=l.stateName;c||(c=l.token,"string"!=typeof c&&(c=c[0]||""),s[c]&&(c+=n++)),s[c]=h,l.next=c,i(c)}else"pop"==h&&(l.next=t);if(l.push&&(l.nextState=l.next||l.push,l.next=e,delete l.push),l.rules)for(var u in l.rules)s[u]?s[u].push&&s[u].push.apply(s[u],l.rules[u]):s[u]=l.rules[u];if(l.include||"string"==typeof l)var d=l.include||l,g=s[d];else Array.isArray(l)&&(g=l);if(g){var f=[a,1].concat(g);l.noEscape&&(f=f.filter(function(e){return!e.next})),r.splice.apply(r,f),a--,g=null}l.keywordMap&&(l.token=this.createKeywordMapper(l.keywordMap,l.defaultToken||"text",l.caseInsensitive),delete l.defaultToken)}}var n=0,s=this.$rules;Object.keys(s).forEach(i,this)},this.createKeywordMapper=function(e,t,i,n){var s=Object.create(null);return Object.keys(e).forEach(function(t){var o=e[t];i&&(o=o.toLowerCase());for(var r=o.split(n||"|"),a=r.length;a--;)s[r[a]]=t}),Object.getPrototypeOf(s)&&(s.__proto__=null),this.$keywordList=Object.keys(s),e=null,i?function(e){return s[e.toLowerCase()]||t}:function(e){return s[e]||t}},this.getKeywords=function(){return this.$keywords}}).call(n.prototype),t.TextHighlightRules=n}),define("ace/mode/behaviour",["require","exports","module"],function(e,t){"use strict";var i=function(){this.$behaviours={}};(function(){this.add=function(e,t,i){switch(undefined){case this.$behaviours:this.$behaviours={};case this.$behaviours[e]:this.$behaviours[e]={}}this.$behaviours[e][t]=i},this.addBehaviours=function(e){for(var t in e)for(var i in e[t])this.add(t,i,e[t][i])},this.remove=function(e){this.$behaviours&&this.$behaviours[e]&&delete this.$behaviours[e]},this.inherit=function(e,t){if("function"==typeof e)var i=(new e).getBehaviours(t);else var i=e.getBehaviours(t);this.addBehaviours(i)},this.getBehaviours=function(e){if(e){for(var t={},i=0;i<e.length;i++)this.$behaviours[e[i]]&&(t[e[i]]=this.$behaviours[e[i]]);return t}return this.$behaviours}}).call(i.prototype),t.Behaviour=i}),define("ace/unicode",["require","exports","module"],function(e,t){"use strict";function i(e){var i=/\w{4}/g;for(var n in e)t.packages[n]=e[n].replace(i,"\\u$&")}t.packages={},i({L:"0041-005A0061-007A00AA00B500BA00C0-00D600D8-00F600F8-02C102C6-02D102E0-02E402EC02EE0370-037403760377037A-037D03860388-038A038C038E-03A103A3-03F503F7-0481048A-05250531-055605590561-058705D0-05EA05F0-05F20621-064A066E066F0671-06D306D506E506E606EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA07F407F507FA0800-0815081A082408280904-0939093D09500958-0961097109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E460E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EC60EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10A0-10C510D0-10FA10FC1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317D717DC1820-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541AA71B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C7D1CE9-1CEC1CEE-1CF11D00-1DBF1E00-1F151F18-1F1D1F20-1F451F48-1F4D1F50-1F571F591F5B1F5D1F5F-1F7D1F80-1FB41FB6-1FBC1FBE1FC2-1FC41FC6-1FCC1FD0-1FD31FD6-1FDB1FE0-1FEC1FF2-1FF41FF6-1FFC2071207F2090-209421022107210A-211321152119-211D212421262128212A-212D212F-2139213C-213F2145-2149214E218321842C00-2C2E2C30-2C5E2C60-2CE42CEB-2CEE2D00-2D252D30-2D652D6F2D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE2E2F300530063031-3035303B303C3041-3096309D-309F30A1-30FA30FC-30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A48CA4D0-A4FDA500-A60CA610-A61FA62AA62BA640-A65FA662-A66EA67F-A697A6A0-A6E5A717-A71FA722-A788A78BA78CA7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2A9CFAA00-AA28AA40-AA42AA44-AA4BAA60-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADB-AADDABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB00-FB06FB13-FB17FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF21-FF3AFF41-FF5AFF66-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",Ll:"0061-007A00AA00B500BA00DF-00F600F8-00FF01010103010501070109010B010D010F01110113011501170119011B011D011F01210123012501270129012B012D012F01310133013501370138013A013C013E014001420144014601480149014B014D014F01510153015501570159015B015D015F01610163016501670169016B016D016F0171017301750177017A017C017E-0180018301850188018C018D019201950199-019B019E01A101A301A501A801AA01AB01AD01B001B401B601B901BA01BD-01BF01C601C901CC01CE01D001D201D401D601D801DA01DC01DD01DF01E101E301E501E701E901EB01ED01EF01F001F301F501F901FB01FD01FF02010203020502070209020B020D020F02110213021502170219021B021D021F02210223022502270229022B022D022F02310233-0239023C023F0240024202470249024B024D024F-02930295-02AF037103730377037B-037D039003AC-03CE03D003D103D5-03D703D903DB03DD03DF03E103E303E503E703E903EB03ED03EF-03F303F503F803FB03FC0430-045F04610463046504670469046B046D046F04710473047504770479047B047D047F0481048B048D048F04910493049504970499049B049D049F04A104A304A504A704A904AB04AD04AF04B104B304B504B704B904BB04BD04BF04C204C404C604C804CA04CC04CE04CF04D104D304D504D704D904DB04DD04DF04E104E304E504E704E904EB04ED04EF04F104F304F504F704F904FB04FD04FF05010503050505070509050B050D050F05110513051505170519051B051D051F0521052305250561-05871D00-1D2B1D62-1D771D79-1D9A1E011E031E051E071E091E0B1E0D1E0F1E111E131E151E171E191E1B1E1D1E1F1E211E231E251E271E291E2B1E2D1E2F1E311E331E351E371E391E3B1E3D1E3F1E411E431E451E471E491E4B1E4D1E4F1E511E531E551E571E591E5B1E5D1E5F1E611E631E651E671E691E6B1E6D1E6F1E711E731E751E771E791E7B1E7D1E7F1E811E831E851E871E891E8B1E8D1E8F1E911E931E95-1E9D1E9F1EA11EA31EA51EA71EA91EAB1EAD1EAF1EB11EB31EB51EB71EB91EBB1EBD1EBF1EC11EC31EC51EC71EC91ECB1ECD1ECF1ED11ED31ED51ED71ED91EDB1EDD1EDF1EE11EE31EE51EE71EE91EEB1EED1EEF1EF11EF31EF51EF71EF91EFB1EFD1EFF-1F071F10-1F151F20-1F271F30-1F371F40-1F451F50-1F571F60-1F671F70-1F7D1F80-1F871F90-1F971FA0-1FA71FB0-1FB41FB61FB71FBE1FC2-1FC41FC61FC71FD0-1FD31FD61FD71FE0-1FE71FF2-1FF41FF61FF7210A210E210F2113212F21342139213C213D2146-2149214E21842C30-2C5E2C612C652C662C682C6A2C6C2C712C732C742C76-2C7C2C812C832C852C872C892C8B2C8D2C8F2C912C932C952C972C992C9B2C9D2C9F2CA12CA32CA52CA72CA92CAB2CAD2CAF2CB12CB32CB52CB72CB92CBB2CBD2CBF2CC12CC32CC52CC72CC92CCB2CCD2CCF2CD12CD32CD52CD72CD92CDB2CDD2CDF2CE12CE32CE42CEC2CEE2D00-2D25A641A643A645A647A649A64BA64DA64FA651A653A655A657A659A65BA65DA65FA663A665A667A669A66BA66DA681A683A685A687A689A68BA68DA68FA691A693A695A697A723A725A727A729A72BA72DA72F-A731A733A735A737A739A73BA73DA73FA741A743A745A747A749A74BA74DA74FA751A753A755A757A759A75BA75DA75FA761A763A765A767A769A76BA76DA76FA771-A778A77AA77CA77FA781A783A785A787A78CFB00-FB06FB13-FB17FF41-FF5A",Lu:"0041-005A00C0-00D600D8-00DE01000102010401060108010A010C010E01100112011401160118011A011C011E01200122012401260128012A012C012E01300132013401360139013B013D013F0141014301450147014A014C014E01500152015401560158015A015C015E01600162016401660168016A016C016E017001720174017601780179017B017D018101820184018601870189-018B018E-0191019301940196-0198019C019D019F01A001A201A401A601A701A901AC01AE01AF01B1-01B301B501B701B801BC01C401C701CA01CD01CF01D101D301D501D701D901DB01DE01E001E201E401E601E801EA01EC01EE01F101F401F6-01F801FA01FC01FE02000202020402060208020A020C020E02100212021402160218021A021C021E02200222022402260228022A022C022E02300232023A023B023D023E02410243-02460248024A024C024E03700372037603860388-038A038C038E038F0391-03A103A3-03AB03CF03D2-03D403D803DA03DC03DE03E003E203E403E603E803EA03EC03EE03F403F703F903FA03FD-042F04600462046404660468046A046C046E04700472047404760478047A047C047E0480048A048C048E04900492049404960498049A049C049E04A004A204A404A604A804AA04AC04AE04B004B204B404B604B804BA04BC04BE04C004C104C304C504C704C904CB04CD04D004D204D404D604D804DA04DC04DE04E004E204E404E604E804EA04EC04EE04F004F204F404F604F804FA04FC04FE05000502050405060508050A050C050E05100512051405160518051A051C051E0520052205240531-055610A0-10C51E001E021E041E061E081E0A1E0C1E0E1E101E121E141E161E181E1A1E1C1E1E1E201E221E241E261E281E2A1E2C1E2E1E301E321E341E361E381E3A1E3C1E3E1E401E421E441E461E481E4A1E4C1E4E1E501E521E541E561E581E5A1E5C1E5E1E601E621E641E661E681E6A1E6C1E6E1E701E721E741E761E781E7A1E7C1E7E1E801E821E841E861E881E8A1E8C1E8E1E901E921E941E9E1EA01EA21EA41EA61EA81EAA1EAC1EAE1EB01EB21EB41EB61EB81EBA1EBC1EBE1EC01EC21EC41EC61EC81ECA1ECC1ECE1ED01ED21ED41ED61ED81EDA1EDC1EDE1EE01EE21EE41EE61EE81EEA1EEC1EEE1EF01EF21EF41EF61EF81EFA1EFC1EFE1F08-1F0F1F18-1F1D1F28-1F2F1F38-1F3F1F48-1F4D1F591F5B1F5D1F5F1F68-1F6F1FB8-1FBB1FC8-1FCB1FD8-1FDB1FE8-1FEC1FF8-1FFB21022107210B-210D2110-211221152119-211D212421262128212A-212D2130-2133213E213F214521832C00-2C2E2C602C62-2C642C672C692C6B2C6D-2C702C722C752C7E-2C802C822C842C862C882C8A2C8C2C8E2C902C922C942C962C982C9A2C9C2C9E2CA02CA22CA42CA62CA82CAA2CAC2CAE2CB02CB22CB42CB62CB82CBA2CBC2CBE2CC02CC22CC42CC62CC82CCA2CCC2CCE2CD02CD22CD42CD62CD82CDA2CDC2CDE2CE02CE22CEB2CEDA640A642A644A646A648A64AA64CA64EA650A652A654A656A658A65AA65CA65EA662A664A666A668A66AA66CA680A682A684A686A688A68AA68CA68EA690A692A694A696A722A724A726A728A72AA72CA72EA732A734A736A738A73AA73CA73EA740A742A744A746A748A74AA74CA74EA750A752A754A756A758A75AA75CA75EA760A762A764A766A768A76AA76CA76EA779A77BA77DA77EA780A782A784A786A78BFF21-FF3A",Lt:"01C501C801CB01F21F88-1F8F1F98-1F9F1FA8-1FAF1FBC1FCC1FFC",Lm:"02B0-02C102C6-02D102E0-02E402EC02EE0374037A0559064006E506E607F407F507FA081A0824082809710E460EC610FC17D718431AA71C78-1C7D1D2C-1D611D781D9B-1DBF2071207F2090-20942C7D2D6F2E2F30053031-3035303B309D309E30FC-30FEA015A4F8-A4FDA60CA67FA717-A71FA770A788A9CFAA70AADDFF70FF9EFF9F",Lo:"01BB01C0-01C3029405D0-05EA05F0-05F20621-063F0641-064A066E066F0671-06D306D506EE06EF06FA-06FC06FF07100712-072F074D-07A507B107CA-07EA0800-08150904-0939093D09500958-096109720979-097F0985-098C098F09900993-09A809AA-09B009B209B6-09B909BD09CE09DC09DD09DF-09E109F009F10A05-0A0A0A0F0A100A13-0A280A2A-0A300A320A330A350A360A380A390A59-0A5C0A5E0A72-0A740A85-0A8D0A8F-0A910A93-0AA80AAA-0AB00AB20AB30AB5-0AB90ABD0AD00AE00AE10B05-0B0C0B0F0B100B13-0B280B2A-0B300B320B330B35-0B390B3D0B5C0B5D0B5F-0B610B710B830B85-0B8A0B8E-0B900B92-0B950B990B9A0B9C0B9E0B9F0BA30BA40BA8-0BAA0BAE-0BB90BD00C05-0C0C0C0E-0C100C12-0C280C2A-0C330C35-0C390C3D0C580C590C600C610C85-0C8C0C8E-0C900C92-0CA80CAA-0CB30CB5-0CB90CBD0CDE0CE00CE10D05-0D0C0D0E-0D100D12-0D280D2A-0D390D3D0D600D610D7A-0D7F0D85-0D960D9A-0DB10DB3-0DBB0DBD0DC0-0DC60E01-0E300E320E330E40-0E450E810E820E840E870E880E8A0E8D0E94-0E970E99-0E9F0EA1-0EA30EA50EA70EAA0EAB0EAD-0EB00EB20EB30EBD0EC0-0EC40EDC0EDD0F000F40-0F470F49-0F6C0F88-0F8B1000-102A103F1050-1055105A-105D106110651066106E-10701075-1081108E10D0-10FA1100-1248124A-124D1250-12561258125A-125D1260-1288128A-128D1290-12B012B2-12B512B8-12BE12C012C2-12C512C8-12D612D8-13101312-13151318-135A1380-138F13A0-13F41401-166C166F-167F1681-169A16A0-16EA1700-170C170E-17111720-17311740-17511760-176C176E-17701780-17B317DC1820-18421844-18771880-18A818AA18B0-18F51900-191C1950-196D1970-19741980-19AB19C1-19C71A00-1A161A20-1A541B05-1B331B45-1B4B1B83-1BA01BAE1BAF1C00-1C231C4D-1C4F1C5A-1C771CE9-1CEC1CEE-1CF12135-21382D30-2D652D80-2D962DA0-2DA62DA8-2DAE2DB0-2DB62DB8-2DBE2DC0-2DC62DC8-2DCE2DD0-2DD62DD8-2DDE3006303C3041-3096309F30A1-30FA30FF3105-312D3131-318E31A0-31B731F0-31FF3400-4DB54E00-9FCBA000-A014A016-A48CA4D0-A4F7A500-A60BA610-A61FA62AA62BA66EA6A0-A6E5A7FB-A801A803-A805A807-A80AA80C-A822A840-A873A882-A8B3A8F2-A8F7A8FBA90A-A925A930-A946A960-A97CA984-A9B2AA00-AA28AA40-AA42AA44-AA4BAA60-AA6FAA71-AA76AA7AAA80-AAAFAAB1AAB5AAB6AAB9-AABDAAC0AAC2AADBAADCABC0-ABE2AC00-D7A3D7B0-D7C6D7CB-D7FBF900-FA2DFA30-FA6DFA70-FAD9FB1DFB1F-FB28FB2A-FB36FB38-FB3CFB3EFB40FB41FB43FB44FB46-FBB1FBD3-FD3DFD50-FD8FFD92-FDC7FDF0-FDFBFE70-FE74FE76-FEFCFF66-FF6FFF71-FF9DFFA0-FFBEFFC2-FFC7FFCA-FFCFFFD2-FFD7FFDA-FFDC",M:"0300-036F0483-04890591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DE-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0903093C093E-094E0951-0955096209630981-098309BC09BE-09C409C709C809CB-09CD09D709E209E30A01-0A030A3C0A3E-0A420A470A480A4B-0A4D0A510A700A710A750A81-0A830ABC0ABE-0AC50AC7-0AC90ACB-0ACD0AE20AE30B01-0B030B3C0B3E-0B440B470B480B4B-0B4D0B560B570B620B630B820BBE-0BC20BC6-0BC80BCA-0BCD0BD70C01-0C030C3E-0C440C46-0C480C4A-0C4D0C550C560C620C630C820C830CBC0CBE-0CC40CC6-0CC80CCA-0CCD0CD50CD60CE20CE30D020D030D3E-0D440D46-0D480D4A-0D4D0D570D620D630D820D830DCA0DCF-0DD40DD60DD8-0DDF0DF20DF30E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F3E0F3F0F71-0F840F860F870F90-0F970F99-0FBC0FC6102B-103E1056-1059105E-10601062-10641067-106D1071-10741082-108D108F109A-109D135F1712-17141732-1734175217531772177317B6-17D317DD180B-180D18A91920-192B1930-193B19B0-19C019C819C91A17-1A1B1A55-1A5E1A60-1A7C1A7F1B00-1B041B34-1B441B6B-1B731B80-1B821BA1-1BAA1C24-1C371CD0-1CD21CD4-1CE81CED1CF21DC0-1DE61DFD-1DFF20D0-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66F-A672A67CA67DA6F0A6F1A802A806A80BA823-A827A880A881A8B4-A8C4A8E0-A8F1A926-A92DA947-A953A980-A983A9B3-A9C0AA29-AA36AA43AA4CAA4DAA7BAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE3-ABEAABECABEDFB1EFE00-FE0FFE20-FE26",Mn:"0300-036F0483-04870591-05BD05BF05C105C205C405C505C70610-061A064B-065E067006D6-06DC06DF-06E406E706E806EA-06ED07110730-074A07A6-07B007EB-07F30816-0819081B-08230825-08270829-082D0900-0902093C0941-0948094D0951-095509620963098109BC09C1-09C409CD09E209E30A010A020A3C0A410A420A470A480A4B-0A4D0A510A700A710A750A810A820ABC0AC1-0AC50AC70AC80ACD0AE20AE30B010B3C0B3F0B41-0B440B4D0B560B620B630B820BC00BCD0C3E-0C400C46-0C480C4A-0C4D0C550C560C620C630CBC0CBF0CC60CCC0CCD0CE20CE30D41-0D440D4D0D620D630DCA0DD2-0DD40DD60E310E34-0E3A0E47-0E4E0EB10EB4-0EB90EBB0EBC0EC8-0ECD0F180F190F350F370F390F71-0F7E0F80-0F840F860F870F90-0F970F99-0FBC0FC6102D-10301032-10371039103A103D103E10581059105E-10601071-1074108210851086108D109D135F1712-17141732-1734175217531772177317B7-17BD17C617C9-17D317DD180B-180D18A91920-19221927192819321939-193B1A171A181A561A58-1A5E1A601A621A65-1A6C1A73-1A7C1A7F1B00-1B031B341B36-1B3A1B3C1B421B6B-1B731B801B811BA2-1BA51BA81BA91C2C-1C331C361C371CD0-1CD21CD4-1CE01CE2-1CE81CED1DC0-1DE61DFD-1DFF20D0-20DC20E120E5-20F02CEF-2CF12DE0-2DFF302A-302F3099309AA66FA67CA67DA6F0A6F1A802A806A80BA825A826A8C4A8E0-A8F1A926-A92DA947-A951A980-A982A9B3A9B6-A9B9A9BCAA29-AA2EAA31AA32AA35AA36AA43AA4CAAB0AAB2-AAB4AAB7AAB8AABEAABFAAC1ABE5ABE8ABEDFB1EFE00-FE0FFE20-FE26",Mc:"0903093E-09400949-094C094E0982098309BE-09C009C709C809CB09CC09D70A030A3E-0A400A830ABE-0AC00AC90ACB0ACC0B020B030B3E0B400B470B480B4B0B4C0B570BBE0BBF0BC10BC20BC6-0BC80BCA-0BCC0BD70C01-0C030C41-0C440C820C830CBE0CC0-0CC40CC70CC80CCA0CCB0CD50CD60D020D030D3E-0D400D46-0D480D4A-0D4C0D570D820D830DCF-0DD10DD8-0DDF0DF20DF30F3E0F3F0F7F102B102C10311038103B103C105610571062-10641067-106D108310841087-108C108F109A-109C17B617BE-17C517C717C81923-19261929-192B193019311933-193819B0-19C019C819C91A19-1A1B1A551A571A611A631A641A6D-1A721B041B351B3B1B3D-1B411B431B441B821BA11BA61BA71BAA1C24-1C2B1C341C351CE11CF2A823A824A827A880A881A8B4-A8C3A952A953A983A9B4A9B5A9BAA9BBA9BD-A9C0AA2FAA30AA33AA34AA4DAA7BABE3ABE4ABE6ABE7ABE9ABEAABEC",Me:"0488048906DE20DD-20E020E2-20E4A670-A672",N:"0030-003900B200B300B900BC-00BE0660-066906F0-06F907C0-07C90966-096F09E6-09EF09F4-09F90A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BF20C66-0C6F0C78-0C7E0CE6-0CEF0D66-0D750E50-0E590ED0-0ED90F20-0F331040-10491090-10991369-137C16EE-16F017E0-17E917F0-17F91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C5920702074-20792080-20892150-21822185-21892460-249B24EA-24FF2776-27932CFD30073021-30293038-303A3192-31953220-32293251-325F3280-328932B1-32BFA620-A629A6E6-A6EFA830-A835A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nd:"0030-00390660-066906F0-06F907C0-07C90966-096F09E6-09EF0A66-0A6F0AE6-0AEF0B66-0B6F0BE6-0BEF0C66-0C6F0CE6-0CEF0D66-0D6F0E50-0E590ED0-0ED90F20-0F291040-10491090-109917E0-17E91810-18191946-194F19D0-19DA1A80-1A891A90-1A991B50-1B591BB0-1BB91C40-1C491C50-1C59A620-A629A8D0-A8D9A900-A909A9D0-A9D9AA50-AA59ABF0-ABF9FF10-FF19",Nl:"16EE-16F02160-21822185-218830073021-30293038-303AA6E6-A6EF",No:"00B200B300B900BC-00BE09F4-09F90BF0-0BF20C78-0C7E0D70-0D750F2A-0F331369-137C17F0-17F920702074-20792080-20892150-215F21892460-249B24EA-24FF2776-27932CFD3192-31953220-32293251-325F3280-328932B1-32BFA830-A835",P:"0021-00230025-002A002C-002F003A003B003F0040005B-005D005F007B007D00A100AB00B700BB00BF037E0387055A-055F0589058A05BE05C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F3A-0F3D0F850FD0-0FD4104A-104F10FB1361-13681400166D166E169B169C16EB-16ED1735173617D4-17D617D8-17DA1800-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD32010-20272030-20432045-20512053-205E207D207E208D208E2329232A2768-277527C527C627E6-27EF2983-299829D8-29DB29FC29FD2CF9-2CFC2CFE2CFF2E00-2E2E2E302E313001-30033008-30113014-301F3030303D30A030FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFD3EFD3FFE10-FE19FE30-FE52FE54-FE61FE63FE68FE6AFE6BFF01-FF03FF05-FF0AFF0C-FF0FFF1AFF1BFF1FFF20FF3B-FF3DFF3FFF5BFF5DFF5F-FF65",Pd:"002D058A05BE140018062010-20152E172E1A301C303030A0FE31FE32FE58FE63FF0D",Ps:"0028005B007B0F3A0F3C169B201A201E2045207D208D23292768276A276C276E27702772277427C527E627E827EA27EC27EE2983298529872989298B298D298F299129932995299729D829DA29FC2E222E242E262E283008300A300C300E3010301430163018301A301DFD3EFE17FE35FE37FE39FE3BFE3DFE3FFE41FE43FE47FE59FE5BFE5DFF08FF3BFF5BFF5FFF62",Pe:"0029005D007D0F3B0F3D169C2046207E208E232A2769276B276D276F27712773277527C627E727E927EB27ED27EF298429862988298A298C298E2990299229942996299829D929DB29FD2E232E252E272E293009300B300D300F3011301530173019301B301E301FFD3FFE18FE36FE38FE3AFE3CFE3EFE40FE42FE44FE48FE5AFE5CFE5EFF09FF3DFF5DFF60FF63",Pi:"00AB2018201B201C201F20392E022E042E092E0C2E1C2E20",Pf:"00BB2019201D203A2E032E052E0A2E0D2E1D2E21",Pc:"005F203F20402054FE33FE34FE4D-FE4FFF3F",
Po:"0021-00230025-0027002A002C002E002F003A003B003F0040005C00A100B700BF037E0387055A-055F058905C005C305C605F305F40609060A060C060D061B061E061F066A-066D06D40700-070D07F7-07F90830-083E0964096509700DF40E4F0E5A0E5B0F04-0F120F850FD0-0FD4104A-104F10FB1361-1368166D166E16EB-16ED1735173617D4-17D617D8-17DA1800-18051807-180A1944194519DE19DF1A1E1A1F1AA0-1AA61AA8-1AAD1B5A-1B601C3B-1C3F1C7E1C7F1CD3201620172020-20272030-2038203B-203E2041-20432047-205120532055-205E2CF9-2CFC2CFE2CFF2E002E012E06-2E082E0B2E0E-2E162E182E192E1B2E1E2E1F2E2A-2E2E2E302E313001-3003303D30FBA4FEA4FFA60D-A60FA673A67EA6F2-A6F7A874-A877A8CEA8CFA8F8-A8FAA92EA92FA95FA9C1-A9CDA9DEA9DFAA5C-AA5FAADEAADFABEBFE10-FE16FE19FE30FE45FE46FE49-FE4CFE50-FE52FE54-FE57FE5F-FE61FE68FE6AFE6BFF01-FF03FF05-FF07FF0AFF0CFF0EFF0FFF1AFF1BFF1FFF20FF3CFF61FF64FF65",S:"0024002B003C-003E005E0060007C007E00A2-00A900AC00AE-00B100B400B600B800D700F702C2-02C502D2-02DF02E5-02EB02ED02EF-02FF03750384038503F604820606-0608060B060E060F06E906FD06FE07F609F209F309FA09FB0AF10B700BF3-0BFA0C7F0CF10CF20D790E3F0F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-139917DB194019E0-19FF1B61-1B6A1B74-1B7C1FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE20442052207A-207C208A-208C20A0-20B8210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B2140-2144214A-214D214F2190-2328232B-23E82400-24262440-244A249C-24E92500-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE27C0-27C427C7-27CA27CC27D0-27E527F0-29822999-29D729DC-29FB29FE-2B4C2B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F309B309C319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A700-A716A720A721A789A78AA828-A82BA836-A839AA77-AA79FB29FDFCFDFDFE62FE64-FE66FE69FF04FF0BFF1C-FF1EFF3EFF40FF5CFF5EFFE0-FFE6FFE8-FFEEFFFCFFFD",Sm:"002B003C-003E007C007E00AC00B100D700F703F60606-060820442052207A-207C208A-208C2140-2144214B2190-2194219A219B21A021A321A621AE21CE21CF21D221D421F4-22FF2308-230B23202321237C239B-23B323DC-23E125B725C125F8-25FF266F27C0-27C427C7-27CA27CC27D0-27E527F0-27FF2900-29822999-29D729DC-29FB29FE-2AFF2B30-2B442B47-2B4CFB29FE62FE64-FE66FF0BFF1C-FF1EFF5CFF5EFFE2FFE9-FFEC",Sc:"002400A2-00A5060B09F209F309FB0AF10BF90E3F17DB20A0-20B8A838FDFCFE69FF04FFE0FFE1FFE5FFE6",Sk:"005E006000A800AF00B400B802C2-02C502D2-02DF02E5-02EB02ED02EF-02FF0375038403851FBD1FBF-1FC11FCD-1FCF1FDD-1FDF1FED-1FEF1FFD1FFE309B309CA700-A716A720A721A789A78AFF3EFF40FFE3",So:"00A600A700A900AE00B000B60482060E060F06E906FD06FE07F609FA0B700BF3-0BF80BFA0C7F0CF10CF20D790F01-0F030F13-0F170F1A-0F1F0F340F360F380FBE-0FC50FC7-0FCC0FCE0FCF0FD5-0FD8109E109F13601390-1399194019E0-19FF1B61-1B6A1B74-1B7C210021012103-21062108210921142116-2118211E-2123212521272129212E213A213B214A214C214D214F2195-2199219C-219F21A121A221A421A521A7-21AD21AF-21CD21D021D121D321D5-21F32300-2307230C-231F2322-2328232B-237B237D-239A23B4-23DB23E2-23E82400-24262440-244A249C-24E92500-25B625B8-25C025C2-25F72600-266E2670-26CD26CF-26E126E326E8-26FF2701-27042706-2709270C-27272729-274B274D274F-27522756-275E2761-276727942798-27AF27B1-27BE2800-28FF2B00-2B2F2B452B462B50-2B592CE5-2CEA2E80-2E992E9B-2EF32F00-2FD52FF0-2FFB300430123013302030363037303E303F319031913196-319F31C0-31E33200-321E322A-32503260-327F328A-32B032C0-32FE3300-33FF4DC0-4DFFA490-A4C6A828-A82BA836A837A839AA77-AA79FDFDFFE4FFE8FFEDFFEEFFFCFFFD",Z:"002000A01680180E2000-200A20282029202F205F3000",Zs:"002000A01680180E2000-200A202F205F3000",Zl:"2028",Zp:"2029",C:"0000-001F007F-009F00AD03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-0605061C061D0620065F06DD070E070F074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17B417B517DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF200B-200F202A-202E2060-206F20722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-F8FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFD-FF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFFBFFFEFFFF",Cc:"0000-001F007F-009F",Cf:"00AD0600-060306DD070F17B417B5200B-200F202A-202E2060-2064206A-206FFEFFFFF9-FFFB",Co:"E000-F8FF",Cs:"D800-DFFF",Cn:"03780379037F-0383038B038D03A20526-05300557055805600588058B-059005C8-05CF05EB-05EF05F5-05FF06040605061C061D0620065F070E074B074C07B2-07BF07FB-07FF082E082F083F-08FF093A093B094F095609570973-097809800984098D098E0991099209A909B109B3-09B509BA09BB09C509C609C909CA09CF-09D609D8-09DB09DE09E409E509FC-0A000A040A0B-0A0E0A110A120A290A310A340A370A3A0A3B0A3D0A43-0A460A490A4A0A4E-0A500A52-0A580A5D0A5F-0A650A76-0A800A840A8E0A920AA90AB10AB40ABA0ABB0AC60ACA0ACE0ACF0AD1-0ADF0AE40AE50AF00AF2-0B000B040B0D0B0E0B110B120B290B310B340B3A0B3B0B450B460B490B4A0B4E-0B550B58-0B5B0B5E0B640B650B72-0B810B840B8B-0B8D0B910B96-0B980B9B0B9D0BA0-0BA20BA5-0BA70BAB-0BAD0BBA-0BBD0BC3-0BC50BC90BCE0BCF0BD1-0BD60BD8-0BE50BFB-0C000C040C0D0C110C290C340C3A-0C3C0C450C490C4E-0C540C570C5A-0C5F0C640C650C70-0C770C800C810C840C8D0C910CA90CB40CBA0CBB0CC50CC90CCE-0CD40CD7-0CDD0CDF0CE40CE50CF00CF3-0D010D040D0D0D110D290D3A-0D3C0D450D490D4E-0D560D58-0D5F0D640D650D76-0D780D800D810D840D97-0D990DB20DBC0DBE0DBF0DC7-0DC90DCB-0DCE0DD50DD70DE0-0DF10DF5-0E000E3B-0E3E0E5C-0E800E830E850E860E890E8B0E8C0E8E-0E930E980EA00EA40EA60EA80EA90EAC0EBA0EBE0EBF0EC50EC70ECE0ECF0EDA0EDB0EDE-0EFF0F480F6D-0F700F8C-0F8F0F980FBD0FCD0FD9-0FFF10C6-10CF10FD-10FF1249124E124F12571259125E125F1289128E128F12B112B612B712BF12C112C612C712D7131113161317135B-135E137D-137F139A-139F13F5-13FF169D-169F16F1-16FF170D1715-171F1737-173F1754-175F176D17711774-177F17DE17DF17EA-17EF17FA-17FF180F181A-181F1878-187F18AB-18AF18F6-18FF191D-191F192C-192F193C-193F1941-1943196E196F1975-197F19AC-19AF19CA-19CF19DB-19DD1A1C1A1D1A5F1A7D1A7E1A8A-1A8F1A9A-1A9F1AAE-1AFF1B4C-1B4F1B7D-1B7F1BAB-1BAD1BBA-1BFF1C38-1C3A1C4A-1C4C1C80-1CCF1CF3-1CFF1DE7-1DFC1F161F171F1E1F1F1F461F471F4E1F4F1F581F5A1F5C1F5E1F7E1F7F1FB51FC51FD41FD51FDC1FF01FF11FF51FFF2065-206920722073208F2095-209F20B9-20CF20F1-20FF218A-218F23E9-23FF2427-243F244B-245F26CE26E226E4-26E727002705270A270B2728274C274E2753-2755275F27602795-279727B027BF27CB27CD-27CF2B4D-2B4F2B5A-2BFF2C2F2C5F2CF2-2CF82D26-2D2F2D66-2D6E2D70-2D7F2D97-2D9F2DA72DAF2DB72DBF2DC72DCF2DD72DDF2E32-2E7F2E9A2EF4-2EFF2FD6-2FEF2FFC-2FFF3040309730983100-3104312E-3130318F31B8-31BF31E4-31EF321F32FF4DB6-4DBF9FCC-9FFFA48D-A48FA4C7-A4CFA62C-A63FA660A661A674-A67BA698-A69FA6F8-A6FFA78D-A7FAA82C-A82FA83A-A83FA878-A87FA8C5-A8CDA8DA-A8DFA8FC-A8FFA954-A95EA97D-A97FA9CEA9DA-A9DDA9E0-A9FFAA37-AA3FAA4EAA4FAA5AAA5BAA7C-AA7FAAC3-AADAAAE0-ABBFABEEABEFABFA-ABFFD7A4-D7AFD7C7-D7CAD7FC-D7FFFA2EFA2FFA6EFA6FFADA-FAFFFB07-FB12FB18-FB1CFB37FB3DFB3FFB42FB45FBB2-FBD2FD40-FD4FFD90FD91FDC8-FDEFFDFEFDFFFE1A-FE1FFE27-FE2FFE53FE67FE6C-FE6FFE75FEFDFEFEFF00FFBF-FFC1FFC8FFC9FFD0FFD1FFD8FFD9FFDD-FFDFFFE7FFEF-FFF8FFFEFFFF"})}),define("ace/token_iterator",["require","exports","module"],function(e,t){"use strict";var i=function(e,t,i){this.$session=e,this.$row=t,this.$rowTokens=e.getTokens(t);var n=e.getTokenAt(t,i);this.$tokenIndex=n?n.index:-1};(function(){this.stepBackward=function(){for(this.$tokenIndex-=1;this.$tokenIndex<0;){if(this.$row-=1,this.$row<0)return this.$row=0,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=this.$rowTokens.length-1}return this.$rowTokens[this.$tokenIndex]},this.stepForward=function(){this.$tokenIndex+=1;for(var e;this.$tokenIndex>=this.$rowTokens.length;){if(this.$row+=1,e||(e=this.$session.getLength()),this.$row>=e)return this.$row=e-1,null;this.$rowTokens=this.$session.getTokens(this.$row),this.$tokenIndex=0}return this.$rowTokens[this.$tokenIndex]},this.getCurrentToken=function(){return this.$rowTokens[this.$tokenIndex]},this.getCurrentTokenRow=function(){return this.$row},this.getCurrentTokenColumn=function(){var e=this.$rowTokens,t=this.$tokenIndex,i=e[t].start;if(i!==undefined)return i;for(i=0;t>0;)t-=1,i+=e[t].value.length;return i}}).call(i.prototype),t.TokenIterator=i}),define("ace/mode/text",["require","exports","module","ace/tokenizer","ace/mode/text_highlight_rules","ace/mode/behaviour","ace/unicode","ace/lib/lang","ace/token_iterator","ace/range"],function(e,t){"use strict";var i=e("../tokenizer").Tokenizer,n=e("./text_highlight_rules").TextHighlightRules,s=e("./behaviour").Behaviour,o=e("../unicode"),r=e("../lib/lang"),a=e("../token_iterator").TokenIterator,l=e("../range").Range,h=function(){this.HighlightRules=n,this.$behaviour=new s};(function(){this.tokenRe=new RegExp("^["+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]+","g"),this.nonTokenRe=new RegExp("^(?:[^"+o.packages.L+o.packages.Mn+o.packages.Mc+o.packages.Nd+o.packages.Pc+"\\$_]|\\s])+","g"),this.getTokenizer=function(){return this.$tokenizer||(this.$highlightRules=this.$highlightRules||new this.HighlightRules,this.$tokenizer=new i(this.$highlightRules.getRules())),this.$tokenizer},this.lineCommentStart="",this.blockComment="",this.toggleCommentLines=function(e,t,i,n){function s(e){for(var t=i;t<=n;t++)e(o.getLine(t),t)}var o=t.doc,a=!0,l=!0,h=Infinity,c=t.getTabSize(),u=!1;if(this.lineCommentStart){if(Array.isArray(this.lineCommentStart))var d=this.lineCommentStart.map(r.escapeRegExp).join("|"),g=this.lineCommentStart[0];else var d=r.escapeRegExp(this.lineCommentStart),g=this.lineCommentStart;d=new RegExp("^(\\s*)(?:"+d+") ?"),u=t.getUseSoftTabs();var f=function(e,t){var i=e.match(d);if(i){var n=i[1].length,s=i[0].length;C(e,n,s)||" "!=i[0][s-1]||s--,o.removeInLine(t,n,s)}},m=g+" ",p=function(e,t){a&&!/\S/.test(e)||(C(e,h,h)?o.insertInLine({row:t,column:h},m):o.insertInLine({row:t,column:h},g))},A=function(e){return d.test(e)},C=function(e,t,i){for(var n=0;t--&&" "==e.charAt(t);)n++;if(n%c!=0)return!1;for(var n=0;" "==e.charAt(i++);)n++;return c>2?n%c!=c-1:n%c==0}}else{if(!this.blockComment)return!1;var g=this.blockComment.start,F=this.blockComment.end,d=new RegExp("^(\\s*)(?:"+r.escapeRegExp(g)+")"),v=new RegExp("(?:"+r.escapeRegExp(F)+")\\s*$"),p=function(e,t){A(e,t)||a&&!/\S/.test(e)||(o.insertInLine({row:t,column:e.length},F),o.insertInLine({row:t,column:h},g))},f=function(e,t){var i;(i=e.match(v))&&o.removeInLine(t,e.length-i[0].length,e.length),(i=e.match(d))&&o.removeInLine(t,i[1].length,i[0].length)},A=function(e,i){if(d.test(e))return!0;for(var n=t.getTokens(i),s=0;s<n.length;s++)if("comment"===n[s].type)return!0}}var w=Infinity;s(function(e,t){var i=e.search(/\S/);-1!==i?(i<h&&(h=i),l&&!A(e,t)&&(l=!1)):w>e.length&&(w=e.length)}),h==Infinity&&(h=w,a=!1,l=!1),u&&h%c!=0&&(h=Math.floor(h/c)*c),s(l?f:p)},this.toggleBlockComment=function(e,t,i,n){var s=this.blockComment;if(s){!s.start&&s[0]&&(s=s[0]);var o,r,h=new a(t,n.row,n.column),c=h.getCurrentToken(),u=(t.selection,t.selection.toOrientedRange());if(c&&/comment/.test(c.type)){for(var d,g;c&&/comment/.test(c.type);){var f=c.value.indexOf(s.start);if(-1!=f){var m=h.getCurrentTokenRow(),p=h.getCurrentTokenColumn()+f;d=new l(m,p,m,p+s.start.length);break}c=h.stepBackward()}for(var h=new a(t,n.row,n.column),c=h.getCurrentToken();c&&/comment/.test(c.type);){var f=c.value.indexOf(s.end);if(-1!=f){var m=h.getCurrentTokenRow(),p=h.getCurrentTokenColumn()+f;g=new l(m,p,m,p+s.end.length);break}c=h.stepForward()}g&&t.remove(g),d&&(t.remove(d),o=d.start.row,r=-s.start.length)}else r=s.start.length,o=i.start.row,t.insert(i.end,s.end),t.insert(i.start,s.start);u.start.row==o&&(u.start.column+=r),u.end.row==o&&(u.end.column+=r),t.selection.fromOrientedRange(u)}},this.getNextLineIndent=function(e,t){return this.$getIndent(t)},this.checkOutdent=function(){return!1},this.autoOutdent=function(){},this.$getIndent=function(e){return e.match(/^\s*/)[0]},this.createWorker=function(){return null},this.createModeDelegates=function(e){this.$embeds=[],this.$modes={};for(var t in e)e[t]&&(this.$embeds.push(t),this.$modes[t]=new e[t]);for(var i=["toggleBlockComment","toggleCommentLines","getNextLineIndent","checkOutdent","autoOutdent","transformAction","getCompletions"],t=0;t<i.length;t++)!function(e){var n=i[t],s=e[n];e[i[t]]=function(){return this.$delegator(n,arguments,s)}}(this)},this.$delegator=function(e,t,i){var n=t[0];"string"!=typeof n&&(n=n[0]);for(var s=0;s<this.$embeds.length;s++)if(this.$modes[this.$embeds[s]]){var o=n.split(this.$embeds[s]);if(!o[0]&&o[1]){t[0]=o[1];var r=this.$modes[this.$embeds[s]];return r[e].apply(r,t)}}var a=i.apply(this,t);return i?a:undefined},this.transformAction=function(e,t){if(this.$behaviour){var i=this.$behaviour.getBehaviours();for(var n in i)if(i[n][t]){var s=i[n][t].apply(this,arguments);if(s)return s}}},this.getKeywords=function(e){if(!this.completionKeywords){var t=this.$tokenizer.rules,i=[];for(var n in t)for(var s=t[n],o=0,r=s.length;o<r;o++)if("string"==typeof s[o].token)/keyword|support|storage/.test(s[o].token)&&i.push(s[o].regex);else if("object"==typeof s[o].token)for(var a=0,l=s[o].token.length;a<l;a++)if(/keyword|support|storage/.test(s[o].token[a])){var n=s[o].regex.match(/\(.+?\)/g)[a];i.push(n.substr(1,n.length-2))}this.completionKeywords=i}return e?i.concat(this.$keywordList||[]):this.$keywordList},this.$createKeywordList=function(){return this.$highlightRules||this.getTokenizer(),this.$keywordList=this.$highlightRules.$keywordList||[]},this.getCompletions=function(){return(this.$keywordList||this.$createKeywordList()).map(function(e){return{name:e,value:e,score:0,meta:"keyword"}})},this.$id="ace/mode/text"}).call(h.prototype),t.Mode=h}),define("ace/anchor",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t){"use strict";var i=e("./lib/oop"),n=e("./lib/event_emitter").EventEmitter,s=t.Anchor=function(e,t,i){this.$onChange=this.onChange.bind(this),this.attach(e),void 0===i?this.setPosition(t.row,t.column):this.setPosition(t,i)};(function(){i.implement(this,n),this.getPosition=function(){return this.$clipPositionToDocument(this.row,this.column)},this.getDocument=function(){return this.document},this.$insertRight=!1,this.onChange=function(e){var t=e.data,i=t.range;if((i.start.row!=i.end.row||i.start.row==this.row)&&!(i.start.row>this.row||i.start.row==this.row&&i.start.column>this.column)){var n=this.row,s=this.column,o=i.start,r=i.end;"insertText"===t.action?o.row===n&&o.column<=s?o.column===s&&this.$insertRight||(o.row===r.row?s+=r.column-o.column:(s-=o.column,n+=r.row-o.row)):o.row!==r.row&&o.row<n&&(n+=r.row-o.row):"insertLines"===t.action?o.row===n&&0===s&&this.$insertRight||o.row<=n&&(n+=r.row-o.row):"removeText"===t.action?o.row===n&&o.column<s?s=r.column>=s?o.column:Math.max(0,s-(r.column-o.column)):o.row!==r.row&&o.row<n?(r.row===n&&(s=Math.max(0,s-r.column)+o.column),n-=r.row-o.row):r.row===n&&(n-=r.row-o.row,s=Math.max(0,s-r.column)+o.column):"removeLines"==t.action&&o.row<=n&&(r.row<=n?n-=r.row-o.row:(n=o.row,s=0)),this.setPosition(n,s,!0)}},this.setPosition=function(e,t,i){var n;if(n=i?{row:e,column:t}:this.$clipPositionToDocument(e,t),this.row!=n.row||this.column!=n.column){var s={row:this.row,column:this.column};this.row=n.row,this.column=n.column,this._signal("change",{old:s,value:n})}},this.detach=function(){this.document.removeEventListener("change",this.$onChange)},this.attach=function(e){this.document=e||this.document,this.document.on("change",this.$onChange)},this.$clipPositionToDocument=function(e,t){var i={};return e>=this.document.getLength()?(i.row=Math.max(0,this.document.getLength()-1),i.column=this.document.getLine(i.row).length):e<0?(i.row=0,i.column=0):(i.row=e,i.column=Math.min(this.document.getLine(i.row).length,Math.max(0,t))),t<0&&(i.column=0),i}}).call(s.prototype)}),define("ace/document",["require","exports","module","ace/lib/oop","ace/lib/event_emitter","ace/range","ace/anchor"],function(e,t){"use strict";var i=e("./lib/oop"),n=e("./lib/event_emitter").EventEmitter,s=e("./range").Range,o=e("./anchor").Anchor,r=function(e){this.$lines=[],0===e.length?this.$lines=[""]:Array.isArray(e)?this._insertLines(0,e):this.insert({row:0,column:0},e)};(function(){i.implement(this,n),this.setValue=function(e){var t=this.getLength();this.remove(new s(0,0,t,this.getLine(t-1).length)),this.insert({row:0,column:0},e)},this.getValue=function(){return this.getAllLines().join(this.getNewLineCharacter())},this.createAnchor=function(e,t){return new o(this,e,t)},0==="aaa".split(/a/).length?this.$split=function(e){return e.replace(/\r\n|\r/g,"\n").split("\n")}:this.$split=function(e){return e.split(/\r\n|\r|\n/)},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r\n|\r|\n)/m);this.$autoNewLine=t?t[1]:"\n",this._signal("changeNewLineMode")},this.getNewLineCharacter=function(){switch(this.$newLineMode){case"windows":return"\r\n";case"unix":return"\n";default:return this.$autoNewLine||"\n"}},this.$autoNewLine="",this.$newLineMode="auto",this.setNewLineMode=function(e){this.$newLineMode!==e&&(this.$newLineMode=e,this._signal("changeNewLineMode"))},this.getNewLineMode=function(){return this.$newLineMode},this.isNewLine=function(e){return"\r\n"==e||"\r"==e||"\n"==e},this.getLine=function(e){return this.$lines[e]||""},this.getLines=function(e,t){return this.$lines.slice(e,t+1)},this.getAllLines=function(){return this.getLines(0,this.getLength())},this.getLength=function(){return this.$lines.length},this.getTextRange=function(e){if(e.start.row==e.end.row)return this.getLine(e.start.row).substring(e.start.column,e.end.column);var t=this.getLines(e.start.row,e.end.row);t[0]=(t[0]||"").substring(e.start.column);var i=t.length-1;return e.end.row-e.start.row==i&&(t[i]=t[i].substring(0,e.end.column)),t.join(this.getNewLineCharacter())},this.$clipPosition=function(e){var t=this.getLength();return e.row>=t?(e.row=Math.max(0,t-1),e.column=this.getLine(t-1).length):e.row<0&&(e.row=0),e},this.insert=function(e,t){if(!t||0===t.length)return e;e=this.$clipPosition(e),this.getLength()<=1&&this.$detectNewLine(t);var i=this.$split(t),n=i.splice(0,1)[0],s=0==i.length?null:i.splice(i.length-1,1)[0];return e=this.insertInLine(e,n),null!==s&&(e=this.insertNewLine(e),e=this._insertLines(e.row,i),e=this.insertInLine(e,s||"")),e},this.insertLines=function(e,t){return e>=this.getLength()?this.insert({row:e,column:0},"\n"+t.join("\n")):this._insertLines(Math.max(e,0),t)},this._insertLines=function(e,t){if(0==t.length)return{row:e,column:0};for(;t.length>61440;){var i=this._insertLines(e,t.slice(0,61440));t=t.slice(61440),e=i.row}var n=[e,0];n.push.apply(n,t),this.$lines.splice.apply(this.$lines,n);var o=new s(e,0,e+t.length,0),r={action:"insertLines",range:o,lines:t};return this._signal("change",{data:r}),o.end},this.insertNewLine=function(e){e=this.$clipPosition(e);var t=this.$lines[e.row]||"";this.$lines[e.row]=t.substring(0,e.column),this.$lines.splice(e.row+1,0,t.substring(e.column,t.length));var i={row:e.row+1,column:0},n={action:"insertText",range:s.fromPoints(e,i),text:this.getNewLineCharacter()};return this._signal("change",{data:n}),i},this.insertInLine=function(e,t){if(0==t.length)return e;var i=this.$lines[e.row]||"";this.$lines[e.row]=i.substring(0,e.column)+t+i.substring(e.column);var n={row:e.row,column:e.column+t.length},o={action:"insertText",range:s.fromPoints(e,n),text:t};return this._signal("change",{data:o}),n},this.remove=function(e){if(e instanceof s||(e=s.fromPoints(e.start,e.end)),e.start=this.$clipPosition(e.start),e.end=this.$clipPosition(e.end),e.isEmpty())return e.start;var t=e.start.row,i=e.end.row;if(e.isMultiLine()){var n=0==e.start.column?t:t+1,o=i-1;e.end.column>0&&this.removeInLine(i,0,e.end.column),o>=n&&this._removeLines(n,o),n!=t&&(this.removeInLine(t,e.start.column,this.getLine(t).length),this.removeNewLine(e.start.row))}else this.removeInLine(t,e.start.column,e.end.column);return e.start},this.removeInLine=function(e,t,i){if(t!=i){var n=new s(e,t,e,i),o=this.getLine(e),r=o.substring(t,i),a=o.substring(0,t)+o.substring(i,o.length);this.$lines.splice(e,1,a);var l={action:"removeText",range:n,text:r};return this._signal("change",{data:l}),n.start}},this.removeLines=function(e,t){return e<0||t>=this.getLength()?this.remove(new s(e,0,t+1,0)):this._removeLines(e,t)},this._removeLines=function(e,t){var i=new s(e,0,t+1,0),n=this.$lines.splice(e,t-e+1),o={action:"removeLines",range:i,nl:this.getNewLineCharacter(),lines:n};return this._signal("change",{data:o}),n},this.removeNewLine=function(e){var t=this.getLine(e),i=this.getLine(e+1),n=new s(e,t.length,e+1,0),o=t+i;this.$lines.splice(e,2,o);var r={action:"removeText",range:n,text:this.getNewLineCharacter()};this._signal("change",{data:r})},this.replace=function(e,t){if(e instanceof s||(e=s.fromPoints(e.start,e.end)),0==t.length&&e.isEmpty())return e.start;if(t==this.getTextRange(e))return e.end;if(this.remove(e),t)var i=this.insert(e.start,t);else i=e.start;return i},this.applyDeltas=function(e){for(var t=0;t<e.length;t++){var i=e[t],n=s.fromPoints(i.range.start,i.range.end);"insertLines"==i.action?this.insertLines(n.start.row,i.lines):"insertText"==i.action?this.insert(n.start,i.text):"removeLines"==i.action?this._removeLines(n.start.row,n.end.row-1):"removeText"==i.action&&this.remove(n)}},this.revertDeltas=function(e){for(var t=e.length-1;t>=0;t--){var i=e[t],n=s.fromPoints(i.range.start,i.range.end);"insertLines"==i.action?this._removeLines(n.start.row,n.end.row-1):"insertText"==i.action?this.remove(n):"removeLines"==i.action?this._insertLines(n.start.row,i.lines):"removeText"==i.action&&this.insert(n.start,i.text)}},this.indexToPosition=function(e,t){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,s=t||0,o=i.length;s<o;s++)if((e-=i[s].length+n)<0)return{row:s,column:e+i[s].length+n};return{row:o-1,column:i[o-1].length}},this.positionToIndex=function(e,t){for(var i=this.$lines||this.getAllLines(),n=this.getNewLineCharacter().length,s=0,o=Math.min(e.row,i.length),r=t||0;r<o;++r)s+=i[r].length+n;return s+e.column}}).call(r.prototype),t.Document=r}),define("ace/background_tokenizer",["require","exports","module","ace/lib/oop","ace/lib/event_emitter"],function(e,t){"use strict";var i=e("./lib/oop"),n=e("./lib/event_emitter").EventEmitter,s=function(e){this.running=!1,this.lines=[],this.states=[],this.currentLine=0,this.tokenizer=e;var t=this;this.$worker=function(){if(t.running){for(var e=new Date,i=t.currentLine,n=-1,s=t.doc;t.lines[i];)i++;var o=i,r=s.getLength(),a=0;for(t.running=!1;i<r;){t.$tokenizeRow(i),n=i;do{i++}while(t.lines[i]);if(++a%5==0&&new Date-e>20){t.running=setTimeout(t.$worker,20);break}}t.currentLine=i,o<=n&&t.fireUpdateEvent(o,n)}}};(function(){i.implement(this,n),this.setTokenizer=function(e){this.tokenizer=e,this.lines=[],this.states=[],this.start(0)},this.setDocument=function(e){this.doc=e,this.lines=[],this.states=[],this.stop()},this.fireUpdateEvent=function(e,t){var i={first:e,last:t};this._signal("update",{data:i})},this.start=function(e){this.currentLine=Math.min(e||0,this.currentLine,this.doc.getLength()),this.lines.splice(this.currentLine,this.lines.length),this.states.splice(this.currentLine,this.states.length),this.stop(),this.running=setTimeout(this.$worker,700)},this.scheduleStart=function(){this.running||(this.running=setTimeout(this.$worker,700))},this.$updateOnChange=function(e){var t=e.range,i=t.start.row,n=t.end.row-i;if(0===n)this.lines[i]=null;else if("removeText"==e.action||"removeLines"==e.action)this.lines.splice(i,n+1,null),this.states.splice(i,n+1,null);else{var s=Array(n+1);s.unshift(i,1),this.lines.splice.apply(this.lines,s),this.states.splice.apply(this.states,s)}this.currentLine=Math.min(i,this.currentLine,this.doc.getLength()),this.stop()},this.stop=function(){this.running&&clearTimeout(this.running),this.running=!1},this.getTokens=function(e){return this.lines[e]||this.$tokenizeRow(e)},this.getState=function(e){return this.currentLine==e&&this.$tokenizeRow(e),this.states[e]||"start"},this.$tokenizeRow=function(e){var t=this.doc.getLine(e),i=this.states[e-1],n=this.tokenizer.getLineTokens(t,i,e);return this.states[e]+""!=n.state+""?(this.states[e]=n.state,this.lines[e+1]=null,this.currentLine>e+1&&(this.currentLine=e+1)):this.currentLine==e&&(this.currentLine=e+1),this.lines[e]=n.tokens}}).call(s.prototype),t.BackgroundTokenizer=s}),define("ace/search_highlight",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t){"use strict";var i=e("./lib/lang"),n=(e("./lib/oop"),e("./range").Range),s=function(e,t,i){this.setRegexp(e),this.clazz=t,this.type=i||"text"};(function(){this.MAX_RANGES=500,this.setRegexp=function(e){this.regExp+""!=e+""&&(this.regExp=e,this.cache=[])},this.update=function(e,t,s,o){if(this.regExp)for(var r=o.firstRow,a=o.lastRow,l=r;l<=a;l++){var h=this.cache[l];null==h&&(h=i.getMatchOffsets(s.getLine(l),this.regExp),h.length>this.MAX_RANGES&&(h=h.slice(0,this.MAX_RANGES)),h=h.map(function(e){return new n(l,e.offset,l,e.offset+e.length)}),this.cache[l]=h.length?h:"");for(var c=h.length;c--;)t.drawSingleLineMarker(e,h[c].toScreenRange(s),this.clazz,o)}}}).call(s.prototype),t.SearchHighlight=s}),define("ace/edit_session/fold_line",["require","exports","module","ace/range"],function(e,t){"use strict";function i(e,t){this.foldData=e,Array.isArray(t)?this.folds=t:t=this.folds=[t];var i=t[t.length-1];this.range=new n(t[0].start.row,t[0].start.column,i.end.row,i.end.column),this.start=this.range.start,this.end=this.range.end,this.folds.forEach(function(e){e.setFoldLine(this)},this)}var n=e("../range").Range;(function(){this.shiftRow=function(e){this.start.row+=e,this.end.row+=e,this.folds.forEach(function(t){t.start.row+=e,t.end.row+=e})},this.addFold=function(e){if(e.sameRow){if(e.start.row<this.startRow||e.endRow>this.endRow)throw new Error("Can't add a fold to this FoldLine as it has no connection");this.folds.push(e),this.folds.sort(function(e,t){return-e.range.compareEnd(t.start.row,t.start.column)}),this.range.compareEnd(e.start.row,e.start.column)>0?(this.end.row=e.end.row,this.end.column=e.end.column):this.range.compareStart(e.end.row,e.end.column)<0&&(this.start.row=e.start.row,this.start.column=e.start.column)}else if(e.start.row==this.end.row)this.folds.push(e),this.end.row=e.end.row,this.end.column=e.end.column;else{if(e.end.row!=this.start.row)throw new Error("Trying to add fold to FoldRow that doesn't have a matching row");this.folds.unshift(e),this.start.row=e.start.row,this.start.column=e.start.column}e.foldLine=this},this.containsRow=function(e){return e>=this.start.row&&e<=this.end.row},this.walk=function(e,t,i){var n,s,o,r=0,a=this.folds,l=!0;null==t&&(t=this.end.row,i=this.end.column);for(var h=0;h<a.length;h++){if(n=a[h],-1==(s=n.range.compareStart(t,i)))return void e(null,t,i,r,l);if(o=e(null,n.start.row,n.start.column,r,l),(o=!o&&e(n.placeholder,n.start.row,n.start.column,r))||0===s)return;l=!n.sameRow,r=n.end.column}e(null,t,i,r,l)},this.getNextFoldTo=function(e,t){for(var i,n,s=0;s<this.folds.length;s++){if(i=this.folds[s],-1==(n=i.range.compareEnd(e,t)))return{fold:i,kind:"after"};if(0===n)return{fold:i,kind:"inside"}}return null},this.addRemoveChars=function(e,t,i){var n,s,o=this.getNextFoldTo(e,t);if(o)if(n=o.fold,"inside"==o.kind&&n.start.column!=t&&n.start.row!=e)window.console&&window.console.log(e,t,n);else if(n.start.row==e){s=this.folds;var r=s.indexOf(n);for(0===r&&(this.start.column+=i),r;r<s.length;r++){if(n=s[r],n.start.column+=i,!n.sameRow)return;n.end.column+=i}this.end.column+=i}},this.split=function(e,t){var n=this.getNextFoldTo(e,t);if(!n||"inside"==n.kind)return null;var s=n.fold,o=this.folds,r=this.foldData,a=o.indexOf(s),l=o[a-1];this.end.row=l.end.row,this.end.column=l.end.column,o=o.splice(a,o.length-a);var h=new i(r,o);return r.splice(r.indexOf(this)+1,0,h),h},this.merge=function(e){for(var t=e.folds,i=0;i<t.length;i++)this.addFold(t[i]);var n=this.foldData;n.splice(n.indexOf(e),1)},this.toString=function(){var e=[this.range.toString()+": ["];return this.folds.forEach(function(t){e.push("  "+t.toString())}),e.push("]"),e.join("\n")},this.idxToPosition=function(e){for(var t=0,i=0;i<this.folds.length;i++){var n=this.folds[i];if((e-=n.start.column-t)<0)return{row:n.start.row,column:n.start.column+e};if((e-=n.placeholder.length)<0)return n.start;t=n.end.column}return{row:this.end.row,column:this.end.column+e}}}).call(i.prototype),t.FoldLine=i}),define("ace/range_list",["require","exports","module","ace/range"],function(e,t){"use strict";var i=e("./range").Range,n=i.comparePoints,s=function(){this.ranges=[]};(function(){this.comparePoints=n,this.pointIndex=function(e,t,i){for(var s=this.ranges,o=i||0;o<s.length;o++){var r=s[o],a=n(e,r.end);if(!(a>0)){var l=n(e,r.start);return 0===a?t&&0!==l?-o-2:o:l>0||0===l&&!t?o:-o-1}}return-o-1},this.add=function(e){var t=!e.isEmpty(),i=this.pointIndex(e.start,t);i<0&&(i=-i-1);var n=this.pointIndex(e.end,t,i);return n<0?n=-n-1:n++,this.ranges.splice(i,n-i,e)},this.addList=function(e){for(var t=[],i=e.length;i--;)t.push.call(t,this.add(e[i]));return t},this.substractPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges.splice(t,1)},this.merge=function(){var e=[],t=this.ranges;t=t.sort(function(e,t){return n(e.start,t.start)});for(var i,s=t[0],o=1;o<t.length;o++){i=s,s=t[o];var r=n(i.end,s.start);r<0||(0!=r||i.isEmpty()||s.isEmpty())&&(n(i.end,s.end)<0&&(i.end.row=s.end.row,i.end.column=s.end.column),t.splice(o,1),e.push(s),s=i,o--)}return this.ranges=t,e},this.contains=function(e,t){return this.pointIndex({row:e,column:t})>=0},this.containsPoint=function(e){return this.pointIndex(e)>=0},this.rangeAtPoint=function(e){var t=this.pointIndex(e);if(t>=0)return this.ranges[t]},this.clipRows=function(e,t){var i=this.ranges;if(i[0].start.row>t||i[i.length-1].start.row<e)return[];var n=this.pointIndex({row:e,column:0});n<0&&(n=-n-1);var s=this.pointIndex({row:t,column:0},n);s<0&&(s=-s-1);for(var o=[],r=n;r<s;r++)o.push(i[r]);return o},this.removeAll=function(){return this.ranges.splice(0,this.ranges.length)},this.attach=function(e){this.session&&this.detach(),this.session=e,this.onChange=this.$onChange.bind(this),this.session.on("change",this.onChange)},this.detach=function(){this.session&&(this.session.removeListener("change",this.onChange),this.session=null)},this.$onChange=function(e){var t=e.data.range;if("i"==e.data.action[0])var i=t.start,n=t.end;else var n=t.start,i=t.end;for(var s=i.row,o=n.row,r=o-s,a=-i.column+n.column,l=this.ranges,h=0,c=l.length;h<c;h++){var u=l[h];if(!(u.end.row<s)){if(u.start.row>s)break;if(u.start.row==s&&u.start.column>=i.column&&(u.start.column==i.column&&this.$insertRight||(u.start.column+=a,u.start.row+=r)),u.end.row==s&&u.end.column>=i.column){if(u.end.column==i.column&&this.$insertRight)continue
;u.end.column==i.column&&a>0&&h<c-1&&u.end.column>u.start.column&&u.end.column==l[h+1].start.column&&(u.end.column-=a),u.end.column+=a,u.end.row+=r}}}if(0!=r&&h<c)for(;h<c;h++){var u=l[h];u.start.row+=r,u.end.row+=r}}}).call(s.prototype),t.RangeList=s}),define("ace/edit_session/fold",["require","exports","module","ace/range","ace/range_list","ace/lib/oop"],function(e,t){"use strict";function i(e,t){e.row-=t.row,0==e.row&&(e.column-=t.column)}function n(e,t){i(e.start,t),i(e.end,t)}function s(e,t){0==e.row&&(e.column+=t.column),e.row+=t.row}function o(e,t){s(e.start,t),s(e.end,t)}var r=(e("../range").Range,e("../range_list").RangeList),a=e("../lib/oop"),l=t.Fold=function(e,t){this.foldLine=null,this.placeholder=t,this.range=e,this.start=e.start,this.end=e.end,this.sameRow=e.start.row==e.end.row,this.subFolds=this.ranges=[]};a.inherits(l,r),function(){this.toString=function(){return'"'+this.placeholder+'" '+this.range.toString()},this.setFoldLine=function(e){this.foldLine=e,this.subFolds.forEach(function(t){t.setFoldLine(e)})},this.clone=function(){var e=this.range.clone(),t=new l(e,this.placeholder);return this.subFolds.forEach(function(e){t.subFolds.push(e.clone())}),t.collapseChildren=this.collapseChildren,t},this.addSubFold=function(e){if(!this.range.isEqual(e)){if(!this.range.containsRange(e))throw new Error("A fold can't intersect already existing fold"+e.range+this.range);n(e,this.start);for(var t=e.start.row,i=e.start.column,s=0,o=-1;s<this.subFolds.length&&1==(o=this.subFolds[s].range.compare(t,i));s++);var r=this.subFolds[s];if(0==o)return r.addSubFold(e);for(var t=e.range.end.row,i=e.range.end.column,a=s,o=-1;a<this.subFolds.length&&1==(o=this.subFolds[a].range.compare(t,i));a++);this.subFolds[a];if(0==o)throw new Error("A fold can't intersect already existing fold"+e.range+this.range);this.subFolds.splice(s,a-s,e);return e.setFoldLine(this.foldLine),e}},this.restoreRange=function(e){return o(e,this.start)}}.call(l.prototype)}),define("ace/edit_session/folding",["require","exports","module","ace/range","ace/edit_session/fold_line","ace/edit_session/fold","ace/token_iterator"],function(e,t){"use strict";function i(){this.getFoldAt=function(e,t,i){var n=this.getFoldLine(e);if(!n)return null;for(var s=n.folds,o=0;o<s.length;o++){var r=s[o];if(r.range.contains(e,t)){if(1==i&&r.range.isEnd(e,t))continue;if(-1==i&&r.range.isStart(e,t))continue;return r}}},this.getFoldsInRange=function(e){var t=e.start,i=e.end,n=this.$foldData,s=[];t.column+=1,i.column-=1;for(var o=0;o<n.length;o++){var r=n[o].range.compareRange(e);if(2!=r){if(-2==r)break;for(var a=n[o].folds,l=0;l<a.length;l++){var h=a[l];if(-2==(r=h.range.compareRange(e)))break;if(2!=r){if(42==r)break;s.push(h)}}}}return t.column-=1,i.column+=1,s},this.getFoldsInRangeList=function(e){if(Array.isArray(e)){var t=[];e.forEach(function(e){t=t.concat(this.getFoldsInRange(e))},this)}else var t=this.getFoldsInRange(e);return t},this.getAllFolds=function(){for(var e=[],t=this.$foldData,i=0;i<t.length;i++)for(var n=0;n<t[i].folds.length;n++)e.push(t[i].folds[n]);return e},this.getFoldStringAt=function(e,t,i,n){if(!(n=n||this.getFoldLine(e)))return null;for(var s,o,r={end:{column:0}},a=0;a<n.folds.length;a++){o=n.folds[a];var l=o.range.compareEnd(e,t);if(-1==l){s=this.getLine(o.start.row).substring(r.end.column,o.start.column);break}if(0===l)return null;r=o}return s||(s=this.getLine(o.start.row).substring(r.end.column)),-1==i?s.substring(0,t-r.end.column):1==i?s.substring(t-r.end.column):s},this.getFoldLine=function(e,t){var i=this.$foldData,n=0;for(t&&(n=i.indexOf(t)),-1==n&&(n=0),n;n<i.length;n++){var s=i[n];if(s.start.row<=e&&s.end.row>=e)return s;if(s.end.row>e)return null}return null},this.getNextFoldLine=function(e,t){var i=this.$foldData,n=0;for(t&&(n=i.indexOf(t)),-1==n&&(n=0),n;n<i.length;n++){var s=i[n];if(s.end.row>=e)return s}return null},this.getFoldedRowCount=function(e,t){for(var i=this.$foldData,n=t-e+1,s=0;s<i.length;s++){var o=i[s],r=o.end.row,a=o.start.row;if(r>=t){a<t&&(a>=e?n-=t-a:n=0);break}r>=e&&(n-=a>=e?r-a:r-e+1)}return n},this.$addFoldLine=function(e){return this.$foldData.push(e),this.$foldData.sort(function(e,t){return e.start.row-t.start.row}),e},this.addFold=function(e,t){var i,n=this.$foldData,r=!1;e instanceof o?i=e:(i=new o(t,e),i.collapseChildren=t.collapseChildren),this.$clipRangeToDocument(i.range);var a=i.start.row,l=i.start.column,h=i.end.row,c=i.end.column;if(!(a<h||a==h&&l<=c-2))throw new Error("The range has to be at least 2 characters width");var u=this.getFoldAt(a,l,1),d=this.getFoldAt(h,c,-1);if(u&&d==u)return u.addSubFold(i);u&&!u.range.isStart(a,l)&&this.removeFold(u),d&&!d.range.isEnd(h,c)&&this.removeFold(d);var g=this.getFoldsInRange(i.range);g.length>0&&(this.removeFolds(g),g.forEach(function(e){i.addSubFold(e)}));for(var f=0;f<n.length;f++){var m=n[f];if(h==m.start.row){m.addFold(i),r=!0;break}if(a==m.end.row){if(m.addFold(i),r=!0,!i.sameRow){var p=n[f+1];if(p&&p.start.row==h){m.merge(p);break}}break}if(h<=m.start.row)break}return r||(m=this.$addFoldLine(new s(this.$foldData,i))),this.$useWrapMode?this.$updateWrapData(m.start.row,m.start.row):this.$updateRowLengthCache(m.start.row,m.start.row),this.$modified=!0,this._emit("changeFold",{data:i,action:"add"}),i},this.addFolds=function(e){e.forEach(function(e){this.addFold(e)},this)},this.removeFold=function(e){var t=e.foldLine,i=t.start.row,n=t.end.row,s=this.$foldData,o=t.folds;if(1==o.length)s.splice(s.indexOf(t),1);else if(t.range.isEnd(e.end.row,e.end.column))o.pop(),t.end.row=o[o.length-1].end.row,t.end.column=o[o.length-1].end.column;else if(t.range.isStart(e.start.row,e.start.column))o.shift(),t.start.row=o[0].start.row,t.start.column=o[0].start.column;else if(e.sameRow)o.splice(o.indexOf(e),1);else{var r=t.split(e.start.row,e.start.column);o=r.folds,o.shift(),r.start.row=o[0].start.row,r.start.column=o[0].start.column}this.$updating||(this.$useWrapMode?this.$updateWrapData(i,n):this.$updateRowLengthCache(i,n)),this.$modified=!0,this._emit("changeFold",{data:e,action:"remove"})},this.removeFolds=function(e){for(var t=[],i=0;i<e.length;i++)t.push(e[i]);t.forEach(function(e){this.removeFold(e)},this),this.$modified=!0},this.expandFold=function(e){this.removeFold(e),e.subFolds.forEach(function(t){e.restoreRange(t),this.addFold(t)},this),e.collapseChildren>0&&this.foldAll(e.start.row+1,e.end.row,e.collapseChildren-1),e.subFolds=[]},this.expandFolds=function(e){e.forEach(function(e){this.expandFold(e)},this)},this.unfold=function(e,t){var i,s;if(null==e?(i=new n(0,0,this.getLength(),0),t=!0):i="number"==typeof e?new n(e,0,e,this.getLine(e).length):"row"in e?n.fromPoints(e,e):e,s=this.getFoldsInRangeList(i),t)this.removeFolds(s);else for(var o=s;o.length;)this.expandFolds(o),o=this.getFoldsInRangeList(i);if(s.length)return s},this.isRowFolded=function(e,t){return!!this.getFoldLine(e,t)},this.getRowFoldEnd=function(e,t){var i=this.getFoldLine(e,t);return i?i.end.row:e},this.getRowFoldStart=function(e,t){var i=this.getFoldLine(e,t);return i?i.start.row:e},this.getFoldDisplayLine=function(e,t,i,n,s){null==n&&(n=e.start.row),null==s&&(s=0),null==t&&(t=e.end.row),null==i&&(i=this.getLine(t).length);var o=this.doc,r="";return e.walk(function(e,t,i,a){if(!(t<n)){if(t==n){if(i<s)return;a=Math.max(s,a)}r+=null!=e?e:o.getLine(t).substring(a,i)}},t,i),r},this.getDisplayLine=function(e,t,i,n){var s=this.getFoldLine(e);if(s)return this.getFoldDisplayLine(s,e,t,i,n);var o;return o=this.doc.getLine(e),o.substring(n||0,t||o.length)},this.$cloneFoldData=function(){var e=[];return e=this.$foldData.map(function(t){var i=t.folds.map(function(e){return e.clone()});return new s(e,i)})},this.toggleFold=function(e){var t,i,n=this.selection,s=n.getRange();if(s.isEmpty()){var o=s.start;if(t=this.getFoldAt(o.row,o.column))return void this.expandFold(t);(i=this.findMatchingBracket(o))?1==s.comparePoint(i)?s.end=i:(s.start=i,s.start.column++,s.end.column--):(i=this.findMatchingBracket({row:o.row,column:o.column+1}))?(1==s.comparePoint(i)?s.end=i:s.start=i,s.start.column++):s=this.getCommentFoldRange(o.row,o.column)||s}else{var r=this.getFoldsInRange(s);if(e&&r.length)return void this.expandFolds(r);1==r.length&&(t=r[0])}if(t||(t=this.getFoldAt(s.start.row,s.start.column)),t&&t.range.toString()==s.toString())return void this.expandFold(t);var a="...";if(!s.isMultiLine()){if(a=this.getTextRange(s),a.length<4)return;a=a.trim().substring(0,2)+".."}this.addFold(a,s)},this.getCommentFoldRange=function(e,t,i){var s=new r(this,e,t),o=s.getCurrentToken();if(o&&/^comment|string/.test(o.type)){var a=new n,l=new RegExp(o.type.replace(/\..*/,"\\."));if(1!=i){do{o=s.stepBackward()}while(o&&l.test(o.type));s.stepForward()}if(a.start.row=s.getCurrentTokenRow(),a.start.column=s.getCurrentTokenColumn()+2,s=new r(this,e,t),-1!=i){do{o=s.stepForward()}while(o&&l.test(o.type));o=s.stepBackward()}else o=s.getCurrentToken();return a.end.row=s.getCurrentTokenRow(),a.end.column=s.getCurrentTokenColumn()+o.value.length-2,a}},this.foldAll=function(e,t,i){i==undefined&&(i=1e5);var n=this.foldWidgets;if(n){t=t||this.getLength(),e=e||0;for(var s=e;s<t;s++)if(null==n[s]&&(n[s]=this.getFoldWidget(s)),"start"==n[s]){var o=this.getFoldWidgetRange(s);if(o&&o.isMultiLine()&&o.end.row<=t&&o.start.row>=e){s=o.end.row;try{var r=this.addFold("...",o);r&&(r.collapseChildren=i)}catch(e){}}}}},this.$foldStyles={manual:1,markbegin:1,markbeginend:1},this.$foldStyle="markbegin",this.setFoldStyle=function(e){if(!this.$foldStyles[e])throw new Error("invalid fold style: "+e+"["+Object.keys(this.$foldStyles).join(", ")+"]");if(this.$foldStyle!=e){this.$foldStyle=e,"manual"==e&&this.unfold();var t=this.$foldMode;this.$setFolding(null),this.$setFolding(t)}},this.$setFolding=function(e){if(this.$foldMode!=e){if(this.$foldMode=e,this.removeListener("change",this.$updateFoldWidgets),this._emit("changeAnnotation"),!e||"manual"==this.$foldStyle)return void(this.foldWidgets=null);this.foldWidgets=[],this.getFoldWidget=e.getFoldWidget.bind(e,this,this.$foldStyle),this.getFoldWidgetRange=e.getFoldWidgetRange.bind(e,this,this.$foldStyle),this.$updateFoldWidgets=this.updateFoldWidgets.bind(this),this.on("change",this.$updateFoldWidgets)}},this.getParentFoldRangeData=function(e,t){var i=this.foldWidgets;if(!i||t&&i[e])return{};for(var n,s=e-1;s>=0;){var o=i[s];if(null==o&&(o=i[s]=this.getFoldWidget(s)),"start"==o){var r=this.getFoldWidgetRange(s);if(n||(n=r),r&&r.end.row>=e)break}s--}return{range:-1!==s&&r,firstRange:n}},this.onFoldWidgetClick=function(e,t){t=t.domEvent;var i={children:t.shiftKey,all:t.ctrlKey||t.metaKey,siblings:t.altKey};if(!this.$toggleFoldWidget(e,i)){var n=t.target||t.srcElement;n&&/ace_fold-widget/.test(n.className)&&(n.className+=" ace_invalid")}},this.$toggleFoldWidget=function(e,t){if(this.getFoldWidget){var i=this.getFoldWidget(e),n=this.getLine(e),s="end"===i?-1:1,o=this.getFoldAt(e,-1===s?0:n.length,s);if(o)return void(t.children||t.all?this.removeFold(o):this.expandFold(o));var r=this.getFoldWidgetRange(e,!0);if(r&&!r.isMultiLine()&&(o=this.getFoldAt(r.start.row,r.start.column,1))&&r.isEqual(o.range))return void this.removeFold(o);if(t.siblings){var a=this.getParentFoldRangeData(e);if(a.range)var l=a.range.start.row+1,h=a.range.end.row;this.foldAll(l,h,t.all?1e4:0)}else t.children?(h=r?r.end.row:this.getLength(),this.foldAll(e+1,r.end.row,t.all?1e4:0)):r&&(t.all&&(r.collapseChildren=1e4),this.addFold("...",r));return r}},this.toggleFoldWidget=function(){var e=this.selection.getCursor().row;e=this.getRowFoldStart(e);var t=this.$toggleFoldWidget(e,{});if(!t){var i=this.getParentFoldRangeData(e,!0);if(t=i.range||i.firstRange){e=t.start.row;var n=this.getFoldAt(e,this.getLine(e).length,1);n?this.removeFold(n):this.addFold("...",t)}}},this.updateFoldWidgets=function(e){var t=e.data,i=t.range,n=i.start.row,s=i.end.row-n;if(0===s)this.foldWidgets[n]=null;else if("removeText"==t.action||"removeLines"==t.action)this.foldWidgets.splice(n,s+1,null);else{var o=Array(s+1);o.unshift(n,1),this.foldWidgets.splice.apply(this.foldWidgets,o)}}}var n=e("../range").Range,s=e("./fold_line").FoldLine,o=e("./fold").Fold,r=e("../token_iterator").TokenIterator;t.Folding=i}),define("ace/edit_session/bracket_match",["require","exports","module","ace/token_iterator","ace/range"],function(e,t){"use strict";function i(){this.findMatchingBracket=function(e,t){if(0==e.column)return null;var i=t||this.getLine(e.row).charAt(e.column-1);if(""==i)return null;var n=i.match(/([\(\[\{])|([\)\]\}])/);return n?n[1]?this.$findClosingBracket(n[1],e):this.$findOpeningBracket(n[2],e):null},this.getBracketRange=function(e){var t,i=this.getLine(e.row),n=!0,o=i.charAt(e.column-1),r=o&&o.match(/([\(\[\{])|([\)\]\}])/);if(r||(o=i.charAt(e.column),e={row:e.row,column:e.column+1},r=o&&o.match(/([\(\[\{])|([\)\]\}])/),n=!1),!r)return null;if(r[1]){var a=this.$findClosingBracket(r[1],e);if(!a)return null;t=s.fromPoints(e,a),n||(t.end.column++,t.start.column--),t.cursor=t.end}else{var a=this.$findOpeningBracket(r[2],e);if(!a)return null;t=s.fromPoints(a,e),n||(t.start.column++,t.end.column--),t.cursor=t.start}return t},this.$brackets={")":"(","(":")","]":"[","[":"]","{":"}","}":"{"},this.$findOpeningBracket=function(e,t,i){var s=this.$brackets[e],o=1,r=new n(this,t.row,t.column),a=r.getCurrentToken();if(a||(a=r.stepForward()),a){i||(i=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("rparen",".paren").replace(/\b(?:end|start|begin)\b/,"")+")+"));for(var l=t.column-r.getCurrentTokenColumn()-2,h=a.value;;){for(;l>=0;){var c=h.charAt(l);if(c==s){if(0==(o-=1))return{row:r.getCurrentTokenRow(),column:l+r.getCurrentTokenColumn()}}else c==e&&(o+=1);l-=1}do{a=r.stepBackward()}while(a&&!i.test(a.type));if(null==a)break;h=a.value,l=h.length-1}return null}},this.$findClosingBracket=function(e,t,i){var s=this.$brackets[e],o=1,r=new n(this,t.row,t.column),a=r.getCurrentToken();if(a||(a=r.stepForward()),a){i||(i=new RegExp("(\\.?"+a.type.replace(".","\\.").replace("lparen",".paren").replace(/\b(?:end|start|begin)\b/,"")+")+"));for(var l=t.column-r.getCurrentTokenColumn();;){for(var h=a.value,c=h.length;l<c;){var u=h.charAt(l);if(u==s){if(0==(o-=1))return{row:r.getCurrentTokenRow(),column:l+r.getCurrentTokenColumn()}}else u==e&&(o+=1);l+=1}do{a=r.stepForward()}while(a&&!i.test(a.type));if(null==a)break;l=0}return null}}}var n=e("../token_iterator").TokenIterator,s=e("../range").Range;t.BracketMatch=i}),define("ace/edit_session",["require","exports","module","ace/lib/oop","ace/lib/lang","ace/config","ace/lib/event_emitter","ace/selection","ace/mode/text","ace/range","ace/document","ace/background_tokenizer","ace/search_highlight","ace/edit_session/folding","ace/edit_session/bracket_match"],function(e,t){"use strict";var i=e("./lib/oop"),n=e("./lib/lang"),s=e("./config"),o=e("./lib/event_emitter").EventEmitter,r=e("./selection").Selection,a=e("./mode/text").Mode,l=e("./range").Range,h=e("./document").Document,c=e("./background_tokenizer").BackgroundTokenizer,u=e("./search_highlight").SearchHighlight,d=function(e,t){this.$breakpoints=[],this.$decorations=[],this.$frontMarkers={},this.$backMarkers={},this.$markerId=1,this.$undoSelect=!0,this.$foldData=[],this.$foldData.toString=function(){return this.join("\n")},this.on("changeFold",this.onChangeFold.bind(this)),this.$onChange=this.onChange.bind(this),"object"==typeof e&&e.getLine||(e=new h(e)),this.setDocument(e),this.selection=new r(this),s.resetOptions(this),this.setMode(t),s._signal("session",this)};(function(){function e(e){return!(e<4352)&&(e>=4352&&e<=4447||e>=4515&&e<=4519||e>=4602&&e<=4607||e>=9001&&e<=9002||e>=11904&&e<=11929||e>=11931&&e<=12019||e>=12032&&e<=12245||e>=12272&&e<=12283||e>=12288&&e<=12350||e>=12353&&e<=12438||e>=12441&&e<=12543||e>=12549&&e<=12589||e>=12593&&e<=12686||e>=12688&&e<=12730||e>=12736&&e<=12771||e>=12784&&e<=12830||e>=12832&&e<=12871||e>=12880&&e<=13054||e>=13056&&e<=19903||e>=19968&&e<=42124||e>=42128&&e<=42182||e>=43360&&e<=43388||e>=44032&&e<=55203||e>=55216&&e<=55238||e>=55243&&e<=55291||e>=63744&&e<=64255||e>=65040&&e<=65049||e>=65072&&e<=65106||e>=65108&&e<=65126||e>=65128&&e<=65131||e>=65281&&e<=65376||e>=65504&&e<=65510)}i.implement(this,o),this.setDocument=function(e){this.doc&&this.doc.removeListener("change",this.$onChange),this.doc=e,e.on("change",this.$onChange),this.bgTokenizer&&this.bgTokenizer.setDocument(this.getDocument()),this.resetCaches()},this.getDocument=function(){return this.doc},this.$resetRowCache=function(e){if(!e)return this.$docRowCache=[],void(this.$screenRowCache=[]);var t=this.$docRowCache.length,i=this.$getRowCacheIndex(this.$docRowCache,e)+1;t>i&&(this.$docRowCache.splice(i,t),this.$screenRowCache.splice(i,t))},this.$getRowCacheIndex=function(e,t){for(var i=0,n=e.length-1;i<=n;){var s=i+n>>1,o=e[s];if(t>o)i=s+1;else{if(!(t<o))return s;n=s-1}}return i-1},this.resetCaches=function(){this.$modified=!0,this.$wrapData=[],this.$rowLengthCache=[],this.$resetRowCache(0),this.bgTokenizer&&this.bgTokenizer.start(0)},this.onChangeFold=function(e){var t=e.data;this.$resetRowCache(t.start.row)},this.onChange=function(e){var t=e.data;this.$modified=!0,this.$resetRowCache(t.range.start.row);var i=this.$updateInternalDataOnChange(e);this.$fromUndo||!this.$undoManager||t.ignore||(this.$deltasDoc.push(t),i&&0!=i.length&&this.$deltasFold.push({action:"removeFolds",folds:i}),this.$informUndoManager.schedule()),this.bgTokenizer&&this.bgTokenizer.$updateOnChange(t),this._signal("change",e)},this.setValue=function(e){this.doc.setValue(e),this.selection.moveTo(0,0),this.$resetRowCache(0),this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.setUndoManager(this.$undoManager),this.getUndoManager().reset()},this.getValue=this.toString=function(){return this.doc.getValue()},this.getSelection=function(){return this.selection},this.getState=function(e){return this.bgTokenizer.getState(e)},this.getTokens=function(e){return this.bgTokenizer.getTokens(e)},this.getTokenAt=function(e,t){var i,n=this.bgTokenizer.getTokens(e),s=0;if(null==t)o=n.length-1,s=this.getLine(e).length;else for(var o=0;o<n.length&&!((s+=n[o].value.length)>=t);o++);return(i=n[o])?(i.index=o,i.start=s-i.value.length,i):null},this.setUndoManager=function(e){if(this.$undoManager=e,this.$deltas=[],this.$deltasDoc=[],this.$deltasFold=[],this.$informUndoManager&&this.$informUndoManager.cancel(),e){var t=this;this.$syncInformUndoManager=function(){t.$informUndoManager.cancel(),t.$deltasFold.length&&(t.$deltas.push({group:"fold",deltas:t.$deltasFold}),t.$deltasFold=[]),t.$deltasDoc.length&&(t.$deltas.push({group:"doc",deltas:t.$deltasDoc}),t.$deltasDoc=[]),t.$deltas.length>0&&e.execute({action:"aceupdate",args:[t.$deltas,t],merge:t.mergeUndoDeltas}),t.mergeUndoDeltas=!1,t.$deltas=[]},this.$informUndoManager=n.delayedCall(this.$syncInformUndoManager)}},this.markUndoGroup=function(){this.$syncInformUndoManager&&this.$syncInformUndoManager()},this.$defaultUndoManager={undo:function(){},redo:function(){},reset:function(){}},this.getUndoManager=function(){return this.$undoManager||this.$defaultUndoManager},this.getTabString=function(){return this.getUseSoftTabs()?n.stringRepeat(" ",this.getTabSize()):"\t"},this.setUseSoftTabs=function(e){this.setOption("useSoftTabs",e)},this.getUseSoftTabs=function(){return this.$useSoftTabs&&!this.$mode.$indentWithTabs},this.setTabSize=function(e){this.setOption("tabSize",e)},this.getTabSize=function(){return this.$tabSize},this.isTabStop=function(e){return this.$useSoftTabs&&e.column%this.$tabSize==0},this.$overwrite=!1,this.setOverwrite=function(e){this.setOption("overwrite",e)},this.getOverwrite=function(){return this.$overwrite},this.toggleOverwrite=function(){this.setOverwrite(!this.$overwrite)},this.addGutterDecoration=function(e,t){this.$decorations[e]||(this.$decorations[e]=""),this.$decorations[e]+=" "+t,this._signal("changeBreakpoint",{})},this.removeGutterDecoration=function(e,t){this.$decorations[e]=(this.$decorations[e]||"").replace(" "+t,""),this._signal("changeBreakpoint",{})},this.getBreakpoints=function(){return this.$breakpoints},this.setBreakpoints=function(e){this.$breakpoints=[];for(var t=0;t<e.length;t++)this.$breakpoints[e[t]]="ace_breakpoint";this._signal("changeBreakpoint",{})},this.clearBreakpoints=function(){this.$breakpoints=[],this._signal("changeBreakpoint",{})},this.setBreakpoint=function(e,t){t===undefined&&(t="ace_breakpoint"),t?this.$breakpoints[e]=t:delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.clearBreakpoint=function(e){delete this.$breakpoints[e],this._signal("changeBreakpoint",{})},this.addMarker=function(e,t,i,n){var s=this.$markerId++,o={range:e,type:i||"line",renderer:"function"==typeof i?i:null,clazz:t,inFront:!!n,id:s};return n?(this.$frontMarkers[s]=o,this._signal("changeFrontMarker")):(this.$backMarkers[s]=o,this._signal("changeBackMarker")),s},this.addDynamicMarker=function(e,t){if(e.update){var i=this.$markerId++;return e.id=i,e.inFront=!!t,t?(this.$frontMarkers[i]=e,this._signal("changeFrontMarker")):(this.$backMarkers[i]=e,this._signal("changeBackMarker")),e}},this.removeMarker=function(e){var t=this.$frontMarkers[e]||this.$backMarkers[e];if(t){var i=t.inFront?this.$frontMarkers:this.$backMarkers;t&&(delete i[e],this._signal(t.inFront?"changeFrontMarker":"changeBackMarker"))}},this.getMarkers=function(e){return e?this.$frontMarkers:this.$backMarkers},this.highlight=function(e){if(!this.$searchHighlight){var t=new u(null,"ace_selected-word","text");this.$searchHighlight=this.addDynamicMarker(t)}this.$searchHighlight.setRegexp(e)},this.highlightLines=function(e,t,i,n){"number"!=typeof t&&(i=t,t=e),i||(i="ace_step");var s=new l(e,0,t,Infinity);return s.id=this.addMarker(s,i,"fullLine",n),s},this.setAnnotations=function(e){this.$annotations=e,this._signal("changeAnnotation",{})},this.getAnnotations=function(){return this.$annotations||[]},this.clearAnnotations=function(){this.setAnnotations([])},this.$detectNewLine=function(e){var t=e.match(/^.*?(\r?\n)/m);this.$autoNewLine=t?t[1]:"\n"},this.getWordRange=function(e,t){var i=this.getLine(e),n=!1;if(t>0&&(n=!!i.charAt(t-1).match(this.tokenRe)),n||(n=!!i.charAt(t).match(this.tokenRe)),n)var s=this.tokenRe;else if(/^\s+$/.test(i.slice(t-1,t+1)))var s=/\s/;else var s=this.nonTokenRe;var o=t;if(o>0){do{o--}while(o>=0&&i.charAt(o).match(s));o++}for(var r=t;r<i.length&&i.charAt(r).match(s);)r++;return new l(e,o,e,r)},this.getAWordRange=function(e,t){for(var i=this.getWordRange(e,t),n=this.getLine(i.end.row);n.charAt(i.end.column).match(/[ \t]/);)i.end.column+=1;return i},this.setNewLineMode=function(e){this.doc.setNewLineMode(e)},this.getNewLineMode=function(){return this.doc.getNewLineMode()},this.setUseWorker=function(e){this.setOption("useWorker",e)},this.getUseWorker=function(){return this.$useWorker},this.onReloadTokenizer=function(e){var t=e.data;this.bgTokenizer.start(t.first),this._signal("tokenizerUpdate",e)},this.$modes={},this.$mode=null,this.$modeId=null,this.setMode=function(e,t){if(e&&"object"==typeof e){if(e.getTokenizer)return this.$onChangeMode(e);var i=e,n=i.path}else n=e||"ace/mode/text";if(this.$modes["ace/mode/text"]||(this.$modes["ace/mode/text"]=new a),this.$modes[n]&&!i)return this.$onChangeMode(this.$modes[n]),void(t&&t());this.$modeId=n,s.loadModule(["mode",n],function(e){return this.$modeId!==n?t&&t():this.$modes[n]&&!i?this.$onChangeMode(this.$modes[n]):void(e&&e.Mode&&(e=new e.Mode(i),i||(this.$modes[n]=e,e.$id=n),this.$onChangeMode(e),t&&t()))}.bind(this)),this.$mode||this.$onChangeMode(this.$modes["ace/mode/text"],!0)},this.$onChangeMode=function(e,t){if(t||(this.$modeId=e.$id),this.$mode!==e){this.$mode=e,this.$stopWorker(),this.$useWorker&&this.$startWorker();var i=e.getTokenizer();if(i.addEventListener!==undefined){var n=this.onReloadTokenizer.bind(this);i.addEventListener("update",n)}if(this.bgTokenizer)this.bgTokenizer.setTokenizer(i);else{this.bgTokenizer=new c(i);var s=this;this.bgTokenizer.addEventListener("update",function(e){s._signal("tokenizerUpdate",e)})}this.bgTokenizer.setDocument(this.getDocument()),this.tokenRe=e.tokenRe,this.nonTokenRe=e.nonTokenRe,t||(e.attachToSession&&e.attachToSession(this),this.$options.wrapMethod.set.call(this,this.$wrapMethod),this.$setFolding(e.foldingRules),this.bgTokenizer.start(0),this._emit("changeMode"))}},this.$stopWorker=function(){this.$worker&&(this.$worker.terminate(),this.$worker=null)},this.$startWorker=function(){try{this.$worker=this.$mode.createWorker(this)}catch(e){"object"==typeof console&&(console.log("Could not load worker"),console.log(e)),this.$worker=null}},this.getMode=function(){return this.$mode},this.$scrollTop=0,this.setScrollTop=function(e){this.$scrollTop===e||isNaN(e)||(this.$scrollTop=e,this._signal("changeScrollTop",e))},this.getScrollTop=function(){return this.$scrollTop},this.$scrollLeft=0,this.setScrollLeft=function(e){this.$scrollLeft===e||isNaN(e)||(this.$scrollLeft=e,this._signal("changeScrollLeft",e))},this.getScrollLeft=function(){return this.$scrollLeft},this.getScreenWidth=function(){return this.$computeWidth(),this.lineWidgets?Math.max(this.getLineWidgetMaxWidth(),this.screenWidth):this.screenWidth},this.getLineWidgetMaxWidth=function(){if(null!=this.lineWidgetsWidth)return this.lineWidgetsWidth;var e=0;return this.lineWidgets.forEach(function(t){t&&t.screenWidth>e&&(e=t.screenWidth)}),this.lineWidgetWidth=e},this.$computeWidth=function(e){if(this.$modified||e){if(this.$modified=!1,this.$useWrapMode)return this.screenWidth=this.$wrapLimit;for(var t=this.doc.getAllLines(),i=this.$rowLengthCache,n=0,s=0,o=this.$foldData[s],r=o?o.start.row:Infinity,a=t.length,l=0;l<a;l++){if(l>r){if((l=o.end.row+1)>=a)break;o=this.$foldData[s++],r=o?o.start.row:Infinity}null==i[l]&&(i[l]=this.$getStringScreenWidth(t[l])[0]),i[l]>n&&(n=i[l])}this.screenWidth=n}},this.getLine=function(e){return this.doc.getLine(e)},this.getLines=function(e,t){return this.doc.getLines(e,t)},this.getLength=function(){return this.doc.getLength()},this.getTextRange=function(e){return this.doc.getTextRange(e||this.selection.getRange())},this.insert=function(e,t){return this.doc.insert(e,t)},this.remove=function(e){return this.doc.remove(e)},this.undoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var i=null,n=e.length-1;-1!=n;n--){var s=e[n];"doc"==s.group?(this.doc.revertDeltas(s.deltas),i=this.$getUndoSelection(s.deltas,!0,i)):s.deltas.forEach(function(e){this.addFolds(e.folds)},this)}return this.$fromUndo=!1,i&&this.$undoSelect&&!t&&this.selection.setSelectionRange(i),i}},this.redoChanges=function(e,t){if(e.length){this.$fromUndo=!0;for(var i=null,n=0;n<e.length;n++){var s=e[n];"doc"==s.group&&(this.doc.applyDeltas(s.deltas),i=this.$getUndoSelection(s.deltas,!1,i))}return this.$fromUndo=!1,i&&this.$undoSelect&&!t&&this.selection.setSelectionRange(i),i}},this.setUndoSelect=function(e){this.$undoSelect=e},this.$getUndoSelection=function(e,t,i){function n(e){var i="insertText"===e.action||"insertLines"===e.action;return t?!i:i}var s,o,r=e[0];n(r)?s=l.fromPoints(r.range.start,r.range.end):s=l.fromPoints(r.range.start,r.range.start);for(var a=1;a<e.length;a++)r=e[a],n(r)?(o=r.range.start,-1==s.compare(o.row,o.column)&&s.setStart(r.range.start),o=r.range.end,1==s.compare(o.row,o.column)&&s.setEnd(r.range.end),!0):(o=r.range.start,-1==s.compare(o.row,o.column)&&(s=l.fromPoints(r.range.start,r.range.start)),!1);if(null!=i){0===l.comparePoints(i.start,s.start)&&(i.start.column+=s.end.column-s.start.column,i.end.column+=s.end.column-s.start.column);var h=i.compareRange(s);1==h?s.setStart(i.start):-1==h&&s.setEnd(i.end)}return s},this.replace=function(e,t){return this.doc.replace(e,t)},this.moveText=function(e,t,i){var n=this.getTextRange(e),s=this.getFoldsInRange(e),o=l.fromPoints(t,t);if(!i){this.remove(e);var r=e.start.row-e.end.row,a=r?-e.end.column:e.start.column-e.end.column;a&&(o.start.row==e.end.row&&o.start.column>e.end.column&&(o.start.column+=a),o.end.row==e.end.row&&o.end.column>e.end.column&&(o.end.column+=a)),r&&o.start.row>=e.end.row&&(o.start.row+=r,o.end.row+=r)}if(o.end=this.insert(o.start,n),s.length){var h=e.start,c=o.start,r=c.row-h.row,a=c.column-h.column;this.addFolds(s.map(function(e){return e=e.clone(),e.start.row==h.row&&(e.start.column+=a),e.end.row==h.row&&(e.end.column+=a),e.start.row+=r,e.end.row+=r,e}))}return o},this.indentRows=function(e,t,i){i=i.replace(/\t/g,this.getTabString());for(var n=e;n<=t;n++)this.insert({row:n,column:0},i)},this.outdentRows=function(e){for(var t=e.collapseRows(),i=new l(0,0,0,0),n=this.getTabSize(),s=t.start.row;s<=t.end.row;++s){var o=this.getLine(s);i.start.row=s,i.end.row=s;for(var r=0;r<n&&" "==o.charAt(r);++r);r<n&&"\t"==o.charAt(r)?(i.start.column=r,i.end.column=r+1):(i.start.column=0,i.end.column=r),this.remove(i)}},this.$moveLines=function(e,t,i){if(e=this.getRowFoldStart(e),t=this.getRowFoldEnd(t),i<0){var n=this.getRowFoldStart(e+i);if(n<0)return 0;var s=n-e}else if(i>0){var n=this.getRowFoldEnd(t+i);if(n>this.doc.getLength()-1)return 0;var s=n-t}else{e=this.$clipRowToDocument(e),t=this.$clipRowToDocument(t);var s=t-e+1}var o=new l(e,0,t,Number.MAX_VALUE),r=this.getFoldsInRange(o).map(function(e){return e=e.clone(),e.start.row+=s,e.end.row+=s,e}),a=0==i?this.doc.getLines(e,t):this.doc.removeLines(e,t);return this.doc.insertLines(e+s,a),r.length&&this.addFolds(r),s},this.moveLinesUp=function(e,t){return this.$moveLines(e,t,-1)},this.moveLinesDown=function(e,t){return this.$moveLines(e,t,1)},this.duplicateLines=function(e,t){return this.$moveLines(e,t,0)},this.$clipRowToDocument=function(e){return Math.max(0,Math.min(e,this.doc.getLength()-1))},this.$clipColumnToRow=function(e,t){return t<0?0:Math.min(this.doc.getLine(e).length,t)},this.$clipPositionToDocument=function(e,t){if(t=Math.max(0,t),e<0)e=0,t=0;else{var i=this.doc.getLength();e>=i?(e=i-1,t=this.doc.getLine(i-1).length):t=Math.min(this.doc.getLine(e).length,t)}return{row:e,column:t}},this.$clipRangeToDocument=function(e){e.start.row<0?(e.start.row=0,e.start.column=0):e.start.column=this.$clipColumnToRow(e.start.row,e.start.column);var t=this.doc.getLength()-1;return e.end.row>t?(e.end.row=t,e.end.column=this.doc.getLine(t).length):e.end.column=this.$clipColumnToRow(e.end.row,e.end.column),e},this.$wrapLimit=80,this.$useWrapMode=!1,this.$wrapLimitRange={min:null,max:null},this.setUseWrapMode=function(e){if(e!=this.$useWrapMode){if(this.$useWrapMode=e,this.$modified=!0,this.$resetRowCache(0),e){var t=this.getLength();this.$wrapData=Array(t),this.$updateWrapData(0,t-1)}this._signal("changeWrapMode")}},this.getUseWrapMode=function(){return this.$useWrapMode},this.setWrapLimitRange=function(e,t){this.$wrapLimitRange.min===e&&this.$wrapLimitRange.max===t||(this.$wrapLimitRange={min:e,max:t},this.$modified=!0,this._signal("changeWrapMode"))},this.adjustWrapLimit=function(e,t){var i=this.$wrapLimitRange;i.max<0&&(i={min:t,max:t});var n=this.$constrainWrapLimit(e,i.min,i.max);return n!=this.$wrapLimit&&n>1&&(this.$wrapLimit=n,this.$modified=!0,this.$useWrapMode&&(this.$updateWrapData(0,this.getLength()-1),this.$resetRowCache(0),this._signal("changeWrapLimit")),!0)},this.$constrainWrapLimit=function(e,t,i){return t&&(e=Math.max(t,e)),i&&(e=Math.min(i,e)),e},this.getWrapLimit=function(){return this.$wrapLimit},this.setWrapLimit=function(e){this.setWrapLimitRange(e,e)},this.getWrapLimitRange=function(){return{min:this.$wrapLimitRange.min,max:this.$wrapLimitRange.max}},this.$updateInternalDataOnChange=function(e){var t,i=this.$useWrapMode,n=e.data.action,s=e.data.range.start.row,o=e.data.range.end.row,r=e.data.range.start,a=e.data.range.end,l=null;if(-1!=n.indexOf("Lines")?(o="insertLines"==n?s+e.data.lines.length:s,t=e.data.lines?e.data.lines.length:o-s):t=o-s,this.$updating=!0,0!=t)if(-1!=n.indexOf("remove")){this[i?"$wrapData":"$rowLengthCache"].splice(s,t);var h=this.$foldData;l=this.getFoldsInRange(e.data.range),this.removeFolds(l);var c=this.getFoldLine(a.row),u=0;if(c){c.addRemoveChars(a.row,a.column,r.column-a.column),c.shiftRow(-t);var d=this.getFoldLine(s);d&&d!==c&&(d.merge(c),c=d),u=h.indexOf(c)+1}for(u;u<h.length;u++){var c=h[u];c.start.row>=a.row&&c.shiftRow(-t)}o=s}else{var g=Array(t);g.unshift(s,0);var f=i?this.$wrapData:this.$rowLengthCache;f.splice.apply(f,g);var h=this.$foldData,c=this.getFoldLine(s),u=0;if(c){var m=c.range.compareInside(r.row,r.column);0==m?(c=c.split(r.row,r.column))&&(c.shiftRow(t),c.addRemoveChars(o,0,a.column-r.column)):-1==m&&(c.addRemoveChars(s,0,a.column-r.column),c.shiftRow(t)),u=h.indexOf(c)+1}for(u;u<h.length;u++){var c=h[u];c.start.row>=s&&c.shiftRow(t)}}else{t=Math.abs(e.data.range.start.column-e.data.range.end.column),-1!=n.indexOf("remove")&&(l=this.getFoldsInRange(e.data.range),this.removeFolds(l),t=-t);var c=this.getFoldLine(s);c&&c.addRemoveChars(s,r.column,t)}
return i&&this.$wrapData.length!=this.doc.getLength()&&console.error("doc.getLength() and $wrapData.length have to be the same!"),this.$updating=!1,i?this.$updateWrapData(s,o):this.$updateRowLengthCache(s,o),l},this.$updateRowLengthCache=function(e,t){this.$rowLengthCache[e]=null,this.$rowLengthCache[t]=null},this.$updateWrapData=function(e,t){var i,n,s=this.doc.getAllLines(),o=this.getTabSize(),r=this.$wrapData,a=this.$wrapLimit,l=e;for(t=Math.min(t,s.length-1);l<=t;)n=this.getFoldLine(l,n),n?(i=[],n.walk(function(e,t,n,o){var r;if(null!=e){r=this.$getDisplayTokens(e,i.length),r[0]=h;for(var a=1;a<r.length;a++)r[a]=d}else r=this.$getDisplayTokens(s[t].substring(o,n),i.length);i=i.concat(r)}.bind(this),n.end.row,s[n.end.row].length+1),r[n.start.row]=this.$computeWrapSplits(i,a,o),l=n.end.row+1):(i=this.$getDisplayTokens(s[l]),r[l]=this.$computeWrapSplits(i,a,o),l++)};var t=1,r=2,h=3,d=4,g=9,f=10;this.$computeWrapSplits=function(e,t){function i(t){var i=e.slice(o,t),s=i.length;i.join("").replace(/12/g,function(){s-=1}).replace(/2/g,function(){s-=1}),a+=s,n.push(a),o=t}if(0==e.length)return[];for(var n=[],s=e.length,o=0,a=0,l=this.$wrapAsCode;s-o>t;){var c=o+t;if(e[c-1]>=f&&e[c]>=f)i(c);else if(e[c]!=h&&e[c]!=d){for(var u=Math.max(c-(l?10:t-(t>>2)),o-1);c>u&&e[c]<h;)c--;if(l){for(;c>u&&e[c]<h;)c--;for(;c>u&&e[c]==g;)c--}else for(;c>u&&e[c]<f;)c--;c>u?i(++c):(c=o+t,e[c]==r&&c--,i(c))}else{for(c;c!=o-1&&e[c]!=h;c--);if(c>o){i(c);continue}for(c=o+t;c<e.length&&e[c]==d;c++);if(c==e.length)break;i(c)}}return n},this.$getDisplayTokens=function(i,n){var s,o=[];n=n||0;for(var a=0;a<i.length;a++){var l=i.charCodeAt(a);if(9==l){s=this.getScreenTabSize(o.length+n),o.push(11);for(var h=1;h<s;h++)o.push(12)}else 32==l?o.push(f):l>39&&l<48||l>57&&l<64?o.push(g):l>=4352&&e(l)?o.push(t,r):o.push(t)}return o},this.$getStringScreenWidth=function(t,i,n){if(0==i)return[0,0];null==i&&(i=Infinity),n=n||0;var s,o;for(o=0;o<t.length&&(s=t.charCodeAt(o),9==s?n+=this.getScreenTabSize(n):s>=4352&&e(s)?n+=2:n+=1,!(n>i));o++);return[n,o]},this.lineWidgets=null,this.getRowLength=function(e){if(this.lineWidgets)var t=this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0;else t=0;return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.getRowLineCount=function(e){return this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1:1},this.getScreenLastRowColumn=function(e){var t=this.screenToDocumentPosition(e,Number.MAX_VALUE);return this.documentToScreenColumn(t.row,t.column)},this.getDocumentLastRowColumn=function(e,t){var i=this.documentToScreenRow(e,t);return this.getScreenLastRowColumn(i)},this.getDocumentLastRowColumnPosition=function(e,t){var i=this.documentToScreenRow(e,t);return this.screenToDocumentPosition(i,Number.MAX_VALUE/10)},this.getRowSplitData=function(e){return this.$useWrapMode?this.$wrapData[e]:undefined},this.getScreenTabSize=function(e){return this.$tabSize-e%this.$tabSize},this.screenToDocumentRow=function(e,t){return this.screenToDocumentPosition(e,t).row},this.screenToDocumentColumn=function(e,t){return this.screenToDocumentPosition(e,t).column},this.screenToDocumentPosition=function(e,t){if(e<0)return{row:0,column:0};var i,n,s=0,o=0,r=0,a=0,l=this.$screenRowCache,h=this.$getRowCacheIndex(l,e),c=l.length;if(c&&h>=0)var r=l[h],s=this.$docRowCache[h],u=e>l[c-1];else var u=!c;for(var d=this.getLength()-1,g=this.getNextFoldLine(s),f=g?g.start.row:Infinity;r<=e&&(a=this.getRowLength(s),!(r+a>e||s>=d));)r+=a,++s>f&&(s=g.end.row+1,g=this.getNextFoldLine(s,g),f=g?g.start.row:Infinity),u&&(this.$docRowCache.push(s),this.$screenRowCache.push(r));if(g&&g.start.row<=s)i=this.getFoldDisplayLine(g),s=g.start.row;else{if(r+a<=e||s>d)return{row:d,column:this.getLine(d).length};i=this.getLine(s),g=null}if(this.$useWrapMode){var m=this.$wrapData[s];if(m){var p=Math.floor(e-r);n=m[p],p>0&&m.length&&(o=m[p-1]||m[m.length-1],i=i.substring(o))}}return o+=this.$getStringScreenWidth(i,t)[1],this.$useWrapMode&&o>=n&&(o=n-1),g?g.idxToPosition(o):{row:s,column:o}},this.documentToScreenPosition=function(e,t){if(void 0===t)var i=this.$clipPositionToDocument(e.row,e.column);else i=this.$clipPositionToDocument(e,t);e=i.row,t=i.column;var n=0,s=null,o=null;(o=this.getFoldAt(e,t,1))&&(e=o.start.row,t=o.start.column);var r,a=0,l=this.$docRowCache,h=this.$getRowCacheIndex(l,e),c=l.length;if(c&&h>=0)var a=l[h],n=this.$screenRowCache[h],u=e>l[c-1];else var u=!c;for(var d=this.getNextFoldLine(a),g=d?d.start.row:Infinity;a<e;){if(a>=g){if((r=d.end.row+1)>e)break;d=this.getNextFoldLine(r,d),g=d?d.start.row:Infinity}else r=a+1;n+=this.getRowLength(a),a=r,u&&(this.$docRowCache.push(a),this.$screenRowCache.push(n))}var f="";if(d&&a>=g?(f=this.getFoldDisplayLine(d,e,t),s=d.start.row):(f=this.getLine(e).substring(0,t),s=e),this.$useWrapMode){var m=this.$wrapData[s];if(m){for(var p=0;f.length>=m[p];)n++,p++;f=f.substring(m[p-1]||0,f.length)}}return{row:n,column:this.$getStringScreenWidth(f)[0]}},this.documentToScreenColumn=function(e,t){return this.documentToScreenPosition(e,t).column},this.documentToScreenRow=function(e,t){return this.documentToScreenPosition(e,t).row},this.getScreenLength=function(){var e=0,t=null;if(this.$useWrapMode)for(var i=this.$wrapData.length,n=0,s=0,t=this.$foldData[s++],o=t?t.start.row:Infinity;n<i;){var r=this.$wrapData[n];e+=r?r.length+1:1,++n>o&&(n=t.end.row+1,t=this.$foldData[s++],o=t?t.start.row:Infinity)}else{e=this.getLength();for(var a=this.$foldData,s=0;s<a.length;s++)t=a[s],e-=t.end.row-t.start.row}return this.lineWidgets&&(e+=this.$getWidgetScreenLength()),e},this.$setFontMetrics=function(){},this.destroy=function(){this.bgTokenizer&&(this.bgTokenizer.setDocument(null),this.bgTokenizer=null),this.$stopWorker()}}).call(d.prototype),e("./edit_session/folding").Folding.call(d.prototype),e("./edit_session/bracket_match").BracketMatch.call(d.prototype),s.defineOptions(d.prototype,"session",{wrap:{set:function(e){if(e&&"off"!=e?"free"==e?e=!0:"printMargin"==e?e=-1:"string"==typeof e&&(e=parseInt(e,10)||!1):e=!1,this.$wrap!=e){if(e){var t="number"==typeof e?e:null;this.setWrapLimitRange(t,t),this.setUseWrapMode(!0)}else this.setUseWrapMode(!1);this.$wrap=e}},get:function(){return this.getUseWrapMode()?-1==this.$wrap?"printMargin":this.getWrapLimitRange().min?this.$wrap:"free":"off"},handlesSet:!0},wrapMethod:{set:function(e){(e="auto"==e?"text"!=this.$mode.type:"text"!=e)!=this.$wrapAsCode&&(this.$wrapAsCode=e,this.$useWrapMode&&(this.$modified=!0,this.$resetRowCache(0),this.$updateWrapData(0,this.getLength()-1)))},initialValue:"auto"},firstLineNumber:{set:function(){this._signal("changeBreakpoint")},initialValue:1},useWorker:{set:function(e){this.$useWorker=e,this.$stopWorker(),e&&this.$startWorker()},initialValue:!0},useSoftTabs:{initialValue:!0},tabSize:{set:function(e){isNaN(e)||this.$tabSize===e||(this.$modified=!0,this.$rowLengthCache=[],this.$tabSize=e,this._signal("changeTabSize"))},initialValue:4,handlesSet:!0},overwrite:{set:function(){this._signal("changeOverwrite")},initialValue:!1},newLineMode:{set:function(e){this.doc.setNewLineMode(e)},get:function(){return this.doc.getNewLineMode()},handlesSet:!0},mode:{set:function(e){this.setMode(e)},get:function(){return this.$modeId}}}),t.EditSession=d}),define("ace/search",["require","exports","module","ace/lib/lang","ace/lib/oop","ace/range"],function(e,t){"use strict";var i=e("./lib/lang"),n=e("./lib/oop"),s=e("./range").Range,o=function(){this.$options={}};(function(){this.set=function(e){return n.mixin(this.$options,e),this},this.getOptions=function(){return i.copyObject(this.$options)},this.setOptions=function(e){this.$options=e},this.find=function(e){var t=this.$matchIterator(e,this.$options);if(!t)return!1;var i=null;return t.forEach(function(e,t,n){if(e.start)i=e;else{var o=e.offset+(n||0);i=new s(t,o,t,o+e.length)}return!0}),i},this.findAll=function(e){var t=this.$options;if(!t.needle)return[];this.$assembleRegExp(t);var n=t.range,o=n?e.getLines(n.start.row,n.end.row):e.doc.getAllLines(),r=[],a=t.re;if(t.$isMultiLine){var l,h=a.length,c=o.length-h;e:for(var u=a.offset||0;u<=c;u++){for(var d=0;d<h;d++)if(-1==o[u+d].search(a[d]))continue e;var g=o[u],f=o[u+h-1],m=g.length-g.match(a[0])[0].length,p=f.match(a[h-1])[0].length;l&&l.end.row===u&&l.end.column>m||(r.push(l=new s(u,m,u+h-1,p)),h>2&&(u=u+h-2))}}else for(var A=0;A<o.length;A++)for(var C=i.getMatchOffsets(o[A],a),d=0;d<C.length;d++){var F=C[d];r.push(new s(A,F.offset,A,F.offset+F.length))}if(n){for(var v=n.start.column,w=n.start.column,A=0,d=r.length-1;A<d&&r[A].start.column<v&&r[A].start.row==n.start.row;)A++;for(;A<d&&r[d].end.column>w&&r[d].end.row==n.end.row;)d--;for(r=r.slice(A,d+1),A=0,d=r.length;A<d;A++)r[A].start.row+=n.start.row,r[A].end.row+=n.start.row}return r},this.replace=function(e,t){var i=this.$options,n=this.$assembleRegExp(i);if(i.$isMultiLine)return t;if(n){var s=n.exec(e);if(!s||s[0].length!=e.length)return null;if(t=e.replace(n,t),i.preserveCase){t=t.split("");for(var o=Math.min(e.length,e.length);o--;){var r=e[o];r&&r.toLowerCase()!=r?t[o]=t[o].toUpperCase():t[o]=t[o].toLowerCase()}t=t.join("")}return t}},this.$matchIterator=function(e,t){var n=this.$assembleRegExp(t);if(!n)return!1;var o,r=this,a=t.backwards;if(t.$isMultiLine)var l=n.length,h=function(t,i,r){var a=t.search(n[0]);if(-1!=a){for(var h=1;h<l;h++)if(t=e.getLine(i+h),-1==t.search(n[h]))return;var c=t.match(n[l-1])[0].length,u=new s(i,a,i+l-1,c);return 1==n.offset?(u.start.row--,u.start.column=Number.MAX_VALUE):r&&(u.start.column+=r),!!o(u)||void 0}};else if(a)var h=function(e,t,s){for(var r=i.getMatchOffsets(e,n),a=r.length-1;a>=0;a--)if(o(r[a],t,s))return!0};else var h=function(e,t,s){for(var r=i.getMatchOffsets(e,n),a=0;a<r.length;a++)if(o(r[a],t,s))return!0};return{forEach:function(i){o=i,r.$lineIterator(e,t).forEach(h)}}},this.$assembleRegExp=function(e,t){if(e.needle instanceof RegExp)return e.re=e.needle;var n=e.needle;if(!e.needle)return e.re=!1;e.regExp||(n=i.escapeRegExp(n)),e.wholeWord&&(n="\\b"+n+"\\b");var s=e.caseSensitive?"gm":"gmi";if(e.$isMultiLine=!t&&/[\n\r]/.test(n),e.$isMultiLine)return e.re=this.$assembleMultilineRegExp(n,s);try{var o=new RegExp(n,s)}catch(e){o=!1}return e.re=o},this.$assembleMultilineRegExp=function(e,t){for(var i=e.replace(/\r\n|\r|\n/g,"$\n^").split("\n"),n=[],s=0;s<i.length;s++)try{n.push(new RegExp(i[s],t))}catch(e){return!1}return""==i[0]?(n.shift(),n.offset=1):n.offset=0,n},this.$lineIterator=function(e,t){var i=1==t.backwards,n=0!=t.skipCurrent,s=t.range,o=t.start;o||(o=s?s[i?"end":"start"]:e.selection.getRange()),o.start&&(o=o[n!=i?"end":"start"]);var r=s?s.start.row:0,a=s?s.end.row:e.getLength()-1;return{forEach:i?function(i){var n=o.row;if(!i(e.getLine(n).substring(0,o.column),n)){for(n--;n>=r;n--)if(i(e.getLine(n),n))return;if(0!=t.wrap)for(n=a,r=o.row;n>=r;n--)if(i(e.getLine(n),n))return}}:function(i){var n=o.row;if(!i(e.getLine(n).substr(o.column),n,o.column)){for(n+=1;n<=a;n++)if(i(e.getLine(n),n))return;if(0!=t.wrap)for(n=r,a=o.row;n<=a;n++)if(i(e.getLine(n),n))return}}}}}).call(o.prototype),t.Search=o}),define("ace/keyboard/hash_handler",["require","exports","module","ace/lib/keys","ace/lib/useragent"],function(e,t){"use strict";function i(e,t){this.platform=t||(o.isMac?"mac":"win"),this.commands={},this.commandKeyBinding={},this.addCommands(e),this.$singleCommand=!0}function n(e,t){i.call(this,e,t),this.$singleCommand=!1}var s=e("../lib/keys"),o=e("../lib/useragent"),r=s.KEY_MODS;n.prototype=i.prototype,function(){this.addCommand=function(e){this.commands[e.name]&&this.removeCommand(e),this.commands[e.name]=e,e.bindKey&&this._buildKeyHash(e)},this.removeCommand=function(e,t){var i=e&&("string"==typeof e?e:e.name);e=this.commands[i],t||delete this.commands[i];var n=this.commandKeyBinding;for(var s in n){var o=n[s];if(o==e)delete n[s];else if(Array.isArray(o)){var r=o.indexOf(e);-1!=r&&(o.splice(r,1),1==o.length&&(n[s]=o[0]))}}},this.bindKey=function(e,t,i){if("object"==typeof e&&(e=e[this.platform]),e)return"function"==typeof t?this.addCommand({exec:t,bindKey:e,name:t.name||e}):void e.split("|").forEach(function(e){var n="";if(-1!=e.indexOf(" ")){var s=e.split(/\s+/);e=s.pop(),s.forEach(function(e){var t=this.parseKeys(e),i=r[t.hashId]+t.key;n+=(n?" ":"")+i,this._addCommandToBinding(n,"chainKeys")},this),n+=" "}var o=this.parseKeys(e),a=r[o.hashId]+o.key;this._addCommandToBinding(n+a,t,i)},this)},this._addCommandToBinding=function(e,t,i){var n,s=this.commandKeyBinding;t?!s[e]||this.$singleCommand?s[e]=t:(Array.isArray(s[e])?-1!=(n=s[e].indexOf(t))&&s[e].splice(n,1):s[e]=[s[e]],i||t.isDefault?s[e].unshift(t):s[e].push(t)):delete s[e]},this.addCommands=function(e){e&&Object.keys(e).forEach(function(t){var i=e[t];if(i){if("string"==typeof i)return this.bindKey(i,t);"function"==typeof i&&(i={exec:i}),"object"==typeof i&&(i.name||(i.name=t),this.addCommand(i))}},this)},this.removeCommands=function(e){Object.keys(e).forEach(function(t){this.removeCommand(e[t])},this)},this.bindKeys=function(e){Object.keys(e).forEach(function(t){this.bindKey(t,e[t])},this)},this._buildKeyHash=function(e){this.bindKey(e.bindKey,e)},this.parseKeys=function(e){var t=e.toLowerCase().split(/[\-\+]([\-\+])?/).filter(function(e){return e}),i=t.pop(),n=s[i];if(s.FUNCTION_KEYS[n])i=s.FUNCTION_KEYS[n].toLowerCase();else{if(!t.length)return{key:i,hashId:-1};if(1==t.length&&"shift"==t[0])return{key:i.toUpperCase(),hashId:-1}}for(var o=0,r=t.length;r--;){var a=s.KEY_MODS[t[r]];if(null==a)return"undefined"!=typeof console&&console.error("invalid modifier "+t[r]+" in "+e),!1;o|=a}return{key:i,hashId:o}},this.findKeyCommand=function(e,t){var i=r[e]+t;return this.commandKeyBinding[i]},this.handleKeyboard=function(e,t,i,n){var s=r[t]+i,o=this.commandKeyBinding[s];return e.$keyChain&&(e.$keyChain+=" "+s,o=this.commandKeyBinding[e.$keyChain]||o),!o||"chainKeys"!=o&&"chainKeys"!=o[o.length-1]?(e.$keyChain&&n>0&&(e.$keyChain=""),{command:o}):(e.$keyChain=e.$keyChain||s,{command:"null"})}}.call(i.prototype),t.HashHandler=i,t.MultiHashHandler=n}),define("ace/commands/command_manager",["require","exports","module","ace/lib/oop","ace/keyboard/hash_handler","ace/lib/event_emitter"],function(e,t){"use strict";var i=e("../lib/oop"),n=e("../keyboard/hash_handler").MultiHashHandler,s=e("../lib/event_emitter").EventEmitter,o=function(e,t){n.call(this,t,e),this.byName=this.commands,this.setDefaultHandler("exec",function(e){return e.command.exec(e.editor,e.args||{})})};i.inherits(o,n),function(){i.implement(this,s),this.exec=function(e,t,i){if(Array.isArray(e)){for(var n=e.length;n--;)if(this.exec(e[n],t,i))return!0;return!1}if("string"==typeof e&&(e=this.commands[e]),!e)return!1;if(t&&t.$readOnly&&!e.readOnly)return!1;var s={editor:t,command:e,args:i};return s.returnValue=this._emit("exec",s),this._signal("afterExec",s),!1!==s.returnValue},this.toggleRecording=function(e){if(!this.$inReplay)return e&&e._emit("changeStatus"),this.recording?(this.macro.pop(),this.removeEventListener("exec",this.$addCommandToMacro),this.macro.length||(this.macro=this.oldMacro),this.recording=!1):(this.$addCommandToMacro||(this.$addCommandToMacro=function(e){this.macro.push([e.command,e.args])}.bind(this)),this.oldMacro=this.macro,this.macro=[],this.on("exec",this.$addCommandToMacro),this.recording=!0)},this.replay=function(e){if(!this.$inReplay&&this.macro){if(this.recording)return this.toggleRecording(e);try{this.$inReplay=!0,this.macro.forEach(function(t){"string"==typeof t?this.exec(t,e):this.exec(t[0],e,t[1])},this)}finally{this.$inReplay=!1}}},this.trimMacro=function(e){return e.map(function(e){return"string"!=typeof e[0]&&(e[0]=e[0].name),e[1]||(e=e[0]),e})}}.call(o.prototype),t.CommandManager=o}),define("ace/commands/default_commands",["require","exports","module","ace/lib/lang","ace/config","ace/range"],function(e,t){"use strict";function i(e,t){return{win:e,mac:t}}var n=e("../lib/lang"),s=e("../config"),o=e("../range").Range;t.commands=[{name:"showSettingsMenu",bindKey:i("Ctrl-,","Command-,"),exec:function(e){s.loadModule("ace/ext/settings_menu",function(t){t.init(e),e.showSettingsMenu()})},readOnly:!0},{name:"goToNextError",bindKey:i("Alt-E","Ctrl-E"),exec:function(e){s.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,1)})},scrollIntoView:"animate",readOnly:!0},{name:"goToPreviousError",bindKey:i("Alt-Shift-E","Ctrl-Shift-E"),exec:function(e){s.loadModule("ace/ext/error_marker",function(t){t.showErrorMarker(e,-1)})},scrollIntoView:"animate",readOnly:!0},{name:"selectall",bindKey:i("Ctrl-A","Command-A"),exec:function(e){e.selectAll()},readOnly:!0},{name:"centerselection",bindKey:i(null,"Ctrl-L"),exec:function(e){e.centerSelection()},readOnly:!0},{name:"gotoline",bindKey:i("Ctrl-L","Command-L"),exec:function(e){var t=parseInt(prompt("Enter line number:"),10);isNaN(t)||e.gotoLine(t)},readOnly:!0},{name:"fold",bindKey:i("Alt-L|Ctrl-F1","Command-Alt-L|Command-F1"),exec:function(e){e.session.toggleFold(!1)},scrollIntoView:"center",readOnly:!0},{name:"unfold",bindKey:i("Alt-Shift-L|Ctrl-Shift-F1","Command-Alt-Shift-L|Command-Shift-F1"),exec:function(e){e.session.toggleFold(!0)},scrollIntoView:"center",readOnly:!0},{name:"toggleFoldWidget",bindKey:i("F2","F2"),exec:function(e){e.session.toggleFoldWidget()},scrollIntoView:"center",readOnly:!0},{name:"toggleParentFoldWidget",bindKey:i("Alt-F2","Alt-F2"),exec:function(e){e.session.toggleFoldWidget(!0)},scrollIntoView:"center",readOnly:!0},{name:"foldall",bindKey:i("Ctrl-Alt-0","Ctrl-Command-Option-0"),exec:function(e){e.session.foldAll()},scrollIntoView:"center",readOnly:!0},{name:"foldOther",bindKey:i("Alt-0","Command-Option-0"),exec:function(e){e.session.foldAll(),e.session.unfold(e.selection.getAllRanges())},scrollIntoView:"center",readOnly:!0},{name:"unfoldall",bindKey:i("Alt-Shift-0","Command-Option-Shift-0"),exec:function(e){e.session.unfold()},scrollIntoView:"center",readOnly:!0},{name:"findnext",bindKey:i("Ctrl-K","Command-G"),exec:function(e){e.findNext()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"findprevious",bindKey:i("Ctrl-Shift-K","Command-Shift-G"),exec:function(e){e.findPrevious()},multiSelectAction:"forEach",scrollIntoView:"center",readOnly:!0},{name:"selectOrFindNext",bindKey:i("Alt-K","Ctrl-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findNext()},readOnly:!0},{name:"selectOrFindPrevious",bindKey:i("Alt-Shift-K","Ctrl-Shift-G"),exec:function(e){e.selection.isEmpty()?e.selection.selectWord():e.findPrevious()},readOnly:!0},{name:"find",bindKey:i("Ctrl-F","Command-F"),exec:function(e){s.loadModule("ace/ext/searchbox",function(t){t.Search(e)})},readOnly:!0},{name:"overwrite",bindKey:"Insert",exec:function(e){e.toggleOverwrite()},readOnly:!0},{name:"selecttostart",bindKey:i("Ctrl-Shift-Home","Command-Shift-Up"),exec:function(e){e.getSelection().selectFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotostart",bindKey:i("Ctrl-Home","Command-Home|Command-Up"),exec:function(e){e.navigateFileStart()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectup",bindKey:i("Shift-Up","Shift-Up"),exec:function(e){e.getSelection().selectUp()},multiSelectAction:"forEach",readOnly:!0},{name:"golineup",bindKey:i("Up","Up|Ctrl-P"),exec:function(e,t){e.navigateUp(t.times)},multiSelectAction:"forEach",readOnly:!0},{name:"selecttoend",bindKey:i("Ctrl-Shift-End","Command-Shift-Down"),exec:function(e){e.getSelection().selectFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"gotoend",bindKey:i("Ctrl-End","Command-End|Command-Down"),exec:function(e){e.navigateFileEnd()},multiSelectAction:"forEach",readOnly:!0,scrollIntoView:"animate",aceCommandGroup:"fileJump"},{name:"selectdown",bindKey:i("Shift-Down","Shift-Down"),exec:function(e){e.getSelection().selectDown()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"golinedown",bindKey:i("Down","Down|Ctrl-N"),exec:function(e,t){e.navigateDown(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordleft",bindKey:i("Ctrl-Shift-Left","Option-Shift-Left"),exec:function(e){e.getSelection().selectWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordleft",bindKey:i("Ctrl-Left","Option-Left"),exec:function(e){e.navigateWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolinestart",bindKey:i("Alt-Shift-Left","Command-Shift-Left"),exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolinestart",bindKey:i("Alt-Left|Home","Command-Left|Home|Ctrl-A"),exec:function(e){e.navigateLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectleft",bindKey:i("Shift-Left","Shift-Left"),exec:function(e){e.getSelection().selectLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoleft",bindKey:i("Left","Left|Ctrl-B"),exec:function(e,t){e.navigateLeft(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectwordright",bindKey:i("Ctrl-Shift-Right","Option-Shift-Right"),exec:function(e){e.getSelection().selectWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotowordright",bindKey:i("Ctrl-Right","Option-Right"),exec:function(e){e.navigateWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selecttolineend",bindKey:i("Alt-Shift-Right","Command-Shift-Right"),exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotolineend",bindKey:i("Alt-Right|End","Command-Right|End|Ctrl-E"),exec:function(e){e.navigateLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectright",bindKey:i("Shift-Right","Shift-Right"),exec:function(e){e.getSelection().selectRight()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"gotoright",bindKey:i("Right","Right|Ctrl-F"),exec:function(e,t){e.navigateRight(t.times)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectpagedown",bindKey:"Shift-PageDown",exec:function(e){e.selectPageDown()},readOnly:!0},{name:"pagedown",bindKey:i(null,"Option-PageDown"),exec:function(e){e.scrollPageDown()},readOnly:!0},{name:"gotopagedown",bindKey:i("PageDown","PageDown|Ctrl-V"),exec:function(e){e.gotoPageDown()},readOnly:!0},{name:"selectpageup",bindKey:"Shift-PageUp",exec:function(e){e.selectPageUp()},readOnly:!0},{name:"pageup",bindKey:i(null,"Option-PageUp"),exec:function(e){e.scrollPageUp()},readOnly:!0},{name:"gotopageup",bindKey:"PageUp",exec:function(e){e.gotoPageUp()},readOnly:!0},{name:"scrollup",bindKey:i("Ctrl-Up",null),exec:function(e){e.renderer.scrollBy(0,-2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"scrolldown",bindKey:i("Ctrl-Down",null),exec:function(e){e.renderer.scrollBy(0,2*e.renderer.layerConfig.lineHeight)},readOnly:!0},{name:"selectlinestart",bindKey:"Shift-Home",exec:function(e){e.getSelection().selectLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"selectlineend",bindKey:"Shift-End",exec:function(e){e.getSelection().selectLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"togglerecording",bindKey:i("Ctrl-Alt-E","Command-Option-E"),exec:function(e){e.commands.toggleRecording(e)},readOnly:!0},{name:"replaymacro",bindKey:i("Ctrl-Shift-E","Command-Shift-E"),exec:function(e){e.commands.replay(e)},readOnly:!0},{name:"jumptomatching",bindKey:i("Ctrl-P","Ctrl-P"),exec:function(e){e.jumpToMatching()},multiSelectAction:"forEach",readOnly:!0},{name:"selecttomatching",bindKey:i("Ctrl-Shift-P","Ctrl-Shift-P"),exec:function(e){e.jumpToMatching(!0)},multiSelectAction:"forEach",readOnly:!0},{name:"passKeysToBrowser",bindKey:i("null","null"),exec:function(){},passEvent:!0,readOnly:!0},{name:"cut",exec:function(e){var t=e.getSelectionRange();e._emit("cut",t),e.selection.isEmpty()||(e.session.remove(t),e.clearSelection())},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"removeline",bindKey:i("Ctrl-D","Command-D"),exec:function(e){e.removeLines()},scrollIntoView:"cursor",multiSelectAction:"forEachLine"},{name:"duplicateSelection",bindKey:i("Ctrl-Shift-D","Command-Shift-D"),exec:function(e){e.duplicateSelection()},scrollIntoView:"cursor",multiSelectAction:"forEach"},{name:"sortlines",bindKey:i("Ctrl-Alt-S","Command-Alt-S"),exec:function(e){e.sortLines()},scrollIntoView:"selection",multiSelectAction:"forEachLine"},{name:"togglecomment",bindKey:i("Ctrl-/","Command-/"),exec:function(e){e.toggleCommentLines()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"toggleBlockComment",bindKey:i("Ctrl-Shift-/","Command-Shift-/"),exec:function(e){e.toggleBlockComment()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"modifyNumberUp",bindKey:i("Ctrl-Shift-Up","Alt-Shift-Up"),exec:function(e){e.modifyNumber(1)},multiSelectAction:"forEach"},{name:"modifyNumberDown",bindKey:i("Ctrl-Shift-Down","Alt-Shift-Down"),exec:function(e){e.modifyNumber(-1)},multiSelectAction:"forEach"},{name:"replace",bindKey:i("Ctrl-H","Command-Option-F"),exec:function(e){s.loadModule("ace/ext/searchbox",function(t){t.Search(e,!0)})}},{name:"undo",bindKey:i("Ctrl-Z","Command-Z"),exec:function(e){e.undo()}},{name:"redo",bindKey:i("Ctrl-Shift-Z|Ctrl-Y","Command-Shift-Z|Command-Y"),exec:function(e){e.redo()}},{name:"copylinesup",bindKey:i("Alt-Shift-Up","Command-Option-Up"),exec:function(e){e.copyLinesUp()},scrollIntoView:"cursor"},{name:"movelinesup",bindKey:i("Alt-Up","Option-Up"),exec:function(e){e.moveLinesUp()},scrollIntoView:"cursor"},{name:"copylinesdown",bindKey:i("Alt-Shift-Down","Command-Option-Down"),exec:function(e){e.copyLinesDown()},scrollIntoView:"cursor"},{name:"movelinesdown",bindKey:i("Alt-Down","Option-Down"),exec:function(e){e.moveLinesDown()},scrollIntoView:"cursor"},{name:"del",bindKey:i("Delete","Delete|Ctrl-D|Shift-Delete"),exec:function(e){e.remove("right")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"backspace",bindKey:i("Shift-Backspace|Backspace","Ctrl-Backspace|Shift-Backspace|Backspace|Ctrl-H"),exec:function(e){e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"cut_or_delete",bindKey:i("Shift-Delete",null),exec:function(e){if(!e.selection.isEmpty())return!1;e.remove("left")},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolinestart",bindKey:i("Alt-Backspace","Command-Backspace"),exec:function(e){e.removeToLineStart()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removetolineend",bindKey:i("Alt-Delete","Ctrl-K"),exec:function(e){e.removeToLineEnd()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordleft",bindKey:i("Ctrl-Backspace","Alt-Backspace|Ctrl-Alt-Backspace"),exec:function(e){e.removeWordLeft()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"removewordright",bindKey:i("Ctrl-Delete","Alt-Delete"),exec:function(e){e.removeWordRight()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"outdent",bindKey:i("Shift-Tab","Shift-Tab"),exec:function(e){e.blockOutdent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"indent",bindKey:i("Tab","Tab"),exec:function(e){e.indent()},multiSelectAction:"forEach",scrollIntoView:"selectionPart"},{name:"blockoutdent",bindKey:i("Ctrl-[","Ctrl-["),exec:function(e){e.blockOutdent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"blockindent",bindKey:i("Ctrl-]","Ctrl-]"),exec:function(e){e.blockIndent()},multiSelectAction:"forEachLine",scrollIntoView:"selectionPart"},{name:"insertstring",exec:function(e,t){e.insert(t)},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"inserttext",exec:function(e,t){e.insert(n.stringRepeat(t.text||"",t.times||1))},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"splitline",bindKey:i(null,"Ctrl-O"),exec:function(e){e.splitLine()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"transposeletters",bindKey:i("Ctrl-T","Ctrl-T"),exec:function(e){e.transposeLetters()},multiSelectAction:function(e){e.transposeSelections(1)},scrollIntoView:"cursor"},{name:"touppercase",bindKey:i("Ctrl-U","Ctrl-U"),exec:function(e){e.toUpperCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"tolowercase",bindKey:i("Ctrl-Shift-U","Ctrl-Shift-U"),exec:function(e){e.toLowerCase()},multiSelectAction:"forEach",scrollIntoView:"cursor"},{name:"expandtoline",bindKey:i("Ctrl-Shift-L","Command-Shift-L"),exec:function(e){var t=e.selection.getRange();t.start.column=t.end.column=0,t.end.row++,e.selection.setRange(t,!1)},multiSelectAction:"forEach",scrollIntoView:"cursor",readOnly:!0},{name:"joinlines",bindKey:i(null,null),exec:function(e){for(var t=e.selection.isBackwards(),i=t?e.selection.getSelectionLead():e.selection.getSelectionAnchor(),s=t?e.selection.getSelectionAnchor():e.selection.getSelectionLead(),r=e.session.doc.getLine(i.row).length,a=e.session.doc.getTextRange(e.selection.getRange()),l=a.replace(/\n\s*/," ").length,h=e.session.doc.getLine(i.row),c=i.row+1;c<=s.row+1;c++){var u=n.stringTrimLeft(n.stringTrimRight(e.session.doc.getLine(c)));0!==u.length&&(u=" "+u),h+=u}s.row+1<e.session.doc.getLength()-1&&(h+=e.session.doc.getNewLineCharacter()),e.clearSelection(),e.session.doc.replace(new o(i.row,0,s.row+2,0),h),l>0?(e.selection.moveCursorTo(i.row,i.column),e.selection.selectTo(i.row,i.column+l)):(r=e.session.doc.getLine(i.row).length>r?r+1:r,e.selection.moveCursorTo(i.row,r))},multiSelectAction:"forEach",readOnly:!0},{name:"invertSelection",bindKey:i(null,null),exec:function(e){var t=e.session.doc.getLength()-1,i=e.session.doc.getLine(t).length,n=e.selection.rangeList.ranges,s=[];n.length<1&&(n=[e.selection.getRange()]);for(var r=0;r<n.length;r++)r==n.length-1&&(n[r].end.row===t&&n[r].end.column===i||s.push(new o(n[r].end.row,n[r].end.column,t,i))),0===r?0===n[r].start.row&&0===n[r].start.column||s.push(new o(0,0,n[r].start.row,n[r].start.column)):s.push(new o(n[r-1].end.row,n[r-1].end.column,n[r].start.row,n[r].start.column));e.exitMultiSelectMode(),e.clearSelection();for(var r=0;r<s.length;r++)e.selection.addRange(s[r],!1)},readOnly:!0,scrollIntoView:"none"}]}),define("ace/editor",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/keyboard/textinput","ace/mouse/mouse_handler","ace/mouse/fold_handler","ace/keyboard/keybinding","ace/edit_session","ace/search","ace/range","ace/lib/event_emitter","ace/commands/command_manager","ace/commands/default_commands","ace/config","ace/token_iterator"],function(e,t){"use strict";e("./lib/fixoldbrowsers");var i=e("./lib/oop"),n=e("./lib/dom"),s=e("./lib/lang"),o=e("./lib/useragent"),r=e("./keyboard/textinput").TextInput,a=e("./mouse/mouse_handler").MouseHandler,l=e("./mouse/fold_handler").FoldHandler,h=e("./keyboard/keybinding").KeyBinding,c=e("./edit_session").EditSession,u=e("./search").Search,d=e("./range").Range,g=e("./lib/event_emitter").EventEmitter,f=e("./commands/command_manager").CommandManager,m=e("./commands/default_commands").commands,p=e("./config"),A=e("./token_iterator").TokenIterator,C=function(e,t){var i=e.getContainerElement();this.container=i,this.renderer=e,this.commands=new f(o.isMac?"mac":"win",m),this.textInput=new r(e.getTextAreaContainer(),this),this.renderer.textarea=this.textInput.getElement(),this.keyBinding=new h(this),this.$mouseHandler=new a(this),new l(this),this.$blockScrolling=0,this.$search=(new u).set({wrap:!0}),this.$historyTracker=this.$historyTracker.bind(this),this.commands.on("exec",this.$historyTracker),this.$initOperationListeners(),this._$emitInputEvent=s.delayedCall(function(){this._signal("input",{}),this.session&&this.session.bgTokenizer&&this.session.bgTokenizer.scheduleStart()}.bind(this)),this.on("change",function(e,t){t._$emitInputEvent.schedule(31)}),this.setSession(t||new c("")),p.resetOptions(this),p._signal("editor",this)};(function(){i.implement(this,g),this.$initOperationListeners=function(){this.selections=[],this.commands.on("exec",this.startOperation.bind(this),!0),this.commands.on("afterExec",this.endOperation.bind(this),!0),this.$opResetTimer=s.delayedCall(this.endOperation.bind(this)),this.on("change",function(){this.curOp||this.startOperation(),this.curOp.docChanged=!0}.bind(this),!0),this.on("changeSelection",function(){this.curOp||this.startOperation(),this.curOp.selectionChanged=!0}.bind(this),!0)},this.curOp=null,this.prevOp={},this.startOperation=function(e){if(this.curOp){
if(!e||this.curOp.command)return;this.prevOp=this.curOp}e||(this.previousCommand=null,e={}),this.$opResetTimer.schedule(),this.curOp={command:e.command||{},args:e.args,scrollTop:this.renderer.scrollTop}},this.endOperation=function(e){if(this.curOp){if(e&&!1===e.returnValue)return this.curOp=null;var t=this.curOp.command;if(t&&t.scrollIntoView){switch(t.scrollIntoView){case"center":this.renderer.scrollCursorIntoView(null,.5);break;case"animate":case"cursor":this.renderer.scrollCursorIntoView();break;case"selectionPart":var i=this.selection.getRange(),n=this.renderer.layerConfig;(i.start.row>=n.lastRow||i.end.row<=n.firstRow)&&this.renderer.scrollSelectionIntoView(this.selection.anchor,this.selection.lead)}"animate"==t.scrollIntoView&&this.renderer.animateScrolling(this.curOp.scrollTop)}this.prevOp=this.curOp,this.curOp=null}},this.$mergeableCommands=["backspace","del","insertstring"],this.$historyTracker=function(e){if(this.$mergeUndoDeltas){var t=this.prevOp,i=this.$mergeableCommands,n=t.command&&e.command.name==t.command.name;if("insertstring"==e.command.name){var s=e.args;this.mergeNextCommand===undefined&&(this.mergeNextCommand=!0),n=n&&this.mergeNextCommand&&(!/\s/.test(s)||/\s/.test(t.args)),this.mergeNextCommand=!0}else n=n&&-1!==i.indexOf(e.command.name);"always"!=this.$mergeUndoDeltas&&Date.now()-this.sequenceStartTime>2e3&&(n=!1),n?this.session.mergeUndoDeltas=!0:-1!==i.indexOf(e.command.name)&&(this.sequenceStartTime=Date.now())}},this.setKeyboardHandler=function(e,t){if(e&&"string"==typeof e){this.$keybindingId=e;var i=this;p.loadModule(["keybinding",e],function(n){i.$keybindingId==e&&i.keyBinding.setKeyboardHandler(n&&n.handler),t&&t()})}else this.$keybindingId=null,this.keyBinding.setKeyboardHandler(e),t&&t()},this.getKeyboardHandler=function(){return this.keyBinding.getKeyboardHandler()},this.setSession=function(e){if(this.session!=e){var t=this.session;if(t){this.session.removeEventListener("change",this.$onDocumentChange),this.session.removeEventListener("changeMode",this.$onChangeMode),this.session.removeEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.session.removeEventListener("changeTabSize",this.$onChangeTabSize),this.session.removeEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.session.removeEventListener("changeWrapMode",this.$onChangeWrapMode),this.session.removeEventListener("onChangeFold",this.$onChangeFold),this.session.removeEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.session.removeEventListener("changeBackMarker",this.$onChangeBackMarker),this.session.removeEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.session.removeEventListener("changeAnnotation",this.$onChangeAnnotation),this.session.removeEventListener("changeOverwrite",this.$onCursorChange),this.session.removeEventListener("changeScrollTop",this.$onScrollTopChange),this.session.removeEventListener("changeScrollLeft",this.$onScrollLeftChange);var i=this.session.getSelection();i.removeEventListener("changeCursor",this.$onCursorChange),i.removeEventListener("changeSelection",this.$onSelectionChange)}this.session=e,e?(this.$onDocumentChange=this.onDocumentChange.bind(this),e.addEventListener("change",this.$onDocumentChange),this.renderer.setSession(e),this.$onChangeMode=this.onChangeMode.bind(this),e.addEventListener("changeMode",this.$onChangeMode),this.$onTokenizerUpdate=this.onTokenizerUpdate.bind(this),e.addEventListener("tokenizerUpdate",this.$onTokenizerUpdate),this.$onChangeTabSize=this.renderer.onChangeTabSize.bind(this.renderer),e.addEventListener("changeTabSize",this.$onChangeTabSize),this.$onChangeWrapLimit=this.onChangeWrapLimit.bind(this),e.addEventListener("changeWrapLimit",this.$onChangeWrapLimit),this.$onChangeWrapMode=this.onChangeWrapMode.bind(this),e.addEventListener("changeWrapMode",this.$onChangeWrapMode),this.$onChangeFold=this.onChangeFold.bind(this),e.addEventListener("changeFold",this.$onChangeFold),this.$onChangeFrontMarker=this.onChangeFrontMarker.bind(this),this.session.addEventListener("changeFrontMarker",this.$onChangeFrontMarker),this.$onChangeBackMarker=this.onChangeBackMarker.bind(this),this.session.addEventListener("changeBackMarker",this.$onChangeBackMarker),this.$onChangeBreakpoint=this.onChangeBreakpoint.bind(this),this.session.addEventListener("changeBreakpoint",this.$onChangeBreakpoint),this.$onChangeAnnotation=this.onChangeAnnotation.bind(this),this.session.addEventListener("changeAnnotation",this.$onChangeAnnotation),this.$onCursorChange=this.onCursorChange.bind(this),this.session.addEventListener("changeOverwrite",this.$onCursorChange),this.$onScrollTopChange=this.onScrollTopChange.bind(this),this.session.addEventListener("changeScrollTop",this.$onScrollTopChange),this.$onScrollLeftChange=this.onScrollLeftChange.bind(this),this.session.addEventListener("changeScrollLeft",this.$onScrollLeftChange),this.selection=e.getSelection(),this.selection.addEventListener("changeCursor",this.$onCursorChange),this.$onSelectionChange=this.onSelectionChange.bind(this),this.selection.addEventListener("changeSelection",this.$onSelectionChange),this.onChangeMode(),this.$blockScrolling+=1,this.onCursorChange(),this.$blockScrolling-=1,this.onScrollTopChange(),this.onScrollLeftChange(),this.onSelectionChange(),this.onChangeFrontMarker(),this.onChangeBackMarker(),this.onChangeBreakpoint(),this.onChangeAnnotation(),this.session.getUseWrapMode()&&this.renderer.adjustWrapLimit(),this.renderer.updateFull()):(this.selection=null,this.renderer.setSession(e)),this._signal("changeSession",{session:e,oldSession:t}),t&&t._signal("changeEditor",{oldEditor:this}),e&&e._signal("changeEditor",{editor:this})}},this.getSession=function(){return this.session},this.setValue=function(e,t){return this.session.doc.setValue(e),t?1==t?this.navigateFileEnd():-1==t&&this.navigateFileStart():this.selectAll(),e},this.getValue=function(){return this.session.getValue()},this.getSelection=function(){return this.selection},this.resize=function(e){this.renderer.onResize(e)},this.setTheme=function(e,t){this.renderer.setTheme(e,t)},this.getTheme=function(){return this.renderer.getTheme()},this.setStyle=function(e){this.renderer.setStyle(e)},this.unsetStyle=function(e){this.renderer.unsetStyle(e)},this.getFontSize=function(){return this.getOption("fontSize")||n.computedStyle(this.container,"fontSize")},this.setFontSize=function(e){this.setOption("fontSize",e)},this.$highlightBrackets=function(){if(this.session.$bracketHighlight&&(this.session.removeMarker(this.session.$bracketHighlight),this.session.$bracketHighlight=null),!this.$highlightPending){var e=this;this.$highlightPending=!0,setTimeout(function(){e.$highlightPending=!1;var t=e.session;if(t&&t.bgTokenizer){var i=t.findMatchingBracket(e.getCursorPosition());if(i)var n=new d(i.row,i.column,i.row,i.column+1);else if(t.$mode.getMatching)var n=t.$mode.getMatching(e.session);n&&(t.$bracketHighlight=t.addMarker(n,"ace_bracket","text"))}},50)}},this.$highlightTags=function(){if(!this.$highlightTagPending){var e=this;this.$highlightTagPending=!0,setTimeout(function(){e.$highlightTagPending=!1;var t=e.session;if(t&&t.bgTokenizer){var i=e.getCursorPosition(),n=new A(e.session,i.row,i.column),s=n.getCurrentToken();if(!s||-1===s.type.indexOf("tag-name"))return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var o=s.value,r=0,a=n.stepBackward();if("<"==a.value){do{a=s,(s=n.stepForward())&&s.value===o&&-1!==s.type.indexOf("tag-name")&&("<"===a.value?r++:"</"===a.value&&r--)}while(s&&r>=0)}else{do{s=a,a=n.stepBackward(),s&&s.value===o&&-1!==s.type.indexOf("tag-name")&&("<"===a.value?r++:"</"===a.value&&r--)}while(a&&r<=0);n.stepForward()}if(!s)return t.removeMarker(t.$tagHighlight),void(t.$tagHighlight=null);var l=n.getCurrentTokenRow(),h=n.getCurrentTokenColumn(),c=new d(l,h,l,h+s.value.length);t.$tagHighlight&&0!==c.compareRange(t.$backMarkers[t.$tagHighlight].range)&&(t.removeMarker(t.$tagHighlight),t.$tagHighlight=null),c&&!t.$tagHighlight&&(t.$tagHighlight=t.addMarker(c,"ace_bracket","text"))}},50)}},this.focus=function(){var e=this;setTimeout(function(){e.textInput.focus()}),this.textInput.focus()},this.isFocused=function(){return this.textInput.isFocused()},this.blur=function(){this.textInput.blur()},this.onFocus=function(e){this.$isFocused||(this.$isFocused=!0,this.renderer.showCursor(),this.renderer.visualizeFocus(),this._emit("focus",e))},this.onBlur=function(e){this.$isFocused&&(this.$isFocused=!1,this.renderer.hideCursor(),this.renderer.visualizeBlur(),this._emit("blur",e))},this.$cursorChange=function(){this.renderer.updateCursor()},this.onDocumentChange=function(e){var t,i=e.data,n=i.range;t=n.start.row==n.end.row&&"insertLines"!=i.action&&"removeLines"!=i.action?n.end.row:Infinity,this.renderer.updateLines(n.start.row,t,this.session.$useWrapMode),this._signal("change",e),this.$cursorChange(),this.$updateHighlightActiveLine()},this.onTokenizerUpdate=function(e){var t=e.data;this.renderer.updateLines(t.first,t.last)},this.onScrollTopChange=function(){this.renderer.scrollToY(this.session.getScrollTop())},this.onScrollLeftChange=function(){this.renderer.scrollToX(this.session.getScrollLeft())},this.onCursorChange=function(){this.$cursorChange(),this.$blockScrolling||this.renderer.scrollCursorIntoView(),this.$highlightBrackets(),this.$highlightTags(),this.$updateHighlightActiveLine(),this._signal("changeSelection")},this.$updateHighlightActiveLine=function(){var e,t=this.getSession();if(this.$highlightActiveLine&&("line"==this.$selectionStyle&&this.selection.isMultiLine()||(e=this.getCursorPosition()),!this.renderer.$maxLines||1!==this.session.getLength()||this.renderer.$minLines>1||(e=!1)),t.$highlightLineMarker&&!e)t.removeMarker(t.$highlightLineMarker.id),t.$highlightLineMarker=null;else if(!t.$highlightLineMarker&&e){var i=new d(e.row,e.column,e.row,Infinity);i.id=t.addMarker(i,"ace_active-line","screenLine"),t.$highlightLineMarker=i}else e&&(t.$highlightLineMarker.start.row=e.row,t.$highlightLineMarker.end.row=e.row,t.$highlightLineMarker.start.column=e.column,t._signal("changeBackMarker"))},this.onSelectionChange=function(){var e=this.session;if(e.$selectionMarker&&e.removeMarker(e.$selectionMarker),e.$selectionMarker=null,this.selection.isEmpty())this.$updateHighlightActiveLine();else{var t=this.selection.getRange(),i=this.getSelectionStyle();e.$selectionMarker=e.addMarker(t,"ace_selection",i)}var n=this.$highlightSelectedWord&&this.$getSelectionHighLightRegexp();this.session.highlight(n),this._signal("changeSelection")},this.$getSelectionHighLightRegexp=function(){var e=this.session,t=this.getSelectionRange();if(!t.isEmpty()&&!t.isMultiLine()){var i=t.start.column-1,n=t.end.column+1,s=e.getLine(t.start.row),o=s.length,r=s.substring(Math.max(i,0),Math.min(n,o));if(!(i>=0&&/^[\w\d]/.test(r)||n<=o&&/[\w\d]$/.test(r))&&(r=s.substring(t.start.column,t.end.column),/^[\w\d]+$/.test(r))){return this.$search.$assembleRegExp({wholeWord:!0,caseSensitive:!0,needle:r})}}},this.onChangeFrontMarker=function(){this.renderer.updateFrontMarkers()},this.onChangeBackMarker=function(){this.renderer.updateBackMarkers()},this.onChangeBreakpoint=function(){this.renderer.updateBreakpoints()},this.onChangeAnnotation=function(){this.renderer.setAnnotations(this.session.getAnnotations())},this.onChangeMode=function(e){this.renderer.updateText(),this._emit("changeMode",e)},this.onChangeWrapLimit=function(){this.renderer.updateFull()},this.onChangeWrapMode=function(){this.renderer.onResize(!0)},this.onChangeFold=function(){this.$updateHighlightActiveLine(),this.renderer.updateFull()},this.getSelectedText=function(){return this.session.getTextRange(this.getSelectionRange())},this.getCopyText=function(){var e=this.getSelectedText();return this._signal("copy",e),e},this.onCopy=function(){this.commands.exec("copy",this)},this.onCut=function(){this.commands.exec("cut",this)},this.onPaste=function(e){if(!this.$readOnly){var t={text:e};this._signal("paste",t),this.insert(t.text,!0)}},this.execCommand=function(e,t){return this.commands.exec(e,this,t)},this.insert=function(e,t){var i=this.session,n=i.getMode(),s=this.getCursorPosition();if(this.getBehavioursEnabled()&&!t){var o=n.transformAction(i.getState(s.row),"insertion",this,i,e);o&&(e!==o.text&&(this.session.mergeUndoDeltas=!1,this.$mergeNextCommand=!1),e=o.text)}if("\t"==e&&(e=this.session.getTabString()),this.selection.isEmpty()){if(this.session.getOverwrite()){var r=new d.fromPoints(s,s);r.end.column+=e.length,this.session.remove(r)}}else{var r=this.getSelectionRange();s=this.session.remove(r),this.clearSelection()}if("\n"==e||"\r\n"==e){var a=i.getLine(s.row);if(s.column>a.search(/\S|$/)){var l=a.substr(s.column).search(/\S|$/);i.doc.removeInLine(s.row,s.column,s.column+l)}}this.clearSelection();var h=s.column,c=i.getState(s.row),a=i.getLine(s.row),u=n.checkOutdent(c,a,e);i.insert(s,e);if(o&&o.selection&&(2==o.selection.length?this.selection.setSelectionRange(new d(s.row,h+o.selection[0],s.row,h+o.selection[1])):this.selection.setSelectionRange(new d(s.row+o.selection[0],o.selection[1],s.row+o.selection[2],o.selection[3]))),i.getDocument().isNewLine(e)){var g=n.getNextLineIndent(c,a.slice(0,s.column),i.getTabString());i.insert({row:s.row+1,column:0},g)}u&&n.autoOutdent(c,i,s.row)},this.onTextInput=function(e){this.keyBinding.onTextInput(e)},this.onCommandKey=function(e,t,i){this.keyBinding.onCommandKey(e,t,i)},this.setOverwrite=function(e){this.session.setOverwrite(e)},this.getOverwrite=function(){return this.session.getOverwrite()},this.toggleOverwrite=function(){this.session.toggleOverwrite()},this.setScrollSpeed=function(e){this.setOption("scrollSpeed",e)},this.getScrollSpeed=function(){return this.getOption("scrollSpeed")},this.setDragDelay=function(e){this.setOption("dragDelay",e)},this.getDragDelay=function(){return this.getOption("dragDelay")},this.setSelectionStyle=function(e){this.setOption("selectionStyle",e)},this.getSelectionStyle=function(){return this.getOption("selectionStyle")},this.setHighlightActiveLine=function(e){this.setOption("highlightActiveLine",e)},this.getHighlightActiveLine=function(){return this.getOption("highlightActiveLine")},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.setHighlightSelectedWord=function(e){this.setOption("highlightSelectedWord",e)},this.getHighlightSelectedWord=function(){return this.$highlightSelectedWord},this.setAnimatedScroll=function(e){this.renderer.setAnimatedScroll(e)},this.getAnimatedScroll=function(){return this.renderer.getAnimatedScroll()},this.setShowInvisibles=function(e){this.renderer.setShowInvisibles(e)},this.getShowInvisibles=function(){return this.renderer.getShowInvisibles()},this.setDisplayIndentGuides=function(e){this.renderer.setDisplayIndentGuides(e)},this.getDisplayIndentGuides=function(){return this.renderer.getDisplayIndentGuides()},this.setShowPrintMargin=function(e){this.renderer.setShowPrintMargin(e)},this.getShowPrintMargin=function(){return this.renderer.getShowPrintMargin()},this.setPrintMarginColumn=function(e){this.renderer.setPrintMarginColumn(e)},this.getPrintMarginColumn=function(){return this.renderer.getPrintMarginColumn()},this.setReadOnly=function(e){this.setOption("readOnly",e)},this.getReadOnly=function(){return this.getOption("readOnly")},this.setBehavioursEnabled=function(e){this.setOption("behavioursEnabled",e)},this.getBehavioursEnabled=function(){return this.getOption("behavioursEnabled")},this.setWrapBehavioursEnabled=function(e){this.setOption("wrapBehavioursEnabled",e)},this.getWrapBehavioursEnabled=function(){return this.getOption("wrapBehavioursEnabled")},this.setShowFoldWidgets=function(e){this.setOption("showFoldWidgets",e)},this.getShowFoldWidgets=function(){return this.getOption("showFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.remove=function(e){this.selection.isEmpty()&&("left"==e?this.selection.selectLeft():this.selection.selectRight());var t=this.getSelectionRange();if(this.getBehavioursEnabled()){var i=this.session,n=i.getState(t.start.row),s=i.getMode().transformAction(n,"deletion",this,i,t);if(0===t.end.column){var o=i.getTextRange(t);if("\n"==o[o.length-1]){var r=i.getLine(t.end.row);/^\s+$/.test(r)&&(t.end.column=r.length)}}s&&(t=s)}this.session.remove(t),this.clearSelection()},this.removeWordRight=function(){this.selection.isEmpty()&&this.selection.selectWordRight(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeWordLeft=function(){this.selection.isEmpty()&&this.selection.selectWordLeft(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineStart=function(){this.selection.isEmpty()&&this.selection.selectLineStart(),this.session.remove(this.getSelectionRange()),this.clearSelection()},this.removeToLineEnd=function(){this.selection.isEmpty()&&this.selection.selectLineEnd();var e=this.getSelectionRange();e.start.column==e.end.column&&e.start.row==e.end.row&&(e.end.column=0,e.end.row++),this.session.remove(e),this.clearSelection()},this.splitLine=function(){this.selection.isEmpty()||(this.session.remove(this.getSelectionRange()),this.clearSelection());var e=this.getCursorPosition();this.insert("\n"),this.moveCursorToPosition(e)},this.transposeLetters=function(){if(this.selection.isEmpty()){var e=this.getCursorPosition(),t=e.column;if(0!==t){var i,n,s=this.session.getLine(e.row);t<s.length?(i=s.charAt(t)+s.charAt(t-1),n=new d(e.row,t-1,e.row,t+1)):(i=s.charAt(t-1)+s.charAt(t-2),n=new d(e.row,t-2,e.row,t)),this.session.replace(n,i)}}},this.toLowerCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),i=this.session.getTextRange(t);this.session.replace(t,i.toLowerCase()),this.selection.setSelectionRange(e)},this.toUpperCase=function(){var e=this.getSelectionRange();this.selection.isEmpty()&&this.selection.selectWord();var t=this.getSelectionRange(),i=this.session.getTextRange(t);this.session.replace(t,i.toUpperCase()),this.selection.setSelectionRange(e)},this.indent=function(){var e=this.session,t=this.getSelectionRange();if(t.start.row<t.end.row){var i=this.$getSelectedRows();return void e.indentRows(i.first,i.last,"\t")}if(t.start.column<t.end.column){var n=e.getTextRange(t);if(!/^\s+$/.test(n)){var i=this.$getSelectedRows();return void e.indentRows(i.first,i.last,"\t")}}var o=e.getLine(t.start.row),r=t.start,a=e.getTabSize(),l=e.documentToScreenColumn(r.row,r.column);if(this.session.getUseSoftTabs())var h=a-l%a,c=s.stringRepeat(" ",h);else{for(var h=l%a;" "==o[t.start.column]&&h;)t.start.column--,h--;this.selection.setSelectionRange(t),c="\t"}return this.insert(c)},this.blockIndent=function(){var e=this.$getSelectedRows();this.session.indentRows(e.first,e.last,"\t")},this.blockOutdent=function(){var e=this.session.getSelection();this.session.outdentRows(e.getRange())},this.sortLines=function(){var e=this.$getSelectedRows(),t=this.session,i=[];for(s=e.first;s<=e.last;s++)i.push(t.getLine(s));i.sort(function(e,t){return e.toLowerCase()<t.toLowerCase()?-1:e.toLowerCase()>t.toLowerCase()?1:0});for(var n=new d(0,0,0,0),s=e.first;s<=e.last;s++){var o=t.getLine(s);n.start.row=s,n.end.row=s,n.end.column=o.length,t.replace(n,i[s-e.first])}},this.toggleCommentLines=function(){var e=this.session.getState(this.getCursorPosition().row),t=this.$getSelectedRows();this.session.getMode().toggleCommentLines(e,this.session,t.first,t.last)},this.toggleBlockComment=function(){var e=this.getCursorPosition(),t=this.session.getState(e.row),i=this.getSelectionRange();this.session.getMode().toggleBlockComment(t,this.session,i,e)},this.getNumberAt=function(e,t){var i=/[\-]?[0-9]+(?:\.[0-9]+)?/g;i.lastIndex=0;for(var n=this.session.getLine(e);i.lastIndex<t;){var s=i.exec(n);if(s.index<=t&&s.index+s[0].length>=t){return{value:s[0],start:s.index,end:s.index+s[0].length}}}return null},this.modifyNumber=function(e){var t=this.selection.getCursor().row,i=this.selection.getCursor().column,n=new d(t,i-1,t,i),s=this.session.getTextRange(n);if(!isNaN(parseFloat(s))&&isFinite(s)){var o=this.getNumberAt(t,i);if(o){var r=o.value.indexOf(".")>=0?o.start+o.value.indexOf(".")+1:o.end,a=o.start+o.value.length-r,l=parseFloat(o.value);l*=Math.pow(10,a),r!==o.end&&i<r?e*=Math.pow(10,o.end-i-1):e*=Math.pow(10,o.end-i),l+=e,l/=Math.pow(10,a);var h=l.toFixed(a),c=new d(t,o.start,t,o.end);this.session.replace(c,h),this.moveCursorTo(t,Math.max(o.start+1,i+h.length-o.value.length))}}},this.removeLines=function(){var e,t=this.$getSelectedRows();e=0===t.first||t.last+1<this.session.getLength()?new d(t.first,0,t.last+1,0):new d(t.first-1,this.session.getLine(t.first-1).length,t.last,this.session.getLine(t.last).length),this.session.remove(e),this.clearSelection()},this.duplicateSelection=function(){var e=this.selection,t=this.session,i=e.getRange(),n=e.isBackwards();if(i.isEmpty()){var s=i.start.row;t.duplicateLines(s,s)}else{var o=n?i.start:i.end,r=t.insert(o,t.getTextRange(i),!1);i.start=o,i.end=r,e.setSelectionRange(i,n)}},this.moveLinesDown=function(){this.$moveLines(function(e,t){return this.session.moveLinesDown(e,t)})},this.moveLinesUp=function(){this.$moveLines(function(e,t){return this.session.moveLinesUp(e,t)})},this.moveText=function(e,t,i){return this.session.moveText(e,t,i)},this.copyLinesUp=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t),0})},this.copyLinesDown=function(){this.$moveLines(function(e,t){return this.session.duplicateLines(e,t)})},this.$moveLines=function(e){var t=this.selection;if(!t.inMultiSelectMode||this.inVirtualSelectionMode){var i=t.toOrientedRange(),n=this.$getSelectedRows(i),s=e.call(this,n.first,n.last);i.moveBy(s,0),t.fromOrientedRange(i)}else{var o=t.rangeList.ranges;t.rangeList.detach(this.session);for(var r=o.length;r--;){for(var a=r,n=o[r].collapseRows(),l=n.end.row,h=n.start.row;r--&&(n=o[r].collapseRows(),h-n.end.row<=1);)h=n.end.row;r++;for(var s=e.call(this,h,l);a>=r;)o[a].moveBy(s,0),a--}t.fromOrientedRange(t.ranges[0]),t.rangeList.attach(this.session)}},this.$getSelectedRows=function(){var e=this.getSelectionRange().collapseRows();return{first:this.session.getRowFoldStart(e.start.row),last:this.session.getRowFoldEnd(e.end.row)}},this.onCompositionStart=function(){this.renderer.showComposition(this.getCursorPosition())},this.onCompositionUpdate=function(e){this.renderer.setCompositionText(e)},this.onCompositionEnd=function(){this.renderer.hideComposition()},this.getFirstVisibleRow=function(){return this.renderer.getFirstVisibleRow()},this.getLastVisibleRow=function(){return this.renderer.getLastVisibleRow()},this.isRowVisible=function(e){return e>=this.getFirstVisibleRow()&&e<=this.getLastVisibleRow()},this.isRowFullyVisible=function(e){return e>=this.renderer.getFirstFullyVisibleRow()&&e<=this.renderer.getLastFullyVisibleRow()},this.$getVisibleRowCount=function(){return this.renderer.getScrollBottomRow()-this.renderer.getScrollTopRow()+1},this.$moveByPage=function(e,t){var i=this.renderer,n=this.renderer.layerConfig,s=e*Math.floor(n.height/n.lineHeight);this.$blockScrolling++,!0===t?this.selection.$moveSelection(function(){this.moveCursorBy(s,0)}):!1===t&&(this.selection.moveCursorBy(s,0),this.selection.clearSelection()),this.$blockScrolling--;var o=i.scrollTop;i.scrollBy(0,s*n.lineHeight),null!=t&&i.scrollCursorIntoView(null,.5),i.animateScrolling(o)},this.selectPageDown=function(){this.$moveByPage(1,!0)},this.selectPageUp=function(){this.$moveByPage(-1,!0)},this.gotoPageDown=function(){this.$moveByPage(1,!1)},this.gotoPageUp=function(){this.$moveByPage(-1,!1)},this.scrollPageDown=function(){this.$moveByPage(1)},this.scrollPageUp=function(){this.$moveByPage(-1)},this.scrollToRow=function(e){this.renderer.scrollToRow(e)},this.scrollToLine=function(e,t,i,n){this.renderer.scrollToLine(e,t,i,n)},this.centerSelection=function(){var e=this.getSelectionRange(),t={row:Math.floor(e.start.row+(e.end.row-e.start.row)/2),column:Math.floor(e.start.column+(e.end.column-e.start.column)/2)};this.renderer.alignCursor(t,.5)},this.getCursorPosition=function(){return this.selection.getCursor()},this.getCursorPositionScreen=function(){return this.session.documentToScreenPosition(this.getCursorPosition())},this.getSelectionRange=function(){return this.selection.getRange()},this.selectAll=function(){this.$blockScrolling+=1,this.selection.selectAll(),this.$blockScrolling-=1},this.clearSelection=function(){this.selection.clearSelection()},this.moveCursorTo=function(e,t){this.selection.moveCursorTo(e,t)},this.moveCursorToPosition=function(e){this.selection.moveCursorToPosition(e)},this.jumpToMatching=function(e,t){var i=this.getCursorPosition(),n=new A(this.session,i.row,i.column),s=n.getCurrentToken(),o=s||n.stepForward();if(o){var r,a,l=!1,h={},c=i.column-o.start,u={")":"(","(":"(","]":"[","[":"[","{":"{","}":"{"};do{if(o.value.match(/[{}()\[\]]/g)){for(;c<o.value.length&&!l;c++)if(u[o.value[c]])switch(a=u[o.value[c]]+"."+o.type.replace("rparen","lparen"),isNaN(h[a])&&(h[a]=0),o.value[c]){case"(":case"[":case"{":h[a]++;break;case")":case"]":case"}":h[a]--,-1===h[a]&&(r="bracket",l=!0)}}else o&&-1!==o.type.indexOf("tag-name")&&(isNaN(h[o.value])&&(h[o.value]=0),"<"===s.value?h[o.value]++:"</"===s.value&&h[o.value]--,-1===h[o.value]&&(r="tag",l=!0));l||(s=o,o=n.stepForward(),c=0)}while(o&&!l);if(r){var g,f;if("bracket"===r)(g=this.session.getBracketRange(i))||(g=new d(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+c-1,n.getCurrentTokenRow(),n.getCurrentTokenColumn()+c-1),f=g.start,(t||f.row===i.row&&Math.abs(f.column-i.column)<2)&&(g=this.session.getBracketRange(f)));else if("tag"===r){if(!o||-1===o.type.indexOf("tag-name"))return;var m=o.value;if(g=new d(n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2,n.getCurrentTokenRow(),n.getCurrentTokenColumn()-2),0===g.compare(i.row,i.column)){l=!1;do{o=s,(s=n.stepBackward())&&(-1!==s.type.indexOf("tag-close")&&g.setEnd(n.getCurrentTokenRow(),n.getCurrentTokenColumn()+1),o.value===m&&-1!==o.type.indexOf("tag-name")&&("<"===s.value?h[m]++:"</"===s.value&&h[m]--,0===h[m]&&(l=!0)))}while(s&&!l)}o&&o.type.indexOf("tag-name")&&(f=g.start,f.row==i.row&&Math.abs(f.column-i.column)<2&&(f=g.end))}f=g&&g.cursor||f,f&&(e?g&&t?this.selection.setRange(g):g&&g.isEqual(this.getSelectionRange())?this.clearSelection():this.selection.selectTo(f.row,f.column):this.selection.moveTo(f.row,f.column))}}},this.gotoLine=function(e,t,i){this.selection.clearSelection(),this.session.unfold({row:e-1,column:t||0}),this.$blockScrolling+=1,this.exitMultiSelectMode&&this.exitMultiSelectMode(),this.moveCursorTo(e-1,t||0),this.$blockScrolling-=1,this.isRowFullyVisible(e-1)||this.scrollToLine(e-1,!0,i)},this.navigateTo=function(e,t){this.selection.moveTo(e,t)},this.navigateUp=function(e){if(this.selection.isMultiLine()&&!this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(-e||-1,0)},this.navigateDown=function(e){if(this.selection.isMultiLine()&&this.selection.isBackwards()){var t=this.selection.anchor.getPosition();return this.moveCursorToPosition(t)}this.selection.clearSelection(),this.selection.moveCursorBy(e||1,0)},this.navigateLeft=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorLeft();else{var t=this.getSelectionRange().start;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateRight=function(e){if(this.selection.isEmpty())for(e=e||1;e--;)this.selection.moveCursorRight();else{var t=this.getSelectionRange().end;this.moveCursorToPosition(t)}this.clearSelection()},this.navigateLineStart=function(){this.selection.moveCursorLineStart(),this.clearSelection()},this.navigateLineEnd=function(){this.selection.moveCursorLineEnd(),this.clearSelection()},this.navigateFileEnd=function(){this.selection.moveCursorFileEnd(),this.clearSelection()},this.navigateFileStart=function(){this.selection.moveCursorFileStart(),this.clearSelection()},this.navigateWordRight=function(){this.selection.moveCursorWordRight(),this.clearSelection()},this.navigateWordLeft=function(){this.selection.moveCursorWordLeft(),this.clearSelection()},this.replace=function(e,t){t&&this.$search.set(t);var i=this.$search.find(this.session),n=0;return i?(this.$tryReplace(i,e)&&(n=1),null!==i&&(this.selection.setSelectionRange(i),this.renderer.scrollSelectionIntoView(i.start,i.end)),n):n},this.replaceAll=function(e,t){t&&this.$search.set(t);var i=this.$search.findAll(this.session),n=0;if(!i.length)return n;this.$blockScrolling+=1;var s=this.getSelectionRange();this.selection.moveTo(0,0);for(var o=i.length-1;o>=0;--o)this.$tryReplace(i[o],e)&&n++;return this.selection.setSelectionRange(s),this.$blockScrolling-=1,n},this.$tryReplace=function(e,t){var i=this.session.getTextRange(e);return t=this.$search.replace(i,t),null!==t?(e.end=this.session.replace(e,t),e):null},this.getLastSearchOptions=function(){return this.$search.getOptions()},this.find=function(e,t,n){t||(t={}),"string"==typeof e||e instanceof RegExp?t.needle=e:"object"==typeof e&&i.mixin(t,e);var s=this.selection.getRange();null==t.needle&&(e=this.session.getTextRange(s)||this.$search.$options.needle,e||(s=this.session.getWordRange(s.start.row,s.start.column),e=this.session.getTextRange(s)),this.$search.set({needle:e})),this.$search.set(t),t.start||this.$search.set({start:s});var o=this.$search.find(this.session);return t.preventScroll?o:o?(this.revealRange(o,n),o):(t.backwards?s.start=s.end:s.end=s.start,void this.selection.setRange(s))},this.findNext=function(e,t){this.find({skipCurrent:!0,backwards:!1},e,t)},this.findPrevious=function(e,t){this.find(e,{skipCurrent:!0,backwards:!0},t)},this.revealRange=function(e,t){this.$blockScrolling+=1,this.session.unfold(e),this.selection.setSelectionRange(e),this.$blockScrolling-=1;var i=this.renderer.scrollTop;this.renderer.scrollSelectionIntoView(e.start,e.end,.5),!1!==t&&this.renderer.animateScrolling(i)},this.undo=function(){this.$blockScrolling++,this.session.getUndoManager().undo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.redo=function(){this.$blockScrolling++,this.session.getUndoManager().redo(),this.$blockScrolling--,this.renderer.scrollCursorIntoView(null,.5)},this.destroy=function(){this.renderer.destroy(),this._signal("destroy",this),this.session&&this.session.destroy()},this.setAutoScrollEditorIntoView=function(e){if(e){var t,i=this,n=!1;this.$scrollAnchor||(this.$scrollAnchor=document.createElement("div"));var s=this.$scrollAnchor;s.style.cssText="position:absolute",this.container.insertBefore(s,this.container.firstChild);var o=this.on("changeSelection",function(){n=!0}),r=this.renderer.on("beforeRender",function(){n&&(t=i.renderer.container.getBoundingClientRect())}),a=this.renderer.on("afterRender",function(){if(n&&t&&(i.isFocused()||i.searchBox&&i.searchBox.isFocused())){var e=i.renderer,o=e.$cursorLayer.$pixelPos,r=e.layerConfig,a=o.top-r.offset;n=o.top>=0&&a+t.top<0||!(o.top<r.height&&o.top+t.top+r.lineHeight>window.innerHeight)&&null,null!=n&&(s.style.top=a+"px",s.style.left=o.left+"px",s.style.height=r.lineHeight+"px",s.scrollIntoView(n)),n=t=null}});this.setAutoScrollEditorIntoView=function(e){e||(delete this.setAutoScrollEditorIntoView,this.removeEventListener("changeSelection",o),this.renderer.removeEventListener("afterRender",a),this.renderer.removeEventListener("beforeRender",r))}}},this.$resetCursorStyle=function(){var e=this.$cursorStyle||"ace",t=this.renderer.$cursorLayer;t&&(t.setSmoothBlinking(/smooth/.test(e)),t.isBlinking=!this.$readOnly&&"wide"!=e,n.setCssClass(t.element,"ace_slim-cursors",/slim/.test(e)))}}).call(C.prototype),p.defineOptions(C.prototype,"editor",{selectionStyle:{set:function(e){this.onSelectionChange(),this._signal("changeSelectionStyle",{data:e})},initialValue:"line"},highlightActiveLine:{set:function(){this.$updateHighlightActiveLine()},initialValue:!0},highlightSelectedWord:{set:function(){this.$onSelectionChange()},initialValue:!0},readOnly:{set:function(){this.$resetCursorStyle()},initialValue:!1},cursorStyle:{set:function(){this.$resetCursorStyle()},values:["ace","slim","smooth","wide"],initialValue:"ace"},mergeUndoDeltas:{values:[!1,!0,"always"],initialValue:!0},behavioursEnabled:{initialValue:!0},wrapBehavioursEnabled:{initialValue:!0},autoScrollEditorIntoView:{set:function(e){this.setAutoScrollEditorIntoView(e)}},hScrollBarAlwaysVisible:"renderer",vScrollBarAlwaysVisible:"renderer",highlightGutterLine:"renderer",animatedScroll:"renderer",showInvisibles:"renderer",showPrintMargin:"renderer",
printMarginColumn:"renderer",printMargin:"renderer",fadeFoldWidgets:"renderer",showFoldWidgets:"renderer",showLineNumbers:"renderer",showGutter:"renderer",displayIndentGuides:"renderer",fontSize:"renderer",fontFamily:"renderer",maxLines:"renderer",minLines:"renderer",scrollPastEnd:"renderer",fixedWidthGutter:"renderer",theme:"renderer",scrollSpeed:"$mouseHandler",dragDelay:"$mouseHandler",dragEnabled:"$mouseHandler",focusTimout:"$mouseHandler",tooltipFollowsMouse:"$mouseHandler",firstLineNumber:"session",overwrite:"session",newLineMode:"session",useWorker:"session",useSoftTabs:"session",tabSize:"session",wrap:"session",foldStyle:"session",mode:"session"}),t.Editor=C}),define("ace/undomanager",["require","exports","module"],function(e,t){"use strict";var i=function(){this.reset()};(function(){this.execute=function(e){var t=e.args[0];this.$doc=e.args[1],e.merge&&this.hasUndo()&&(this.dirtyCounter--,t=this.$undoStack.pop().concat(t)),this.$undoStack.push(t),this.$redoStack=[],this.dirtyCounter<0&&(this.dirtyCounter=NaN),this.dirtyCounter++},this.undo=function(e){var t=this.$undoStack.pop(),i=null;return t&&(i=this.$doc.undoChanges(t,e),this.$redoStack.push(t),this.dirtyCounter--),i},this.redo=function(e){var t=this.$redoStack.pop(),i=null;return t&&(i=this.$doc.redoChanges(t,e),this.$undoStack.push(t),this.dirtyCounter++),i},this.reset=function(){this.$undoStack=[],this.$redoStack=[],this.dirtyCounter=0},this.hasUndo=function(){return this.$undoStack.length>0},this.hasRedo=function(){return this.$redoStack.length>0},this.markClean=function(){this.dirtyCounter=0},this.isClean=function(){return 0===this.dirtyCounter}}).call(i.prototype),t.UndoManager=i}),define("ace/layer/gutter",["require","exports","module","ace/lib/dom","ace/lib/oop","ace/lib/lang","ace/lib/event_emitter"],function(e,t){"use strict";var i=e("../lib/dom"),n=e("../lib/oop"),s=e("../lib/lang"),o=e("../lib/event_emitter").EventEmitter,r=function(e){this.element=i.createElement("div"),this.element.className="ace_layer ace_gutter-layer",e.appendChild(this.element),this.setShowFoldWidgets(this.$showFoldWidgets),this.gutterWidth=0,this.$annotations=[],this.$updateAnnotations=this.$updateAnnotations.bind(this),this.$cells=[]};(function(){n.implement(this,o),this.setSession=function(e){this.session&&this.session.removeEventListener("change",this.$updateAnnotations),this.session=e,e&&e.on("change",this.$updateAnnotations)},this.addGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.addGutterDecoration"),this.session.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){window.console&&console.warn&&console.warn("deprecated use session.removeGutterDecoration"),this.session.removeGutterDecoration(e,t)},this.setAnnotations=function(e){this.$annotations=[];for(var t=0;t<e.length;t++){var i=e[t],n=i.row,o=this.$annotations[n];o||(o=this.$annotations[n]={text:[]});var r=i.text;r=r?s.escapeHTML(r):i.html||"",-1===o.text.indexOf(r)&&o.text.push(r);var a=i.type;"error"==a?o.className=" ace_error":"warning"==a&&" ace_error"!=o.className?o.className=" ace_warning":"info"!=a||o.className||(o.className=" ace_info")}},this.$updateAnnotations=function(e){if(this.$annotations.length){var t=e.data,i=t.range,n=i.start.row,s=i.end.row-n;if(0===s);else if("removeText"==t.action||"removeLines"==t.action)this.$annotations.splice(n,s+1,null);else{var o=new Array(s+1);o.unshift(n,1),this.$annotations.splice.apply(this.$annotations,o)}}},this.update=function(e){for(var t=this.session,n=e.firstRow,s=Math.min(e.lastRow+e.gutterOffset,t.getLength()-1),o=t.getNextFoldLine(n),r=o?o.start.row:Infinity,a=this.$showFoldWidgets&&t.foldWidgets,l=t.$breakpoints,h=t.$decorations,c=t.$firstLineNumber,u=0,d=t.gutterRenderer||this.$renderer,g=null,f=-1,m=n;;){if(m>r&&(m=o.end.row+1,o=t.getNextFoldLine(m,o),r=o?o.start.row:Infinity),m>s){for(;this.$cells.length>f+1;)g=this.$cells.pop(),this.element.removeChild(g.element);break}g=this.$cells[++f],g||(g={element:null,textNode:null,foldWidget:null},g.element=i.createElement("div"),g.textNode=document.createTextNode(""),g.element.appendChild(g.textNode),this.element.appendChild(g.element),this.$cells[f]=g);var p="ace_gutter-cell ";l[m]&&(p+=l[m]),h[m]&&(p+=h[m]),this.$annotations[m]&&(p+=this.$annotations[m].className),g.element.className!=p&&(g.element.className=p);var A=t.getRowLength(m)*e.lineHeight+"px";if(A!=g.element.style.height&&(g.element.style.height=A),a){var C=a[m];null==C&&(C=a[m]=t.getFoldWidget(m))}if(C){g.foldWidget||(g.foldWidget=i.createElement("span"),g.element.appendChild(g.foldWidget));var p="ace_fold-widget ace_"+C;"start"==C&&m==r&&m<o.end.row?p+=" ace_closed":p+=" ace_open",g.foldWidget.className!=p&&(g.foldWidget.className=p);var A=e.lineHeight+"px";g.foldWidget.style.height!=A&&(g.foldWidget.style.height=A)}else g.foldWidget&&(g.element.removeChild(g.foldWidget),g.foldWidget=null);var F=u=d?d.getText(t,m):m+c;F!=g.textNode.data&&(g.textNode.data=F),m++}this.element.style.height=e.minHeight+"px",(this.$fixedWidth||t.$useWrapMode)&&(u=t.getLength()+c);var v=d?d.getWidth(t,u,e):u.toString().length*e.characterWidth,w=this.$padding||this.$computePadding();(v+=w.left+w.right)===this.gutterWidth||isNaN(v)||(this.gutterWidth=v,this.element.style.width=Math.ceil(this.gutterWidth)+"px",this._emit("changeGutterWidth",v))},this.$fixedWidth=!1,this.$showLineNumbers=!0,this.$renderer="",this.setShowLineNumbers=function(e){this.$renderer=!e&&{getWidth:function(){return""},getText:function(){return""}}},this.getShowLineNumbers=function(){return this.$showLineNumbers},this.$showFoldWidgets=!0,this.setShowFoldWidgets=function(e){e?i.addCssClass(this.element,"ace_folding-enabled"):i.removeCssClass(this.element,"ace_folding-enabled"),this.$showFoldWidgets=e,this.$padding=null},this.getShowFoldWidgets=function(){return this.$showFoldWidgets},this.$computePadding=function(){if(!this.element.firstChild)return{left:0,right:0};var e=i.computedStyle(this.element.firstChild);return this.$padding={},this.$padding.left=parseInt(e.paddingLeft)+1||0,this.$padding.right=parseInt(e.paddingRight)||0,this.$padding},this.getRegion=function(e){var t=this.$padding||this.$computePadding(),i=this.element.getBoundingClientRect();return e.x<t.left+i.left?"markers":this.$showFoldWidgets&&e.x>i.right-t.right?"foldWidgets":void 0}}).call(r.prototype),t.Gutter=r}),define("ace/layer/marker",["require","exports","module","ace/range","ace/lib/dom"],function(e,t){"use strict";var i=e("../range").Range,n=e("../lib/dom"),s=function(e){this.element=n.createElement("div"),this.element.className="ace_layer ace_marker-layer",e.appendChild(this.element)};(function(){this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setMarkers=function(e){this.markers=e},this.update=function(e){var e=e||this.config;if(e){this.config=e;var t=[];for(var i in this.markers){var n=this.markers[i];if(n.range){var s=n.range.clipRows(e.firstRow,e.lastRow);if(!s.isEmpty())if(s=s.toScreenRange(this.session),n.renderer){var o=this.$getTop(s.start.row,e),r=this.$padding+s.start.column*e.characterWidth;n.renderer(t,s,r,o,e)}else"fullLine"==n.type?this.drawFullLineMarker(t,s,n.clazz,e):"screenLine"==n.type?this.drawScreenLineMarker(t,s,n.clazz,e):s.isMultiLine()?"text"==n.type?this.drawTextMarker(t,s,n.clazz,e):this.drawMultiLineMarker(t,s,n.clazz,e):this.drawSingleLineMarker(t,s,n.clazz+" ace_start",e)}else n.update(t,this,this.session,e)}this.element.innerHTML=t.join("")}},this.$getTop=function(e,t){return(e-t.firstRowScreen)*t.lineHeight},this.drawTextMarker=function(e,t,n,s,o){var r=t.start.row,a=new i(r,t.start.column,r,this.session.getScreenLastRowColumn(r));for(this.drawSingleLineMarker(e,a,n+" ace_start",s,1,o),r=t.end.row,a=new i(r,0,r,t.end.column),this.drawSingleLineMarker(e,a,n,s,0,o),r=t.start.row+1;r<t.end.row;r++)a.start.row=r,a.end.row=r,a.end.column=this.session.getScreenLastRowColumn(r),this.drawSingleLineMarker(e,a,n,s,1,o)},this.drawMultiLineMarker=function(e,t,i,n,s){var o=this.$padding,r=n.lineHeight,a=this.$getTop(t.start.row,n),l=o+t.start.column*n.characterWidth;s=s||"",e.push("<div class='",i," ace_start' style='","height:",r,"px;","right:0;","top:",a,"px;","left:",l,"px;",s,"'></div>"),a=this.$getTop(t.end.row,n);var h=t.end.column*n.characterWidth;e.push("<div class='",i,"' style='","height:",r,"px;","width:",h,"px;","top:",a,"px;","left:",o,"px;",s,"'></div>"),(r=(t.end.row-t.start.row-1)*n.lineHeight)<0||(a=this.$getTop(t.start.row+1,n),e.push("<div class='",i,"' style='","height:",r,"px;","right:0;","top:",a,"px;","left:",o,"px;",s,"'></div>"))},this.drawSingleLineMarker=function(e,t,i,n,s,o){var r=n.lineHeight,a=(t.end.column+(s||0)-t.start.column)*n.characterWidth,l=this.$getTop(t.start.row,n),h=this.$padding+t.start.column*n.characterWidth;e.push("<div class='",i,"' style='","height:",r,"px;","width:",a,"px;","top:",l,"px;","left:",h,"px;",o||"","'></div>")},this.drawFullLineMarker=function(e,t,i,n,s){var o=this.$getTop(t.start.row,n),r=n.lineHeight;t.start.row!=t.end.row&&(r+=this.$getTop(t.end.row,n)-o),e.push("<div class='",i,"' style='","height:",r,"px;","top:",o,"px;","left:0;right:0;",s||"","'></div>")},this.drawScreenLineMarker=function(e,t,i,n,s){var o=this.$getTop(t.start.row,n),r=n.lineHeight;e.push("<div class='",i,"' style='","height:",r,"px;","top:",o,"px;","left:0;right:0;",s||"","'></div>")}}).call(s.prototype),t.Marker=s}),define("ace/layer/text",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t){"use strict";var i=e("../lib/oop"),n=e("../lib/dom"),s=e("../lib/lang"),o=(e("../lib/useragent"),e("../lib/event_emitter").EventEmitter),r=function(e){this.element=n.createElement("div"),this.element.className="ace_layer ace_text-layer",e.appendChild(this.element),this.$updateEolChar=this.$updateEolChar.bind(this)};(function(){i.implement(this,o),this.EOF_CHAR="\xb6",this.EOL_CHAR_LF="\xac",this.EOL_CHAR_CRLF="\xa4",this.EOL_CHAR=this.EOL_CHAR_LF,this.TAB_CHAR="\u2192",this.SPACE_CHAR="\xb7",this.$padding=0,this.$updateEolChar=function(){var e="\n"==this.session.doc.getNewLineCharacter()?this.EOL_CHAR_LF:this.EOL_CHAR_CRLF;if(this.EOL_CHAR!=e)return this.EOL_CHAR=e,!0},this.setPadding=function(e){this.$padding=e,this.element.style.padding="0 "+e+"px"},this.getLineHeight=function(){return this.$fontMetrics.$characterSize.height||0},this.getCharacterWidth=function(){return this.$fontMetrics.$characterSize.width||0},this.$setFontMetrics=function(e){this.$fontMetrics=e,this.$fontMetrics.on("changeCharacterSize",function(e){this._signal("changeCharacterSize",e)}.bind(this)),this.$pollSizeChanges()},this.checkForSizeChanges=function(){this.$fontMetrics.checkForSizeChanges()},this.$pollSizeChanges=function(){return this.$pollSizeChangesTimer=this.$fontMetrics.$pollSizeChanges()},this.setSession=function(e){this.session=e,e&&this.$computeTabString()},this.showInvisibles=!1,this.setShowInvisibles=function(e){return this.showInvisibles!=e&&(this.showInvisibles=e,this.$computeTabString(),!0)},this.displayIndentGuides=!0,this.setDisplayIndentGuides=function(e){return this.displayIndentGuides!=e&&(this.displayIndentGuides=e,this.$computeTabString(),!0)},this.$tabStrings=[],this.onChangeTabSize=this.$computeTabString=function(){var e=this.session.getTabSize();this.tabSize=e;for(var t=this.$tabStrings=[0],i=1;i<e+1;i++)this.showInvisibles?t.push("<span class='ace_invisible ace_invisible_tab'>"+this.TAB_CHAR+s.stringRepeat("\xa0",i-1)+"</span>"):t.push(s.stringRepeat("\xa0",i));if(this.displayIndentGuides){this.$indentGuideRe=/\s\S| \t|\t |\s$/;var n="ace_indent-guide",o="",r="";if(this.showInvisibles){n+=" ace_invisible",o=" ace_invisible_space",r=" ace_invisible_tab";var a=s.stringRepeat(this.SPACE_CHAR,this.tabSize),l=this.TAB_CHAR+s.stringRepeat("\xa0",this.tabSize-1)}else var a=s.stringRepeat("\xa0",this.tabSize),l=a;this.$tabStrings[" "]="<span class='"+n+o+"'>"+a+"</span>",this.$tabStrings["\t"]="<span class='"+n+r+"'>"+l+"</span>"}},this.updateLines=function(e,t,i){this.config.lastRow==e.lastRow&&this.config.firstRow==e.firstRow||this.scrollLines(e),this.config=e;for(var n=Math.max(t,e.firstRow),s=Math.min(i,e.lastRow),o=this.element.childNodes,r=0,a=e.firstRow;a<n;a++){var l=this.session.getFoldLine(a);if(l){if(l.containsRow(n)){n=l.start.row;break}a=l.end.row}r++}for(var a=n,l=this.session.getNextFoldLine(a),h=l?l.start.row:Infinity;;){if(a>h&&(a=l.end.row+1,l=this.session.getNextFoldLine(a,l),h=l?l.start.row:Infinity),a>s)break;var c=o[r++];if(c){var u=[];this.$renderLine(u,a,!this.$useLineGroups(),a==h&&l),c.style.height=e.lineHeight*this.session.getRowLength(a)+"px",c.innerHTML=u.join("")}a++}},this.scrollLines=function(e){var t=this.config;if(this.config=e,!t||t.lastRow<e.firstRow)return this.update(e);if(e.lastRow<t.firstRow)return this.update(e);var i=this.element;if(t.firstRow<e.firstRow)for(var n=this.session.getFoldedRowCount(t.firstRow,e.firstRow-1);n>0;n--)i.removeChild(i.firstChild);if(t.lastRow>e.lastRow)for(var n=this.session.getFoldedRowCount(e.lastRow+1,t.lastRow);n>0;n--)i.removeChild(i.lastChild);if(e.firstRow<t.firstRow){var s=this.$renderLinesFragment(e,e.firstRow,t.firstRow-1);i.firstChild?i.insertBefore(s,i.firstChild):i.appendChild(s)}if(e.lastRow>t.lastRow){var s=this.$renderLinesFragment(e,t.lastRow+1,e.lastRow);i.appendChild(s)}},this.$renderLinesFragment=function(e,t,i){for(var s=this.element.ownerDocument.createDocumentFragment(),o=t,r=this.session.getNextFoldLine(o),a=r?r.start.row:Infinity;;){if(o>a&&(o=r.end.row+1,r=this.session.getNextFoldLine(o,r),a=r?r.start.row:Infinity),o>i)break;var l=n.createElement("div"),h=[];if(this.$renderLine(h,o,!1,o==a&&r),l.innerHTML=h.join(""),this.$useLineGroups())l.className="ace_line_group",s.appendChild(l),l.style.height=e.lineHeight*this.session.getRowLength(o)+"px";else for(;l.firstChild;)s.appendChild(l.firstChild);o++}return s},this.update=function(e){this.config=e;for(var t=[],i=e.firstRow,n=e.lastRow,s=i,o=this.session.getNextFoldLine(s),r=o?o.start.row:Infinity;;){if(s>r&&(s=o.end.row+1,o=this.session.getNextFoldLine(s,o),r=o?o.start.row:Infinity),s>n)break;this.$useLineGroups()&&t.push("<div class='ace_line_group' style='height:",e.lineHeight*this.session.getRowLength(s),"px'>"),this.$renderLine(t,s,!1,s==r&&o),this.$useLineGroups()&&t.push("</div>"),s++}this.element.innerHTML=t.join("")},this.$textToken={text:!0,rparen:!0,lparen:!0},this.$renderToken=function(e,t,i,n){var o=this,r=/\t|&|<|( +)|([\x00-\x1f\x80-\xa0\xad\u1680\u180E\u2000-\u200f\u2028\u2029\u202F\u205F\u3000\uFEFF])|[\u1100-\u115F\u11A3-\u11A7\u11FA-\u11FF\u2329-\u232A\u2E80-\u2E99\u2E9B-\u2EF3\u2F00-\u2FD5\u2FF0-\u2FFB\u3000-\u303E\u3041-\u3096\u3099-\u30FF\u3105-\u312D\u3131-\u318E\u3190-\u31BA\u31C0-\u31E3\u31F0-\u321E\u3220-\u3247\u3250-\u32FE\u3300-\u4DBF\u4E00-\uA48C\uA490-\uA4C6\uA960-\uA97C\uAC00-\uD7A3\uD7B0-\uD7C6\uD7CB-\uD7FB\uF900-\uFAFF\uFE10-\uFE19\uFE30-\uFE52\uFE54-\uFE66\uFE68-\uFE6B\uFF01-\uFF60\uFFE0-\uFFE6]/g,a=function(e,i,n,r){if(i)return o.showInvisibles?"<span class='ace_invisible ace_invisible_space'>"+s.stringRepeat(o.SPACE_CHAR,e.length)+"</span>":s.stringRepeat("\xa0",e.length);if("&"==e)return"&#38;";if("<"==e)return"&#60;";if("\t"==e){var a=o.session.getScreenTabSize(t+r);return t+=a-1,o.$tabStrings[a]}if("\u3000"==e){var l=o.showInvisibles?"ace_cjk ace_invisible ace_invisible_space":"ace_cjk",h=o.showInvisibles?o.SPACE_CHAR:"";return t+=1,"<span class='"+l+"' style='width:"+2*o.config.characterWidth+"px'>"+h+"</span>"}return n?"<span class='ace_invisible ace_invisible_space ace_invalid'>"+o.SPACE_CHAR+"</span>":(t+=1,"<span class='ace_cjk' style='width:"+2*o.config.characterWidth+"px'>"+e+"</span>")},l=n.replace(r,a);if(this.$textToken[i.type])e.push(l);else{var h="ace_"+i.type.replace(/\./g," ace_"),c="";"fold"==i.type&&(c=" style='width:"+i.value.length*this.config.characterWidth+"px;' "),e.push("<span class='",h,"'",c,">",l,"</span>")}return t+n.length},this.renderIndentGuide=function(e,t,i){var n=t.search(this.$indentGuideRe);return n<=0||n>=i?t:" "==t[0]?(n-=n%this.tabSize,e.push(s.stringRepeat(this.$tabStrings[" "],n/this.tabSize)),t.substr(n)):"\t"==t[0]?(e.push(s.stringRepeat(this.$tabStrings["\t"],n)),t.substr(n)):t},this.$renderWrappedLine=function(e,t,i,n){for(var s=0,o=0,r=i[0],a=0,l=0;l<t.length;l++){var h=t[l],c=h.value;if(0==l&&this.displayIndentGuides){if(s=c.length,!(c=this.renderIndentGuide(e,c,r)))continue;s-=c.length}if(s+c.length<r)a=this.$renderToken(e,a,h,c),s+=c.length;else{for(;s+c.length>=r;)a=this.$renderToken(e,a,h,c.substring(0,r-s)),c=c.substring(r-s),s=r,n||e.push("</div>","<div class='ace_line' style='height:",this.config.lineHeight,"px'>"),o++,a=0,r=i[o]||Number.MAX_VALUE;0!=c.length&&(s+=c.length,a=this.$renderToken(e,a,h,c))}}},this.$renderSimpleLine=function(e,t){var i=0,n=t[0],s=n.value;this.displayIndentGuides&&(s=this.renderIndentGuide(e,s)),s&&(i=this.$renderToken(e,i,n,s));for(var o=1;o<t.length;o++)n=t[o],s=n.value,i=this.$renderToken(e,i,n,s)},this.$renderLine=function(e,t,i,n){if(n||0==n||(n=this.session.getFoldLine(t)),n)var s=this.$getFoldLineTokens(t,n);else var s=this.session.getTokens(t);if(i||e.push("<div class='ace_line' style='height:",this.config.lineHeight*(this.$useLineGroups()?1:this.session.getRowLength(t)),"px'>"),s.length){var o=this.session.getRowSplitData(t);o&&o.length?this.$renderWrappedLine(e,s,o,i):this.$renderSimpleLine(e,s)}this.showInvisibles&&(n&&(t=n.end.row),e.push("<span class='ace_invisible ace_invisible_eol'>",t==this.session.getLength()-1?this.EOF_CHAR:this.EOL_CHAR,"</span>")),i||e.push("</div>")},this.$getFoldLineTokens=function(e,t){function i(e,t,i){for(var n=0,o=0;o+e[n].value.length<t;)if(o+=e[n].value.length,++n==e.length)return;if(o!=t){var r=e[n].value.substring(t-o);r.length>i-t&&(r=r.substring(0,i-t)),s.push({type:e[n].type,value:r}),o=t+r.length,n+=1}for(;o<i&&n<e.length;){var r=e[n].value;r.length+o>i?s.push({type:e[n].type,value:r.substring(0,i-o)}):s.push(e[n]),o+=r.length,n+=1}}var n=this.session,s=[],o=n.getTokens(e);return t.walk(function(e,t,r,a,l){null!=e?s.push({type:"fold",value:e}):(l&&(o=n.getTokens(t)),o.length&&i(o,a,r))},t.end.row,this.session.getLine(t.end.row).length),s},this.$useLineGroups=function(){return this.session.getUseWrapMode()},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.$measureNode&&this.$measureNode.parentNode.removeChild(this.$measureNode),delete this.$measureNode}}).call(r.prototype),t.Text=r}),define("ace/layer/cursor",["require","exports","module","ace/lib/dom"],function(e,t){"use strict";var i,n=e("../lib/dom"),s=function(e){this.element=n.createElement("div"),this.element.className="ace_layer ace_cursor-layer",e.appendChild(this.element),i===undefined&&(i="opacity"in this.element),this.isVisible=!1,this.isBlinking=!0,this.blinkInterval=1e3,this.smoothBlinking=!1,this.cursors=[],this.cursor=this.addCursor(),n.addCssClass(this.element,"ace_hidden-cursors"),this.$updateCursors=this.$updateVisibility.bind(this)};(function(){this.$updateVisibility=function(e){for(var t=this.cursors,i=t.length;i--;)t[i].style.visibility=e?"":"hidden"},this.$updateOpacity=function(e){for(var t=this.cursors,i=t.length;i--;)t[i].style.opacity=e?"":"0"},this.$padding=0,this.setPadding=function(e){this.$padding=e},this.setSession=function(e){this.session=e},this.setBlinking=function(e){e!=this.isBlinking&&(this.isBlinking=e,this.restartTimer())},this.setBlinkInterval=function(e){e!=this.blinkInterval&&(this.blinkInterval=e,this.restartTimer())},this.setSmoothBlinking=function(e){e==this.smoothBlinking||i||(this.smoothBlinking=e,n.setCssClass(this.element,"ace_smooth-blinking",e),this.$updateCursors(!0),this.$updateCursors=(e?this.$updateOpacity:this.$updateVisibility).bind(this),this.restartTimer())},this.addCursor=function(){var e=n.createElement("div");return e.className="ace_cursor",this.element.appendChild(e),this.cursors.push(e),e},this.removeCursor=function(){if(this.cursors.length>1){var e=this.cursors.pop();return e.parentNode.removeChild(e),e}},this.hideCursor=function(){this.isVisible=!1,n.addCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.showCursor=function(){this.isVisible=!0,n.removeCssClass(this.element,"ace_hidden-cursors"),this.restartTimer()},this.restartTimer=function(){var e=this.$updateCursors;if(clearInterval(this.intervalId),clearTimeout(this.timeoutId),this.smoothBlinking&&n.removeCssClass(this.element,"ace_smooth-blinking"),e(!0),this.isBlinking&&this.blinkInterval&&this.isVisible){this.smoothBlinking&&setTimeout(function(){n.addCssClass(this.element,"ace_smooth-blinking")}.bind(this));var t=function(){this.timeoutId=setTimeout(function(){e(!1)},.6*this.blinkInterval)}.bind(this);this.intervalId=setInterval(function(){e(!0),t()},this.blinkInterval),t()}},this.getPixelPosition=function(e,t){if(!this.config||!this.session)return{left:0,top:0};e||(e=this.session.selection.getCursor());var i=this.session.documentToScreenPosition(e);return{left:this.$padding+i.column*this.config.characterWidth,top:(i.row-(t?this.config.firstRowScreen:0))*this.config.lineHeight}},this.update=function(e){this.config=e;var t=this.session.$selectionMarkers,i=0,n=0;t!==undefined&&0!==t.length||(t=[{cursor:null}]);for(var i=0,s=t.length;i<s;i++){var o=this.getPixelPosition(t[i].cursor,!0);if(!((o.top>e.height+e.offset||o.top<0)&&i>1)){var r=(this.cursors[n++]||this.addCursor()).style;r.left=o.left+"px",r.top=o.top+"px",r.width=e.characterWidth+"px",r.height=e.lineHeight+"px"}}for(;this.cursors.length>n;)this.removeCursor();var a=this.session.getOverwrite();this.$setOverwrite(a),this.$pixelPos=o,this.restartTimer()},this.$setOverwrite=function(e){e!=this.overwrite&&(this.overwrite=e,e?n.addCssClass(this.element,"ace_overwrite-cursors"):n.removeCssClass(this.element,"ace_overwrite-cursors"))},this.destroy=function(){clearInterval(this.intervalId),clearTimeout(this.timeoutId)}}).call(s.prototype),t.Cursor=s}),define("ace/scrollbar",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/event","ace/lib/event_emitter"],function(e,t){"use strict";var i=e("./lib/oop"),n=e("./lib/dom"),s=e("./lib/event"),o=e("./lib/event_emitter").EventEmitter,r=function(e){this.element=n.createElement("div"),this.element.className="ace_scrollbar ace_scrollbar"+this.classSuffix,this.inner=n.createElement("div"),this.inner.className="ace_scrollbar-inner",this.element.appendChild(this.inner),e.appendChild(this.element),this.setVisible(!1),this.skipEvent=!1,s.addListener(this.element,"scroll",this.onScroll.bind(this)),s.addListener(this.element,"mousedown",s.preventDefault)};(function(){i.implement(this,o),this.setVisible=function(e){this.element.style.display=e?"":"none",this.isVisible=e}}).call(r.prototype);var a=function(e,t){r.call(this,e),this.scrollTop=0,t.$scrollbarWidth=this.width=n.scrollbarWidth(e.ownerDocument),this.inner.style.width=this.element.style.width=(this.width||15)+5+"px"};i.inherits(a,r),function(){this.classSuffix="-v",this.onScroll=function(){this.skipEvent||(this.scrollTop=this.element.scrollTop,this._emit("scroll",{data:this.scrollTop})),this.skipEvent=!1},this.getWidth=function(){return this.isVisible?this.width:0},this.setHeight=function(e){this.element.style.height=e+"px"},this.setInnerHeight=function(e){this.inner.style.height=e+"px"},this.setScrollHeight=function(e){this.inner.style.height=e+"px"},this.setScrollTop=function(e){this.scrollTop!=e&&(this.skipEvent=!0,this.scrollTop=this.element.scrollTop=e)}}.call(a.prototype);var l=function(e,t){r.call(this,e),this.scrollLeft=0,this.height=t.$scrollbarWidth,this.inner.style.height=this.element.style.height=(this.height||15)+5+"px"};i.inherits(l,r),function(){this.classSuffix="-h",this.onScroll=function(){this.skipEvent||(this.scrollLeft=this.element.scrollLeft,this._emit("scroll",{data:this.scrollLeft})),this.skipEvent=!1},this.getHeight=function(){return this.isVisible?this.height:0},this.setWidth=function(e){this.element.style.width=e+"px"},this.setInnerWidth=function(e){this.inner.style.width=e+"px"},this.setScrollWidth=function(e){this.inner.style.width=e+"px"},this.setScrollLeft=function(e){this.scrollLeft!=e&&(this.skipEvent=!0,this.scrollLeft=this.element.scrollLeft=e)}}.call(l.prototype),t.ScrollBar=a,t.ScrollBarV=a,t.ScrollBarH=l,t.VScrollBar=a,t.HScrollBar=l}),define("ace/renderloop",["require","exports","module","ace/lib/event"],function(e,t){"use strict";var i=e("./lib/event"),n=function(e,t){this.onRender=e,this.pending=!1,this.changes=0,this.window=t||window};(function(){this.schedule=function(e){if(this.changes=this.changes|e,!this.pending&&this.changes){this.pending=!0;var t=this;i.nextFrame(function(){t.pending=!1;for(var e;e=t.changes;)t.changes=0,t.onRender(e)},this.window)}}}).call(n.prototype),t.RenderLoop=n}),define("ace/layer/font_metrics",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/lib/lang","ace/lib/useragent","ace/lib/event_emitter"],function(e,t){var i=e("../lib/oop"),n=e("../lib/dom"),s=e("../lib/lang"),o=e("../lib/useragent"),r=e("../lib/event_emitter").EventEmitter,a=0,l=t.FontMetrics=function(e){this.el=n.createElement("div"),this.$setMeasureNodeStyles(this.el.style,!0),this.$main=n.createElement("div"),this.$setMeasureNodeStyles(this.$main.style),this.$measureNode=n.createElement("div"),this.$setMeasureNodeStyles(this.$measureNode.style),this.el.appendChild(this.$main),this.el.appendChild(this.$measureNode),e.appendChild(this.el),a||this.$testFractionalRect(),this.$measureNode.innerHTML=s.stringRepeat("X",a),this.$characterSize={width:0,height:0},this.checkForSizeChanges()};(function(){i.implement(this,r),this.$characterSize={width:0,height:0},this.$testFractionalRect=function(){var e=n.createElement("div");this.$setMeasureNodeStyles(e.style),e.style.width="0.2px",document.documentElement.appendChild(e);var t=e.getBoundingClientRect().width;a=t>0&&t<1?50:100,e.parentNode.removeChild(e)},this.$setMeasureNodeStyles=function(e,t){e.width=e.height="auto",e.left=e.top="-100px",e.visibility="hidden",e.position="fixed",e.whiteSpace="pre",o.isIE<8?e["font-family"]="inherit":e.font="inherit",e.overflow=t?"hidden":"visible"},this.checkForSizeChanges=function(){var e=this.$measureSizes();if(e&&(this.$characterSize.width!==e.width||this.$characterSize.height!==e.height)){this.$measureNode.style.fontWeight="bold";var t=this.$measureSizes();this.$measureNode.style.fontWeight="",this.$characterSize=e,this.charSizes=Object.create(null),this.allowBoldFonts=t&&t.width===e.width&&t.height===e.height,this._emit("changeCharacterSize",{data:e})}},this.$pollSizeChanges=function(){if(this.$pollSizeChangesTimer)return this.$pollSizeChangesTimer;var e=this;return this.$pollSizeChangesTimer=setInterval(function(){e.checkForSizeChanges()},500)},this.setPolling=function(e){e?this.$pollSizeChanges():this.$pollSizeChangesTimer&&this.$pollSizeChangesTimer},this.$measureSizes=function(){if(50===a){var e=null;try{e=this.$measureNode.getBoundingClientRect()}catch(t){e={width:0,height:0}}var t={height:e.height,width:e.width/a}}else var t={height:this.$measureNode.clientHeight,width:this.$measureNode.clientWidth/a};return 0===t.width||0===t.height?null:t},this.$measureCharWidth=function(e){return this.$main.innerHTML=s.stringRepeat(e,a),this.$main.getBoundingClientRect().width/a},this.getCharacterWidth=function(e){var t=this.charSizes[e];return t===undefined&&(this.charSizes[e]=this.$measureCharWidth(e)/this.$characterSize.width),t},this.destroy=function(){clearInterval(this.$pollSizeChangesTimer),this.el&&this.el.parentNode&&this.el.parentNode.removeChild(this.el)}}).call(l.prototype)}),define("ace/virtual_renderer",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/config","ace/lib/useragent","ace/layer/gutter","ace/layer/marker","ace/layer/text","ace/layer/cursor","ace/scrollbar","ace/scrollbar","ace/renderloop","ace/layer/font_metrics","ace/lib/event_emitter"],function(e,t){"use strict";var i=e("./lib/oop"),n=e("./lib/dom"),s=e("./config"),o=e("./lib/useragent"),r=e("./layer/gutter").Gutter,a=e("./layer/marker").Marker,l=e("./layer/text").Text,h=e("./layer/cursor").Cursor,c=e("./scrollbar").HScrollBar,u=e("./scrollbar").VScrollBar,d=e("./renderloop").RenderLoop,g=e("./layer/font_metrics").FontMetrics,f=e("./lib/event_emitter").EventEmitter
;n.importCssString('.ace_editor {position: relative;overflow: hidden;font: 12px/normal \'Monaco\', \'Menlo\', \'Ubuntu Mono\', \'Consolas\', \'source-code-pro\', monospace;direction: ltr;}.ace_scroller {position: absolute;overflow: hidden;top: 0;bottom: 0;background-color: inherit;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;cursor: text;}.ace_content {position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;min-width: 100%;}.ace_dragging .ace_scroller:before{position: absolute;top: 0;left: 0;right: 0;bottom: 0;content: \'\';background: rgba(250, 250, 250, 0.01);z-index: 1000;}.ace_dragging.ace_dark .ace_scroller:before{background: rgba(0, 0, 0, 0.01);}.ace_selecting, .ace_selecting * {cursor: text !important;}.ace_gutter {position: absolute;overflow : hidden;width: auto;top: 0;bottom: 0;left: 0;cursor: default;z-index: 4;-ms-user-select: none;-moz-user-select: none;-webkit-user-select: none;user-select: none;}.ace_gutter-active-line {position: absolute;left: 0;right: 0;}.ace_scroller.ace_scroll-left {box-shadow: 17px 0 16px -16px rgba(0, 0, 0, 0.4) inset;}.ace_gutter-cell {padding-left: 19px;padding-right: 6px;background-repeat: no-repeat;}.ace_gutter-cell.ace_error {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAABOFBMVEX/////////QRswFAb/Ui4wFAYwFAYwFAaWGAfDRymzOSH/PxswFAb/SiUwFAYwFAbUPRvjQiDllog5HhHdRybsTi3/Tyv9Tir+Syj/UC3////XurebMBIwFAb/RSHbPx/gUzfdwL3kzMivKBAwFAbbvbnhPx66NhowFAYwFAaZJg8wFAaxKBDZurf/RB6mMxb/SCMwFAYwFAbxQB3+RB4wFAb/Qhy4Oh+4QifbNRcwFAYwFAYwFAb/QRzdNhgwFAYwFAbav7v/Uy7oaE68MBK5LxLewr/r2NXewLswFAaxJw4wFAbkPRy2PyYwFAaxKhLm1tMwFAazPiQwFAaUGAb/QBrfOx3bvrv/VC/maE4wFAbRPBq6MRO8Qynew8Dp2tjfwb0wFAbx6eju5+by6uns4uH9/f36+vr/GkHjAAAAYnRSTlMAGt+64rnWu/bo8eAA4InH3+DwoN7j4eLi4xP99Nfg4+b+/u9B/eDs1MD1mO7+4PHg2MXa347g7vDizMLN4eG+Pv7i5evs/v79yu7S3/DV7/498Yv24eH+4ufQ3Ozu/v7+y13sRqwAAADLSURBVHjaZc/XDsFgGIBhtDrshlitmk2IrbHFqL2pvXf/+78DPokj7+Fz9qpU/9UXJIlhmPaTaQ6QPaz0mm+5gwkgovcV6GZzd5JtCQwgsxoHOvJO15kleRLAnMgHFIESUEPmawB9ngmelTtipwwfASilxOLyiV5UVUyVAfbG0cCPHig+GBkzAENHS0AstVF6bacZIOzgLmxsHbt2OecNgJC83JERmePUYq8ARGkJx6XtFsdddBQgZE2nPR6CICZhawjA4Fb/chv+399kfR+MMMDGOQAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: 2px center;}.ace_gutter-cell.ace_warning {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAMAAAAoLQ9TAAAAmVBMVEX///8AAAD///8AAAAAAABPSzb/5sAAAAB/blH/73z/ulkAAAAAAAD85pkAAAAAAAACAgP/vGz/rkDerGbGrV7/pkQICAf////e0IsAAAD/oED/qTvhrnUAAAD/yHD/njcAAADuv2r/nz//oTj/p064oGf/zHAAAAA9Nir/tFIAAAD/tlTiuWf/tkIAAACynXEAAAAAAAAtIRW7zBpBAAAAM3RSTlMAABR1m7RXO8Ln31Z36zT+neXe5OzooRDfn+TZ4p3h2hTf4t3k3ucyrN1K5+Xaks52Sfs9CXgrAAAAjklEQVR42o3PbQ+CIBQFYEwboPhSYgoYunIqqLn6/z8uYdH8Vmdnu9vz4WwXgN/xTPRD2+sgOcZjsge/whXZgUaYYvT8QnuJaUrjrHUQreGczuEafQCO/SJTufTbroWsPgsllVhq3wJEk2jUSzX3CUEDJC84707djRc5MTAQxoLgupWRwW6UB5fS++NV8AbOZgnsC7BpEAAAAABJRU5ErkJggg==");background-position: 2px center;}.ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQCAAAAAA6mKC9AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAAJ0Uk5TAAB2k804AAAAPklEQVQY02NgIB68QuO3tiLznjAwpKTgNyDbMegwisCHZUETUZV0ZqOquBpXj2rtnpSJT1AEnnRmL2OgGgAAIKkRQap2htgAAAAASUVORK5CYII=");background-position: 2px center;}.ace_dark .ace_gutter-cell.ace_info {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABAAAAAQBAMAAADt3eJSAAAAJFBMVEUAAAChoaGAgIAqKiq+vr6tra1ZWVmUlJSbm5s8PDxubm56enrdgzg3AAAAAXRSTlMAQObYZgAAAClJREFUeNpjYMAPdsMYHegyJZFQBlsUlMFVCWUYKkAZMxZAGdxlDMQBAG+TBP4B6RyJAAAAAElFTkSuQmCC");}.ace_scrollbar {position: absolute;right: 0;bottom: 0;z-index: 6;}.ace_scrollbar-inner {position: absolute;cursor: text;left: 0;top: 0;}.ace_scrollbar-v{overflow-x: hidden;overflow-y: scroll;top: 0;}.ace_scrollbar-h {overflow-x: scroll;overflow-y: hidden;left: 0;}.ace_print-margin {position: absolute;height: 100%;}.ace_text-input {position: absolute;z-index: 0;width: 0.5em;height: 1em;opacity: 0;background: transparent;-moz-appearance: none;appearance: none;border: none;resize: none;outline: none;overflow: hidden;font: inherit;padding: 0 1px;margin: 0 -1px;text-indent: -1em;-ms-user-select: text;-moz-user-select: text;-webkit-user-select: text;user-select: text;}.ace_text-input.ace_composition {background: inherit;color: inherit;z-index: 1000;opacity: 1;text-indent: 0;}.ace_layer {z-index: 1;position: absolute;overflow: hidden;white-space: pre;height: 100%;width: 100%;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;pointer-events: none;}.ace_gutter-layer {position: relative;width: auto;text-align: right;pointer-events: auto;}.ace_text-layer {font: inherit !important;}.ace_cjk {display: inline-block;text-align: center;}.ace_cursor-layer {z-index: 4;}.ace_cursor {z-index: 4;position: absolute;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;border-left: 2px solid}.ace_slim-cursors .ace_cursor {border-left-width: 1px;}.ace_overwrite-cursors .ace_cursor {border-left-width: 0;border-bottom: 1px solid;}.ace_hidden-cursors .ace_cursor {opacity: 0.2;}.ace_smooth-blinking .ace_cursor {-webkit-transition: opacity 0.18s;transition: opacity 0.18s;}.ace_editor.ace_multiselect .ace_cursor {border-left-width: 1px;}.ace_marker-layer .ace_step, .ace_marker-layer .ace_stack {position: absolute;z-index: 3;}.ace_marker-layer .ace_selection {position: absolute;z-index: 5;}.ace_marker-layer .ace_bracket {position: absolute;z-index: 6;}.ace_marker-layer .ace_active-line {position: absolute;z-index: 2;}.ace_marker-layer .ace_selected-word {position: absolute;z-index: 4;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;}.ace_line .ace_fold {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;display: inline-block;height: 11px;margin-top: -2px;vertical-align: middle;background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACJJREFUeNpi+P//fxgTAwPDBxDxD078RSX+YeEyDFMCIMAAI3INmXiwf2YAAAAASUVORK5CYII=");background-repeat: no-repeat, repeat-x;background-position: center center, top left;color: transparent;border: 1px solid black;border-radius: 2px;cursor: pointer;pointer-events: auto;}.ace_dark .ace_fold {}.ace_fold:hover{background-image:url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAABEAAAAJCAYAAADU6McMAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAAJpJREFUeNpi/P//PwOlgAXGYGRklAVSokD8GmjwY1wasKljQpYACtpCFeADcHVQfQyMQAwzwAZI3wJKvCLkfKBaMSClBlR7BOQikCFGQEErIH0VqkabiGCAqwUadAzZJRxQr/0gwiXIal8zQQPnNVTgJ1TdawL0T5gBIP1MUJNhBv2HKoQHHjqNrA4WO4zY0glyNKLT2KIfIMAAQsdgGiXvgnYAAAAASUVORK5CYII="),url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAA3CAYAAADNNiA5AAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJbWFnZVJlYWR5ccllPAAAACBJREFUeNpi+P//fz4TAwPDZxDxD5X4i5fLMEwJgAADAEPVDbjNw87ZAAAAAElFTkSuQmCC");}.ace_tooltip {background-color: #FFF;background-image: -webkit-linear-gradient(top, transparent, rgba(0, 0, 0, 0.1));background-image: linear-gradient(to bottom, transparent, rgba(0, 0, 0, 0.1));border: 1px solid gray;border-radius: 1px;box-shadow: 0 1px 2px rgba(0, 0, 0, 0.3);color: black;max-width: 100%;padding: 3px 4px;position: fixed;z-index: 999999;-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;cursor: default;white-space: pre;word-wrap: break-word;line-height: normal;font-style: normal;font-weight: normal;letter-spacing: normal;pointer-events: none;}.ace_folding-enabled > .ace_gutter-cell {padding-right: 13px;}.ace_fold-widget {-moz-box-sizing: border-box;-webkit-box-sizing: border-box;box-sizing: border-box;margin: 0 -12px 0 1px;display: none;width: 11px;vertical-align: top;background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42mWKsQ0AMAzC8ixLlrzQjzmBiEjp0A6WwBCSPgKAXoLkqSot7nN3yMwR7pZ32NzpKkVoDBUxKAAAAABJRU5ErkJggg==");background-repeat: no-repeat;background-position: center;border-radius: 3px;border: 1px solid transparent;cursor: pointer;}.ace_folding-enabled .ace_fold-widget {display: inline-block;   }.ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAANElEQVR42m3HwQkAMAhD0YzsRchFKI7sAikeWkrxwScEB0nh5e7KTPWimZki4tYfVbX+MNl4pyZXejUO1QAAAABJRU5ErkJggg==");}.ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAGCAYAAAAG5SQMAAAAOUlEQVR42jXKwQkAMAgDwKwqKD4EwQ26sSOkVWjgIIHAzPiCgaqiqnJHZnKICBERHN194O5b9vbLuAVRL+l0YWnZAAAAAElFTkSuQmCCXA==");}.ace_fold-widget:hover {border: 1px solid rgba(0, 0, 0, 0.3);background-color: rgba(255, 255, 255, 0.2);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.7);}.ace_fold-widget:active {border: 1px solid rgba(0, 0, 0, 0.4);background-color: rgba(0, 0, 0, 0.05);box-shadow: 0 1px 1px rgba(255, 255, 255, 0.8);}.ace_dark .ace_fold-widget {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHklEQVQIW2P4//8/AzoGEQ7oGCaLLAhWiSwB146BAQCSTPYocqT0AAAAAElFTkSuQmCC");}.ace_dark .ace_fold-widget.ace_end {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAH0lEQVQIW2P4//8/AxQ7wNjIAjDMgC4AxjCVKBirIAAF0kz2rlhxpAAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget.ace_closed {background-image: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAMAAAAFCAYAAACAcVaiAAAAHElEQVQIW2P4//+/AxAzgDADlOOAznHAKgPWAwARji8UIDTfQQAAAABJRU5ErkJggg==");}.ace_dark .ace_fold-widget:hover {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);background-color: rgba(255, 255, 255, 0.1);}.ace_dark .ace_fold-widget:active {box-shadow: 0 1px 1px rgba(255, 255, 255, 0.2);}.ace_fold-widget.ace_invalid {background-color: #FFB4B4;border-color: #DE5555;}.ace_fade-fold-widgets .ace_fold-widget {-webkit-transition: opacity 0.4s ease 0.05s;transition: opacity 0.4s ease 0.05s;opacity: 0;}.ace_fade-fold-widgets:hover .ace_fold-widget {-webkit-transition: opacity 0.05s ease 0.05s;transition: opacity 0.05s ease 0.05s;opacity:1;}.ace_underline {text-decoration: underline;}.ace_bold {font-weight: bold;}.ace_nobold .ace_bold {font-weight: normal;}.ace_italic {font-style: italic;}.ace_error-marker {background-color: rgba(255, 0, 0,0.2);position: absolute;z-index: 9;}.ace_highlight-marker {background-color: rgba(255, 255, 0,0.2);position: absolute;z-index: 8;}',"ace_editor");var m=function(e,t){var i=this;this.container=e||n.createElement("div"),this.$keepTextAreaAtCursor=!o.isOldIE,n.addCssClass(this.container,"ace_editor"),this.setTheme(t),this.$gutter=n.createElement("div"),this.$gutter.className="ace_gutter",this.container.appendChild(this.$gutter),this.scroller=n.createElement("div"),this.scroller.className="ace_scroller",this.container.appendChild(this.scroller),this.content=n.createElement("div"),this.content.className="ace_content",this.scroller.appendChild(this.content),this.$gutterLayer=new r(this.$gutter),this.$gutterLayer.on("changeGutterWidth",this.onGutterResize.bind(this)),this.$markerBack=new a(this.content);var f=this.$textLayer=new l(this.content);this.canvas=f.element,this.$markerFront=new a(this.content),this.$cursorLayer=new h(this.content),this.$horizScroll=!1,this.$vScroll=!1,this.scrollBar=this.scrollBarV=new u(this.container,this),this.scrollBarH=new c(this.container,this),this.scrollBarV.addEventListener("scroll",function(e){i.$scrollAnimation||i.session.setScrollTop(e.data-i.scrollMargin.top)}),this.scrollBarH.addEventListener("scroll",function(e){i.$scrollAnimation||i.session.setScrollLeft(e.data-i.scrollMargin.left)}),this.scrollTop=0,this.scrollLeft=0,this.cursorPos={row:0,column:0},this.$fontMetrics=new g(this.container,500),this.$textLayer.$setFontMetrics(this.$fontMetrics),this.$textLayer.addEventListener("changeCharacterSize",function(e){i.updateCharacterSize(),i.onResize(!0,i.gutterWidth,i.$size.width,i.$size.height),i._signal("changeCharacterSize",e)}),this.$size={width:0,height:0,scrollerHeight:0,scrollerWidth:0,$dirty:!0},this.layerConfig={width:1,padding:0,firstRow:0,firstRowScreen:0,lastRow:0,lineHeight:0,characterWidth:0,minHeight:1,maxHeight:1,offset:0,height:1,gutterOffset:1},this.scrollMargin={left:0,right:0,top:0,bottom:0,v:0,h:0},this.$loop=new d(this.$renderChanges.bind(this),this.container.ownerDocument.defaultView),this.$loop.schedule(this.CHANGE_FULL),this.updateCharacterSize(),this.setPadding(4),s.resetOptions(this),s._emit("renderer",this)};(function(){this.CHANGE_CURSOR=1,this.CHANGE_MARKER=2,this.CHANGE_GUTTER=4,this.CHANGE_SCROLL=8,this.CHANGE_LINES=16,this.CHANGE_TEXT=32,this.CHANGE_SIZE=64,this.CHANGE_MARKER_BACK=128,this.CHANGE_MARKER_FRONT=256,this.CHANGE_FULL=512,this.CHANGE_H_SCROLL=1024,i.implement(this,f),this.updateCharacterSize=function(){this.$textLayer.allowBoldFonts!=this.$allowBoldFonts&&(this.$allowBoldFonts=this.$textLayer.allowBoldFonts,this.setStyle("ace_nobold",!this.$allowBoldFonts)),this.layerConfig.characterWidth=this.characterWidth=this.$textLayer.getCharacterWidth(),this.layerConfig.lineHeight=this.lineHeight=this.$textLayer.getLineHeight(),this.$updatePrintMargin()},this.setSession=function(e){this.session&&this.session.doc.off("changeNewLineMode",this.onChangeNewLineMode),this.session=e,e&&this.scrollMargin.top&&e.getScrollTop()<=0&&e.setScrollTop(-this.scrollMargin.top),this.$cursorLayer.setSession(e),this.$markerBack.setSession(e),this.$markerFront.setSession(e),this.$gutterLayer.setSession(e),this.$textLayer.setSession(e),e&&(this.$loop.schedule(this.CHANGE_FULL),this.session.$setFontMetrics(this.$fontMetrics),this.onChangeNewLineMode=this.onChangeNewLineMode.bind(this),this.onChangeNewLineMode(),this.session.doc.on("changeNewLineMode",this.onChangeNewLineMode))},this.updateLines=function(e,t,i){if(t===undefined&&(t=Infinity),this.$changedLines?(this.$changedLines.firstRow>e&&(this.$changedLines.firstRow=e),this.$changedLines.lastRow<t&&(this.$changedLines.lastRow=t)):this.$changedLines={firstRow:e,lastRow:t},this.$changedLines.lastRow<this.layerConfig.firstRow){if(!i)return;this.$changedLines.lastRow=this.layerConfig.lastRow}this.$changedLines.firstRow>this.layerConfig.lastRow||this.$loop.schedule(this.CHANGE_LINES)},this.onChangeNewLineMode=function(){this.$loop.schedule(this.CHANGE_TEXT),this.$textLayer.$updateEolChar()},this.onChangeTabSize=function(){this.$loop.schedule(this.CHANGE_TEXT|this.CHANGE_MARKER),this.$textLayer.onChangeTabSize()},this.updateText=function(){this.$loop.schedule(this.CHANGE_TEXT)},this.updateFull=function(e){e?this.$renderChanges(this.CHANGE_FULL,!0):this.$loop.schedule(this.CHANGE_FULL)},this.updateFontSize=function(){this.$textLayer.checkForSizeChanges()},this.$changes=0,this.$updateSizeAsync=function(){this.$loop.pending?this.$size.$dirty=!0:this.onResize()},this.onResize=function(e,t,i,n){if(!(this.resizing>2)){this.resizing>0?this.resizing++:this.resizing=e?1:0;var s=this.container;n||(n=s.clientHeight||s.scrollHeight),i||(i=s.clientWidth||s.scrollWidth);var o=this.$updateCachedSize(e,t,i,n);if(!this.$size.scrollerHeight||!i&&!n)return this.resizing=0;e&&(this.$gutterLayer.$padding=null),e?this.$renderChanges(o|this.$changes,!0):this.$loop.schedule(o|this.$changes),this.resizing&&(this.resizing=0)}},this.$updateCachedSize=function(e,t,i,n){n-=this.$extraHeight||0;var s=0,o=this.$size,r={width:o.width,height:o.height,scrollerHeight:o.scrollerHeight,scrollerWidth:o.scrollerWidth};return n&&(e||o.height!=n)&&(o.height=n,s|=this.CHANGE_SIZE,o.scrollerHeight=o.height,this.$horizScroll&&(o.scrollerHeight-=this.scrollBarH.getHeight()),this.scrollBarV.element.style.bottom=this.scrollBarH.getHeight()+"px",s|=this.CHANGE_SCROLL),i&&(e||o.width!=i)&&(s|=this.CHANGE_SIZE,o.width=i,null==t&&(t=this.$showGutter?this.$gutter.offsetWidth:0),this.gutterWidth=t,this.scrollBarH.element.style.left=this.scroller.style.left=t+"px",o.scrollerWidth=Math.max(0,i-t-this.scrollBarV.getWidth()),this.scrollBarH.element.style.right=this.scroller.style.right=this.scrollBarV.getWidth()+"px",this.scroller.style.bottom=this.scrollBarH.getHeight()+"px",(this.session&&this.session.getUseWrapMode()&&this.adjustWrapLimit()||e)&&(s|=this.CHANGE_FULL)),o.$dirty=!i||!n,s&&this._signal("resize",r),s},this.onGutterResize=function(){var e=this.$showGutter?this.$gutter.offsetWidth:0;e!=this.gutterWidth&&(this.$changes|=this.$updateCachedSize(!0,e,this.$size.width,this.$size.height)),this.session.getUseWrapMode()&&this.adjustWrapLimit()?this.$loop.schedule(this.CHANGE_FULL):this.$size.$dirty?this.$loop.schedule(this.CHANGE_FULL):(this.$computeLayerConfig(),this.$loop.schedule(this.CHANGE_MARKER))},this.adjustWrapLimit=function(){var e=this.$size.scrollerWidth-2*this.$padding,t=Math.floor(e/this.characterWidth);return this.session.adjustWrapLimit(t,this.$showPrintMargin&&this.$printMarginColumn)},this.setAnimatedScroll=function(e){this.setOption("animatedScroll",e)},this.getAnimatedScroll=function(){return this.$animatedScroll},this.setShowInvisibles=function(e){this.setOption("showInvisibles",e)},this.getShowInvisibles=function(){return this.getOption("showInvisibles")},this.getDisplayIndentGuides=function(){return this.getOption("displayIndentGuides")},this.setDisplayIndentGuides=function(e){this.setOption("displayIndentGuides",e)},this.setShowPrintMargin=function(e){this.setOption("showPrintMargin",e)},this.getShowPrintMargin=function(){return this.getOption("showPrintMargin")},this.setPrintMarginColumn=function(e){this.setOption("printMarginColumn",e)},this.getPrintMarginColumn=function(){return this.getOption("printMarginColumn")},this.getShowGutter=function(){return this.getOption("showGutter")},this.setShowGutter=function(e){return this.setOption("showGutter",e)},this.getFadeFoldWidgets=function(){return this.getOption("fadeFoldWidgets")},this.setFadeFoldWidgets=function(e){this.setOption("fadeFoldWidgets",e)},this.setHighlightGutterLine=function(e){this.setOption("highlightGutterLine",e)},this.getHighlightGutterLine=function(){return this.getOption("highlightGutterLine")},this.$updateGutterLineHighlight=function(){var e=this.$cursorLayer.$pixelPos,t=this.layerConfig.lineHeight;if(this.session.getUseWrapMode()){var i=this.session.selection.getCursor();i.column=0,e=this.$cursorLayer.getPixelPosition(i,!0),t*=this.session.getRowLength(i.row)}this.$gutterLineHighlight.style.top=e.top-this.layerConfig.offset+"px",this.$gutterLineHighlight.style.height=t+"px"},this.$updatePrintMargin=function(){if(this.$showPrintMargin||this.$printMarginEl){if(!this.$printMarginEl){var e=n.createElement("div");e.className="ace_layer ace_print-margin-layer",this.$printMarginEl=n.createElement("div"),this.$printMarginEl.className="ace_print-margin",e.appendChild(this.$printMarginEl),this.content.insertBefore(e,this.content.firstChild)}var t=this.$printMarginEl.style;t.left=this.characterWidth*this.$printMarginColumn+this.$padding+"px",t.visibility=this.$showPrintMargin?"visible":"hidden",this.session&&-1==this.session.$wrap&&this.adjustWrapLimit()}},this.getContainerElement=function(){return this.container},this.getMouseEventTarget=function(){return this.content},this.getTextAreaContainer=function(){return this.container},this.$moveTextAreaToCursor=function(){if(this.$keepTextAreaAtCursor){var e=this.layerConfig,t=this.$cursorLayer.$pixelPos.top,i=this.$cursorLayer.$pixelPos.left;t-=e.offset;var n=this.lineHeight;if(!(t<0||t>e.height-n)){var s=this.characterWidth;if(this.$composition){var o=this.textarea.value.replace(/^\x01+/,"");s*=this.session.$getStringScreenWidth(o)[0]+2,n+=2}i-=this.scrollLeft,i>this.$size.scrollerWidth-s&&(i=this.$size.scrollerWidth-s),i+=this.gutterWidth,this.textarea.style.height=n+"px",this.textarea.style.width=s+"px",this.textarea.style.left=Math.min(i,this.$size.scrollerWidth-s)+"px",this.textarea.style.top=Math.min(t,this.$size.height-n)+"px"}}},this.getFirstVisibleRow=function(){return this.layerConfig.firstRow},this.getFirstFullyVisibleRow=function(){return this.layerConfig.firstRow+(0===this.layerConfig.offset?0:1)},this.getLastFullyVisibleRow=function(){var e=Math.floor((this.layerConfig.height+this.layerConfig.offset)/this.layerConfig.lineHeight);return this.layerConfig.firstRow-1+e},this.getLastVisibleRow=function(){return this.layerConfig.lastRow},this.$padding=null,this.setPadding=function(e){this.$padding=e,this.$textLayer.setPadding(e),this.$cursorLayer.setPadding(e),this.$markerFront.setPadding(e),this.$markerBack.setPadding(e),this.$loop.schedule(this.CHANGE_FULL),this.$updatePrintMargin()},this.setScrollMargin=function(e,t,i,n){var s=this.scrollMargin;s.top=0|e,s.bottom=0|t,s.right=0|n,s.left=0|i,s.v=s.top+s.bottom,s.h=s.left+s.right,s.top&&this.scrollTop<=0&&this.session&&this.session.setScrollTop(-s.top),this.updateFull()},this.getHScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setHScrollBarAlwaysVisible=function(e){this.setOption("hScrollBarAlwaysVisible",e)},this.getVScrollBarAlwaysVisible=function(){return this.$hScrollBarAlwaysVisible},this.setVScrollBarAlwaysVisible=function(e){this.setOption("vScrollBarAlwaysVisible",e)},this.$updateScrollBarV=function(){var e=this.layerConfig.maxHeight,t=this.$size.scrollerHeight;!this.$maxLines&&this.$scrollPastEnd&&(e-=(t-this.lineHeight)*this.$scrollPastEnd,this.scrollTop>e-t&&(e=this.scrollTop+t,this.scrollBarV.scrollTop=null)),this.scrollBarV.setScrollHeight(e+this.scrollMargin.v),this.scrollBarV.setScrollTop(this.scrollTop+this.scrollMargin.top)},this.$updateScrollBarH=function(){this.scrollBarH.setScrollWidth(this.layerConfig.width+2*this.$padding+this.scrollMargin.h),this.scrollBarH.setScrollLeft(this.scrollLeft+this.scrollMargin.left)},this.$frozen=!1,this.freeze=function(){this.$frozen=!0},this.unfreeze=function(){this.$frozen=!1},this.$renderChanges=function(e,t){if(this.$changes&&(e|=this.$changes,this.$changes=0),!this.session||!this.container.offsetWidth||this.$frozen||!e&&!t)return void(this.$changes|=e);if(this.$size.$dirty)return this.$changes|=e,this.onResize(!0);this.lineHeight||this.$textLayer.checkForSizeChanges(),this._signal("beforeRender");var i=this.layerConfig;if(e&this.CHANGE_FULL||e&this.CHANGE_SIZE||e&this.CHANGE_TEXT||e&this.CHANGE_LINES||e&this.CHANGE_SCROLL||e&this.CHANGE_H_SCROLL){if(e|=this.$computeLayerConfig(),i.firstRow!=this.layerConfig.firstRow&&i.firstRowScreen==this.layerConfig.firstRowScreen){var n=this.scrollTop+(i.firstRow-this.layerConfig.firstRow)*this.lineHeight;n>0&&(this.scrollTop=n,e|=this.CHANGE_SCROLL,e|=this.$computeLayerConfig())}i=this.layerConfig,this.$updateScrollBarV(),e&this.CHANGE_H_SCROLL&&this.$updateScrollBarH(),this.$gutterLayer.element.style.marginTop=-i.offset+"px",this.content.style.marginTop=-i.offset+"px",this.content.style.width=i.width+2*this.$padding+"px",this.content.style.height=i.minHeight+"px"}return e&this.CHANGE_H_SCROLL&&(this.content.style.marginLeft=-this.scrollLeft+"px",this.scroller.className=this.scrollLeft<=0?"ace_scroller":"ace_scroller ace_scroll-left"),e&this.CHANGE_FULL?(this.$textLayer.update(i),this.$showGutter&&this.$gutterLayer.update(i),this.$markerBack.update(i),this.$markerFront.update(i),this.$cursorLayer.update(i),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),void this._signal("afterRender")):e&this.CHANGE_SCROLL?(e&this.CHANGE_TEXT||e&this.CHANGE_LINES?this.$textLayer.update(i):this.$textLayer.scrollLines(i),this.$showGutter&&this.$gutterLayer.update(i),this.$markerBack.update(i),this.$markerFront.update(i),this.$cursorLayer.update(i),this.$highlightGutterLine&&this.$updateGutterLineHighlight(),this.$moveTextAreaToCursor(),void this._signal("afterRender")):(e&this.CHANGE_TEXT?(this.$textLayer.update(i),this.$showGutter&&this.$gutterLayer.update(i)):e&this.CHANGE_LINES?(this.$updateLines()||e&this.CHANGE_GUTTER&&this.$showGutter)&&this.$gutterLayer.update(i):(e&this.CHANGE_TEXT||e&this.CHANGE_GUTTER)&&this.$showGutter&&this.$gutterLayer.update(i),e&this.CHANGE_CURSOR&&(this.$cursorLayer.update(i),this.$moveTextAreaToCursor(),this.$highlightGutterLine&&this.$updateGutterLineHighlight()),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_FRONT)&&this.$markerFront.update(i),e&(this.CHANGE_MARKER|this.CHANGE_MARKER_BACK)&&this.$markerBack.update(i),void this._signal("afterRender"))},this.$autosize=function(){var e=this.session.getScreenLength()*this.lineHeight,t=this.$maxLines*this.lineHeight,i=Math.max((this.$minLines||1)*this.lineHeight,Math.min(t,e))+this.scrollMargin.v+(this.$extraHeight||0),n=e>t;if(i!=this.desiredHeight||this.$size.height!=this.desiredHeight||n!=this.$vScroll){n!=this.$vScroll&&(this.$vScroll=n,this.scrollBarV.setVisible(n));var s=this.container.clientWidth;this.container.style.height=i+"px",this.$updateCachedSize(!0,this.$gutterWidth,s,i),this.desiredHeight=i,this._signal("autosize")}},this.$computeLayerConfig=function(){this.$maxLines&&this.lineHeight>1&&this.$autosize();var e=this.session,t=this.$size,i=t.height<=2*this.lineHeight,n=this.session.getScreenLength(),s=n*this.lineHeight,o=this.scrollTop%this.lineHeight,r=t.scrollerHeight+this.lineHeight,a=this.$getLongestLine(),l=!i&&(this.$hScrollBarAlwaysVisible||t.scrollerWidth-a-2*this.$padding<0),h=this.$horizScroll!==l;h&&(this.$horizScroll=l,this.scrollBarH.setVisible(l));var c=!this.$maxLines&&this.$scrollPastEnd?(t.scrollerHeight-this.lineHeight)*this.$scrollPastEnd:0;s+=c,this.session.setScrollTop(Math.max(-this.scrollMargin.top,Math.min(this.scrollTop,s-t.scrollerHeight+this.scrollMargin.bottom))),this.session.setScrollLeft(Math.max(-this.scrollMargin.left,Math.min(this.scrollLeft,a+2*this.$padding-t.scrollerWidth+this.scrollMargin.right)));var u=!i&&(this.$vScrollBarAlwaysVisible||t.scrollerHeight-s+c<0||this.scrollTop),d=this.$vScroll!==u;d&&(this.$vScroll=u,this.scrollBarV.setVisible(u));var g,f,m=Math.ceil(r/this.lineHeight)-1,p=Math.max(0,Math.round((this.scrollTop-o)/this.lineHeight)),A=p+m,C=this.lineHeight;p=e.screenToDocumentRow(p,0);var F=e.getFoldLine(p);F&&(p=F.start.row),g=e.documentToScreenRow(p,0),f=e.getRowLength(p)*C,A=Math.min(e.screenToDocumentRow(A,0),e.getLength()-1),r=t.scrollerHeight+e.getRowLength(A)*C+f,o=this.scrollTop-g*C;var v=0;return this.layerConfig.width!=a&&(v=this.CHANGE_H_SCROLL),(h||d)&&(v=this.$updateCachedSize(!0,this.gutterWidth,t.width,t.height),this._signal("scrollbarVisibilityChanged"),d&&(a=this.$getLongestLine())),this.layerConfig={width:a,padding:this.$padding,firstRow:p,firstRowScreen:g,lastRow:A,lineHeight:C,characterWidth:this.characterWidth,minHeight:r,maxHeight:s,offset:o,gutterOffset:Math.max(0,Math.ceil((o+t.height-t.scrollerHeight)/C)),height:this.$size.scrollerHeight},v},this.$updateLines=function(){var e=this.$changedLines.firstRow,t=this.$changedLines.lastRow;this.$changedLines=null;var i=this.layerConfig;if(!(e>i.lastRow+1||t<i.firstRow))return t===Infinity?(this.$showGutter&&this.$gutterLayer.update(i),void this.$textLayer.update(i)):(this.$textLayer.updateLines(i,e,t),!0)},this.$getLongestLine=function(){var e=this.session.getScreenWidth();return this.showInvisibles&&!this.session.$useWrapMode&&(e+=1),Math.max(this.$size.scrollerWidth-2*this.$padding,Math.round(e*this.characterWidth))},this.updateFrontMarkers=function(){this.$markerFront.setMarkers(this.session.getMarkers(!0)),this.$loop.schedule(this.CHANGE_MARKER_FRONT)},this.updateBackMarkers=function(){this.$markerBack.setMarkers(this.session.getMarkers()),this.$loop.schedule(this.CHANGE_MARKER_BACK)},this.addGutterDecoration=function(e,t){this.$gutterLayer.addGutterDecoration(e,t)},this.removeGutterDecoration=function(e,t){this.$gutterLayer.removeGutterDecoration(e,t)},this.updateBreakpoints=function(){this.$loop.schedule(this.CHANGE_GUTTER)},this.setAnnotations=function(e){this.$gutterLayer.setAnnotations(e),this.$loop.schedule(this.CHANGE_GUTTER)},this.updateCursor=function(){this.$loop.schedule(this.CHANGE_CURSOR)},this.hideCursor=function(){this.$cursorLayer.hideCursor()},this.showCursor=function(){this.$cursorLayer.showCursor()},this.scrollSelectionIntoView=function(e,t,i){this.scrollCursorIntoView(e,i),this.scrollCursorIntoView(t,i)},this.scrollCursorIntoView=function(e,t,i){if(0!==this.$size.scrollerHeight){var n=this.$cursorLayer.getPixelPosition(e),s=n.left,o=n.top,r=i&&i.top||0,a=i&&i.bottom||0,l=this.$scrollAnimation?this.session.getScrollTop():this.scrollTop;l+r>o?(t&&(o-=t*this.$size.scrollerHeight),0===o&&(o=-this.scrollMargin.top),this.session.setScrollTop(o)):l+this.$size.scrollerHeight-a<o+this.lineHeight&&(t&&(o+=t*this.$size.scrollerHeight),this.session.setScrollTop(o+this.lineHeight-this.$size.scrollerHeight));var h=this.scrollLeft;h>s?(s<this.$padding+2*this.layerConfig.characterWidth&&(s=-this.scrollMargin.left),this.session.setScrollLeft(s)):h+this.$size.scrollerWidth<s+this.characterWidth?this.session.setScrollLeft(Math.round(s+this.characterWidth-this.$size.scrollerWidth)):h<=this.$padding&&s-h<this.characterWidth&&this.session.setScrollLeft(0)}},this.getScrollTop=function(){return this.session.getScrollTop()},this.getScrollLeft=function(){return this.session.getScrollLeft()},this.getScrollTopRow=function(){return this.scrollTop/this.lineHeight},this.getScrollBottomRow=function(){return Math.max(0,Math.floor((this.scrollTop+this.$size.scrollerHeight)/this.lineHeight)-1)},this.scrollToRow=function(e){this.session.setScrollTop(e*this.lineHeight)},this.alignCursor=function(e,t){"number"==typeof e&&(e={row:e,column:0});var i=this.$cursorLayer.getPixelPosition(e),n=this.$size.scrollerHeight-this.lineHeight,s=i.top-n*(t||0);return this.session.setScrollTop(s),s},this.STEPS=8,this.$calcSteps=function(e,t){var i=0,n=this.STEPS,s=[],o=function(e,t,i){return i*(Math.pow(e-1,3)+1)+t};for(i=0;i<n;++i)s.push(o(i/this.STEPS,e,t-e));return s},this.scrollToLine=function(e,t,i,n){var s=this.$cursorLayer.getPixelPosition({row:e,column:0}),o=s.top;t&&(o-=this.$size.scrollerHeight/2);var r=this.scrollTop;this.session.setScrollTop(o),!1!==i&&this.animateScrolling(r,n)},this.animateScrolling=function(e,t){var i=this.scrollTop;if(this.$animatedScroll){var n=this;if(e!=i){if(this.$scrollAnimation){var s=this.$scrollAnimation.steps;if(s.length&&(e=s[0])==i)return}var o=n.$calcSteps(e,i);this.$scrollAnimation={from:e,to:i,steps:o},clearInterval(this.$timer),n.session.setScrollTop(o.shift()),n.session.$scrollTop=i,this.$timer=setInterval(function(){o.length?(n.session.setScrollTop(o.shift()),n.session.$scrollTop=i):null!=i?(n.session.$scrollTop=-1,n.session.setScrollTop(i),i=null):(n.$timer=clearInterval(n.$timer),n.$scrollAnimation=null,t&&t())},10)}}},this.scrollToY=function(e){this.scrollTop!==e&&(this.$loop.schedule(this.CHANGE_SCROLL),this.scrollTop=e)},this.scrollToX=function(e){this.scrollLeft!==e&&(this.scrollLeft=e),this.$loop.schedule(this.CHANGE_H_SCROLL)},this.scrollTo=function(e,t){this.session.setScrollTop(t),this.session.setScrollLeft(t)},this.scrollBy=function(e,t){t&&this.session.setScrollTop(this.session.getScrollTop()+t),e&&this.session.setScrollLeft(this.session.getScrollLeft()+e)},this.isScrollableBy=function(e,t){return t<0&&this.session.getScrollTop()>=1-this.scrollMargin.top||(t>0&&this.session.getScrollTop()+this.$size.scrollerHeight-this.layerConfig.maxHeight<-1+this.scrollMargin.bottom||(e<0&&this.session.getScrollLeft()>=1-this.scrollMargin.left||(e>0&&this.session.getScrollLeft()+this.$size.scrollerWidth-this.layerConfig.width<-1+this.scrollMargin.right||void 0)))},this.pixelToScreenCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect(),n=(e+this.scrollLeft-i.left-this.$padding)/this.characterWidth,s=Math.floor((t+this.scrollTop-i.top)/this.lineHeight),o=Math.round(n);return{row:s,column:o,side:n-o>0?1:-1}},this.screenToTextCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect(),n=Math.round((e+this.scrollLeft-i.left-this.$padding)/this.characterWidth),s=(t+this.scrollTop-i.top)/this.lineHeight;return this.session.screenToDocumentPosition(s,Math.max(n,0))},this.textToScreenCoordinates=function(e,t){var i=this.scroller.getBoundingClientRect(),n=this.session.documentToScreenPosition(e,t),s=this.$padding+Math.round(n.column*this.characterWidth),o=n.row*this.lineHeight;return{pageX:i.left+s-this.scrollLeft,pageY:i.top+o-this.scrollTop}},this.visualizeFocus=function(){n.addCssClass(this.container,"ace_focus")},this.visualizeBlur=function(){
n.removeCssClass(this.container,"ace_focus")},this.showComposition=function(){this.$composition||(this.$composition={keepTextAreaAtCursor:this.$keepTextAreaAtCursor,cssText:this.textarea.style.cssText}),this.$keepTextAreaAtCursor=!0,n.addCssClass(this.textarea,"ace_composition"),this.textarea.style.cssText="",this.$moveTextAreaToCursor()},this.setCompositionText=function(){this.$moveTextAreaToCursor()},this.hideComposition=function(){this.$composition&&(n.removeCssClass(this.textarea,"ace_composition"),this.$keepTextAreaAtCursor=this.$composition.keepTextAreaAtCursor,this.textarea.style.cssText=this.$composition.cssText,this.$composition=null)},this.setTheme=function(e,t){function i(i){if(o.$themeId!=e)return t&&t();if(i.cssClass){n.importCssString(i.cssText,i.cssClass,o.container.ownerDocument),o.theme&&n.removeCssClass(o.container,o.theme.cssClass);var s="padding"in i?i.padding:"padding"in(o.theme||{})?4:o.$padding;o.$padding&&s!=o.$padding&&o.setPadding(s),o.$theme=i.cssClass,o.theme=i,n.addCssClass(o.container,i.cssClass),n.setCssClass(o.container,"ace_dark",i.isDark),o.$size&&(o.$size.width=0,o.$updateSizeAsync()),o._dispatchEvent("themeLoaded",{theme:i}),t&&t()}}var o=this;if(this.$themeId=e,o._dispatchEvent("themeChange",{theme:e}),e&&"string"!=typeof e)i(e);else{var r=e||this.$options.theme.initialValue;s.loadModule(["theme",r],i)}},this.getTheme=function(){return this.$themeId},this.setStyle=function(e,t){n.setCssClass(this.container,e,!1!==t)},this.unsetStyle=function(e){n.removeCssClass(this.container,e)},this.setCursorStyle=function(e){this.scroller.style.cursor!=e&&(this.scroller.style.cursor=e)},this.setMouseCursor=function(e){this.scroller.style.cursor=e},this.destroy=function(){this.$textLayer.destroy(),this.$cursorLayer.destroy()}}).call(m.prototype),s.defineOptions(m.prototype,"renderer",{animatedScroll:{initialValue:!1},showInvisibles:{set:function(e){this.$textLayer.setShowInvisibles(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!1},showPrintMargin:{set:function(){this.$updatePrintMargin()},initialValue:!0},printMarginColumn:{set:function(){this.$updatePrintMargin()},initialValue:80},printMargin:{set:function(e){"number"==typeof e&&(this.$printMarginColumn=e),this.$showPrintMargin=!!e,this.$updatePrintMargin()},get:function(){return this.$showPrintMargin&&this.$printMarginColumn}},showGutter:{set:function(e){this.$gutter.style.display=e?"block":"none",this.$loop.schedule(this.CHANGE_FULL),this.onGutterResize()},initialValue:!0},fadeFoldWidgets:{set:function(e){n.setCssClass(this.$gutter,"ace_fade-fold-widgets",e)},initialValue:!1},showFoldWidgets:{set:function(e){this.$gutterLayer.setShowFoldWidgets(e)},initialValue:!0},showLineNumbers:{set:function(e){this.$gutterLayer.setShowLineNumbers(e),this.$loop.schedule(this.CHANGE_GUTTER)},initialValue:!0},displayIndentGuides:{set:function(e){this.$textLayer.setDisplayIndentGuides(e)&&this.$loop.schedule(this.CHANGE_TEXT)},initialValue:!0},highlightGutterLine:{set:function(e){if(!this.$gutterLineHighlight)return this.$gutterLineHighlight=n.createElement("div"),this.$gutterLineHighlight.className="ace_gutter-active-line",void this.$gutter.appendChild(this.$gutterLineHighlight);this.$gutterLineHighlight.style.display=e?"":"none",this.$cursorLayer.$pixelPos&&this.$updateGutterLineHighlight()},initialValue:!1,value:!0},hScrollBarAlwaysVisible:{set:function(){this.$hScrollBarAlwaysVisible&&this.$horizScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},vScrollBarAlwaysVisible:{set:function(){this.$vScrollBarAlwaysVisible&&this.$vScroll||this.$loop.schedule(this.CHANGE_SCROLL)},initialValue:!1},fontSize:{set:function(e){"number"==typeof e&&(e+="px"),this.container.style.fontSize=e,this.updateFontSize()},initialValue:12},fontFamily:{set:function(e){this.container.style.fontFamily=e,this.updateFontSize()}},maxLines:{set:function(){this.updateFull()}},minLines:{set:function(){this.updateFull()}},scrollPastEnd:{set:function(e){e=+e||0,this.$scrollPastEnd!=e&&(this.$scrollPastEnd=e,this.$loop.schedule(this.CHANGE_SCROLL))},initialValue:0,handlesSet:!0},fixedWidthGutter:{set:function(e){this.$gutterLayer.$fixedWidth=!!e,this.$loop.schedule(this.CHANGE_GUTTER)}},theme:{set:function(e){this.setTheme(e)},get:function(){return this.$themeId||this.theme},initialValue:"./theme/textmate",handlesSet:!0}}),t.VirtualRenderer=m}),define("ace/worker/worker_client",["require","exports","module","ace/lib/oop","ace/lib/net","ace/lib/event_emitter","ace/config"],function(e,t){"use strict";var i=e("../lib/oop"),n=e("../lib/net"),s=e("../lib/event_emitter").EventEmitter,o=e("../config"),r=function(t,i,n,s){if(this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.onMessage=this.onMessage.bind(this),e.nameToUrl&&!e.toUrl&&(e.toUrl=e.nameToUrl),o.get("packaged")||!e.toUrl)s=s||o.moduleUrl(i,"worker");else{var r=this.$normalizePath;s=s||r(e.toUrl("ace/worker/worker.js",null,"_"));var a={};t.forEach(function(t){a[t]=r(e.toUrl(t,null,"_").replace(/(\.js)?(\?.*)?$/,""))})}try{this.$worker=new Worker(s)}catch(e){if(!(e instanceof window.DOMException))throw e;var l=this.$workerBlob(s),h=window.URL||window.webkitURL,c=h.createObjectURL(l);this.$worker=new Worker(c),h.revokeObjectURL(c)}this.$worker.postMessage({init:!0,tlns:a,module:i,classname:n}),this.callbackId=1,this.callbacks={},this.$worker.onmessage=this.onMessage};(function(){i.implement(this,s),this.onMessage=function(e){var t=e.data;switch(t.type){case"event":this._signal(t.name,{data:t.data});break;case"call":var i=this.callbacks[t.id];i&&(i(t.data),delete this.callbacks[t.id]);break;case"error":this.reportError(t.data);break;case"log":window.console&&console.log&&console.log.apply(console,t.data)}},this.reportError=function(e){window.console&&console.error&&console.error(e)},this.$normalizePath=function(e){return n.qualifyURL(e)},this.terminate=function(){this._signal("terminate",{}),this.deltaQueue=null,this.$worker.terminate(),this.$worker=null,this.$doc&&this.$doc.off("change",this.changeListener),this.$doc=null},this.send=function(e,t){this.$worker.postMessage({command:e,args:t})},this.call=function(e,t,i){if(i){var n=this.callbackId++;this.callbacks[n]=i,t.push(n)}this.send(e,t)},this.emit=function(e,t){try{this.$worker.postMessage({event:e,data:{data:t.data}})}catch(e){console.error(e.stack)}},this.attachToDocument=function(e){this.$doc&&this.terminate(),this.$doc=e,this.call("setValue",[e.getValue()]),e.on("change",this.changeListener)},this.changeListener=function(e){this.deltaQueue?this.deltaQueue.push(e.data):(this.deltaQueue=[e.data],setTimeout(this.$sendDeltaQueue,0))},this.$sendDeltaQueue=function(){var e=this.deltaQueue;e&&(this.deltaQueue=null,e.length>20&&e.length>this.$doc.getLength()>>1?this.call("setValue",[this.$doc.getValue()]):this.emit("change",{data:e}))},this.$workerBlob=function(e){var t="importScripts('"+n.qualifyURL(e)+"');";try{return new Blob([t],{type:"application/javascript"})}catch(e){var i=window.BlobBuilder||window.WebKitBlobBuilder||window.MozBlobBuilder,s=new i;return s.append(t),s.getBlob("application/javascript")}}}).call(r.prototype);var a=function(e,t,i){this.$sendDeltaQueue=this.$sendDeltaQueue.bind(this),this.changeListener=this.changeListener.bind(this),this.callbackId=1,this.callbacks={},this.messageBuffer=[];var n=null,r=!1,a=Object.create(s),l=this;this.$worker={},this.$worker.terminate=function(){},this.$worker.postMessage=function(e){l.messageBuffer.push(e),n&&(r?setTimeout(h):h())},this.setEmitSync=function(e){r=e};var h=function(){var e=l.messageBuffer.shift();e.command?n[e.command].apply(n,e.args):e.event&&a._signal(e.event,e.data)};a.postMessage=function(e){l.onMessage({data:e})},a.callback=function(e,t){this.postMessage({type:"call",id:t,data:e})},a.emit=function(e,t){this.postMessage({type:"event",name:e,data:t})},o.loadModule(["worker",t],function(e){for(n=new e[i](a);l.messageBuffer.length;)h()})};a.prototype=r.prototype,t.UIWorkerClient=a,t.WorkerClient=r}),define("ace/placeholder",["require","exports","module","ace/range","ace/lib/event_emitter","ace/lib/oop"],function(e,t){"use strict";var i=e("./range").Range,n=e("./lib/event_emitter").EventEmitter,s=e("./lib/oop"),o=function(e,t,i,n,s,o){var r=this;this.length=t,this.session=e,this.doc=e.getDocument(),this.mainClass=s,this.othersClass=o,this.$onUpdate=this.onUpdate.bind(this),this.doc.on("change",this.$onUpdate),this.$others=n,this.$onCursorChange=function(){setTimeout(function(){r.onCursorChange()})},this.$pos=i;var a=e.getUndoManager().$undoStack||e.getUndoManager().$undostack||{length:-1};this.$undoStackDepth=a.length,this.setup(),e.selection.on("changeCursor",this.$onCursorChange)};(function(){s.implement(this,n),this.setup=function(){var e=this,t=this.doc,n=this.session,s=this.$pos;this.selectionBefore=n.selection.toJSON(),n.selection.inMultiSelectMode&&n.selection.toSingleRange(),this.pos=t.createAnchor(s.row,s.column),this.markerId=n.addMarker(new i(s.row,s.column,s.row,s.column+this.length),this.mainClass,null,!1),this.pos.on("change",function(t){n.removeMarker(e.markerId),e.markerId=n.addMarker(new i(t.value.row,t.value.column,t.value.row,t.value.column+e.length),e.mainClass,null,!1)}),this.others=[],this.$others.forEach(function(i){var n=t.createAnchor(i.row,i.column);e.others.push(n)}),n.setUndoSelect(!1)},this.showOtherMarkers=function(){if(!this.othersActive){var e=this.session,t=this;this.othersActive=!0,this.others.forEach(function(n){n.markerId=e.addMarker(new i(n.row,n.column,n.row,n.column+t.length),t.othersClass,null,!1),n.on("change",function(s){e.removeMarker(n.markerId),n.markerId=e.addMarker(new i(s.value.row,s.value.column,s.value.row,s.value.column+t.length),t.othersClass,null,!1)})})}},this.hideOtherMarkers=function(){if(this.othersActive){this.othersActive=!1;for(var e=0;e<this.others.length;e++)this.session.removeMarker(this.others[e].markerId)}},this.onUpdate=function(e){var t=e.data,n=t.range;if(n.start.row===n.end.row&&n.start.row===this.pos.row&&!this.$updating){this.$updating=!0;var s="insertText"===t.action?n.end.column-n.start.column:n.start.column-n.end.column;if(n.start.column>=this.pos.column&&n.start.column<=this.pos.column+this.length+1){var o=n.start.column-this.pos.column;if(this.length+=s,!this.session.$fromUndo){if("insertText"===t.action)for(var r=this.others.length-1;r>=0;r--){var a=this.others[r],l={row:a.row,column:a.column+o};a.row===n.start.row&&n.start.column<a.column&&(l.column+=s),this.doc.insert(l,t.text)}else if("removeText"===t.action)for(var r=this.others.length-1;r>=0;r--){var a=this.others[r],l={row:a.row,column:a.column+o};a.row===n.start.row&&n.start.column<a.column&&(l.column+=s),this.doc.remove(new i(l.row,l.column,l.row,l.column-s))}n.start.column===this.pos.column&&"insertText"===t.action?setTimeout(function(){this.pos.setPosition(this.pos.row,this.pos.column-s);for(var e=0;e<this.others.length;e++){var t=this.others[e],i={row:t.row,column:t.column-s};t.row===n.start.row&&n.start.column<t.column&&(i.column+=s),t.setPosition(i.row,i.column)}}.bind(this),0):n.start.column===this.pos.column&&"removeText"===t.action&&setTimeout(function(){for(var e=0;e<this.others.length;e++){var t=this.others[e];t.row===n.start.row&&n.start.column<t.column&&t.setPosition(t.row,t.column-s)}}.bind(this),0)}this.pos._emit("change",{value:this.pos});for(var r=0;r<this.others.length;r++)this.others[r]._emit("change",{value:this.others[r]})}this.$updating=!1}},this.onCursorChange=function(e){if(!this.$updating&&this.session){var t=this.session.selection.getCursor();t.row===this.pos.row&&t.column>=this.pos.column&&t.column<=this.pos.column+this.length?(this.showOtherMarkers(),this._emit("cursorEnter",e)):(this.hideOtherMarkers(),this._emit("cursorLeave",e))}},this.detach=function(){this.session.removeMarker(this.markerId),this.hideOtherMarkers(),this.doc.removeEventListener("change",this.$onUpdate),this.session.selection.removeEventListener("changeCursor",this.$onCursorChange),this.pos.detach();for(var e=0;e<this.others.length;e++)this.others[e].detach();this.session.setUndoSelect(!0),this.session=null},this.cancel=function(){if(-1===this.$undoStackDepth)throw Error("Canceling placeholders only supported with undo manager attached to session.");for(var e=this.session.getUndoManager(),t=(e.$undoStack||e.$undostack).length-this.$undoStackDepth,i=0;i<t;i++)e.undo(!0);this.selectionBefore&&this.session.selection.fromJSON(this.selectionBefore)}}).call(o.prototype),t.PlaceHolder=o}),define("ace/mouse/multi_select_handler",["require","exports","module","ace/lib/event","ace/lib/useragent"],function(e,t){function i(e,t){return e.row==t.row&&e.column==t.column}function n(e){var t=e.domEvent,n=t.altKey,r=t.shiftKey,a=t.ctrlKey,l=e.getAccelKey(),h=e.getButton();if(a&&o.isMac&&(h=t.button),e.editor.inMultiSelectMode&&2==h)return void e.editor.textInput.onContextMenu(e.domEvent);if(!a&&!n&&!l)return void(0===h&&e.editor.inMultiSelectMode&&e.editor.exitMultiSelectMode());if(0===h){var c,u=e.editor,d=u.selection,g=u.inMultiSelectMode,f=e.getDocumentPosition(),m=d.getCursor(),p=e.inSelection()||d.isEmpty()&&i(f,m),A=e.x,C=e.y,F=function(e){A=e.clientX,C=e.clientY},v=u.session,w=u.renderer.pixelToScreenCoordinates(A,C),E=w;if(u.$mouseHandler.$enableJumpToDef)a&&n||l&&n?c="add":n&&(c="block");else if(l&&!n){if(c="add",!g&&r)return}else n&&(c="block");if(c&&o.isMac&&t.ctrlKey&&u.$mouseHandler.cancelContextMenu(),"add"==c){if(!g&&p)return;if(!g){var $=d.toOrientedRange();u.addSelectionMarker($)}var y=d.rangeList.rangeAtPoint(f);u.$blockScrolling++,u.inVirtualSelectionMode=!0,r&&(y=null,$=d.ranges[0],u.removeSelectionMarker($)),u.once("mouseup",function(){var e=d.toOrientedRange();y&&e.isEmpty()&&i(y.cursor,e.cursor)?d.substractPoint(e.cursor):(r?d.substractPoint($.cursor):$&&(u.removeSelectionMarker($),d.addRange($)),d.addRange(e)),u.$blockScrolling--,u.inVirtualSelectionMode=!1})}else if("block"==c){e.stop(),u.inVirtualSelectionMode=!0;var b,B=[],D=function(){var e=u.renderer.pixelToScreenCoordinates(A,C),t=v.screenToDocumentPosition(e.row,e.column);i(E,e)&&i(t,d.lead)||(E=e,u.selection.moveToPosition(t),u.renderer.scrollCursorIntoView(),u.removeSelectionMarkers(B),B=d.rectangularRangeBlock(E,w),u.$mouseHandler.$clickSelection&&1==B.length&&B[0].isEmpty()&&(B[0]=u.$mouseHandler.$clickSelection.clone()),B.forEach(u.addSelectionMarker,u),u.updateSelectionMarkers())};g&&!l?d.toSingleRange():!g&&l&&(b=d.toOrientedRange(),u.addSelectionMarker(b)),r?w=v.documentToScreenPosition(d.lead):d.moveToPosition(f),E={row:-1,column:-1};var S=function(){clearInterval(x),u.removeSelectionMarkers(B),B.length||(B=[d.toOrientedRange()]),u.$blockScrolling++,b&&(u.removeSelectionMarker(b),d.toSingleRange(b));for(var e=0;e<B.length;e++)d.addRange(B[e]);u.inVirtualSelectionMode=!1,u.$mouseHandler.$clickSelection=null,u.$blockScrolling--},k=D;s.capture(u.container,F,S);var x=setInterval(function(){k()},20);return e.preventDefault()}}}var s=e("../lib/event"),o=e("../lib/useragent");t.onMouseDown=n}),define("ace/commands/multi_select_commands",["require","exports","module","ace/keyboard/hash_handler"],function(e,t){t.defaultCommands=[{name:"addCursorAbove",exec:function(e){e.selectMoreLines(-1)},bindKey:{win:"Ctrl-Alt-Up",mac:"Ctrl-Alt-Up"},readonly:!0},{name:"addCursorBelow",exec:function(e){e.selectMoreLines(1)},bindKey:{win:"Ctrl-Alt-Down",mac:"Ctrl-Alt-Down"},readonly:!0},{name:"addCursorAboveSkipCurrent",exec:function(e){e.selectMoreLines(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Up",mac:"Ctrl-Alt-Shift-Up"},readonly:!0},{name:"addCursorBelowSkipCurrent",exec:function(e){e.selectMoreLines(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Down",mac:"Ctrl-Alt-Shift-Down"},readonly:!0},{name:"selectMoreBefore",exec:function(e){e.selectMore(-1)},bindKey:{win:"Ctrl-Alt-Left",mac:"Ctrl-Alt-Left"},readonly:!0},{name:"selectMoreAfter",exec:function(e){e.selectMore(1)},bindKey:{win:"Ctrl-Alt-Right",mac:"Ctrl-Alt-Right"},readonly:!0},{name:"selectNextBefore",exec:function(e){e.selectMore(-1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Left",mac:"Ctrl-Alt-Shift-Left"},readonly:!0},{name:"selectNextAfter",exec:function(e){e.selectMore(1,!0)},bindKey:{win:"Ctrl-Alt-Shift-Right",mac:"Ctrl-Alt-Shift-Right"},readonly:!0},{name:"splitIntoLines",exec:function(e){e.multiSelect.splitIntoLines()},bindKey:{win:"Ctrl-Alt-L",mac:"Ctrl-Alt-L"},readonly:!0},{name:"alignCursors",exec:function(e){e.alignCursors()},bindKey:{win:"Ctrl-Alt-A",mac:"Ctrl-Alt-A"}},{name:"findAll",exec:function(e){e.findAll()},bindKey:{win:"Ctrl-Alt-K",mac:"Ctrl-Alt-G"},readonly:!0}],t.multiSelectCommands=[{name:"singleSelection",bindKey:"esc",exec:function(e){e.exitMultiSelectMode()},readonly:!0,isAvailable:function(e){return e&&e.inMultiSelectMode}}];var i=e("../keyboard/hash_handler").HashHandler;t.keyboardHandler=new i(t.multiSelectCommands)}),define("ace/multi_select",["require","exports","module","ace/range_list","ace/range","ace/selection","ace/mouse/multi_select_handler","ace/lib/event","ace/lib/lang","ace/commands/multi_select_commands","ace/search","ace/edit_session","ace/editor","ace/config"],function(e,t){function i(e,t,i){return f.$options.wrap=!0,f.$options.needle=t,f.$options.backwards=-1==i,f.find(e)}function n(e,t){return e.row==t.row&&e.column==t.column}function s(e){e.$multiselectOnSessionChange||(e.$onAddRange=e.$onAddRange.bind(e),e.$onRemoveRange=e.$onRemoveRange.bind(e),e.$onMultiSelect=e.$onMultiSelect.bind(e),e.$onSingleSelect=e.$onSingleSelect.bind(e),e.$multiselectOnSessionChange=t.onSessionChange.bind(e),e.$checkMultiselectChange=e.$checkMultiselectChange.bind(e),e.$multiselectOnSessionChange(e),e.on("changeSession",e.$multiselectOnSessionChange),e.on("mousedown",h),e.commands.addCommands(d.defaultCommands),o(e))}function o(e){function t(){n&&(e.renderer.setMouseCursor(""),n=!1)}var i=e.textInput.getElement(),n=!1;c.addListener(i,"keydown",function(i){18!=i.keyCode||i.ctrlKey||i.shiftKey||i.metaKey?n&&t():n||(e.renderer.setMouseCursor("crosshair"),n=!0)}),c.addListener(i,"keyup",t),c.addListener(i,"blur",t)}var r=e("./range_list").RangeList,a=e("./range").Range,l=e("./selection").Selection,h=e("./mouse/multi_select_handler").onMouseDown,c=e("./lib/event"),u=e("./lib/lang"),d=e("./commands/multi_select_commands");t.commands=d.defaultCommands.concat(d.multiSelectCommands);var g=e("./search").Search,f=new g,m=e("./edit_session").EditSession;(function(){this.getSelectionMarkers=function(){return this.$selectionMarkers}}).call(m.prototype),function(){this.ranges=null,this.rangeList=null,this.addRange=function(e,t){if(e){if(!this.inMultiSelectMode&&0===this.rangeCount){var i=this.toOrientedRange();if(this.rangeList.add(i),this.rangeList.add(e),2!=this.rangeList.ranges.length)return this.rangeList.removeAll(),t||this.fromOrientedRange(e);this.rangeList.removeAll(),this.rangeList.add(i),this.$onAddRange(i)}e.cursor||(e.cursor=e.end);var n=this.rangeList.add(e);return this.$onAddRange(e),n.length&&this.$onRemoveRange(n),this.rangeCount>1&&!this.inMultiSelectMode&&(this._signal("multiSelect"),this.inMultiSelectMode=!0,this.session.$undoSelect=!1,this.rangeList.attach(this.session)),t||this.fromOrientedRange(e)}},this.toSingleRange=function(e){e=e||this.ranges[0];var t=this.rangeList.removeAll();t.length&&this.$onRemoveRange(t),e&&this.fromOrientedRange(e)},this.substractPoint=function(e){var t=this.rangeList.substractPoint(e);if(t)return this.$onRemoveRange(t),t[0]},this.mergeOverlappingRanges=function(){var e=this.rangeList.merge();e.length?this.$onRemoveRange(e):this.ranges[0]&&this.fromOrientedRange(this.ranges[0])},this.$onAddRange=function(e){this.rangeCount=this.rangeList.ranges.length,this.ranges.unshift(e),this._signal("addRange",{range:e})},this.$onRemoveRange=function(e){if(this.rangeCount=this.rangeList.ranges.length,1==this.rangeCount&&this.inMultiSelectMode){var t=this.rangeList.ranges.pop();e.push(t),this.rangeCount=0}for(var i=e.length;i--;){var n=this.ranges.indexOf(e[i]);this.ranges.splice(n,1)}this._signal("removeRange",{ranges:e}),0===this.rangeCount&&this.inMultiSelectMode&&(this.inMultiSelectMode=!1,this._signal("singleSelect"),this.session.$undoSelect=!0,this.rangeList.detach(this.session)),(t=t||this.ranges[0])&&!t.isEqual(this.getRange())&&this.fromOrientedRange(t)},this.$initRangeList=function(){this.rangeList||(this.rangeList=new r,this.ranges=[],this.rangeCount=0)},this.getAllRanges=function(){return this.rangeCount?this.rangeList.ranges.concat():[this.getRange()]},this.splitIntoLines=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],i=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(i,t.cursor==t.start)}else{var i=this.getRange(),n=this.isBackwards(),s=i.start.row,o=i.end.row;if(s==o){if(n)var r=i.end,l=i.start;else var r=i.start,l=i.end;return this.addRange(a.fromPoints(l,l)),void this.addRange(a.fromPoints(r,r))}var h=[],c=this.getLineRange(s,!0);c.start.column=i.start.column,h.push(c);for(var u=s+1;u<o;u++)h.push(this.getLineRange(u,!0));c=this.getLineRange(o,!0),c.end.column=i.end.column,h.push(c),h.forEach(this.addRange,this)}},this.toggleBlockSelection=function(){if(this.rangeCount>1){var e=this.rangeList.ranges,t=e[e.length-1],i=a.fromPoints(e[0].start,t.end);this.toSingleRange(),this.setSelectionRange(i,t.cursor==t.start)}else{var n=this.session.documentToScreenPosition(this.selectionLead),s=this.session.documentToScreenPosition(this.selectionAnchor);this.rectangularRangeBlock(n,s).forEach(this.addRange,this)}},this.rectangularRangeBlock=function(e,t,i){var s=[],o=e.column<t.column;if(o)var r=e.column,l=t.column;else var r=t.column,l=e.column;var h=e.row<t.row;if(h)var c=e.row,u=t.row;else var c=t.row,u=e.row;r<0&&(r=0),c<0&&(c=0),c==u&&(i=!0);for(var d=c;d<=u;d++){var g=a.fromPoints(this.session.screenToDocumentPosition(d,r),this.session.screenToDocumentPosition(d,l));if(g.isEmpty()){if(f&&n(g.end,f))break;var f=g.end}g.cursor=o?g.start:g.end,s.push(g)}if(h&&s.reverse(),!i){for(var m=s.length-1;s[m].isEmpty()&&m>0;)m--;if(m>0)for(var p=0;s[p].isEmpty();)p++;for(var A=m;A>=p;A--)s[A].isEmpty()&&s.splice(A,1)}return s}}.call(l.prototype);var p=e("./editor").Editor;(function(){this.updateSelectionMarkers=function(){this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.addSelectionMarker=function(e){e.cursor||(e.cursor=e.end);var t=this.getSelectionStyle();return e.marker=this.session.addMarker(e,"ace_selection",t),this.session.$selectionMarkers.push(e),this.session.selectionMarkerCount=this.session.$selectionMarkers.length,e},this.removeSelectionMarker=function(e){if(e.marker){this.session.removeMarker(e.marker);var t=this.session.$selectionMarkers.indexOf(e);-1!=t&&this.session.$selectionMarkers.splice(t,1),this.session.selectionMarkerCount=this.session.$selectionMarkers.length}},this.removeSelectionMarkers=function(e){for(var t=this.session.$selectionMarkers,i=e.length;i--;){var n=e[i];if(n.marker){this.session.removeMarker(n.marker);var s=t.indexOf(n);-1!=s&&t.splice(s,1)}}this.session.selectionMarkerCount=t.length},this.$onAddRange=function(e){this.addSelectionMarker(e.range),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onRemoveRange=function(e){this.removeSelectionMarkers(e.ranges),this.renderer.updateCursor(),this.renderer.updateBackMarkers()},this.$onMultiSelect=function(){this.inMultiSelectMode||(this.inMultiSelectMode=!0,this.setStyle("ace_multiselect"),this.keyBinding.addKeyboardHandler(d.keyboardHandler),this.commands.setDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers())},this.$onSingleSelect=function(){this.session.multiSelect.inVirtualMode||(this.inMultiSelectMode=!1,this.unsetStyle("ace_multiselect"),this.keyBinding.removeKeyboardHandler(d.keyboardHandler),this.commands.removeDefaultHandler("exec",this.$onMultiSelectExec),this.renderer.updateCursor(),this.renderer.updateBackMarkers(),this._emit("changeSelection"))},this.$onMultiSelectExec=function(e){var t=e.command,i=e.editor;if(i.multiSelect){if(t.multiSelectAction)"forEach"==t.multiSelectAction?n=i.forEachSelection(t,e.args):"forEachLine"==t.multiSelectAction?n=i.forEachSelection(t,e.args,!0):"single"==t.multiSelectAction?(i.exitMultiSelectMode(),n=t.exec(i,e.args||{})):n=t.multiSelectAction(i,e.args||{});else{var n=t.exec(i,e.args||{});i.multiSelect.addRange(i.multiSelect.toOrientedRange()),i.multiSelect.mergeOverlappingRanges()}return n}},this.forEachSelection=function(e,t,i){if(!this.inVirtualSelectionMode){var n,s=i&&i.keepOrder,o=1==i||i&&i.$byLines,r=this.session,a=this.selection,h=a.rangeList,c=(s?a:h).ranges;if(!c.length)return e.exec?e.exec(this,t||{}):e(this,t||{});var u=a._eventRegistry;a._eventRegistry={};var d=new l(r);this.inVirtualSelectionMode=!0;for(var g=c.length;g--;){if(o)for(;g>0&&c[g].start.row==c[g-1].end.row;)g--;d.fromOrientedRange(c[g]),d.index=g,this.selection=r.selection=d;var f=e.exec?e.exec(this,t||{}):e(this,t||{});n||f===undefined||(n=f),d.toOrientedRange(c[g])}d.detach(),this.selection=r.selection=a,this.inVirtualSelectionMode=!1,a._eventRegistry=u,a.mergeOverlappingRanges();var m=this.renderer.$scrollAnimation;return this.onCursorChange(),this.onSelectionChange(),m&&m.from==m.to&&this.renderer.animateScrolling(m.from),n}},this.exitMultiSelectMode=function(){this.inMultiSelectMode&&!this.inVirtualSelectionMode&&this.multiSelect.toSingleRange()},this.getSelectedText=function(){var e="";if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){for(var t=this.multiSelect.rangeList.ranges,i=[],n=0;n<t.length;n++)i.push(this.session.getTextRange(t[n]));var s=this.session.getDocument().getNewLineCharacter();e=i.join(s),e.length==(i.length-1)*s.length&&(e="")}else this.selection.isEmpty()||(e=this.session.getTextRange(this.getSelectionRange()));return e},this.$checkMultiselectChange=function(e,t){if(this.inMultiSelectMode&&!this.inVirtualSelectionMode){var i=this.multiSelect.ranges[0];if(this.multiSelect.isEmpty()&&t==this.multiSelect.anchor)return;n(t==this.multiSelect.anchor?i.cursor==i.start?i.end:i.start:i.cursor,t)||this.multiSelect.toSingleRange(this.multiSelect.toOrientedRange())}},this.onPaste=function(e){if(!this.$readOnly){var t={text:e};if(this._signal("paste",t),e=t.text,!this.inMultiSelectMode||this.inVirtualSelectionMode)return this.insert(e);var i=e.split(/\r\n|\r|\n/),n=this.selection.rangeList.ranges;if(i.length>n.length||i.length<2||!i[1])return this.commands.exec("insertstring",this,e);for(var s=n.length;s--;){var o=n[s];o.isEmpty()||this.session.remove(o),this.session.insert(o.start,i[s])}}},this.findAll=function(e,t,i){if(t=t||{},t.needle=e||t.needle,t.needle==undefined){var n=this.selection.isEmpty()?this.selection.getWordRange():this.selection.getRange();t.needle=this.session.getTextRange(n)}this.$search.set(t);var s=this.$search.findAll(this.session);if(!s.length)return 0;this.$blockScrolling+=1;var o=this.multiSelect;i||o.toSingleRange(s[0]);for(var r=s.length;r--;)o.addRange(s[r],!0);return n&&o.rangeList.rangeAtPoint(n.start)&&o.addRange(n,!0),this.$blockScrolling-=1,s.length},this.selectMoreLines=function(e,t){var i=this.selection.toOrientedRange(),n=i.cursor==i.end,s=this.session.documentToScreenPosition(i.cursor);this.selection.$desiredColumn&&(s.column=this.selection.$desiredColumn);var o=this.session.screenToDocumentPosition(s.row+e,s.column);if(i.isEmpty())var r=o;else var l=this.session.documentToScreenPosition(n?i.end:i.start),r=this.session.screenToDocumentPosition(l.row+e,l.column);if(n){var h=a.fromPoints(o,r);h.cursor=h.start}else{var h=a.fromPoints(r,o);h.cursor=h.end}if(h.desiredColumn=s.column,this.selection.inMultiSelectMode){if(t)var c=i.cursor}else this.selection.addRange(i);this.selection.addRange(h),c&&this.selection.substractPoint(c)},this.transposeSelections=function(e){for(var t=this.session,i=t.multiSelect,n=i.ranges,s=n.length;s--;){var o=n[s];if(o.isEmpty()){var r=t.getWordRange(o.start.row,o.start.column);o.start.row=r.start.row,o.start.column=r.start.column,o.end.row=r.end.row,o.end.column=r.end.column}}i.mergeOverlappingRanges();for(var a=[],s=n.length;s--;){var o=n[s];a.unshift(t.getTextRange(o))}e<0?a.unshift(a.pop()):a.push(a.shift());for(var s=n.length;s--;){var o=n[s],r=o.clone();t.replace(o,a[s]),o.start.row=r.start.row,o.start.column=r.start.column}},this.selectMore=function(e,t,n){var s=this.session,o=s.multiSelect,r=o.toOrientedRange();if(!r.isEmpty()||(r=s.getWordRange(r.start.row,r.start.column),r.cursor=-1==e?r.start:r.end,this.multiSelect.addRange(r),!n)){var a=s.getTextRange(r),l=i(s,a,e);l&&(l.cursor=-1==e?l.start:l.end,this.$blockScrolling+=1,this.session.unfold(l),this.multiSelect.addRange(l),this.$blockScrolling-=1,this.renderer.scrollCursorIntoView(null,.5)),t&&this.multiSelect.substractPoint(r.cursor)}},this.alignCursors=function(){var e=this.session,t=e.multiSelect,i=t.ranges,n=-1,s=i.filter(function(e){if(e.cursor.row==n)return!0;n=e.cursor.row});if(i.length&&s.length!=i.length-1){s.forEach(function(e){t.substractPoint(e.cursor)});var o=0,r=Infinity,l=i.map(function(t){var i=t.cursor,n=e.getLine(i.row),s=n.substr(i.column).search(/\S/g);return-1==s&&(s=0),i.column>o&&(o=i.column),s<r&&(r=s),s});i.forEach(function(t,i){var n=t.cursor,s=o-n.column,h=l[i]-r;s>h?e.insert(n,u.stringRepeat(" ",s-h)):e.remove(new a(n.row,n.column,n.row,n.column-s+h)),t.start.column=t.end.column=o,t.start.row=t.end.row=n.row,t.cursor=t.end}),t.fromOrientedRange(i[0]),this.renderer.updateCursor(),this.renderer.updateBackMarkers()}else{var h=this.selection.getRange(),c=h.start.row,d=h.end.row,g=c==d;if(g){var f,m=this.session.getLength();do{f=this.session.getLine(d)}while(/[=:]/.test(f)&&++d<m);do{f=this.session.getLine(c)}while(/[=:]/.test(f)&&--c>0);c<0&&(c=0),d>=m&&(d=m-1)}var p=this.session.doc.removeLines(c,d);p=this.$reAlignText(p,g),this.session.doc.insert({row:c,column:0},p.join("\n")+"\n"),g||(h.start.column=0,h.end.column=p[p.length-1].length),this.selection.setRange(h)}},this.$reAlignText=function(e,t){function i(e){return u.stringRepeat(" ",e)}function n(e){return e[2]?i(r)+e[2]+i(a-e[2].length+l)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function s(e){return e[2]?i(r+a-e[2].length)+e[2]+i(l," ")+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}function o(e){return e[2]?i(r)+e[2]+i(l)+e[4].replace(/^([=:])\s+/,"$1 "):e[0]}var r,a,l,h=!0,c=!0;return e.map(function(e){var t=e.match(/(\s*)(.*?)(\s*)([=:].*)/);return t?null==r?(r=t[1].length,a=t[2].length,l=t[3].length,t):(r+a+l!=t[1].length+t[2].length+t[3].length&&(c=!1),r!=t[1].length&&(h=!1),r>t[1].length&&(r=t[1].length),a<t[2].length&&(a=t[2].length),l>t[3].length&&(l=t[3].length),t):[e]}).map(t?n:h?c?s:n:o)}}).call(p.prototype),t.onSessionChange=function(e){var t=e.session;t&&!t.multiSelect&&(t.$selectionMarkers=[],t.selection.$initRangeList(),t.multiSelect=t.selection),this.multiSelect=t&&t.multiSelect;var i=e.oldSession;i&&(i.multiSelect.off("addRange",this.$onAddRange),i.multiSelect.off("removeRange",this.$onRemoveRange),i.multiSelect.off("multiSelect",this.$onMultiSelect),i.multiSelect.off("singleSelect",this.$onSingleSelect),i.multiSelect.lead.off("change",this.$checkMultiselectChange),i.multiSelect.anchor.off("change",this.$checkMultiselectChange)),t&&(t.multiSelect.on("addRange",this.$onAddRange),t.multiSelect.on("removeRange",this.$onRemoveRange),t.multiSelect.on("multiSelect",this.$onMultiSelect),t.multiSelect.on("singleSelect",this.$onSingleSelect),t.multiSelect.lead.on("change",this.$checkMultiselectChange),t.multiSelect.anchor.on("change",this.$checkMultiselectChange)),t&&this.inMultiSelectMode!=t.selection.inMultiSelectMode&&(t.selection.inMultiSelectMode?this.$onMultiSelect():this.$onSingleSelect())},t.MultiSelect=s,e("./config").defineOptions(p.prototype,"editor",{enableMultiselect:{set:function(e){s(this),e?(this.on("changeSession",this.$multiselectOnSessionChange),this.on("mousedown",h)):(this.off("changeSession",this.$multiselectOnSessionChange),this.off("mousedown",h))},value:!0}})}),define("ace/mode/folding/fold_mode",["require","exports","module","ace/range"],function(e,t){"use strict";var i=e("../../range").Range,n=t.FoldMode=function(){};(function(){this.foldingStartMarker=null,this.foldingStopMarker=null,this.getFoldWidget=function(e,t,i){var n=e.getLine(i);return this.foldingStartMarker.test(n)?"start":"markbeginend"==t&&this.foldingStopMarker&&this.foldingStopMarker.test(n)?"end":""},this.getFoldWidgetRange=function(){return null},this.indentationBlock=function(e,t,n){var s=/\S/,o=e.getLine(t),r=o.search(s);if(-1!=r){for(var a=n||o.length,l=e.getLength(),h=t,c=t;++t<l;){var u=e.getLine(t).search(s);if(-1!=u){if(u<=r)break;c=t}}if(c>h){var d=e.getLine(c).length;return new i(h,a,c,d)}}},
this.openingBracketBlock=function(e,t,n,s,o){var r={row:n,column:s+1},a=e.$findClosingBracket(t,r,o);if(a){var l=e.foldWidgets[a.row];return null==l&&(l=e.getFoldWidget(a.row)),"start"==l&&a.row>r.row&&(a.row--,a.column=e.getLine(a.row).length),i.fromPoints(r,a)}},this.closingBracketBlock=function(e,t,n,s){var o={row:n,column:s},r=e.$findOpeningBracket(t,o);if(r)return r.column++,o.column--,i.fromPoints(r,o)}}).call(n.prototype)}),define("ace/theme/textmate",["require","exports","module","ace/lib/dom"],function(e,t){"use strict";t.isDark=!1,t.cssClass="ace-tm",t.cssText='.ace-tm .ace_gutter {background: #f0f0f0;color: #333;}.ace-tm .ace_print-margin {width: 1px;background: #e8e8e8;}.ace-tm .ace_fold {background-color: #6B72E6;}.ace-tm {background-color: #FFFFFF;color: black;}.ace-tm .ace_cursor {color: black;}.ace-tm .ace_invisible {color: rgb(191, 191, 191);}.ace-tm .ace_storage,.ace-tm .ace_keyword {color: blue;}.ace-tm .ace_constant {color: rgb(197, 6, 11);}.ace-tm .ace_constant.ace_buildin {color: rgb(88, 72, 246);}.ace-tm .ace_constant.ace_language {color: rgb(88, 92, 246);}.ace-tm .ace_constant.ace_library {color: rgb(6, 150, 14);}.ace-tm .ace_invalid {background-color: rgba(255, 0, 0, 0.1);color: red;}.ace-tm .ace_support.ace_function {color: rgb(60, 76, 114);}.ace-tm .ace_support.ace_constant {color: rgb(6, 150, 14);}.ace-tm .ace_support.ace_type,.ace-tm .ace_support.ace_class {color: rgb(109, 121, 222);}.ace-tm .ace_keyword.ace_operator {color: rgb(104, 118, 135);}.ace-tm .ace_string {color: rgb(3, 106, 7);}.ace-tm .ace_comment {color: rgb(76, 136, 107);}.ace-tm .ace_comment.ace_doc {color: rgb(0, 102, 255);}.ace-tm .ace_comment.ace_doc.ace_tag {color: rgb(128, 159, 191);}.ace-tm .ace_constant.ace_numeric {color: rgb(0, 0, 205);}.ace-tm .ace_variable {color: rgb(49, 132, 149);}.ace-tm .ace_xml-pe {color: rgb(104, 104, 91);}.ace-tm .ace_entity.ace_name.ace_function {color: #0000A2;}.ace-tm .ace_heading {color: rgb(12, 7, 255);}.ace-tm .ace_list {color:rgb(185, 6, 144);}.ace-tm .ace_meta.ace_tag {color:rgb(0, 22, 142);}.ace-tm .ace_string.ace_regex {color: rgb(255, 0, 0)}.ace-tm .ace_marker-layer .ace_selection {background: rgb(181, 213, 255);}.ace-tm.ace_multiselect .ace_selection.ace_start {box-shadow: 0 0 3px 0px white;border-radius: 2px;}.ace-tm .ace_marker-layer .ace_step {background: rgb(252, 255, 0);}.ace-tm .ace_marker-layer .ace_stack {background: rgb(164, 229, 101);}.ace-tm .ace_marker-layer .ace_bracket {margin: -1px 0 0 -1px;border: 1px solid rgb(192, 192, 192);}.ace-tm .ace_marker-layer .ace_active-line {background: rgba(0, 0, 0, 0.07);}.ace-tm .ace_gutter-active-line {background-color : #dcdcdc;}.ace-tm .ace_marker-layer .ace_selected-word {background: rgb(250, 250, 255);border: 1px solid rgb(200, 200, 250);}.ace-tm .ace_indent-guide {background: url("data:image/png;base64,iVBORw0KGgoAAAANSUhEUgAAAAEAAAACCAYAAACZgbYnAAAAE0lEQVQImWP4////f4bLly//BwAmVgd1/w11/gAAAABJRU5ErkJggg==") right repeat-y;}',e("../lib/dom").importCssString(t.cssText,t.cssClass)}),define("ace/line_widgets",["require","exports","module","ace/lib/oop","ace/lib/dom","ace/range"],function(e,t){"use strict";function i(e){this.session=e,this.session.widgetManager=this,this.session.getRowLength=this.getRowLength,this.session.$getWidgetScreenLength=this.$getWidgetScreenLength,this.updateOnChange=this.updateOnChange.bind(this),this.renderWidgets=this.renderWidgets.bind(this),this.measureWidgets=this.measureWidgets.bind(this),this.session._changedWidgets=[],this.$onChangeEditor=this.$onChangeEditor.bind(this),this.session.on("change",this.updateOnChange),this.session.on("changeEditor",this.$onChangeEditor)}var n=(e("./lib/oop"),e("./lib/dom"));e("./range").Range;(function(){this.getRowLength=function(e){var t;return t=this.lineWidgets?this.lineWidgets[e]&&this.lineWidgets[e].rowCount||0:0,this.$useWrapMode&&this.$wrapData[e]?this.$wrapData[e].length+1+t:1+t},this.$getWidgetScreenLength=function(){var e=0;return this.lineWidgets.forEach(function(t){t&&t.rowCount&&(e+=t.rowCount)}),e},this.$onChangeEditor=function(e){this.attach(e.editor)},this.attach=function(e){e&&e.widgetManager&&e.widgetManager!=this&&e.widgetManager.detach(),this.editor!=e&&(this.detach(),this.editor=e,e&&(e.widgetManager=this,e.renderer.on("beforeRender",this.measureWidgets),e.renderer.on("afterRender",this.renderWidgets)))},this.detach=function(){var e=this.editor;if(e){this.editor=null,e.widgetManager=null,e.renderer.off("beforeRender",this.measureWidgets),e.renderer.off("afterRender",this.renderWidgets);var t=this.session.lineWidgets;t&&t.forEach(function(e){e&&e.el&&e.el.parentNode&&(e._inDocument=!1,e.el.parentNode.removeChild(e.el))})}},this.updateOnChange=function(e){var t=this.session.lineWidgets;if(t){var i=e.data,n=i.range,s=n.start.row,o=n.end.row-s;if(0===o);else if("removeText"==i.action||"removeLines"==i.action){var r=t.splice(s+1,o);r.forEach(function(e){e&&this.removeLineWidget(e)},this),this.$updateRows()}else{var a=new Array(o);a.unshift(s,0),t.splice.apply(t,a),this.$updateRows()}}},this.$updateRows=function(){var e=this.session.lineWidgets;if(e){var t=!0;e.forEach(function(e,i){e&&(t=!1,e.row=i)}),t&&(this.session.lineWidgets=null)}},this.addLineWidget=function(e){this.session.lineWidgets||(this.session.lineWidgets=new Array(this.session.getLength())),this.session.lineWidgets[e.row]=e;var t=this.editor.renderer;return e.html&&!e.el&&(e.el=n.createElement("div"),e.el.innerHTML=e.html),e.el&&(n.addCssClass(e.el,"ace_lineWidgetContainer"),e.el.style.position="absolute",e.el.style.zIndex=5,t.container.appendChild(e.el),e._inDocument=!0),e.coverGutter||(e.el.style.zIndex=3),e.pixelHeight||(e.pixelHeight=e.el.offsetHeight),null==e.rowCount&&(e.rowCount=e.pixelHeight/t.layerConfig.lineHeight),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows(),this.renderWidgets(null,t),e},this.removeLineWidget=function(e){if(e._inDocument=!1,e.el&&e.el.parentNode&&e.el.parentNode.removeChild(e.el),e.editor&&e.editor.destroy)try{e.editor.destroy()}catch(e){}this.session.lineWidgets&&(this.session.lineWidgets[e.row]=undefined),this.session._emit("changeFold",{data:{start:{row:e.row}}}),this.$updateRows()},this.onWidgetChanged=function(e){this.session._changedWidgets.push(e),this.editor&&this.editor.renderer.updateFull()},this.measureWidgets=function(e,t){var i=this.session._changedWidgets,n=t.layerConfig;if(i&&i.length){for(var s=Infinity,o=0;o<i.length;o++){var r=i[o];r._inDocument||(r._inDocument=!0,t.container.appendChild(r.el)),r.h=r.el.offsetHeight,r.fixedWidth||(r.w=r.el.offsetWidth,r.screenWidth=Math.ceil(r.w/n.characterWidth));var a=r.h/n.lineHeight;r.coverLine&&(a-=this.session.getRowLineCount(r.row))<0&&(a=0),r.rowCount!=a&&(r.rowCount=a,r.row<s&&(s=r.row))}s!=Infinity&&(this.session._emit("changeFold",{data:{start:{row:s}}}),this.session.lineWidgetWidth=null),this.session._changedWidgets=[]}},this.renderWidgets=function(e,t){var i=t.layerConfig,n=this.session.lineWidgets;if(n){for(var s=Math.min(this.firstRow,i.firstRow),o=Math.max(this.lastRow,i.lastRow,n.length);s>0&&!n[s];)s--;this.firstRow=i.firstRow,this.lastRow=i.lastRow,t.$cursorLayer.config=i;for(var r=s;r<=o;r++){var a=n[r];if(a&&a.el){a._inDocument||(a._inDocument=!0,t.container.appendChild(a.el));var l=t.$cursorLayer.getPixelPosition({row:r,column:0},!0).top;a.coverLine||(l+=i.lineHeight*this.session.getRowLineCount(a.row)),a.el.style.top=l-i.offset+"px";var h=a.coverGutter?0:t.gutterWidth;a.fixedWidth||(h-=t.scrollLeft),a.el.style.left=h+"px",a.fixedWidth?a.el.style.right=t.scrollBar.getWidth()+"px":a.el.style.right=""}}}}}).call(i.prototype),t.LineWidgets=i}),define("ace/ext/error_marker",["require","exports","module","ace/line_widgets","ace/lib/dom","ace/range"],function(e,t){"use strict";function i(e,t,i){for(var n=0,s=e.length-1;n<=s;){var o=n+s>>1,r=i(t,e[o]);if(r>0)n=o+1;else{if(!(r<0))return o;s=o-1}}return-(n+1)}function n(e,t,n){var s=e.getAnnotations().sort(r.comparePoints);if(s.length){var o=i(s,{row:t,column:-1},r.comparePoints);o<0&&(o=-o-1),o>=s.length-1?o=n>0?0:s.length-1:0===o&&n<0&&(o=s.length-1);var a=s[o];if(a&&n){if(a.row===t){do{a=s[o+=n]}while(a&&a.row===t);if(!a)return s.slice()}var l=[];t=a.row;do{l[n<0?"unshift":"push"](a),a=s[o+=n]}while(a&&a.row==t);return l.length&&l}}}var s=e("../line_widgets").LineWidgets,o=e("../lib/dom"),r=e("../range").Range;t.showErrorMarker=function(e,t){var i=e.session;i.widgetManager||(i.widgetManager=new s(i),i.widgetManager.attach(e));var r=e.getCursorPosition(),a=r.row,l=i.lineWidgets&&i.lineWidgets[a];l?l.destroy():a-=t;var h,c=n(i,a,t);if(c){var u=c[0];r.column=(u.pos&&"number"!=typeof u.column?u.pos.sc:u.column)||0,r.row=u.row,h=e.renderer.$gutterLayer.$annotations[r.row]}else{if(l)return;h={text:["Looks good!"],className:"ace_ok"}}e.session.unfold(r.row),e.selection.moveToPosition(r);var d={row:r.row,fixedWidth:!0,coverGutter:!0,el:o.createElement("div")},g=d.el.appendChild(o.createElement("div")),f=d.el.appendChild(o.createElement("div"));f.className="error_widget_arrow "+h.className;var m=e.renderer.$cursorLayer.getPixelPosition(r).left;f.style.left=m+e.renderer.gutterWidth-5+"px",d.el.className="error_widget_wrapper",g.className="error_widget "+h.className,g.innerHTML=h.text.join("<br>"),g.appendChild(o.createElement("div"));var p=function(e,t,i){if(0===t&&("esc"===i||"return"===i))return d.destroy(),{command:"null"}};d.destroy=function(){e.$mouseHandler.isMousePressed||(e.keyBinding.removeKeyboardHandler(p),i.widgetManager.removeLineWidget(d),e.off("changeSelection",d.destroy),e.off("changeSession",d.destroy),e.off("mouseup",d.destroy),e.off("change",d.destroy))},e.keyBinding.addKeyboardHandler(p),e.on("changeSelection",d.destroy),e.on("changeSession",d.destroy),e.on("mouseup",d.destroy),e.on("change",d.destroy),e.session.widgetManager.addLineWidget(d),d.el.onmousedown=e.focus.bind(e),e.renderer.scrollCursorIntoView(null,.5,{bottom:d.el.offsetHeight})},o.importCssString("    .error_widget_wrapper {        background: inherit;        color: inherit;        border:none    }    .error_widget {        border-top: solid 2px;        border-bottom: solid 2px;        margin: 5px 0;        padding: 10px 40px;        white-space: pre-wrap;    }    .error_widget.ace_error, .error_widget_arrow.ace_error{        border-color: #ff5a5a    }    .error_widget.ace_warning, .error_widget_arrow.ace_warning{        border-color: #F1D817    }    .error_widget.ace_info, .error_widget_arrow.ace_info{        border-color: #5a5a5a    }    .error_widget.ace_ok, .error_widget_arrow.ace_ok{        border-color: #5aaa5a    }    .error_widget_arrow {        position: absolute;        border: solid 5px;        border-top-color: transparent!important;        border-right-color: transparent!important;        border-left-color: transparent!important;        top: -5px;    }","")}),define("ace/ace",["require","exports","module","ace/lib/fixoldbrowsers","ace/lib/dom","ace/lib/event","ace/editor","ace/edit_session","ace/undomanager","ace/virtual_renderer","ace/worker/worker_client","ace/keyboard/hash_handler","ace/placeholder","ace/multi_select","ace/mode/folding/fold_mode","ace/theme/textmate","ace/ext/error_marker","ace/config"],function(e,t){"use strict";e("./lib/fixoldbrowsers");var i=e("./lib/dom"),n=e("./lib/event"),s=e("./editor").Editor,o=e("./edit_session").EditSession,r=e("./undomanager").UndoManager,a=e("./virtual_renderer").VirtualRenderer;e("./worker/worker_client"),e("./keyboard/hash_handler"),e("./placeholder"),e("./multi_select"),e("./mode/folding/fold_mode"),e("./theme/textmate"),e("./ext/error_marker"),t.config=e("./config"),t.require=e,t.edit=function(e){if("string"==typeof e){var o=e;if(!(e=document.getElementById(o)))throw new Error("ace.edit can't find div #"+o)}if(e&&e.env&&e.env.editor instanceof s)return e.env.editor;var r="";if(e&&/input|textarea/i.test(e.tagName)){var l=e;r=l.value,e=i.createElement("pre"),l.parentNode.replaceChild(e,l)}else r=i.getInnerText(e),e.innerHTML="";var h=t.createEditSession(r),c=new s(new a(e));c.setSession(h);var u={document:h,editor:c,onResize:c.resize.bind(c,null)};return l&&(u.textarea=l),n.addListener(window,"resize",u.onResize),c.on("destroy",function(){n.removeListener(window,"resize",u.onResize),u.editor.container.env=null}),c.container.env=c.env=u,c},t.createEditSession=function(e,t){var i=new o(e,t);return i.setUndoManager(new r),i},t.EditSession=o,t.UndoManager=r}),function(){window.require(["ace/ace"],function(e){e&&e.config.init(!0),window.ace||(window.ace=e);for(var t in e)e.hasOwnProperty(t)&&(window.ace[t]=e[t])})}();
//script: prosemirror
!function(t){function e(t,e,o){return 4===arguments.length?n.apply(this,arguments):void r(t,{declarative:!0,deps:e,declare:o})}function n(t,e,n,o){r(t,{declarative:!1,deps:e,executingRequire:n,execute:o})}function r(t,e){e.name=t,t in m||(m[t]=e),e.normalizedDeps=e.deps}function o(t,e){if(e[t.groupIndex]=e[t.groupIndex]||[],-1==v.call(e[t.groupIndex],t)){e[t.groupIndex].push(t);for(var n=0,r=t.normalizedDeps.length;r>n;n++){var i=t.normalizedDeps[n],s=m[i];if(s&&!s.evaluated){var a=t.groupIndex+(s.declarative!=t.declarative);if(void 0===s.groupIndex||s.groupIndex<a){if(void 0!==s.groupIndex&&(e[s.groupIndex].splice(v.call(e[s.groupIndex],s),1),0==e[s.groupIndex].length))throw new TypeError("Mixed dependency cycle detected");s.groupIndex=a}o(s,e)}}}}function i(t){var e=m[t];e.groupIndex=0;var n=[];o(e,n);for(var r=!!e.declarative==n.length%2,i=n.length-1;i>=0;i--){for(var s=n[i],c=0;c<s.length;c++){var p=s[c];r?a(p):l(p)}r=!r}}function s(t){return w[t]||(w[t]={name:t,dependencies:[],exports:{},importers:[]})}function a(e){if(!e.module){var n=e.module=s(e.name),r=e.module.exports,o=e.declare.call(t,function(t,e){if(n.locked=!0,"object"==typeof t)for(var o in t)r[o]=t[o];else r[t]=e;for(var i=0,s=n.importers.length;s>i;i++){var a=n.importers[i];if(!a.locked)for(var c=0;c<a.dependencies.length;++c)a.dependencies[c]===n&&a.setters[c](r)}return n.locked=!1,e},e.name);n.setters=o.setters,n.execute=o.execute;for(var i=0,c=e.normalizedDeps.length;c>i;i++){var l,p=e.normalizedDeps[i],u=m[p],f=w[p];f?l=f.exports:u&&!u.declarative?l=u.esModule:u?(a(u),f=u.module,l=f.exports):l=d(p),f&&f.importers?(f.importers.push(n),n.dependencies.push(f)):n.dependencies.push(null),n.setters[i]&&n.setters[i](l)}}}function c(t){var e,n=m[t];if(n)n.declarative?h(t,[]):n.evaluated||l(n),e=n.module.exports;else if(!(e=d(t)))throw new Error("Unable to load dependency "+t+".");return(!n||n.declarative)&&e&&e.__useDefault?e["default"]:e}function l(e){if(!e.module){var n={},r=e.module={exports:n,id:e.name};if(!e.executingRequire)for(var o=0,i=e.normalizedDeps.length;i>o;o++){var s=e.normalizedDeps[o],a=m[s];a&&l(a)}e.evaluated=!0;var u=e.execute.call(t,function(t){for(var n=0,r=e.deps.length;r>n;n++)if(e.deps[n]==t)return c(e.normalizedDeps[n]);throw new TypeError("Module "+t+" not declared as a dependency.")},n,r);u&&(r.exports=u),n=r.exports,n&&n.__esModule?e.esModule=n:e.esModule=p(n)}}function p(t){var e={};if("object"==typeof t||"function"==typeof t){var n=t&&t.hasOwnProperty;if(g)for(var r in t)f(e,t,r)||u(e,t,r,n);else for(var r in t)u(e,t,r,n)}return e["default"]=t,y(e,"__useDefault",{value:!0}),e}function u(t,e,n,r){(!r||e.hasOwnProperty(n))&&(t[n]=e[n])}function f(t,e,n){try{var r;return(r=Object.getOwnPropertyDescriptor(e,n))&&y(t,n,r),!0}catch(t){return!1}}function h(e,n){var r=m[e];if(r&&!r.evaluated&&r.declarative){n.push(e);for(var o=0,i=r.normalizedDeps.length;i>o;o++){var s=r.normalizedDeps[o];-1==v.call(n,s)&&(m[s]?h(s,n):d(s))}r.evaluated||(r.evaluated=!0,r.module.execute.call(t))}}function d(t){if(b[t])return b[t];if("@node/"==t.substr(0,6))return x(t.substr(6));var e=m[t];if(!e)throw"Module "+t+" not present.";return i(t),h(t,[]),m[t]=void 0,e.declarative&&y(e.module.exports,"__esModule",{value:!0}),b[t]=e.declarative?e.module.exports:e.esModule}var m={},v=Array.prototype.indexOf||function(t){for(var e=0,n=this.length;n>e;e++)if(this[e]===t)return e;return-1},g=!0;try{Object.getOwnPropertyDescriptor({a:0},"a")}catch(t){g=!1}var y;!function(){try{Object.defineProperty({},"a",{})&&(y=Object.defineProperty)}catch(t){y=function(t,e,n){try{t[e]=n.value||n.get.call(t)}catch(t){}}}}();var w={},x="undefined"!=typeof System&&System._nodeRequire||"undefined"!=typeof require&&require.resolve&&"undefined"!=typeof process&&require,b={"@empty":{}};return function(t,r,o){return function(i){i(function(){for(var i={_nodeRequire:x,register:e,registerDynamic:n,get:d,set:function(t,e){b[t]=e},newModule:function(t){return t}},s=0;s<r.length;s++)!function(t,e){e&&e.__esModule?b[t]=e:b[t]=p(e)}(r[s],arguments[s]);o(i);var a=d(t[0]);if(t.length>1)for(var s=1;s<t.length;s++)d(t[s]);return a.__useDefault?a["default"]:a})}}}("undefined"!=typeof self?self:global)(["1"],[],function(t){this.require,this.exports,this.module;t.registerDynamic("2",["3"],!0,function(t,e,n){var r=t("3"),o=r.Schema,i={doc:{content:"block+"},paragraph:{content:"inline<_>*",group:"block",parseDOM:[{tag:"p"}],toDOM:function(){return["p",0]}},blockquote:{content:"block+",group:"block",defining:!0,parseDOM:[{tag:"blockquote"}],toDOM:function(){return["blockquote",0]}},horizontal_rule:{group:"block",parseDOM:[{tag:"hr"}],toDOM:function(){return["hr"]}},heading:{attrs:{level:{"default":1}},content:"inline<_>*",group:"block",defining:!0,parseDOM:[{tag:"h1",attrs:{level:1}},{tag:"h2",attrs:{level:2}},{tag:"h3",attrs:{level:3}},{tag:"h4",attrs:{level:4}},{tag:"h5",attrs:{level:5}},{tag:"h6",attrs:{level:6}}],toDOM:function(t){return["h"+t.attrs.level,0]}},code_block:{content:"text*",group:"block",code:!0,defining:!0,parseDOM:[{tag:"pre",preserveWhitespace:!0}],toDOM:function(){return["pre",["code",0]]}},text:{group:"inline",toDOM:function(t){return t.text}},image:{inline:!0,attrs:{src:{},alt:{"default":null},title:{"default":null}},group:"inline",draggable:!0,parseDOM:[{tag:"img[src]",getAttrs:function(t){return{src:t.getAttribute("src"),title:t.getAttribute("title"),alt:t.getAttribute("alt")}}}],toDOM:function(t){return["img",t.attrs]}},hard_break:{inline:!0,group:"inline",selectable:!1,parseDOM:[{tag:"br"}],toDOM:function(){return["br"]}}};e.nodes=i;var s={em:{parseDOM:[{tag:"i"},{tag:"em"},{style:"font-style",getAttrs:function(t){return"italic"==t&&null}}],toDOM:function(){return["em"]}},strong:{parseDOM:[{tag:"strong"},{tag:"b",getAttrs:function(t){return"normal"!=t.style.fontWeight&&null}},{style:"font-weight",getAttrs:function(t){return/^(bold(er)?|[5-9]\d{2,})$/.test(t)&&null}}],toDOM:function(){return["strong"]}},link:{attrs:{href:{},title:{"default":null}},parseDOM:[{tag:"a[href]",getAttrs:function(t){return{href:t.getAttribute("href"),title:t.getAttribute("title")}}}],toDOM:function(t){return["a",t.attrs]}},code:{parseDOM:[{tag:"code"}],toDOM:function(){return["code"]}}};e.marks=s;var a=new o({nodes:i,marks:s});return e.schema=a,n.exports}),t.registerDynamic("4",["2"],!0,function(t,e,n){return n.exports=t("2"),n.exports}),t.registerDynamic("5",["6"],!0,function(t,e,n){var r=t("6"),o=r.InputRule,i=new o(/--$/,"\u2014");e.emDash=i;var s=new o(/\.\.\.$/,"\u2026");e.ellipsis=s;var a=new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(")$/,"\u201c");e.openDoubleQuote=a;var c=new o(/"$/,"\u201d");e.closeDoubleQuote=c;var l=new o(/(?:^|[\s\{\[\(\<'"\u2018\u201C])(')$/,"\u2018");e.openSingleQuote=l;var p=new o(/'$/,"\u2019");e.closeSingleQuote=p;var u=[a,c,l,p];e.smartQuotes=u;var f=[i,s].concat(u);return e.allInputRules=f,n.exports}),t.registerDynamic("6",["7"],!0,function(t,e,n){function r(t){return function(e,n,r,o){var i=t;if(n[1]){var s=n[0].lastIndexOf(n[1]);i+=n[0].slice(s+n[1].length),r+=s;var a=r-o;a>0&&(i=n[0].slice(s-a,s)+i,r=o)}var c=e.doc.resolve(r).marks();return e.tr.replaceWith(r,o,e.schema.text(i,c))}}function o(t){var e=t.rules;return new a({state:{init:function(){return null},apply:function(t,e){var n=t.getMeta(u);return n||(t.selectionSet||t.docChanged?null:e)}},props:{handleTextInput:function(t,n,r,o){for(var i=t.state,s=i.doc.resolve(n),a=s.parent.textBetween(Math.max(0,s.parentOffset-p),s.parentOffset,null,"\ufffc")+o,c=0;c<e.length;c++){var l=e[c].match.exec(a),f=l&&e[c].handler(i,l,n-(l[0].length-o.length),r);if(f)return t.dispatch(f.setMeta(u,{transform:f,from:n,to:r,text:o})),!0}return!1},handleKeyDown:function(t,e){return 8==e.keyCode&&i(t.state,t.dispatch,this.getState(t.state))}}})}function i(t,e,n){if(!n)return!1;for(var r=t.tr,o=n.transform,i=o.steps.length-1;i>=0;i--)r.step(o.steps[i].invert(o.docs[i]));var s=r.doc.resolve(n.from).marks();return e(r.replaceWith(n.from,n.to,t.schema.text(n.text,s))),!0}var s=t("7"),a=s.Plugin,c=s.PluginKey,l=function(t,e){this.match=t,this.handler="string"==typeof e?r(e):e};e.InputRule=l;var p=500,u=new c("fromInputRule");return e.inputRules=o,n.exports}),t.registerDynamic("8",["6","9"],!0,function(t,e,n){function r(t,e,n,r){return new u(t,function(t,o,i,s){var a=n instanceof Function?n(o):n,c=t.tr["delete"](i,s),l=c.doc.resolve(i),p=l.blockRange(),u=p&&h(p,e,a);if(!u)return null;c.wrap(p,u);var f=c.doc.resolve(i-1).nodeBefore;return f&&f.type==e&&d(c.doc,i-1)&&(!r||r(o,f))&&c.join(i-1),c})}function o(t,e,n){return new u(t,function(t,r,o,i){var s=t.doc.resolve(o),a=n instanceof Function?n(r):n;return s.node(-1).canReplaceWith(s.index(-1),s.indexAfter(-1),e,a)?t.tr["delete"](o,i).setBlockType(o,o,e,a):null})}function i(t){return r(/^\s*> $/,t)}function s(t){return r(/^(\d+)\. $/,t,function(t){return{order:+t[1]}},function(t,e){return e.childCount+e.attrs.order==+t[1]})}function a(t){return r(/^\s*([-+*]) $/,t)}function c(t){return o(/^```$/,t)}function l(t,e){return o(new RegExp("^(#{1,"+e+"}) $"),t,function(t){return{level:t[1].length}})}var p=t("6"),u=p.InputRule,f=t("9"),h=f.findWrapping,d=f.canJoin;return e.wrappingInputRule=r,e.textblockTypeInputRule=o,e.blockQuoteRule=i,e.orderedListRule=s,e.bulletListRule=a,e.codeBlockRule=c,e.headingRule=l,n.exports}),t.registerDynamic("a",["6","5","8"],!0,function(t,e,n){var r;r=t("6"),e.InputRule=r.InputRule,e.inputRules=r.inputRules;var o;o=t("5"),e.emDash=o.emDash,e.ellipsis=o.ellipsis,e.openDoubleQuote=o.openDoubleQuote,e.closeDoubleQuote=o.closeDoubleQuote,e.openSingleQuote=o.openSingleQuote,e.closeSingleQuote=o.closeSingleQuote,e.smartQuotes=o.smartQuotes,e.allInputRules=o.allInputRules;var i;return i=t("8"),e.wrappingInputRule=i.wrappingInputRule,e.textblockTypeInputRule=i.textblockTypeInputRule,e.blockQuoteRule=i.blockQuoteRule,e.orderedListRule=i.orderedListRule,e.bulletListRule=i.bulletListRule,e.codeBlockRule=i.codeBlockRule,e.headingRule=i.headingRule,n.exports}),t.registerDynamic("b",["a"],!0,function(t,e,n){return n.exports=t("a"),n.exports}),t.registerDynamic("c",[],!0,function(t,e,n){function r(t){var e=(!a||!t.ctrlKey&&!t.altKey&&!t.metaKey)&&t.key||(t.shiftKey?i:o)[t.keyCode]||t.key||"Unidentified";return"Esc"==e&&(e="Escape"),"Del"==e&&(e="Delete"),"Left"==e&&(e="ArrowLeft"),"Up"==e&&(e="ArrowUp"),"Right"==e&&(e="ArrowRight"),"Down"==e&&(e="ArrowDown"),e}for(var o={8:"Backspace",9:"Tab",10:"Enter",12:"NumLock",13:"Enter",16:"Shift",17:"Control",18:"Alt",20:"CapsLock",27:"Escape",32:" ",33:"PageUp",34:"PageDown",35:"End",36:"Home",37:"ArrowLeft",38:"ArrowUp",39:"ArrowRight",40:"ArrowDown",44:"PrintScreen",45:"Insert",46:"Delete",59:";",61:"=",91:"Meta",92:"Meta",106:"*",107:"+",108:",",109:"-",110:".",111:"/",144:"NumLock",145:"ScrollLock",160:"Shift",161:"Shift",162:"Control",163:"Control",164:"Alt",165:"Alt",173:"-",186:";",187:"=",188:",",189:"-",190:".",191:"/",192:"`",219:"[",220:"\\",221:"]",222:"'",229:"q"},i={48:")",49:"!",50:"@",51:"#",52:"$",53:"%",54:"^",55:"&",56:"*",57:"(",59:";",61:"+",173:"_",186:":",187:"+",188:"<",189:"_",190:">",191:"?",192:"~",219:"{",220:"|",221:"}",222:'"',229:"Q"},s="undefined"!=typeof navigator&&/Chrome\/(\d+)/.exec(navigator.userAgent),a=s&&+s[1]<57,c=0;c<10;c++)o[48+c]=o[96+c]=String(c);for(var c=1;c<=24;c++)o[c+111]="F"+c;for(var c=65;c<=90;c++)o[c]=String.fromCharCode(c+32),i[c]=String.fromCharCode(c);for(var l in o)i.hasOwnProperty(l)||(i[l]=o[l]);return n.exports=r,r.base=o,r.shift=i,n.exports}),t.registerDynamic("d",["c"],!0,function(t,e,n){return n.exports=t("c"),n.exports}),t.registerDynamic("e",["d","7"],!0,function(t,e,n){function r(t){var e=t.split(/-(?!$)/),n=e[e.length-1];"Space"==n&&(n=" ");for(var r,o,i,s,a=0;a<e.length-1;a++){var c=e[a];if(/^(cmd|meta|m)$/i.test(c))s=!0;else if(/^a(lt)?$/i.test(c))r=!0;else if(/^(c|ctrl|control)$/i.test(c))o=!0;else if(/^s(hift)?$/i.test(c))i=!0;else{if(!/^mod$/i.test(c))throw new Error("Unrecognized modifier name: "+c);p?s=!0:o=!0}}return r&&(n="Alt-"+n),o&&(n="Ctrl-"+n),s&&(n="Meta-"+n),i&&(n="Shift-"+n),n}function o(t){var e=Object.create(null);for(var n in t)e[r(n)]=t[n];return e}function i(t,e,n){return e.altKey&&(t="Alt-"+t),e.ctrlKey&&(t="Ctrl-"+t),e.metaKey&&(t="Meta-"+t),!1!==n&&e.shiftKey&&(t="Shift-"+t),t}function s(t){var e=o(t);return new l({props:{handleKeyDown:function(t,n){var r,o=a(n),s=1==o.length&&" "!=o,c=e[i(o,n,!s)];if(c&&c(t.state,t.dispatch,t))return!0;if(n.shiftKey&&s&&(r=a.base[n.keyCode])){var l=e[i(r,n,!0)];if(l&&l(t.state,t.dispatch,t))return!0}return!1}}})}var a=t("d"),c=t("7"),l=c.Plugin,p="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);return e.keymap=s,n.exports}),t.registerDynamic("f",["e"],!0,function(t,e,n){return n.exports=t("e"),n.exports}),t.registerDynamic("10",["7","11"],!0,function(t,e,n){function r(t){function e(t,e){t.dispatch(t.state.tr.setMeta(o,e))}function n(t){clearTimeout(r),r=setTimeout(function(){o.getState(t.state)&&e(t,{type:"remove"})},1e3)}var r=null,o=new a({state:{init:function(){return null},apply:function(e,n,r){if(u&&f)return null;var s=e.getMeta(o);return s?"set"==s.type?i(r,s.pos,t):null:n}},props:{handleDOMEvents:{dragover:function(t,r){var i=o.getState(t.state),s=t.posAtCoords({left:r.clientX,top:r.clientY});return!s||i&&i.pos==s.pos||e(t,{type:"set",pos:s.pos}),n(t),!1},dragend:function(t){return o.getState(t.state)&&e(t,{type:"remove"}),!1},drop:function(t){return o.getState(t.state)&&e(t,{type:"remove"}),!1},dragleave:function(t,n){return n.target==t.content&&e(t,{type:"remove"}),!1}},decorations:function(t){var e=o.getState(t);return e&&e.deco}}});return o}function o(t,e){var n=t&&t.width||1;return"border-"+e+": "+n+"px solid "+(t&&t.color||"black")+"; margin-"+e+": -"+n+"px"}function i(t,e,n){var r,i=t.doc.resolve(e);if(!i.parent.isTextblock){var s,a;(s=i.nodeBefore)?r=l.node(e-s.nodeSize,e,{nodeName:"div",style:o(n,"right")}):(a=i.nodeAfter)&&(r=l.node(e,e+a.nodeSize,{nodeName:"div",style:o(n,"left")}))}if(!r){var c=document.createElement("span");c.textContent="\u200b",c.style.cssText=o(n,"left")+"; display: inline-block; pointer-events: none",r=l.widget(e,c)}return{pos:e,deco:p.create(t.doc,[r])}}var s=t("7"),a=s.Plugin,c=t("11"),l=c.Decoration,p=c.DecorationSet,u="undefined"!=typeof navigator&&/gecko\/\d/i.test(navigator.userAgent),f="undefined"!=typeof navigator&&/linux/i.test(navigator.platform);return e.dropCursor=r,n.exports}),t.registerDynamic("12",["10"],!0,function(t,e,n){return n.exports=t("10"),n.exports}),t.registerDynamic("13",[],!0,function(t,e,n){function r(){return{left:0,right:window.innerWidth,top:0,bottom:window.innerHeight}}function o(t){var e=t.parentNode;return 11==e.nodeType?e.host:e}function i(t,e){var n=t.someProp("scrollThreshold")||0,i=t.someProp("scrollMargin");null==i&&(i=5);for(var s=t.content;;s=o(s)){var a=s==document.body,c=a?r():s.getBoundingClientRect(),l=0,p=0;if(e.top<c.top+n?p=-(c.top-e.top+i):e.bottom>c.bottom-n&&(p=e.bottom-c.bottom+i),e.left<c.left+n?l=-(c.left-e.left+i):e.right>c.right-n&&(l=e.right-c.right+i),(l||p)&&(a?window.scrollBy(l,p):(p&&(s.scrollTop+=p),l&&(s.scrollLeft+=l))),a)break}}function s(t){for(var e,n,r=t.content.getBoundingClientRect(),i=Math.max(0,r.top),s=(r.left+r.right)/2,a=i+1;a<Math.min(innerHeight,r.bottom);a+=5){var c=t.root.elementFromPoint(s,a);if(c!=t.content&&t.content.contains(c)){var l=c.getBoundingClientRect();if(l.top>=i-20){e=c,n=l.top;break}}}for(var p=[],u=t.content;u&&(p.push({dom:u,top:u.scrollTop,left:u.scrollLeft}),u!=document.body);u=o(u));return{refDOM:e,refTop:n,stack:p}}function a(t){for(var e=t.refDOM,n=t.refTop,r=t.stack,o=e?e.getBoundingClientRect().top:0,i=0==o?0:o-n,s=0;s<r.length;s++){var a=r[s],c=a.dom,l=a.top,p=a.left;c.scrollTop!=l+i&&(c.scrollTop=l+i),c.scrollLeft!=p&&(c.scrollLeft=p)}}function c(t,e){for(var n,r,o=2e8,i=0,s=e.top,a=e.top,p=t.firstChild,u=0;p;p=p.nextSibling,u++){var h=void 0;if(1==p.nodeType)h=p.getClientRects();else{if(3!=p.nodeType)continue;h=f(p).getClientRects()}for(var d=0;d<h.length;d++){var m=h[d];if(m.top<=s&&m.bottom>=a){s=Math.max(m.bottom,s),a=Math.min(m.top,a);var v=m.left>e.left?m.left-e.left:m.right<e.left?e.left-m.right:0;if(v<o){n=p,o=v,r=v&&3==n.nodeType?{left:m.right<e.left?m.right:m.left,top:e.top}:e,1==p.nodeType&&v&&(i=u+(e.left>=(m.left+m.right)/2?1:0));continue}}!n&&(e.left>=m.right&&e.top>=m.top||e.left>=m.left&&e.top>=m.bottom)&&(i=u+1)}}return n&&3==n.nodeType?l(n,r):!n||o&&1==n.nodeType?{node:t,offset:i}:c(n,r)}function l(t,e){for(var n=t.nodeValue.length,r=document.createRange(),o=0;o<n;o++){r.setEnd(t,o+1),r.setStart(t,o);var i=h(r,1);if(i.top!=i.bottom&&(i.left-1<=e.left&&i.right+1>=e.left&&i.top-1<=e.top&&i.bottom+1>=e.top))return{node:t,offset:o+(e.left>=(i.left+i.right)/2?1:0)}}return{node:t,offset:0}}function p(t,e){if(/^[uo]l$/i.test(t.nodeName))for(var n=t.firstChild;n;n=n.nextSibling)if(n.pmViewDesc&&/^li$/i.test(n.nodeName)){var r=n.getBoundingClientRect();if(e.left>r.left-2)break;if(r.top<=e.top&&r.bottom>=e.top)return n}return t}function u(t,e){var n=p(t.root.elementFromPoint(e.left,e.top+1),e);if(!t.content.contains(3==n.nodeType?n.parentNode:n))return null;var r=c(n,e),o=r.node,i=r.offset,s=-1;if(1==o.nodeType&&!o.firstChild){var a=o.getBoundingClientRect();s=a.left!=a.right&&e.left>(a.left+a.right)/2?1:-1}var l=t.docView.nearestDesc(n,!0);return{pos:t.docView.posFromDOM(o,i,s),inside:l&&l.posAtStart-l.border}}function f(t,e,n){var r=document.createRange();return r.setEnd(t,null==n?t.nodeValue.length:n),r.setStart(t,e||0),r}function h(t,e){var n=t.getClientRects();return n.length?n[e<0?0:n.length-1]:t.getBoundingClientRect()}function d(t,e){var n,r,o=t.docView.domFromPos(e),i=o.node,s=o.offset;if(3==i.nodeType)s<i.nodeValue.length&&(r=h(f(i,s,s+1),-1),n="left"),r&&r.left!=r.right||!s||(r=h(f(i,s-1,s),1),n="right");else if(i.firstChild){if(s<i.childNodes.length){var a=i.childNodes[s];r=h(3==a.nodeType?f(a):a,-1),n="left"}if((!r||r.top==r.bottom)&&s){var c=i.childNodes[s-1];r=h(3==c.nodeType?f(c):c,1),n="right"}}else r=i.getBoundingClientRect(),n="left";var l=r[n];return{top:r.top,bottom:r.bottom,left:l,right:l}}function m(t,e,n){var r=t.state,o=t.root.activeElement;r==e&&t.inDOMChange||t.updateState(e),o!=t.content&&t.focus();try{return n()}finally{r!=e&&t.updateState(r),o!=t.content&&o.focus()}}function v(t,e,n){var r="up"==n?e.selection.$from:e.selection.$to;return!!r.depth&&m(t,e,function(){for(var e=t.docView.domAfterPos(r.before()),o=d(t,r.pos),i=e.firstChild;i;i=i.nextSibling){var s=void 0;if(1==i.nodeType)s=i.getClientRects();else{if(3!=i.nodeType)continue;s=f(i,0,i.nodeValue.length).getClientRects()}for(var a=0;a<s.length;a++){var c=s[a];if("up"==n?c.bottom<o.top+1:c.top>o.bottom-1)return!1}}return!0})}function g(t,e,n){var r=e.selection,o=r.$head;if(!r.empty||!o.parent.isTextblock||!o.depth)return!1;var i=o.parentOffset,s=!i,a=i==o.parent.content.size;if(!s&&!a&&!w.test(o.parent.textContent))return!1;var c=getSelection();return c.modify?m(t,e,function(){var e=c.getRangeAt(0);c.modify("move",n,"character");var r=t.docView.domAfterPos(o.before()),i=!r.contains(1==c.focusNode.nodeType?c.focusNode:c.focusNode.parentNode)||t.docView.posFromDOM(c.focusNode,c.focusOffset)==o.pos;return c.removeAllRanges(),c.addRange(e),i}):"left"==n||"backward"==n?s:a}function y(t,e,n){return x==e&&b==n?k:(x=e,b=n,k="up"==n||"down"==n?v(t,e,n):g(t,e,n))}e.scrollRectIntoView=i,e.storeScrollPos=s,e.resetScrollPos=a,e.posAtCoords=u,e.coordsAtPos=d;var w=/[\u0590-\u08ac]/,x=null,b=null,k=!1;return e.endOfTextblock=y,n.exports}),t.registerDynamic("14",["3","15"],!0,function(t,e,n){function r(t,e,n,r,o){return c(r,e,t,!0),new D(null,t,e,n,r,r,r,o)}function o(t,e){for(var n=t.firstChild,r=0;r<e.length;r++){var i=e[r],s=i.dom;if(s.parentNode==t){for(;s!=n;)n=p(n);n=n.nextSibling}else t.insertBefore(s,n);i instanceof C&&o(i.contentDOM,i.children)}for(;n;)n=p(n)}function i(t,e,n){if(0==t.length)return E;for(var r=n?E[0]:new N,o=[r],i=0;i<t.length;i++){var s=t[i].type.attrs,a=r;if(s){s.nodeName&&o.push(a=new N(s.nodeName));for(var c in s){var l=s[c];null!=l&&(n&&1==o.length&&o.push(a=r=new N(e.isInline?"span":"div")),"class"==c?a["class"]=(a["class"]?a["class"]+" ":"")+l:"style"==c?a.style=(a.style?a.style+";":"")+l:"nodeName"!=c&&(a[c]=l))}}}return o}function s(t,e,n,r){if(n==E&&r==E)return e;for(var o=e,i=0;i<r.length;i++){var s=r[i],c=n[i];if(i){var l=void 0;c&&c.nodeName==s.nodeName&&o!=t&&(l=e.parentNode)&&l.tagName.toLowerCase()==s.nodeName?o=l:(l=document.createElement(s.nodeName),l.appendChild(o),o=l)}a(o,c||E[0],s)}return o}function a(t,e,n){for(var r in e)"class"==r||"style"==r||"nodeName"==r||r in n||t.removeAttribute(r);for(var o in n)"class"!=o&&"style"!=o&&"nodeName"!=o&&n[o]!=e[o]&&t.setAttribute(o,n[o]);if(e["class"]!=n["class"]){for(var i=e["class"]?e["class"].split(" "):S,s=n["class"]?n["class"].split(" "):S,a=0;a<i.length;a++)-1==s.indexOf(i[a])&&t.classList.remove(i[a]);for(var c=0;c<s.length;c++)-1==i.indexOf(s[c])&&t.classList.add(s[c])}if(e.style!=n.style){var l,p=t.style.cssText;e.style&&(l=p.indexOf(e.style))>-1&&(p=p.slice(0,l)+p.slice(l+e.style.length)),t.style.cssText=p+(n.style||"")}}function c(t,e,n){return s(t,t,E,i(e,n,1!=t.nodeType))}function l(t,e){if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].type.eq(e[n].type))return!1;return!0}function p(t){var e=t.nextSibling;return t.parentNode.removeChild(t),e}function u(t,e,n,r){var o=e.locals(t),i=0;if(0!=o.length)for(var s=0,a=[],c=null,l=0;;){for(;s<o.length&&o[s].to==i;)n(o[s++]);var p=void 0;if(c)p=c,c=null;else{if(!(l<t.childCount))break;p=t.child(l++)}for(var u=0;u<a.length;u++)a[u].to<=i&&a.splice(u--,1);for(;s<o.length&&o[s].from==i;)a.push(o[s++]);var f=i+p.nodeSize;if(p.isText){var h=f;s<o.length&&o[s].from<h&&(h=o[s].from);for(var d=0;d<a.length;d++)a[d].to<h&&(h=a[d].to);h<f&&(c=p.cut(h-i),p=p.cut(0,h-i),f=h)}r(p,a.length?a.slice():S,e.forChild(i,p),l-1),i=f}else for(var m=0;m<t.childCount;m++){var v=t.child(m);r(v,o,e.forChild(i,v),m),i+=v.nodeSize}}function f(t){return z==t.props?I:(z=t.props,I=h(t))}function h(t){var e={};return t.someProp("nodeViews",function(t){for(var n in t)Object.prototype.hasOwnProperty.call(e,n)||(e[n]=t[n])}),e}function d(t){if("UL"==t.nodeName||"OL"==t.nodeName){var e=t.style.cssText;t.style.cssText=e+"; list-style: square !important",window.getComputedStyle(t).listStyle,t.style.cssText=e}}var m=t("3"),v=m.DOMSerializer,g=t("15"),y=0,w=2,x=3,b=function(t,e,n,r){this.parent=t,this.children=e,this.dom=n,n.pmViewDesc=this,this.contentDOM=r,this.dirty=y},k={size:{},border:{},posAtStart:{},posAtEnd:{},contentLost:{}};b.prototype.matchesWidget=function(){return!1},b.prototype.matchesMark=function(){return!1},b.prototype.matchesNode=function(){return!1},b.prototype.matchesHack=function(){return!1},b.prototype.parseRule=function(){return null},b.prototype.stopEvent=function(){return!1},k.size.get=function(){for(var t=this,e=0,n=0;n<this.children.length;n++)e+=t.children[n].size;return e},k.border.get=function(){return 0},b.prototype.destroy=function(){var t=this;this.parent=null,this.dom.pmViewDesc==this&&(this.dom.pmViewDesc=null);for(var e=0;e<this.children.length;e++)t.children[e].destroy()},b.prototype.posBeforeChild=function(t){for(var e=this,n=0,r=this.posAtStart;n<this.children.length;n++){var o=e.children[n];if(o==t)return r;r+=o.size}},k.posAtStart.get=function(){return this.parent?this.parent.posBeforeChild(this)+this.border:0},k.posAtEnd.get=function(){return this.posAtStart+this.size-2*this.border},b.prototype.localPosFromDOM=function(t,e,n){var r=this;if(this.contentDOM&&this.contentDOM.contains(1==t.nodeType?t:t.parentNode)){if(n<0){var o,i;if(t==this.contentDOM)o=t.childNodes[e-1];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;o=t.previousSibling}for(;o&&(!(i=o.pmViewDesc)||i.parent!=this);)o=o.previousSibling;return o?this.posBeforeChild(i)+i.size:this.posAtStart}var s,a;if(t==this.contentDOM)s=t.childNodes[e];else{for(;t.parentNode!=this.contentDOM;)t=t.parentNode;s=t.nextSibling}for(;s&&(!(a=s.pmViewDesc)||a.parent!=this);)s=s.nextSibling;return s?this.posBeforeChild(a):this.posAtEnd}var c;if(this.contentDOM&&this.contentDOM!=this.dom&&this.dom.contains(this.contentDOM))c=2&t.compareDocumentPosition(this.contentDOM);else if(this.dom.firstChild){if(0==e)for(var l=t;;l=l.parentNode){if(l==r.dom){c=!1;break}if(l.parentNode.firstChild!=l)break}if(null==c&&e==t.childNodes.length)for(var p=t;;p=p.parentNode){if(p==r.dom){c=!0;break}if(p.parentNode.lastChild!=p)break}}return(null==c?n>0:c)?this.posAtEnd:this.posAtStart},b.prototype.nearestDesc=function(t,e){for(var n=this,r=!0,o=t;o;o=o.parentNode){var i=n.getDesc(o);if(i&&(!e||i.node)){if(!r||!i.nodeDOM||1==i.nodeDOM.nodeType&&i.nodeDOM.contains(t))return i;r=!1}}},b.prototype.getDesc=function(t){for(var e=this,n=t.pmViewDesc,r=n;r;r=r.parent)if(r==e)return n},b.prototype.posFromDOM=function(t,e,n){for(var r=this,o=t;;o=o.parentNode){var i=r.getDesc(o);if(i)return i.localPosFromDOM(t,e,n)}},b.prototype.descAt=function(t){for(var e=this,n=0,r=0;n<this.children.length;n++){var o=e.children[n],i=r+o.size;if(r==t&&i!=r){for(;!o.border&&o.children.length;)o=o.children[0];return o}if(t<i)return o.descAt(t-r-o.border);r=i}},b.prototype.domFromPos=function(t,e){var n=this;if(!this.contentDOM)return{node:this.dom,offset:0};for(var r=0,o=0;;o++){if(r==t)return{node:n.contentDOM,offset:e?n.findDOMOffset(o,e):o};if(o==n.children.length)throw new Error("Invalid position "+t);var i=n.children[o],s=r+i.size;if(t<s)return i.domFromPos(t-r-i.border,e);r=s}},b.prototype.findDOMOffset=function(t,e){var n=this,r=this.contentDOM;if(e<0){for(var o=t-1;o>=0;o--){var i=n.children[o];if(i.size){var s=Array.prototype.indexOf.call(r.childNodes,i.dom);if(s>-1)return s+1}}return 0}for(var a=t;a<this.children.length;a++){var c=n.children[a];if(c.size){var l=Array.prototype.indexOf.call(r.childNodes,c.dom);if(l>-1)return l}}return r.childNodes.length},b.prototype.domAfterPos=function(t){var e=this.domFromPos(t),n=e.node,r=e.offset;if(1!=n.nodeType||r==n.childNodes.length)throw new RangeError("No node after pos "+t);return n.childNodes[r]},b.prototype.setSelection=function(t,e,n){for(var r=this,o=Math.min(t,e),i=Math.max(t,e),s=0,a=0;s<this.children.length;s++){var c=r.children[s],l=a+c.size;if(o>a&&i<l)return c.setSelection(t-a-c.border,e-a-c.border,n);a=l}var p=this.domFromPos(t),u=this.domFromPos(e),f=n.getSelection(),h=document.createRange();if(f.extend)h.setEnd(p.node,p.offset),h.collapse(!1);else{if(t>e){var d=p;p=u,u=d}h.setEnd(u.node,u.offset),h.setStart(p.node,p.offset)}f.removeAllRanges(),f.addRange(h),f.extend&&f.extend(u.node,u.offset)},b.prototype.ignoreMutation=function(){return!this.contentDOM},k.contentLost.get=function(){return this.contentDOM&&this.contentDOM!=this.dom&&!this.dom.contains(this.contentDOM)},b.prototype.markDirty=function(t,e){for(var n=this,r=0,o=0;o<this.children.length;o++){var i=n.children[o],s=r+i.size;if(r==s?t<=s&&e>=r:t<s&&e>r){var a=r+i.border,c=s-i.border;if(t>=a&&e<=c)return n.dirty=t==r||e==s?w:1,void(t==a&&e==c&&i.contentLost?i.dirty=x:i.markDirty(t-a,e-a));i.dirty=x}r=s}this.dirty=w},Object.defineProperties(b.prototype,k);var S=[],M=function(t){function e(e,n){t.call(this,e,S,n.type.widget,null),this.widget=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.matchesWidget=function(t){return this.dirty==y&&t.type.eq(this.widget.type)},e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.stopEvent=function(t){var e=this.widget.type.options.stopEvent;return!!e&&e(t)},e}(b),C=function(t){function e(e,n,r){t.call(this,e,[],r,r),this.mark=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r){var o=f(r)[n.type.name],i=o&&o(n,r);return new e(t,n,i&&i.dom||v.renderSpec(document,n.type.spec.toDOM(n)).dom)},e.prototype.parseRule=function(){return{mark:this.mark.type.name,attrs:this.mark.attrs,contentElement:this.contentDOM}},e.prototype.matchesMark=function(t){return this.dirty!=x&&this.mark.eq(t)},e}(b),D=function(t){function e(e,n,r,o,i,s,a,c){t.call(this,e,n.isLeaf?S:[],i,s),this.nodeDOM=a,this.node=n,this.outerDeco=r,this.innerDeco=o,s&&this.updateChildren(c)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={size:{},border:{}};return e.create=function(t,n,r,o,i){var s,a=f(i)[n.type.name],l=a&&a(n,i,function(){if(s&&s.parent)return s.parent.posBeforeChild(s)},r),p=l&&l.dom,u=l&&l.contentDOM;if(!p){var h;h=v.renderSpec(document,n.type.spec.toDOM(n)),p=h.dom,u=h.contentDOM}u||n.isText||(p.contentEditable=!1);var d=p;return p=c(p,r,n),l?s=new R(t,n,r,o,p,u,d,l,i):n.isText?new O(t,n,r,o,p,d,i):new e(t,n,r,o,p,u,d,i)},e.prototype.parseRule=function(){return{node:this.node.type.name,attrs:this.node.attrs,contentElement:this.contentLost?null:this.contentDOM}},e.prototype.matchesNode=function(t,e,n){return this.dirty==y&&t.eq(this.node)&&l(e,this.outerDeco)&&n.eq(this.innerDeco)},n.size.get=function(){return this.node.nodeSize},n.border.get=function(){return this.node.isLeaf?0:1},e.prototype.updateChildren=function(t){var e=this,n=new A(this);u(this.node,this.innerDeco,function(t){n.placeWidget(t)},function(r,o,i,s){n.syncToMarks(r.marks,t),n.findNodeMatch(r,o,i)||n.updateNextNode(r,o,i,t,e.node.content,s)||n.addNode(r,o,i,t)}),n.syncToMarks(S,t),this.node.isTextblock&&n.addTextblockHacks(),n.destroyRest(),(n.changed||this.dirty==w)&&this.renderChildren()},e.prototype.renderChildren=function(){o(this.contentDOM,this.children,e.is),g.ios&&d(this.dom)},e.prototype.update=function(t,e,n,r){return!(this.dirty==x||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.node=t,this.innerDeco=n,t.isLeaf||this.updateChildren(r),this.dirty=y,!0)},e.prototype.updateOuterDeco=function(t){if(!l(t,this.outerDeco)){var e=1!=this.nodeDOM.nodeType;this.dom=s(this.dom,this.nodeDOM,i(this.outerDeco,this.node,e),i(t,this.node,e)),this.outerDeco=t}},e.prototype.selectNode=function(){this.nodeDOM.classList.add("ProseMirror-selectednode")},e.prototype.deselectNode=function(){this.nodeDOM.classList.remove("ProseMirror-selectednode")},Object.defineProperties(e.prototype,n),e}(b);e.docViewDesc=r;var O=function(t){function e(e,n,r,o,i,s,a){t.call(this,e,n,r,o,i,null,s,a);for(var c=s;3!=c.nodeType;)if(!(c=c.firstChild))throw new RangeError("Text node rendered without text DOM");this.textDOM=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{skip:this.textDOM.parentNode}},e.prototype.update=function(t,e){return!(this.dirty==x||this.dirty!=y&&!this.inParent()||!t.sameMarkup(this.node))&&(this.updateOuterDeco(e),this.dirty==y&&t.text==this.node.text||t.text==this.textDOM.nodeValue||(this.textDOM.nodeValue=t.text),this.node=t,this.dirty=y,!0)},e.prototype.inParent=function(){for(var t=this.parent.contentDOM,e=this.textDOM;e;e=e.parentNode)if(e==t)return!0;return!1},e.prototype.domFromPos=function(t,e){return{node:this.textDOM,offset:e?Math.max(t,this.textDOM.nodeValue.length):t}},e.prototype.localPosFromDOM=function(e,n,r){return e==this.textDOM?this.posAtStart+Math.min(n,this.node.text.length):t.prototype.localPosFromDOM.call(this,e,n,r)},e.prototype.ignoreMutation=function(t){return"characterData"!=t.type},e}(D),T=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.parseRule=function(){return{ignore:!0}},e.prototype.matchesHack=function(){return this.dirty==y},e}(b),R=function(t){function e(e,n,r,o,i,s,a,c,l){t.call(this,e,n,r,o,i,s,a,l),this.spec=c}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.update=function(e,n,r,o){if(this.dirty==x)return!1;if(this.spec.update){var i=this.spec.update(e,n);return i&&(this.node=e,this.contentDOM&&this.updateChildren(o)),i}return!(!this.contentDOM&&!e.isLeaf)&&t.prototype.update.call(this,e,n,this.contentDOM?this.innerDeco:r,o)},e.prototype.selectNode=function(){this.spec.selectNode?this.spec.selectNode():t.prototype.selectNode.call(this)},e.prototype.deselectNode=function(){this.spec.deselectNode?this.spec.deselectNode():t.prototype.deselectNode.call(this)},e.prototype.setSelection=function(e,n,r){this.spec.setSelection?this.spec.setSelection(e,n,r):t.prototype.setSelection.call(this,e,n,r)},e.prototype.destroy=function(){this.spec.destroy&&this.spec.destroy(),t.prototype.destroy.call(this)},e.prototype.stopEvent=function(t){return!!this.spec.stopEvent&&this.spec.stopEvent(t)},e.prototype.ignoreMutation=function(e){
return this.spec.ignoreMutation?this.spec.ignoreMutation(e):t.prototype.ignoreMutation.call(this,e)},e}(D),N=function(t){t&&(this.nodeName=t)};N.prototype=Object.create(null);var E=[new N],A=function(t){this.top=t,this.index=0,this.stack=[],this.changed=!1};A.prototype.destroyBetween=function(t,e){var n=this;if(t!=e){for(var r=t;r<e;r++)n.top.children[r].destroy();this.top.children.splice(t,e-t),this.changed=!0}},A.prototype.destroyRest=function(){this.destroyBetween(this.index,this.top.children.length)},A.prototype.syncToMarks=function(t,e){for(var n,r=this,o=0,i=this.stack.length>>1,s=Math.min(i,t.length);o<s&&(o==i-1?this.top:this.stack[o+1<<1]).matchesMark(t[o]);)o++;for(;o<i;)r.destroyRest(),r.top.dirty=y,r.index=r.stack.pop(),r.top=r.stack.pop(),i--;for(;i<t.length;){if(r.stack.push(r.top,r.index+1),r.index<r.top.children.length&&(n=r.top.children[r.index]).matchesMark(t[i]))r.top=n;else{var a=C.create(r.top,t[i],e);r.top.children.splice(r.index,0,a),r.top=a,r.changed=!0}r.index=0,i++}},A.prototype.findNodeMatch=function(t,e,n){for(var r=this,o=this.index,i=this.top.children,s=Math.min(i.length,o+5);o<s;o++)if(i[o].matchesNode(t,e,n))return r.destroyBetween(r.index,o),r.index++,!0;return!1},A.prototype.updateNextNode=function(t,e,n,r,o,i){if(this.index==this.top.children.length)return!1;var s=this.top.children[this.index];if(s instanceof D){for(var a=i+1,c=Math.min(o.childCount,a+5);a<c;a++)if(s.node==o.child(a))return!1;var l=s.dom;if(s.update(t,e,n,r))return s.dom!=l&&(this.changed=!0),this.index++,!0}return!1},A.prototype.addNode=function(t,e,n,r){this.top.children.splice(this.index++,0,D.create(this.top,t,e,n,r)),this.changed=!0},A.prototype.placeWidget=function(t){this.index<this.top.children.length&&this.top.children[this.index].matchesWidget(t)?this.index++:(this.top.children.splice(this.index++,0,new M(this.top,t)),this.changed=!0)},A.prototype.addTextblockHacks=function(){for(var t=this.top.children[this.index-1];t instanceof C;)t=t.children[t.children.length-1];if(!t||!(t instanceof O)||/\n$/.test(t.node.text))if(this.index<this.top.children.length&&this.top.children[this.index].matchesHack())this.index++;else{var e=document.createElement("br");this.top.children.splice(this.index++,0,new T(this.top,S,e,null)),this.changed=!0}};var I,z;return n.exports}),t.registerDynamic("15",[],!0,function(t,e,n){var r=n.exports={};if("undefined"!=typeof navigator){var o=/MSIE \d/.test(navigator.userAgent),i=/Trident\/(?:[7-9]|\d{2,})\..*rv:(\d+)/.exec(navigator.userAgent);r.mac=/Mac/.test(navigator.platform),r.ie=o||!!i,r.ie_version=o?document.documentMode||6:i&&+i[1],r.gecko=/gecko\/\d/i.test(navigator.userAgent),r.ios=/AppleWebKit/.test(navigator.userAgent)&&/Mobile\/\w+/.test(navigator.userAgent),r.webkit="WebkitAppearance"in document.documentElement.style}return n.exports}),t.registerDynamic("16",["7","15"],!0,function(t,e,n){function r(t,e){var n=t.selection,r=n.$from,o=n.$to,i=n.node,s=e>0?o:r,a=i&&i.isBlock?s:s.depth?t.doc.resolve(e>0?s.after():s.before()):null;return a&&g.findFrom(a,e)}function o(t,e){return t.dispatch(t.state.tr.setSelection(e).scrollIntoView()),!0}function i(t,e){var n=t.state.selection,i=n.empty,s=n.node,a=n.$from,c=n.$to;if(!i&&!s)return!1;if(s&&s.isInline)return o(t,new w(e>0?c:a));if(!s&&!t.endOfTextblock(e>0?"right":"left")){var l=e>0?a.parent.childAfter(a.parentOffset):a.parent.childBefore(a.parentOffset),p=l.node,u=l.offset;return!(!p||!y.isSelectable(p)||u!=a.parentOffset-(e>0?0:p.nodeSize))&&o(t,new y(e<0?t.state.doc.resolve(a.pos-p.nodeSize):a))}var f=r(t.state,e);return!(!f||!(f instanceof y||s))&&o(t,f)}function s(t){return 3==t.nodeType?t.nodeValue.length:t.childNodes.length}function a(t){var e=t.pmViewDesc;return e&&0==e.size}function c(t){for(var e,n,r=t.root.getSelection(),o=r.anchorNode,i=r.anchorOffset;;)if(i>0){if(1!=o.nodeType)break;var c=o.childNodes[i-1];if(!a(c))break;e=o,n=--i}else{if(p(o))break;for(var l=o.previousSibling;l&&a(l);)e=o.parentNode,n=Array.prototype.indexOf.call(e.childNodes,l),l=l.previousSibling;if(l)o=l,i=s(o);else{if((o=o.parentNode)==t.content)break;i=0}}e&&u(r,e,n)}function l(t){for(var e,n,r=t.root.getSelection(),o=r.anchorNode,i=r.anchorOffset,c=s(o);;)if(i<c){if(1!=o.nodeType)break;var l=o.childNodes[i];if(!a(l))break;e=o,n=++i}else{if(p(o))break;for(var f=o.nextSibling;f&&a(f);)e=f.parentNode,n=Array.prototype.indexOf.call(e.childNodes,f)+1,f=f.nextSibling;if(f)o=f,i=0,c=s(o);else{if((o=o.parentNode)==t.content)break;i=c=0}}e&&u(r,e,n)}function p(t){var e=t.pmViewDesc;return e&&e.node&&e.node.isBlock}function u(t,e,n){var r=document.createRange();r.setEnd(e,n),r.setStart(e,n),t.removeAllRanges(),t.addRange(r)}function f(t,e){var n=t.state.selection,i=n.empty,s=n.node,a=n.$from,c=n.$to;if(!i&&!s)return!1;var l=!0,p=e<0?a:c;if(s&&!s.isInline||(l=t.endOfTextblock(e<0?"up":"down")),l){var u=r(t.state,e);if(u&&u instanceof y)return o(t,u)}if(!s||s.isInline)return!1;var f=g.findFrom(p,e);return!f||o(t,f)}function h(t,e){var n=t.state.selection,r=n.$head,o=n.$anchor,i=n.empty;if(!r||!r.sameParent(o)||!r.parent.isTextblock)return!0;if(!i)return!1;if(t.endOfTextblock(e>0?"forward":"backward"))return!0;var s=!r.textOffset&&(e<0?r.nodeBefore:r.nodeAfter);if(s&&!s.isText){var a=t.state.tr;return e<0?a["delete"](r.pos-s.nodeSize,r.pos):a["delete"](r.pos,r.pos+s.nodeSize),t.dispatch(a),!0}return!1}function d(t){var e="";return t.ctrlKey&&(e+="c"),t.metaKey&&(e+="m"),t.altKey&&(e+="a"),t.shiftKey&&(e+="s"),e}function m(t,e){var n=e.keyCode,r=d(e);return 8==n?h(t,-1)||c(t):46==n?h(t,1)||l(t):13==n||27==n||(37==n?i(t,-1)||c(t):39==n?i(t,1)||l(t):38==n?f(t,-1):40==n?f(t,1):r==(x.mac?"m":"c")&&(66==n||73==n||89==n||90==n)||!!(x.mac&&(68==n||72==n)&&"c"==r||68==n&&"a"==r)&&(h(t,68==n?1:-1)||l(t)))}var v=t("7"),g=v.Selection,y=v.NodeSelection,w=v.TextSelection,x=t("15");return e.captureKeyDown=m,n.exports}),t.registerDynamic("17",["3","7","18"],!0,function(t,e,n){function r(t,e,n,r){var i=t.docView.domFromPos(n,-1),s=i.node,a=i.offset,c=t.docView.domFromPos(r,1),l=c.node,p=c.offset;if(s!=l)return null;if(p==s.childNodes.length)for(var u=s;u!=t.content;){if(!u)return null;if(u.nextSibling){if(!u.nextSibling.pmViewDesc)return null;break}u=u.parentNode}var f=t.root.getSelection(),h=null,d=f.anchorNode;d&&t.content.contains(1==d.nodeType?d:d.parentNode)&&(h=[{node:d,offset:f.anchorOffset}],f.isCollapsed||h.push({node:f.focusNode,offset:f.focusOffset}));var m=e.doc,v=t.someProp("domParser")||g.fromSchema(t.state.schema),y=m.resolve(n),w=null,x=v.parse(s,{topNode:y.parent.copy(),topStart:y.index(),topOpen:!0,from:a,to:p,preserveWhitespace:!0,editableContent:!0,findPositions:h,ruleFromNode:o});if(h&&null!=h[0].pos){var b=h[0].pos,k=h[1]&&h[1].pos;null==k&&(k=b),w={anchor:b+n,head:k+n}}return{doc:x,sel:w}}function o(t){var e=t.pmViewDesc;return e?e.parseRule():"BR"==t.nodeName&&t.parentNode&&t.parentNode.lastChild==t?{ignore:!0}:void 0}function i(t,e){for(var n=e||0;n<t.depth;n++)if(t.index(n)+1<t.node(n).childCount)return!1;return t.parentOffset==t.parent.content.size}function s(t,e){for(var n=e||0;n<t.depth;n++)if(t.index(0)>0)return!1;return 0==t.parentOffset}function a(t){var e=t.$from,n=t.$to;if(e.sameParent(n)&&e.parent.isTextblock&&e.parentOffset&&n.parentOffset<n.parent.content.size){var r=Math.max(0,e.parentOffset),o=e.parent.content.size,a=Math.min(o,n.parentOffset);if(r>0&&(r=e.parent.childBefore(r).offset),a<o){var c=e.parent.childAfter(a);a=c.offset+c.node.nodeSize}var l=e.start();return{from:l+r,to:l+a}}for(var p=0;;p++){var u=s(e,p+1),f=i(n,p+1);if(u||f||e.index(p)!=n.index(p)||n.node(p).isTextblock){var h=e.before(p+1),d=n.after(p+1);return u&&e.index(p)>0&&(h-=e.node(p).child(e.index(p)-1).nodeSize),f&&n.index(p)+1<n.node(p).childCount&&(d+=n.node(p).child(n.index(p)+1).nodeSize),{from:h,to:d}}}}function c(t,e){var n=document.createEvent("Event");return n.initEvent("keydown",!0,!0),n.keyCode=t,n.key=n.code=e,n}function l(t,e,n,o){for(var i,s=n.doc;!(i=r(t,n,o.from,o.to));){var a=s.resolve(o.from),l=s.resolve(o.to);o={from:a.depth?a.before():0,to:l.depth?l.after():s.content.size}}var h=i.doc,m=i.sel,v=s.slice(o.from,o.to),g=d(v.content,h.content,o.from,n.selection.from);if(g){var y,x=h.resolveNoCache(g.start-o.from),b=h.resolveNoCache(g.endB-o.from);if(!(!x.sameParent(b)&&x.pos<h.content.size&&(y=w.findFrom(h.resolve(x.pos+1),1,!0))&&y.head==b.pos&&t.someProp("handleKeyDown",function(e){return e(t,c(13,"Enter"))})||n.selection.anchor>g.start&&f(s,g.start,g.endA,x,b)&&t.someProp("handleKeyDown",function(e){return e(t,c(8,"Backspace"))}))){var k,S,M,C,D=e.map(g.start),O=e.map(g.endA,-1);if(x.sameParent(b)&&x.parent.isTextblock)if(x.pos==b.pos){k=t.state.tr["delete"](D,O);var T=s.resolve(g.start);T.parentOffset<T.parent.content.size&&(S=T.marks(!0))}else if(g.endA==g.endB&&(C=s.resolve(g.start))&&(M=u(x.parent.content.cut(x.parentOffset,b.parentOffset),C.parent.content.cut(C.parentOffset,g.endA-C.start()))))k=t.state.tr,"add"==M.type?k.addMark(D,O,M.mark):k.removeMark(D,O,M.mark);else if(x.parent.child(x.index()).isText&&x.index()==b.index()-(b.textOffset?0:1)){var R=x.parent.textBetween(x.parentOffset,b.parentOffset);if(t.someProp("handleTextInput",function(e){return e(t,D,O,R)}))return;k=t.state.tr.insertText(R,D,O)}if(k||(k=t.state.tr.replace(D,O,h.slice(g.start-o.from,g.endB-o.from))),m){var N=p(k.doc,e,m);N&&k.setSelection(N)}S&&k.setStoredMarks(S),t.dispatch(k.scrollIntoView())}}else if(m){var E=p(t.state.doc,e,m);E&&!E.eq(t.state.selection)&&t.dispatch(t.state.tr.setSelection(E))}}function p(t,e,n){return Math.max(n.anchor,n.head)>t.content.size?null:w.between(t.resolve(e.map(n.anchor)),t.resolve(e.map(n.head)))}function u(t,e){for(var n,r,o,i=t.firstChild.marks,s=e.firstChild.marks,a=i,c=s,l=0;l<s.length;l++)a=s[l].removeFromSet(a);for(var p=0;p<i.length;p++)c=i[p].removeFromSet(c);if(1==a.length&&0==c.length)r=a[0],n="add",o=function(t){return t.mark(r.addToSet(t.marks))};else{if(0!=a.length||1!=c.length)return null;r=c[0],n="remove",o=function(t){return t.mark(r.removeFromSet(t.marks))}}for(var u=[],f=0;f<e.childCount;f++)u.push(o(e.child(f)));if(v.from(u).eq(t))return{mark:r,type:n}}function f(t,e,n,r,o){if(!r.parent.isTextblock||n-e<=o.pos-r.pos||h(r,!0,!1)<o.pos)return!1;var i=t.resolve(e);if(i.parentOffset<i.parent.content.size||!i.parent.isTextblock)return!1;var s=t.resolve(h(i,!0,!0));return!(!s.parent.isTextblock||s.pos>n||h(s,!0,!1)<n)&&r.parent.content.cut(r.parentOffset).eq(s.parent.content)}function h(t,e,n){for(var r=t.depth,o=e?t.end():t.pos;r>0&&(e||t.indexAfter(r)==t.node(r).childCount);)r--,o++,e=!1;if(n)for(var i=t.node(r).maybeChild(t.indexAfter(r));i&&!i.isLeaf;)i=i.firstChild,o++;return o}function d(t,e,n,r){var o=t.findDiffStart(e,n);if(null==o)return null;var i=t.findDiffEnd(e,n+t.size,n+e.size),s=i.a,a=i.b;if(s<o&&t.size<e.size){o-=r<=o&&r>=s?o-r:0,a=o+(a-s),s=o}else if(a<o){var c=r<=o&&r>=a?o-r:0;o-=c,s=o+(s-a),a=o}return{start:o,endA:s,endB:a}}var m=t("3"),v=m.Fragment,g=m.DOMParser,y=t("7"),w=y.Selection,x=t("18"),b=x.TrackMappings,k=function(t,e,n){var r=this;this.view=t,this.id=e,this.state=t.state,this.composing=n,this.from=this.to=null,this.timeout=n?null:setTimeout(function(){return r.finish()},20),this.mappings=new b(t.state)};return k.prototype.addRange=function(t,e){null==this.from?(this.from=t,this.to=e):(this.from=Math.min(t,this.from),this.to=Math.max(e,this.to))},k.prototype.changedRange=function(){if(null==this.from)return a(this.state.selection);var t=this.state.doc.resolve(Math.min(this.from,this.state.selection.from)),e=this.state.doc.resolve(this.to),n=t.sharedDepth(this.to);return{from:t.before(n+1),to:e.after(n+1)}},k.prototype.finish=function(t){if(clearTimeout(this.timeout),!this.composing||t){var e=this.changedRange();null==this.from?this.view.docView.markDirty(e.from,e.to):this.view.docView.markDirty(this.from,this.to);var n=this.mappings.getMapping(this.view.state);this.destroy(),n&&l(this.view,n,this.state,e),this.view.docView.dirty&&this.view.updateState(this.view.state)}},k.prototype.destroy=function(){this.mappings.destroy(),this.view.inDOMChange=null},k.prototype.compositionEnd=function(){var t=this;this.composing&&(this.composing=!1,this.timeout=setTimeout(function(){return t.finish()},50))},k.start=function(t,e){if(t.inDOMChange)e&&(clearTimeout(t.inDOMChange.timeout),t.inDOMChange.composing=!0);else{var n=Math.floor(4294967295*Math.random());t.inDOMChange=new k(t,n,e)}return t.inDOMChange},e.DOMChange=k,n.exports}),t.registerDynamic("19",["3"],!0,function(t,e,n){function r(t,e,n){var r,o=t.state.doc,i=o.slice(e.from,e.to,!e.node),s=i;if(!e.node){var a=Math.max(0,e.$from.sharedDepth(e.to)-1);r=u(s,a);for(var c=s.content,l=0;l<a;l++)c=c.firstChild.content;s=new d(c,s.openLeft-a,s.openRight-a)}var p=t.someProp("clipboardSerializer")||g.fromSchema(t.state.schema),f=p.serializeFragment(s.content),h=document.createElement("div");h.appendChild(f);var m=1==h.firstChild.nodeType&&h.firstChild;return m&&(e.node?m.setAttribute("data-pm-node-selection",!0):m.setAttribute("data-pm-context",r)),n.clearData(),n.setData("text/html",h.innerHTML),n.setData("text/plain",s.content.textBetween(0,s.content.size,"\n\n")),i}function o(t){return null!=y?y:(t.setData("text/html","<hr>"),y="<hr>"==t.getData("text/html"))}function i(t,e,n,r){var o=e.getData("text/plain"),i=e.getData("text/html");if(!i&&!o)return null;var a,c=r.parent.type.spec.code;if((n||c||!i)&&o){if(t.someProp("transformPastedText",function(t){return o=t(o)}),c)return new d(m.from(t.state.schema.text(o)),0,0);a=document.createElement("div"),o.split(/(?:\r\n?|\n)+/).forEach(function(t){a.appendChild(document.createElement("p")).textContent=t})}else t.someProp("transformPastedHTML",function(t){return i=t(i)}),a=p(i);var l,u=t.someProp("clipboardParser")||t.someProp("domParser")||v.fromSchema(t.state.schema),h=u.parseSlice(a,{preserveWhitespace:!0});return h=a.querySelector("[data-pm-node-selection]")?new d(h.content,0,0):(l=a.querySelector("[data-pm-context]"))?f(h,l.getAttribute("data-pm-context")):s(h,r)}function s(t,e){if(t.content.childCount<2)return t;for(var n=function(n){var r=e.node(n),o=r.contentMatchAt(e.index(n)),i=void 0,s=[];if(t.content.forEach(function(t){if(s){var e,n=o.findWrappingFor(t);if(!n)return s=null;if(e=s.length&&i.length&&c(n,i,t,s[s.length-1],0))s[s.length-1]=e;else{s.length&&(s[s.length-1]=l(s[s.length-1],i.length));var r=a(t,n);s.push(r),o=o.matchType(r.type,r.attrs),i=n}}}),s)return{v:d.maxOpen(m.from(s))}},r=e.depth;r>=0;r--){var o=n(r);if(o)return o.v}return t}function a(t,e,n){void 0===n&&(n=0);for(var r=e.length-1;r>=n;r--)t=e[r].type.create(e[r].attrs,m.from(t));return t}function c(t,e,n,r,o){if(o<t.length&&o<e.length&&t[o].type==e[o].type){var i=c(t,e,n,r.lastChild,o+1);if(i)return r.copy(r.content.replaceChild(r.childCount-1,i));var s=r.contentMatchAt(r.childCount);if(o==t.length-1?s.matchNode(n):s.matchType(t[o+1].type,t[o+1].attrs))return r.copy(r.content.append(m.from(a(n,t,o+1))))}}function l(t,e){if(0==e)return t;var n=t.content.replaceChild(t.childCount-1,l(t.lastChild,e-1)),r=t.contentMatchAt(t.childCount).fillBefore(m.empty,!0);return t.copy(n.append(r))}function p(t){var e=/(\s*<meta [^>]*>)*/.exec(t);e&&(t=t.slice(e[0].length));var n,r=x||(x=document.implementation.createHTMLDocument("title")),o=r.createElement("div"),i=/(?:<meta [^>]*>)*<([a-z][^>\s]+)/i.exec(t),s=0;if(n=i&&w[i[1].toLowerCase()]){var a=n.split(" ");t=a.map(function(t){return"<"+t+">"}).join("")+t+a.map(function(t){return"</"+t+">"}).reverse().join(""),s=a.length}o.innerHTML=t;for(var c=0;c<s;c++)o=o.firstChild;return o}function u(t,e){for(var n=[],r=t.content,o=0;o<e;o++){var i=r.firstChild;n.push(i.type.name,i.type.hasRequiredAttrs()?i.attrs:null),r=i.content}return JSON.stringify(n)}function f(t,e){if(!t.size)return t;var n,r=t.content.firstChild.type.schema;try{n=JSON.parse(e)}catch(e){return t}for(var o=t.content,i=t.openLeft,s=t.openRight,a=n.length-2;a>=0;a-=2){var c=r.nodes[n[a]];if(!c||c.hasRequiredAttrs())break;o=m.from(c.create(n[a+1],o)),i++,s++}return new d(o,i,s)}var h=t("3"),d=h.Slice,m=h.Fragment,v=h.DOMParser,g=h.DOMSerializer;e.toClipboard=r;var y=null;e.canUpdateClipboard=o,e.fromClipboard=i;var w={thead:"table",colgroup:"table",col:"table colgroup",tr:"table tbody",td:"table tbody tr",th:"table tbody tr"},x=null;return n.exports}),t.registerDynamic("18",["7","9"],!0,function(t,e,n){var r=t("7"),o=r.EditorState,i=t("9"),s=i.Mapping,a=function(t,e,n){this.prev=t,this.mapping=e,this.state=n},c=function(t){this.seen=[new a(null,null,t)],o.addApplyListener(this.track=this.track.bind(this))};return c.prototype.destroy=function(){o.removeApplyListener(this.track)},c.prototype.find=function(t){for(var e=this,n=this.seen.length-1;n>=0;n--){var r=e.seen[n];if(r.state==t)return r}},c.prototype.track=function(t,e,n){var r=this.seen.length<200?this.find(t):null;r&&this.seen.push(new a(r,e.docChanged?e.mapping:null,n))},c.prototype.getMapping=function(t){var e=this.find(t);if(!e)return null;for(var n=[],r=e;r;r=r.prev)r.mapping&&n.push(r.mapping);for(var o=new s,i=n.length-1;i>=0;i--)o.appendMapping(n[i]);return o},e.TrackMappings=c,n.exports}),t.registerDynamic("1a",["7","15","16","17","19","18"],!0,function(t,e,n){function r(t){t.shiftKey=!1,t.mouseDown=null,t.dragging=null,t.inDOMChange=null,t.mutationObserver=window.MutationObserver&&new window.MutationObserver(function(e){return S(t,e)}),x(t);var e=function(e){var n=$[e];t.content.addEventListener(e,function(e){!a(t,e)||s(t,e)||!t.editable&&e.type in J||n(t,e)})};for(var n in $)e(n);t.extraHandlers=Object.create(null),i(t)}function o(t){k(t),t.inDOMChange&&t.inDOMChange.destroy(),t.dragging&&t.dragging.destroy()}function i(t){t.someProp("handleDOMEvents",function(e){for(var n in e)t.extraHandlers[n]||e.hasOwnProperty(n)||(t.extraHandlers[n]=!0,t.content.addEventListener(n,function(e){return s(t,e)}))})}function s(t,e){return t.someProp("handleDOMEvents",function(n){var r=n[e.type];return!!r&&r(t,e)})}function a(t,e){if(!e.bubbles)return!0;if(e.defaultPrevented)return!1;for(var n=e.target;n!=t.content;n=n.parentNode)if(!n||11==n.nodeType||n.pmViewDesc&&n.pmViewDesc.stopEvent(e))return!1;return!0}function c(t,e){s(t,e)||!$[e.type]||!t.editable&&e.type in J||$[e.type](t,e)}function l(t){return{left:t.clientX,top:t.clientY}}function p(t,e){var n=e.x-t.clientX,r=e.y-t.clientY;return n*n+r*r<100}function u(t,e,n,r,o){if(-1==r)return!1;for(var i=t.state.doc.resolve(r),s=function(r){if(t.someProp(e,function(e){return r>i.depth?e(t,n,i.nodeAfter,i.before(r),o,!0):e(t,n,i.node(r),i.before(r),o,!1)}))return{v:!0}},a=i.depth+1;a>0;a--){var c=s(a);if(c)return c.v}return!1}function f(t,e,n){t.focus();var r=t.state.tr.setSelection(e);"pointer"==n&&r.setMeta("pointer",!0),t.dispatch(r)}function h(t,e){if(-1==e)return!1;var n=t.state.doc.resolve(e),r=n.nodeAfter;return!!(r&&r.isLeaf&&N.isSelectable(r))&&(f(t,new N(n),"pointer"),!0)}function d(t,e){if(-1==e)return!1;for(var n,r=t.state.selection,o=r.node,i=r.$from,s=t.state.doc.resolve(e),a=s.depth+1;a>0;a--){var c=a>s.depth?s.nodeAfter:s.node(a);if(N.isSelectable(c)){n=o&&i.depth>0&&a>=i.depth&&s.before(i.depth+1)==i.pos?s.before(i.depth):s.before(a);break}}return null!=n&&(f(t,N.create(t.state.doc,n),"pointer"),!0)}function m(t,e,n,r,o){return u(t,"handleClickOn",e,n,r)||t.someProp("handleClick",function(n){return n(t,e,r)})||(o?d(t,n):h(t,n))}function v(t,e,n,r){return u(t,"handleDoubleClickOn",e,n,r)||t.someProp("handleDoubleClick",function(n){return n(t,e,r)})}function g(t,e,n,r){return u(t,"handleTripleClickOn",e,n,r)||t.someProp("handleTripleClick",function(n){return n(t,e,r)})||y(t,n)}function y(t,e){var n=t.state.doc;if(-1==e)return!!n.isTextblock&&(f(t,E.create(n,0,n.content.size),"pointer"),!0);for(var r=n.resolve(e),o=r.depth+1;o>0;o--){var i=o>r.depth?r.nodeAfter:r.node(o),s=r.before(o);if(i.isTextblock)f(t,E.create(n,s+1,s+1+i.content.size),"pointer");else{if(!N.isSelectable(i))continue;f(t,N.create(n,s),"pointer")}return!0}}function w(t){return!!t.inDOMChange&&(t.inDOMChange.finish(!0),!0)}function x(t){t.mutationObserver&&t.mutationObserver.observe(t.content,U),A.ie&&A.ie_version<=11&&t.content.addEventListener("DOMCharacterDataModified",t.onCharData||(t.onCharData=function(e){M(t,{target:e.target,type:"characterData"})}))}function b(t){t.mutationObserver&&S(t,t.mutationObserver.takeRecords())}function k(t){t.mutationObserver&&(b(t),t.mutationObserver.disconnect()),A.ie&&A.ie_version<=11&&t.content.removeEventListener("DOMCharacterDataModified",t.onCharData)}function S(t,e){if(t.editable)for(var n=0;n<e.length;n++)M(t,e[n])}function M(t,e){var n=t.docView.nearestDesc(e.target);if(("attributes"!=e.type||n!=t.docView&&"contenteditable"!=e.attributeName)&&n&&!n.ignoreMutation(e)){var r,o;if("childList"==e.type){var i=e.previousSibling&&e.previousSibling.parentNode==e.target?Array.prototype.indexOf.call(e.target.childNodes,e.previousSibling)+1:0;if(-1==i)return;r=n.localPosFromDOM(e.target,i,-1);var s=e.nextSibling&&e.nextSibling.parentNode==e.target?Array.prototype.indexOf.call(e.target.childNodes,e.nextSibling):e.target.childNodes.length;if(-1==s)return;o=n.localPosFromDOM(e.target,s,1)}else"attributes"==e.type?(r=n.posAtStart-n.border,o=n.posAtEnd+n.border):(r=n.posAtStart,o=n.posAtEnd);L.start(t).addRange(r,o)}}function C(t){return 0==t.openLeft&&0==t.openRight&&1==t.content.childCount?t.content.firstChild:null}function D(t){t.dragging&&(t.dragging.destroy(),t.dragging=null)}function O(t,e){if(!t||!t.content.size)return e.pos;for(var n=t.content,r=0;r<t.openLeft;r++)n=n.firstChild.content;for(var o=e.depth;o>=0;o--){var i=o==e.depth?0:e.pos<=(e.start(o+1)+e.end(o+1))/2?-1:1,s=e.index(o)+(i>0?1:0);if(e.node(o).canReplace(s,s,n))return 0==i?e.pos:i<0?e.before(o+1):e.after(o+1)}return e.pos}var T=t("7"),R=T.Selection,N=T.NodeSelection,E=T.TextSelection,A=t("15"),I=t("16"),z=I.captureKeyDown,P=t("17"),L=P.DOMChange,F=t("19"),B=F.fromClipboard,q=F.toClipboard,_=F.canUpdateClipboard,V=t("18"),j=V.TrackMappings,$={},J={};e.initInput=r,e.destroyInput=o,e.ensureListeners=i,e.dispatchEvent=c,J.keydown=function(t,e){16==e.keyCode&&(t.shiftKey=!0),t.inDOMChange||(t.someProp("handleKeyDown",function(n){return n(t,e)})||z(t,e)?e.preventDefault():t.selectionReader.poll())},J.keyup=function(t,e){16==e.keyCode&&(t.shiftKey=!1)},J.keypress=function(t,e){if(!(t.inDOMChange||!e.charCode||e.ctrlKey&&!e.altKey||A.mac&&e.metaKey)){if(t.someProp("handleKeyPress",function(n){return n(t,e)}))return void e.preventDefault();var n=t.state.selection,r=n.node,o=n.$from,i=n.$to;if(r||!o.sameParent(i)){var s=String.fromCharCode(e.charCode);t.someProp("handleTextInput",function(e){return e(t,o.pos,i.pos,s)})||t.dispatch(t.state.tr.insertText(s).scrollIntoView()),e.preventDefault()}}};var W={time:0,x:0,y:0},H=W,K=A.mac?"metaKey":"ctrlKey";$.mousedown=function(t,e){var n,r=w(t),o=Date.now();n=o-W.time>=500||!p(e,W)||e[K]?"singleClick":o-H.time>=600||!p(e,H)?"doubleClick":"tripleClick",H=W,W={time:o,x:e.clientX,y:e.clientY};var i=t.posAtCoords(l(e));i&&("singleClick"==n?t.mouseDown=new Q(t,i,e,r):("doubleClick"==n?v:g)(t,i.pos,i.inside,e)?e.preventDefault():t.selectionReader.poll("pointer"))};var Q=function(t,e,n,r){var o=this;this.view=t,this.pos=e,this.flushed=r,this.selectNode=n[K],this.allowDefault=n.shiftKey;var i,s;if(e.inside>-1)i=t.state.doc.nodeAt(e.inside),s=e.inside;else{var a=t.state.doc.resolve(e.pos);i=a.parent,s=a.depth?a.before():0}this.mightDrag=i.type.spec.draggable||i==t.state.selection.node?{node:i,pos:s}:null,this.target=r?null:n.target,this.target&&this.mightDrag&&(k(this.view),this.target.draggable=!0,A.gecko&&(this.setContentEditable=!this.target.hasAttribute("contentEditable"))&&setTimeout(function(){return o.target.setAttribute("contentEditable","false")},20),x(this.view)),t.root.addEventListener("mouseup",this.up=this.up.bind(this)),t.root.addEventListener("mousemove",this.move=this.move.bind(this)),t.selectionReader.poll("pointer")};Q.prototype.done=function(){this.view.root.removeEventListener("mouseup",this.up),this.view.root.removeEventListener("mousemove",this.move),this.mightDrag&&this.target&&(k(this.view),this.target.draggable=!1,A.gecko&&this.setContentEditable&&this.target.removeAttribute("contentEditable"),x(this.view))},Q.prototype.up=function(t){this.done(),this.view.content.contains(3==t.target.nodeType?t.target.parentNode:t.target)&&(this.allowDefault?this.view.selectionReader.poll("pointer"):m(this.view,this.pos.pos,this.pos.inside,t,this.selectNode)?t.preventDefault():this.flushed?(f(this.view,R.near(this.view.state.doc.resolve(this.pos.pos)),"pointer"),t.preventDefault()):this.view.selectionReader.poll("pointer"))},Q.prototype.move=function(t){!this.allowDefault&&(Math.abs(this.x-t.clientX)>4||Math.abs(this.y-t.clientY)>4)&&(this.allowDefault=!0),this.view.selectionReader.poll("pointer")},$.touchdown=function(t){w(t),t.selectionReader.poll("pointer")},$.contextmenu=function(t,e){w(t);var n=t.posAtCoords(l(e));n&&t.someProp("handleContextMenu",function(r){return r(t,n.pos,e)})&&e.preventDefault()},J.compositionstart=J.compositionupdate=function(t){L.start(t,!0),t.state.storedMarks&&t.inDOMChange.finish(!0)},J.compositionend=function(t,e){if(!t.inDOMChange){if(!e.data)return;L.start(t,!0)}t.inDOMChange.compositionEnd()};var U={childList:!0,characterData:!0,attributes:!0,subtree:!0};e.startObserving=x,e.flushObserver=b,e.stopObserving=k,J.input=function(t){return L.start(t)},$.copy=J.cut=function(t,e){var n=t.state.selection,r="cut"==e.type;if(!n.empty){if(!e.clipboardData||!_(e.clipboardData))return void(r&&A.ie&&A.ie_version<=11&&L.start(t));q(t,n,e.clipboardData),e.preventDefault(),r&&t.dispatch(t.state.tr.deleteRange(n.from,n.to).scrollIntoView())}},J.paste=function(t,e){if(!e.clipboardData)return void(A.ie&&A.ie_version<=11&&L.start(t));var n=B(t,e.clipboardData,t.shiftKey,t.state.selection.$from);if(n){e.preventDefault(),t.someProp("transformPasted",function(t){n=t(n)});var r=C(n),o=r?t.state.tr.replaceSelectionWith(r):t.state.tr.replaceSelection(n);t.dispatch(o.scrollIntoView())}};var G=function(t,e,n,r){this.slice=e,this.range=n,this.move=r&&new j(t)};G.prototype.destroy=function(){this.move&&this.move.destroy()},$.dragstart=function(t,e){var n=t.mouseDown;if(n&&n.done(),e.dataTransfer){var r,o=t.state.selection,i=o.empty?null:t.posAtCoords(l(e));if(null!=i&&i.pos>=o.from&&i.pos<=o.to?r=o:n&&n.mightDrag&&(r=N.create(t.state.doc,n.mightDrag.pos)),r){var s=q(t,r,e.dataTransfer);t.dragging=new G(t.state,s,r,!e.ctrlKey)}}},$.dragend=function(t){window.setTimeout(function(){return D(t)},50)},J.dragover=J.dragenter=function(t,e){return e.preventDefault()},J.drop=function(t,e){var n=t.dragging;if(D(t),e.dataTransfer){var r=t.state.doc.resolve(t.posAtCoords(l(e)).pos);if(r){var o=n&&n.slice||B(t,e.dataTransfer,!1,r);if(o){var i=O(o,t.state.doc.resolve(r.pos));e.preventDefault();var s=t.state.tr;if(n&&n.move){var a=n.range,c=a.from,p=a.to,u=n.move.getMapping(t.state);u&&s.deleteRange(u.map(c,1),u.map(p,-1))}t.someProp("transformPasted",function(t){o=t(o)});var f=s.mapping.map(i),h=0==o.openLeft&&0==o.openRight&&1==o.content.childCount;h?s.replaceRangeWith(f,f,o.content.firstChild):s.replaceRange(f,f,o);var d=s.doc.resolve(f);h&&N.isSelectable(o.content.firstChild)&&d.nodeAfter&&d.nodeAfter.sameMarkup(o.content.firstChild)?s.setSelection(new N(d)):s.setSelection(R.between(d,s.doc.resolve(s.mapping.map(i)))),t.focus(),t.dispatch(s)}}}},$.focus=function(t,e){t.focused||(t.content.classList.add("ProseMirror-focused"),t.focused=!0),t.someProp("onFocus",function(n){n(t,e)})},$.blur=function(t,e){t.focused&&(t.content.classList.remove("ProseMirror-focused"),t.focused=!1),t.someProp("onBlur",function(n){n(t,e)})};for(var X in J)$[X]=J[X];return n.exports}),t.registerDynamic("1b",["7","15","1a"],!0,function(t,e,n){function r(t){return new("onselectionchange"in document?d:m)(t)}function o(t,e,n){if(i(t,e),!t.hasFocus()){if(!n)return;p.gecko&&t.editable&&t.content.focus()}var r=t.selectionReader;if(e!=r.lastSelection||r.domChanged()){var o,s=e.anchor,a=e.head;if(null==s&&(s=e.from,a=e.to,p.webkit&&e.node.isBlock)){var c=t.docView.descAt(e.from);c.contentDOM||"false"!=c.dom.contentEditable||(o=c.dom,c.dom.contentEditable="true")}t.docView.setSelection(s,a,t.root),o&&(o.contentEditable="false"),r.storeDOMState(e)}}function i(t,e){if(e instanceof l){var n=t.docView.descAt(e.from);n!=t.lastSelectedViewDesc&&(s(t),n&&n.selectNode(),t.lastSelectedViewDesc=n)}else s(t)}function s(t){t.lastSelectedViewDesc&&(t.lastSelectedViewDesc.deselectNode(),t.lastSelectedViewDesc=null)}var a=t("7"),c=a.Selection,l=a.NodeSelection,p=t("15"),u=t("1a"),f=u.flushObserver,h=function(t){var e=this;this.view=t,this.lastAnchorNode=this.lastHeadNode=this.lastAnchorOffset=this.lastHeadOffset=null,this.lastSelection=t.state.selection,this.poller=r(this),t.content.addEventListener("focus",function(){return e.poller.start()}),t.content.addEventListener("blur",function(){return e.poller.stop()}),t.editable||this.poller.start()};h.prototype.destroy=function(){this.poller.stop()},h.prototype.poll=function(t){this.poller.poll(t)},h.prototype.editableChanged=function(){this.view.editable?this.view.hasFocus()||this.poller.stop():this.poller.start()},h.prototype.domChanged=function(){var t=this.view.root.getSelection();return t.anchorNode!=this.lastAnchorNode||t.anchorOffset!=this.lastAnchorOffset||t.focusNode!=this.lastHeadNode||t.focusOffset!=this.lastHeadOffset},h.prototype.storeDOMState=function(t){var e=this.view.root.getSelection();this.lastAnchorNode=e.anchorNode,this.lastAnchorOffset=e.anchorOffset,this.lastHeadNode=e.focusNode,this.lastHeadOffset=e.focusOffset,this.lastSelection=t},h.prototype.readFromDOM=function(t){if(this.view.inDOMChange||f(this.view),this.view.hasFocus()&&!this.view.inDOMChange&&this.domChanged()){var e=this.view.root.getSelection(),n=this.view.state.doc,r=this.view.docView.nearestDesc(e.focusNode);if(!r.size)return void this.storeDOMState();var o,i,s=this.view.docView.posFromDOM(e.focusNode,e.focusOffset),a=n.resolve(s);if(e.isCollapsed){for(o=a;r&&!r.node;)r=r.parent;if(r&&r.node.isLeaf&&l.isSelectable(r.node)){var p=r.posAtStart;i=new l(s==p?a:n.resolve(p))}}else o=n.resolve(this.view.docView.posFromDOM(e.anchorNode,e.anchorOffset));if(!i){var u=null!=this.view.state.selection.head&&this.view.state.selection.head<a.pos?1:-1;i=c.between(o,a,u),-1==u&&i.node&&(i=c.between(o,a,1))}if(a.pos==i.head&&o.pos==i.anchor&&this.storeDOMState(i),!this.view.state.selection.eq(i)){var h=this.view.state.tr.setSelection(i);"pointer"==t&&h.setMeta("pointer",!0),this.view.dispatch(h)}}},e.SelectionReader=h;var d=function(t){var e=this;this.listening=!1,this.curOrigin=null,this.originTime=0,this.reader=t,this.readFunc=function(){return t.readFromDOM(e.originTime>Date.now()-50?e.curOrigin:null)}};d.prototype.poll=function(t){this.curOrigin=t,this.originTime=Date.now()},d.prototype.start=function(){this.listening||(document.addEventListener("selectionchange",this.readFunc),this.listening=!0,this.reader.view.hasFocus()&&this.readFunc())},d.prototype.stop=function(){this.listening&&(document.removeEventListener("selectionchange",this.readFunc),this.listening=!1)};var m=function(t){this.polling=null,this.reader=t,this.pollFunc=this.doPoll.bind(this,null)};return m.prototype.doPoll=function(t){var e=this.reader.view;e.focused||!e.editable?(this.reader.readFromDOM(t),this.polling=setTimeout(this.pollFunc,100)):this.polling=null},m.prototype.poll=function(t){clearTimeout(this.polling),this.polling=setTimeout(t?this.doPoll.bind(this,t):this.pollFunc,0)},m.prototype.start=function(){null==this.polling&&this.poll()},m.prototype.stop=function(){clearTimeout(this.polling),this.polling=null},e.selectionToDOM=o,n.exports}),t.registerDynamic("1c",[],!0,function(t,e,n){function r(t,e){if(t==e)return!0;for(var n in t)if(t[n]!==e[n])return!1;for(var r in e)if(!(r in t))return!1;return!0}function o(t,e,n,r,o,a,c){for(var u=t.slice(),f=function(t,e,n,r){for(var o=0;o<u.length;o+=3){var i=u[o+1],s=void 0;-1==i||t>i+a||(e>=u[o]+a?u[o+1]=-1:(s=r-n-(e-t))&&(u[o]+=s,u[o+1]+=s))}},h=0;h<n.maps.length;h++)n.maps[h].forEach(f);for(var d=!1,m=0;m<u.length;m+=3)if(-1==u[m+1]){var v=n.map(u[m]+a),g=v-o;if(g<0||g>=r.content.size){d=!0;continue}var y=n.map(t[m+1]+a,-1),w=y-o,x=r.content.findIndex(g),S=x.index,M=x.offset,C=r.maybeChild(S);if(C&&M==g&&M+C.nodeSize==w){var D=u[m+2].mapInner(n,C,v+1,u[m]+a+1,c);D!=k?(u[m]=g,u[m+1]=w,u[m+2]=D):(u.splice(m,3),m-=3)}else d=!0}if(d){var O=s(u,e?i(e,o):[],n,a,c),T=l(O,r,0,c);e=T.local;for(var R=0;R<u.length;R+=3)-1==u[R+1]&&(u.splice(R,3),R-=3);for(var N=0,E=0;N<T.children.length;N+=3){for(var A=T.children[N];E<u.length&&u[E]<A;)E+=3
;u.splice(E,0,T.children[N],T.children[N+1],T.children[N+2])}}return new b(e&&e.sort(p),u)}function i(t,e){if(!e||!t.length)return t;for(var n=[],r=0;r<t.length;r++){var o=t[r];n.push(new g(o.from+e,o.to+e,o.type))}return n}function s(t,e,n,r,o){function i(t,r){for(var s=0;s<t.local.length;s++){var a=t.local[s].map(n,0,r);a?e.push(a):o.onRemove&&o.onRemove(t.local[s].options)}for(var c=0;c<t.children.length;c+=3)i(t.children[c+2],t.children[c]+r+1)}for(var s=0;s<t.length;s+=3)-1==t[s+1]&&i(t[s+2],t[s]+r+1);return e}function a(t,e,n){if(e.isLeaf)return null;for(var r=n+e.nodeSize,o=null,i=0,s=void 0;i<t.length;i++)(s=t[i])&&s.from>n&&s.to<r&&((o||(o=[])).push(s),t[i]=null);return o}function c(t){for(var e=[],n=0;n<t.length;n++)null!=t[n]&&e.push(t[n]);return e}function l(t,e,n,r){var o=[],s=!1;e.forEach(function(e,i){var c=a(t,e,i+n);if(c){s=!0;var p=l(c,e,n+i+1,r);p!=k&&o.push(i,i+e.nodeSize,p)}});for(var u=i(s?c(t):t,-n).sort(p),f=0;f<u.length;f++)u[f].type.valid(e,u[f])||(r.onRemove&&r.onRemove(u[f].options),u.splice(f--,1));return u.length||o.length?new b(u,o):k}function p(t,e){return t.from-e.from||t.to-e.to}function u(t){for(var e=t,n=0;n<e.length-1;n++){var r=e[n];if(r.from!=r.to)for(var o=n+1;o<e.length;o++){var i=e[o];{if(i.from!=r.from){i.from<r.to&&(e==t&&(e=t.slice()),e[n]=r.copy(r.from,i.from),f(e,o,r.copy(i.from,r.to)));break}i.to!=r.to&&(e==t&&(e=t.slice()),e[o]=i.copy(i.from,r.to),f(e,o+1,i.copy(r.to,i.to)))}}}return e}function f(t,e,n){for(;e<t.length&&p(n,t[e])>0;)e++;t.splice(e,0,n)}function h(t){var e=[];return t.someProp("decorations",function(n){var r=n(t.state);r&&r!=k&&e.push(r)}),S.from(e)}var d=function(t,e){if(1!=t.nodeType){var n=document.createElement("span");n.appendChild(t),t=n}t.contentEditable=!1,t.classList.add("ProseMirror-widget"),this.widget=t,this.options=e||x};d.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,"left"==this.options.associative?-1:1),i=o.pos;return o.deleted?null:new g(i-n,i-n,this)},d.prototype.valid=function(){return!0},d.prototype.eq=function(t){return this==t||t instanceof d&&(this.widget==t.widget||this.options.key)&&r(this.options,t.options)};var m=function(t,e){this.options=e||x,this.attrs=t};m.prototype.map=function(t,e,n,r){var o=t.map(e.from+r,this.options.inclusiveLeft?-1:1)-n,i=t.map(e.to+r,this.options.inclusiveRight?1:-1)-n;return o>=i?null:new g(o,i,this)},m.prototype.valid=function(t,e){return e.from<e.to},m.prototype.eq=function(t){return this==t||t instanceof m&&r(this.attrs,t.attrs)&&r(this.options,t.options)},m.is=function(t){return t.type instanceof m};var v=function(t,e){this.attrs=t,this.options=e||x};v.prototype.map=function(t,e,n,r){var o=t.mapResult(e.from+r,1);if(o.deleted)return null;var i=t.mapResult(e.to+r,-1);return i.deleted||i.pos<=o.pos?null:new g(o.pos-n,i.pos-n,this)},v.prototype.valid=function(t,e){var n=t.content.findIndex(e.from),r=n.index,o=n.offset;return o==e.from&&o+t.child(r).nodeSize==e.to},v.prototype.eq=function(t){return this==t||t instanceof v&&r(this.attrs,t.attrs)&&r(this.options,t.options)};var g=function(t,e,n){this.from=t,this.to=e,this.type=n},y={options:{}};g.prototype.copy=function(t,e){return new g(t,e,this.type)},g.prototype.eq=function(t){return this.type.eq(t.type)&&this.from==t.from&&this.to==t.to},g.prototype.map=function(t,e,n){return this.type.map(t,this,e,n)},g.widget=function(t,e,n){return new g(t,t,new d(e,n))},g.inline=function(t,e,n,r){return new g(t,e,new m(n,r))},g.node=function(t,e,n,r){return new g(t,e,new v(n,r))},y.options.get=function(){return this.type.options},Object.defineProperties(g.prototype,y),e.Decoration=g;var w=[],x={},b=function(t,e){this.local=t&&t.length?t:w,this.children=e&&e.length?e:w};b.create=function(t,e){return e.length?l(e,t,0,x):k},b.prototype.find=function(t,e){var n=[];return this.findInner(null==t?0:t,null==e?1e9:e,n,0),n},b.prototype.findInner=function(t,e,n,r){for(var o=this,i=0;i<this.local.length;i++){var s=o.local[i];s.from<=e&&s.to>=t&&n.push(s.copy(s.from+r,s.to+r))}for(var a=0;a<this.children.length;a+=3)if(o.children[a]<e&&o.children[a+1]>t){var c=o.children[a]+1;o.children[a+2].findInner(t-c,e-c,n,r+c)}},b.prototype.map=function(t,e,n){return this==k||0==t.maps.length?this:this.mapInner(t,e,0,0,n||x)},b.prototype.mapInner=function(t,e,n,r,i){for(var s,a=this,c=0;c<this.local.length;c++){var l=a.local[c].map(t,n,r);l&&l.type.valid(e,l)?(s||(s=[])).push(l):i.onRemove&&i.onRemove(a.local[c].options)}return this.children.length?o(this.children,s,t,e,n,r,i):s?new b(s.sort(p)):k},b.prototype.add=function(t,e){return e.length?this==k?b.create(t,e):this.addInner(t,e,0):this},b.prototype.addInner=function(t,e,n){var r,o=this,s=0;t.forEach(function(t,i){var c,p=i+n;if(c=a(e,t,p)){for(r||(r=o.children.slice());s<r.length&&r[s]<i;)s+=3;r[s]==i?r[s+2]=r[s+2].addInner(t,c,p+1):r.splice(s,0,i,i+t.nodeSize,l(c,t,p+1,x)),s+=3}});var u=i(s?c(e):e,-n);return new b(u.length?this.local.concat(u).sort(p):this.local,r||this.children)},b.prototype.remove=function(t){return 0==t.length||this==k?this:this.removeInner(t,0)},b.prototype.removeInner=function(t,e){for(var n=this,r=this.children,o=this.local,i=0;i<r.length;i+=3){for(var s=void 0,a=r[i]+e,c=r[i+1]+e,l=0,p=void 0;l<t.length;l++)(p=t[l])&&p.from>a&&p.to<c&&(t[l]=null,(s||(s=[])).push(p));if(s){r==n.children&&(r=n.children.slice());var u=r[i+2].removeInner(s,a+1);u!=k?r[i+2]=u:(r.splice(i,3),i-=3)}}if(o.length)for(var f=0,h=void 0;f<t.length;f++)if(h=t[f])for(var d=0;d<o.length;d++)o[d].type==h.type&&(o==n.local&&(o=n.local.slice()),o.splice(d--,1));return r==this.children&&o==this.local?this:o.length||r.length?new b(o,r):k},b.prototype.forChild=function(t,e){var n=this;if(this==k)return this;if(e.isLeaf)return b.empty;for(var r,o,i=0;i<this.children.length;i+=3)if(n.children[i]>=t){n.children[i]==t&&(r=n.children[i+2]);break}for(var s=t+1,a=s+e.content.size,c=0;c<this.local.length;c++){var l=n.local[c];if(l.from<a&&l.to>s&&l.type instanceof m){var p=Math.max(s,l.from)-s,u=Math.min(a,l.to)-s;p<u&&(o||(o=[])).push(l.copy(p,u))}}if(o){var f=new b(o);return r?new S([f,r]):f}return r||k},b.prototype.eq=function(t){var e=this;if(this==t)return!0;if(!(t instanceof b)||this.local.length!=t.local.length||this.children.length!=t.children.length)return!1;for(var n=0;n<this.local.length;n++)if(!e.local[n].eq(t.local[n]))return!1;for(var r=0;r<this.children.length;r+=3)if(e.children[r]!=t.children[r]||e.children[r+1]!=t.children[r+1]||!e.children[r+2].eq(t.children[r+2]))return!1;return!1},b.prototype.locals=function(t){return u(this.localsInner(t))},b.prototype.localsInner=function(t){var e=this;if(this==k)return w;if(t.isTextblock||!this.local.some(m.is))return this.local;for(var n=[],r=0;r<this.local.length;r++)e.local[r].type instanceof m||n.push(e.local[r]);return n},e.DecorationSet=b;var k=new b;b.empty=k;var S=function(t){this.members=t};return S.prototype.forChild=function(t,e){var n=this;if(e.isLeaf)return b.empty;for(var r=[],o=0;o<this.members.length;o++){var i=n.members[o].forChild(t,e);i!=k&&(i instanceof S?r=r.concat(i.members):r.push(i))}return S.from(r)},S.prototype.eq=function(t){var e=this;if(!(t instanceof S)||t.members.length!=this.members.length)return!1;for(var n=0;n<this.members.length;n++)if(!e.members[n].eq(t.members[n]))return!1;return!0},S.prototype.locals=function(t){for(var e,n=this,r=!0,o=0;o<this.members.length;o++){var i=n.members[o].localsInner(t);if(i.length)if(e){r&&(e=e.slice(),r=!1);for(var s=0;s<i.length;s++)e.push(i[s])}else e=i}return e?u(r?e:e.sort(p)):w},S.from=function(t){switch(t.length){case 0:return k;case 1:return t[0];default:return new S(t)}},e.removeOverlap=u,e.viewDecorations=h,n.exports}),t.registerDynamic("1d",["13","14","1a","1b","1c"],!0,function(t,e,n){function r(t){var e=Object.create(null);return e["class"]="ProseMirror"+(t.focused?" ProseMirror-focused":"")+(t.state.selection.node?" ProseMirror-nodeselection":""),e.contenteditable=String(t.editable),t.someProp("attributes",function(n){if("function"==typeof n&&(n=n(t.state)),n)for(var r in n)"class"==r?e["class"]+=" "+n[r]:e[r]||"contenteditable"==r||"nodeName"==r||(e[r]=String(n[r]))}),[O.node(0,t.state.doc.content.size,e)]}function o(t){return!t.someProp("editable",function(e){return!1===e(t.state)})}var i,s=t("13"),a=s.scrollRectIntoView,c=s.posAtCoords,l=s.coordsAtPos,p=s.endOfTextblock,u=s.storeScrollPos,f=s.resetScrollPos,h=t("14"),d=h.docViewDesc,m=t("1a"),v=m.initInput,g=m.destroyInput,y=m.dispatchEvent,w=m.startObserving,x=m.stopObserving,b=m.ensureListeners,k=t("1b"),S=k.SelectionReader,M=k.selectionToDOM,C=t("1c"),D=C.viewDecorations,O=C.Decoration;i=t("1c"),e.Decoration=i.Decoration,e.DecorationSet=i.DecorationSet;var T=function(t,e){this.props=e,this.state=e.state,this.dispatch=this.dispatch.bind(this),this._root=null,this.focused=!1,this.content=document.createElement("div"),t&&t.appendChild?t.appendChild(this.content):t&&t(this.content),this.editable=o(this),this.docView=d(this.state.doc,r(this),D(this),this.content,this),this.lastSelectedViewDesc=null,this.selectionReader=new S(this),v(this),this.pluginViews=[],this.updatePluginViews()},R={root:{}};return T.prototype.update=function(t){t.handleDOMEvents!=this.props.handleDOMEvents&&b(this),this.props=t,this.updateState(t.state)},T.prototype.updateState=function(t){var e=this.state;if(this.state=t,e.plugins!=t.plugins&&b(this),!this.inDOMChange){var n=this.editable;this.editable=o(this);var i=D(this),s=r(this),c=t.scrollToSelection>e.scrollToSelection||e.config!=t.config,l=!this.docView.matchesNode(t.doc,s,i),p=l||!t.selection.eq(e.selection)||this.selectionReader.domChanged(),h=!c&&p&&u(this);p&&(x(this),l&&this.docView.update(t.doc,s,i,this),M(this,t.selection),w(this)),n!=this.editable&&this.selectionReader.editableChanged(),this.updatePluginViews(e),c?t.selection.node?a(this,this.docView.domAfterPos(t.selection.from).getBoundingClientRect()):a(this,this.coordsAtPos(t.selection.head)):h&&f(h)}},T.prototype.destroyPluginViews=function(){for(var t;t=this.pluginViews.pop();)t.destroy&&t.destroy()},T.prototype.updatePluginViews=function(t){var e=this,n=this.state.plugins;if(t&&t.plugins==n)for(var r=0;r<this.pluginViews.length;r++){var o=e.pluginViews[r];o.update&&o.update(e)}else{this.destroyPluginViews();for(var i=0;i<n.length;i++){var s=n[i];s.options.view&&e.pluginViews.push(s.options.view(e))}}},T.prototype.hasFocus=function(){if(this.editable&&this.content.ownerDocument.activeElement!=this.content)return!1;var t=this.root.getSelection();return t.rangeCount&&this.content.contains(3==t.anchorNode.nodeType?t.anchorNode.parentNode:t.anchorNode)},T.prototype.someProp=function(t,e){var n,r=this.props&&this.props[t];if(null!=r&&(n=e?e(r):r))return n;var o=this.state.plugins;if(o)for(var i=0;i<o.length;i++){var s=o[i].props[t];if(null!=s&&(n=e?e(s):s))return n}},T.prototype.focus=function(){x(this),M(this,this.state.selection,!0),w(this),this.editable&&this.content.focus()},R.root.get=function(){var t=this,e=this._root;if(null==e)for(var n=this.content.parentNode;n;n=n.parentNode)if(9==n.nodeType||11==n.nodeType&&n.host)return t._root=n;return e||document},T.prototype.posAtCoords=function(t){return c(this,t)},T.prototype.coordsAtPos=function(t){return l(this,t)},T.prototype.endOfTextblock=function(t,e){return p(this,e||this.state,t)},T.prototype.destroy=function(){g(this),this.destroyPluginViews(),this.docView.destroy(),this.selectionReader.destroy(),this.content.parentNode&&this.content.parentNode.removeChild(this.content)},T.prototype.dispatchEvent=function(t){return y(this,t)},T.prototype.dispatch=function(t){var e=this.props.dispatchTransaction;e?e(t):this.updateState(this.state.apply(t))},Object.defineProperties(T.prototype,R),e.EditorView=T,n.exports}),t.registerDynamic("11",["1d"],!0,function(t,e,n){return n.exports=t("1d"),n.exports}),t.registerDynamic("1e",[],!0,function(t,e,n){var r;return function(t,o){"object"==typeof e?n.exports=o():"function"==typeof r&&r.amd?r(o):t.crel=o()}(this,function(){function t(){var r,u=arguments,f=u[0],m=u[1],v=2,g=u.length,y=t[s];if(f=t[c](f)?f:l.createElement(f),1===g)return f;if((!p(m,n)||t[a](m)||h(m))&&(--v,m=null),g-v==1&&p(u[v],"string")&&f[o]!==undefined)f[o]=u[v];else for(;v<g;++v)if(null!=(r=u[v]))if(h(r))for(var w=0;w<r.length;++w)d(f,r[w]);else d(f,r);for(var x in m)if(y[x]){var b=y[x];typeof b===e?b(f,m[x]):f[i](b,m[x])}else p(m[x],e)?f[x]=m[x]:f[i](x,m[x]);return f}var e="function",n="object",r="nodeType",o="textContent",i="setAttribute",s="attrMap",a="isNode",c="isElement",l=typeof document===n?document:{},p=function(t,e){return typeof t===e},u=typeof Node===e?function(t){return t instanceof Node}:function(t){return t&&p(t,n)&&r in t&&p(t.ownerDocument,n)},f=function(e){return t[a](e)&&1===e[r]},h=function(t){return t instanceof Array},d=function(e,n){t[a](n)||(n=l.createTextNode(n)),e.appendChild(n)};return t[s]={},t[c]=f,t[a]=u,"undefined"!=typeof Proxy&&(t.proxy=new Proxy(t,{get:function(e,n){return!(n in t)&&(t[n]=t.bind(null,n)),t[n]}})),t}),n.exports}),t.registerDynamic("1f",["1e"],!0,function(t,e,n){return n.exports=t("1e"),n.exports}),t.registerDynamic("20",[],!0,function(t,e,n){function r(t){for(var e=0,n=0;n<t.length;n++)e=(e<<5)-e+t.charCodeAt(n)|0;return e}function o(t){var e=document.createElement("div");if(e.className=c,t.path){var n="pm-icon-"+r(t.path).toString(16);document.getElementById(n)||i(n,t);var o=e.appendChild(document.createElementNS(s,"svg"));o.style.width=t.width/t.height+"em";o.appendChild(document.createElementNS(s,"use")).setAttributeNS(a,"href",/([^#]*)/.exec(document.location)[1]+"#"+n)}else t.dom?e.appendChild(t.dom.cloneNode(!0)):(e.appendChild(document.createElement("span")).textContent=t.text||"",t.css&&(e.firstChild.style.cssText=t.css));return e}function i(t,e){var n=document.getElementById(c+"-collection");n||(n=document.createElementNS(s,"svg"),n.id=c+"-collection",n.style.display="none",document.body.insertBefore(n,document.body.firstChild));var r=document.createElementNS(s,"symbol");r.id=t,r.setAttribute("viewBox","0 0 "+e.width+" "+e.height),r.appendChild(document.createElementNS(s,"path")).setAttribute("d",e.path),n.appendChild(r)}var s="http://www.w3.org/2000/svg",a="http://www.w3.org/1999/xlink",c="ProseMirror-icon";return e.getIcon=o,n.exports}),t.registerDynamic("21",["1f","22","23","20"],!0,function(t,e,n){function r(t,e){return t.props.translate?t.props.translate(e):e}function o(t){C.time=Date.now(),C.node=t.target}function i(t){return Date.now()-100<C.time&&C.node&&t.contains(C.node)}function s(t,e){for(var n=[],r=0;r<t.length;r++){var o=t[r].render(e);o&&n.push(u("div",{"class":S+"-dropdown-item"},o))}return n}function a(t,e){for(var n=document.createDocumentFragment(),r=!1,o=0;o<e.length;o++){for(var i=e[o],s=!1,a=0;a<i.length;a++){var l=i[a].render(t);l&&(!s&&r&&n.appendChild(c()),n.appendChild(u("span",{"class":S+"item"},l)),s=!0)}s&&(r=!0)}return n}function c(){return u("span",{"class":S+"separator"})}function l(t,e){var n={run:function(n,r){return v(t,e.attrs)(n,r)},select:function(n){return v(t,e.attrs instanceof Function?null:e.attrs)(n)}};for(var r in e)n[r]=e[r];return new M(n)}function p(t,e){var n=g(t,e.attrs),r={run:n,select:function(t){return n(t)},active:function(n){var r=n.selection,o=r.$from,i=r.to,s=r.node;return s?s.hasMarkup(t,e.attrs):i<=o.end()&&o.parent.hasMarkup(t,e.attrs)}};for(var o in e)r[o]=e[o];return new M(r)}var u=t("1f"),f=t("22"),h=f.lift,d=f.joinUp,m=f.selectParentNode,v=f.wrapIn,g=f.setBlockType,y=t("23"),w=y.undo,x=y.redo,b=t("20"),k=b.getIcon,S="ProseMirror-menu",M=function(t){this.spec=t};M.prototype.render=function(t){var e=!1,n=this.spec;if(n.select&&!n.select(t.state)){if("disable"!=n.onDeselected)return null;e=!0}var o,i=n.active&&!e&&n.active(t.state);if(n.render)o=n.render(t);else if(n.icon)o=k(n.icon),i&&o.classList.add(S+"-active");else{if(!n.label)throw new RangeError("MenuItem without render, icon, or label property");o=u("div",null,r(t,n.label))}return n.title&&o.setAttribute("title",r(t,n.title)),n["class"]&&o.classList.add(n["class"]),e&&o.classList.add(S+"-disabled"),n.css&&(o.style.cssText+=n.css),e||o.addEventListener(n.execEvent||"mousedown",function(e){e.preventDefault(),n.run(t.state,t.dispatch,t)}),o},e.MenuItem=M;var C={time:0,node:null},D=function(t,e){this.options=e||{},this.content=Array.isArray(t)?t:[t]};D.prototype.render=function(t){var e=this,n=s(this.content,t);if(!n.length)return null;var a=u("div",{"class":S+"-dropdown "+(this.options["class"]||""),style:this.options.css,title:this.options.title&&r(t,this.options.title)},r(t,this.options.label)),c=u("div",{"class":S+"-dropdown-wrap"},a),l=null,p=null,f=function(){l&&l.close()&&(l=null,window.removeEventListener("mousedown",p))};return a.addEventListener("mousedown",function(t){t.preventDefault(),o(t),l?f():(l=e.expand(c,n),window.addEventListener("mousedown",p=function(){i(c)||f()}))}),c},D.prototype.expand=function(t,e){function n(){if(!o)return o=!0,t.removeChild(r),!0}var r=u("div",{"class":S+"-dropdown-menu "+(this.options["class"]||"")},e),o=!1;return t.appendChild(r),{close:n,node:r}},e.Dropdown=D;var O=function(t,e){this.options=e||{},this.content=Array.isArray(t)?t:[t]};O.prototype.render=function(t){var e=s(this.content,t);if(!e.length)return null;var n=u("div",{"class":S+"-submenu-label"},r(t,this.options.label)),a=u("div",{"class":S+"-submenu-wrap"},n,u("div",{"class":S+"-submenu"},e)),c=null;return n.addEventListener("mousedown",function(t){t.preventDefault(),o(t),a.classList.toggle(S+"-submenu-wrap-active"),c||window.addEventListener("mousedown",c=function(){i(a)||(a.classList.remove(S+"-submenu-wrap-active"),window.removeEventListener("mousedown",c),c=null)})}),a},e.DropdownSubmenu=O,e.renderGrouped=a;var T={join:{width:800,height:900,path:"M0 75h800v125h-800z M0 825h800v-125h-800z M250 400h100v-100h100v100h100v100h-100v100h-100v-100h-100z"},lift:{width:1024,height:1024,path:"M219 310v329q0 7-5 12t-12 5q-8 0-13-5l-164-164q-5-5-5-13t5-13l164-164q5-5 13-5 7 0 12 5t5 12zM1024 749v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12zM1024 530v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 310v109q0 7-5 12t-12 5h-621q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h621q7 0 12 5t5 12zM1024 91v109q0 7-5 12t-12 5h-987q-7 0-12-5t-5-12v-109q0-7 5-12t12-5h987q7 0 12 5t5 12z"},selectParentNode:{text:"\u2b1a",css:"font-weight: bold"},undo:{width:1024,height:1024,path:"M761 1024c113-206 132-520-313-509v253l-384-384 384-384v248c534-13 594 472 313 775z"},redo:{width:1024,height:1024,path:"M576 248v-248l384 384-384 384v-253c-446-10-427 303-313 509-280-303-221-789 313-775z"},strong:{width:805,height:1024,path:"M317 869q42 18 80 18 214 0 214-191 0-65-23-102-15-25-35-42t-38-26-46-14-48-6-54-1q-41 0-57 5 0 30-0 90t-0 90q0 4-0 38t-0 55 2 47 6 38zM309 442q24 4 62 4 46 0 81-7t62-25 42-51 14-81q0-40-16-70t-45-46-61-24-70-8q-28 0-74 7 0 28 2 86t2 86q0 15-0 45t-0 45q0 26 0 39zM0 950l1-53q8-2 48-9t60-15q4-6 7-15t4-19 3-18 1-21 0-19v-37q0-561-12-585-2-4-12-8t-25-6-28-4-27-2-17-1l-2-47q56-1 194-6t213-5q13 0 39 0t38 0q40 0 78 7t73 24 61 40 42 59 16 78q0 29-9 54t-22 41-36 32-41 25-48 22q88 20 146 76t58 141q0 57-20 102t-53 74-78 48-93 27-100 8q-25 0-75-1t-75-1q-60 0-175 6t-132 6z"},em:{width:585,height:1024,path:"M0 949l9-48q3-1 46-12t63-21q16-20 23-57 0-4 35-165t65-310 29-169v-14q-13-7-31-10t-39-4-33-3l10-58q18 1 68 3t85 4 68 1q27 0 56-1t69-4 56-3q-2 22-10 50-17 5-58 16t-62 19q-4 10-8 24t-5 22-4 26-3 24q-15 84-50 239t-44 203q-1 5-7 33t-11 51-9 47-3 32l0 10q9 2 105 17-1 25-9 56-6 0-18 0t-18 0q-16 0-49-5t-49-5q-78-1-117-1-29 0-81 5t-69 6z"},code:{width:896,height:1024,path:"M608 192l-96 96 224 224-224 224 96 96 288-320-288-320zM288 192l-288 320 288 320 96-96-224-224 224-224-96-96z"},link:{width:951,height:1024,path:"M832 694q0-22-16-38l-118-118q-16-16-38-16-24 0-41 18 1 1 10 10t12 12 8 10 7 14 2 15q0 22-16 38t-38 16q-8 0-15-2t-14-7-10-8-12-12-10-10q-18 17-18 41 0 22 16 38l117 118q15 15 38 15 22 0 38-14l84-83q16-16 16-38zM430 292q0-22-16-38l-117-118q-16-16-38-16-22 0-38 15l-84 83q-16 16-16 38 0 22 16 38l118 118q15 15 38 15 24 0 41-17-1-1-10-10t-12-12-8-10-7-14-2-15q0-22 16-38t38-16q8 0 15 2t14 7 10 8 12 12 10 10q18-17 18-41zM941 694q0 68-48 116l-84 83q-47 47-116 47-69 0-116-48l-117-118q-47-47-47-116 0-70 50-119l-50-50q-49 50-118 50-68 0-116-48l-118-118q-48-48-48-116t48-116l84-83q47-47 116-47 69 0 116 48l117 118q47 47 47 116 0 70-50 119l50 50q49-50 118-50 68 0 116 48l118 118q48 48 48 116z"},bulletList:{width:768,height:896,path:"M0 512h128v-128h-128v128zM0 256h128v-128h-128v128zM0 768h128v-128h-128v128zM256 512h512v-128h-512v128zM256 256h512v-128h-512v128zM256 768h512v-128h-512v128z"},orderedList:{width:768,height:896,path:"M320 512h448v-128h-448v128zM320 768h448v-128h-448v128zM320 128v128h448v-128h-448zM79 384h78v-256h-36l-85 23v50l43-2v185zM189 590c0-36-12-78-96-78-33 0-64 6-83 16l1 66c21-10 42-15 67-15s32 11 32 28c0 26-30 58-110 112v50h192v-67l-91 2c49-30 87-66 87-113l1-1z"},blockquote:{width:640,height:896,path:"M0 448v256h256v-256h-128c0 0 0-128 128-128v-128c0 0-256 0-256 256zM640 320v-128c0 0-256 0-256 256v256h256v-256h-128c0 0 0-128 128-128z"}};e.icons=T;var R=new M({title:"Join with above block",run:d,select:function(t){return d(t)},icon:T.join});e.joinUpItem=R;var N=new M({title:"Lift out of enclosing block",run:h,select:function(t){return h(t)},icon:T.lift});e.liftItem=N;var E=new M({title:"Select parent node",run:m,select:function(t){return m(t)},icon:T.selectParentNode});e.selectParentNodeItem=E;var A=new M({title:"Undo last change",run:w,select:function(t){return w(t)},icon:T.undo});e.undoItem=A;var I=new M({title:"Redo last undone change",run:x,select:function(t){return x(t)},icon:T.redo});return e.redoItem=I,e.wrapItem=l,e.blockTypeItem=p,n.exports}),t.registerDynamic("24",["1f","11","21"],!0,function(t,e,n){function r(t){return t.anchorNode==t.focusNode?t.anchorOffset>t.focusOffset:t.anchorNode.compareDocumentPosition(t.focusNode)==Node.DOCUMENT_POSITION_FOLLOWING}function o(t){for(var e=t.parentNode;e;e=e.parentNode)if(e.scrollHeight>e.clientHeight)return e}var i=t("1f"),s=t("11"),a=s.EditorView,c=t("21"),l=c.renderGrouped,p="ProseMirror-menubar",u=function(t,e){var n=this;this.wrapper=i("div",{"class":p+"-wrapper"}),t&&t.appendChild?t.appendChild(this.wrapper):t&&t(this.wrapper),e.dispatchTransaction||(e.dispatchTransaction=function(t){return n.updateState(n.editor.state.apply(t))}),this.editor=new a(this.wrapper,e),this.menu=i("div",{"class":p}),this.menu.className=p,this.spacer=null,this.wrapper.insertBefore(this.menu,this.wrapper.firstChild),this.maxHeight=0,this.widthForMaxHeight=0,this.floating=!1,this.props=e,this.updateMenu(),this.editor.someProp("floatingMenu")&&(this.updateFloat(),this.scrollFunc=function(){var t=n.editor.root;(t.body||t).contains(n.wrapper)?n.updateFloat():window.removeEventListener("scroll",n.scrollFunc)},window.addEventListener("scroll",this.scrollFunc))};return u.prototype.update=function(t){this.props=t,this.editor.update(t),this.updateMenu()},u.prototype.updateState=function(t){this.editor.updateState(t),this.updateMenu()},u.prototype.updateMenu=function(){this.menu.textContent="",this.menu.appendChild(l(this.editor,this.editor.someProp("menuContent"))),this.floating?this.updateScrollCursor():(this.menu.offsetWidth!=this.widthForMaxHeight&&(this.widthForMaxHeight=this.menu.offsetWidth,this.maxHeight=0),this.menu.offsetHeight>this.maxHeight&&(this.maxHeight=this.menu.offsetHeight,this.menu.style.minHeight=this.maxHeight+"px"))},u.prototype.updateScrollCursor=function(){var t=this.editor.root.getSelection();if(t.focusNode){var e=t.getRangeAt(0).getClientRects(),n=e[r(t)?0:e.length-1];if(n){var i=this.menu.getBoundingClientRect();if(n.top<i.bottom&&n.bottom>i.top){var s=o(this.wrapper);s&&(s.scrollTop-=i.bottom-n.top)}}}},u.prototype.updateFloat=function(){var t=this.wrapper,e=t.getBoundingClientRect();if(this.floating)if(e.top>=0||e.bottom<this.menu.offsetHeight+10)this.floating=!1,this.menu.style.position=this.menu.style.left=this.menu.style.width="",this.menu.style.display="",this.spacer.parentNode.removeChild(this.spacer),this.spacer=null;else{var n=(t.offsetWidth-t.clientWidth)/2;this.menu.style.left=e.left+n+"px",this.menu.style.display=e.top>window.innerHeight?"none":""}else if(e.top<0&&e.bottom>=this.menu.offsetHeight+10){this.floating=!0;var r=this.menu.getBoundingClientRect();this.menu.style.left=r.left+"px",this.menu.style.width=r.width+"px",this.menu.style.position="fixed",this.spacer=i("div",{"class":p+"-spacer",style:"height: "+r.height+"px"}),t.insertBefore(this.spacer,this.menu)}},u.prototype.destroy=function(){this.editor.destroy()},e.MenuBarEditorView=u,n.exports}),t.registerDynamic("25",["21","24"],!0,function(t,e,n){var r;return r=t("21"),e.MenuItem=r.MenuItem,e.Dropdown=r.Dropdown,e.DropdownSubmenu=r.DropdownSubmenu,e.renderGrouped=r.renderGrouped,e.icons=r.icons,e.joinUpItem=r.joinUpItem,e.liftItem=r.liftItem,e.selectParentNodeItem=r.selectParentNodeItem,e.undoItem=r.undoItem,e.redoItem=r.redoItem,e.wrapItem=r.wrapItem,e.blockTypeItem=r.blockTypeItem,e.MenuBarEditorView=t("24").MenuBarEditorView,n.exports}),t.registerDynamic("26",["25"],!0,function(t,e,n){return n.exports=t("25"),n.exports}),t.registerDynamic("27",[],!0,function(t,e,n){function r(t){var e=document.body.appendChild(document.createElement("div"));e.className=s;var n=function(t){e.contains(t.target)||r()};setTimeout(function(){return window.addEventListener("mousedown",n)},50);var r=function(){window.removeEventListener("mousedown",n),e.parentNode&&e.parentNode.removeChild(e)},i=[];for(var a in t.fields)i.push(t.fields[a].render());var c=document.createElement("button");c.type="submit",c.className=s+"-submit",c.textContent="OK";var l=document.createElement("button");l.type="button",l.className=s+"-cancel",l.textContent="Cancel",l.addEventListener("click",r);var p=e.appendChild(document.createElement("form"));t.title&&(p.appendChild(document.createElement("h5")).textContent=t.title),i.forEach(function(t){p.appendChild(document.createElement("div")).appendChild(t)});var u=p.appendChild(document.createElement("div"));u.className=s+"-buttons",u.appendChild(c),u.appendChild(document.createTextNode(" ")),u.appendChild(l);var f=e.getBoundingClientRect();e.style.top=(window.innerHeight-f.height)/2+"px",e.style.left=(window.innerWidth-f.width)/2+"px";var h=function(){var e=o(t.fields,i);e&&(r(),t.callback(e))};p.addEventListener("submit",function(t){t.preventDefault(),h()}),p.addEventListener("keydown",function(t){27==t.keyCode?(t.preventDefault(),r()):13!=t.keyCode||t.ctrlKey||t.metaKey||t.shiftKey?9==t.keyCode&&window.setTimeout(function(){e.contains(document.activeElement)||r()},500):(t.preventDefault(),h())});var d=p.elements[0];d&&d.focus()}function o(t,e){var n=Object.create(null),r=0;for(var o in t){var s=t[o],a=e[r++],c=s.read(a),l=s.validate(c);if(l)return i(a,l),null;n[o]=s.clean(c)}return n}function i(t,e){var n=t.parentNode,r=n.appendChild(document.createElement("div"));r.style.left=t.offsetLeft+t.offsetWidth+2+"px",r.style.top=t.offsetTop-5+"px",r.className="ProseMirror-invalid",r.textContent=e,setTimeout(function(){return n.removeChild(r)},1500)}var s="ProseMirror-prompt";e.openPrompt=r;var a=function(t){this.options=t};a.prototype.read=function(t){return t.value},a.prototype.validateType=function(){},a.prototype.validate=function(t){return!t&&this.options.required?"Required field":this.validateType(t)||this.options.validate&&this.options.validate(t)},a.prototype.clean=function(t){return this.options.clean?this.options.clean(t):t},e.Field=a;var c=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=document.createElement("input");return t.type="text",t.placeholder=this.options.label,t.value=this.options.value||"",t.autocomplete="off",t},e}(a);e.TextField=c;var l=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.render=function(){var t=this,e=document.createElement("select");return this.options.options.forEach(function(n){var r=e.appendChild(document.createElement("option"));r.value=n.value,r.selected=n.value==t.options.value,r.label=n.label}),e},e}(a);return e.SelectField=l,n.exports}),t.registerDynamic("28",["26","29","7","22","2a","27"],!0,function(t,e,n){function r(t,e,n){for(var r=t.selection.$from,o=r.depth;o>=0;o--){var i=r.index(o);if(r.node(o).canReplaceWith(i,i,e,n))return!0}return!1}function o(t){return new M({title:"Insert image",label:"Image",select:function(e){return r(e,t)},run:function(e,n,r){var o=e.selection,i=o.node,s=o.from,a=o.to,c=t&&i&&i.type==t&&i.attrs;V({title:"Insert image",fields:{src:new _({label:"Location",required:!0,value:c&&c.src}),title:new _({label:"Title",value:c&&c.title}),alt:new _({label:"Description",value:c?c.title:e.doc.textBetween(s,a," ")})},callback:function(e){r.dispatch(r.state.tr.replaceSelectionWith(t.createAndFill(e))),r.focus()}})}})}function i(t){if(!/^[1-9]\d*$/.test(t))return"Should be a positive integer"}function s(t){return new M({title:"Insert a table",run:function(e,n,r){V({title:"Insert table",fields:{rows:new _({label:"Rows",validate:i}),cols:new _({label:"Columns",validate:i})},callback:function(e){var n=e.rows,o=e.cols,i=r.state.tr.replaceSelectionWith(D(t,+n,+o));i.setSelection(z.near(i.doc.resolve(r.state.selection.from))),r.dispatch(i.scrollIntoView()),r.focus()}})},select:function(e){for(var n=e.selection.$from,r=n.depth;r>=0;r--){var o=n.index(r);if(n.node(r).canReplaceWith(o,o,t))return!0}return!1},label:"Table"})}function a(t,e){var n={label:e.title,run:t,select:function(e){return t(e)}};for(var r in e)n[r]=e[r];return new M(n)}function c(t,e){var n=t.selection,r=n.from,o=n.$from,i=n.to;return n.empty?e.isInSet(t.storedMarks||o.marks()):t.doc.rangeHasMark(r,i,e)}function l(t,e){var n={active:function(e){return c(e,t)}};for(var r in e)n[r]=e[r];return a(L(t),n)}function p(t){return l(t,{title:"Add or remove link",icon:S.link,run:function(e,n,r){if(c(e,t))return L(t)(e,n),!0;V({title:"Create a link",fields:{href:new _({label:"Link target",required:!0,clean:function(t){return/^https?:\/\//i.test(t)||(t="http://"+t),t}}),title:new _({label:"Title"})},callback:function(e){L(t,e)(r.state,r.dispatch),r.focus()}})}})}function u(t,e){return a(B(t,e.attrs),e)}function f(t){var e,n={};if((e=t.marks.strong)&&(n.toggleStrong=l(e,{title:"Toggle strong style",icon:S.strong})),(e=t.marks.em)&&(n.toggleEm=l(e,{title:"Toggle emphasis",icon:S.em})),(e=t.marks.code)&&(n.toggleCode=l(e,{title:"Toggle code font",icon:S.code})),(e=t.marks.link)&&(n.toggleLink=p(e)),(e=t.nodes.image)&&(n.insertImage=o(e)),(e=t.nodes.bullet_list)&&(n.wrapBulletList=u(e,{title:"Wrap in bullet list",icon:S.bulletList})),(e=t.nodes.ordered_list)&&(n.wrapOrderedList=u(e,{title:"Wrap in ordered list",icon:S.orderedList})),(e=t.nodes.blockquote)&&(n.wrapBlockQuote=d(e,{title:"Wrap in block quote",icon:S.blockquote})),(e=t.nodes.paragraph)&&(n.makeParagraph=m(e,{title:"Change to paragraph",label:"Plain"})),(e=t.nodes.code_block)&&(n.makeCodeBlock=m(e,{title:"Change to code block",label:"Code"})),e=t.nodes.heading)for(var i=1;i<=10;i++)n["makeHead"+i]=m(e,{title:"Change to heading "+i,label:"Level "+i,attrs:{level:i}});if(e=t.nodes.horizontal_rule){var c=e;n.insertHorizontalRule=new M({title:"Insert horizontal rule",label:"Horizontal rule",select:function(t){return r(t,c)},run:function(t,e){e(t.tr.replaceSelectionWith(c.create()))}})}(e=t.nodes.table)&&(n.insertTable=s(e)),(e=t.nodes.table_row)&&(n.addRowBefore=a(N,{title:"Add row before"}),n.addRowAfter=a(E,{title:"Add row after"}),n.removeRow=a(A,{title:"Remove row"}),n.addColumnBefore=a(O,{title:"Add column before"}),n.addColumnAfter=a(T,{title:"Add column after"}),n.removeColumn=a(R,{title:"Remove column"}));var f=function(t){return t.filter(function(t){return t})};n.insertMenu=new v(f([n.insertImage,n.insertHorizontalRule,n.insertTable]),{label:"Insert"}),n.typeMenu=new v(f([n.makeParagraph,n.makeCodeBlock,n.makeHead1&&new g(f([n.makeHead1,n.makeHead2,n.makeHead3,n.makeHead4,n.makeHead5,n.makeHead6]),{label:"Heading"})]),{label:"Type..."});var h=f([n.addRowBefore,n.addRowAfter,n.removeRow,n.addColumnBefore,n.addColumnAfter,n.removeColumn]);return h.length&&(n.tableMenu=new v(h,{label:"Table"})),n.inlineMenu=[f([n.toggleStrong,n.toggleEm,n.toggleCode,n.toggleLink]),[n.insertMenu]],n.blockMenu=[f([n.typeMenu,n.tableMenu,n.wrapBulletList,n.wrapOrderedList,n.wrapBlockQuote,y,w,x])],n.fullMenu=n.inlineMenu.concat(n.blockMenu).concat([[b,k]]),n}
var h=t("26"),d=h.wrapItem,m=h.blockTypeItem,v=h.Dropdown,g=h.DropdownSubmenu,y=h.joinUpItem,w=h.liftItem,x=h.selectParentNodeItem,b=h.undoItem,k=h.redoItem,S=h.icons,M=h.MenuItem,C=t("29"),D=C.createTable,O=C.addColumnBefore,T=C.addColumnAfter,R=C.removeColumn,N=C.addRowBefore,E=C.addRowAfter,A=C.removeRow,I=t("7"),z=I.Selection,P=t("22"),L=P.toggleMark,F=t("2a"),B=F.wrapInList,q=t("27"),_=q.TextField,V=q.openPrompt;return e.buildMenuItems=f,n.exports}),t.registerDynamic("2b",["9","3","7"],!0,function(t,e,n){function r(t,e){if(t.selection.empty)return!1;if(e){var n=t.selection,r=n.$from,o=n.$to,i=t.tr.deleteSelection().scrollIntoView();r.sameParent(o)&&r.parent.isTextblock&&i.setStoredMarks(r.marks(!0)),e(i)}return!0}function o(t,e,n){var r=t.selection,o=r.$head;if(!r.empty||(n?!n.endOfTextblock("backward",t):o.parentOffset>0))return!1;for(var i,s,a=o.depth-1;!i&&a>=0;a--)o.index(a)>0&&(s=o.before(a+1),i=o.node(a).child(o.index(a)-1));if(!i){var c=o.blockRange(),l=c&&N(c);return null!=l&&(e&&e(t.tr.lift(c,l).scrollIntoView()),!0)}if(i.isLeaf&&q.isSelectable(i)&&0==o.parent.content.size){if(e){var p=t.tr["delete"](s,s+o.parent.nodeSize);p.setSelection(q.create(p.doc,s-i.nodeSize)),e(p.scrollIntoView())}return!0}return i.isLeaf?(e&&e(t.tr["delete"](s-i.nodeSize,s).scrollIntoView()),!0):v(t,s,e)||g(t,s,-1,e)}function i(t,e,n){var r=t.selection,o=r.$head;if(!r.empty||(n?!n.endOfTextblock("forward",t):o.parentOffset<o.parent.content.size))return!1;for(var i,s,a=o.depth-1;!i&&a>=0;a--){var c=o.node(a);o.index(a)+1<c.childCount&&(i=c.child(o.index(a)+1),s=o.after(a+1))}return!!i&&(i.isLeaf?(e&&e(t.tr["delete"](s,s+i.nodeSize).scrollIntoView()),!0):v(t,s,e)||g(t,s,1,e))}function s(t,e){var n,r=t.selection,o=r.node,i=r.from;if(o){if(o.isTextblock||!T(t.doc,i))return!1;n=i}else if(null==(n=O(t.doc,i,-1)))return!1;if(e){var s=t.tr.join(n);t.selection.node&&s.setSelection(q.create(s.doc,n-t.doc.resolve(n).nodeBefore.nodeSize)),e(s.scrollIntoView())}return!0}function a(t,e){var n=t.selection.node,r=t.selection.from,o=y(t);if(!o)return!1;if(e){var i=t.tr.join(o);n&&i.setSelection(q.create(i.doc,r)),e(i.scrollIntoView())}return!0}function c(t,e){var n=t.selection,r=n.$from,o=n.$to,i=r.blockRange(o),s=i&&N(i);return null!=s&&(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)}function l(t,e){var n=t.selection,r=n.$head,o=n.anchor;return!(!r||!r.parent.type.spec.code||r.sharedDepth(o)!=r.depth)&&(e&&e(t.tr.insertText("\n").scrollIntoView()),!0)}function p(t,e){var n=t.selection,r=n.$head,o=n.anchor;if(!r||!r.parent.type.spec.code||r.sharedDepth(o)!=r.depth)return!1;var i=r.node(-1),s=r.indexAfter(-1),a=i.defaultContentType(s);if(!i.canReplaceWith(s,s,a))return!1;if(e){var c=r.after(),l=t.tr.replaceWith(c,c,a.createAndFill());l.setSelection(F.near(l.doc.resolve(c),1)),e(l.scrollIntoView())}return!0}function u(t,e){var n=t.selection,r=n.$from,o=n.$to,i=n.node;if(!i||!i.isBlock)return!1;var s=r.parent.defaultContentType(o.indexAfter());if(!s||!s.isTextblock)return!1;if(e){var a=(r.parentOffset?o:r).pos,c=t.tr.insert(a,s.createAndFill());c.setSelection(B.create(c.doc,a+1)),e(c.scrollIntoView())}return!0}function f(t,e){var n=t.selection,r=n.$head;if(!n.empty||r.parent.content.size)return!1;if(r.depth>1&&r.after()!=r.end(-1)){var o=r.before();if(E(t.doc,o))return e&&e(t.tr.split(o).scrollIntoView()),!0}var i=r.blockRange(),s=i&&N(i);return null!=s&&(e&&e(t.tr.lift(i,s).scrollIntoView()),!0)}function h(t,e){var n=t.selection,r=n.$from,o=n.$to,i=n.node;if(i&&i.isBlock)return!(!r.parentOffset||!E(t.doc,r.pos))&&(e&&e(t.tr.split(r.pos).scrollIntoView()),!0);if(e){var s=o.parentOffset==o.parent.content.size,a=t.tr["delete"](r.pos,o.pos),c=0==r.depth?null:r.node(-1).defaultContentType(r.indexAfter(-1)),l=s?[{type:c}]:null,p=E(a.doc,r.pos,1,l);l||p||!E(a.doc,r.pos,1,[{type:c}])||(l=[{type:c}],p=!0),p&&(a.split(r.pos,1,l),s||r.parentOffset||r.parent.type==c||!r.node(-1).canReplace(r.index(-1),r.indexAfter(-1),P.from(c.create(),r.parent))||a.setNodeType(r.before(),c)),e(a.scrollIntoView())}return!0}function d(t,e){var n,r=t.selection;if(r.node){if(!r.$from.depth)return!1;n=r.$from.before()}else{var o=r.$head.sharedDepth(r.anchor);if(0==o)return!1;n=r.$head.before(o)}return e&&e(t.tr.setSelection(q.create(t.doc,n))),!0}function m(t,e,n){var r=e.nodeBefore,o=e.nodeAfter,i=e.index();return!!(r&&o&&r.type.compatibleContent(o.type))&&(!r.content.size&&e.parent.canReplace(i-1,i)?(n&&n(t.tr["delete"](e.pos-r.nodeSize,e.pos).scrollIntoView()),!0):!!e.parent.canReplace(i,i+1)&&(n&&n(t.tr.clearNonMatching(e.pos,r.contentMatchAt(r.childCount)).join(e.pos).scrollIntoView()),!0))}function v(t,e,n){var r,o,i=t.doc.resolve(e),s=i.nodeBefore,a=i.nodeAfter;if(m(t,i,n))return!0;if(a.isTextblock&&i.parent.canReplace(i.index(),i.index()+1)&&(r=(o=s.contentMatchAt(s.childCount)).findWrappingFor(a))&&o.matchType((r[0]||a).type,(r[0]||a).attrs).validEnd()){if(n){for(var c=e+a.nodeSize,l=P.empty,p=r.length-1;p>=0;p--)l=P.from(r[p].type.create(r[p].attrs,l));l=P.from(s.copy(l));var u=t.tr.step(new A(e-1,c,e,c,new z(l,1,0),r.length,!0)),f=c+2*r.length;T(u.doc,f)&&u.join(f),n(u.scrollIntoView())}return!0}var h=F.findFrom(i,1),d=h.$from.blockRange(h.$to),v=d&&N(d);return null!=v&&(n&&n(t.tr.lift(d,v).scrollIntoView()),!0)}function g(t,e,n,r){var o=t.doc.resolve(e),i=n>0?o.nodeAfter:o.nodeBefore;return!(!i||!q.isSelectable(i))&&(r&&r(t.tr.setSelection(q.create(t.doc,e-(n>0?0:i.nodeSize))).scrollIntoView()),!0)}function y(t){var e=t.selection,n=e.node,r=e.to;return n?T(t.doc,r)?r:null:O(t.doc,r,1)}function w(t,e){return function(n,r){var o=n.selection,i=o.$from,s=o.$to,a=i.blockRange(s),c=a&&R(a,t,e);return!!c&&(r&&r(n.tr.wrap(a,c).scrollIntoView()),!0)}}function x(t,e){return function(n,r){var o,i=n.selection,s=i.$from,a=i.$to,c=i.node;if(c)o=s.depth;else{if(!s.depth||a.pos>s.end())return!1;o=s.depth-1}var l=c||s.parent;if(!l.isTextblock||l.hasMarkup(t,e))return!1;var p=s.index(o);if(!s.node(o).canReplaceWith(p,p+1,t))return!1;if(r){var u=s.before(o+1);r(n.tr.clearNonMatching(u,t.contentExpr.start(e)).setNodeType(u,t,e).scrollIntoView())}return!0}}function b(t,e,n,r){var o=t.contentMatchAt(0).allowsMark(r);return t.nodesBetween(e,n,function(t){if(o)return!1;o=t.isTextblock&&t.contentMatchAt(0).allowsMark(r)}),o}function k(t,e){return function(n,r){var o=n.selection,i=o.empty,s=o.from,a=o.to,c=o.$from;return!!b(n.doc,s,a,t)&&(r&&r(i?t.isInSet(n.storedMarks||c.marks())?n.tr.removeStoredMark(t):n.tr.addStoredMark(t.create(e)):n.doc.rangeHasMark(s,a,t)?n.tr.removeMark(s,a,t).scrollIntoView():n.tr.addMark(s,a,t.create(e)).scrollIntoView()),!0)}}function S(t,e){return function(n){if(!n.isGeneric)return t(n);for(var r=[],o=0;o<n.mapping.maps.length;o++){for(var i=n.mapping.maps[o],s=0;s<r.length;s++)r[s]=i.map(r[s]);i.forEach(function(t,e,n,o){return r.push(n,o)})}for(var a=[],c=0;c<r.length;c+=2)for(var l=r[c],p=r[c+1],u=n.doc.resolve(l),f=u.sharedDepth(p),h=u.node(f),d=u.indexAfter(f),m=u.after(f+1);m<=p;++d){var v=h.maybeChild(d);if(!v)break;if(d&&-1==a.indexOf(m)){var g=h.child(d-1);g.type==v.type&&e(g,v)&&a.push(m)}m+=v.nodeSize}a.sort(function(t,e){return t-e});for(var y=a.length-1;y>=0;y--)T(n.doc,a[y])&&n.join(a[y]);t(n)}}function M(t,e){if(Array.isArray(e)){var n=e;e=function(t){return n.indexOf(t.type.name)>-1}}return function(n,r){return t(n,r&&S(r,e))}}function C(){for(var t=[],e=arguments.length;e--;)t[e]=arguments[e];return function(e,n,r){for(var o=0;o<t.length;o++)if(t[o](e,n,r))return!0;return!1}}var D=t("9"),O=D.joinPoint,T=D.canJoin,R=D.findWrapping,N=D.liftTarget,E=D.canSplit,A=D.ReplaceAroundStep,I=t("3"),z=I.Slice,P=I.Fragment,L=t("7"),F=L.Selection,B=L.TextSelection,q=L.NodeSelection;e.deleteSelection=r,e.joinBackward=o,e.joinForward=i,e.joinUp=s,e.joinDown=a,e.lift=c,e.newlineInCode=l,e.exitCode=p,e.createParagraphNear=u,e.liftEmptyBlock=f,e.splitBlock=h,e.selectParentNode=d,e.wrapIn=w,e.setBlockType=x,e.toggleMark=k,e.autoJoin=M,e.chainCommands=C;var _={Enter:C(l,u,f,h),"Mod-Enter":p,Backspace:C(r,o),"Mod-Backspace":C(r,o),Delete:C(r,i),"Mod-Delete":C(r,i),"Alt-ArrowUp":s,"Alt-ArrowDown":a,"Mod-BracketLeft":c,Escape:d};if("undefined"!=typeof navigator?/Mac/.test(navigator.platform):"undefined"!=typeof os&&"darwin"==os.platform()){var V={"Ctrl-h":_.Backspace,"Alt-Backspace":_["Mod-Backspace"],"Ctrl-d":_.Delete,"Ctrl-Alt-Backspace":_["Mod-Delete"],"Alt-Delete":_["Mod-Delete"],"Alt-d":_["Mod-Delete"]};for(var j in V)_[j]=V[j]}return e.baseKeymap=_,n.exports}),t.registerDynamic("22",["2b"],!0,function(t,e,n){return n.exports=t("2b"),n.exports}),t.registerDynamic("2c",["3","9","7"],!0,function(t,e,n){function r(t,e){var n={};for(var r in t)n[r]=t[r];for(var o in e)n[o]=e[o];return n}function o(t,e,n){return t.append({table:r(R,{content:"table_row[columns=.columns]+",group:n}),table_row:r(N,{content:"table_cell{.columns}"}),table_cell:r(E,{content:e})})}function i(t,e,n,r){r=s(r,n);for(var o=t.contentExpr.elements[0].nodeTypes[0],i=o.contentExpr.elements[0].nodeTypes[0],a=i.createAndFill(),c=[],l=0;l<n;l++)c.push(a);for(var p=o.create({columns:n},x.from(c)),u=[],f=0;f<e;f++)u.push(p);return t.create(r,x.from(u))}function s(t,e){var n=Object.create(null);if(t)for(var r in t)n[r]=t[r];return n.columns=e,n}function a(t,e){return s(t,t.columns+e)}function c(t,e){for(var n=t.depth;n>0;n--)if(t.node(n).type.spec.tableRow&&(!e||e(n)))return n;return-1}function l(t,e){var n,r=t.selection.$from,o=c(r,function(t){return n=t==r.depth?r.nodeBefore:r.node(t+1)});return-1!=o&&(e&&e(t.tr.step(A.create(t.doc,r.before(o-1),r.index(o),n.type,n.attrs))),!0)}function p(t,e){var n,r=t.selection.$from,o=c(r,function(t){return n=t==r.depth?r.nodeAfter:r.node(t+1)});return-1!=o&&(e&&e(t.tr.step(A.create(t.doc,r.before(o-1),r.indexAfter(o)+(o==r.depth?1:0),n.type,n.attrs))),!0)}function u(t,e){var n=t.selection.$from,r=c(n,function(t){return n.node(t).childCount>1});return-1!=r&&(e&&e(t.tr.step(I.create(t.doc,n.before(r-1),n.index(r)))),!0)}function f(t,e,n){var r=t.selection.$from,o=c(r);if(-1==o)return!1;if(e){var i=r.node(o),s=[],a=n<0?r.before(o):r.after(o);i.forEach(function(t){return s.push(t.type.createAndFill(t.attrs))});var l=i.copy(x.from(s));e(t.tr.step(new D(a,a,new b(x.from(l),0,0))))}return!0}function h(t,e){return f(t,e,-1)}function d(t,e){return f(t,e,1)}function m(t,e){var n=t.selection.$from,r=c(n,function(t){return n.node(t-1).childCount>1});return-1!=r&&(e&&e(t.tr.step(new D(n.before(r),n.after(r),b.empty))),!0)}function v(t,e,n){var r=t.selection,o=r.$from,i=c(o);if(-1==i)return!1;var s=o.node(i),a=o.index(i)+e;if(a>=0&&a<s.childCount){var l=t.doc.resolve(s.content.offsetAt(a)+o.start(i)),p=T.findFrom(l,1);return!(!p||p.from>=l.end())&&(n&&n(t.tr.setSelection(p).scrollIntoView()),!0)}var u=o.index(i-1)+e,f=o.node(i-1);if(u<0||u>=f.childCount)return!1;var h=e>0?o.after(i)+2:o.before(i)-2-f.child(u).lastChild.content.size,d=t.doc.resolve(h),m=T.findFrom(d,1);return!(!m||m.from>=d.end())&&(n&&n(t.tr.setSelection(m).scrollIntoView()),!0)}function g(t,e){return v(t,1,e)}function y(t,e){return v(t,-1,e)}var w=t("3"),x=w.Fragment,b=w.Slice,k=t("9"),S=k.Step,M=k.StepResult,C=k.StepMap,D=k.ReplaceStep,O=t("7"),T=O.Selection,R={attrs:{columns:{"default":1}},parseDOM:[{tag:"table",getAttrs:function(t){var e=t.querySelector("tr");return!(!e||!e.children.length)&&{columns:e.children.length}}}],toDOM:function(){return["table",["tbody",0]]}};e.table=R;var N={attrs:{columns:{"default":1}},parseDOM:[{tag:"tr",getAttrs:function(t){return!!t.children.length&&{columns:t.children.length}}}],toDOM:function(){return["tr",0]},tableRow:!0};e.tableRow=N;var E={parseDOM:[{tag:"td"}],toDOM:function(){return["td",0]}};e.tableCell=E,e.addTableNodes=o,e.createTable=i;var A=function(t){function e(e,n){t.call(this),this.positions=e,this.cells=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r,o,i){var s=o.createAndFill(i),a=[],c=[];return t.nodeAt(n).forEach(function(t,e){for(var o=n+2+e,i=0;i<r;i++)o+=t.child(i).nodeSize;a.push(o),c.push(s)}),new e(a,c)},e.prototype.apply=function(t){for(var e=this,n=null,r=null,o=null,i=0;i<this.positions.length;i++){var s=t.resolve(e.positions[i]);if(s.depth<2||s.index(-1)!=i)return M.fail("Invalid cell insert position");if(null==r){if(r=s.node(-1),r.childCount!=e.positions.length)return M.fail("Mismatch in number of rows");o=s.before(-1),n=s.index()}else if(s.before(-1)!=o||s.index()!=n)return M.fail("Column insert positions not consistent")}for(var c=[],l=0;l<r.childCount;l++){for(var p=r.child(l),u=n?[]:[e.cells[l]],f=0;f<p.childCount;f++)u.push(p.child(f)),f+1==n&&u.push(e.cells[l]);c.push(p.type.create(a(p.attrs,1),x.from(u)))}var h=r.type.create(a(r.attrs,1),x.from(c));return M.fromReplace(t,o,o+r.nodeSize,new b(x.from(h),0,0))},e.prototype.getMap=function(){for(var t=this,e=[],n=0;n<this.positions.length;n++)e.push(t.positions[n],0,t.cells[n].nodeSize);return new C(e)},e.prototype.invert=function(t){for(var e=this,n=t.resolve(this.positions[0]),r=n.node(-1),o=[],i=[],s=0,a=0;a<r.childCount;a++){var c=e.positions[a]+s,l=e.cells[a].nodeSize;o.push(c),i.push(c+l),s+=l}return new I(o,i)},e.prototype.map=function(t){return new e(this.positions.map(function(e){return t.map(e)}),this.cells)},e.prototype.toJSON=function(){return{stepType:this.jsonID,positions:this.positions,cells:this.cells.map(function(t){return t.toJSON()})}},e.fromJSON=function(t,n){return new e(n.positions,n.cells.map(t.nodeFromJSON))},e}(S);e.AddColumnStep=A,S.jsonID("addTableColumn",A);var I=function(t){function e(e,n){t.call(this),this.from=e,this.to=n}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.create=function(t,n,r){var o=[],i=[];return t.nodeAt(n).forEach(function(t,e){for(var s=n+2+e,a=0;a<r;a++)s+=t.child(a).nodeSize;o.push(s),i.push(s+t.child(r).nodeSize)}),new e(o,i)},e.prototype.apply=function(t){for(var e=this,n=null,r=null,o=null,i=0;i<this.from.length;i++){var s=t.resolve(e.from[i]),c=s.nodeAfter;if(s.depth<2||s.index(-1)!=i||!c||e.from[i]+c.nodeSize!=e.to[i])return M.fail("Invalid cell delete positions");if(null==r){if(r=s.node(-1),r.childCount!=e.from.length)return M.fail("Mismatch in number of rows");o=s.before(-1),n=s.index()}else if(s.before(-1)!=o||s.index()!=n)return M.fail("Column delete positions not consistent")}for(var l=[],p=0;p<r.childCount;p++){for(var u=r.child(p),f=[],h=0;h<u.childCount;h++)h!=n&&f.push(u.child(h));l.push(u.type.create(a(u.attrs,-1),x.from(f)))}var d=r.type.create(a(r.attrs,-1),x.from(l));return M.fromReplace(t,o,o+r.nodeSize,new b(x.from(d),0,0))},e.prototype.getMap=function(){for(var t=this,e=[],n=0;n<this.from.length;n++)e.push(t.from[n],t.to[n]-t.from[n],0);return new C(e)},e.prototype.invert=function(t){for(var e=this,n=t.resolve(this.from[0]),r=n.node(-1),o=n.index(),i=[],s=[],a=0,c=0;c<r.childCount;c++){i.push(e.from[c]-a);var l=r.child(c).child(o);a+=l.nodeSize,s.push(l)}return new A(i,s)},e.prototype.map=function(t){for(var n=this,r=[],o=[],i=0;i<this.from.length;i++){var s=t.map(n.from[i],1),a=t.map(n.to[i],-1);if(a<=s)return null;r.push(s),o.push(a)}return new e(r,o)},e.fromJSON=function(t,n){return new e(n.from,n.to)},e}(S);return e.RemoveColumnStep=I,S.jsonID("removeTableColumn",I),e.addColumnBefore=l,e.addColumnAfter=p,e.removeColumn=u,e.addRowBefore=h,e.addRowAfter=d,e.removeRow=m,e.selectNextCell=g,e.selectPreviousCell=y,n.exports}),t.registerDynamic("29",["2c"],!0,function(t,e,n){return n.exports=t("2c"),n.exports}),t.registerDynamic("2d",[],!0,function(t,e,n){var r=200,o=function(){};o.prototype.append=function(t){return t.length?(t=o.from(t),!this.length&&t||t.length<r&&this.leafAppend(t)||this.length<r&&t.leafPrepend(this)||this.appendInner(t)):this},o.prototype.prepend=function(t){return t.length?o.from(t).append(this):this},o.prototype.appendInner=function(t){return new s(this,t)},o.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.length),t>=e?o.empty:this.sliceInner(Math.max(0,t),Math.min(this.length,e))},o.prototype.get=function(t){return t<0||t>=this.length?undefined:this.getInner(t)},o.prototype.forEach=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length),e<=n?this.forEachInner(t,e,n,0):this.forEachInvertedInner(t,e,n,0)},o.prototype.map=function(t,e,n){void 0===e&&(e=0),void 0===n&&(n=this.length);var r=[];return this.forEach(function(e,n){return r.push(t(e,n))},e,n),r},o.from=function(t){return t instanceof o?t:t&&t.length?new i(t):o.empty};var i=function(t){function e(e){t.call(this),this.values=e}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={length:{},depth:{}};return e.prototype.flatten=function(){return this.values},e.prototype.sliceInner=function(t,n){return 0==t&&n==this.length?this:new e(this.values.slice(t,n))},e.prototype.getInner=function(t){return this.values[t]},e.prototype.forEachInner=function(t,e,n,r){for(var o=this,i=e;i<n;i++)if(!1===t(o.values[i],r+i))return!1},e.prototype.forEachInvertedInner=function(t,e,n,r){for(var o=this,i=e-1;i>=n;i--)if(!1===t(o.values[i],r+i))return!1},e.prototype.leafAppend=function(t){if(this.length+t.length<=r)return new e(this.values.concat(t.flatten()))},e.prototype.leafPrepend=function(t){if(this.length+t.length<=r)return new e(t.flatten().concat(this.values))},n.length.get=function(){return this.values.length},n.depth.get=function(){return 0},Object.defineProperties(e.prototype,n),e}(o);o.empty=new i([]);var s=function(t){function e(e,n){t.call(this),this.left=e,this.right=n,this.length=e.length+n.length,this.depth=Math.max(e.depth,n.depth)+1}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.flatten=function(){return this.left.flatten().concat(this.right.flatten())},e.prototype.getInner=function(t){return t<this.left.length?this.left.get(t):this.right.get(t-this.left.length)},e.prototype.forEachInner=function(t,e,n,r){var o=this.left.length;return!(e<o&&!1===this.left.forEachInner(t,e,Math.min(n,o),r))&&(!(n>o&&!1===this.right.forEachInner(t,Math.max(e-o,0),Math.min(this.length,n)-o,r+o))&&void 0)},e.prototype.forEachInvertedInner=function(t,e,n,r){var o=this.left.length;return!(e>o&&!1===this.right.forEachInvertedInner(t,e-o,Math.max(n,o)-o,r+o))&&(!(n<o&&!1===this.left.forEachInvertedInner(t,Math.min(e,o),n,r))&&void 0)},e.prototype.sliceInner=function(t,e){if(0==t&&e==this.length)return this;var n=this.left.length;return e<=n?this.left.slice(t,e):t>=n?this.right.slice(t-n,e-n):this.left.slice(t,n).append(this.right.slice(0,e-n))},e.prototype.leafAppend=function(t){var n=this.right.leafAppend(t);if(n)return new e(this.left,n)},e.prototype.leafPrepend=function(t){var n=this.left.leafPrepend(t);if(n)return new e(n,this.right)},e.prototype.appendInner=function(t){return this.left.depth>=Math.max(this.right.depth,t.depth)+1?new e(this.left,new e(this.right,t)):new e(this,t)},e}(o);return n.exports=o,n.exports}),t.registerDynamic("2e",["2d"],!0,function(t,e,n){return n.exports=t("2d"),n.exports}),t.registerDynamic("2f",[],!0,function(t,e,n){function r(t,e,n,o,i,c){if(e.isTextblock)return s.create(t,n);for(var l=o-(i>0?0:1);i>0?l<e.childCount:l>=0;l+=i){var p=e.child(l);if(p.isLeaf){if(!c&&a.isSelectable(p))return a.create(t,n-(i<0?p.nodeSize:0))}else{var u=r(t,p,n+i,i<0?p.childCount:0,i,c);if(u)return u}n+=p.nodeSize*i}}var o=function(t,e){this.$from=t,this.$to=e},i={from:{},to:{},empty:{}};i.from.get=function(){return this.$from.pos},i.to.get=function(){return this.$to.pos},i.empty.get=function(){return this.from==this.to},o.findFrom=function(t,e,n){var o=t.parent.isTextblock?new s(t):r(t.node(0),t.parent,t.pos,t.index(),e,n);if(o)return o;for(var i=t.depth-1;i>=0;i--){var a=e<0?r(t.node(0),t.node(i),t.before(i+1),t.index(i),e,n):r(t.node(0),t.node(i),t.after(i+1),t.index(i)+1,e,n);if(a)return a}},o.near=function(t,e,n){void 0===e&&(e=1),void 0===n&&(n=!1);var r=this.findFrom(t,e,n)||this.findFrom(t,-e,n);if(!r)throw new RangeError("Searching for selection in invalid document "+t.node(0));return r},o.atStart=function(t,e){return r(t,t,0,0,1,e)},o.atEnd=function(t,e){return r(t,t,t.content.size,t.childCount,-1,e)},o.between=function(t,e,n){var r=o.near(e,n);if(r instanceof s){var i=o.findFrom(t,t.pos>r.to?-1:1,!0);r=new s(i.$anchor,r.$head)}else if(t.pos<r.from||t.pos>r.to){var a=t.pos>r.to,c=o.findFrom(t,a?-1:1,!0),l=o.findFrom(a?r.$from:r.$to,a?1:-1,!0);c&&l&&(r=new s(c.$anchor,l.$head))}return r},o.mapJSON=function(t,e){return null!=t.anchor?{head:e.map(t.head),anchor:e.map(t.anchor)}:{node:e.map(t.node),after:e.map(t.after,-1)}},o.fromJSON=function(t,e){if(null!=e.head){var n=t.resolve(e.anchor),r=t.resolve(e.head);return n.parent.isTextblock&&r.parent.isTextblock?new s(n,r):o.between(n,r)}var i=t.resolve(e.node),c=i.nodeAfter;return c&&e.after==e.pos+c.nodeSize&&a.isSelectable(c)?new a(i):o.near(i)},Object.defineProperties(o.prototype,i),e.Selection=o;var s=function(t){function e(e,n){void 0===n&&(n=e);var r=e.pos>n.pos;t.call(this,r?n:e,r?e:n),this.$anchor=e,this.$head=n}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={anchor:{},head:{},inverted:{}};return n.anchor.get=function(){return this.$anchor.pos},n.head.get=function(){return this.$head.pos},n.inverted.get=function(){return this.anchor>this.head},e.prototype.eq=function(t){return t instanceof e&&t.head==this.head&&t.anchor==this.anchor},e.prototype.map=function(n,r){var o=n.resolve(r.map(this.head));if(!o.parent.isTextblock)return t.near(o);var i=n.resolve(r.map(this.anchor));return new e(i.parent.isTextblock?i:o,o)},e.prototype.toJSON=function(){return{head:this.head,anchor:this.anchor}},e.create=function(t,e,n){void 0===n&&(n=e);var r=t.resolve(e);return new this(r,n==e?r:t.resolve(n))},Object.defineProperties(e.prototype,n),e}(o);e.TextSelection=s;var a=function(t){function e(e){var n=e.node(0).resolve(e.pos+e.nodeAfter.nodeSize);t.call(this,e,n),this.node=e.nodeAfter}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.eq=function(t){return t instanceof e&&this.from==t.from},e.prototype.map=function(n,r){var o=r.mapResult(this.from,1),i=r.mapResult(this.to,-1),s=n.resolve(o.pos),a=s.nodeAfter;return!o.deleted&&!i.deleted&&a&&i.pos==o.pos+a.nodeSize&&e.isSelectable(a)?new e(s):t.near(s)},e.prototype.toJSON=function(){return{node:this.from,after:this.to}},e.create=function(t,e){return new this(t.resolve(e))},e.isSelectable=function(t){return!t.isText&&!1!==t.type.spec.selectable},e}(o);return e.NodeSelection=a,n.exports}),t.registerDynamic("30",["9","3","2f"],!0,function(t,e,n){function r(t,e,n){if(t.steps.length!=e){var r,o=t.mapping.maps[t.mapping.maps.length-1];o.forEach(function(t,e,n,o){return r=o}),null!=r&&t.setSelection(p.near(t.doc.resolve(r),n))}}function o(t){return null==t.head?c.none:t.$head.marks()}var i=t("9"),s=i.Transform,a=t("3"),c=a.Mark,l=t("2f"),p=l.Selection,u=1,f=2,h=4,d=function(t){function e(e){t.call(this,e.doc),this.time=Date.now(),this.curSelection=e.selection,this.curSelectionFor=0,this.storedMarks=e.storedMarks,this.updated=0,this.meta=Object.create(null)}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={docChanged:{},selection:{},selectionSet:{},storedMarksSet:{},isGeneric:{},scrolledIntoView:{}};return n.docChanged.get=function(){return this.steps.length>0},n.selection.get=function(){return this.curSelectionFor<this.steps.length&&(this.curSelection=this.curSelection.map(this.doc,this.mapping.slice(this.curSelectionFor)),this.curSelectionFor=this.steps.length),this.curSelection},e.prototype.setSelection=function(t){return this.curSelection=t,this.curSelectionFor=this.steps.length,this.updated=(this.updated|u)&~f,this.storedMarks=null,this},n.selectionSet.get=function(){return(this.updated&u)>0},e.prototype.setStoredMarks=function(t){return this.storedMarks=t,this.updated|=f,this},n.storedMarksSet.get=function(){return(this.updated&f)>0},e.prototype.addStep=function(e,n){t.prototype.addStep.call(this,e,n),this.updated=this.updated&~f,this.storedMarks=null},e.prototype.setTime=function(t){return this.time=t,this},e.prototype.replaceSelection=function(t){var e=this.selection,n=e.from,o=e.to,i=this.steps.length;this.replaceRange(n,o,t);for(var s=t.content.lastChild,a=null,c=0;c<t.openRight;c++)a=s,s=s.lastChild;return r(this,i,(s?s.isInline:a&&a.isTextblock)?-1:1),this},e.prototype.replaceSelectionWith=function(t,e){var n=this.selection,o=n.$from,i=n.from,s=n.to,a=this.steps.length;return!1!==e&&(t=t.mark(this.storedMarks||o.marks(s>i))),this.replaceRangeWith(i,s,t),r(this,a,t.isInline?-1:1),this},e.prototype.deleteSelection=function(){var t=this.selection,e=t.from,n=t.to;return this.deleteRange(e,n)},e.prototype.insertText=function(t,e,n){void 0===n&&(n=e);var r=this.doc.type.schema;if(null==e)return t?this.replaceSelectionWith(r.text(t),!0):this.deleteSelection();if(!t)return this.deleteRange(e,n);var o=r.text(t,this.storedMarks||this.doc.resolve(e).marks(n>e));return this.replaceRangeWith(e,n,o)},e.prototype.setMeta=function(t,e){return this.meta["string"==typeof t?t:t.key]=e,this},e.prototype.getMeta=function(t){return this.meta["string"==typeof t?t:t.key]},n.isGeneric.get=function(){var t=this;for(var e in t.meta)return!1;return!0},e.prototype.scrollIntoView=function(){return this.updated|=h,this},n.scrolledIntoView.get=function(){return(this.updated&h)>0},e.prototype.addStoredMark=function(t){return this.storedMarks=t.addToSet(this.storedMarks||o(this.selection)),this},e.prototype.removeStoredMark=function(t){return this.storedMarks=t.removeFromSet(this.storedMarks||o(this.selection)),this},Object.defineProperties(e.prototype,n),e}(s);return e.Transaction=d,n.exports}),t.registerDynamic("31",["3","2f","30"],!0,function(t,e,n){function r(t,e){return e&&t?t.bind(e):t}var o=t("3"),i=o.Node,s=t("2f"),a=s.Selection,c=t("30"),l=c.Transaction,p=function(t,e,n){this.name=t,this.init=r(e.init,n),this.apply=r(e.apply,n)},u=[new p("doc",{init:function(t){return t.doc||t.schema.nodes.doc.createAndFill()},apply:function(t){return t.doc}}),new p("selection",{init:function(t,e){return t.selection||a.atStart(e.doc)},apply:function(t){return t.selection}}),new p("storedMarks",{init:function(){return null},apply:function(t,e,n,r){return r.selection.empty?t.storedMarks:null}}),new p("scrollToSelection",{init:function(){return 0},apply:function(t,e){return t.scrolledIntoView?e+1:e}})],f=function(t,e){var n=this;this.schema=t,this.fields=u.concat(),this.plugins=[],this.pluginsByKey=Object.create(null),e&&e.forEach(function(t){if(n.pluginsByKey[t.key])throw new RangeError("Adding different instances of a keyed plugin ("+t.key+")");n.plugins.push(t),n.pluginsByKey[t.key]=t,t.options.state&&n.fields.push(new p(t.key,t.options.state,t))})},h=function(t){this.config=t},d={schema:{},plugins:{},tr:{}};d.schema.get=function(){return this.config.schema},d.plugins.get=function(){return this.config.plugins},h.prototype.apply=function(t){return this.applyTransaction(t).state},h.prototype.filterTransaction=function(t,e){var n=this;void 0===e&&(e=-1);for(var r=0;r<this.config.plugins.length;r++)if(r!=e){var o=n.config.plugins[r];if(o.options.filterTransaction&&!o.options.filterTransaction.call(o,t,n))return!1}return!0},h.prototype.applyTransaction=function(t){var e=this;if(!this.filterTransaction(t))return{state:this,transactions:[]};for(var n=[t],r=this.applyInner(t),o=null;;){for(var i=!1,s=0;s<this.config.plugins.length;s++){var a=e.config.plugins[s];if(a.options.appendTransaction){var c=o?o[s].n:0,l=o?o[s].state:e,p=c<n.length&&a.options.appendTransaction.call(a,c?n.slice(c):n,l,r);if(p&&r.filterTransaction(p,s)){if(!o){o=[];for(var u=0;u<this.config.plugins.length;u++)o.push(u<s?{state:r,n:n.length}:{state:e,n:0})}n.push(p),r=r.applyInner(p),i=!0}o&&(o[s]={state:r,n:n.length})}}if(!i)return{state:r,transactions:n}}},h.prototype.applyInner=function(t){var e=this;if(!t.before.eq(this.doc))throw new RangeError("Applying a mismatched transaction");for(var n=new h(this.config),r=this.config.fields,o=0;o<r.length;o++){var i=r[o];n[i.name]=i.apply(t,e[i.name],e,n)}for(var s=0;s<m.length;s++)m[s](e,t,n);return n},d.tr.get=function(){return new l(this)},h.create=function(t){for(var e=new f(t.schema||t.doc.type.schema,t.plugins),n=new h(e),r=0;r<e.fields.length;r++)n[e.fields[r].name]=e.fields[r].init(t,n);return n},h.prototype.reconfigure=function(t){for(var e=this,n=new f(t.schema||this.schema,t.plugins),r=n.fields,o=new h(n),i=0;i<r.length;i++){var s=r[i].name;o[s]=e.hasOwnProperty(s)?e[s]:r[i].init(t,o)}return o},h.prototype.toJSON=function(t){var e=this,n={doc:this.doc.toJSON(),selection:this.selection.toJSON()};if(t)for(var r in t){if("doc"==r||"selection"==r)throw new RangeError("The JSON fields `doc` and `selection` are reserved");var o=t[r],i=o.options.state;i&&i.toJSON&&(n[r]=i.toJSON.call(o,e[o.key]))}return n},h.fromJSON=function(t,e,n){if(!t.schema)throw new RangeError("Required config field 'schema' missing");var r=new f(t.schema,t.plugins),o=new h(r);return r.fields.forEach(function(r){if("doc"==r.name)o.doc=i.fromJSON(t.schema,e.doc);else if("selection"==r.name)o.selection=a.fromJSON(o.doc,e.selection);else{if(n)for(var s in n){var c=n[s],l=c.options.state;if(c.key==r.name&&l&&l.fromJSON&&Object.prototype.hasOwnProperty.call(e,s))return void(o[r.name]=l.fromJSON.call(c,t,e[s],o))}o[r.name]=r.init(t,o)}}),o},h.addApplyListener=function(t){m.push(t)},h.removeApplyListener=function(t){var e=m.indexOf(t);e>-1&&m.splice(e,1)},Object.defineProperties(h.prototype,d),e.EditorState=h;var m=[];return n.exports}),t.registerDynamic("32",[],!0,function(t,e,n){function r(t){return t in i?t+"$"+ ++i[t]:(i[t]=0,t+"$")}var o=function(t){var e=this;if(this.props={},t.props)for(var n in t.props){var o=t.props[n];o instanceof Function&&(o=o.bind(e)),e.props[n]=o}this.options=t,this.key=t.key?t.key.key:r("plugin")};o.prototype.getState=function(t){return t[this.key]},e.Plugin=o;var i=Object.create(null),s=function(t){void 0===t&&(t="key"),this.key=r(t)};return s.prototype.get=function(t){return t.config.pluginsByKey[this.key]},s.prototype.getState=function(t){return t[this.key]},e.PluginKey=s,n.exports}),t.registerDynamic("33",["2f","30","31","32"],!0,function(t,e,n){var r;r=t("2f"),e.Selection=r.Selection,e.TextSelection=r.TextSelection,e.NodeSelection=r.NodeSelection,e.Transaction=t("30").Transaction,e.EditorState=t("31").EditorState;var o;return o=t("32"),e.Plugin=o.Plugin,e.PluginKey=o.PluginKey,n.exports}),t.registerDynamic("7",["33"],!0,function(t,e,n){return n.exports=t("33"),n.exports}),t.registerDynamic("34",["2e","9","7"],!0,function(t,e,n){function r(t,e){var n;return t.forEach(function(t,r){if(t.selection&&0==e--)return n=r,!1}),t.slice(n)}function o(t,e,n,r){var o,s=n.getMeta(M);if(s)return s;if(0==n.steps.length)return n.getMeta(C)?new k(t.done,t.undone,null,0):t;if(!1!==n.getMeta("addToHistory")){var a=t.prevTime<(n.time||0)-r.newGroupDelay||!i(n,t.prevMap,t.done);return new k(t.done.addTransform(n,a?e.toJSON():null,r),x.empty,n.mapping.maps[n.steps.length-1],n.time)}return(o=n.getMeta("rebased"))?new k(t.done.rebased(n,o),t.undone.rebased(n,o),t.prevMap&&n.mapping.maps[n.steps.length-1],t.prevTime):new k(t.done.addMaps(n.mapping.maps),t.undone.addMaps(n.mapping.maps),t.prevMap,t.prevTime)}function i(t,e,n){if(!e)return!1;var r=t.mapping.maps[0],o=!1;return!r||(r.forEach(function(t,r){n.items.forEach(function(n){if(n.step)return e.forEach(function(e,n,i,s){t<=s&&r>=i&&(o=!0)}),!1;t=n.map.invert().map(t,-1),r=n.map.invert().map(r,1)},n.items.length,0)}),o)}function s(t,e,n,r){var o=M.get(e).options.config,i=(r?t.undone:t.done).popEvent(e,o.preserveItems);if(i){var s=e.selection,a=g.fromJSON(i.transform.doc,i.selection),c=(r?t.done:t.undone).addTransform(i.transform,s.toJSON(),o),l=new k(r?c:i.remaining,r?i.remaining:c,null,0);n(i.transform.setSelection(a).setMeta(M,l).scrollIntoView())}}function a(t){return t.tr.setMeta(C,!0)}function c(t){return t={depth:t&&t.depth||100,preserveItems:!(!t||!t.preserveItems),newGroupDelay:t&&t.newGroupDelay||500},new y({key:M,state:{init:function(){return new k(x.empty,x.empty,null,0)},apply:function(e,n,r){return o(n,r.selection,e,t)}},config:t})}function l(t,e){var n=M.getState(t);return!(!n||0==n.done.eventCount)&&(e&&s(n,t,e,!1),!0)}function p(t,e){var n=M.getState(t);return!(!n||0==n.undone.eventCount)&&(e&&s(n,t,e,!0),!0)}function u(t){var e=M.getState(t);return e?e.done.eventCount:0}function f(t){var e=M.getState(t);return e?e.undone.eventCount:0}var h=t("2e"),d=t("9"),m=d.Mapping,v=t("7"),g=v.Selection,y=v.Plugin,w=v.PluginKey,x=function(t,e){this.items=t,this.eventCount=e}
;x.prototype.popEvent=function(t,e){var n=this;if(0==this.eventCount)return null;for(var r=this.items.length;;r--)if(n.items.get(r-1).selection){--r;break}var o,i;e&&(o=this.remapping(r,this.items.length),i=o.maps.length);var s,a,c=t.tr,l=[],p=[];return this.items.forEach(function(t,e){if(!t.step)return o||(o=n.remapping(r,e+1),i=o.maps.length),i--,void p.push(t);if(o){p.push(new b(t.map));var u,f=t.step.map(o.slice(i));f&&c.maybeStep(f).doc&&(u=c.mapping.maps[c.mapping.maps.length-1],l.push(new b(u,null,null,l.length+p.length))),i--,u&&o.appendMap(u,i)}else c.maybeStep(t.step);return t.selection?(s=o?g.mapJSON(t.selection,o.slice(i)):t.selection,a=new x(n.items.slice(0,r).append(p.reverse().concat(l)),n.eventCount-1),!1):void 0},this.items.length,0),{remaining:a,transform:c,selection:s}},x.prototype.addTransform=function(t,e,n){for(var o=[],i=this.eventCount+(e?1:0),s=this.items,a=!n.preserveItems&&s.length?s.get(s.length-1):null,c=0;c<t.steps.length;c++){var l=t.steps[c].invert(t.docs[c]),p=new b(t.mapping.maps[c],l,e),u=void 0;(u=a&&a.merge(p))&&(p=u,c?o.pop():s=s.slice(0,s.length-1)),o.push(p),e=null,n.preserveItems||(a=p)}var f=i-n.depth;return f>S&&(s=r(s,f),i-=f),new x(s.append(o),i)},x.prototype.remapping=function(t,e){var n=[],r=[];return this.items.forEach(function(e,o){null!=e.mirrorOffset&&o-e.mirrorOffset>=t&&r.push(n.length-e.mirrorOffset,n.length),n.push(e.map)},t,e),new m(n,r)},x.prototype.addMaps=function(t){return 0==this.eventCount?this:new x(this.items.append(t.map(function(t){return new b(t)})),this.eventCount)},x.prototype.rebased=function(t,e){if(!this.eventCount)return this;var n=[],r=this.items.length-e,o=0;r<0&&(o=-r,r=0);var i=t.mapping,s=t.steps.length,a=this.eventCount,c=o;this.items.forEach(function(e){var r=i.getMirror(c++);if(null!=r){s=Math.min(s,r);var o=i.maps[r];if(e.step){var l=t.steps[r].invert(t.docs[r]),p=e.selection&&g.mapJSON(e.selection,i.slice(c-1,r));n.push(new b(o,l,p))}else e.selection&&a--,n.push(new b(o))}},r);for(var l=[],p=e;p<s;p++)l.push(new b(i.maps[p]));var u=this.items.slice(0,r).append(l).append(n),f=new x(u,a);return f.emptyItemCount()>500&&(f=f.compress(this.items.length-n.length)),f},x.prototype.emptyItemCount=function(){var t=0;return this.items.forEach(function(e){e.step||t++}),t},x.prototype.compress=function(t){void 0===t&&(t=this.items.length);var e=this.remapping(0,t),n=e.maps.length,r=[],o=0;return this.items.forEach(function(i,s){if(s>=t)r.push(i),i.selection&&o++;else if(i.step){var a=i.step.map(e.slice(n)),c=a&&a.getMap();if(n--,c&&e.appendMap(c,n),a){var l=i.selection&&g.mapJSON(i.selection,e.slice(n));l&&o++;var p,u=new b(c.invert(),a,l),f=r.length-1;(p=r.length&&r[f].merge(u))?r[f]=p:r.push(u)}}else i.map&&n--},this.items.length,0),new x(h.from(r.reverse()),o)},x.empty=new x(h.empty,0);var b=function(t,e,n,r){this.map=t,this.step=e,this.selection=n,this.mirrorOffset=r};b.prototype.merge=function(t){if(this.step&&t.step&&!t.selection){var e=t.step.merge(this.step);if(e)return new b(e.getMap().invert(),e,this.selection)}};var k=function(t,e,n,r){this.done=t,this.undone=e,this.prevMap=n,this.prevTime=r};e.HistoryState=k;var S=20;e.closeHistory=a;var M=new w("history"),C=new w("closeHistory");return e.history=c,e.undo=l,e.redo=p,e.undoDepth=u,e.redoDepth=f,n.exports}),t.registerDynamic("23",["34"],!0,function(t,e,n){return n.exports=t("34"),n.exports}),t.registerDynamic("35",["22","29","2a","23"],!0,function(t,e,n){function r(t,e){function n(t,n){if(e){var r=e[t];if(!1===r)return;r&&(t=r)}o[t]=n}var r,o={};if(n("Mod-z",w),n("Shift-Mod-z",x),b||n("Mod-y",x),(r=t.marks.strong)&&n("Mod-b",c(r)),(r=t.marks.em)&&n("Mod-i",c(r)),(r=t.marks.code)&&n("Mod-`",c(r)),(r=t.nodes.bullet_list)&&n("Shift-Ctrl-8",d(r)),(r=t.nodes.ordered_list)&&n("Shift-Ctrl-9",d(r)),(r=t.nodes.blockquote)&&n("Ctrl->",i(r)),r=t.nodes.hard_break){var p=r,h=a(l,function(t,e){return e(t.tr.replaceSelectionWith(p.create()).scrollIntoView()),!0});n("Mod-Enter",h),n("Shift-Enter",h),b&&n("Ctrl-Enter",h)}if((r=t.nodes.list_item)&&(n("Enter",m(r)),n("Mod-[",v(r)),n("Mod-]",g(r))),(r=t.nodes.paragraph)&&n("Shift-Ctrl-0",s(r)),(r=t.nodes.code_block)&&n("Shift-Ctrl-\\",s(r)),r=t.nodes.heading)for(var y=1;y<=6;y++)n("Shift-Ctrl-"+y,s(r,{level:y}));if(r=t.nodes.horizontal_rule){var k=r;n("Mod-_",function(t,e){return e(t.tr.replaceSelectionWith(k.create()).scrollIntoView()),!0})}return t.nodes.table_row&&(n("Tab",u),n("Shift-Tab",f)),o}var o=t("22"),i=o.wrapIn,s=o.setBlockType,a=o.chainCommands,c=o.toggleMark,l=o.exitCode,p=t("29"),u=p.selectNextCell,f=p.selectPreviousCell,h=t("2a"),d=h.wrapInList,m=h.splitListItem,v=h.liftListItem,g=h.sinkListItem,y=t("23"),w=y.undo,x=y.redo,b="undefined"!=typeof navigator&&/Mac/.test(navigator.platform);return e.buildKeymap=r,n.exports}),t.registerDynamic("36",["b","f","23","22","7","12","28","35"],!0,function(t,e,n){function r(t){var e=[u({rules:f.concat(o(t.schema))}),d(D(t.schema,t.mapKeys)),d(y),k()];return!1!==t.history&&e.push(v()),e.concat(new x({props:{attributes:{"class":"ProseMirror-example-setup-style"},menuContent:M(t.schema).fullMenu,floatingMenu:!0}}))}function o(t){var e,n=[];return(e=t.nodes.blockquote)&&n.push(s(e)),(e=t.nodes.ordered_list)&&n.push(a(e)),(e=t.nodes.bullet_list)&&n.push(c(e)),(e=t.nodes.code_block)&&n.push(l(e)),(e=t.nodes.heading)&&n.push(p(e,6)),n}var i=t("b"),s=i.blockQuoteRule,a=i.orderedListRule,c=i.bulletListRule,l=i.codeBlockRule,p=i.headingRule,u=i.inputRules,f=i.allInputRules,h=t("f"),d=h.keymap,m=t("23"),v=m.history,g=t("22"),y=g.baseKeymap,w=t("7"),x=w.Plugin,b=t("12"),k=b.dropCursor,S=t("28"),M=S.buildMenuItems;e.buildMenuItems=M;var C=t("35"),D=C.buildKeymap;return e.buildKeymap=D,e.exampleSetup=r,e.buildInputRules=o,n.exports}),t.registerDynamic("37",["36"],!0,function(t,e,n){return n.exports=t("36"),n.exports}),t.registerDynamic("38",["3","39"],!0,function(t,e,n){function r(t,e,n){for(var o=[],s=0;s<t.childCount;s++){var a=t.child(s);a.content.size&&(a=a.copy(r(a.content,e,a))),a.isInline&&(a=e(a,n,s)),o.push(a)}return i.fromArray(o)}var o=t("3"),i=o.Fragment,s=o.Slice,a=t("39"),c=a.Step,l=a.StepResult,p=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=t.resolve(this.from),i=o.node(o.sharedDepth(this.to)),a=new s(r(n.content,function(t,n,r){return n.contentMatchAt(r+1).allowsMark(e.mark.type)?t.mark(e.mark.addToSet(t.marks)):t},i),n.openLeft,n.openRight);return l.fromReplace(t,this.from,this.to,a)},e.prototype.invert=function(){return new u(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.fromJSON=function(t,n){return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(c);e.AddMarkStep=p,c.jsonID("addMark",p);var u=function(t){function e(e,n,r){t.call(this),this.from=e,this.to=n,this.mark=r}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){var e=this,n=t.slice(this.from,this.to),o=new s(r(n.content,function(t){return t.mark(e.mark.removeFromSet(t.marks))}),n.openLeft,n.openRight);return l.fromReplace(t,this.from,this.to,o)},e.prototype.invert=function(){return new p(this.from,this.to,this.mark)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted||n.pos>=r.pos?null:new e(n.pos,r.pos,this.mark)},e.prototype.merge=function(t){if(t instanceof e&&t.mark.eq(this.mark)&&this.from<=t.to&&this.to>=t.from)return new e(Math.min(this.from,t.from),Math.max(this.to,t.to),this.mark)},e.fromJSON=function(t,n){return new e(n.from,n.to,t.markFromJSON(n.mark))},e}(c);return e.RemoveMarkStep=u,c.jsonID("removeMark",u),n.exports}),t.registerDynamic("3a",["3","3b","38","3c"],!0,function(t,e,n){var r=t("3"),o=r.MarkType,i=r.Slice,s=r.Fragment,a=t("3b"),c=a.Transform,l=t("38"),p=l.AddMarkStep,u=l.RemoveMarkStep,f=t("3c"),h=f.ReplaceStep;return c.prototype.addMark=function(t,e,n){var r=this,o=[],i=[],s=null,a=null;return this.doc.nodesBetween(t,e,function(r,c,l,f){if(r.isInline){var h=r.marks;if(n.isInSet(h)||!l.contentMatchAt(f+1).allowsMark(n.type))a=s=null;else{var d=Math.max(c,t),m=Math.min(c+r.nodeSize,e),v=n.type.isInSet(h);v?s&&s.mark.eq(v)?s.to=m:o.push(s=new u(d,m,v)):s=null,a?a.to=m:i.push(a=new p(d,m,n))}}}),o.forEach(function(t){return r.step(t)}),i.forEach(function(t){return r.step(t)}),this},c.prototype.removeMark=function(t,e,n){var r=this;void 0===n&&(n=null);var i=[],s=0;return this.doc.nodesBetween(t,e,function(r,a){if(r.isInline){s++;var c=null;if(n instanceof o){var l=n.isInSet(r.marks);l&&(c=[l])}else n?n.isInSet(r.marks)&&(c=[n]):c=r.marks;if(c&&c.length)for(var p=Math.min(a+r.nodeSize,e),u=0;u<c.length;u++){for(var f=c[u],h=void 0,d=0;d<i.length;d++){var m=i[d];m.step==s-1&&f.eq(i[d].style)&&(h=m)}h?(h.to=p,h.step=s):i.push({style:f,from:Math.max(a,t),to:p,step:s})}}}),i.forEach(function(t){return r.step(new u(t.from,t.to,t.style))}),this},c.prototype.clearMarkup=function(t,e){var n=this,r=[];this.doc.nodesBetween(t,e,function(o,s){if(o.isInline){if(!o.type.isText)return void r.push(new h(s,s+o.nodeSize,i.empty));for(var a=0;a<o.marks.length;a++)n.step(new u(Math.max(s,t),Math.min(s+o.nodeSize,e),o.marks[a]))}});for(var o=r.length-1;o>=0;o--)n.step(r[o]);return this},c.prototype.clearNonMatching=function(t,e){for(var n=this,r=this.doc.nodeAt(t),o=[],a=t+1,c=0;c<r.childCount;c++){var l=r.child(c),p=a+l.nodeSize,f=e.matchType(l.type,l.attrs);if(f){e=f;for(var d=0;d<l.marks.length;d++)e.allowsMark(l.marks[d])||n.step(new u(a,p,l.marks[d]))}else o.push(new h(a,p,i.empty));a=p}if(!e.validEnd()){var m=e.fillBefore(s.empty,!0);this.replace(a,a,new i(m,0,0))}for(var v=o.length-1;v>=0;v--)n.step(o[v]);return this},n.exports}),t.registerDynamic("3b",["3d"],!0,function(t,e,n){var r=t("3d"),o=r.Mapping,i=function(t){function e(){t.apply(this,arguments)}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);e.TransformError=i;var s=function(t){this.doc=t,this.steps=[],this.docs=[],this.mapping=new o},a={before:{}};return a.before.get=function(){return this.docs.length?this.docs[0]:this.doc},s.prototype.step=function(t){var e=this.maybeStep(t);if(e.failed)throw new i(e.failed);return this},s.prototype.maybeStep=function(t){var e=t.apply(this.doc);return e.failed||this.addStep(t,e.doc),e},s.prototype.addStep=function(t,e){this.docs.push(this.doc),this.steps.push(t),this.mapping.appendMap(t.getMap()),this.doc=e},Object.defineProperties(s.prototype,a),e.Transform=s,n.exports}),t.registerDynamic("39",["3","3d"],!0,function(t,e,n){function r(){throw new Error("Override me")}var o=t("3"),i=o.ReplaceError,s=t("3d"),a=s.StepMap,c=Object.create(null),l=function(){};l.prototype.apply=function(){return r()},l.prototype.getMap=function(){return a.empty},l.prototype.invert=function(){return r()},l.prototype.map=function(){return r()},l.prototype.merge=function(){return null},l.prototype.toJSON=function(){var t=this,e={stepType:this.jsonID};for(var n in t)if(t.hasOwnProperty(n)){var r=t[n];e[n]=r&&r.toJSON?r.toJSON():r}return e},l.fromJSON=function(t,e){return c[e.stepType].fromJSON(t,e)},l.jsonID=function(t,e){if(t in c)throw new RangeError("Duplicate use of step JSON ID "+t);return c[t]=e,e.prototype.jsonID=t,e},e.Step=l;var p=function(t,e){this.doc=t,this.failed=e};return p.ok=function(t){return new p(t,null)},p.fail=function(t){return new p(null,t)},p.fromReplace=function(t,e,n,r){try{return p.ok(t.replace(e,n,r))}catch(t){if(t instanceof i)return p.fail(t.message);throw t}},e.StepResult=p,n.exports}),t.registerDynamic("3d",[],!0,function(t,e,n){function r(t,e){return t+e*a}function o(t){return t&s}function i(t){return(t-(t&s))/a}var s=65535,a=Math.pow(2,16),c=function(t,e,n){void 0===e&&(e=!1),void 0===n&&(n=null),this.pos=t,this.deleted=e,this.recover=n};e.MapResult=c;var l=function(t,e){void 0===e&&(e=!1),this.ranges=t,this.inverted=e};l.prototype.recover=function(t){var e=this,n=0,r=o(t);if(!this.inverted)for(var s=0;s<r;s++)n+=e.ranges[3*s+2]-e.ranges[3*s+1];return this.ranges[3*r]+n+i(t)},l.prototype.mapResult=function(t,e){return this._map(t,e,!1)},l.prototype.map=function(t,e){return this._map(t,e,!0)},l.prototype._map=function(t,e,n){for(var o=this,i=0,s=this.inverted?2:1,a=this.inverted?1:2,l=0;l<this.ranges.length;l+=3){var p=o.ranges[l]-(o.inverted?i:0);if(p>t)break;var u=o.ranges[l+s],f=o.ranges[l+a],h=p+u;if(t<=h){var d=u?t==p?-1:t==h?1:e:e,m=p+i+(d<0?0:f);if(n)return m;var v=r(l/3,t-p);return new c(m,e<0?t!=p:t!=h,v)}i+=f-u}return n?t+i:new c(t+i)},l.prototype.touches=function(t,e){for(var n=this,r=0,i=o(e),s=this.inverted?2:1,a=this.inverted?1:2,c=0;c<this.ranges.length;c+=3){var l=n.ranges[c]-(n.inverted?r:0);if(l>t)break;var p=n.ranges[c+s];if(t<=l+p&&c==3*i)return!0;r+=n.ranges[c+a]-p}return!1},l.prototype.forEach=function(t){for(var e=this,n=this.inverted?2:1,r=this.inverted?1:2,o=0,i=0;o<this.ranges.length;o+=3){var s=e.ranges[o],a=s-(e.inverted?i:0),c=s+(e.inverted?0:i),l=e.ranges[o+n],p=e.ranges[o+r];t(a,a+l,c,c+p),i+=p-l}},l.prototype.invert=function(){return new l(this.ranges,!this.inverted)},l.prototype.toString=function(){return(this.inverted?"-":"")+JSON.stringify(this.ranges)},e.StepMap=l,l.empty=new l([]);var p=function(t,e,n,r){this.maps=t||[],this.from=n||0,this.to=null==r?this.maps.length:r,this.mirror=e};return p.prototype.slice=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.maps.length),new p(this.maps,this.mirror,t,e)},p.prototype.copy=function(){return new p(this.maps.slice(),this.mirror&&this.mirror.slice(),this.from,this.to)},p.prototype.getMirror=function(t){var e=this;if(this.mirror)for(var n=0;n<this.mirror.length;n++)if(e.mirror[n]==t)return e.mirror[n+(n%2?-1:1)]},p.prototype.setMirror=function(t,e){this.mirror||(this.mirror=[]),this.mirror.push(t,e)},p.prototype.appendMap=function(t,e){this.to=this.maps.push(t),null!=e&&this.setMirror(this.maps.length-1,e)},p.prototype.appendMapping=function(t){for(var e=this,n=0,r=this.maps.length;n<t.maps.length;n++){var o=t.getMirror(n);e.appendMap(t.maps[n],null!=o&&o<n?r+o:null)}},p.prototype.map=function(t,e){var n=this;if(this.mirror)return this._map(t,e,!0);for(var r=this.from;r<this.to;r++)t=n.maps[r].map(t,e);return t},p.prototype.mapResult=function(t,e){return this._map(t,e,!1)},p.prototype._map=function(t,e,n){for(var r=this,o=!1,i=null,s=this.from;s<this.to;s++){var a=r.maps[s],l=i&&i[s];if(null!=l&&a.touches(t,l))t=a.recover(l);else{var p=a.mapResult(t,e);if(null!=p.recover){var u=r.getMirror(s);if(null!=u&&u>s&&u<r.to){if(p.deleted){s=u,t=r.maps[u].recover(p.recover);continue}(i||(i=Object.create(null)))[u]=p.recover}}p.deleted&&(o=!0),t=p.pos}}return n?t:new c(t,o)},e.Mapping=p,n.exports}),t.registerDynamic("3c",["3","39","3d"],!0,function(t,e,n){function r(t,e,n){for(var r=t.resolve(e),o=n-e,i=r.depth;o>0&&i>0&&r.indexAfter(i)==r.node(i).childCount;)i--,o--;if(o>0)for(var s=r.node(i).maybeChild(r.indexAfter(i));o>0;){if(!s||s.isLeaf)return!0;s=s.firstChild,o--}return!1}var o=t("3"),i=o.Slice,s=t("39"),a=s.Step,c=s.StepResult,l=t("3d"),p=l.StepMap,u=function(t){function e(e,n,r,o){t.call(this),this.from=e,this.to=n,this.slice=r,this.structure=!!o}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){return this.structure&&r(t,this.from,this.to)?c.fail("Structure replace would overwrite content"):c.fromReplace(t,this.from,this.to,this.slice)},e.prototype.getMap=function(){return new p([this.from,this.to-this.from,this.slice.size])},e.prototype.invert=function(t){return new e(this.from,this.from+this.slice.size,t.slice(this.from,this.to))},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1);return n.deleted&&r.deleted?null:new e(n.pos,Math.max(n.pos,r.pos),this.slice)},e.prototype.merge=function(t){if(!(t instanceof e)||t.structure!=this.structure)return null;if(this.from+this.slice.size!=t.from||this.slice.openRight||t.slice.openLeft){if(t.to!=this.from||this.slice.openLeft||t.slice.openRight)return null;var n=this.slice.size+t.slice.size==0?i.empty:new i(t.slice.content.append(this.slice.content),t.slice.openLeft,this.slice.openRight);return new e(t.from,this.to,n,this.structure)}var r=this.slice.size+t.slice.size==0?i.empty:new i(this.slice.content.append(t.slice.content),this.slice.openLeft,t.slice.openRight);return new e(this.from,this.to+(t.to-t.from),r,this.structure)},e.prototype.toJSON=function(){var t={stepType:"replace",from:this.from,to:this.to};return this.slice.size&&(t.slice=this.slice.toJSON()),this.structure&&(t.structure=!0),t},e.fromJSON=function(t,n){return new e(n.from,n.to,i.fromJSON(t,n.slice),!!n.structure)},e}(a);e.ReplaceStep=u,a.jsonID("replace",u);var f=function(t){function e(e,n,r,o,i,s,a){t.call(this),this.from=e,this.to=n,this.gapFrom=r,this.gapTo=o,this.slice=i,this.insert=s,this.structure=!!a}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e.prototype.apply=function(t){if(this.structure&&(r(t,this.from,this.gapFrom)||r(t,this.gapTo,this.to)))return c.fail("Structure gap-replace would overwrite content");var e=t.slice(this.gapFrom,this.gapTo);if(e.openLeft||e.openRight)return c.fail("Gap is not a flat range");var n=this.slice.insertAt(this.insert,e.content);return n?c.fromReplace(t,this.from,this.to,n):c.fail("Content does not fit in gap")},e.prototype.getMap=function(){return new p([this.from,this.gapFrom-this.from,this.insert,this.gapTo,this.to-this.gapTo,this.slice.size-this.insert])},e.prototype.invert=function(t){var n=this.gapTo-this.gapFrom;return new e(this.from,this.from+this.slice.size+n,this.from+this.insert,this.from+this.insert+n,t.slice(this.from,this.to).removeBetween(this.gapFrom-this.from,this.gapTo-this.from),this.gapFrom-this.from,this.structure)},e.prototype.map=function(t){var n=t.mapResult(this.from,1),r=t.mapResult(this.to,-1),o=t.map(this.gapFrom,-1),i=t.map(this.gapTo,1);return n.deleted&&r.deleted||o<n.pos||i>r.pos?null:new e(n.pos,r.pos,o,i,this.slice,this.insert,this.structure)},e.toJSON=function(){var t={stepType:"replaceAround",from:this.from,to:this.to,gapFrom:this.gapFrom,gapTo:this.gapTo,slice:this.slice.toJSON()};return this.structure&&(t.structure=!0),!0},e.fromJSON=function(t,n){return new e(n.from,n.to,n.gapFrom,n.gapTo,i.fromJSON(t,n.slice),n.insert,!!n.structure)},e}(a);return e.ReplaceAroundStep=f,a.jsonID("replaceAround",f),n.exports}),t.registerDynamic("3e",["3","3b","3c"],!0,function(t,e,n){function r(t,e,n){return(0==e||t.canReplace(e,t.childCount))&&(n==t.childCount||t.canReplace(0,n))}function o(t){for(var e=t.parent,n=e.content.cutByIndex(t.startIndex,t.endIndex),o=t.depth;;--o){var i=t.$from.node(o),s=t.$from.index(o),a=t.$to.indexAfter(o);if(o<t.depth&&i.canReplace(s,a,n))return o;if(0==o||!r(i,s,a))break}}function i(t,e,n,r){void 0===r&&(r=t);var o={type:e,attrs:n},i=s(t,o),c=i&&a(r,o);return c?i.concat(o).concat(c):null}function s(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.contentMatchAt(r).findWrapping(e.type,e.attrs);if(!i)return null;var s=i.length?i[0]:e;return n.canReplaceWith(r,o,s.type,s.attrs)?i:null}function a(t,e){var n=t.parent,r=t.startIndex,o=t.endIndex,i=n.child(r),s=e.type.contentExpr.start(e.attrs).findWrappingFor(i);if(!s)return null;for(var a=s.length?s[s.length-1]:e,c=a.type.contentExpr.start(a.attrs),l=r;l<o;l++)c=c&&c.matchNode(n.child(l));return c&&c.validEnd()?s:null}function c(t,e,n,r){void 0===n&&(n=1);var o=t.resolve(e),i=o.depth-n;if(i<0||!o.parent.canReplace(o.index(),o.parent.childCount)||!o.parent.canReplace(0,o.indexAfter()))return!1;for(var s=o.depth-1,a=n-1;s>i;s--,a--){var c=o.node(s),l=o.index(s),p=r&&r[a];if(!c.canReplace(0,l)||!c.canReplaceWith(l,c.childCount,p?p.type:o.node(s+1).type,p?p.attrs:o.node(s+1).attrs))return!1}var u=o.indexAfter(i),f=r&&r[0];return o.node(i).canReplaceWith(u,u,f?f.type:o.node(i+1).type,f?f.attrs:o.node(i+1).attrs)}function l(t,e){var n=t.resolve(e),r=n.index();return p(n.nodeBefore,n.nodeAfter)&&n.parent.canReplace(r,r+1)}function p(t,e){return t&&e&&!t.isLeaf&&t.canAppend(e)}function u(t,e,n){void 0===n&&(n=-1);for(var r=t.resolve(e),o=r.depth;;o--){var i=void 0,s=void 0;if(o==r.depth?(i=r.nodeBefore,s=r.nodeAfter):n>0?(i=r.node(o+1),s=r.node(o).maybeChild(r.index(o)+1)):(i=r.node(o).maybeChild(r.index(o)-1),s=r.node(o+1)),i&&!i.isTextblock&&p(i,s))return e;if(0==o)break;e=n<0?r.before(o):r.after(o)}}function f(t,e,n,r){var o=t.resolve(e);if(o.parent.canReplaceWith(o.index(),o.index(),n,r))return e;if(0==o.parentOffset)for(var i=o.depth-1;i>=0;i--){var s=o.index(i);if(o.node(i).canReplaceWith(s,s,n,r))return o.before(i+1);if(s>0)return null}if(o.parentOffset==o.parent.content.size)for(var a=o.depth-1;a>=0;a--){var c=o.indexAfter(a);if(o.node(a).canReplaceWith(c,c,n,r))return o.after(a+1);if(c<o.node(a).childCount)return null}}var h=t("3"),d=h.Slice,m=h.Fragment,v=t("3b"),g=v.Transform,y=t("3c"),w=y.ReplaceStep,x=y.ReplaceAroundStep;return e.liftTarget=o,g.prototype.lift=function(t,e){for(var n=t.$from,r=t.$to,o=t.depth,i=n.before(o+1),s=r.after(o+1),a=i,c=s,l=m.empty,p=0,u=o,f=!1;u>e;u--)f||n.index(u)>0?(f=!0,l=m.from(n.node(u).copy(l)),p++):a--;for(var h=m.empty,v=0,g=o,y=!1;g>e;g--)y||r.after(g+1)<r.end(g)?(y=!0,h=m.from(r.node(g).copy(h)),v++):c++;return this.step(new x(a,c,i,s,new d(l.append(h),p,v),l.size-p,!0))},e.findWrapping=i,g.prototype.wrap=function(t,e){for(var n=m.empty,r=e.length-1;r>=0;r--)n=m.from(e[r].type.create(e[r].attrs,n));var o=t.start,i=t.end;return this.step(new x(o,i,o,i,new d(n,0,0),e.length,!0))},g.prototype.setBlockType=function(t,e,n,r){var o=this;if(void 0===e&&(e=t),!n.isTextblock)throw new RangeError("Type given to setBlockType should be a textblock");var i=this.steps.length;return this.doc.nodesBetween(t,e,function(t,e){if(t.isTextblock&&!t.hasMarkup(n,r)){o.clearNonMatching(o.mapping.slice(i).map(e,1),n.contentExpr.start(r));var s=o.mapping.slice(i),a=s.map(e,1),c=s.map(e+t.nodeSize,1);return o.step(new x(a,c,a+1,c-1,new d(m.from(n.create(r)),0,0),1,!0)),!1}}),this},g.prototype.setNodeType=function(t,e,n){var r=this.doc.nodeAt(t);if(!r)throw new RangeError("No node at given position");if(e||(e=r.type),r.isLeaf)return this.replaceWith(t,t+r.nodeSize,e.create(n,null,r.marks));if(!e.validContent(r.content,n))throw new RangeError("Invalid content for node type "+e.name);return this.step(new x(t,t+r.nodeSize,t+1,t+r.nodeSize-1,new d(m.from(e.create(n)),0,0),1,!0))},e.canSplit=c,g.prototype.split=function(t,e,n){void 0===e&&(e=1);for(var r=this.doc.resolve(t),o=m.empty,i=m.empty,s=r.depth,a=r.depth-e,c=e-1;s>a;s--,c--){o=m.from(r.node(s).copy(o));var l=n&&n[c];i=m.from(l?l.type.create(l.attrs,i):r.node(s).copy(i))}return this.step(new w(t,t,new d(o.append(i),e,e,!0)))},e.canJoin=l,e.joinPoint=u,g.prototype.join=function(t,e){void 0===e&&(e=1);var n=new w(t-e,t+e,d.empty,!0);return this.step(n)},e.insertPoint=f,n.exports}),t.registerDynamic("3f",["3","3c","3b","3e"],!0,function(t,e,n){function r(t,e,n,o,i){if(e<n){var s=t.firstChild;t=t.replaceChild(0,s.copy(r(s.content,e+1,n,o,s)))}return e>o&&(t=i.contentMatchAt(0).fillBefore(t).append(t)),t}function o(t,e){for(var n=[],r=0;r<t.depth;r++){var o=t.depth-r;if(t.pos-r>t.start(o))break;e.depth>=o&&e.pos+(e.depth-o)==t.end(o)&&n.push(o)}return n}function i(t,e,n,r){if(void 0===n&&(n=e),void 0===r&&(r=S.empty),e==n&&!r.size)return null;var o=t.resolve(e),i=t.resolve(n);if(h(o,i,r))return new C(e,n,r);var s=g(o,r),c=a(o,s),l=f(o,i,c);if(!l)return null;if(c.size!=l.size&&d(o,i,c)){for(var p=i.depth,u=i.after(p);p>1&&u==i.end(--p);)++u;var m=f(o,t.resolve(u),c);if(m)return new D(e,u,n,i.end(),m,c.size)}return new C(e,n,l)}function s(t,e,n,r){var o=k.empty,i=0,a=n[e];if(t.depth>e){var c=s(t,e+1,n,r||a);i=c.openRight+1,o=k.from(t.node(e+1).copy(c.content))}return a&&(o=o.append(a.content),i=a.openRight),r&&(o=o.append(t.node(e).contentMatchAt(t.indexAfter(e)).fillBefore(k.empty,!0)),i=0),{content:o,openRight:i}}function a(t,e){var n=s(t,0,e,!1),r=n.content,o=n.openRight;return new S(r,t.depth,o||0)}function c(t,e,n,r,o,i,s){var a,u=t.childCount,f=u-(s>0?1:0);a=i<0?e.contentMatchAt(f):1==u&&s>0?n.node(o).contentMatchAt(i?n.index(o):n.indexAfter(o)):n.node(o).contentMatchAt(n.indexAfter(o)).matchFragment(t,u>0&&i?1:0,f);var h=r.node(o);if(s>0&&o<r.depth){var d=h.content.cutByIndex(r.indexAfter(o)).addToStart(t.lastChild),m=a.fillBefore(d,!0);if(m&&m.size&&i>0&&1==u&&(m=null),m){var v=c(t.lastChild.content,t.lastChild,n,r,o+1,1==u?i-1:-1,s-1);if(v){var g=t.lastChild.copy(v);return m.size?t.cutByIndex(0,u-1).append(m).addToEnd(g):t.replaceChild(u-1,g)}}}s>0&&(a=a.matchNode(1==u&&i>0?n.node(o+1):t.lastChild));var y=r.index(o);if(y==h.childCount&&!h.type.compatibleContent(e.type))return null;var w=a.fillBefore(h.content,!0,y);if(!w)return null;if(s>0){var x=l(t.lastChild,s-1,n,o+1,1==u?i-1:-1);t=t.replaceChild(u-1,x)}return t=t.append(w),r.depth>o&&(t=t.addToEnd(p(r,o+1))),t}function l(t,e,n,r,o){var i,s=t.content,a=s.childCount;if(i=o>=0?n.node(r).contentMatchAt(n.indexAfter(r)).matchFragment(s,o>0?1:0,a):t.contentMatchAt(a),e>0){var c=l(s.lastChild,e-1,n,r+1,1==a?o-1:-1);s=s.replaceChild(a-1,c)}return t.copy(s.append(i.fillBefore(k.empty,!0)))}function p(t,e){var n=t.node(e),r=n.contentMatchAt(0).fillBefore(n.content,!0,t.index(e));return t.depth>e&&(r=r.addToEnd(p(t,e+1))),n.copy(r)}function u(t,e,n){for(;e>0&&n>0&&1==t.childCount;)t=t.firstChild.content,e--,n--;return new S(t,e,n)}function f(t,e,n){var r=c(n.content,t.node(0),t,e,0,n.openLeft,n.openRight);return r?u(r,n.openLeft,e.depth):null}function h(t,e,n){return!n.openLeft&&!n.openRight&&t.start()==e.start()&&t.parent.canReplace(t.index(),e.index(),n.content)}function d(t,e,n){if(!e.parent.isTextblock)return!1;var r;if(n.openRight){var o=v(n.content,n.openRight);if(!o.isTextblock)return!1;r=o.contentMatchAt(o.childCount)}else{var i=t.node(t.depth-(n.openLeft-n.openRight));if(!i.isTextblock)return!1;r=i.contentMatchAt(i.childCount),n.size&&(r=r.matchFragment(n.content,n.openLeft?1:0))}return(r=r.matchFragment(e.parent.content,e.index()))&&r.validEnd()}function m(t,e){for(var n=1;n<e;n++)t=t.firstChild.content;return t.firstChild}function v(t,e){for(var n=1;n<e;n++)t=t.lastChild.content;return t.lastChild}function g(t,e){for(var n=t.depth,r=null,o=[],i=null,s=e.openLeft;;--s){var a=void 0,c=void 0,l=void 0;if(s>=0){if(s>0){var p;p=m(e.content,s),a=p.type,c=p.attrs,l=p.content}else 0==s&&(l=e.content);s<e.openLeft&&(l=l.cut(l.firstChild.nodeSize))}else{l=k.empty;var u=i[i.length+s-1];a=u.type,c=u.attrs}if(r&&(l=l.addToStart(r)),0==l.size&&s<=0)break;var f=w(l,t,n,o);if(f){if(f.fragment.size>0&&(o[f.depth]={content:f.fragment,openRight:y(e,s)?e.openRight-s:0,depth:f.depth}),s<=0)break;r=null,n=f.depth-(a==t.node(f.depth).type?1:0)}else{if(0==s){var h=t.node(0),d=h.contentMatchAt(t.index(0)).findWrappingFor(l.firstChild);if(!d||0==d.length)break;var v=d[d.length-1];if(!v.type.contentExpr.matches(v.attrs,l))break;i=[{type:h.type,attrs:h.attrs}].concat(d);var g;g=v,a=g.type,c=g.attrs}l.size?(l=a.contentExpr.start(c).fillBefore(l,!0).append(l),r=a.create(c,l)):r=null}}return o}function y(t,e){for(var n=0,r=t.content;n<e;n++){if(r.childCount>1)return!1;r=r.firstChild.content}return!0}function w(t,e,n,r){for(var o=!1,i=0;i<t.childCount;i++)t.child(i).marks.length&&(o=!0);for(var s=n;s>=0;s--){var a=e.node(s).contentMatchAt(e.indexAfter(s)),c=r[s];c&&(a=a.matchFragment(c.content));var l=a.fillBefore(t);if(l)return{depth:s,fragment:(c?c.content.append(l):l).append(t)};if(o){var p=x(a,t);if(p)return{depth:s,fragment:c?c.content.append(p):p}}}}function x(t,e){for(var n=[],r=0;r<e.childCount;r++){var o=e.child(r),i=o.mark(o.marks.filter(function(e){return t.allowsMark(e.type)}));if(!(t=t.matchNode(i)))return null;n.push(i)}return k.from(n)}var b=t("3"),k=b.Fragment,S=b.Slice,M=t("3c"),C=M.ReplaceStep,D=M.ReplaceAroundStep,O=t("3b"),T=O.Transform,R=t("3e"),N=R.insertPoint;return T.prototype.replaceRange=function(t,e,n){var i=this;if(!n.size)return this.deleteRange(t,e);var s=this.doc.resolve(t);if(h(s,this.doc.resolve(e),n))return this.step(new C(t,e,n));var a=o(s,this.doc.resolve(e)),c=0;a.unshift(s.depth+1);for(var l=s.depth;l>0&&!s.node(l).type.spec.defining;l--){var p=a.indexOf(l,1);p>-1&&(c=p)}for(var u=[],f=n.openLeft,d=n.content,m=0;;m++){var v=d.firstChild;if(u.push(v),m==n.openLeft)break;d=v.content}f>0&&u[f-1].type.spec.defining?f-=1:f>=2&&u[f-1].isTextblock&&u[f-2].type.spec.defining&&(f-=2);for(var g=n.openLeft;g>=0;g--){var y=(g+f+1)%(n.openLeft+1),w=u[y];if(w)for(var x=0;x<a.length;x++){var b=a[(x+c)%a.length],k=s.node(b-1),M=s.index(b-1);if(k.canReplaceWith(M,M,w.type,w.attrs,w.marks))return i.replace(s.before(b),b>s.depth?e:s.after(b),new S(r(n.content,0,n.openLeft,y),y,n.openRight))}}return this.replace(t,e,n)},T.prototype.replaceRangeWith=function(t,e,n){if(!n.isInline&&t==e&&this.doc.resolve(t).parent.content.size){var r=N(this.doc,t,n.type,n.attrs);null!=r&&(t=e=r)}return this.replaceRange(t,e,new S(k.from(n),0,0))},T.prototype.deleteRange=function(t,e){for(var n=this.doc.resolve(t),r=o(n,this.doc.resolve(e)),i=!1,s=0;s<r.length;s++)if(n.node(r[s]).contentMatchAt(0).validEnd()){t=n.start(r[s]),e=n.end(r[s]),i=!0;break}if(!i&&r.length){var a=r[r.length-1];n.node(a-1).canReplace(n.index(a-1),n.indexAfter(a-1))&&(t=n.before(a),e=n.after(a))}return this["delete"](t,e)},T.prototype["delete"]=function(t,e){return this.replace(t,e,S.empty)},e.replaceStep=i,T.prototype.replace=function(t,e,n){void 0===e&&(e=t),void 0===n&&(n=S.empty);var r=i(this.doc,t,e,n);return r&&this.step(r),this},T.prototype.replaceWith=function(t,e,n){return this.replace(t,e,new S(k.from(n),0,0))},T.prototype.insert=function(t,e){return this.replaceWith(t,t,e)},n.exports}),t.registerDynamic("40",["3b","39","3e","3d","38","3c","3a","3f"],!0,function(t,e,n){var r;r=t("3b"),e.Transform=r.Transform,e.TransformError=r.TransformError;var o;o=t("39"),e.Step=o.Step,e.StepResult=o.StepResult;var i;i=t("3e"),e.joinPoint=i.joinPoint,e.canJoin=i.canJoin,e.canSplit=i.canSplit,e.insertPoint=i.insertPoint,e.liftTarget=i.liftTarget,e.findWrapping=i.findWrapping;var s;s=t("3d"),e.StepMap=s.StepMap,e.MapResult=s.MapResult,e.Mapping=s.Mapping;var a;a=t("38"),e.AddMarkStep=a.AddMarkStep,e.RemoveMarkStep=a.RemoveMarkStep;var c;c=t("3c"),e.ReplaceStep=c.ReplaceStep,e.ReplaceAroundStep=c.ReplaceAroundStep,t("3a");var l;return l=t("3f"),e.replaceStep=l.replaceStep,n.exports}),t.registerDynamic("9",["40"],!0,function(t,e,n){return n.exports=t("40"),n.exports}),t.registerDynamic("41",[],!0,function(t,e,n){function r(t){this.content=t}return r.prototype={constructor:r,find:function(t){for(var e=0;e<this.content.length;e+=2)if(this.content[e]===t)return e;return-1},get:function(t){var e=this.find(t);return-1==e?undefined:this.content[e+1]},update:function(t,e,n){var o=n&&n!=t?this.remove(n):this,i=o.find(t),s=o.content.slice();return-1==i?s.push(n||t,e):(s[i+1]=e,n&&(s[i]=n)),new r(s)},remove:function(t){var e=this.find(t);if(-1==e)return this;var n=this.content.slice();return n.splice(e,2),new r(n)},addToStart:function(t,e){return new r([t,e].concat(this.remove(t).content))},addToEnd:function(t,e){var n=this.remove(t).content.slice();return n.push(t,e),new r(n)},addBefore:function(t,e,n){var o=this.remove(e),i=o.content.slice(),s=o.find(t);return i.splice(-1==s?i.length:s,0,e,n),new r(i)},forEach:function(t){for(var e=0;e<this.content.length;e+=2)t(this.content[e],this.content[e+1])},prepend:function(t){return t=r.from(t),t.size?new r(t.content.concat(this.subtract(t).content)):this},append:function(t){return t=r.from(t),t.size?new r(this.subtract(t).content.concat(t.content)):this},subtract:function(t){var e=this;t=r.from(t);for(var n=0;n<t.content.length;n+=2)e=e.remove(t.content[n]);return e},get size(){return this.content.length>>1}},r.from=function(t){if(t instanceof r)return t;var e=[];if(t)for(var n in t)e.push(n,t[n]);return new r(e)},n.exports=r,n.exports}),t.registerDynamic("42",["41"],!0,function(t,e,n){return n.exports=t("41"),n.exports}),t.registerDynamic("43",["44"],!0,function(t,e,n){var r=t("44"),o=r.Mark,i=function(t,e,n){this.pos=t,this.path=e,this.depth=e.length/3-1,this.parentOffset=n},s={parent:{},textOffset:{},nodeAfter:{},nodeBefore:{}};i.prototype.resolveDepth=function(t){
return null==t?this.depth:t<0?this.depth+t:t},s.parent.get=function(){return this.node(this.depth)},i.prototype.node=function(t){return this.path[3*this.resolveDepth(t)]},i.prototype.index=function(t){return this.path[3*this.resolveDepth(t)+1]},i.prototype.indexAfter=function(t){return t=this.resolveDepth(t),this.index(t)+(t!=this.depth||this.textOffset?1:0)},i.prototype.start=function(t){return t=this.resolveDepth(t),0==t?0:this.path[3*t-1]+1},i.prototype.end=function(t){return t=this.resolveDepth(t),this.start(t)+this.node(t).content.size},i.prototype.before=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position before the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]},i.prototype.after=function(t){if(!(t=this.resolveDepth(t)))throw new RangeError("There is no position after the top-level node");return t==this.depth+1?this.pos:this.path[3*t-1]+this.path[3*t].nodeSize},s.textOffset.get=function(){return this.pos-this.path[this.path.length-1]},s.nodeAfter.get=function(){var t=this.parent,e=this.index(this.depth);if(e==t.childCount)return null;var n=this.pos-this.path[this.path.length-1],r=t.child(e);return n?t.child(e).cut(n):r},s.nodeBefore.get=function(){var t=this.index(this.depth),e=this.pos-this.path[this.path.length-1];return e?this.parent.child(t).cut(0,e):0==t?null:this.parent.child(t-1)},i.prototype.marks=function(t){var e=this.parent,n=this.index();if(0==e.content.size)return o.none;if(t&&n<e.childCount||0==n||this.textOffset)return e.child(n).marks;for(var r=e.child(n-1).marks,i=0;i<r.length;i++)!1===r[i].type.spec.inclusiveRight&&(r=r[i--].removeFromSet(r));return r},i.prototype.sharedDepth=function(t){for(var e=this,n=this.depth;n>0;n--)if(e.start(n)<=t&&e.end(n)>=t)return n;return 0},i.prototype.blockRange=function(t,e){var n=this;if(void 0===t&&(t=this),t.pos<this.pos)return t.blockRange(this);for(var r=this.depth-(this.parent.isTextblock||this.pos==t.pos?1:0);r>=0;r--)if(t.pos<=n.end(r)&&(!e||e(n.node(r))))return new p(n,t,r)},i.prototype.sameParent=function(t){return this.pos-this.parentOffset==t.pos-t.parentOffset},i.prototype.toString=function(){for(var t=this,e="",n=1;n<=this.depth;n++)e+=(e?"/":"")+t.node(n).type.name+"_"+t.index(n-1);return e+":"+this.parentOffset},i.resolve=function(t,e){if(!(e>=0&&e<=t.content.size))throw new RangeError("Position "+e+" out of range");for(var n=[],r=0,o=e,s=t;;){var a=s.content.findIndex(o),c=a.index,l=a.offset,p=o-l;if(n.push(s,c,r+l),!p)break;if(s=s.child(c),s.isText)break;o=p-1,r+=l+1}return new i(e,n,o)},i.resolveCached=function(t,e){for(var n=0;n<a.length;n++){var r=a[n];if(r.pos==e&&r.node(0)==t)return r}var o=a[c]=i.resolve(t,e);return c=(c+1)%l,o},Object.defineProperties(i.prototype,s),e.ResolvedPos=i;var a=[],c=0,l=6,p=function(t,e,n){this.$from=t,this.$to=e,this.depth=n},u={start:{},end:{},parent:{},startIndex:{},endIndex:{}};return u.start.get=function(){return this.$from.before(this.depth+1)},u.end.get=function(){return this.$to.after(this.depth+1)},u.parent.get=function(){return this.$from.node(this.depth)},u.startIndex.get=function(){return this.$from.index(this.depth)},u.endIndex.get=function(){return this.$to.indexAfter(this.depth)},Object.defineProperties(p.prototype,u),e.NodeRange=p,n.exports}),t.registerDynamic("45",["46","44","47","43","48"],!0,function(t,e,n){function r(t,e){for(var n=t.length-1;n>=0;n--)e=t[n].type.name+"("+e+")";return e}var o=t("46"),i=o.Fragment,s=t("44"),a=s.Mark,c=t("47"),l=c.Slice,p=c.replace,u=t("43"),f=u.ResolvedPos,h=t("48"),d=h.compareDeep,m=Object.create(null),v=!1,g=function(t,e,n,r){this.type=t,this.attrs=e,this.content=n||i.empty,this.marks=r||a.none},y={nodeSize:{},childCount:{},textContent:{},firstChild:{},lastChild:{},isBlock:{},isTextblock:{},isInline:{},isText:{},isLeaf:{}};y.nodeSize.get=function(){return this.isLeaf?1:2+this.content.size},y.childCount.get=function(){return this.content.childCount},g.prototype.child=function(t){return this.content.child(t)},g.prototype.maybeChild=function(t){return this.content.maybeChild(t)},g.prototype.forEach=function(t){this.content.forEach(t)},g.prototype.nodesBetween=function(t,e,n,r){void 0===r&&(r=0),this.content.nodesBetween(t,e,n,r,this)},g.prototype.descendants=function(t){this.nodesBetween(0,this.content.size,t)},y.textContent.get=function(){return this.textBetween(0,this.content.size,"")},g.prototype.textBetween=function(t,e,n,r){return this.content.textBetween(t,e,n,r)},y.firstChild.get=function(){return this.content.firstChild},y.lastChild.get=function(){return this.content.lastChild},g.prototype.eq=function(t){return this==t||this.sameMarkup(t)&&this.content.eq(t.content)},g.prototype.sameMarkup=function(t){return this.hasMarkup(t.type,t.attrs,t.marks)},g.prototype.hasMarkup=function(t,e,n){return this.type==t&&d(this.attrs,e||t.defaultAttrs||m)&&a.sameSet(this.marks,n||a.none)},g.prototype.copy=function(t){return void 0===t&&(t=null),t==this.content?this:new this.constructor(this.type,this.attrs,t,this.marks)},g.prototype.mark=function(t){return t==this.marks?this:new this.constructor(this.type,this.attrs,this.content,t)},g.prototype.cut=function(t,e){return 0==t&&e==this.content.size?this:this.copy(this.content.cut(t,e))},g.prototype.slice=function(t,e,n){if(void 0===e&&(e=this.content.size),void 0===n&&(n=!1),t==e)return l.empty;var r=this.resolve(t),o=this.resolve(e),i=n?0:r.sharedDepth(e),s=r.start(i),a=r.node(i),c=a.content.cut(r.pos-s,o.pos-s);return new l(c,r.depth-i,o.depth-i)},g.prototype.replace=function(t,e,n){return p(this.resolve(t),this.resolve(e),n)},g.prototype.nodeAt=function(t){for(var e=this;;){var n=e.content.findIndex(t),r=n.index,o=n.offset;if(!(e=e.maybeChild(r)))return null;if(o==t||e.isText)return e;t-=o+1}},g.prototype.childAfter=function(t){var e=this.content.findIndex(t),n=e.index,r=e.offset;return{node:this.content.maybeChild(n),index:n,offset:r}},g.prototype.childBefore=function(t){if(0==t)return{node:null,index:0,offset:0};var e=this.content.findIndex(t),n=e.index,r=e.offset;if(r<t)return{node:this.content.child(n),index:n,offset:r};var o=this.content.child(n-1);return{node:o,index:n-1,offset:r-o.nodeSize}},g.prototype.resolve=function(t){return f.resolveCached(this,t)},g.prototype.resolveNoCache=function(t){return f.resolve(this,t)},g.prototype.marksAt=function(t,e){return!v&&"undefined"!=typeof console&&console.warn&&(v=!0,console.warn("Node.marksAt is deprecated. Use ResolvedPos.marks instead.")),this.resolve(t).marks(e)},g.prototype.rangeHasMark=function(t,e,n){var r=!1;return this.nodesBetween(t,e,function(t){return n.isInSet(t.marks)&&(r=!0),!r}),r},y.isBlock.get=function(){return this.type.isBlock},y.isTextblock.get=function(){return this.type.isTextblock},y.isInline.get=function(){return this.type.isInline},y.isText.get=function(){return this.type.isText},y.isLeaf.get=function(){return this.type.isLeaf},g.prototype.toString=function(){var t=this.type.name;return this.content.size&&(t+="("+this.content.toStringInner()+")"),r(this.marks,t)},g.prototype.contentMatchAt=function(t){return this.type.contentExpr.getMatchAt(this.attrs,this.content,t)},g.prototype.canReplace=function(t,e,n,r,o){return this.type.contentExpr.checkReplace(this.attrs,this.content,t,e,n,r,o)},g.prototype.canReplaceWith=function(t,e,n,r,o){return this.type.contentExpr.checkReplaceWith(this.attrs,this.content,t,e,n,r,o||a.none)},g.prototype.canAppend=function(t){return t.content.size?this.canReplace(this.childCount,this.childCount,t.content):this.type.compatibleContent(t.type)},g.prototype.defaultContentType=function(t){var e=this.contentMatchAt(t).nextElement;return e&&e.defaultType()},g.prototype.toJSON=function(){var t=this,e={type:this.type.name};for(var n in t.attrs){e.attrs=t.attrs;break}return this.content.size&&(e.content=this.content.toJSON()),this.marks.length&&(e.marks=this.marks.map(function(t){return t.toJSON()})),e},g.fromJSON=function(t,e){var n=e.marks&&e.marks.map(t.markFromJSON);return"text"==e.type?t.text(e.text,n):t.nodeType(e.type).create(e.attrs,i.fromJSON(t,e.content),n)},Object.defineProperties(g.prototype,y),e.Node=g;var w=function(t){function e(e,n,r,o){if(t.call(this,e,n,null,o),!r)throw new RangeError("Empty text nodes are not allowed");this.text=r}t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e;var n={textContent:{},nodeSize:{}};return e.prototype.toString=function(){return r(this.marks,JSON.stringify(this.text))},n.textContent.get=function(){return this.text},e.prototype.textBetween=function(t,e){return this.text.slice(t,e)},n.nodeSize.get=function(){return this.text.length},e.prototype.mark=function(t){return new e(this.type,this.attrs,this.text,t)},e.prototype.withText=function(t){return t==this.text?this:new e(this.type,this.attrs,t,this.marks)},e.prototype.cut=function(t,e){return void 0===t&&(t=0),void 0===e&&(e=this.text.length),0==t&&e==this.text.length?this:this.withText(this.text.slice(t,e))},e.prototype.eq=function(t){return this.sameMarkup(t)&&this.text==t.text},e.prototype.toJSON=function(){var e=t.prototype.toJSON.call(this);return e.text=this.text,e},Object.defineProperties(e.prototype,n),e}(g);return e.TextNode=w,n.exports}),t.registerDynamic("49",["42","45","46","44","4a"],!0,function(t,e,n){function r(t){var e=Object.create(null);for(var n in t){var r=t[n];if(r["default"]===undefined)return null;e[n]=r["default"]}return e}function o(t,e){var n=Object.create(null);for(var r in t){var o=e&&e[r];if(null==o){var i=t[r];if(i["default"]!==undefined)o=i["default"];else{if(!i.compute)throw new RangeError("No value supplied for attribute "+r);o=i.compute()}}n[r]=o}return n}function i(t){var e=Object.create(null);if(t)for(var n in t)e[n]=new y(t[n]);return e}var s=t("42"),a=t("45"),c=a.Node,l=a.TextNode,p=t("46"),u=p.Fragment,f=t("44"),h=f.Mark,d=t("4a"),m=d.ContentExpr,v=function(t,e,n){this.name=t,this.schema=e,this.spec=n,this.attrs=i(n.attrs),this.defaultAttrs=r(this.attrs),this.contentExpr=null,this.isBlock=!(n.inline||"text"==t),this.isText="text"==t},g={isInline:{},isTextblock:{},isLeaf:{}};g.isInline.get=function(){return!this.isBlock},g.isTextblock.get=function(){return this.isBlock&&this.contentExpr.inlineContent},g.isLeaf.get=function(){return this.contentExpr.isLeaf},v.prototype.hasRequiredAttrs=function(t){var e=this;for(var n in e.attrs)if(e.attrs[n].isRequired&&(!t||!(n in t)))return!0;return!1},v.prototype.compatibleContent=function(t){return this==t||this.contentExpr.compatible(t.contentExpr)},v.prototype.computeAttrs=function(t){return!t&&this.defaultAttrs?this.defaultAttrs:o(this.attrs,t)},v.prototype.create=function(t,e,n){if("string"==typeof e)throw new Error("Calling create with string");return new c(this,this.computeAttrs(t),u.from(e),h.setFrom(n))},v.prototype.createChecked=function(t,e,n){if(t=this.computeAttrs(t),e=u.from(e),!this.validContent(e,t))throw new RangeError("Invalid content for node "+this.name);return new c(this,t,e,h.setFrom(n))},v.prototype.createAndFill=function(t,e,n){if(t=this.computeAttrs(t),e=u.from(e),e.size){var r=this.contentExpr.start(t).fillBefore(e);if(!r)return null;e=r.append(e)}var o=this.contentExpr.getMatchAt(t,e).fillBefore(u.empty,!0);return o?new c(this,t,e.append(o),h.setFrom(n)):null},v.prototype.validContent=function(t,e){return this.contentExpr.matches(e,t)},v.compile=function(t,e){var n=Object.create(null);if(t.forEach(function(t,r){return n[t]=new v(t,e,r)}),!n.doc)throw new RangeError("Every schema needs a 'doc' type");if(!n.text)throw new RangeError("Every schema needs a 'text' type");return n},Object.defineProperties(v.prototype,g),e.NodeType=v;var y=function(t){this["default"]=t["default"],this.compute=t.compute},w={isRequired:{}};w.isRequired.get=function(){return this["default"]===undefined&&!this.compute},Object.defineProperties(y.prototype,w);var x=function(t,e,n,o){this.name=t,this.schema=n,this.spec=o,this.attrs=i(o.attrs),this.rank=e;var s=r(this.attrs);this.instance=s&&new h(this,s)};x.prototype.create=function(t){return!t&&this.instance?this.instance:new h(this,o(this.attrs,t))},x.compile=function(t,e){var n=Object.create(null),r=0;return t.forEach(function(t,o){return n[t]=new x(t,r++,e,o)}),n},x.prototype.removeFromSet=function(t){for(var e=this,n=0;n<t.length;n++)if(t[n].type==e)return t.slice(0,n).concat(t.slice(n+1));return t},x.prototype.isInSet=function(t){for(var e=this,n=0;n<t.length;n++)if(t[n].type==e)return t[n]},e.MarkType=x;var b=function(t){var e=this;this.nodeSpec=s.from(t.nodes),this.markSpec=s.from(t.marks),this.nodes=v.compile(this.nodeSpec,this),this.marks=x.compile(this.markSpec,this);for(var n in e.nodes){if(n in e.marks)throw new RangeError(n+" can not be both a node and a mark");var r=e.nodes[n];r.contentExpr=m.parse(r,e.nodeSpec.get(n).content||"",e.nodeSpec)}this.cached=Object.create(null),this.cached.wrappings=Object.create(null),this.nodeFromJSON=this.nodeFromJSON.bind(this),this.markFromJSON=this.markFromJSON.bind(this)};return b.prototype.node=function(t,e,n,r){if("string"==typeof t)t=this.nodeType(t);else{if(!(t instanceof v))throw new RangeError("Invalid node type: "+t);if(t.schema!=this)throw new RangeError("Node type from different schema used ("+t.name+")")}return t.createChecked(e,n,r)},b.prototype.text=function(t,e){var n=this.nodes.text;return new l(n,n.defaultAttrs,t,h.setFrom(e))},b.prototype.mark=function(t,e){return"string"==typeof t&&(t=this.marks[t]),t.create(e)},b.prototype.nodeFromJSON=function(t){return c.fromJSON(this,t)},b.prototype.markFromJSON=function(t){return h.fromJSON(this,t)},b.prototype.nodeType=function(t){var e=this.nodes[t];if(!e)throw new RangeError("Unknown node type: "+t);return e},e.Schema=b,n.exports}),t.registerDynamic("4a",["46","44"],!0,function(t,e,n){function r(t,e){if("."==e.charAt(0)){var n=e.slice(1);if(!t.attrs[n])throw new SyntaxError("Node type "+t.name+" has no attribute "+n);return new w(n)}return JSON.parse(e)}function o(t,e){for(var n=[],r=0;r<e.length;r++){var o=t.marks[e[r]];if(!o)throw new SyntaxError("Unknown mark type: '"+e[r]+"'");n.push(o)}return n}function i(t,e,n){if(!(t instanceof w))return t;var r=e&&e[t.attr];return r!==undefined?r:n.nodeType.defaultAttrs[t.attr]}function s(t,e,n,r){return e>=i(t.min,n,r)&&e<=i(t.max,n,r)}function a(t,e,n){var r=[];return n.forEach(function(n){var o=t.nodes[n];if(o?-1==r.indexOf(o)&&r.push(o):e.forEach(function(e,i){i.group&&i.group.split(" ").indexOf(n)>-1&&(o=t.nodes[e],-1==r.indexOf(o)&&r.push(o))}),!o)throw new SyntaxError("Node type or group '"+n+"' does not exist")}),r}function c(t,e){var n=1,o=1;if(e&&("+"==e[1]?o=x:"*"==e[1]?(n=0,o=x):"?"==e[1]?n=0:e[2]&&(n=r(t,e[2]),o=e[3]?e[4]?r(t,e[4]):x:n),0==o||n>o))throw new SyntaxError("Invalid repeat count in '"+e[0]+"'");return{min:n,max:o}}function l(t,e){for(var n=e.split(/\s*,\s*/),o=Object.create(null),i=0;i<n.length;i++){var s=/^(\w+)=(\w+|\"(?:\\.|[^\\])*\"|\.\w+)$/.exec(n[i]);if(!s)throw new SyntaxError("Invalid attribute syntax: "+n[i]);o[s[1]]=r(t,s[2])}return o}var p=t("46"),u=p.Fragment,f=t("44"),h=f.Mark,d=function(t,e,n){this.nodeType=t,this.elements=e,this.inlineContent=n},m={isLeaf:{}};m.isLeaf.get=function(){return 0==this.elements.length},d.prototype.start=function(t){return new g(this,t,0,0)},d.prototype.atType=function(t,e,n,r){var o=this;void 0===r&&(r=h.none);for(var i=0;i<this.elements.length;i++)if(o.elements[i].matchesType(e,n,r,t,o))return new g(o,t,i,0)},d.prototype.matches=function(t,e,n,r){return this.start(t).matchToEnd(e,n,r)},d.prototype.getMatchAt=function(t,e,n){return void 0===n&&(n=e.childCount),1==this.elements.length?new g(this,t,0,n):this.start(t).matchFragment(e,0,n)},d.prototype.checkReplace=function(t,e,n,r,o,i,a){var c=this;if(void 0===o&&(o=u.empty),void 0===i&&(i=0),void 0===a&&(a=o.childCount),1==this.elements.length){var l=this.elements[0];if(!s(l,e.childCount-(r-n)+(a-i),t,this))return!1;for(var p=i;p<a;p++)if(!l.matches(o.child(p),t,c))return!1;return!0}var f=this.getMatchAt(t,e,n).matchFragment(o,i,a);return!!f&&f.matchToEnd(e,r)},d.prototype.checkReplaceWith=function(t,e,n,r,o,i,a){if(1==this.elements.length){var c=this.elements[0];return!!s(c,e.childCount-(r-n)+1,t,this)&&c.matchesType(o,i,a,t,this)}var l=this.getMatchAt(t,e,n).matchType(o,i,a);return!!l&&l.matchToEnd(e,r)},d.prototype.compatible=function(t){for(var e=this,n=0;n<this.elements.length;n++)for(var r=e.elements[n],o=0;o<t.elements.length;o++)if(t.elements[o].compatible(r))return!0;return!1},d.prototype.generateContent=function(t){return this.start(t).fillBefore(u.empty,!0)},d.parse=function(t,e,n){for(var r=[],i=0,s=null;(i+=/^\s*/.exec(e.slice(i))[0].length)!=e.length;){var p=/^(?:(\w+)|\(\s*(\w+(?:\s*\|\s*\w+)*)\s*\))/.exec(e.slice(i));if(!p)throw new SyntaxError("Invalid content expression '"+e+"' at "+i);i+=p[0].length;var u=/^\[([^\]]+)\]/.exec(e.slice(i));u&&(i+=u[0].length);var f=/^<(?:(_)|\s*(\w+(?:\s+\w+)*)\s*)>/.exec(e.slice(i));f&&(i+=f[0].length);var h=/^(?:([+*?])|\{\s*(\d+|\.\w+)\s*(,\s*(\d+|\.\w+)?)?\s*\})/.exec(e.slice(i));h&&(i+=h[0].length);for(var m=a(t.schema,n,p[1]?[p[1]]:p[2].split(/\s*\|\s*/)),g=0;g<m.length;g++)if(null==s)s=m[g].isInline;else if(s!=m[g].isInline)throw new SyntaxError("Mixing inline and block content in a single node");var y=u?l(t,u[1]):null,w=!!f&&(!!f[1]||o(t.schema,f[2].split(/\s+/))),x=c(t,h),b=x.min,k=x.max;if(0!=b&&(m[0].hasRequiredAttrs(y)||m[0].isText))throw new SyntaxError("Node type "+p[0]+" in type "+t.name+" is required, but has non-optional attributes");for(var S=new v(m,y,w,b,k),M=r.length-1;M>=0;M--){var C=r[M];if(C.min!=C.max&&C.overlaps(S))throw new SyntaxError("Possibly ambiguous overlapping adjacent content expressions in '"+e+"'");if(0!=C.min)break}r.push(S)}return new d(t,r,!!s)},Object.defineProperties(d.prototype,m),e.ContentExpr=d;var v=function(t,e,n,r,o){this.nodeTypes=t,this.attrs=e,this.marks=n,this.min=r,this.max=o};v.prototype.matchesType=function(t,e,n,r,o){var s=this;if(-1==this.nodeTypes.indexOf(t))return!1;if(this.attrs){if(!e)return!1;for(var a in s.attrs)if(e[a]!=i(s.attrs[a],r,o))return!1}if(!0===this.marks)return!0;if(!1===this.marks)return 0==n.length;for(var c=0;c<n.length;c++)if(-1==s.marks.indexOf(n[c].type))return!1;return!0},v.prototype.matches=function(t,e,n){return this.matchesType(t.type,t.attrs,t.marks,e,n)},v.prototype.compatible=function(t){for(var e=this,n=0;n<this.nodeTypes.length;n++)if(-1!=t.nodeTypes.indexOf(e.nodeTypes[n]))return!0;return!1},v.prototype.constrainedAttrs=function(t,e){var n=this;if(!this.attrs)return null;var r=Object.create(null);for(var o in n.attrs)r[o]=i(n.attrs[o],t,e);return r},v.prototype.createFiller=function(t,e){var n=this.nodeTypes[0],r=n.computeAttrs(this.constrainedAttrs(t,e));return n.create(r,n.contentExpr.generateContent(r))},v.prototype.defaultType=function(){var t=this.nodeTypes[0];if(!t.hasRequiredAttrs()&&!t.isText)return t},v.prototype.overlaps=function(t){return this.nodeTypes.some(function(e){return t.nodeTypes.indexOf(e)>-1})},v.prototype.allowsMark=function(t){return!0===this.marks||this.marks&&this.marks.indexOf(t)>-1};var g=function(t,e,n,r){this.expr=t,this.attrs=e,this.index=n,this.count=r},y={element:{},nextElement:{}};y.element.get=function(){return this.expr.elements[this.index]},y.nextElement.get=function(){for(var t=this,e=this.index,n=this.count;e<this.expr.elements.length;e++){var r=t.expr.elements[e];if(t.resolveValue(r.max)>n)return r;n=0}},g.prototype.move=function(t,e){return new g(this.expr,this.attrs,t,e)},g.prototype.resolveValue=function(t){return t instanceof w?i(t,this.attrs,this.expr):t},g.prototype.matchNode=function(t){return this.matchType(t.type,t.attrs,t.marks)},g.prototype.matchType=function(t,e,n){var r=this;void 0===n&&(n=h.none);for(var o=this,i=o.index,s=o.count;i<this.expr.elements.length;i++,s=0){var a=r.expr.elements[i];if(s<r.resolveValue(a.max)&&a.matchesType(t,e,n,r.attrs,r.expr))return s++,r.move(i,s);if(s<r.resolveValue(a.min))return null}},g.prototype.matchFragment=function(t,e,n){var r=this;if(void 0===e&&(e=0),void 0===n&&(n=t.childCount),e==n)return this;for(var o=e,i=this.expr.elements.length,s=this,a=s.index,c=s.count;a<i;a++,c=0){for(var l=r.expr.elements[a],p=r.resolveValue(l.max);c<p&&o<n&&l.matches(t.child(o),r.attrs,r.expr);)if(c++,++o==n)return r.move(a,c);if(c<r.resolveValue(l.min))return null}return!1},g.prototype.matchToEnd=function(t,e,n){var r=this.matchFragment(t,e,n);return r&&r.validEnd()||!1},g.prototype.validEnd=function(){for(var t=this,e=this.index,n=this.count;e<this.expr.elements.length;e++,n=0)if(n<t.resolveValue(t.expr.elements[e].min))return!1;return!0},g.prototype.fillBefore=function(t,e,n){for(var r=this,o=[],i=this,s=n||0,a=this.expr.elements.length;;){var c=i.matchFragment(t,s);if(c&&(!e||c.validEnd()))return u.from(o);if(!1===c)return null;var l=i.element;if(i.count<r.resolveValue(l.min))o.push(l.createFiller(r.attrs,r.expr)),i=i.move(i.index,i.count+1);else{if(!(i.index<a))return t.childCount>s?null:u.from(o);i=i.move(i.index+1,0)}}},g.prototype.possibleContent=function(){for(var t=this,e=[],n=this.index,r=this.count;n<this.expr.elements.length;n++,r=0){var o=t.expr.elements[n],i=o.constrainedAttrs(t.attrs,t.expr);if(r<t.resolveValue(o.max))for(var s=0;s<o.nodeTypes.length;s++){var a=o.nodeTypes[s];a.hasRequiredAttrs(i)||a.isText||e.push({type:a,attrs:i})}if(t.resolveValue(o.min)>r)break}return e},g.prototype.allowsMark=function(t){return this.element.allowsMark(t)},g.prototype.findWrapping=function(t,e,n){for(var r=Object.create(null),o={match:this,via:null},i=[o];i.length;){var s=i.shift(),a=s.match;if(a.matchType(t,e,n)){for(var c=[],l=s;l!=o;l=l.via)c.push({type:l.match.expr.nodeType,attrs:l.match.attrs});return c.reverse()}for(var p=a.possibleContent(),u=0;u<p.length;u++){var f=p[u],h=f.type,d=f.attrs,m=h.computeAttrs(d);h.isLeaf||h.name in r||s!=o&&!a.matchType(h,m).validEnd()||(i.push({match:h.contentExpr.start(m),via:s}),r[h.name]=!0)}}},g.prototype.findWrappingFor=function(t){return this.findWrapping(t.type,t.attrs,t.marks)},Object.defineProperties(g.prototype,y),e.ContentMatch=g;var w=function(t){this.attr=t},x=2e9;return n.exports}),t.registerDynamic("4b",[],!0,function(t,e,n){function r(t,e,n){for(var o=0;;o++){if(o==t.childCount||o==e.childCount)return t.childCount==e.childCount?null:n;var i=t.child(o),s=e.child(o);if(i!=s){if(!i.sameMarkup(s))return n;if(i.isText&&i.text!=s.text){for(var a=0;i.text[a]==s.text[a];a++)n++;return n}if(i.content.size||s.content.size){var c=r(i.content,s.content,n+1);if(null!=c)return c}n+=i.nodeSize}else n+=i.nodeSize}}function o(t,e,n,r){for(var i=t.childCount,s=e.childCount;;){if(0==i||0==s)return i==s?null:{a:n,b:r};var a=t.child(--i),c=e.child(--s),l=a.nodeSize;if(a!=c){if(!a.sameMarkup(c))return{a:n,b:r};if(a.isText&&a.text!=c.text){for(var p=0,u=Math.min(a.text.length,c.text.length);p<u&&a.text[a.text.length-p-1]==c.text[c.text.length-p-1];)p++,n--,r--;return{a:n,b:r}}if(a.content.size||c.content.size){var f=o(a.content,c.content,n-1,r-1);if(f)return f}n-=l,r-=l}else n-=l,r-=l}}return e.findDiffStart=r,e.findDiffEnd=o,n.exports}),t.registerDynamic("46",["4b"],!0,function(t,e,n){function r(t,e){return l.index=t,l.offset=e,l}var o=t("4b"),i=o.findDiffStart,s=o.findDiffEnd,a=function(t,e){var n=this;if(this.content=t,this.size=e||0,null==e)for(var r=0;r<t.length;r++)n.size+=t[r].nodeSize},c={firstChild:{},lastChild:{},childCount:{}};a.prototype.nodesBetween=function(t,e,n,r,o){for(var i=this,s=0,a=0;a<e;s++){var c=i.content[s],l=a+c.nodeSize;if(l>t&&!1!==n(c,r+a,o,s)&&c.content.size){var p=a+1;c.nodesBetween(Math.max(0,t-p),Math.min(c.content.size,e-p),n,r+p)}a=l}},a.prototype.textBetween=function(t,e,n,r){var o="",i=!0;return this.nodesBetween(t,e,function(s,a){s.isText?(o+=s.text.slice(Math.max(t,a)-a,e-a),i=!n):s.isLeaf&&r?(o+=r,i=!n):!i&&s.isBlock&&(o+=n,i=!0)},0),o},a.prototype.append=function(t){if(!t.size)return this;if(!this.size)return t;var e=this.lastChild,n=t.firstChild,r=this.content.slice(),o=0;for(e.isText&&e.sameMarkup(n)&&(r[r.length-1]=e.withText(e.text+n.text),o=1);o<t.content.length;o++)r.push(t.content[o]);return new a(r,this.size+t.size)},a.prototype.cut=function(t,e){var n=this;if(null==e&&(e=this.size),0==t&&e==this.size)return this;var r=[],o=0;if(e>t)for(var i=0,s=0;s<e;i++){var c=n.content[i],l=s+c.nodeSize;l>t&&((s<t||l>e)&&(c=c.isText?c.cut(Math.max(0,t-s),Math.min(c.text.length,e-s)):c.cut(Math.max(0,t-s-1),Math.min(c.content.size,e-s-1))),r.push(c),o+=c.nodeSize),s=l}return new a(r,o)},a.prototype.cutByIndex=function(t,e){return t==e?a.empty:0==t&&e==this.content.length?this:new a(this.content.slice(t,e))},a.prototype.replaceChild=function(t,e){var n=this.content[t];if(n==e)return this;var r=this.content.slice(),o=this.size+e.nodeSize-n.nodeSize;return r[t]=e,new a(r,o)},a.prototype.addToStart=function(t){return new a([t].concat(this.content),this.size+t.nodeSize)},a.prototype.addToEnd=function(t){return new a(this.content.concat(t),this.size+t.nodeSize)},a.prototype.eq=function(t){var e=this;if(this.content.length!=t.content.length)return!1;for(var n=0;n<this.content.length;n++)if(!e.content[n].eq(t.content[n]))return!1;return!0},c.firstChild.get=function(){return this.content.length?this.content[0]:null},c.lastChild.get=function(){return this.content.length?this.content[this.content.length-1]:null},c.childCount.get=function(){return this.content.length},a.prototype.child=function(t){var e=this.content[t];if(!e)throw new RangeError("Index "+t+" out of range for "+this);return e},a.prototype.offsetAt=function(t){for(var e=this,n=0,r=0;r<t;r++)n+=e.content[r].nodeSize;return n},a.prototype.maybeChild=function(t){return this.content[t]},a.prototype.forEach=function(t){for(var e=this,n=0,r=0;n<this.content.length;n++){var o=e.content[n];t(o,r,n),r+=o.nodeSize}},a.prototype.findDiffStart=function(t,e){return void 0===e&&(e=0),i(this,t,e)},a.prototype.findDiffEnd=function(t,e,n){return void 0===e&&(e=this.size),void 0===n&&(n=t.size),s(this,t,e,n)},a.prototype.findIndex=function(t,e){var n=this;if(void 0===e&&(e=-1),0==t)return r(0,t);if(t==this.size)return r(this.content.length,t);if(t>this.size||t<0)throw new RangeError("Position "+t+" outside of fragment ("+this+")");for(var o=0,i=0;;o++){var s=n.child(o),a=i+s.nodeSize;if(a>=t)return a==t||e>0?r(o+1,a):r(o,i);i=a}},a.prototype.toString=function(){return"<"+this.toStringInner()+">"},a.prototype.toStringInner=function(){return this.content.join(", ")},a.prototype.toJSON=function(){return this.content.length?this.content.map(function(t){return t.toJSON()}):null},a.fromJSON=function(t,e){return e?new a(e.map(t.nodeFromJSON)):a.empty},a.fromArray=function(t){if(!t.length)return a.empty;for(var e,n=0,r=0;r<t.length;r++){var o=t[r];n+=o.nodeSize,r&&o.isText&&t[r-1].sameMarkup(o)?(e||(e=t.slice(0,r)),e[e.length-1]=o.withText(e[e.length-1].text+o.text)):e&&e.push(o)}return new a(e||t,n)},a.from=function(t){return t?t instanceof a?t:Array.isArray(t)?this.fromArray(t):new a([t],t.nodeSize):a.empty},Object.defineProperties(a.prototype,c),e.Fragment=a;var l={index:0,offset:0};return a.empty=new a([],0),n.exports}),t.registerDynamic("47",["46"],!0,function(t,e,n){function r(t,e,n){var o=t.findIndex(e),i=o.index,s=o.offset,a=t.maybeChild(i),c=t.findIndex(n),l=c.index,p=c.offset;if(s==e||a.isText){if(p!=n&&!t.child(l).isText)throw new RangeError("Removing non-flat range");return t.cut(0,e).append(t.cut(n))}if(i!=l)throw new RangeError("Removing non-flat range");return t.replaceChild(i,a.copy(r(a.content,e-s-1,n-s-1)))}function o(t,e,n,r){var i=t.findIndex(e),s=i.index,a=i.offset,c=t.maybeChild(s);if(a==e||c.isText)return r&&!r.canReplace(s,s,n)?null:t.cut(0,e).append(n).append(t.cut(e));var l=o(c.content,e-a-1,n);return l&&t.replaceChild(s,c.copy(l))}function i(t,e,n){if(n.openLeft>t.depth)throw new g("Inserted content deeper than insertion position");if(t.depth-n.openLeft!=e.depth-n.openRight)throw new g("Inconsistent open depths");return s(t,e,n,0)}function s(t,e,n,r){var o=t.index(r),i=t.node(r);if(o==e.index(r)&&r<t.depth-n.openLeft){var a=s(t,e,n,r+1);return i.copy(i.content.replaceChild(o,a))}if(n.content.size){if(n.openLeft||n.openRight||t.depth!=r||e.depth!=r){var c=d(n,t);return u(i,f(t,c.start,c.end,e,r))}var l=t.parent,p=l.content;return u(l,p.cut(0,t.parentOffset).append(n.content).append(p.cut(e.parentOffset)))}return u(i,h(t,e,r))}function a(t,e){if(!e.type.compatibleContent(t.type))throw new g("Cannot join "+e.type.name+" onto "+t.type.name)}function c(t,e,n){var r=t.node(n);return a(r,e.node(n)),r}function l(t,e){var n=e.length-1;n>=0&&t.isText&&t.sameMarkup(e[n])?e[n]=t.withText(e[n].text+t.text):e.push(t)}function p(t,e,n,r){var o=(e||t).node(n),i=0,s=e?e.index(n):o.childCount;t&&(i=t.index(n),t.depth>n?i++:t.textOffset&&(l(t.nodeAfter,r),i++));for(var a=i;a<s;a++)l(o.child(a),r);e&&e.depth==n&&e.textOffset&&l(e.nodeBefore,r)}function u(t,e){if(!t.type.validContent(e,t.attrs))throw new g("Invalid content for node "+t.type.name);return t.copy(e)}function f(t,e,n,r,o){var i=t.depth>o&&c(t,e,o+1),s=r.depth>o&&c(n,r,o+1),d=[];return p(null,t,o,d),i&&s&&e.index(o)==n.index(o)?(a(i,s),l(u(i,f(t,e,n,r,o+1)),d)):(i&&l(u(i,h(t,e,o+1)),d),p(e,n,o,d),s&&l(u(s,h(n,r,o+1)),d)),p(r,null,o,d),new v(d)}function h(t,e,n){var r=[];if(p(null,t,n,r),t.depth>n){l(u(c(t,e,n+1),h(t,e,n+1)),r)}return p(e,null,n,r),new v(r)}function d(t,e){for(var n=e.depth-t.openLeft,r=e.node(n),o=r.copy(t.content),i=n-1;i>=0;i--)o=e.node(i).copy(v.from(o));return{start:o.resolveNoCache(t.openLeft+n),end:o.resolveNoCache(o.content.size-t.openRight-n)}}var m=t("46"),v=m.Fragment,g=function(t){function e(e){t.call(this,e),this.message=e}return t&&(e.__proto__=t),e.prototype=Object.create(t&&t.prototype),e.prototype.constructor=e,e}(Error);e.ReplaceError=g;var y=function(t,e,n){this.content=t,this.openLeft=e,this.openRight=n},w={size:{}};return w.size.get=function(){return this.content.size-this.openLeft-this.openRight},y.prototype.insertAt=function(t,e){var n=o(this.content,t+this.openLeft,e,null);return n&&new y(n,this.openLeft,this.openRight)},y.prototype.removeBetween=function(t,e){return new y(r(this.content,t+this.openLeft,e+this.openLeft),this.openLeft,this.openRight)},y.prototype.eq=function(t){return this.content.eq(t.content)&&this.openLeft==t.openLeft&&this.openRight==t.openRight},y.prototype.toString=function(){return this.content+"("+this.openLeft+","+this.openRight+")"},y.prototype.toJSON=function(){return this.content.size?{content:this.content.toJSON(),openLeft:this.openLeft,openRight:this.openRight}:null},y.fromJSON=function(t,e){return e?new y(v.fromJSON(t,e.content),e.openLeft,e.openRight):y.empty},y.maxOpen=function(t){for(var e=0,n=0,r=t.firstChild;r&&!r.isLeaf;r=r.firstChild)e++;for(var o=t.lastChild;o&&!o.isLeaf;o=o.lastChild)n++;return new y(t,e,n)},Object.defineProperties(y.prototype,w),e.Slice=y,y.empty=new y(v.empty,0,0),e.replace=i,n.exports}),t.registerDynamic("48",[],!0,function(t,e,n){function r(t,e){if(t===e)return!0;if(!t||"object"!=typeof t||!e||"object"!=typeof e)return!1;var n=Array.isArray(t);if(Array.isArray(e)!=n)return!1;if(n){if(t.length!=e.length)return!1;for(var o=0;o<t.length;o++)if(!r(t[o],e[o]))return!1}else{for(var i in t)if(!(i in e&&r(t[i],e[i])))return!1;for(var s in e)if(!(s in t))return!1}return!0}return e.compareDeep=r,n.exports}),t.registerDynamic("44",["48"],!0,function(t,e,n){var r=t("48"),o=r.compareDeep,i=function(t,e){this.type=t,this.attrs=e};return i.prototype.addToSet=function(t){for(var e=this,n=0;n<t.length;n++){var r=t[n];if(r.type==e.type){if(e.eq(r))return t;var o=t.slice();return o[n]=e,o}if(r.type.rank>e.type.rank)return t.slice(0,n).concat(e).concat(t.slice(n))}return t.concat(this)},i.prototype.removeFromSet=function(t){for(var e=this,n=0;n<t.length;n++)if(e.eq(t[n]))return t.slice(0,n).concat(t.slice(n+1));return t},i.prototype.isInSet=function(t){for(var e=this,n=0;n<t.length;n++)if(e.eq(t[n]))return!0;return!1},i.prototype.eq=function(t){return this==t||this.type==t.type&&!!o(t.attrs,this.attrs)},i.prototype.toJSON=function(){var t=this,e={type:this.type.name};for(var n in t.attrs){e.attrs=t.attrs;break}return e},i.fromJSON=function(t,e){return t.marks[e.type].create(e.attrs)},i.sameSet=function(t,e){if(t==e)return!0;if(t.length!=e.length)return!1;for(var n=0;n<t.length;n++)if(!t[n].eq(e[n]))return!1;return!0},i.setFrom=function(t){if(!t||0==t.length)return i.none;if(t instanceof i)return[t];var e=t.slice();return e.sort(function(t,e){return t.type.rank-e.type.rank}),e},e.Mark=i,i.none=[],n.exports}),t.registerDynamic("4c",["46","47","44"],!0,function(t,e,n){function r(t){for(var e=t.firstChild,n=null;e;e=e.nextSibling){var r=1==e.nodeType?e.nodeName.toLowerCase():null
;r&&v.hasOwnProperty(r)&&n?(n.appendChild(e),e=n):"li"==r?n=e:r&&(n=null)}}function o(t,e){return(t.matches||t.msMatchesSelector||t.webkitMatchesSelector||t.mozMatchesSelector).call(t,e)}function i(t){for(var e,n=/\s*([\w-]+)\s*:\s*([^;]+)/g,r=[];e=n.exec(t);)r.push(e[1],e[2].trim());return r}function s(t){var e={};for(var n in t)e[n]=t[n];return e}var a=t("46"),c=a.Fragment,l=t("47"),p=l.Slice,u=t("44"),f=u.Mark,h=function(t,e){var n=this;this.schema=t,this.rules=e,this.tags=[],this.styles=[],e.forEach(function(t){t.tag?n.tags.push(t):t.style&&n.styles.push(t)})};h.prototype.parse=function(t,e){void 0===e&&(e={});var n=new x(this,e,!1);return n.addAll(t,null,e.from,e.to),n.finish()},h.prototype.parseSlice=function(t,e){void 0===e&&(e={});var n=new x(this,e,!0);return n.addAll(t,null,e.from,e.to),p.maxOpen(n.finish())},h.prototype.matchTag=function(t){for(var e=this,n=0;n<this.tags.length;n++){var r=e.tags[n];if(o(t,r.tag)){if(r.getAttrs){var i=r.getAttrs(t);if(!1===i)continue;r.attrs=i}return r}}},h.prototype.matchStyle=function(t,e){for(var n=this,r=0;r<this.styles.length;r++){var o=n.styles[r];if(o.style==t){if(o.getAttrs){var i=o.getAttrs(e);if(!1===i)continue;o.attrs=i}return o}}},h.schemaRules=function(t){function e(t){for(var e=null==t.priority?50:t.priority,r=0;r<n.length;r++){var o=n[r];if((null==o.priority?50:o.priority)<e)break}n.splice(r,0,t)}var n=[],r=function(n){var r=t.marks[n].spec.parseDOM;r&&r.forEach(function(t){e(t=s(t)),t.mark=n})};for(var o in t.marks)r(o);var i=function(){var n=t.nodes[a].spec.parseDOM;n&&n.forEach(function(t){e(t=s(t)),t.node=a})};for(var a in t.nodes)i(o);return n},h.fromSchema=function(t){return t.cached.domParser||(t.cached.domParser=new h(t,h.schemaRules(t)))},e.DOMParser=h;var d={address:!0,article:!0,aside:!0,blockquote:!0,canvas:!0,dd:!0,div:!0,dl:!0,fieldset:!0,figcaption:!0,figure:!0,footer:!0,form:!0,h1:!0,h2:!0,h3:!0,h4:!0,h5:!0,h6:!0,header:!0,hgroup:!0,hr:!0,li:!0,noscript:!0,ol:!0,output:!0,p:!0,pre:!0,section:!0,table:!0,tfoot:!0,ul:!0},m={head:!0,noscript:!0,object:!0,script:!0,style:!0,title:!0},v={ol:!0,ul:!0},g=1,y=2,w=function(t,e,n,r,o){this.type=t,this.attrs=e,this.solid=n,this.match=r||(o&y?null:t.contentExpr.start(e)),this.options=o,this.content=[]};w.prototype.findWrapping=function(t,e){if(!this.match){if(!this.type)return[];var n=this.type.contentExpr.atType(this.attrs,t,e);if(!n){var r,o=this.type.contentExpr.start(this.attrs);if(r=o.findWrapping(t,e))return this.match=o,r}if(!n)return null;this.match=n}return this.match.findWrapping(t,e)},w.prototype.finish=function(t){if(!(this.options&g)){var e,n=this.content[this.content.length-1];n&&n.isText&&(e=/\s+$/.exec(n.text))&&(n.text.length==e[0].length?this.content.pop():this.content[this.content.length-1]=n.withText(n.text.slice(0,n.text.length-e[0].length)))}var r=c.from(this.content);return!t&&this.match&&(r=r.append(this.match.fillBefore(c.empty,!0))),this.type?this.type.create(this.attrs,r):r};var x=function(t,e,n){this.parser=t,this.options=e,this.isOpen=n;var r,o=e.topNode,i=(e.preserveWhitespace?g:0)|(n?y:0);r=o?new w(o.type,o.attrs,!0,o.contentMatchAt(e.topStart||0),i):n?new w(null,null,!0,null,i):new w(t.schema.nodes.doc,null,!0,null,i),this.nodes=[r],this.marks=f.none,this.open=0,this.find=e.findPositions},b={top:{},currentPos:{}};return b.top.get=function(){return this.nodes[this.open]},x.prototype.addMark=function(t){var e=this.marks;return this.marks=t.addToSet(this.marks),e},x.prototype.addDOM=function(t){if(3==t.nodeType)this.addTextNode(t);else if(1==t.nodeType){var e=t.getAttribute("style");e?this.addElementWithStyles(i(e),t):this.addElement(t)}},x.prototype.addTextNode=function(t){var e=t.nodeValue,n=this.top;if(n.type&&n.type.isTextblock||/\S/.test(e)){if(!(n.options&g)&&(e=e.replace(/\s+/g," "),/^\s/.test(e))){var r=n.content[n.content.length-1];(!r||r.isText&&/\s$/.test(r.text))&&(e=e.slice(1))}e&&this.insertNode(this.parser.schema.text(e,this.marks)),this.findInText(t)}else this.findInside(t)},x.prototype.addElement=function(t){var e=t.nodeName.toLowerCase();v.hasOwnProperty(e)&&r(t);var n=this.options.ruleFromNode&&this.options.ruleFromNode(t)||this.parser.matchTag(t);if(n?n.ignore:m.hasOwnProperty(e))this.findInside(t);else if(!n||n.skip){n&&n.skip.nodeType&&(t=n.skip);var o=d.hasOwnProperty(e)&&this.top;this.addAll(t),o&&this.sync(o)}else this.addElementByRule(t,n)},x.prototype.addElementWithStyles=function(t,e){for(var n=this,r=this.marks,o=!1,i=0;i<t.length;i+=2){var s=n.parser.matchStyle(t[i],t[i+1]);if(s){if(s.ignore){o=!0;break}n.addMark(n.parser.schema.marks[s.mark].create(s.attrs))}}o||this.addElement(e),this.marks=r},x.prototype.addElementByRule=function(t,e){var n,r,o,i,s,a=this;if(e.node?(o=this.parser.schema.nodes[e.node],o.isLeaf?this.insertNode(o.create(e.attrs,null,this.marks)):n=this.enter(o,e.attrs,e.preserveWhitespace)&&this.top):(i=this.parser.schema.marks[e.mark],r=this.addMark(s=i.create(e.attrs))),o&&o.isLeaf)this.findInside(t);else if(e.getContent)this.findInside(t),e.getContent(t).forEach(function(t){return a.insertNode(s?t.mark(s.addToSet(t.marks)):t)});else{var c=e.contentElement;"string"==typeof c&&(c=t.querySelector(c)),c||(c=t),this.findAround(t,c,!0),this.addAll(c,n),n?(this.sync(n),this.open--):r&&(this.marks=r),this.findAround(t,c,!0)}return!0},x.prototype.addAll=function(t,e,n,r){for(var o=this,i=n||0,s=n?t.childNodes[n]:t.firstChild,a=null==r?null:t.childNodes[r];s!=a;s=s.nextSibling,++i)o.findAtPoint(t,i),o.addDOM(s),e&&d.hasOwnProperty(s.nodeName.toLowerCase())&&o.sync(e);this.findAtPoint(t,i)},x.prototype.findPlace=function(t,e){for(var n,r,o=this,i=this.open;i>=0;i--){var s=o.nodes[i],a=s.findWrapping(t,e);if(a&&(!n||n.length>a.length)&&(n=a,r=s,!a.length))break;if(s.solid)break}if(!n)return!1;this.sync(r);for(var c=0;c<n.length;c++)o.enterInner(n[c].type,n[c].attrs,!1);return!0},x.prototype.insertNode=function(t){if(this.findPlace(t.type,t.attrs)){this.closeExtra();var e=this.top;if(e.match){var n=e.match.matchNode(t);n||(t=t.mark(t.marks.filter(function(t){return e.match.allowsMark(t.type)})),n=e.match.matchNode(t)),e.match=n}e.content.push(t)}},x.prototype.enter=function(t,e,n){var r=this.findPlace(t,e);return r&&this.enterInner(t,e,!0,n),r},x.prototype.enterInner=function(t,e,n,r){this.closeExtra();var o=this.top;o.match=o.match&&o.match.matchType(t,e);var i=null==r?o.options&g:r?g:0;o.options&y&&0==o.content.length&&(i|=y),this.nodes.push(new w(t,e,n,null,i)),this.open++},x.prototype.closeExtra=function(t){var e=this,n=this.nodes.length-1;if(n>this.open){for(this.marks=f.none;n>this.open;n--)e.nodes[n-1].content.push(e.nodes[n].finish(t));this.nodes.length=this.open+1}},x.prototype.finish=function(){return this.open=0,this.closeExtra(this.isOpen),this.nodes[0].finish(this.isOpen||this.options.topOpen)},x.prototype.sync=function(t){for(var e=this,n=this.open;n>=0;n--)if(e.nodes[n]==t)return void(e.open=n)},b.currentPos.get=function(){var t=this;this.closeExtra();for(var e=0,n=this.open;n>=0;n--){for(var r=t.nodes[n].content,o=r.length-1;o>=0;o--)e+=r[o].nodeSize;n&&e++}return e},x.prototype.findAtPoint=function(t,e){var n=this;if(this.find)for(var r=0;r<this.find.length;r++)n.find[r].node==t&&n.find[r].offset==e&&(n.find[r].pos=n.currentPos)},x.prototype.findInside=function(t){var e=this;if(this.find)for(var n=0;n<this.find.length;n++)null==e.find[n].pos&&t.contains(e.find[n].node)&&(e.find[n].pos=e.currentPos)},x.prototype.findAround=function(t,e,n){var r=this;if(t!=e&&this.find)for(var o=0;o<this.find.length;o++)if(null==r.find[o].pos&&t.contains(r.find[o].node)){var i=e.compareDocumentPosition(r.find[o].node);i&(n?2:4)&&(r.find[o].pos=r.currentPos)}},x.prototype.findInText=function(t){var e=this;if(this.find)for(var n=0;n<this.find.length;n++)e.find[n].node==t&&(e.find[n].pos=e.currentPos-(t.nodeValue.length-e.find[n].offset))},Object.defineProperties(x.prototype,b),n.exports}),t.registerDynamic("4d",[],!0,function(t,e,n){function r(t){var e={};for(var n in t){var r=t[n].spec.toDOM;r&&(e[n]=r)}return e}function o(t){return t.document||window.document}var i=function(t,e){this.nodes=t||{},this.marks=e||{}};return i.prototype.serializeFragment=function(t,e,n){var r=this;void 0===e&&(e={}),n||(n=o(e).createDocumentFragment());var i=n,s=null;return t.forEach(function(t){if(s||t.marks.length){s||(s=[]);for(var n=0;n<Math.min(s.length,t.marks.length)&&t.marks[n].eq(s[n]);++n);for(;n<s.length;)s.pop(),i=i.parentNode;for(;s.length<t.marks.length;){var o=t.marks[s.length];s.push(o),i=i.appendChild(r.serializeMark(o,e))}}i.appendChild(r.serializeNode(t,e))}),n},i.prototype.serializeNode=function(t,e){return void 0===e&&(e={}),this.renderStructure(this.nodes[t.type.name](t),t,e)},i.prototype.serializeNodeAndMarks=function(t,e){var n=this;void 0===e&&(e={});for(var r=this.serializeNode(t,e),o=t.marks.length-1;o>=0;o--){var i=n.serializeMark(t.marks[o],e);i.appendChild(r),r=i}return r},i.prototype.serializeMark=function(t,e){return void 0===e&&(e={}),this.renderStructure(this.marks[t.type.name](t),null,e)},i.renderSpec=function(t,e){if("string"==typeof e)return{dom:t.createTextNode(e)};if(null!=e.nodeType)return{dom:e};var n=t.createElement(e[0]),r=null,o=e[1],s=1;if(o&&"object"==typeof o&&null==o.nodeType&&!Array.isArray(o)){s=2;for(var a in o)"style"==a?n.style.cssText=o[a]:null!=o[a]&&n.setAttribute(a,o[a])}for(var c=s;c<e.length;c++){var l=e[c];if(0===l){if(c<e.length-1||c>s)throw new RangeError("Content hole must be the only child of its parent node");return{dom:n,contentDOM:n}}var p=i.renderSpec(t,l),u=p.dom,f=p.contentDOM;if(n.appendChild(u),f){if(r)throw new RangeError("Multiple content holes");r=f}}return{dom:n,contentDOM:r}},i.prototype.renderStructure=function(t,e,n){var r=i.renderSpec(o(n),t),s=r.dom,a=r.contentDOM;if(e&&!e.isLeaf){if(!a)throw new RangeError("No content hole in template for non-leaf node");n.onContent?n.onContent(e,a,n):this.serializeFragment(e.content,n,a)}else if(a)throw new RangeError("Content hole not allowed in a mark or leaf node spec");return s},i.fromSchema=function(t){return t.cached.domSerializer||(t.cached.domSerializer=new i(this.nodesFromSchema(t),this.marksFromSchema(t)))},i.nodesFromSchema=function(t){return r(t.nodes)},i.marksFromSchema=function(t){return r(t.marks)},e.DOMSerializer=i,n.exports}),t.registerDynamic("4e",["45","43","46","47","44","49","4a","4c","4d"],!0,function(t,e,n){e.Node=t("45").Node;var r;r=t("43"),e.ResolvedPos=r.ResolvedPos,e.NodeRange=r.NodeRange,e.Fragment=t("46").Fragment;var o;o=t("47"),e.Slice=o.Slice,e.ReplaceError=o.ReplaceError,e.Mark=t("44").Mark;var i;i=t("49"),e.Schema=i.Schema,e.NodeType=i.NodeType,e.MarkType=i.MarkType;var s;return s=t("4a"),e.ContentMatch=s.ContentMatch,e.DOMParser=t("4c").DOMParser,e.DOMSerializer=t("4d").DOMSerializer,n.exports}),t.registerDynamic("3",["4e"],!0,function(t,e,n){return n.exports=t("4e"),n.exports}),t.registerDynamic("4f",["9","3"],!0,function(t,e,n){function r(t,e){var n={};for(var r in t)n[r]=t[r];for(var o in e)n[o]=e[o];return n}function o(t,e,n){return t.append({ordered_list:r(w,{content:"list_item+",group:n}),bullet_list:r(x,{content:"list_item+",group:n}),list_item:r(b,{content:e})})}function i(t,e){return function(n,r){var o=n.selection,i=o.$from,a=o.$to,c=i.blockRange(a),l=!1,p=c;if(c.depth>=2&&i.node(c.depth-1).type.compatibleContent(t)&&0==c.startIndex){if(0==i.index(c.depth-1))return!1;var f=n.doc.resolve(c.start-2);p=new y(f,f,c.depth),c.endIndex<c.parent.childCount&&(c=new y(i,n.doc.resolve(a.end(c.depth)),c.depth)),l=!0}var h=u(p,t,e,c);return!!h&&(r&&r(s(n.tr,c,h,l,t).scrollIntoView()),!0)}}function s(t,e,n,r,o){for(var i=g.empty,s=n.length-1;s>=0;s--)i=g.from(n[s].type.create(n[s].attrs,i));t.step(new d(e.start-(r?2:0),e.end,e.start,e.end,new v(i,0,0),n.length,!0));for(var a=0,c=0;c<n.length;c++)n[c].type==o&&(a=c+1);for(var l=n.length-a,p=e.start+n.length-(r?2:0),u=e.parent,f=e.startIndex,m=e.endIndex,y=!0;f<m;f++,y=!1)!y&&h(t.doc,p,l)&&t.split(p,l),p+=u.child(f).nodeSize+(y?0:2*l);return t}function a(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,s=r.node;if(s&&s.isBlock||!o.parent.content.size||o.depth<2||!o.sameParent(i))return!1;var a=o.node(-1);if(a.type!=t)return!1;var c=i.pos==o.end()?a.defaultContentType(o.indexAfter(-1)):null,l=e.tr["delete"](o.pos,i.pos),p=c&&[null,{type:c}];return!!h(l.doc,o.pos,2,p)&&(n&&n(l.split(o.pos,2,p).scrollIntoView()),!0)}}function c(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,s=o.blockRange(i,function(e){return e.childCount&&e.firstChild.type==t});if(!s||s.depth<2||o.node(s.depth-1).type!=t)return!1;if(n){var a=e.tr,c=s.end,l=i.end(s.depth);c<l&&(a.step(new d(c-1,l,c,l,new v(g.from(t.create(null,s.parent.copy())),1,0),1,!0)),s=new y(a.doc.resolveNoCache(o.pos),a.doc.resolveNoCache(l),s.depth)),n(a.lift(s,f(s)).scrollIntoView())}return!0}}function l(t){return function(e,n){var r=e.selection,o=r.$from,i=r.$to,s=o.blockRange(i,function(e){return e.childCount&&e.firstChild.type==t});if(!s)return!1;var a=s.startIndex;if(0==a)return!1;var c=s.parent,l=c.child(a-1);if(l.type!=t)return!1;if(n){var p=l.lastChild&&l.lastChild.type==c.type,u=g.from(p?t.create():null),f=new v(g.from(t.create(null,g.from(c.copy(u)))),p?3:1,0),h=s.start,m=s.end;n(e.tr.step(new d(h-(p?3:1),m,h,m,f,1,!0)).scrollIntoView())}return!0}}var p=t("9"),u=p.findWrapping,f=p.liftTarget,h=p.canSplit,d=p.ReplaceAroundStep,m=t("3"),v=m.Slice,g=m.Fragment,y=m.NodeRange,w={attrs:{order:{"default":1}},parseDOM:[{tag:"ol",getAttrs:function(t){return{order:t.hasAttribute("start")?+t.getAttribute("start"):1}}}],toDOM:function(t){return["ol",{start:1==t.attrs.order?null:t.attrs.order},0]}};e.orderedList=w;var x={parseDOM:[{tag:"ul"}],toDOM:function(){return["ul",0]}};e.bulletList=x;var b={parseDOM:[{tag:"li"}],toDOM:function(){return["li",0]},defining:!0};return e.listItem=b,e.addListNodes=o,e.wrapInList=i,e.splitListItem=a,e.liftListItem=c,e.sinkListItem=l,n.exports}),t.registerDynamic("2a",["4f"],!0,function(t,e,n){return n.exports=t("4f"),n.exports}),t.register("50",["3","4","7","11","26","37","2a"],function(t){"use strict";function e(t){return m[t]}function n(t){var e=m[t],n=s.fromSchema(d).serializeFragment(e.editor.state.doc.content),r=document.createElement("div");return r.appendChild(n),r.innerHTML}function r(t){var e=document.getElementById(t);return m[t]=new p(e,{floatingMenu:!0,state:c.create({doc:v(e),plugins:u({schema:d})}),onAction:function(e){m[t].updateState(m[t].editor.state.applyAction(e))}}),m[t]}var o,i,s,a,c,l,p,u,f,h,d,m,v;return t("getProseMirror",e),t("getPMContent",n),t("createProseMirror",r),{setters:[function(t){o=t.Schema,i=t.DOMParser,s=t.DOMSerializer},function(t){a=t.schema},function(t){c=t.EditorState},function(t){l=t.EditorView},function(t){p=t.MenuBarEditorView},function(t){u=t.exampleSetup,f=t.buildMenuItems},function(t){h=t.addListNodes}],execute:function(){d=new o({nodes:h(a.nodeSpec,"paragraph block*","block"),marks:a.markSpec}),m={},v=function(t){var e=$(t).find(".d0-card-content").val(),n=document.createElement("div");return n.innerHTML=e,i.fromSchema(d).parse(n)}}}}),t.registerDynamic("1",["50"],!0,function(t,e,n){return pm=t("50"),createProseMirror=pm.createProseMirror,getProseMirror=pm.getProseMirror,getProseMirrorContent=pm.getPMContent,n.exports})})(function(t){t()});
//script: tinymce
window.tinyMCEPreInit=window.tinyMCEPreInit||{base:"/assets/tinymce",query:"3.5.9",suffix:""},function(e){var t,n=/^\s*|\s*$/g,o="$1"==="B".replace(/A(.)|B/,"$1"),r={majorVersion:"3",minorVersion:"5.9",releaseDate:"2013-10-10",_init:function(){function t(e){return e.src&&/tiny_mce(|_gzip|_jquery|_prototype|_full)(_dev|_src)?.js/.test(e.src)?(/_(src|dev)\.js/g.test(e.src)&&(c.suffix="_src"),-1!=(a=e.src.indexOf("?"))&&(c.query=e.src.substring(a+1)),c.baseURL=e.src.substring(0,e.src.lastIndexOf("/")),i&&-1==c.baseURL.indexOf("://")&&0!==c.baseURL.indexOf("/")&&(c.baseURL=i+c.baseURL),c.baseURL):null}var n,o,r,i,a,s,c=this,d=document,l=navigator,u=l.userAgent;if(c.isIE11=-1!=u.indexOf("Trident/")&&-1!=u.indexOf("rv:"),c.isOpera=e.opera&&opera.buildNumber,c.isWebKit=/WebKit/.test(u),c.isIE=!c.isWebKit&&!c.isOpera&&/MSIE/gi.test(u)&&/Explorer/gi.test(l.appName)||c.isIE11,c.isIE6=c.isIE&&/MSIE [56]/.test(u),c.isIE7=c.isIE&&/MSIE [7]/.test(u),c.isIE8=c.isIE&&/MSIE [8]/.test(u),c.isIE9=c.isIE&&/MSIE [9]/.test(u),c.isGecko=!c.isWebKit&&!c.isIE11&&/Gecko/.test(u),c.isMac=-1!=u.indexOf("Mac"),c.isAir=/adobeair/i.test(u),c.isIDevice=/(iPad|iPhone)/.test(u),c.isIOS5=c.isIDevice&&u.match(/AppleWebKit\/(\d*)/)[1]>=534,e.tinyMCEPreInit)return c.suffix=tinyMCEPreInit.suffix,c.baseURL=tinyMCEPreInit.base,void(c.query=tinyMCEPreInit.query);for(c.suffix="",o=d.getElementsByTagName("base"),n=0;n<o.length;n++)(s=o[n].href)&&(/^https?:\/\/[^\/]+$/.test(s)&&(s+="/"),i=s?s.match(/.*\//)[0]:"");for(o=d.getElementsByTagName("script"),n=0;n<o.length;n++)if(t(o[n]))return;if(r=d.getElementsByTagName("head")[0])for(o=r.getElementsByTagName("script"),n=0;n<o.length;n++)if(t(o[n]))return},is:function(e,n){return n?!("array"!=n||!r.isArray(e))||typeof e==n:e!==t},isArray:Array.isArray||function(e){return"[object Array]"===Object.prototype.toString.call(e)},makeMap:function(e,t,n){var o;for(e=e||[],t=t||",","string"==typeof e&&(e=e.split(t)),n=n||{},o=e.length;o--;)n[e[o]]={};return n},each:function(e,n,o){var r,i;if(!e)return 0;if(o=o||e,e.length!==t){for(r=0,i=e.length;i>r;r++)if(!1===n.call(o,e[r],r,e))return 0}else for(r in e)if(e.hasOwnProperty(r)&&!1===n.call(o,e[r],r,e))return 0;return 1},map:function(e,t){var n=[];return r.each(e,function(e){n.push(t(e))}),n},grep:function(e,t){var n=[];return r.each(e,function(e){(!t||t(e))&&n.push(e)}),n},inArray:function(e,t){var n,o;if(e)for(n=0,o=e.length;o>n;n++)if(e[n]===t)return n;return-1},extend:function(e,n){var o,r,i,a,s=arguments;for(o=1,r=s.length;r>o;o++){n=s[o];for(i in n)n.hasOwnProperty(i)&&(a=n[i])!==t&&(e[i]=a)}return e},trim:function(e){return(e?""+e:"").replace(n,"")},create:function(e,t,n){var o,r,i,a,s,c=this,d=0;if(e=/^((static) )?([\w.]+)(:([\w.]+))?/.exec(e),i=e[3].match(/(^|\.)(\w+)$/i)[2],r=c.createNS(e[3].replace(/\.\w+$/,""),n),!r[i]){if("static"==e[2])return r[i]=t,void(this.onCreate&&this.onCreate(e[2],e[3],r[i]));t[i]||(t[i]=function(){},d=1),r[i]=t[i],c.extend(r[i].prototype,t),e[5]&&(o=c.resolve(e[5]).prototype,a=e[5].match(/\.(\w+)$/i)[1],s=r[i],r[i]=d?function(){return o[a].apply(this,arguments)}:function(){return this.parent=o[a],s.apply(this,arguments)},r[i].prototype[i]=r[i],c.each(o,function(e,t){r[i].prototype[t]=o[t]}),c.each(t,function(e,t){o[t]?r[i].prototype[t]=function(){return this.parent=o[t],e.apply(this,arguments)}:t!=i&&(r[i].prototype[t]=e)})),c.each(t["static"],function(e,t){r[i][t]=e}),this.onCreate&&this.onCreate(e[2],e[3],r[i].prototype)}},walk:function(e,t,n,o){o=o||this,e&&(n&&(e=e[n]),r.each(e,function(e,i){return!1!==t.call(o,e,i,n)&&void r.walk(e,t,n,o)}))},createNS:function(t,n){var o,r;for(n=n||e,t=t.split("."),o=0;o<t.length;o++)r=t[o],n[r]||(n[r]={}),n=n[r];return n},resolve:function(t,n){var o,r;for(n=n||e,t=t.split("."),o=0,r=t.length;r>o&&(n=n[t[o]]);o++);return n},addUnload:function(t,n){function o(){function t(){n.detachEvent("onstop",t),r&&r(),n=0}var n=document;"interactive"==n.readyState&&(n&&n.attachEvent("onstop",t),e.setTimeout(function(){n&&n.detachEvent("onstop",t)},0))}var r,i=this;return r=function(){var t,n,a=i.unloads;if(a){for(n in a)(t=a[n])&&t.func&&t.func.call(t.scope,1);e.detachEvent?(e.detachEvent("onbeforeunload",o),e.detachEvent("onunload",r)):e.removeEventListener&&e.removeEventListener("unload",r,!1),i.unloads=t=a=w=r=0,e.CollectGarbage&&CollectGarbage()}},t={func:t,scope:n||this},i.unloads?i.unloads.push(t):(e.attachEvent?(e.attachEvent("onunload",r),e.attachEvent("onbeforeunload",o)):e.addEventListener&&e.addEventListener("unload",r,!1),i.unloads=[t]),t},removeUnload:function(e){var t=this.unloads,n=null;return r.each(t,function(o,r){return o&&o.func==e?(t.splice(r,1),n=e,!1):void 0}),n},explode:function(e,t){return!e||r.is(e,"array")?e:r.map(e.split(t||","),r.trim)},_addVer:function(e){var t;return this.query?(t=(-1==e.indexOf("?")?"?":"&")+this.query,-1==e.indexOf("#")?e+t:e.replace("#",t+"#")):e},_replace:function(e,n,r){return o?r.replace(e,function(){var e,o=n,r=arguments;for(e=0;e<r.length-2;e++)o=r[e]===t?o.replace(new RegExp("\\$"+e,"g"),""):o.replace(new RegExp("\\$"+e,"g"),r[e]);return o}):r.replace(e,n)}};r._init(),e.tinymce=e.tinyMCE=r}(window),tinymce.create("tinymce.util.Dispatcher",{scope:null,listeners:null,inDispatch:!1,Dispatcher:function(e){this.scope=e||this,this.listeners=[]},add:function(e,t){return this.listeners.push({cb:e,scope:t||this.scope}),e},addToTop:function(e,t){var n=this,o={cb:e,scope:t||n.scope};return n.inDispatch?n.listeners=[o].concat(n.listeners):n.listeners.unshift(o),e},remove:function(e){var t=this.listeners,n=null;return tinymce.each(t,function(o,r){return e==o.cb?(n=o,t.splice(r,1),!1):void 0}),n},dispatch:function(){var e,t,n,o=this,r=arguments,i=o.listeners;for(o.inDispatch=!0,t=0;t<i.length&&(n=i[t],!1!==(e=n.cb.apply(n.scope,r.length>0?r:[n.scope])));t++);return o.inDispatch=!1,e}}),function(){var e=tinymce.each;tinymce.create("tinymce.util.URI",{URI:function(t,n){var o,r,i=this;return t=tinymce.trim(t),n=i.settings=n||{},/^([\w\-]+):([^\/]{2})/i.test(t)||/^\s*#/.test(t)?void(i.source=t):(0===t.indexOf("/")&&0!==t.indexOf("//")&&(t=(n.base_uri?n.base_uri.protocol||"http":"http")+"://mce_host"+t),/^[\w\-]*:?\/\//.test(t)||(r=n.base_uri?n.base_uri.path:new tinymce.util.URI(location.href).directory,t=(n.base_uri&&n.base_uri.protocol||"http")+"://mce_host"+i.toAbsPath(r,t)),t=t.replace(/@@/g,"(mce_at)"),t=/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@\/]*):?([^:@\/]*))?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/.exec(t),e(["source","protocol","authority","userInfo","user","password","host","port","relative","path","directory","file","query","anchor"],function(e,n){var o=t[n];o&&(o=o.replace(/\(mce_at\)/g,"@@")),i[e]=o}),void((o=n.base_uri)&&(i.protocol||(i.protocol=o.protocol),i.userInfo||(i.userInfo=o.userInfo),i.port||"mce_host"!==i.host||(i.port=o.port),i.host&&"mce_host"!==i.host||(i.host=o.host),i.source="")))},setPath:function(e){var t=this;e=/^(.*?)\/?(\w+)?$/.exec(e),t.path=e[0],t.directory=e[1],t.file=e[2],t.source="",t.getURI()},toRelative:function(e){var t,n=this;if("./"===e)return e;if(e=new tinymce.util.URI(e,{base_uri:n}),"mce_host"!=e.host&&n.host!=e.host&&e.host||n.port!=e.port||n.protocol!=e.protocol)return e.getURI();var o=n.getURI(),r=e.getURI();return o==r||"/"==o.charAt(o.length-1)&&o.substr(0,o.length-1)==r?o:(t=n.toRelPath(n.path,e.path),e.query&&(t+="?"+e.query),e.anchor&&(t+="#"+e.anchor),t)},toAbsolute:function(e,t){return e=new tinymce.util.URI(e,{base_uri:this}),e.getURI(this.host==e.host&&this.protocol==e.protocol?t:0)},toRelPath:function(e,t){var n,o,r,i=0,a="";if(e=e.substring(0,e.lastIndexOf("/")),e=e.split("/"),n=t.split("/"),e.length>=n.length)for(o=0,r=e.length;r>o;o++)if(o>=n.length||e[o]!=n[o]){i=o+1;break}if(e.length<n.length)for(o=0,r=n.length;r>o;o++)if(o>=e.length||e[o]!=n[o]){i=o+1;break}if(1===i)return t;for(o=0,r=e.length-(i-1);r>o;o++)a+="../";for(o=i-1,r=n.length;r>o;o++)a+=o!=i-1?"/"+n[o]:n[o];return a},toAbsPath:function(t,n){var o,r,i,a=0,s=[];for(r=/\/$/.test(n)?"/":"",t=t.split("/"),n=n.split("/"),e(t,function(e){e&&s.push(e)}),t=s,o=n.length-1,s=[];o>=0;o--)0!==n[o].length&&"."!==n[o]&&(".."!==n[o]?a>0?a--:s.push(n[o]):a++);return o=t.length-a,i=0>=o?s.reverse().join("/"):t.slice(0,o).join("/")+"/"+s.reverse().join("/"),0!==i.indexOf("/")&&(i="/"+i),r&&i.lastIndexOf("/")!==i.length-1&&(i+=r),i},getURI:function(e){var t,n=this;return(!n.source||e)&&(t="",e||(n.protocol&&(t+=n.protocol+"://"),n.userInfo&&(t+=n.userInfo+"@"),n.host&&(t+=n.host),n.port&&(t+=":"+n.port)),n.path&&(t+=n.path),n.query&&(t+="?"+n.query),n.anchor&&(t+="#"+n.anchor),n.source=t),n.source}})}(),function(){var e=tinymce.each;tinymce.create("static tinymce.util.Cookie",{getHash:function(t){var n,o=this.get(t);return o&&e(o.split("&"),function(e){e=e.split("="),n=n||{},n[unescape(e[0])]=unescape(e[1])}),n},setHash:function(t,n,o,r,i,a){var s="";e(n,function(e,t){s+=(s?"&":"")+escape(t)+"="+escape(e)}),this.set(t,s,o,r,i,a)},get:function(e){var t,n,o=document.cookie,r=e+"=";if(o){if(-1==(n=o.indexOf("; "+r))){if(0!==(n=o.indexOf(r)))return null}else n+=2;return t=o.indexOf(";",n),-1==t&&(t=o.length),unescape(o.substring(n+r.length,t))}},set:function(e,t,n,o,r,i){document.cookie=e+"="+escape(t)+(n?"; expires="+n.toGMTString():"")+(o?"; path="+escape(o):"")+(r?"; domain="+r:"")+(i?"; secure":"")},remove:function(e,t,n){var o=new Date;o.setTime(o.getTime()-1e3),this.set(e,"",o,t,n)}})}(),function(){function serialize(e,t){var n,o,r,i;if(t=t||'"',null==e)return"null";if("string"==(r=typeof e))return o="\bb\tt\nn\ff\rr\"\"''\\\\",t+e.replace(/([\u0080-\uFFFF\x00-\x1f\"\'\\])/g,function(e,r){return'"'===t&&"'"===e?e:(n=o.indexOf(r),n+1?"\\"+o.charAt(n+1):(e=r.charCodeAt().toString(16),"\\u"+"0000".substring(e.length)+e))})+t;if("object"==r){if(e.hasOwnProperty&&"[object Array]"===Object.prototype.toString.call(e)){for(n=0,o="[";n<e.length;n++)o+=(n>0?",":"")+serialize(e[n],t);return o+"]"}o="{";for(i in e)e.hasOwnProperty(i)&&(o+="function"!=typeof e[i]?(o.length>1?","+t:t)+i+t+":"+serialize(e[i],t):"");return o+"}"}return""+e}tinymce.util.JSON={serialize:serialize,parse:function(s){try{return eval("("+s+")")}catch(e){}}}}(),tinymce.create("static tinymce.util.XHR",{send:function(e){function t(){!e.async||4==o.readyState||i++>1e4?(e.success&&1e4>i&&200==o.status?e.success.call(e.success_scope,""+o.responseText,o,e):e.error&&e.error.call(e.error_scope,i>1e4?"TIMED_OUT":"GENERAL",o,e),o=null):r.setTimeout(t,10)}function n(e){o=0;try{o=new ActiveXObject(e)}catch(e){}return o}var o,r=window,i=0;if(e.scope=e.scope||this,e.success_scope=e.success_scope||e.scope,e.error_scope=e.error_scope||e.scope,e.async=!1!==e.async,e.data=e.data||"",o=r.XMLHttpRequest?new XMLHttpRequest:n("Microsoft.XMLHTTP")||n("Msxml2.XMLHTTP")){if(o.overrideMimeType&&o.overrideMimeType(e.content_type),o.open(e.type||(e.data?"POST":"GET"),e.url,e.async),e.content_type&&o.setRequestHeader("Content-Type",e.content_type),o.setRequestHeader("X-Requested-With","XMLHttpRequest"),o.send(e.data),!e.async)return t();r.setTimeout(t,10)}}}),function(){var e=tinymce.extend,t=tinymce.util.JSON,n=tinymce.util.XHR;tinymce.create("tinymce.util.JSONRequest",{JSONRequest:function(t){this.settings=e({},t),this.count=0},send:function(o){var r=o.error,i=o.success;o=e(this.settings,o),o.success=function(e,n){e=t.parse(e),void 0===e&&(e={error:"JSON Parse error."}),e.error?r.call(o.error_scope||o.scope,e.error,n):i.call(o.success_scope||o.scope,e.result)},o.error=function(e,t){r&&r.call(o.error_scope||o.scope,e,t)},o.data=t.serialize({id:o.id||"c"+this.count++,method:o.method,params:o.params}),o.content_type="application/json",n.send(o)},"static":{sendRPC:function(e){return(new tinymce.util.JSONRequest).send(e)}}})}(),function(e){e.VK={BACKSPACE:8,DELETE:46,DOWN:40,ENTER:13,LEFT:37,RIGHT:39,SPACEBAR:32,TAB:9,UP:38,modifierPressed:function(e){return e.shiftKey||e.ctrlKey||e.altKey},metaKeyPressed:function(t){return e.isMac?t.metaKey:t.ctrlKey&&!t.altKey}}}(tinymce),tinymce.util.Quirks=function(e){function t(t,n){try{e.getDoc().execCommand(t,!1,n)}catch(e){}}function n(){var t=e.getDoc().documentMode;return t||6}function o(e){return e.isDefaultPrevented()}function r(){function t(t){function n(){if(3==s.nodeType){if(t&&c==s.length)return!0;if(!t&&0===c)return!0}}var o,r,i,a,s,c,d;o=R.getRng();var l=[o.startContainer,o.startOffset,o.endContainer,o.endOffset];if(o.collapsed||(t=!0),s=o[(t?"start":"end")+"Container"],c=o[(t?"start":"end")+"Offset"],3==s.nodeType&&(r=M.getParent(o.startContainer,M.isBlock),t&&(r=M.getNext(r,M.isBlock)),!r||!n()&&o.collapsed||(i=M.create("em",{id:"__mceDel"}),P(tinymce.grep(r.childNodes),function(e){i.appendChild(e)}),r.appendChild(i))),o=M.createRng(),o.setStart(l[0],l[1]),o.setEnd(l[2],l[3]),R.setRng(o),e.getDoc().execCommand(t?"ForwardDelete":"Delete",!1,null),i){for(a=R.getBookmark();d=M.get("__mceDel");)M.remove(d,!0);R.moveToBookmark(a)}}e.onKeyDown.add(function(e,n){var r;r=n.keyCode==B,o(n)||!r&&n.keyCode!=A||T.modifierPressed(n)||(n.preventDefault(),t(r))}),e.addCommand("Delete",function(){t()})}function i(){function t(e){var t=M.create("body"),n=e.cloneContents();return t.appendChild(n),R.serializer.serialize(t,{format:"html"})}function n(n){var o=t(n),r=M.createRng();return r.selectNode(e.getBody()),o===t(r)}e.onKeyDown.add(function(e,t){var r,i=t.keyCode;if(!o(t)&&(i==B||i==A)){if((r=e.selection.isCollapsed())&&!M.isEmpty(e.getBody()))return;if(tinymce.isIE&&!r)return;if(!r&&!n(e.selection.getRng()))return;e.setContent(""),e.selection.setCursorLocation(e.getBody(),0),e.nodeChanged()}})}function a(){e.onKeyDown.add(function(e,t){!o(t)&&65==t.keyCode&&T.metaKeyPressed(t)&&(t.preventDefault(),e.execCommand("SelectAll"))})}function s(){e.settings.content_editable||(M.bind(e.getDoc(),"focusin",function(){R.setRng(R.getRng())}),M.bind(e.getDoc(),"mousedown",function(t){t.target==e.getDoc().documentElement&&(e.getWin().focus(),R.setRng(R.getRng()))}))}function c(){e.onKeyDown.add(function(e,t){if(!o(t)&&t.keyCode===A&&R.isCollapsed()&&0===R.getRng(!0).startOffset){var n=R.getNode(),r=n.previousSibling;r&&r.nodeName&&"hr"===r.nodeName.toLowerCase()&&(M.remove(r),tinymce.dom.Event.cancel(t))}})}function d(){Range.prototype.getClientRects||e.onMouseDown.add(function(e,t){if(!o(t)&&"HTML"===t.target.nodeName){var n=e.getBody();n.blur(),setTimeout(function(){n.focus()},0)}})}function l(){e.onClick.add(function(e,t){t=t.target,/^(IMG|HR)$/.test(t.nodeName)&&R.getSel().setBaseAndExtent(t,0,t,1),"A"==t.nodeName&&M.hasClass(t,"mceItemAnchor")&&R.select(t),e.nodeChanged()})}function u(){function t(){var t=M.getAttribs(R.getStart().cloneNode(!1));return function(){var n=R.getStart();n!==e.getBody()&&(M.setAttrib(n,"style",null),P(t,function(e){n.setAttributeNode(e.cloneNode(!0))}))}}function n(){return!R.isCollapsed()&&M.getParent(R.getStart(),M.isBlock)!=M.getParent(R.getEnd(),M.isBlock)}function r(e,t){return t.preventDefault(),!1}e.onKeyPress.add(function(e,r){var i;return o(r)||8!=r.keyCode&&46!=r.keyCode||!n()?void 0:(i=t(),e.getDoc().execCommand("delete",!1,null),i(),r.preventDefault(),!1)}),M.bind(e.getDoc(),"cut",function(i){var a;!o(i)&&n()&&(a=t(),e.onKeyUp.addToTop(r),setTimeout(function(){a(),e.onKeyUp.remove(r)},0))})}function f(){var t,n;M.bind(e.getDoc(),"selectionchange",function(){n&&(clearTimeout(n),n=0),n=window.setTimeout(function(){var n=R.getRng();t&&tinymce.dom.RangeUtils.compareRanges(n,t)||(e.nodeChanged(),t=n)},50)})}function p(){document.body.setAttribute("role","application")}function m(){e.onKeyDown.add(function(e,t){if(!o(t)&&t.keyCode===A&&R.isCollapsed()&&0===R.getRng(!0).startOffset){var n=R.getNode().previousSibling;if(n&&n.nodeName&&"table"===n.nodeName.toLowerCase())return tinymce.dom.Event.cancel(t)}})}function h(){n()>7||(t("RespectVisibilityInDesign",!0),e.contentStyles.push(".mceHideBrInPre pre br {display: none}"),M.addClass(e.getBody(),"mceHideBrInPre"),I.addNodeFilter("pre",function(e){for(var t,n,o,r,i=e.length;i--;)for(t=e[i].getAll("br"),n=t.length;n--;)o=t[n],r=o.prev,r&&3===r.type&&"\n"!=r.value.charAt(r.value-1)?r.value+="\n":o.parent.insert(new tinymce.html.Node("#text",3),o,!0).value="\n"}),D.addNodeFilter("pre",function(e){for(var t,n,o,r,i=e.length;i--;)for(t=e[i].getAll("br"),n=t.length;n--;)o=t[n],(r=o.prev)&&3==r.type&&(r.value=r.value.replace(/\r?\n$/,""))}))}function g(){M.bind(e.getBody(),"mouseup",function(){var e,t=R.getNode();"IMG"==t.nodeName&&((e=M.getStyle(t,"width"))&&(M.setAttrib(t,"width",e.replace(/[^0-9%]+/g,"")),M.setStyle(t,"width","")),(e=M.getStyle(t,"height"))&&(M.setAttrib(t,"height",e.replace(/[^0-9%]+/g,"")),M.setStyle(t,"height","")))})}function v(){e.onKeyDown.add(function(e,t){var n,r,i,a,s,c,d;if(n=t.keyCode==B,!o(t)&&(n||t.keyCode==A)&&!T.modifierPressed(t)&&(r=R.getRng(),i=r.startContainer,a=r.startOffset,d=r.collapsed,3==i.nodeType&&i.nodeValue.length>0&&(0===a&&!d||d&&a===(n?0:1)))){if((c=i.previousSibling)&&"IMG"==c.nodeName)return;nonEmptyElements=e.schema.getNonEmptyElements(),t.preventDefault(),s=M.create("br",{id:"__tmp"}),i.parentNode.insertBefore(s,i),e.getDoc().execCommand(n?"ForwardDelete":"Delete",!1,null),i=R.getRng().startContainer,c=i.previousSibling,c&&1==c.nodeType&&!M.isBlock(c)&&M.isEmpty(c)&&!nonEmptyElements[c.nodeName.toLowerCase()]&&M.remove(c),M.remove("__tmp")}})}function y(){e.onKeyDown.add(function(e,t){var n,r,i,a,s;if(!o(t)&&t.keyCode==T.BACKSPACE&&(n=R.getRng(),r=n.startContainer,i=n.startOffset,a=M.getRoot(),s=r,n.collapsed&&0===i)){for(;s&&s.parentNode&&s.parentNode.firstChild==s&&s.parentNode!=a;)s=s.parentNode;"BLOCKQUOTE"===s.tagName&&(e.formatter.toggle("blockquote",null,s),n=M.createRng(),n.setStart(r,0),n.setEnd(r,0),R.setRng(n))}})}function b(){function n(){e._refreshContentEditable(),t("StyleWithCSS",!1),t("enableInlineTableEditing",!1),L.object_resizing||t("enableObjectResizing",!1)}L.readonly||(e.onBeforeExecCommand.add(n),e.onMouseDown.add(n))}function C(){function t(){P(M.select("a"),function(e){var t=e.parentNode,n=M.getRoot();if(t.lastChild===e){for(;t&&!M.isBlock(t);){if(t.parentNode.lastChild!==t||t===n)return;t=t.parentNode}M.add(t,"br",{"data-mce-bogus":1})}})}e.onExecCommand.add(function(e,n){"CreateLink"===n&&t(e)}),e.onSetContent.add(R.onSetContent.add(t))}function x(){L.forced_root_block&&e.onInit.add(function(){t("DefaultParagraphSeparator",L.forced_root_block)})}function _(){function t(t,n){t&&n.initial||e.execCommand("mceRepaint")}e.onUndo.add(t),e.onRedo.add(t),e.onSetContent.add(t)}function E(){e.onKeyDown.add(function(e,t){var n;o(t)||t.keyCode!=A||(n=e.getDoc().selection.createRange())&&n.item&&(t.preventDefault(),e.undoManager.beforeChange(),M.remove(n.item(0)),e.undoManager.add())})}function S(){var t;n()>=10&&(t="",P("p div h1 h2 h3 h4 h5 h6".split(" "),function(e,n){t+=(n>0?",":"")+e+":empty"}),e.contentStyles.push(t+"{padding-right: 1px !important}"))}function k(){function n(e){var t,n;t=e.screenX-f,n=e.screenY-p,y=t*u[2]+m,b=n*u[3]+h,y=5>y?5:y,b=5>b?5:b,(T.modifierPressed(e)||"IMG"==d.nodeName&&u[2]*u[3]!=0)&&(y=Math.round(b/g),b=Math.round(y*g)),M.setStyles(l,{width:y,height:b}),u[2]<0&&l.clientWidth<=y&&M.setStyle(l,"left",s+(m-y)),u[3]<0&&l.clientHeight<=b&&M.setStyle(l,"top",c+(h-b))}function o(){function t(t,n){n&&(d.style[t]||!e.schema.isValid(d.nodeName.toLowerCase(),t)?M.setStyle(d,t,n):M.setAttrib(d,t,n))}t("width",y),t("height",b),M.unbind(x,"mousemove",n),M.unbind(x,"mouseup",o),C!=x&&(M.unbind(C,"mousemove",n),M.unbind(C,"mouseup",o)),M.remove(l),r(d)}function r(e){var t,r,a;i(),t=M.getPos(e),s=t.x,c=t.y,r=e.offsetWidth,a=e.offsetHeight,d!=e&&(d=e,y=b=0),P(v,function(e,t){var i;i=M.get("mceResizeHandle"+t),i?M.show(i):(i=M.add(x.documentElement,"div",{id:"mceResizeHandle"+t,"class":"mceResizeHandle",style:"cursor:"+t+"-resize; margin:0; padding:0"}),M.bind(i,"mousedown",function(t){t.preventDefault(),o(),f=t.screenX,p=t.screenY,m=d.clientWidth,h=d.clientHeight,g=h/m,u=e,l=d.cloneNode(!0),M.addClass(l,"mceClonedResizable"),M.setStyles(l,{left:s,top:c,margin:0}),x.documentElement.appendChild(l),M.bind(x,"mousemove",n),M.bind(x,"mouseup",o),C!=x&&(M.bind(C,"mousemove",n),M.bind(C,"mouseup",o))})),M.setStyles(i,{left:r*e[0]+s-i.offsetWidth/2,top:a*e[1]+c-i.offsetHeight/2})}),tinymce.isOpera||"IMG"!=d.nodeName||d.setAttribute("data-mce-selected","1")}function i(){d&&d.removeAttribute("data-mce-selected");for(var e in v)M.hide("mceResizeHandle"+e)}function a(){var e=M.getParent(R.getNode(),"table,img");P(M.select("img[data-mce-selected]"),function(e){e.removeAttribute("data-mce-selected")}),e?r(e):i()}var s,c,d,l,u,f,p,m,h,g,v,y,b,C=document,x=e.getDoc();L.object_resizing&&!1!==L.webkit_fake_resize&&(t("enableObjectResizing",!1),v={n:[.5,0,0,-1],e:[1,.5,1,0],s:[.5,1,0,1],w:[0,.5,-1,0],nw:[0,0,-1,-1],ne:[1,0,1,-1],se:[1,1,1,1],sw:[0,1,-1,1]},e.contentStyles.push(".mceResizeHandle {position: absolute;border: 1px solid black;background: #FFF;width: 5px;height: 5px;z-index: 10000}.mceResizeHandle:hover {background: #000}img[data-mce-selected] {outline: 1px solid black}img.mceClonedResizable, table.mceClonedResizable {position: absolute;outline: 1px dashed black;opacity: .5;z-index: 10000}"),e.onNodeChange.add(a),M.bind(x,"selectionchange",a),e.serializer.addAttributeFilter("data-mce-selected",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}))}function w(){n()<9&&(I.addNodeFilter("noscript",function(e){for(var t,n,o=e.length;o--;)t=e[o],(n=t.firstChild)&&t.attr("data-mce-innertext",n.value)}),D.addNodeFilter("noscript",function(e){for(var t,n,o,r=e.length;r--;)t=e[r],n=e[r].firstChild,n?n.value=tinymce.html.Entities.decode(n.value):(o=t.attributes.map["data-mce-innertext"])&&(t.attr("data-mce-innertext",null),n=new tinymce.html.Node("#text",3),n.value=o,n.raw=!0,t.append(n))}))}function N(){e.contentStyles.push("body {min-height: 100px}"),e.onClick.add(function(t,n){"HTML"==n.target.nodeName&&(e.execCommand("SelectAll"),e.selection.collapse(!0),e.nodeChanged())})}var T=tinymce.VK,A=T.BACKSPACE,B=T.DELETE,M=e.dom,R=e.selection,L=e.settings,I=e.parser,D=e.serializer,P=tinymce.each;m(),y(),i(),tinymce.isWebKit&&(v(),r(),s(),l(),x(),tinymce.isIDevice?f():(k(),a())),tinymce.isIE&&!tinymce.isIE11&&(c(),p(),h(),g(),E(),S(),w()),tinymce.isIE11&&N(),tinymce.isGecko&&!tinymce.isIE11&&(c(),d(),u(),b(),C(),_()),tinymce.isOpera&&k()},function(e){function t(e){var t;return t=document.createElement("div"),t.innerHTML=e,t.textContent||t.innerText||e}function n(e,t){var n,o,i,a={};if(e){for(e=e.split(","),t=t||10,n=0;n<e.length;n+=2)o=String.fromCharCode(parseInt(e[n],t)),r[o]||(i="&"+e[n+1]+";",a[o]=i,a[i]=o);return a}}var o,r,i,a=/[&<>\"\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,s=/[<>&\u007E-\uD7FF\uE000-\uFFEF]|[\uD800-\uDBFF][\uDC00-\uDFFF]/g,c=/[<>&\"\']/g,d=/&(#x|#)?([\w]+);/g,l={128:"\u20ac",130:"\u201a",131:"\u0192",132:"\u201e",133:"\u2026",134:"\u2020",135:"\u2021",136:"\u02c6",137:"\u2030",138:"\u0160",139:"\u2039",140:"\u0152",142:"\u017d",145:"\u2018",146:"\u2019",147:"\u201c",148:"\u201d",149:"\u2022",150:"\u2013",151:"\u2014",152:"\u02dc",153:"\u2122",154:"\u0161",155:"\u203a",156:"\u0153",158:"\u017e",159:"\u0178"};r={'"':"&quot;","'":"&#39;","<":"&lt;",">":"&gt;","&":"&amp;"},i={"&lt;":"<","&gt;":">","&amp;":"&","&quot;":'"',"&apos;":"'"},o=n("50,nbsp,51,iexcl,52,cent,53,pound,54,curren,55,yen,56,brvbar,57,sect,58,uml,59,copy,5a,ordf,5b,laquo,5c,not,5d,shy,5e,reg,5f,macr,5g,deg,5h,plusmn,5i,sup2,5j,sup3,5k,acute,5l,micro,5m,para,5n,middot,5o,cedil,5p,sup1,5q,ordm,5r,raquo,5s,frac14,5t,frac12,5u,frac34,5v,iquest,60,Agrave,61,Aacute,62,Acirc,63,Atilde,64,Auml,65,Aring,66,AElig,67,Ccedil,68,Egrave,69,Eacute,6a,Ecirc,6b,Euml,6c,Igrave,6d,Iacute,6e,Icirc,6f,Iuml,6g,ETH,6h,Ntilde,6i,Ograve,6j,Oacute,6k,Ocirc,6l,Otilde,6m,Ouml,6n,times,6o,Oslash,6p,Ugrave,6q,Uacute,6r,Ucirc,6s,Uuml,6t,Yacute,6u,THORN,6v,szlig,70,agrave,71,aacute,72,acirc,73,atilde,74,auml,75,aring,76,aelig,77,ccedil,78,egrave,79,eacute,7a,ecirc,7b,euml,7c,igrave,7d,iacute,7e,icirc,7f,iuml,7g,eth,7h,ntilde,7i,ograve,7j,oacute,7k,ocirc,7l,otilde,7m,ouml,7n,divide,7o,oslash,7p,ugrave,7q,uacute,7r,ucirc,7s,uuml,7t,yacute,7u,thorn,7v,yuml,ci,fnof,sh,Alpha,si,Beta,sj,Gamma,sk,Delta,sl,Epsilon,sm,Zeta,sn,Eta,so,Theta,sp,Iota,sq,Kappa,sr,Lambda,ss,Mu,st,Nu,su,Xi,sv,Omicron,t0,Pi,t1,Rho,t3,Sigma,t4,Tau,t5,Upsilon,t6,Phi,t7,Chi,t8,Psi,t9,Omega,th,alpha,ti,beta,tj,gamma,tk,delta,tl,epsilon,tm,zeta,tn,eta,to,theta,tp,iota,tq,kappa,tr,lambda,ts,mu,tt,nu,tu,xi,tv,omicron,u0,pi,u1,rho,u2,sigmaf,u3,sigma,u4,tau,u5,upsilon,u6,phi,u7,chi,u8,psi,u9,omega,uh,thetasym,ui,upsih,um,piv,812,bull,816,hellip,81i,prime,81j,Prime,81u,oline,824,frasl,88o,weierp,88h,image,88s,real,892,trade,89l,alefsym,8cg,larr,8ch,uarr,8ci,rarr,8cj,darr,8ck,harr,8dl,crarr,8eg,lArr,8eh,uArr,8ei,rArr,8ej,dArr,8ek,hArr,8g0,forall,8g2,part,8g3,exist,8g5,empty,8g7,nabla,8g8,isin,8g9,notin,8gb,ni,8gf,prod,8gh,sum,8gi,minus,8gn,lowast,8gq,radic,8gt,prop,8gu,infin,8h0,ang,8h7,and,8h8,or,8h9,cap,8ha,cup,8hb,int,8hk,there4,8hs,sim,8i5,cong,8i8,asymp,8j0,ne,8j1,equiv,8j4,le,8j5,ge,8k2,sub,8k3,sup,8k4,nsub,8k6,sube,8k7,supe,8kl,oplus,8kn,otimes,8l5,perp,8m5,sdot,8o8,lceil,8o9,rceil,8oa,lfloor,8ob,rfloor,8p9,lang,8pa,rang,9ea,loz,9j0,spades,9j3,clubs,9j5,hearts,9j6,diams,ai,OElig,aj,oelig,b0,Scaron,b1,scaron,bo,Yuml,m6,circ,ms,tilde,802,ensp,803,emsp,809,thinsp,80c,zwnj,80d,zwj,80e,lrm,80f,rlm,80j,ndash,80k,mdash,80o,lsquo,80p,rsquo,80q,sbquo,80s,ldquo,80t,rdquo,80u,bdquo,810,dagger,811,Dagger,81g,permil,81p,lsaquo,81q,rsaquo,85c,euro",32),e.html=e.html||{},e.html.Entities={encodeRaw:function(e,t){return e.replace(t?a:s,function(e){return r[e]||e})},encodeAllRaw:function(e){return(""+e).replace(c,function(e){return r[e]||e})},encodeNumeric:function(e,t){return e.replace(t?a:s,function(e){return e.length>1?"&#"+(1024*(e.charCodeAt(0)-55296)+(e.charCodeAt(1)-56320)+65536)+";":r[e]||"&#"+e.charCodeAt(0)+";"})},encodeNamed:function(e,t,n){return n=n||o,e.replace(t?a:s,function(e){return r[e]||n[e]||e})},getEncodeFunc:function(t,i){function c(e,t){return e.replace(t?a:s,function(e){return r[e]||i[e]||"&#"+e.charCodeAt(0)+";"||e})}function d(e,t){return l.encodeNamed(e,t,i)}var l=e.html.Entities;return i=n(i)||o,t=e.makeMap(t.replace(/\+/g,",")),t.named&&t.numeric?c:t.named?i?d:l.encodeNamed:t.numeric?l.encodeNumeric:l.encodeRaw},decode:function(e){return e.replace(d,function(e,n,r){return n?(r=parseInt(r,2===n.length?16:10),r>65535?(r-=65536,String.fromCharCode(55296+(r>>10),56320+(1023&r))):l[r]||String.fromCharCode(r)):i[e]||o[e]||t(e)})}}}(tinymce),tinymce.html.Styles=function(e,t){function n(e,t,n,o){function r(e){return e=parseInt(e).toString(16),e.length>1?e:"0"+e}return"#"+r(t)+r(n)+r(o)}var o,r,i,a=/rgb\s*\(\s*([0-9]+)\s*,\s*([0-9]+)\s*,\s*([0-9]+)\s*\)/gi,s=/(?:url(?:(?:\(\s*\"([^\"]+)\"\s*\))|(?:\(\s*\'([^\']+)\'\s*\))|(?:\(\s*([^)\s]+)\s*\))))|(?:\'([^\']+)\')|(?:\"([^\"]+)\")/gi,c=/\s*([^:]+):\s*([^;]+);?/g,d=/\s+$/,l={};for(e=e||{},i="\\\" \\' \\; \\: ; : \ufeff".split(" "),r=0;r<i.length;r++)l[i[r]]="\ufeff"+r,l["\ufeff"+r]=i[r];return{toHex:function(e){return e.replace(a,n)},parse:function(t){function o(e,t){var n,o,r,i;"none"===y["border-image"]&&delete y["border-image"],(n=y[e+"-top"+t])&&(o=y[e+"-right"+t],n==o&&(r=y[e+"-bottom"+t],o==r&&(i=y[e+"-left"+t],r==i&&(y[e+t]=i,delete y[e+"-top"+t],delete y[e+"-right"+t],delete y[e+"-bottom"+t],delete y[e+"-left"+t]))))}function r(e){var t,n=y[e];if(n&&!(n.indexOf(" ")<0)){for(n=n.split(" "),t=n.length;t--;)if(n[t]!==n[0])return!1;return y[e]=n[0],!0}}function i(e,t,n,o){r(t)&&r(n)&&r(o)&&(y[e]=y[t]+" "+y[n]+" "+y[o],delete y[t],delete y[n],delete y[o])}function u(e){return v=!0,l[e]}function f(e,t){return v&&(e=e.replace(/\uFEFF[0-9]/g,function(e){return l[e]})),t||(e=e.replace(/\\([\'\";:])/g,"$1")),e}function p(e,t,n,o,r,i){return(r=r||i)?(r=f(r),"'"+r.replace(/\'/g,"\\'")+"'"):(t=f(t||n||o),b&&(t=b.call(C,t,"style")),"url('"+t.replace(/\'/g,"\\'")+"')")}var m,h,g,v,y={},b=e.url_converter,C=e.url_converter_scope||this;if(t){for(t=t.replace(/\\[\"\';:\uFEFF]/g,u).replace(/\"[^\"]+\"|\'[^\']+\'/g,function(e){return e.replace(/[;:]/g,u)});m=c.exec(t);)h=m[1].replace(d,"").toLowerCase(),g=m[2].replace(d,""),h&&g.length>0&&("font-weight"===h&&"700"===g?g="bold":("color"===h||"background-color"===h)&&(g=g.toLowerCase()),g=g.replace(a,n),g=g.replace(s,p),y[h]=v?f(g,!0):g),c.lastIndex=m.index+m[0].length;o("border",""),o("border","-width"),o("border","-color"),o("border","-style"),o("padding",""),o("margin",""),i("border","border-width","border-style","border-color"),"medium none"===y.border&&delete y.border}return y},serialize:function(e,n){function r(n){var r,i,a,c;if(r=t.styles[n])for(i=0,a=r.length;a>i;i++)n=r[i],(c=e[n])!==o&&c.length>0&&(s+=(s.length>0?" ":"")+n+": "+c+";")}var i,a,s="";if(n&&t&&t.styles)r("*"),r(n);else for(i in e)(a=e[i])!==o&&a.length>0&&(s+=(s.length>0?" ":"")+i+": "+a+";");return s}}},function(e){function t(e,t){return e.split(t||",")}function n(e,n){function o(t){return t.replace(/[A-Z]+/g,function(t){return o(e[t])})}var r,i={};for(r in e)e.hasOwnProperty(r)&&(e[r]=o(e[r]));return o(n).replace(/#/g,"#text").replace(/(\w+)\[([^\]]+)\]\[([^\]]*)\]/g,function(e,n,o,r){o=t(o,"|"),i[n]={attributes:a(o),attributesOrder:o,children:a(r,"|",{"#comment":{}})}}),i}function o(){var e=i.html5;return e||(e=i.html5=n({A:"id|accesskey|class|dir|draggable|item|hidden|itemprop|role|spellcheck|style|subject|title|onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"#|a|abbr|area|audio|b|bdo|br|button|canvas|cite|code|command|datalist|del|dfn|em|embed|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|meta|meter|noscript|object|output|progress|q|ruby|samp|script|select|small|span|strong|sub|sup|svg|textarea|time|var|video|wbr",C:"#|a|abbr|area|address|article|aside|audio|b|bdo|blockquote|br|button|canvas|cite|code|command|datalist|del|details|dfn|dialog|div|dl|em|embed|fieldset|figure|footer|form|h1|h2|h3|h4|h5|h6|header|hgroup|hr|i|iframe|img|input|ins|kbd|keygen|label|link|map|mark|menu|meta|meter|nav|noscript|ol|object|output|p|pre|progress|q|ruby|samp|script|section|select|small|span|strong|style|sub|sup|svg|table|textarea|time|ul|var|video"
},"html[A|manifest][body|head]head[A][base|command|link|meta|noscript|script|style|title]title[A][#]base[A|href|target][]link[A|href|rel|media|type|sizes][]meta[A|http-equiv|name|content|charset][]style[A|type|media|scoped][#]script[A|charset|type|src|defer|async][#]noscript[A][C]body[A][C]section[A][C]nav[A][C]article[A][C]aside[A][C]h1[A][B]h2[A][B]h3[A][B]h4[A][B]h5[A][B]h6[A][B]hgroup[A][h1|h2|h3|h4|h5|h6]header[A][C]footer[A][C]address[A][C]p[A][B]br[A][]pre[A][B]dialog[A][dd|dt]blockquote[A|cite][C]ol[A|start|reversed][li]ul[A][li]li[A|value][C]dl[A][dd|dt]dt[A][B]dd[A][C]a[A|href|target|ping|rel|media|type][B]em[A][B]strong[A][B]small[A][B]cite[A][B]q[A|cite][B]dfn[A][B]abbr[A][B]code[A][B]var[A][B]samp[A][B]kbd[A][B]sub[A][B]sup[A][B]i[A][B]b[A][B]mark[A][B]progress[A|value|max][B]meter[A|value|min|max|low|high|optimum][B]time[A|datetime][B]ruby[A][B|rt|rp]rt[A][B]rp[A][B]bdo[A][B]span[A][B]ins[A|cite|datetime][B]del[A|cite|datetime][B]figure[A][C|legend|figcaption]figcaption[A][C]img[A|alt|src|height|width|usemap|ismap][]iframe[A|name|src|height|width|sandbox|seamless][]embed[A|src|height|width|type][]object[A|data|type|height|width|usemap|name|form|classid][param]param[A|name|value][]details[A|open][C|legend]command[A|type|label|icon|disabled|checked|radiogroup][]menu[A|type|label][C|li]legend[A][C|B]div[A][C]source[A|src|type|media][]audio[A|src|autobuffer|autoplay|loop|controls][source]video[A|src|autobuffer|autoplay|loop|controls|width|height|poster][source]hr[A][]form[A|accept-charset|action|autocomplete|enctype|method|name|novalidate|target][C]fieldset[A|disabled|form|name][C|legend]label[A|form|for][B]input[A|type|accept|alt|autocomplete|autofocus|checked|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|height|list|max|maxlength|min|multiple|pattern|placeholder|readonly|required|size|src|step|width|files|value|name][]button[A|autofocus|disabled|form|formaction|formenctype|formmethod|formnovalidate|formtarget|name|value|type][B]select[A|autofocus|disabled|form|multiple|name|size][option|optgroup]datalist[A][B|option]optgroup[A|disabled|label][option]option[A|disabled|selected|label|value][]textarea[A|autofocus|disabled|form|maxlength|name|placeholder|readonly|required|rows|cols|wrap][]keygen[A|autofocus|challenge|disabled|form|keytype|name][]output[A|for|form|name][B]canvas[A|width|height][]map[A|name][B|C]area[A|shape|coords|href|alt|target|media|rel|ping|type][]mathml[A][]svg[A][]table[A|border][caption|colgroup|thead|tfoot|tbody|tr]caption[A][C]colgroup[A|span][col]col[A|span][]thead[A][tr]tfoot[A][tr]tbody[A][tr]tr[A][th|td]th[A|headers|rowspan|colspan|scope][B]td[A|headers|rowspan|colspan][C]wbr[A][]")),e}function r(){var e=i.html4;return e||(e=i.html4=n({Z:"H|K|N|O|P",Y:"X|form|R|Q",ZG:"E|span|width|align|char|charoff|valign",X:"p|T|div|U|W|isindex|fieldset|table",ZF:"E|align|char|charoff|valign",W:"pre|hr|blockquote|address|center|noframes",ZE:"abbr|axis|headers|scope|rowspan|colspan|align|char|charoff|valign|nowrap|bgcolor|width|height",ZD:"[E][S]",U:"ul|ol|dl|menu|dir",ZC:"p|Y|div|U|W|table|br|span|bdo|object|applet|img|map|K|N|Q",T:"h1|h2|h3|h4|h5|h6",ZB:"X|S|Q",S:"R|P",ZA:"a|G|J|M|O|P",R:"a|H|K|N|O",Q:"noscript|P",P:"ins|del|script",O:"input|select|textarea|label|button",N:"M|L",M:"em|strong|dfn|code|q|samp|kbd|var|cite|abbr|acronym",L:"sub|sup",K:"J|I",J:"tt|i|b|u|s|strike",I:"big|small|font|basefont",H:"G|F",G:"br|span|bdo",F:"object|applet|img|map|iframe",E:"A|B|C",D:"accesskey|tabindex|onfocus|onblur",C:"onclick|ondblclick|onmousedown|onmouseup|onmouseover|onmousemove|onmouseout|onkeypress|onkeydown|onkeyup",B:"lang|xml:lang|dir",A:"id|class|style|title"},"script[id|charset|type|language|src|defer|xml:space][]style[B|id|type|media|title|xml:space][]object[E|declare|classid|codebase|data|type|codetype|archive|standby|width|height|usemap|name|tabindex|align|border|hspace|vspace][#|param|Y]param[id|name|value|valuetype|type][]p[E|align][#|S]a[E|D|charset|type|name|href|hreflang|rel|rev|shape|coords|target][#|Z]br[A|clear][]span[E][#|S]bdo[A|C|B][#|S]applet[A|codebase|archive|code|object|alt|name|width|height|align|hspace|vspace][#|param|Y]h1[E|align][#|S]img[E|src|alt|name|longdesc|width|height|usemap|ismap|align|border|hspace|vspace][]map[B|C|A|name][X|form|Q|area]h2[E|align][#|S]iframe[A|longdesc|name|src|frameborder|marginwidth|marginheight|scrolling|align|width|height][#|Y]h3[E|align][#|S]tt[E][#|S]i[E][#|S]b[E][#|S]u[E][#|S]s[E][#|S]strike[E][#|S]big[E][#|S]small[E][#|S]font[A|B|size|color|face][#|S]basefont[id|size|color|face][]em[E][#|S]strong[E][#|S]dfn[E][#|S]code[E][#|S]q[E|cite][#|S]samp[E][#|S]kbd[E][#|S]var[E][#|S]cite[E][#|S]abbr[E][#|S]acronym[E][#|S]sub[E][#|S]sup[E][#|S]input[E|D|type|name|value|checked|disabled|readonly|size|maxlength|src|alt|usemap|onselect|onchange|accept|align][]select[E|name|size|multiple|disabled|tabindex|onfocus|onblur|onchange][optgroup|option]optgroup[E|disabled|label][option]option[E|selected|disabled|label|value][]textarea[E|D|name|rows|cols|disabled|readonly|onselect|onchange][]label[E|for|accesskey|onfocus|onblur][#|S]button[E|D|name|value|type|disabled][#|p|T|div|U|W|table|G|object|applet|img|map|K|N|Q]h4[E|align][#|S]ins[E|cite|datetime][#|Y]h5[E|align][#|S]del[E|cite|datetime][#|Y]h6[E|align][#|S]div[E|align][#|Y]ul[E|type|compact][li]li[E|type|value][#|Y]ol[E|type|compact|start][li]dl[E|compact][dt|dd]dt[E][#|S]dd[E][#|Y]menu[E|compact][li]dir[E|compact][li]pre[E|width|xml:space][#|ZA]hr[E|align|noshade|size|width][]blockquote[E|cite][#|Y]address[E][#|S|p]center[E][#|Y]noframes[E][#|Y]isindex[A|B|prompt][]fieldset[E][#|legend|Y]legend[E|accesskey|align][#|S]table[E|summary|width|border|frame|rules|cellspacing|cellpadding|align|bgcolor][caption|col|colgroup|thead|tfoot|tbody|tr]caption[E|align][#|S]col[ZG][]colgroup[ZG][col]thead[ZF][tr]tr[ZF|bgcolor][th|td]th[E|ZE][#|Y]form[E|action|method|name|enctype|onsubmit|onreset|accept|accept-charset|target][#|X|R|Q]noscript[E][#|Y]td[E|ZE][#|Y]tfoot[ZF][tr]tbody[ZF][tr]area[E|D|shape|coords|href|nohref|alt|target][]base[id|href|target][]body[E|onload|onunload|background|bgcolor|text|link|vlink|alink][#|Y]")),e}var i={},a=e.makeMap,s=e.each;e.html.Schema=function(n){function c(t,o,r){var s=n[t];return s?s=a(s,",",a(s.toUpperCase()," ")):(s=i[t])||(s=a(o," ",a(o.toUpperCase()," ")),s=e.extend(s,r),i[t]=s),s}function d(e){return new RegExp("^"+e.replace(/([?+*])/g,".$1")+"$")}function l(n){var o,r,i,s,c,l,u,f,p,m,h,g,v,y,b,C,x,_,E,k=/^([#+\-])?([^\[\/]+)(?:\/([^\[]+))?(?:\[([^\]]+)\])?$/,N=/^([!\-])?(\w+::\w+|[^=:<]+)?(?:([=:<])(.*))?$/,T=/[*?+]/;if(n)for(n=t(n),S["@"]&&(C=S["@"].attributes,x=S["@"].attributesOrder),o=0,r=n.length;r>o;o++)if(c=k.exec(n[o])){if(y=c[1],p=c[2],b=c[3],f=c[4],g={},v=[],l={attributes:g,attributesOrder:v},"#"===y&&(l.paddEmpty=!0),"-"===y&&(l.removeEmpty=!0),C){for(_ in C)g[_]=C[_];v.push.apply(v,x)}if(f)for(f=t(f,"|"),i=0,s=f.length;s>i;i++)if(c=N.exec(f[i])){if(u={},h=c[1],m=c[2].replace(/::/g,":"),y=c[3],E=c[4],"!"===h&&(l.attributesRequired=l.attributesRequired||[],l.attributesRequired.push(m),u.required=!0),"-"===h){delete g[m],v.splice(e.inArray(v,m),1);continue}y&&("="===y&&(l.attributesDefault=l.attributesDefault||[],l.attributesDefault.push({name:m,value:E}),u.defaultValue=E),":"===y&&(l.attributesForced=l.attributesForced||[],l.attributesForced.push({name:m,value:E}),u.forcedValue=E),"<"===y&&(u.validValues=a(E,"?"))),T.test(m)?(l.attributePatterns=l.attributePatterns||[],u.pattern=d(m),l.attributePatterns.push(u)):(g[m]||v.push(m),g[m]=u)}C||"@"!=p||(C=g,x=v),b&&(l.outputName=p,S[b]=l),T.test(p)?(l.pattern=d(p),w.push(l)):S[p]=l}}function u(e){S={},w=[],l(e),s(g,function(e,t){k[t]=e.children})}function f(e){var n=/^(~)?(.+)$/;e&&s(t(e),function(e){var t=n.exec(e),o="~"===t[1],r=o?"span":"div",i=t[2];k[i]=k[r],N[i]=r,o||(x[i.toUpperCase()]={},x[i]={}),S[i]||(S[i]=S[r]),s(k,function(e){e[r]&&(e[i]=e[r])})})}function p(e){var n=/^([+\-]?)(\w+)\[([^\]]+)\]$/;e&&s(t(e),function(e){var o,r,i=n.exec(e);i&&(r=i[1],o=r?k[i[2]]:k[i[2]]={"#comment":{}},o=k[i[2]],s(t(i[3],"|"),function(e){"-"===r?delete o[e]:o[e]={}}))})}function m(e){var t,n=S[e];if(n)return n;for(t=w.length;t--;)if(n=w[t],n.pattern.test(e))return n}var h,g,v,y,b,C,x,_,E=this,S={},k={},w=[],N={};n=n||{},g="html5"==n.schema?o():r(),!1===n.verify_html&&(n.valid_elements="*[*]"),n.valid_styles&&(h={},s(n.valid_styles,function(t,n){h[n]=e.explode(t)})),v=c("whitespace_elements","pre script noscript style textarea"),y=c("self_closing_elements","colgroup dd dt li option p td tfoot th thead tr"),b=c("short_ended_elements","area base basefont br col frame hr img input isindex link meta param embed source wbr"),C=c("boolean_attributes","checked compact declare defer disabled ismap multiple nohref noresize noshade nowrap readonly selected autoplay loop controls"),_=c("non_empty_elements","td th iframe video audio object script",b),textBlockElementsMap=c("text_block_elements","h1 h2 h3 h4 h5 h6 p div address pre form blockquote center dir fieldset header footer article section hgroup aside nav figure"),x=c("block_elements","hr table tbody thead tfoot th tr td li ol ul caption dl dt dd noscript menu isindex samp option datalist select optgroup",textBlockElementsMap),n.valid_elements?u(n.valid_elements):(s(g,function(e,t){S[t]={attributes:e.attributes,attributesOrder:e.attributesOrder},k[t]=e.children}),"html5"!=n.schema&&s(t("strong/b,em/i"),function(e){e=t(e,"/"),S[e[1]].outputName=e[0]}),S.img.attributesDefault=[{name:"alt",value:""}],s(t("ol,ul,sub,sup,blockquote,span,font,a,table,tbody,tr,strong,em,b,i"),function(e){S[e]&&(S[e].removeEmpty=!0)}),s(t("p,h1,h2,h3,h4,h5,h6,th,td,pre,div,address,caption"),function(e){S[e].paddEmpty=!0})),f(n.custom_elements),p(n.valid_children),l(n.extended_valid_elements),p("+ol[ul|ol],+ul[ul|ol]"),n.invalid_elements&&e.each(e.explode(n.invalid_elements),function(e){S[e]&&delete S[e]}),m("span")||l("span[!data-mce-type|*]"),E.children=k,E.styles=h,E.getBoolAttrs=function(){return C},E.getBlockElements=function(){return x},E.getTextBlockElements=function(){return textBlockElementsMap},E.getShortEndedElements=function(){return b},E.getSelfClosingElements=function(){return y},E.getNonEmptyElements=function(){return _},E.getWhiteSpaceElements=function(){return v},E.isValidChild=function(e,t){var n=k[e];return!(!n||!n[t])},E.isValid=function(e,t){var n,o,r=m(e);if(r){if(!t)return!0;if(r.attributes[t])return!0;if(n=r.attributePatterns)for(o=n.length;o--;)if(n[o].pattern.test(e))return!0}return!1},E.getElementRule=m,E.getCustomElements=function(){return N},E.addValidElements=l,E.setValidElements=u,E.addCustomElements=f,E.addValidChildren=p,E.elements=S}}(tinymce),function(e){e.html.SaxParser=function(t,n){var o=this,r=function(){};t=t||{},o.schema=n=n||new e.html.Schema,!1!==t.fix_self_closing&&(t.fix_self_closing=!0),e.each("comment cdata text start end pi doctype".split(" "),function(e){e&&(o[e]=t[e]||r)}),o.parse=function(o){function r(e){var t,n;for(t=H.length;t--&&H[t].name!==e;);if(t>=0){for(n=H.length-1;n>=t;n--)e=H[n],e.valid&&P.end(e.name);H.length=t}}function i(e,t,n,o,r){var i,a;if(t=t.toLowerCase(),n=t in g?t:U(n||o||r||""),y&&!p&&0!==t.indexOf("data-")){if(!(i=S[t])&&k){for(a=k.length;a--&&(i=k[a],!i.pattern.test(t)););-1===a&&(i=null)}if(!i)return;if(i.validValues&&!(n in i.validValues))return}d.map[t]=n,d.push({name:t,value:n})}var a,s,c,d,l,u,f,p,m,h,g,v,y,b,C,x,_,E,S,k,w,N,T,A,B,M,R,L,I,D,P=this,O=0,H=[],F=0,U=e.html.Entities.decode;for(B=new RegExp("<(?:(?:!--([\\w\\W]*?)-->)|(?:!\\[CDATA\\[([\\w\\W]*?)\\]\\]>)|(?:!DOCTYPE([\\w\\W]*?)>)|(?:\\?([^\\s\\/<>]+) ?([\\w\\W]*?)[?/]>)|(?:\\/([^>]+)>)|(?:([A-Za-z0-9\\-\\:\\.]+)((?:\\s+[^\"'>]+(?:(?:\"[^\"]*\")|(?:'[^']*')|[^>]*))*|\\/|\\s+)>))","g"),M=/([\w:\-]+)(?:\s*=\s*(?:(?:\"((?:[^\"])*)\")|(?:\'((?:[^\'])*)\')|([^>\s]+)))?/g,R={script:/<\/script[^>]*>/gi,style:/<\/style[^>]*>/gi,noscript:/<\/noscript[^>]*>/gi},h=n.getShortEndedElements(),A=t.self_closing_elements||n.getSelfClosingElements(),g=n.getBoolAttrs(),y=t.validate,m=t.remove_internals,I=t.fix_self_closing,D=e.isIE,E=/^:/;a=B.exec(o);){if(O<a.index&&P.text(U(o.substr(O,a.index-O))),s=a[6])s=s.toLowerCase(),D&&E.test(s)&&(s=s.substr(1)),r(s);else if(s=a[7]){if(s=s.toLowerCase(),D&&E.test(s)&&(s=s.substr(1)),v=s in h,I&&A[s]&&H.length>0&&H[H.length-1].name===s&&r(s),!y||(b=n.getElementRule(s))){if(C=!0,y&&(S=b.attributes,k=b.attributePatterns),(_=a[8])?(p=-1!==_.indexOf("data-mce-type"),p&&m&&(C=!1),d=[],d.map={},_.replace(M,i)):(d=[],d.map={}),y&&!p){if(w=b.attributesRequired,N=b.attributesDefault,T=b.attributesForced)for(l=T.length;l--;)x=T[l],f=x.name,L=x.value,"{$uid}"===L&&(L="mce_"+F++),d.map[f]=L,d.push({name:f,value:L});if(N)for(l=N.length;l--;)x=N[l],(f=x.name)in d.map||(L=x.value,"{$uid}"===L&&(L="mce_"+F++),d.map[f]=L,d.push({name:f,value:L}));if(w){for(l=w.length;l--&&!(w[l]in d.map););-1===l&&(C=!1)}d.map["data-mce-bogus"]&&(C=!1)}C&&P.start(s,d,v)}else C=!1;if(c=R[s]){c.lastIndex=O=a.index+a[0].length,(a=c.exec(o))?(C&&(u=o.substr(O,a.index-O)),O=a.index+a[0].length):(u=o.substr(O),O=o.length),C&&u.length>0&&P.text(u,!0),C&&P.end(s),B.lastIndex=O;continue}v||(_&&_.indexOf("/")==_.length-1?C&&P.end(s):H.push({name:s,valid:C}))}else(s=a[1])?P.comment(s):(s=a[2])?P.cdata(s):(s=a[3])?P.doctype(s):(s=a[4])&&P.pi(s,a[5]);O=a.index+a[0].length}for(O<o.length&&P.text(U(o.substr(O))),l=H.length-1;l>=0;l--)s=H[l],s.valid&&P.end(s.name)}}}(tinymce),function(e){function t(e,t,n){var o,r,i=n?"lastChild":"firstChild",a=n?"prev":"next";if(e[i])return e[i];if(e!==t){if(o=e[a])return o;for(r=e.parent;r&&r!==t;r=r.parent)if(o=r[a])return o}}function n(e,t){this.name=e,this.type=t,1===t&&(this.attributes=[],this.attributes.map={})}var o=/^[ \t\r\n]*$/,r={"#text":3,"#comment":8,"#cdata":4,"#pi":7,"#doctype":10,"#document-fragment":11};e.extend(n.prototype,{replace:function(e){var t=this;return e.parent&&e.remove(),t.insert(e,t),t.remove(),t},attr:function(e,t){var n,o,r,i=this;if("string"!=typeof e){for(o in e)i.attr(o,e[o]);return i}if(n=i.attributes){if(t!==r){if(null===t){if(e in n.map)for(delete n.map[e],o=n.length;o--;)if(n[o].name===e)return n=n.splice(o,1),i;return i}if(e in n.map){for(o=n.length;o--;)if(n[o].name===e){n[o].value=t;break}}else n.push({name:e,value:t});return n.map[e]=t,i}return n.map[e]}},clone:function(){var e,t,o,r,i,a=this,s=new n(a.name,a.type);if(o=a.attributes){for(i=[],i.map={},e=0,t=o.length;t>e;e++)r=o[e],"id"!==r.name&&(i[i.length]={name:r.name,value:r.value},i.map[r.name]=r.value);s.attributes=i}return s.value=a.value,s.shortEnded=a.shortEnded,s},wrap:function(e){var t=this;return t.parent.insert(e,t),e.append(t),t},unwrap:function(){var e,t,n=this;for(e=n.firstChild;e;)t=e.next,n.insert(e,n,!0),e=t;n.remove()},remove:function(){var e=this,t=e.parent,n=e.next,o=e.prev;return t&&(t.firstChild===e?(t.firstChild=n,n&&(n.prev=null)):o.next=n,t.lastChild===e?(t.lastChild=o,o&&(o.next=null)):n.prev=o,e.parent=e.next=e.prev=null),e},append:function(e){var t,n=this;return e.parent&&e.remove(),t=n.lastChild,t?(t.next=e,e.prev=t,n.lastChild=e):n.lastChild=n.firstChild=e,e.parent=n,e},insert:function(e,t,n){var o;return e.parent&&e.remove(),o=t.parent||this,n?(t===o.firstChild?o.firstChild=e:t.prev.next=e,e.prev=t.prev,e.next=t,t.prev=e):(t===o.lastChild?o.lastChild=e:t.next.prev=e,e.next=t.next,e.prev=t,t.next=e),e.parent=o,e},getAll:function(e){var n,o=this,r=[];for(n=o.firstChild;n;n=t(n,o))n.name===e&&r.push(n);return r},empty:function(){var e,n,o,r=this;if(r.firstChild){for(e=[],o=r.firstChild;o;o=t(o,r))e.push(o);for(n=e.length;n--;)o=e[n],o.parent=o.firstChild=o.lastChild=o.next=o.prev=null}return r.firstChild=r.lastChild=null,r},isEmpty:function(e){var n,r,i=this,a=i.firstChild;if(a)do{if(1===a.type){if(a.attributes.map["data-mce-bogus"])continue;if(e[a.name])return!1;for(n=a.attributes.length;n--;)if("name"===(r=a.attributes[n].name)||0===r.indexOf("data-mce-"))return!1}if(8===a.type)return!1;if(3===a.type&&!o.test(a.value))return!1}while(a=t(a,i));return!0},walk:function(e){return t(this,null,e)}}),e.extend(n,{create:function(e,t){var o,i;if(o=new n(e,r[e]||1),t)for(i in t)o.attr(i,t[i]);return o}}),e.html.Node=n}(tinymce),function(e){var t=e.html.Node;e.html.DomParser=function(n,o){function r(n){var r,a,s,c,d,l,u,f,p,m,h,g,v,y;for(h=e.makeMap("tr,td,th,tbody,thead,tfoot,table"),m=o.getNonEmptyElements(),g=o.getTextBlockElements(),r=0;r<n.length;r++)if(a=n[r],a.parent&&!a.fixed)if(g[a.name]&&"li"==a.parent.name){for(v=a.next;v&&g[v.name];)v.name="li",v.fixed=!0,a.parent.insert(v,a.parent),v=v.next;a.unwrap(a)}else{for(c=[a],s=a.parent;s&&!o.isValidChild(s.name,a.name)&&!h[s.name];s=s.parent)c.push(s);if(s&&c.length>1){for(c.reverse(),d=l=i.filterNode(c[0].clone()),p=0;p<c.length-1;p++){for(o.isValidChild(l.name,c[p].name)?(u=i.filterNode(c[p].clone()),l.append(u)):u=l,f=c[p].firstChild;f&&f!=c[p+1];)y=f.next,u.append(f),f=y;l=u}d.isEmpty(m)?s.insert(a,c[0],!0):(s.insert(d,c[0],!0),s.insert(a,d)),s=c[0],(s.isEmpty(m)||s.firstChild===s.lastChild&&"br"===s.firstChild.name)&&s.empty().remove()}else if(a.parent){if("li"===a.name){if((v=a.prev)&&("ul"===v.name||"ul"===v.name)){v.append(a);continue}if((v=a.next)&&("ul"===v.name||"ul"===v.name)){v.insert(a,v.firstChild,!0);continue}a.wrap(i.filterNode(new t("ul",1)));continue}o.isValidChild(a.parent.name,"div")&&o.isValidChild("div",a.name)?a.wrap(i.filterNode(new t("div",1))):"style"===a.name||"script"===a.name?a.empty().remove():a.unwrap()}}}var i=this,a={},s=[],c={},d={};n=n||{},n.validate=!("validate"in n)||n.validate,n.root_name=n.root_name||"body",i.schema=o=o||new e.html.Schema,i.filterNode=function(e){var t,n,o;n in a&&(o=c[n],o?o.push(e):c[n]=[e]),t=s.length;for(;t--;)(n=s[t].name)in e.attributes.map&&(o=d[n],o?o.push(e):d[n]=[e]);return e},i.addNodeFilter=function(t,n){e.each(e.explode(t),function(e){var t=a[e];t||(a[e]=t=[]),t.push(n)})},i.addAttributeFilter=function(t,n){e.each(e.explode(t),function(e){var t;for(t=0;t<s.length;t++)if(s[t].name===e)return void s[t].callbacks.push(n);s.push({name:e,callbacks:[n]})})},i.parse=function(i,l){function u(){for(var e,t,n=g.firstChild;n;)e=n.next,3==n.type||1==n.type&&"p"!==n.name&&!w[n.name]&&!n.attr("data-mce-type")?t?t.append(n):(t=f(D,1),g.insert(t,n),t.append(n)):t=null,n=e}function f(e,n){var o,r=new t(e,n);return e in a&&(o=c[e],o?o.push(r):c[e]=[r]),r}function p(e){var t,n,o;for(t=e.prev;t&&3===t.type;)n=t.value.replace(A,""),n.length>0?(t.value=n,t=t.prev):(o=t.prev,t.remove(),t=o)}function m(e){var t,n={};for(t in e)"li"!==t&&"p"!=t&&(n[t]=e[t]);return n}var h,g,v,y,b,C,x,_,E,S,k,w,N,T,A,B,M,R,L,I,D,P=[];if(l=l||{},c={},d={},w=e.extend(e.makeMap("script,style,head,html,body,title,meta,param"),o.getBlockElements()),I=o.getNonEmptyElements(),L=o.children,k=n.validate,D="forced_root_block"in l?l.forced_root_block:n.forced_root_block,R=o.getWhiteSpaceElements(),N=/^[ \t\r\n]+/,A=/[ \t\r\n]+$/,B=/[ \t\r\n]+/g,M=/^[ \t\r\n]+$/,h=new e.html.SaxParser({validate:k,self_closing_elements:m(o.getSelfClosingElements()),cdata:function(e){v.append(f("#cdata",4)).value=e},text:function(e,t){var n;T||(e=e.replace(B," "),v.lastChild&&w[v.lastChild.name]&&(e=e.replace(N,""))),0!==e.length&&(n=f("#text",3),n.raw=!!t,v.append(n).value=e)},comment:function(e){v.append(f("#comment",8)).value=e},pi:function(e,t){v.append(f(e,7)).value=t,p(v)},doctype:function(e){var t;t=v.append(f("#doctype",10)),t.value=e,p(v)},start:function(e,t,n){var r,i,a,c,l;if(a=k?o.getElementRule(e):{}){for(r=f(a.outputName||e,1),r.attributes=t,r.shortEnded=n,v.append(r),l=L[v.name],l&&L[r.name]&&!l[r.name]&&P.push(r),i=s.length;i--;)(c=s[i].name)in t.map&&(E=d[c],E?E.push(r):d[c]=[r]);w[e]&&p(r),n||(v=r),!T&&R[e]&&(T=!0)}},end:function(e){var n,r,i,a,s;if(r=k?o.getElementRule(e):{}){if(w[e]&&!T){if((n=v.firstChild)&&3===n.type)for(i=n.value.replace(N,""),i.length>0?(n.value=i,n=n.next):(a=n.next,n.remove(),n=a);n&&3===n.type;)i=n.value,a=n.next,(0===i.length||M.test(i))&&(n.remove(),n=a),n=a;if((n=v.lastChild)&&3===n.type)for(i=n.value.replace(A,""),i.length>0?(n.value=i,n=n.prev):(a=n.prev,n.remove(),n=a);n&&3===n.type;)i=n.value,a=n.prev,(0===i.length||M.test(i))&&(n.remove(),n=a),n=a}if(T&&R[e]&&(T=!1),(r.removeEmpty||r.paddEmpty)&&v.isEmpty(I))if(r.paddEmpty)v.empty().append(new t("#text","3")).value="\xa0";else if(!v.attributes.map.name&&!v.attributes.map.id)return s=v.parent,v.empty().remove(),void(v=s);v=v.parent}}},o),g=v=new t(l.context||n.root_name,11),h.parse(i),k&&P.length&&(l.context?l.invalid=!0:r(P)),D&&"body"==g.name&&u(),!l.invalid){for(S in c){for(E=a[S],y=c[S],x=y.length;x--;)y[x].parent||y.splice(x,1);for(b=0,C=E.length;C>b;b++)E[b](y,S,l)}for(b=0,C=s.length;C>b;b++)if(E=s[b],E.name in d){for(y=d[E.name],x=y.length;x--;)y[x].parent||y.splice(x,1);for(x=0,_=E.callbacks.length;_>x;x++)E.callbacks[x](y,E.name,l)}}return g},n.remove_trailing_brs&&i.addNodeFilter("br",function(t){var n,r,i,a,s,c,d=t.length,l=e.extend({},o.getBlockElements()),u=o.getNonEmptyElements();for(l.body=1,n=0;d>n;n++)if(r=t[n],i=r.parent,l[r.parent.name]&&r===i.lastChild){for(s=r.prev;s;){if("span"!==(c=s.name)||"bookmark"!==s.attr("data-mce-type")){if("br"!==c)break;if("br"===c){r=null;break}}s=s.prev}r&&(r.remove(),i.isEmpty(u)&&(elementRule=o.getElementRule(i.name),elementRule&&(elementRule.removeEmpty?i.remove():elementRule.paddEmpty&&(i.empty().append(new e.html.Node("#text",3)).value="\xa0"))))}else{for(a=r;i.firstChild===a&&i.lastChild===a&&(a=i,!l[i.name]);)i=i.parent;a===i&&(textNode=new e.html.Node("#text",3),textNode.value="\xa0",r.replace(textNode))}}),n.allow_html_in_named_anchor||i.addAttributeFilter("id,name",function(e){for(var t,n,o,r,i=e.length;i--;)if(r=e[i],"a"===r.name&&r.firstChild&&!r.attr("href")){o=r.parent,t=r.lastChild;do{n=t.prev,o.insert(t,r),t=n}while(t)}})}}(tinymce),tinymce.html.Writer=function(e){var t,n,o,r,i,a=[];return e=e||{},t=e.indent,n=tinymce.makeMap(e.indent_before||""),o=tinymce.makeMap(e.indent_after||""),r=tinymce.html.Entities.getEncodeFunc(e.entity_encoding||"raw",e.entities),i="html"==e.element_format,{start:function(e,s,c){var d,l,u,f;if(t&&n[e]&&a.length>0&&(f=a[a.length-1],f.length>0&&"\n"!==f&&a.push("\n")),a.push("<",e),s)for(d=0,l=s.length;l>d;d++)u=s[d],a.push(" ",u.name,'="',r(u.value,!0),'"');a[a.length]=!c||i?">":" />",c&&t&&o[e]&&a.length>0&&(f=a[a.length-1],f.length>0&&"\n"!==f&&a.push("\n"))},end:function(e){var n;a.push("</",e,">"),t&&o[e]&&a.length>0&&(n=a[a.length-1],n.length>0&&"\n"!==n&&a.push("\n"))},text:function(e,t){e.length>0&&(a[a.length]=t?e:r(e))},cdata:function(e){a.push("<![CDATA[",e,"]]>")},comment:function(e){a.push("<!--",e,"-->")},pi:function(e,n){n?a.push("<?",e," ",n,"?>"):a.push("<?",e,"?>"),t&&a.push("\n")},doctype:function(e){a.push("<!DOCTYPE",e,">",t?"\n":"")},reset:function(){a.length=0},getContent:function(){return a.join("").replace(/\n$/,"")}}},function(e){e.html.Serializer=function(t,n){var o=this,r=new e.html.Writer(t);t=t||{},t.validate=!("validate"in t)||t.validate,o.schema=n=n||new e.html.Schema,o.writer=r,o.serialize=function(e){function o(e){var t,s,c,d,l,u,f,p,m,h=i[e.type];if(h)h(e);else{if(t=e.name,s=e.shortEnded,c=e.attributes,a&&c&&c.length>1){for(u=[],u.map={},m=n.getElementRule(e.name),f=0,p=m.attributesOrder.length;p>f;f++)(d=m.attributesOrder[f])in c.map&&(l=c.map[d],u.map[d]=l,u.push({name:d,value:l}));for(f=0,p=c.length;p>f;f++)(d=c[f].name)in u.map||(l=c.map[d],u.map[d]=l,u.push({name:d,value:l}));c=u}if(r.start(e.name,c,s),!s){if(e=e.firstChild)do{o(e)}while(e=e.next);r.end(t)}}}var i,a;return a=t.validate,i={3:function(e){r.text(e.value,e.raw)},8:function(e){r.comment(e.value)},7:function(e){r.pi(e.name,e.value)},10:function(e){r.doctype(e.value)},4:function(e){r.cdata(e.value)},11:function(e){if(e=e.firstChild)do{o(e)}while(e=e.next)}},r.reset(),1!=e.type||t.inner?i[11](e):o(e),r.getContent()}}}(tinymce),tinymce.dom={},function(e,t){function n(e,t,n,o){e.addEventListener?e.addEventListener(t,n,o||!1):e.attachEvent&&e.attachEvent("on"+t,n)}function o(e,t,n,o){e.removeEventListener?e.removeEventListener(t,n,o||!1):e.detachEvent&&e.detachEvent("on"+t,n)}function r(e,t){function n(){return!1}function o(){return!0}var r,i=t||{};for(r in e)"layerX"!==r&&"layerY"!==r&&(i[r]=e[r]);return i.target||(i.target=i.srcElement||document),i.preventDefault=function(){i.isDefaultPrevented=o,e&&(e.preventDefault?e.preventDefault():e.returnValue=!1)},i.stopPropagation=function(){i.isPropagationStopped=o,e&&(e.stopPropagation?e.stopPropagation():e.cancelBubble=!0)},i.stopImmediatePropagation=function(){i.isImmediatePropagationStopped=o,i.stopPropagation()},i.isDefaultPrevented||(i.isDefaultPrevented=n,i.isPropagationStopped=n,i.isImmediatePropagationStopped=n),i}function i(e,t,r){function i(){r.domLoaded||(r.domLoaded=!0,t(c))}var a=e.document,c={type:"ready"};return"complete"==a.readyState?void i():(s?n(e,"DOMContentLoaded",i):(n(a,"readystatechange",function(){"complete"===a.readyState&&(o(a,"readystatechange",arguments.callee),i())}),a.documentElement.doScroll&&e===e.top&&function(){try{a.documentElement.doScroll("left")}catch(e){return void setTimeout(arguments.callee,0)}i()}()),void n(e,"load",i))}function a(e){function a(e,t){var n,o,r,i;if(n=p[t][e.type])for(o=0,r=n.length;r>o;o++)if(i=n[o],i&&!1===i.func.call(i.scope,e)&&e.preventDefault(),e.isImmediatePropagationStopped())return}var c,d,l,u,f=this,p={};l="onmouseenter"in document.documentElement,d="onfocusin"in document.documentElement,u={mouseenter:"mouseover",mouseleave:"mouseout"},c=1,f.domLoaded=!1,f.events=p,f.bind=function(o,m,h,g){function v(e){a(r(e||k.event),y)}var y,b,C,x,_,E,S,k=window;if(o&&3!==o.nodeType&&8!==o.nodeType){for(o[t]?(y=o[t],p[y]||(p[y]={})):(y=c++,o[t]=y,p[y]={}),g=g||o,m=m.split(" "),C=m.length;C--;)x=m[C],E=v,_=S=!1,"DOMContentLoaded"===x&&(x="ready"),!f.domLoaded&&"complete"!=o.readyState||"ready"!==x?(l||(_=u[x])&&(E=function(e){var t,n;if(t=e.currentTarget,(n=e.relatedTarget)&&t.contains)n=t.contains(n);else for(;n&&n!==t;)n=n.parentNode;n||(e=r(e||k.event),e.type="mouseout"===e.type?"mouseleave":"mouseenter",e.target=t,a(e,y))}),d||"focusin"!==x&&"focusout"!==x||(S=!0,_="focusin"===x?"focus":"blur",E=function(e){e=r(e||k.event),e.type="focus"===e.type?"focusin":"focusout",a(e,y)}),b=p[y][x],b?b.push({func:h,scope:g}):(p[y][x]=b=[{func:h,scope:g}],b.fakeName=_,b.capture=S,b.nativeHandler=E,s||(b.proxyHandler=e(y)),"ready"===x?i(o,E,f):n(o,_||x,s?E:b.proxyHandler,S))):(f.domLoaded=!0,h.call(g,r({type:x})));return o=b=0,h}},f.unbind=function(e,n,r){var i,a,c,d,l,u;if(!e||3===e.nodeType||8===e.nodeType)return f;if(i=e[t]){if(u=p[i],n){for(n=n.split(" "),c=n.length;c--;)if(l=n[c],a=u[l]){if(r)for(d=a.length;d--;)a[d].func===r&&a.splice(d,1);r&&0!==a.length||(delete u[l],o(e,a.fakeName||l,s?a.nativeHandler:a.proxyHandler,a.capture))}}else{for(l in u)a=u[l],o(e,a.fakeName||l,s?a.nativeHandler:a.proxyHandler,a.capture);u={}}for(l in u)return f;delete p[i];try{delete e[t]}catch(n){e[t]=null}}return f},f.fire=function(e,n,o){var i,s;if(!e||3===e.nodeType||8===e.nodeType)return f;s=r(null,o),s.type=n;do{i=e[t],i&&a(s,i),e=e.parentNode||e.ownerDocument||e.defaultView||e.parentWindow}while(e&&!s.isPropagationStopped());return f},f.clean=function(e){var n,o,r=f.unbind;if(!e||3===e.nodeType||8===e.nodeType)return f;if(e[t]&&r(e),e.getElementsByTagName||(e=e.document),e&&e.getElementsByTagName)for(r(e),o=e.getElementsByTagName("*"),n=o.length;n--;)e=o[n],e[t]&&r(e);return f},f.callNativeHandler=function(e,t){p&&p[e][t.type].nativeHandler(t)},f.destory=function(){p={}},f.add=function(e,t,n,o){if("string"==typeof e&&(e=document.getElementById(e)),!(e&&e instanceof Array))return"init"===t&&(t="ready"),f.bind(e,t instanceof Array?t.join(" "):t,n,o);for(var r=e.length;r--;)f.add(e[r],t,n,o)},f.remove=function(e,t,n,o){if(!e)return f;if("string"==typeof e&&(e=document.getElementById(e)),e instanceof Array){for(var r=e.length;r--;)f.remove(e[r],t,n,o);return f}return f.unbind(e,t instanceof Array?t.join(" "):t,n)},f.clear=function(e){return"string"==typeof e&&(e=document.getElementById(e)),f.clean(e)},f.cancel=function(e){return e&&(f.prevent(e),f.stop(e)),!1},f.prevent=function(e){return e.preventDefault||(e=r(e)),e.preventDefault(),!1},f.stop=function(e){return e.stopPropagation||(e=r(e)),e.stopPropagation(),!1}}var s=!!document.addEventListener;e.EventUtils=a,e.Event=new a(function(e){return function(t){tinymce.dom.Event.callNativeHandler(e,t)}}),e.Event.bind(window,"ready",function(){}),e=0}(tinymce.dom,"data-mce-expando"),tinymce.dom.TreeWalker=function(e,t){function n(e,n,o,r){var i,a;if(e){if(!r&&e[n])return e[n];if(e!=t){if(i=e[o])return i;for(a=e.parentNode;a&&a!=t;a=a.parentNode)if(i=a[o])return i}}}var o=e;this.current=function(){return o},this.next=function(e){return o=n(o,"firstChild","nextSibling",e)},this.prev=function(e){return o=n(o,"lastChild","previousSibling",e)}},function(e){var t=e.each,n=e.is,o=e.isWebKit,r=e.isIE,i=e.html.Entities,a=/^([a-z0-9],?)+$/i,s=/^[ \t\r\n]*$/;e.create("tinymce.dom.DOMUtils",{doc:null,root:null,files:null,pixelStyles:/^(top|left|bottom|right|width|height|borderWidth)$/,props:{"for":"htmlFor","class":"className",className:"className",checked:"checked",disabled:"disabled",maxlength:"maxLength",readonly:"readOnly",selected:"selected",value:"value",id:"id",name:"name",type:"type"},DOMUtils:function(t,n){var o,r=this;if(r.doc=t,r.win=window,r.files={},r.cssFlicker=!1,r.counter=0,r.stdMode=!e.isIE||t.documentMode>=8,r.boxModel=!e.isIE||"CSS1Compat"==t.compatMode||r.stdMode,r.hasOuterHTML="outerHTML"in t.createElement("a"),r.settings=n=e.extend({keep_values:!1,hex_colors:1},n),r.schema=n.schema,r.styles=new e.html.Styles({url_converter:n.url_converter,url_converter_scope:n.url_converter_scope},n.schema),e.isIE6)try{t.execCommand("BackgroundImageCache",!1,!0)}catch(e){r.cssFlicker=!0}r.fixDoc(t),r.events=n.ownEvents?new e.dom.EventUtils(n.proxy):e.dom.Event,e.addUnload(r.destroy,r),o=n.schema?n.schema.getBlockElements():{},r.isBlock=function(e){if(!e)return!1;var t=e.nodeType;return t?!(1!==t||!o[e.nodeName]):!!o[e]}},fixDoc:function(t){var n,o=this.settings;if(r&&!e.isIE11&&o.schema){"abbr article aside audio canvas details figcaption figure footer header hgroup mark menu meter nav output progress section summary time video".replace(/\w+/g,function(e){t.createElement(e)});for(n in o.schema.getCustomElements())t.createElement(n)}},clone:function(n,o){var i,a,s=this;return!r||e.isIE11||1!==n.nodeType||o?n.cloneNode(o):(a=s.doc,o?i.firstChild:(i=a.createElement(n.nodeName),t(s.getAttribs(n),function(e){s.setAttrib(i,e.nodeName,s.getAttrib(n,e.nodeName))}),i))},getRoot:function(){var e=this,t=e.settings;return t&&e.get(t.root_element)||e.doc.body},getViewPort:function(e){var t,n;return e=e||this.win,t=e.document,n=this.boxModel?t.documentElement:t.body,{x:e.pageXOffset||n.scrollLeft,y:e.pageYOffset||n.scrollTop,w:e.innerWidth||n.clientWidth,h:e.innerHeight||n.clientHeight}},getRect:function(e){var t,n,o=this;return e=o.get(e),t=o.getPos(e),n=o.getSize(e),{x:t.x,y:t.y,w:n.w,h:n.h}},getSize:function(e){var t,n,o=this;return e=o.get(e),t=o.getStyle(e,"width"),n=o.getStyle(e,"height"),-1===t.indexOf("px")&&(t=0),-1===n.indexOf("px")&&(n=0),{w:parseInt(t,10)||e.offsetWidth||e.clientWidth,h:parseInt(n,10)||e.offsetHeight||e.clientHeight}},getParent:function(e,t,n){return this.getParents(e,t,n,!1)},getParents:function(e,t,o,r){var i,a=this,s=a.settings,c=[];for(e=a.get(e),r=void 0===r,s.strict_root&&(o=o||a.getRoot()),n(t,"string")&&(i=t,t="*"===t?function(e){return 1==e.nodeType}:function(e){return a.is(e,i)});e&&e!=o&&e.nodeType&&9!==e.nodeType;){if(!t||t(e)){if(!r)return e;c.push(e)}e=e.parentNode}return r?c:null},get:function(e){var t;return e&&this.doc&&"string"==typeof e&&(t=e,(e=this.doc.getElementById(e))&&e.id!==t)?this.doc.getElementsByName(t)[1]:e},getNext:function(e,t){return this._findSib(e,t,"nextSibling")},getPrev:function(e,t){return this._findSib(e,t,"previousSibling")},select:function(t,n){var o=this;return e.dom.Sizzle(t,o.get(n)||o.get(o.settings.root_element)||o.doc,[])},is:function(t,n){var o;if(void 0===t.length){if("*"===n)return 1==t.nodeType;if(a.test(n)){for(n=n.toLowerCase().split(/,/),t=t.nodeName.toLowerCase(),o=n.length-1;o>=0;o--)if(n[o]==t)return!0;return!1}}return e.dom.Sizzle.matches(n,t.nodeType?[t]:t).length>0},add:function(e,t,o,r,i){var a=this;return this.run(e,function(e){var s;return s=n(t,"string")?a.doc.createElement(t):t,a.setAttribs(s,o),r&&(r.nodeType?s.appendChild(r):a.setHTML(s,r)),i?s:e.appendChild(s)})},create:function(e,t,n){return this.add(this.doc.createElement(e),e,t,n,1)},createHTML:function(e,t,n){var o,r="",i=this;r+="<"+e
;for(o in t)t.hasOwnProperty(o)&&(r+=" "+o+'="'+i.encode(t[o])+'"');return void 0!==n?r+">"+n+"</"+e+">":r+" />"},remove:function(t,n){return this.run(t,function(t){var o,r=t.parentNode;if(!r)return null;if(n)for(;o=t.firstChild;)!e.isIE||3!==o.nodeType||o.nodeValue?r.insertBefore(o,t):t.removeChild(o);return r.removeChild(t)})},setStyle:function(t,n,o){var i=this;return i.run(t,function(a){var s;switch(s=a.style,n=n.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),i.pixelStyles.test(n)&&(e.is(o,"number")||/^[\-0-9\.]+$/.test(o))&&(o+="px"),n){case"opacity":r&&!e.isIE11&&(s.filter=""===o?"":"alpha(opacity="+100*o+")",t.currentStyle&&t.currentStyle.hasLayout||(s.display="inline-block")),s[n]=s["-moz-opacity"]=s["-khtml-opacity"]=o||"";break;case"float":r&&!e.isIE11?s.styleFloat=o:s.cssFloat=o;break;default:s[n]=o||""}i.settings.update_styles&&i.setAttrib(a,"data-mce-style")})},getStyle:function(e,t,n){if(e=this.get(e)){if(this.doc.defaultView&&n){t=t.replace(/[A-Z]/g,function(e){return"-"+e});try{return this.doc.defaultView.getComputedStyle(e,null).getPropertyValue(t)}catch(e){return null}}return t=t.replace(/-(\D)/g,function(e,t){return t.toUpperCase()}),"float"==t&&(t=r?"styleFloat":"cssFloat"),e.currentStyle&&n?e.currentStyle[t]:e.style?e.style[t]:void 0}},setStyles:function(e,n){var o,r=this,i=r.settings;o=i.update_styles,i.update_styles=0,t(n,function(t,n){r.setStyle(e,n,t)}),i.update_styles=o,i.update_styles&&r.setAttrib(e,i.cssText)},removeAllAttribs:function(e){return this.run(e,function(e){var t,n=e.attributes;for(t=n.length-1;t>=0;t--)e.removeAttributeNode(n.item(t))})},setAttrib:function(e,o,r){var i=this;if(e&&o)return i.settings.strict&&(o=o.toLowerCase()),this.run(e,function(e){var a=i.settings,s=e.getAttribute(o);if(null!==r)switch(o){case"style":if(!n(r,"string"))return void t(r,function(t,n){i.setStyle(e,n,t)});a.keep_values&&(r&&!i._isRes(r)?e.setAttribute("data-mce-style",r,2):e.removeAttribute("data-mce-style",2)),e.style.cssText=r;break;case"class":e.className=r||"";break;case"src":case"href":a.keep_values&&(a.url_converter&&(r=a.url_converter.call(a.url_converter_scope||i,r,o,e)),i.setAttrib(e,"data-mce-"+o,r,2));break;case"shape":e.setAttribute("data-mce-style",r)}if(n(r)&&null!==r&&0!==r.length?e.setAttribute(o,""+r,2):e.removeAttribute(o,2),tinyMCE.activeEditor&&s!=r){var c=tinyMCE.activeEditor;c.onSetAttrib.dispatch(c,e,o,r)}})},setAttribs:function(e,n){var o=this;return this.run(e,function(e){t(n,function(t,n){o.setAttrib(e,n,t)})})},getAttrib:function(t,i,a){var s,c,d=this;if(!(t=d.get(t))||1!==t.nodeType)return a!==c&&a;if(n(a)||(a=""),/^(src|href|style|coords|shape)$/.test(i)&&(s=t.getAttribute("data-mce-"+i)))return s;if(r&&d.props[i]&&(s=t[d.props[i]],s=s&&s.nodeValue?s.nodeValue:s),s||(s=t.getAttribute(i,2)),/^(checked|compact|declare|defer|disabled|ismap|multiple|nohref|noshade|nowrap|readonly|selected)$/.test(i))return!0===t[d.props[i]]&&""===s?i:s?i:"";if("FORM"===t.nodeName&&t.getAttributeNode(i))return t.getAttributeNode(i).nodeValue;if("style"===i&&(s=s||t.style.cssText)&&(s=d.serializeStyle(d.parseStyle(s),t.nodeName),d.settings.keep_values&&!d._isRes(s)&&t.setAttribute("data-mce-style",s)),o&&"class"===i&&s&&(s=s.replace(/(apple|webkit)\-[a-z\-]+/gi,"")),r)switch(i){case"rowspan":case"colspan":1===s&&(s="");break;case"size":("+0"===s||20===s||0===s)&&(s="");break;case"width":case"height":case"vspace":case"checked":case"disabled":case"readonly":0===s&&(s="");break;case"hspace":-1===s&&(s="");break;case"maxlength":case"tabindex":(32768===s||2147483647===s||"32768"===s)&&(s="");break;case"multiple":case"compact":case"noshade":case"nowrap":return 65535===s?i:a;case"shape":s=s.toLowerCase();break;default:0===i.indexOf("on")&&s&&(s=e._replace(/^function\s+\w+\(\)\s+\{\s+(.*)\s+\}$/,"$1",""+s))}return s!==c&&null!==s&&""!==s?""+s:a},getPos:function(e,t){var n,o,r=this,i=0,a=0,s=r.doc;if(e=r.get(e),t=t||s.body,e){if(e.getBoundingClientRect)return e=e.getBoundingClientRect(),n=r.boxModel?s.documentElement:s.body,i=e.left+(s.documentElement.scrollLeft||s.body.scrollLeft)-n.clientTop,a=e.top+(s.documentElement.scrollTop||s.body.scrollTop)-n.clientLeft,{x:i,y:a};for(o=e;o&&o!=t&&o.nodeType;)i+=o.offsetLeft||0,a+=o.offsetTop||0,o=o.offsetParent;for(o=e.parentNode;o&&o!=t&&o.nodeType;)i-=o.scrollLeft||0,a-=o.scrollTop||0,o=o.parentNode}return{x:i,y:a}},parseStyle:function(e){return this.styles.parse(e)},serializeStyle:function(e,t){return this.styles.serialize(e,t)},addStyle:function(e){var t,n=this.doc;styleElm=n.getElementById("mceDefaultStyles"),styleElm||(styleElm=n.createElement("style"),styleElm.id="mceDefaultStyles",styleElm.type="text/css",t=n.getElementsByTagName("head")[0],t.firstChild?t.insertBefore(styleElm,t.firstChild):t.appendChild(styleElm)),styleElm.styleSheet?styleElm.styleSheet.cssText+=e:styleElm.appendChild(n.createTextNode(e))},loadCSS:function(n){var o,i=this,a=i.doc;n||(n=""),o=a.getElementsByTagName("head")[0],t(n.split(","),function(t){var n;i.files[t]||(i.files[t]=!0,n=i.create("link",{rel:"stylesheet",href:e._addVer(t)}),r&&!e.isIE11&&a.documentMode&&a.recalc&&(n.onload=function(){a.recalc&&a.recalc(),n.onload=null}),o.appendChild(n))})},addClass:function(e,t){return this.run(e,function(e){var n;return t?this.hasClass(e,t)?e.className:(n=this.removeClass(e,t),e.className=(""!=n?n+" ":"")+t):0})},removeClass:function(t,n){var o,r=this;return r.run(t,function(t){var i;return r.hasClass(t,n)?(o||(o=new RegExp("(^|\\s+)"+n+"(\\s+|$)","g")),i=t.className.replace(o," "),i=e.trim(" "!=i?i:""),t.className=i,i||(t.removeAttribute("class"),t.removeAttribute("className")),i):t.className})},hasClass:function(e,t){return!(!(e=this.get(e))||!t)&&-1!==(" "+e.className+" ").indexOf(" "+t+" ")},show:function(e){return this.setStyle(e,"display","block")},hide:function(e){return this.setStyle(e,"display","none")},isHidden:function(e){return!(e=this.get(e))||"none"==e.style.display||"none"==this.getStyle(e,"display")},uniqueId:function(e){return(e||"mce_")+this.counter++},setHTML:function(n,o){var i=this;return i.run(n,function(n){if(r){for(;n.firstChild;)n.removeChild(n.firstChild);try{n.innerHTML="<br />"+o,n.removeChild(n.firstChild)}catch(r){var a=i.create("div");a.innerHTML="<br />"+o,t(e.grep(a.childNodes),function(e,t){t&&n.canHaveHTML&&n.appendChild(e)})}}else n.innerHTML=o;return o})},getOuterHTML:function(e){var t,n=this;return(e=n.get(e))?1===e.nodeType&&n.hasOuterHTML?e.outerHTML:(t=(e.ownerDocument||n.doc).createElement("body"),t.appendChild(e.cloneNode(!0)),t.innerHTML):null},setOuterHTML:function(e,t,n){function o(e,t,n){var o,r;for(r=n.createElement("body"),r.innerHTML=t,o=r.lastChild;o;)i.insertAfter(o.cloneNode(!0),e),o=o.previousSibling;i.remove(e)}var i=this;return this.run(e,function(e){if(e=i.get(e),1==e.nodeType)if(n=n||e.ownerDocument||i.doc,r)try{r&&1==e.nodeType?e.outerHTML=t:o(e,t,n)}catch(r){o(e,t,n)}else o(e,t,n)})},decode:i.decode,encode:i.encodeAllRaw,insertAfter:function(e,t){return t=this.get(t),this.run(e,function(e){var n,o;return n=t.parentNode,o=t.nextSibling,o?n.insertBefore(e,o):n.appendChild(e),e})},replace:function(o,r,i){var a=this;return n(r,"array")&&(o=o.cloneNode(!0)),a.run(r,function(n){return i&&t(e.grep(n.childNodes),function(e){o.appendChild(e)}),n.parentNode.replaceChild(o,n)})},rename:function(e,n){var o,r=this;return e.nodeName!=n.toUpperCase()&&(o=r.create(n),t(r.getAttribs(e),function(t){r.setAttrib(o,t.nodeName,r.getAttrib(e,t.nodeName))}),r.replace(o,e,1)),o||e},findCommonAncestor:function(e,t){for(var n,o=e;o;){for(n=t;n&&o!=n;)n=n.parentNode;if(o==n)break;o=o.parentNode}return!o&&e.ownerDocument?e.ownerDocument.documentElement:o},toHex:function(e){function t(e){return e=parseInt(e,10).toString(16),e.length>1?e:"0"+e}var n=/^\s*rgb\s*?\(\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?,\s*?([0-9]+)\s*?\)\s*$/i.exec(e);return n?e="#"+t(n[1])+t(n[2])+t(n[3]):e},getClasses:function(){function n(r){t(r.imports,function(e){n(e)}),t(r.cssRules||r.rules,function(r){switch(r.type||1){case 1:r.selectorText&&t(r.selectorText.split(","),function(t){t=t.replace(/^\s*|\s*$|^\s\./g,""),!/\.mce/.test(t)&&/\.[\w\-]+$/.test(t)&&(o=t,t=e._replace(/.*\.([a-z0-9_\-]+).*/i,"$1",t),(!s||(t=s(t,o)))&&(a[t]||(i.push({"class":t}),a[t]=1)))});break;case 3:try{n(r.styleSheet)}catch(e){}}})}var o,r=this,i=[],a={},s=r.settings.class_filter;if(r.classes)return r.classes;try{t(r.doc.styleSheets,n)}catch(e){}return i.length>0&&(r.classes=i),i},run:function(e,n,o){var r,i=this;return i.doc&&"string"==typeof e&&(e=i.get(e)),!!e&&(o=o||this,e.nodeType||!e.length&&0!==e.length?n.call(o,e):(r=[],t(e,function(e,t){e&&("string"==typeof e&&(e=i.doc.getElementById(e)),r.push(n.call(o,e,t)))}),r))},getAttribs:function(e){var t;return e=this.get(e),e?r?(t=[],"OBJECT"==e.nodeName?e.attributes:("OPTION"===e.nodeName&&this.getAttrib(e,"selected")&&t.push({specified:1,nodeName:"selected"}),e.cloneNode(!1).outerHTML.replace(/<\/?[\w:\-]+ ?|=[\"][^\"]+\"|=\'[^\']+\'|=[\w\-]+|>/gi,"").replace(/[\w:\-]+/gi,function(e){t.push({specified:1,nodeName:e})}),t)):e.attributes:[]},isEmpty:function(t,n){var o,r,i,a,c=this,d=0;if(t=t.firstChild){i=new e.dom.TreeWalker(t,t.parentNode),n=n||c.schema?c.schema.getNonEmptyElements():null;do{if(1===(r=t.nodeType)){if(t.getAttribute("data-mce-bogus"))continue;if(a=t.nodeName.toLowerCase(),n&&n[a]){if("br"===a){d++;continue}return!1}for(c.getAttribs(t),o=t.attributes.length;o--;)if("name"===(a=t.attributes[o].nodeName)||"data-mce-bookmark"===a)return!1}if(8==r)return!1;if(3===r&&!s.test(t.nodeValue))return!1}while(t=i.next())}return 1>=d},destroy:function(t){var n=this;n.win=n.doc=n.root=n.events=n.frag=null,t||e.removeUnload(n.destroy)},createRng:function(){var t=this.doc;return t.createRange?t.createRange():new e.dom.Range(this)},nodeIndex:function(e,t){var n,o,r=0;if(e)for(n=e.nodeType,e=e.previousSibling,e;e;e=e.previousSibling)o=e.nodeType,(!t||3!=o||o!=n&&e.nodeValue.length)&&(r++,n=o);return r},split:function(t,n,o){function r(t){function n(e){var t=e.previousSibling&&"SPAN"==e.previousSibling.nodeName,n=e.nextSibling&&"SPAN"==e.nextSibling.nodeName;return t&&n}var o,i=t.childNodes,a=t.nodeType;if(1!=a||"bookmark"!=t.getAttribute("data-mce-type")){for(o=i.length-1;o>=0;o--)r(i[o]);if(9!=a){if(3==a&&t.nodeValue.length>0){var s=e.trim(t.nodeValue).length;if(!c.isBlock(t.parentNode)||s>0||0===s&&n(t))return}else if(1==a&&(i=t.childNodes,1==i.length&&i[0]&&1==i[0].nodeType&&"bookmark"==i[0].getAttribute("data-mce-type")&&t.parentNode.insertBefore(i[0],t),i.length||/^(br|hr|input|img)$/i.test(t.nodeName)))return;c.remove(t)}return t}}var i,a,s,c=this,d=c.createRng();return t&&n?(d.setStart(t.parentNode,c.nodeIndex(t)),d.setEnd(n.parentNode,c.nodeIndex(n)),i=d.extractContents(),d=c.createRng(),d.setStart(n.parentNode,c.nodeIndex(n)+1),d.setEnd(t.parentNode,c.nodeIndex(t)+1),a=d.extractContents(),s=t.parentNode,s.insertBefore(r(i),t),o?s.replaceChild(o,n):s.insertBefore(n,t),s.insertBefore(r(a),t),c.remove(t),o||n):void 0},bind:function(e,t,n,o){return this.events.add(e,t,n,o||this)},unbind:function(e,t,n){return this.events.remove(e,t,n)},fire:function(e,t,n){return this.events.fire(e,t,n)},getContentEditable:function(e){var t;return 1!=e.nodeType?null:(t=e.getAttribute("data-mce-contenteditable"),t&&"inherit"!==t?t:"inherit"!==e.contentEditable?e.contentEditable:null)},_findSib:function(e,t,o){var r=this,i=t;if(e)for(n(i,"string")&&(i=function(e){return r.is(e,t)}),e=e[o];e;e=e[o])if(i(e))return e;return null},_isRes:function(e){return/^(top|left|bottom|right|width|height)/i.test(e)||/;\s*(top|left|bottom|right|width|height)/i.test(e)}}),e.DOM=new e.dom.DOMUtils(document,{process_html:0})}(tinymce),function(e){function t(e){function n(){return I.createDocumentFragment()}function o(e,t){_(H,e,t)}function r(e,t){_(F,e,t)}function i(e){o(e.parentNode,$(e))}function a(e){o(e.parentNode,$(e)+1)}function s(e){r(e.parentNode,$(e))}function c(e){r(e.parentNode,$(e)+1)}function d(e){e?(L[z]=L[V],L[q]=L[U]):(L[V]=L[z],L[U]=L[q]),L.collapsed=H}function l(e){i(e),c(e)}function u(e){o(e,0),r(e,1===e.nodeType?e.childNodes.length:e.nodeValue.length)}function f(e,t){var n=L[V],o=L[U],r=L[z],i=L[q],a=t.startContainer,s=t.startOffset,c=t.endContainer,d=t.endOffset;return 0===e?x(n,o,a,s):1===e?x(r,i,a,s):2===e?x(r,i,c,d):3===e?x(n,o,c,d):void 0}function p(){E(O)}function m(){return E(D)}function h(){return E(P)}function g(t){var n,o,r=this[V],i=this[U];3!==r.nodeType&&4!==r.nodeType||!r.nodeValue?(r.childNodes.length>0&&(o=r.childNodes[i]),o?r.insertBefore(t,o):r.appendChild(t)):i?i>=r.nodeValue.length?e.insertAfter(t,r):(n=r.splitText(i),r.parentNode.insertBefore(t,n)):r.parentNode.insertBefore(t,r)}function v(e){var t=L.extractContents();L.insertNode(e),e.appendChild(t),L.selectNode(e)}function y(){return K(new t(e),{startContainer:L[V],startOffset:L[U],endContainer:L[z],endOffset:L[q],collapsed:L.collapsed,commonAncestorContainer:L.commonAncestorContainer})}function b(e,t){var n;if(3==e.nodeType)return e;if(0>t)return e;for(n=e.firstChild;n&&t>0;)--t,n=n.nextSibling;return n||e}function C(){return L[V]==L[z]&&L[U]==L[q]}function x(t,n,o,r){var i,a,s,c,d,l;if(t==o)return n==r?0:r>n?-1:1;for(i=o;i&&i.parentNode!=t;)i=i.parentNode;if(i){for(a=0,s=t.firstChild;s!=i&&n>a;)a++,s=s.nextSibling;return a>=n?-1:1}for(i=t;i&&i.parentNode!=o;)i=i.parentNode;if(i){for(a=0,s=o.firstChild;s!=i&&r>a;)a++,s=s.nextSibling;return r>a?-1:1}for(c=e.findCommonAncestor(t,o),d=t;d&&d.parentNode!=c;)d=d.parentNode;for(d||(d=c),l=o;l&&l.parentNode!=c;)l=l.parentNode;if(l||(l=c),d==l)return 0;for(s=c.firstChild;s;){if(s==d)return-1;if(s==l)return 1;s=s.nextSibling}}function _(t,n,o){var r,i;for(t?(L[V]=n,L[U]=o):(L[z]=n,L[q]=o),r=L[z];r.parentNode;)r=r.parentNode;for(i=L[V];i.parentNode;)i=i.parentNode;i==r?x(L[V],L[U],L[z],L[q])>0&&L.collapse(t):L.collapse(t),L.collapsed=C(),L.commonAncestorContainer=e.findCommonAncestor(L[V],L[z])}function E(e){var t,n,o,r,i,a,s,c=0,d=0;if(L[V]==L[z])return S(e);for(t=L[z],n=t.parentNode;n;t=n,n=n.parentNode){if(n==L[V])return k(t,e);++c}for(t=L[V],n=t.parentNode;n;t=n,n=n.parentNode){if(n==L[z])return w(t,e);++d}for(o=d-c,r=L[V];o>0;)r=r.parentNode,o--;for(i=L[z];0>o;)i=i.parentNode,o++;for(a=r.parentNode,s=i.parentNode;a!=s;a=a.parentNode,s=s.parentNode)r=a,i=s;return N(r,i,e)}function S(e){var t,o,r,i,a,s,c,d,l;if(e!=O&&(t=n()),L[U]==L[q])return t;if(3==L[V].nodeType){if(o=L[V].nodeValue,r=o.substring(L[U],L[q]),e!=P&&(i=L[V],d=L[U],l=L[q]-L[U],0===d&&l>=i.nodeValue.length-1?i.parentNode.removeChild(i):i.deleteData(d,l),L.collapse(H)),e==O)return;return r.length>0&&t.appendChild(I.createTextNode(r)),t}for(i=b(L[V],L[U]),a=L[q]-L[U];i&&a>0;)s=i.nextSibling,c=M(i,e),t&&t.appendChild(c),--a,i=s;return e!=P&&L.collapse(H),t}function k(e,t){var o,r,i,a,s,c;if(t!=O&&(o=n()),r=T(e,t),o&&o.appendChild(r),i=$(e),0>=(a=i-L[U]))return t!=P&&(L.setEndBefore(e),L.collapse(F)),o;for(r=e.previousSibling;a>0;)s=r.previousSibling,c=M(r,t),o&&o.insertBefore(c,o.firstChild),--a,r=s;return t!=P&&(L.setEndBefore(e),L.collapse(F)),o}function w(e,t){var o,r,i,a,s,c;for(t!=O&&(o=n()),i=A(e,t),o&&o.appendChild(i),r=$(e),++r,a=L[q]-r,i=e.nextSibling;i&&a>0;)s=i.nextSibling,c=M(i,t),o&&o.appendChild(c),--a,i=s;return t!=P&&(L.setStartAfter(e),L.collapse(H)),o}function N(e,t,o){var r,i,a,s,c,d,l;for(o!=O&&(i=n()),r=A(e,o),i&&i.appendChild(r),e.parentNode,a=$(e),s=$(t),++a,c=s-a,d=e.nextSibling;c>0;)l=d.nextSibling,r=M(d,o),i&&i.appendChild(r),d=l,--c;return r=T(t,o),i&&i.appendChild(r),o!=P&&(L.setStartAfter(e),L.collapse(H)),i}function T(e,t){var n,o,r,i,a,s=b(L[z],L[q]-1),c=s!=L[z];if(s==e)return B(s,c,F,t);for(n=s.parentNode,o=B(n,F,F,t);n;){for(;s;)r=s.previousSibling,i=B(s,c,F,t),t!=O&&o.insertBefore(i,o.firstChild),c=H,s=r;if(n==e)return o;s=n.previousSibling,n=n.parentNode,a=B(n,F,F,t),t!=O&&a.appendChild(o),o=a}}function A(e,t){var n,o,r,i,a,s=b(L[V],L[U]),c=s!=L[V];if(s==e)return B(s,c,H,t);for(n=s.parentNode,o=B(n,F,H,t);n;){for(;s;)r=s.nextSibling,i=B(s,c,H,t),t!=O&&o.appendChild(i),c=H,s=r;if(n==e)return o;s=n.nextSibling,n=n.parentNode,a=B(n,F,H,t),t!=O&&a.appendChild(o),o=a}}function B(t,n,o,r){var i,a,s,c,d;if(n)return M(t,r);if(3==t.nodeType){if(i=t.nodeValue,o?(c=L[U],a=i.substring(c),s=i.substring(0,c)):(c=L[q],a=i.substring(0,c),s=i.substring(c)),r!=P&&(t.nodeValue=s),r==O)return;return d=e.clone(t,F),d.nodeValue=a,d}return r!=O?e.clone(t,F):void 0}function M(t,n){return n!=O?n==P?e.clone(t,H):t:void t.parentNode.removeChild(t)}function R(){return e.create("body",null,h()).outerText}var L=this,I=e.doc,D=0,P=1,O=2,H=!0,F=!1,U="startOffset",V="startContainer",z="endContainer",q="endOffset",K=tinymce.extend,$=e.nodeIndex;return K(L,{startContainer:I,startOffset:0,endContainer:I,endOffset:0,collapsed:H,commonAncestorContainer:I,START_TO_START:0,START_TO_END:1,END_TO_END:2,END_TO_START:3,setStart:o,setEnd:r,setStartBefore:i,setStartAfter:a,setEndBefore:s,setEndAfter:c,collapse:d,selectNode:l,selectNodeContents:u,compareBoundaryPoints:f,deleteContents:p,extractContents:m,cloneContents:h,insertNode:g,surroundContents:v,cloneRange:y,toStringIE:R}),L}e.Range=t,t.prototype.toString=function(){return this.toStringIE()}}(tinymce.dom),function(){function e(e){function t(t,n){var o,r,i,a,s,c,d,l,u=0,f=-1;if(o=t.duplicate(),o.collapse(n),l=o.parentElement(),l.ownerDocument===e.dom.doc){for(;"false"===l.contentEditable;)l=l.parentNode;if(!l.hasChildNodes())return{node:l,inside:1};for(a=l.children,r=a.length-1;r>=u;)if(d=Math.floor((u+r)/2),s=a[d],o.moveToElementText(s),(f=o.compareEndPoints(n?"StartToStart":"EndToEnd",t))>0)r=d-1;else{if(!(0>f))return{node:s};u=d+1}if(0>f)for(s?o.collapse(!1):(o.moveToElementText(l),o.collapse(!0),s=l,i=!0),c=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",1)&&l==o.parentElement();)c++;else for(o.collapse(!0),c=0;0!==o.compareEndPoints(n?"StartToStart":"StartToEnd",t)&&0!==o.move("character",-1)&&l==o.parentElement();)c++;return{node:s,position:f,offset:c,inside:i}}}function n(){function n(e){var n,o,r,i,a,s=t(l,e),c=0;if(n=s.node,o=s.offset,s.inside&&!n.hasChildNodes())return void u[e?"setStart":"setEnd"](n,0);if(o===i)return void u[e?"setStartBefore":"setEndAfter"](n);if(s.position<0){if(!(r=s.inside?n.firstChild:n.nextSibling))return void u[e?"setStartAfter":"setEndAfter"](n);if(!o)return void(3==r.nodeType?u[e?"setStart":"setEnd"](r,0):u[e?"setStartBefore":"setEndBefore"](r));for(;r;){if(a=r.nodeValue,(c+=a.length)>=o){n=r,c-=o,c=a.length-c;break}r=r.nextSibling}}else{if(!(r=n.previousSibling))return u[e?"setStartBefore":"setEndBefore"](n);if(!o)return void(3==n.nodeType?u[e?"setStart":"setEnd"](r,n.nodeValue.length):u[e?"setStartAfter":"setEndAfter"](r));for(;r;){if((c+=r.nodeValue.length)>=o){n=r,c-=o;break}r=r.previousSibling}}u[e?"setStart":"setEnd"](n,c)}var i,a,s,c,d,l=e.getRng(),u=r.createRng();if(i=l.item?l.item(0):l.parentElement(),i.ownerDocument!=r.doc)return u;if(a=e.isCollapsed(),l.item)return u.setStart(i.parentNode,r.nodeIndex(i)),u.setEnd(u.startContainer,u.startOffset+1),u;try{n(!0),a||n()}catch(t){if(-2147024809!=t.number)throw t;d=o.getBookmark(2),s=l.duplicate(),s.collapse(!0),i=s.parentElement(),a||(s=l.duplicate(),s.collapse(!1),c=s.parentElement(),c.innerHTML=c.innerHTML),i.innerHTML=i.innerHTML,o.moveToBookmark(d),l=e.getRng(),n(!0),a||n()}return u}var o=this,r=e.dom;this.getBookmark=function(n){function o(e){var t,n,o,i,a=[];for(t=e.parentNode,n=r.getRoot().parentNode;t!=n&&9!==t.nodeType;){for(o=t.children,i=o.length;i--;)if(e===o[i]){a.push(i);break}e=t,t=t.parentNode}return a}function i(e){var n;return n=t(a,e),n?{position:n.position,offset:n.offset,indexes:o(n.node),inside:n.inside}:void 0}var a=e.getRng(),s={};return 2===n&&(a.item?s.start={ctrl:!0,indexes:o(a.item(0))}:(s.start=i(!0),e.isCollapsed()||(s.end=i()))),s},this.moveToBookmark=function(e){function t(e){var t,n,o,i;for(t=r.getRoot(),n=e.length-1;n>=0;n--)i=t.children,(o=e[n])<=i.length-1&&(t=i[o]);return t}function n(n){var r,a,s,c=e[n?"start":"end"];c&&(r=c.position>0,a=i.createTextRange(),a.moveToElementText(t(c.indexes)),offset=c.offset,offset!==s?(a.collapse(c.inside||r),a.moveStart("character",r?-offset:offset)):a.collapse(n),o.setEndPoint(n?"StartToStart":"EndToStart",a),n&&o.collapse(!0))}var o,i=r.doc.body;e.start&&(e.start.ctrl?(o=i.createControlRange(),o.addElement(t(e.start.indexes)),o.select()):(o=i.createTextRange(),n(!0),n(),o.select()))},this.addRange=function(t){function n(e){var t,n,i,l,u;i=r.create("a"),t=e?a:c,n=e?s:d,l=o.duplicate(),(t==p||t==p.documentElement)&&(t=m,n=0),3==t.nodeType?(t.parentNode.insertBefore(i,t),l.moveToElementText(i),l.moveStart("character",n),r.remove(i),o.setEndPoint(e?"StartToStart":"EndToEnd",l)):(u=t.childNodes,u.length?(n>=u.length?r.insertAfter(i,u[u.length-1]):t.insertBefore(i,u[n]),l.moveToElementText(i)):t.canHaveHTML&&(t.innerHTML="<span>\ufeff</span>",i=t.firstChild,l.moveToElementText(i),l.collapse(!1)),o.setEndPoint(e?"StartToStart":"EndToEnd",l),r.remove(i))}var o,i,a,s,c,d,l,u,f,p=e.dom.doc,m=p.body;if(a=t.startContainer,s=t.startOffset,c=t.endContainer,d=t.endOffset,o=m.createTextRange(),a==c&&1==a.nodeType){if(s==d&&!a.hasChildNodes()){if(a.canHaveHTML)return l=a.previousSibling,l&&!l.hasChildNodes()&&r.isBlock(l)?l.innerHTML="\ufeff":l=null,a.innerHTML="<span>\ufeff</span><span>\ufeff</span>",o.moveToElementText(a.lastChild),o.select(),r.doc.selection.clear(),a.innerHTML="",void(l&&(l.innerHTML=""));s=r.nodeIndex(a),a=a.parentNode}if(s==d-1)try{if(f=a.childNodes[s],i=m.createControlRange(),i.addElement(f),i.select(),u=e.getRng(),u.item&&f===u.item(0))return}catch(e){}}n(!0),n(),o.select()},this.getRangeAt=n}tinymce.dom.TridentSelection=e}(),/*
 * Sizzle CSS Selector Engine
 *  Copyright, The Dojo Foundation
 *  Released under the MIT, BSD, and GPL Licenses.
 *  More information: http://sizzlejs.com/
 */
function(){function e(e,t,n,r,i,a){for(var s=0,c=r.length;c>s;s++){var d=r[s];if(d){var l=!1;for(d=d[e];d;){if(d[o]===n){l=r[d.sizset];break}if(1!==d.nodeType||a||(d[o]=n,d.sizset=s),d.nodeName.toLowerCase()===t){l=d;break}d=d[e]}r[s]=l}}}function t(e,t,n,r,i,a){for(var s=0,c=r.length;c>s;s++){var d=r[s];if(d){var l=!1;for(d=d[e];d;){if(d[o]===n){l=r[d.sizset];break}if(1===d.nodeType)if(a||(d[o]=n,d.sizset=s),"string"!=typeof t){if(d===t){l=!0;break}}else if(u.filter(t,[d]).length>0){l=d;break}d=d[e]}r[s]=l}}}var n=/((?:\((?:\([^()]+\)|[^()]+)+\)|\[(?:\[[^\[\]]*\]|['"][^'"]*['"]|[^\[\]'"]+)+\]|\\.|[^ >+~,(\[\\]+)+|[>+~])(\s*,\s*)?((?:.|\r|\n)*)/g,o="sizcache",r=0,i=Object.prototype.toString,a=!1,s=!0,c=/\\/g,d=/\r\n/g,l=/\W/;[0,0].sort(function(){return s=!1,0});var u=function(e,t,o,r){o=o||[],t=t||document;var a=t;if(1!==t.nodeType&&9!==t.nodeType)return[];if(!e||"string"!=typeof e)return o;var s,c,d,l,f,h,g,y,b=!0,x=u.isXML(t),_=[],E=e;do{if(n.exec(""),(s=n.exec(E))&&(E=s[3],_.push(s[1]),s[2])){l=s[3];break}}while(s);if(_.length>1&&m.exec(e))if(2===_.length&&p.relative[_[0]])c=C(_[0]+_[1],t,r);else for(c=p.relative[_[0]]?[t]:u(_.shift(),t);_.length;)e=_.shift(),p.relative[e]&&(e+=_.shift()),c=C(e,c,r);else if(!r&&_.length>1&&9===t.nodeType&&!x&&p.match.ID.test(_[0])&&!p.match.ID.test(_[_.length-1])&&(f=u.find(_.shift(),t,x),t=f.expr?u.filter(f.expr,f.set)[0]:f.set[0]),t)for(f=r?{expr:_.pop(),set:v(r)}:u.find(_.pop(),1!==_.length||"~"!==_[0]&&"+"!==_[0]||!t.parentNode?t:t.parentNode,x),c=f.expr?u.filter(f.expr,f.set):f.set,_.length>0?d=v(c):b=!1;_.length;)h=_.pop(),g=h,p.relative[h]?g=_.pop():h="",null==g&&(g=t),p.relative[h](d,g,x);else d=_=[];if(d||(d=c),d||u.error(h||e),"[object Array]"===i.call(d))if(b)if(t&&1===t.nodeType)for(y=0;null!=d[y];y++)d[y]&&(!0===d[y]||1===d[y].nodeType&&u.contains(t,d[y]))&&o.push(c[y]);else for(y=0;null!=d[y];y++)d[y]&&1===d[y].nodeType&&o.push(c[y]);else o.push.apply(o,d);else v(d,o);return l&&(u(l,a,o,r),u.uniqueSort(o)),o};u.uniqueSort=function(e){if(y&&(a=s,e.sort(y),a))for(var t=1;t<e.length;t++)e[t]===e[t-1]&&e.splice(t--,1);return e},u.matches=function(e,t){return u(e,null,null,t)},u.matchesSelector=function(e,t){return u(t,null,null,[e]).length>0},u.find=function(e,t,n){var o,r,i,a,s,d;if(!e)return[];for(r=0,i=p.order.length;i>r;r++)if(s=p.order[r],(a=p.leftMatch[s].exec(e))&&(d=a[1],a.splice(1,1),"\\"!==d.substr(d.length-1)&&(a[1]=(a[1]||"").replace(c,""),null!=(o=p.find[s](a,t,n))))){e=e.replace(p.match[s],"");break}return o||(o="undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName("*"):[]),{set:o,expr:e}},u.filter=function(e,t,n,o){for(var r,i,a,s,c,d,l,f,m,h=e,g=[],v=t,y=t&&t[0]&&u.isXML(t[0]);e&&t.length;){for(a in p.filter)if(null!=(r=p.leftMatch[a].exec(e))&&r[2]){if(d=p.filter[a],l=r[1],i=!1,r.splice(1,1),"\\"===l.substr(l.length-1))continue;if(v===g&&(g=[]),p.preFilter[a])if(r=p.preFilter[a](r,v,n,g,o,y)){if(!0===r)continue}else i=s=!0;if(r)for(f=0;null!=(c=v[f]);f++)c&&(s=d(c,r,f,v),m=o^s,n&&null!=s?m?i=!0:v[f]=!1:m&&(g.push(c),i=!0));if(void 0!==s){if(n||(v=g),e=e.replace(p.match[a],""),!i)return[];break}}if(e===h){if(null!=i)break;u.error(e)}h=e}return v},u.error=function(e){throw new Error("Syntax error, unrecognized expression: "+e)};var f=u.getText=function(e){var t,n,o=e.nodeType,r="";if(o){if(1===o||9===o||11===o){if("string"==typeof e.textContent)return e.textContent;if("string"==typeof e.innerText)return e.innerText.replace(d,"");for(e=e.firstChild;e;e=e.nextSibling)r+=f(e)}else if(3===o||4===o)return e.nodeValue}else for(t=0;n=e[t];t++)8!==n.nodeType&&(r+=f(n));return r},p=u.selectors={order:["ID","NAME","TAG"],match:{ID:/#((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,CLASS:/\.((?:[\w\u00c0-\uFFFF\-]|\\.)+)/,NAME:/\[name=['"]*((?:[\w\u00c0-\uFFFF\-]|\\.)+)['"]*\]/,ATTR:/\[\s*((?:[\w\u00c0-\uFFFF\-]|\\.)+)\s*(?:(\S?=)\s*(?:(['"])(.*?)\3|(#?(?:[\w\u00c0-\uFFFF\-]|\\.)*)|)|)\s*\]/,TAG:/^((?:[\w\u00c0-\uFFFF\*\-]|\\.)+)/,CHILD:/:(only|nth|last|first)-child(?:\(\s*(even|odd|(?:[+\-]?\d+|(?:[+\-]?\d*)?n\s*(?:[+\-]\s*\d+)?))\s*\))?/,POS:/:(nth|eq|gt|lt|first|last|even|odd)(?:\((\d*)\))?(?=[^\-]|$)/,PSEUDO:/:((?:[\w\u00c0-\uFFFF\-]|\\.)+)(?:\((['"]?)((?:\([^\)]+\)|[^\(\)]*)+)\2\))?/},leftMatch:{},attrMap:{"class":"className","for":"htmlFor"},attrHandle:{href:function(e){return e.getAttribute("href")},type:function(e){return e.getAttribute("type")}},relative:{"+":function(e,t){var n="string"==typeof t,o=n&&!l.test(t),r=n&&!o;o&&(t=t.toLowerCase());for(var i,a=0,s=e.length;s>a;a++)if(i=e[a]){for(;(i=i.previousSibling)&&1!==i.nodeType;);e[a]=r||i&&i.nodeName.toLowerCase()===t?i||!1:i===t}r&&u.filter(t,e,!0)},">":function(e,t){var n,o="string"==typeof t,r=0,i=e.length;if(o&&!l.test(t)){for(t=t.toLowerCase();i>r;r++)if(n=e[r]){var a=n.parentNode;e[r]=a.nodeName.toLowerCase()===t&&a}}else{for(;i>r;r++)(n=e[r])&&(e[r]=o?n.parentNode:n.parentNode===t);o&&u.filter(t,e,!0)}},"":function(n,o,i){var a,s=r++,c=t;"string"!=typeof o||l.test(o)||(o=o.toLowerCase(),a=o,c=e),c("parentNode",o,s,n,a,i)},"~":function(n,o,i){var a,s=r++,c=t;"string"!=typeof o||l.test(o)||(o=o.toLowerCase(),a=o,c=e),c("previousSibling",o,s,n,a,i)}},find:{ID:function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var o=t.getElementById(e[1]);return o&&o.parentNode?[o]:[]}},NAME:function(e,t){if("undefined"!=typeof t.getElementsByName){for(var n=[],o=t.getElementsByName(e[1]),r=0,i=o.length;i>r;r++)o[r].getAttribute("name")===e[1]&&n.push(o[r]);return 0===n.length?null:n}},TAG:function(e,t){return"undefined"!=typeof t.getElementsByTagName?t.getElementsByTagName(e[1]):void 0}},preFilter:{CLASS:function(e,t,n,o,r,i){if(e=" "+e[1].replace(c,"")+" ",i)return e;for(var a,s=0;null!=(a=t[s]);s++)a&&(r^(a.className&&(" "+a.className+" ").replace(/[\t\n\r]/g," ").indexOf(e)>=0)?n||o.push(a):n&&(t[s]=!1));return!1},ID:function(e){return e[1].replace(c,"")},TAG:function(e){return e[1].replace(c,"").toLowerCase()},CHILD:function(e){if("nth"===e[1]){e[2]||u.error(e[0]),e[2]=e[2].replace(/^\+|\s*/g,"");var t=/(-?)(\d*)(?:n([+\-]?\d*))?/.exec("even"===e[2]&&"2n"||"odd"===e[2]&&"2n+1"||!/\D/.test(e[2])&&"0n+"+e[2]||e[2]);e[2]=t[1]+(t[2]||1)-0,e[3]=t[3]-0}else e[2]&&u.error(e[0]);return e[0]=r++,e},ATTR:function(e,t,n,o,r,i){var a=e[1]=e[1].replace(c,"");return!i&&p.attrMap[a]&&(e[1]=p.attrMap[a]),e[4]=(e[4]||e[5]||"").replace(c,""),"~="===e[2]&&(e[4]=" "+e[4]+" "),e},PSEUDO:function(e,t,o,r,i){if("not"===e[1]){if(!((n.exec(e[3])||"").length>1||/^\w/.test(e[3]))){var a=u.filter(e[3],t,o,!0^i);return o||r.push.apply(r,a),!1}e[3]=u(e[3],null,null,t)}else if(p.match.POS.test(e[0])||p.match.CHILD.test(e[0]))return!0;return e},POS:function(e){return e.unshift(!0),e}},filters:{enabled:function(e){return!1===e.disabled&&"hidden"!==e.type},disabled:function(e){return!0===e.disabled},checked:function(e){return!0===e.checked},selected:function(e){return e.parentNode&&e.parentNode.selectedIndex,!0===e.selected},parent:function(e){return!!e.firstChild},empty:function(e){return!e.firstChild},has:function(e,t,n){return!!u(n[3],e).length},header:function(e){return/h\d/i.test(e.nodeName)},text:function(e){var t=e.getAttribute("type"),n=e.type;return"input"===e.nodeName.toLowerCase()&&"text"===n&&(t===n||null===t)},radio:function(e){return"input"===e.nodeName.toLowerCase()&&"radio"===e.type},checkbox:function(e){return"input"===e.nodeName.toLowerCase()&&"checkbox"===e.type},file:function(e){return"input"===e.nodeName.toLowerCase()&&"file"===e.type},password:function(e){return"input"===e.nodeName.toLowerCase()&&"password"===e.type},submit:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"submit"===e.type},image:function(e){return"input"===e.nodeName.toLowerCase()&&"image"===e.type},reset:function(e){var t=e.nodeName.toLowerCase();return("input"===t||"button"===t)&&"reset"===e.type},button:function(e){var t=e.nodeName.toLowerCase();return"input"===t&&"button"===e.type||"button"===t},input:function(e){return/input|select|textarea|button/i.test(e.nodeName)},focus:function(e){return e===e.ownerDocument.activeElement}},setFilters:{first:function(e,t){return 0===t},last:function(e,t,n,o){return t===o.length-1},even:function(e,t){return t%2==0},odd:function(e,t){return t%2==1},lt:function(e,t,n){return t<n[3]-0},gt:function(e,t,n){return t>n[3]-0},nth:function(e,t,n){return n[3]-0===t},eq:function(e,t,n){return n[3]-0===t}},filter:{PSEUDO:function(e,t,n,o){var r=t[1],i=p.filters[r];if(i)return i(e,n,t,o);if("contains"===r)return(e.textContent||e.innerText||f([e])||"").indexOf(t[3])>=0;if("not"===r){for(var a=t[3],s=0,c=a.length;c>s;s++)if(a[s]===e)return!1;return!0}u.error(r)},CHILD:function(e,t){var n,r,i,a,s,c,d=t[1],l=e;switch(d){case"only":case"first":for(;l=l.previousSibling;)if(1===l.nodeType)return!1;if("first"===d)return!0;l=e;case"last":for(;l=l.nextSibling;)if(1===l.nodeType)return!1;return!0;case"nth":if(n=t[2],r=t[3],1===n&&0===r)return!0;if(i=t[0],(a=e.parentNode)&&(a[o]!==i||!e.nodeIndex)){for(s=0,l=a.firstChild;l;l=l.nextSibling)1===l.nodeType&&(l.nodeIndex=++s);a[o]=i}return c=e.nodeIndex-r,0===n?0===c:c%n==0&&c/n>=0}},ID:function(e,t){return 1===e.nodeType&&e.getAttribute("id")===t},TAG:function(e,t){return"*"===t&&1===e.nodeType||!!e.nodeName&&e.nodeName.toLowerCase()===t},CLASS:function(e,t){return(" "+(e.className||e.getAttribute("class"))+" ").indexOf(t)>-1},ATTR:function(e,t){var n=t[1],o=u.attr?u.attr(e,n):p.attrHandle[n]?p.attrHandle[n](e):null!=e[n]?e[n]:e.getAttribute(n),r=o+"",i=t[2],a=t[4];return null==o?"!="===i:!i&&u.attr?null!=o:"="===i?r===a:"*="===i?r.indexOf(a)>=0:"~="===i?(" "+r+" ").indexOf(a)>=0:a?"!="===i?r!==a:"^="===i?0===r.indexOf(a):"$="===i?r.substr(r.length-a.length)===a:"|="===i&&(r===a||r.substr(0,a.length+1)===a+"-"):r&&!1!==o},POS:function(e,t,n,o){var r=t[2],i=p.setFilters[r];return i?i(e,n,t,o):void 0}}},m=p.match.POS,h=function(e,t){return"\\"+(t-0+1)};for(var g in p.match)p.match[g]=new RegExp(p.match[g].source+/(?![^\[]*\])(?![^\(]*\))/.source),p.leftMatch[g]=new RegExp(/(^(?:.|\r|\n)*?)/.source+p.match[g].source.replace(/\\(\d+)/g,h));p.match.globalPOS=m;var v=function(e,t){return e=Array.prototype.slice.call(e,0),t?(t.push.apply(t,e),t):e};try{Array.prototype.slice.call(document.documentElement.childNodes,0)[0].nodeType}catch(e){v=function(e,t){var n=0,o=t||[];if("[object Array]"===i.call(e))Array.prototype.push.apply(o,e);else if("number"==typeof e.length)for(var r=e.length;r>n;n++)o.push(e[n]);else for(;e[n];n++)o.push(e[n]);return o}}var y,b;document.documentElement.compareDocumentPosition?y=function(e,t){return e===t?(a=!0,0):e.compareDocumentPosition&&t.compareDocumentPosition?4&e.compareDocumentPosition(t)?-1:1:e.compareDocumentPosition?-1:1}:(y=function(e,t){if(e===t)return a=!0,0;if(e.sourceIndex&&t.sourceIndex)return e.sourceIndex-t.sourceIndex;var n,o,r=[],i=[],s=e.parentNode,c=t.parentNode,d=s;if(s===c)return b(e,t);if(!s)return-1;if(!c)return 1;for(;d;)r.unshift(d),d=d.parentNode;for(d=c;d;)i.unshift(d),d=d.parentNode;n=r.length,o=i.length;for(var l=0;n>l&&o>l;l++)if(r[l]!==i[l])return b(r[l],i[l]);return l===n?b(e,i[l],-1):b(r[l],t,1)},b=function(e,t,n){if(e===t)return n;for(var o=e.nextSibling;o;){if(o===t)return-1;o=o.nextSibling}return 1}),function(){var e=document.createElement("div"),t="script"+(new Date).getTime(),n=document.documentElement;e.innerHTML="<a name='"+t+"'/>",n.insertBefore(e,n.firstChild),document.getElementById(t)&&(p.find.ID=function(e,t,n){if("undefined"!=typeof t.getElementById&&!n){var o=t.getElementById(e[1]);return o?o.id===e[1]||"undefined"!=typeof o.getAttributeNode&&o.getAttributeNode("id").nodeValue===e[1]?[o]:void 0:[]}},p.filter.ID=function(e,t){var n="undefined"!=typeof e.getAttributeNode&&e.getAttributeNode("id");return 1===e.nodeType&&n&&n.nodeValue===t}),n.removeChild(e),n=e=null}(),function(){var e=document.createElement("div");e.appendChild(document.createComment("")),e.getElementsByTagName("*").length>0&&(p.find.TAG=function(e,t){var n=t.getElementsByTagName(e[1]);if("*"===e[1]){for(var o=[],r=0;n[r];r++)1===n[r].nodeType&&o.push(n[r]);n=o}return n}),e.innerHTML="<a href='#'></a>",e.firstChild&&"undefined"!=typeof e.firstChild.getAttribute&&"#"!==e.firstChild.getAttribute("href")&&(p.attrHandle.href=function(e){return e.getAttribute("href",2)}),e=null}(),document.querySelectorAll&&function(){var e=u,t=document.createElement("div");if(t.innerHTML="<p class='TEST'></p>",!t.querySelectorAll||0!==t.querySelectorAll(".TEST").length){u=function(t,n,o,r){if(n=n||document,!r&&!u.isXML(n)){var i=/^(\w+$)|^\.([\w\-]+$)|^#([\w\-]+$)/.exec(t);if(i&&(1===n.nodeType||9===n.nodeType)){if(i[1])return v(n.getElementsByTagName(t),o);if(i[2]&&p.find.CLASS&&n.getElementsByClassName)return v(n.getElementsByClassName(i[2]),o)}if(9===n.nodeType){if("body"===t&&n.body)return v([n.body],o);if(i&&i[3]){var a=n.getElementById(i[3]);if(!a||!a.parentNode)return v([],o);if(a.id===i[3])return v([a],o)}try{return v(n.querySelectorAll(t),o)}catch(e){}}else if(1===n.nodeType&&"object"!==n.nodeName.toLowerCase()){var s=n,c=n.getAttribute("id"),d=c||"__sizzle__",l=n.parentNode,f=/^\s*[+~]/.test(t);c?d=d.replace(/'/g,"\\$&"):n.setAttribute("id",d),f&&l&&(n=n.parentNode);try{if(!f||l)return v(n.querySelectorAll("[id='"+d+"'] "+t),o)}catch(e){}finally{c||s.removeAttribute("id")}}}return e(t,n,o,r)};for(var n in e)u[n]=e[n];t=null}}(),function(){var e=document.documentElement,t=e.matchesSelector||e.mozMatchesSelector||e.webkitMatchesSelector||e.msMatchesSelector;if(t){var n=!t.call(document.createElement("div"),"div"),o=!1;try{t.call(document.documentElement,"[test!='']:sizzle")}catch(e){o=!0}u.matchesSelector=function(e,r){if(r=r.replace(/\=\s*([^'"\]]*)\s*\]/g,"='$1']"),!u.isXML(e))try{if(o||!p.match.PSEUDO.test(r)&&!/!=/.test(r)){var i=t.call(e,r);if(i||!n||e.document&&11!==e.document.nodeType)return i}}catch(e){}return u(r,null,null,[e]).length>0}}}(),function(){var e=document.createElement("div");e.innerHTML="<div class='test e'></div><div class='test'></div>",e.getElementsByClassName&&0!==e.getElementsByClassName("e").length&&(e.lastChild.className="e",1!==e.getElementsByClassName("e").length&&(p.order.splice(1,0,"CLASS"),p.find.CLASS=function(e,t,n){return"undefined"==typeof t.getElementsByClassName||n?void 0:t.getElementsByClassName(e[1])},e=null))}(),u.contains=document.documentElement.contains?function(e,t){return e!==t&&(!e.contains||e.contains(t))}:document.documentElement.compareDocumentPosition?function(e,t){return!!(16&e.compareDocumentPosition(t))}:function(){return!1},u.isXML=function(e){var t=(e?e.ownerDocument||e:0).documentElement;return!!t&&"HTML"!==t.nodeName};var C=function(e,t,n){for(var o,r=[],i="",a=t.nodeType?[t]:t;o=p.match.PSEUDO.exec(e);)i+=o[0],e=e.replace(p.match.PSEUDO,"");e=p.relative[e]?e+"*":e;for(var s=0,c=a.length;c>s;s++)u(e,a[s],r,n);return u.filter(i,r)};window.tinymce.dom.Sizzle=u}(),function(e){e.dom.Element=function(t,n){var o,r=this;r.settings=n=n||{},r.id=t,r.dom=o=n.dom||e.DOM,e.isIE||o.get(r.id),e.each("getPos,getRect,getParent,add,setStyle,getStyle,setStyles,setAttrib,setAttribs,getAttrib,addClass,removeClass,hasClass,getOuterHTML,setOuterHTML,remove,show,hide,isHidden,setHTML,get".split(/,/),function(e){r[e]=function(){var n,i=[t];for(n=0;n<arguments.length;n++)i.push(arguments[n]);return i=o[e].apply(o,i),r.update(e),i}}),e.extend(r,{on:function(t,n,o){return e.dom.Event.add(r.id,t,n,o)},getXY:function(){return{x:parseInt(r.getStyle("left")),y:parseInt(r.getStyle("top"))}},getSize:function(){var e=o.get(r.id);return{w:parseInt(r.getStyle("width")||e.clientWidth),h:parseInt(r.getStyle("height")||e.clientHeight)}},moveTo:function(e,t){r.setStyles({left:e,top:t})},moveBy:function(e,t){var n=r.getXY();r.moveTo(n.x+e,n.y+t)},resizeTo:function(e,t){r.setStyles({width:e,height:t})},resizeBy:function(e,t){var n=r.getSize();r.resizeTo(n.w+e,n.h+t)},update:function(t){var i;if(e.isIE6&&n.blocker){if(t=t||"",0===t.indexOf("get")||0===t.indexOf("has")||0===t.indexOf("is"))return;if("remove"==t)return void o.remove(r.blocker);r.blocker?i=o.get(r.blocker):(r.blocker=o.uniqueId(),i=o.add(n.container||o.getRoot(),"iframe",{id:r.blocker,style:"position:absolute;",frameBorder:0,src:'javascript:""'}),o.setStyle(i,"opacity",0)),o.setStyles(i,{left:r.getStyle("left",1),top:r.getStyle("top",1),width:r.getStyle("width",1),height:r.getStyle("height",1),display:r.getStyle("display",1),zIndex:parseInt(r.getStyle("zIndex",1)||0)-1})}}})}}(tinymce),function(e){var t=e.is,n=e.isIE,o=e.each,r=e.dom.TreeWalker;e.create("tinymce.dom.Selection",{Selection:function(t,n,r,i){var a=this;a.dom=t,a.win=n,a.serializer=r,a.editor=i,o(["onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent"],function(t){a[t]=new e.util.Dispatcher(a)}),a.win.getSelection||(a.tridentSel=new e.dom.TridentSelection(a)),e.isIE&&!e.isIE11&&t.boxModel&&this._fixIESelection(),e.addUnload(a.destroy,a)},setCursorLocation:function(e,t){var n=this,o=n.dom.createRng();o.setStart(e,t),o.setEnd(e,t),n.setRng(o),n.collapse(!1)},getContent:function(e){var n,o,r,i=this,a=i.getRng(),s=i.dom.create("body"),c=i.getSel();return e=e||{},n=o="",e.get=!0,e.format=e.format||"html",e.forced_root_block="",i.onBeforeGetContent.dispatch(i,e),"text"==e.format?i.isCollapsed()?"":a.text||(c.toString?c.toString():""):(a.cloneContents?(r=a.cloneContents())&&s.appendChild(r):t(a.item)||t(a.htmlText)?(s.innerHTML="<br>"+(a.item?a.item(0).outerHTML:a.htmlText),s.removeChild(s.firstChild)):s.innerHTML=a.toString(),/^\s/.test(s.innerHTML)&&(n=" "),/\s+$/.test(s.innerHTML)&&(o=" "),e.getInner=!0,e.content=i.isCollapsed()?"":n+i.serializer.serialize(s,e)+o,i.onGetContent.dispatch(i,e),e.content)},setContent:function(e,t){var n,o,r,i=this,a=i.getRng(),s=i.win.document;if(t=t||{format:"html"},t.set=!0,e=t.content=e,t.no_events||i.onBeforeSetContent.dispatch(i,t),e=t.content,a.insertNode){e+='<span id="__caret">_</span>',a.startContainer==s&&a.endContainer==s?s.body.innerHTML=e:(a.deleteContents(),0===s.body.childNodes.length?s.body.innerHTML=e:a.createContextualFragment?a.insertNode(a.createContextualFragment(e)):(o=s.createDocumentFragment(),r=s.createElement("div"),o.appendChild(r),r.outerHTML=e,a.insertNode(o))),n=i.dom.get("__caret"),a=s.createRange(),a.setStartBefore(n),a.setEndBefore(n),i.setRng(a),i.dom.remove("__caret");try{i.setRng(a)}catch(e){}}else a.item&&(s.execCommand("Delete",!1,null),a=i.getRng()),/^\s+/.test(e)?(a.pasteHTML('<span id="__mce_tmp">_</span>'+e),i.dom.remove("__mce_tmp")):a.pasteHTML(e);t.no_events||i.onSetContent.dispatch(i,t)},getStart:function(){var e,t,n,o,r=this,i=r.getRng();if(i.duplicate||i.item){if(i.item)return i.item(0);for(n=i.duplicate(),n.collapse(1),e=n.parentElement(),e.ownerDocument!==r.dom.doc&&(e=r.dom.getRoot()),t=o=i.parentElement();o=o.parentNode;)if(o==e){e=t;break}return e}return e=i.startContainer,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[Math.min(e.childNodes.length-1,i.startOffset)]),e&&3==e.nodeType?e.parentNode:e},getEnd:function(){var e,t,n=this,o=n.getRng();return o.duplicate||o.item?o.item?o.item(0):(o=o.duplicate(),o.collapse(0),e=o.parentElement(),e.ownerDocument!==n.dom.doc&&(e=n.dom.getRoot()),e&&"BODY"==e.nodeName?e.lastChild||e:e):(e=o.endContainer,t=o.endOffset,1==e.nodeType&&e.hasChildNodes()&&(e=e.childNodes[t>0?t-1:t]),e&&3==e.nodeType?e.parentNode:e)},getBookmark:function(e,t){function n(e,t){var n=0;return o(m.select(e),function(e,o){e==t&&(n=o)}),n}function r(e){function t(t){var n,o,r,i=t?"start":"end";n=e[i+"Container"],o=e[i+"Offset"],1==n.nodeType&&"TR"==n.nodeName&&(r=n.childNodes,(n=r[Math.min(t?o:o-1,r.length-1)])&&(o=t?0:n.childNodes.length,e["set"+(t?"Start":"End")](n,o)))}return t(!0),t(),e}function i(){function e(e,n){var r,i,a=e[n?"startContainer":"endContainer"],s=e[n?"startOffset":"endOffset"],c=[],d=0;if(3==a.nodeType){if(t)for(r=a.previousSibling;r&&3==r.nodeType;r=r.previousSibling)s+=r.nodeValue.length;c.push(s)}else i=a.childNodes,s>=i.length&&i.length&&(d=1,s=Math.max(0,i.length-1)),c.push(p.dom.nodeIndex(i[s],t)+d);for(;a&&a!=o;a=a.parentNode)c.push(p.dom.nodeIndex(a,t));return c}var n=p.getRng(!0),o=m.getRoot(),r={};return r.start=e(n,!0),p.isCollapsed()||(r.end=e(n)),r}var a,s,c,d,l,u,f,p=this,m=p.dom,h="\ufeff";if(2==e)return p.tridentSel?p.tridentSel.getBookmark(e):i();if(e)return a=p.getRng(),a.setStart&&(a={startContainer:a.startContainer,startOffset:a.startOffset,endContainer:a.endContainer,endOffset:a.endOffset}),{rng:a};if(a=p.getRng(),c=m.uniqueId(),d=tinyMCE.activeEditor.selection.isCollapsed(),f="overflow:hidden;line-height:0px",a.duplicate||a.item){if(a.item)return u=a.item(0),l=u.nodeName,{name:l,index:n(l,u)};s=a.duplicate();try{a.collapse(),a.pasteHTML('<span data-mce-type="bookmark" id="'+c+'_start" style="'+f+'">'+h+"</span>"),d||(s.collapse(!1),a.moveToElementText(s.parentElement()),0===a.compareEndPoints("StartToEnd",s)&&s.move("character",-1),s.pasteHTML('<span data-mce-type="bookmark" id="'+c+'_end" style="'+f+'">'+h+"</span>"))}catch(e){return null}}else{if(u=p.getNode(),"IMG"==(l=u.nodeName))return{name:l,index:n(l,u)};s=r(a.cloneRange()),d||(s.collapse(!1),s.insertNode(m.create("span",{"data-mce-type":"bookmark",id:c+"_end",style:f},h))),a=r(a),a.collapse(!0),a.insertNode(m.create("span",{"data-mce-type":"bookmark",id:c+"_start",style:f},h))}return p.moveToBookmark({id:c,keep:1}),{id:c}},moveToBookmark:function(t){function r(e){var n,o,r,i,a=t[e?"start":"end"];if(a){for(r=a[0],o=d,n=a.length-1;n>=1;n--){if(i=o.childNodes,a[n]>i.length-1)return;o=i[a[n]]}3===o.nodeType&&(r=Math.min(a[0],o.nodeValue.length)),1===o.nodeType&&(r=Math.min(a[0],o.childNodes.length)),e?s.setStart(o,r):s.setEnd(o,r)}return!0}function i(n){var r,i,a,s,c=h.get(t.id+"_"+n),d=t.keep;if(c&&(r=c.parentNode,"start"==n?(d?(r=c.firstChild,i=1):i=h.nodeIndex(c),l=u=r,f=p=i):(d?(r=c.firstChild,i=1):i=h.nodeIndex(c),u=r,p=i),!d)){for(s=c.previousSibling,a=c.nextSibling,o(e.grep(c.childNodes),function(e){3==e.nodeType&&(e.nodeValue=e.nodeValue.replace(/\uFEFF/g,""))});c=h.get(t.id+"_"+n);)h.remove(c,1);s&&a&&s.nodeType==a.nodeType&&3==s.nodeType&&!e.isOpera&&(i=s.nodeValue.length,s.appendData(a.nodeValue),h.remove(a),"start"==n?(l=u=s,f=p=i):(u=s,p=i))}}function a(e){return!h.isBlock(e)||e.innerHTML||n||(e.innerHTML='<br data-mce-bogus="1" />'),e}var s,c,d,l,u,f,p,m=this,h=m.dom;if(t)if(t.start){if(s=h.createRng(),d=h.getRoot(),m.tridentSel)return m.tridentSel.moveToBookmark(t);r(!0)&&r()&&m.setRng(s)}else if(t.id)i("start"),i("end"),l&&(s=h.createRng(),s.setStart(a(l),f),s.setEnd(a(u),p),m.setRng(s));else if(t.name)m.select(h.select(t.name)[t.index]);else if(t.rng){if(s=t.rng,s.startContainer){c=m.dom.createRng();try{c.setStart(s.startContainer,s.startOffset),c.setEnd(s.endContainer,s.endOffset)}catch(e){}s=c}m.setRng(s)}},select:function(t,n){function o(t,n){var o=new r(t,t);do{if(3==t.nodeType&&0!==e.trim(t.nodeValue).length)return void(n?c.setStart(t,0):c.setEnd(t,t.nodeValue.length));if("BR"==t.nodeName)return void(n?c.setStartBefore(t):c.setEndBefore(t))}while(t=n?o.next():o.prev())}var i,a=this,s=a.dom,c=s.createRng();return t&&(i=s.nodeIndex(t),c.setStart(t.parentNode,i),c.setEnd(t.parentNode,i+1),n&&(o(t,1),o(t)),a.setRng(c)),t},isCollapsed:function(){var e=this,t=e.getRng(),n=e.getSel();return!(!t||t.item)&&(t.compareEndPoints?0===t.compareEndPoints("StartToEnd",t):!n||t.collapsed)},collapse:function(e){var t,n=this,o=n.getRng();o.item&&(t=o.item(0),o=n.win.document.body.createTextRange(),o.moveToElementText(t)),o.collapse(!!e),n.setRng(o)},getSel:function(){var e=this.win;return e.getSelection?e.getSelection():e.document.selection},getRng:function(t){var n,o,r,i=this,a=i.win.document;if(t&&i.tridentSel)return i.tridentSel.getRangeAt(0);try{(n=i.getSel())&&(o=n.rangeCount>0?n.getRangeAt(0):n.createRange?n.createRange():a.createRange())}catch(e){}return e.isIE&&!e.isIE11&&o&&o.setStart&&a.selection.createRange().item&&(r=a.selection.createRange().item(0),o=a.createRange(),o.setStartBefore(r),o.setEndAfter(r)),o||(o=a.createRange?a.createRange():a.body.createTextRange()),o.setStart&&9===o.startContainer.nodeType&&o.collapsed&&(r=i.dom.getRoot(),o.setStart(r,0),o.setEnd(r,0)),i.selectedRange&&i.explicitRange&&(0===o.compareBoundaryPoints(o.START_TO_START,i.selectedRange)&&0===o.compareBoundaryPoints(o.END_TO_END,i.selectedRange)?o=i.explicitRange:(i.selectedRange=null,i.explicitRange=null)),o},setRng:function(e,t){var n,o=this;if(o.tridentSel){if(e.cloneRange)try{return void o.tridentSel.addRange(e)}catch(e){}try{e.select()}catch(e){}}else if(n=o.getSel()){o.explicitRange=e;try{n.removeAllRanges()}catch(e){}n.addRange(e),!1===t&&n.extend&&(n.collapse(e.endContainer,e.endOffset),n.extend(e.startContainer,e.startOffset)),o.selectedRange=n.rangeCount>0?n.getRangeAt(0):null}},setNode:function(e){var t=this;return t.setContent(t.dom.getOuterHTML(e)),e},getNode:function(){function e(e,t){for(var n=e;e&&3===e.nodeType&&0===e.length;)e=t?e.nextSibling:e.previousSibling;return e||n}var t,n=this,o=n.getRng(),r=(n.getSel(),o.startContainer),i=o.endContainer;return o?o.setStart?(t=o.commonAncestorContainer,!o.collapsed&&(o.startContainer==o.endContainer&&o.endOffset-o.startOffset<2&&o.startContainer.hasChildNodes()&&(t=o.startContainer.childNodes[o.startOffset]),3===r.nodeType&&3===i.nodeType&&(r=r.length===o.startOffset?e(r.nextSibling,!0):r.parentNode,i=0===o.endOffset?e(i.previousSibling,!1):i.parentNode,r&&r===i))?r:t&&3==t.nodeType?t.parentNode:t):o.item?o.item(0):o.parentElement():n.dom.getRoot()},getSelectedBlocks:function(e,t){var n,o,i,a=this,s=a.dom,c=[];if(n=s.getParent(e||a.getStart(),s.isBlock),o=s.getParent(t||a.getEnd(),s.isBlock),n&&c.push(n),n&&o&&n!=o){i=n;for(var d=new r(n,s.getRoot());(i=d.next())&&i!=o;)s.isBlock(i)&&c.push(i)}return o&&n!=o&&c.push(o),c},isForward:function(){var e,t,n=this.dom,o=this.getSel();return!o||null==o.anchorNode||null==o.focusNode||(e=n.createRng(),e.setStart(o.anchorNode,o.anchorOffset),e.collapse(!0),t=n.createRng(),t.setStart(o.focusNode,o.focusOffset),t.collapse(!0),e.compareBoundaryPoints(e.START_TO_START,t)<=0)},normalize:function(){function t(e){function t(e,t){for(var n=new r(e,p.getParent(e.parentNode,p.isBlock)||m);e=n[t?"prev":"next"]();)if("BR"===e.nodeName)return!0}function s(e,t){var n,a;for(t=t||c,n=new r(t,p.getParent(t.parentNode,p.isBlock)||m);u=n[e?"prev":"next"]();){if(3===u.nodeType&&u.nodeValue.length>0)return c=u,d=e?u.nodeValue.length:0,void(o=!0);if(p.isBlock(u)||f[u.nodeName.toLowerCase()])return;a=u}i&&a&&(c=a,o=!0,d=0)}var c,d,l,u,f,p=a.dom,m=p.getRoot();if(c=n[(e?"start":"end")+"Container"],d=n[(e?"start":"end")+"Offset"],f=p.schema.getNonEmptyElements(),9===c.nodeType&&(c=p.getRoot(),d=0),c===m){if(e&&(u=c.childNodes[d>0?d-1:0])&&(u.nodeName.toLowerCase(),f[u.nodeName]||"TABLE"==u.nodeName))return;if(c.hasChildNodes()&&(c=c.childNodes[Math.min(!e&&d>0?d-1:d,c.childNodes.length-1)],d=0,c.hasChildNodes()&&!/TABLE/.test(c.nodeName))){u=c,l=new r(c,m);do{if(3===u.nodeType&&u.nodeValue.length>0){d=e?0:u.nodeValue.length,c=u,o=!0;break}if(f[u.nodeName.toLowerCase()]){d=p.nodeIndex(u),c=u.parentNode,"IMG"!=u.nodeName||e||d++,o=!0;break}}while(u=e?l.next():l.prev())}}i&&(3===c.nodeType&&0===d&&s(!0),1===c.nodeType&&(!(u=c.childNodes[d])||"BR"!==u.nodeName||t(u)||t(u,!0)||s(!0,c.childNodes[d]))),e&&!i&&3===c.nodeType&&d===c.nodeValue.length&&s(!1),o&&n["set"+(e?"Start":"End")](c,d)}var n,o,i,a=this;e.isIE||(n=a.getRng(),i=n.collapsed,t(!0),i||t(),o&&(i&&n.collapse(!0),a.setRng(n,a.isForward())))},selectorChanged:function(e,t){var n,r=this;return r.selectorChangedData||(r.selectorChangedData={},n={},r.editor.onNodeChange.addToTop(function(e,t,i){var a=r.dom,s=a.getParents(i,null,a.getRoot()),c={};o(r.selectorChangedData,function(e,t){o(s,function(r){return a.is(r,t)?(n[t]||(o(e,function(e){e(!0,{node:r,selector:t,parents:s})}),n[t]=e),c[t]=e,!1):void 0})}),o(n,function(e,t){c[t]||(delete n[t],o(e,function(e){e(!1,{node:i,selector:t,parents:s})}))})})),r.selectorChangedData[e]||(r.selectorChangedData[e]=[]),r.selectorChangedData[e].push(t),r},scrollIntoView:function(e){var t,n,o=this,r=o.dom;n=r.getViewPort(o.editor.getWin()),((t=r.getPos(e).y)<n.y||t+25>n.y+n.h)&&o.editor.getWin().scrollTo(0,t<n.y?t:t-n.h+25)},destroy:function(t){var n=this;n.win=null,t||e.removeUnload(n.destroy)},_fixIESelection:function(){function e(e,t){var n=c.createTextRange();try{n.moveToPoint(e,t)}catch(e){n=null}return n}function t(t){var o;t.button?(o=e(t.x,t.y))&&(o.compareEndPoints("StartToStart",r)>0?o.setEndPoint("StartToStart",r):o.setEndPoint("EndToEnd",r),o.select()):n()}function n(){var e=s.selection.createRange();r&&!e.item&&0===e.compareEndPoints("StartToEnd",e)&&r.select(),a.unbind(s,"mouseup",n),a.unbind(s,"mousemove",t),r=o=0}var o,r,i,a=this.dom,s=a.doc,c=s.body;s.documentElement.unselectable=!0,a.bind(s,["mousedown","contextmenu"],function(c){if("HTML"===c.target.nodeName){if(o&&n(),i=s.documentElement,i.scrollHeight>i.clientHeight)return;o=1,(r=e(c.x,c.y))&&(a.bind(s,"mouseup",n),a.bind(s,"mousemove",t),a.win.focus(),r.select())}})}})}(tinymce),function(e){e.dom.Serializer=function(t,n,o){var r,i,a,s=e.isIE,c=e.each;return t.apply_source_formatting||(t.indent=!1),n=n||e.DOM,o=o||new e.html.Schema(t),t.entity_encoding=t.entity_encoding||"named",t.remove_trailing_brs=!("remove_trailing_brs"in t)||t.remove_trailing_brs,r=new e.util.Dispatcher(self),i=new e.util.Dispatcher(self),a=new e.html.DomParser(t,o),a.addAttributeFilter("src,href,style",function(e,o){for(var r,i,a,s=e.length,c="data-mce-"+o,d=t.url_converter,l=t.url_converter_scope;s--;)r=e[s],i=r.attributes.map[c],i!==a?(r.attr(o,i.length>0?i:null),r.attr(c,null)):(i=r.attributes.map[o],"style"===o?i=n.serializeStyle(n.parseStyle(i),r.name):d&&(i=d.call(l,i,o,r.name)),r.attr(o,i.length>0?i:null))}),a.addAttributeFilter("class",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.attr("class").replace(/(?:^|\s)mce(Item\w+|Selected)(?!\S)/g,""),t.attr("class",n.length>0?n:null)}),a.addAttributeFilter("data-mce-type",function(e,t,n){for(var o,r=e.length;r--;)o=e[r],"bookmark"!==o.attributes.map["data-mce-type"]||n.cleanup||o.remove()}),a.addAttributeFilter("data-mce-expando",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),a.addNodeFilter("noscript",function(t){for(var n,o=t.length;o--;)(n=t[o].firstChild)&&(n.value=e.html.Entities.decode(n.value))}),a.addNodeFilter("script,style",function(e,t){function n(e){return e.replace(/(<!--\[CDATA\[|\]\]-->)/g,"\n").replace(/^[\r\n]*|[\r\n]*$/g,"").replace(/^\s*((<!--)?(\s*\/\/)?\s*<!\[CDATA\[|(<!--\s*)?\/\*\s*<!\[CDATA\[\s*\*\/|(\/\/)?\s*<!--|\/\*\s*<!--\s*\*\/)\s*[\r\n]*/gi,"").replace(/\s*(\/\*\s*\]\]>\s*\*\/(-->)?|\s*\/\/\s*\]\]>(-->)?|\/\/\s*(-->)?|\]\]>|\/\*\s*-->\s*\*\/|\s*-->\s*)\s*$/g,"")}for(var o,r,i=e.length;i--;)o=e[i],r=o.firstChild?o.firstChild.value:"","script"===t?(o.attr("type",(o.attr("type")||"text/javascript").replace(/^mce\-/,"")),r.length>0&&(o.firstChild.value="// <![CDATA[\n"+n(r)+"\n// ]]>")):r.length>0&&(o.firstChild.value="<!--\n"+n(r)+"\n-->")}),a.addNodeFilter("#comment",function(e){for(var t,n=e.length;n--;)t=e[n],0===t.value.indexOf("[CDATA[")?(t.name="#cdata",t.type=4,t.value=t.value.replace(/^\[CDATA\[|\]\]$/g,"")):0===t.value.indexOf("mce:protected ")&&(t.name="#text",t.type=3,t.raw=!0,t.value=unescape(t.value).substr(14))}),a.addNodeFilter("xml:namespace,input",function(e,t){for(var n,o=e.length;o--;)n=e[o],7===n.type?n.remove():1===n.type&&("input"!==t||"type"in n.attributes.map||n.attr("type","text"))}),t.fix_list_elements&&a.addNodeFilter("ul,ol",function(e){for(var t,n,o=e.length;o--;)t=e[o],n=t.parent,("ul"===n.name||"ol"===n.name)&&t.prev&&"li"===t.prev.name&&t.prev.append(t)}),a.addAttributeFilter("data-mce-src,data-mce-href,data-mce-style",function(e,t){for(var n=e.length;n--;)e[n].attr(t,null)}),{schema:o,addNodeFilter:a.addNodeFilter,addAttributeFilter:a.addAttributeFilter,onPreProcess:r,onPostProcess:i,serialize:function(d,l){var u,f,p,m,h;return s&&n.select("script,style,select,map").length>0?(h=d.innerHTML,d=d.cloneNode(!1),n.setHTML(d,h)):d=d.cloneNode(!0),u=d.ownerDocument.implementation,u.createHTMLDocument&&(f=u.createHTMLDocument(""),c("BODY"==d.nodeName?d.childNodes:[d],function(e){f.body.appendChild(f.importNode(e,!0))}),d="BODY"!=d.nodeName?f.body.firstChild:f.body,p=n.doc,n.doc=f),l=l||{},l.format=l.format||"html",l.no_events||(l.node=d,r.dispatch(self,l)),m=new e.html.Serializer(t,o),l.content=m.serialize(a.parse(e.trim(l.getInner?d.innerHTML:n.getOuterHTML(d)),l)),l.cleanup||(l.content=l.content.replace(/\uFEFF/g,"")),l.no_events||i.dispatch(self,l),p&&(n.doc=p),l.node=null,l.content},addRules:function(e){o.addValidElements(e)},setRules:function(e){o.setValidElements(e)}}}}(tinymce),function(e){
e.dom.ScriptLoader=function(){function t(t,n){function o(){d.remove(c),i&&(i.onreadystatechange=i.onload=i=null),n()}function r(){"undefined"!=typeof console&&console.log&&console.log("Failed to load: "+t)}var i,a,s,c,d=e.DOM;return c=d.uniqueId(),e.isIE6&&(a=new e.util.URI(t),s=location,a.host==s.hostname&&a.port==s.port&&a.protocol+":"==s.protocol&&"file"!=a.protocol.toLowerCase())?void e.util.XHR.send({url:e._addVer(a.getURI()),success:function(e){var t=d.create("script",{type:"text/javascript"});t.text=e,document.getElementsByTagName("head")[0].appendChild(t),d.remove(t),o()},error:r}):(i=document.createElement("script"),i.id=c,i.type="text/javascript",i.src=e._addVer(t),(!e.isIE||e.isIE11)&&(i.onload=o),i.onerror=r,e.isOpera||(i.onreadystatechange=function(){var e=i.readyState;("complete"==e||"loaded"==e)&&o()}),void(document.getElementsByTagName("head")[0]||document.body).appendChild(i))}var n,o=1,r=2,i={},a=[],s={},c=[],d=0;this.isDone=function(e){return i[e]==r},this.markDone=function(e){i[e]=r},this.add=this.load=function(e,t,o){i[e]==n&&(a.push(e),i[e]=0),t&&(s[e]||(s[e]=[]),s[e].push({func:t,scope:o||this}))},this.loadQueue=function(e,t){this.loadScripts(a,e,t)},this.loadScripts=function(a,l,u){function f(t){e.each(s[t],function(e){e.func.call(e.scope)}),s[t]=n}var p;c.push({func:l,scope:u||this}),(p=function(){var n=e.grep(a);a.length=0,e.each(n,function(e){return i[e]==r?void f(e):void(i[e]!=o&&(i[e]=o,d++,t(e,function(){i[e]=r,d--,f(e),p()})))}),d||(e.each(c,function(e){e.func.call(e.scope)}),c.length=0)})()}},e.ScriptLoader=new e.dom.ScriptLoader}(tinymce),function(e){e.dom.RangeUtils=function(t){this.walk=function(n,o){function r(e){var t;return t=e[0],3===t.nodeType&&t===h&&g>=t.nodeValue.length&&e.splice(0,1),t=e[e.length-1],0===y&&e.length>0&&t===v&&3===t.nodeType&&e.splice(e.length-1,1),e}function i(e,t,n){for(var o=[];e&&e!=n;e=e[t])o.push(e);return o}function a(e,t){do{if(e.parentNode==t)return e;e=e.parentNode}while(e)}function s(e,t,n){var a=n?"nextSibling":"previousSibling";for(u=e,f=u.parentNode;u&&u!=t;u=f)f=u.parentNode,p=i(u==e?u:u[a],a),p.length&&(n||p.reverse(),o(r(p)))}var c,d,l,u,f,p,m,h=n.startContainer,g=n.startOffset,v=n.endContainer,y=n.endOffset;if(m=t.select("td.mceSelected,th.mceSelected"),m.length>0)return void e.each(m,function(e){o([e])});if(1==h.nodeType&&h.hasChildNodes()&&(h=h.childNodes[g]),1==v.nodeType&&v.hasChildNodes()&&(v=v.childNodes[Math.min(y-1,v.childNodes.length-1)]),h==v)return o(r([h]));for(c=t.findCommonAncestor(h,v),u=h;u;u=u.parentNode){if(u===v)return s(h,c,!0);if(u===c)break}for(u=v;u;u=u.parentNode){if(u===h)return s(v,c);if(u===c)break}d=a(h,c)||h,l=a(v,c)||v,s(h,d,!0),p=i(d==h?d:d.nextSibling,"nextSibling",l==v?l.nextSibling:l),p.length&&o(r(p)),s(v,l)},this.split=function(e){function t(e,t){return e.splitText(t)}var n=e.startContainer,o=e.startOffset,r=e.endContainer,i=e.endOffset;return n==r&&3==n.nodeType?o>0&&o<n.nodeValue.length&&(r=t(n,o),n=r.previousSibling,i>o?(i-=o,n=r=t(r,i).previousSibling,i=r.nodeValue.length,o=0):i=0):(3==n.nodeType&&o>0&&o<n.nodeValue.length&&(n=t(n,o),o=0),3==r.nodeType&&i>0&&i<r.nodeValue.length&&(r=t(r,i).previousSibling,i=r.nodeValue.length)),{startContainer:n,startOffset:o,endContainer:r,endOffset:i}}},e.dom.RangeUtils.compareRanges=function(e,t){if(e&&t){if(!e.item&&!e.duplicate)return e.startContainer==t.startContainer&&e.startOffset==t.startOffset;if(e.item&&t.item&&e.item(0)===t.item(0))return!0;if(e.isEqual&&t.isEqual&&t.isEqual(e))return!0}return!1}}(tinymce),function(e){var t=e.dom.Event,n=e.each;e.create("tinymce.ui.KeyboardNavigation",{KeyboardNavigation:function(o,r){var i,a,s,c,d,l=this,u=o.root,f=o.items,p=o.enableUpDown,m=o.enableLeftRight||!o.enableUpDown,h=o.excludeFromTabOrder;r=r||e.DOM,i=function(e){d=e.target.id},a=function(e){r.setAttrib(e.target.id,"tabindex","-1")},c=function(){var e=r.get(d);r.setAttrib(e,"tabindex","0"),e.focus()},l.focus=function(){r.get(d).focus()},l.destroy=function(){n(f,function(e){var t=r.get(e.id);r.unbind(t,"focus",i),r.unbind(t,"blur",a)});var e=r.get(u);r.unbind(e,"focus",c),r.unbind(e,"keydown",s),f=r=u=l.focus=i=a=s=c=null,l.destroy=function(){}},l.moveFocus=function(e,i){var a,s=-1;l.controls,d&&(n(f,function(e,t){return e.id===d?(s=t,!1):void 0}),s+=e,0>s?s=f.length-1:s>=f.length&&(s=0),a=f[s],r.setAttrib(d,"tabindex","-1"),r.setAttrib(a.id,"tabindex","0"),r.get(a.id).focus(),o.actOnFocus&&o.onAction(a.id),i&&t.cancel(i))},s=function(e){switch(e.keyCode){case 37:m&&l.moveFocus(-1),t.cancel(e);break;case 39:m&&l.moveFocus(1),t.cancel(e);break;case 38:p&&l.moveFocus(-1),t.cancel(e);break;case 40:p&&l.moveFocus(1),t.cancel(e);break;case 27:o.onCancel&&(o.onCancel(),t.cancel(e));break;case 14:case 13:case 32:o.onAction&&(o.onAction(d),t.cancel(e))}},n(f,function(e,t){var n,o;e.id||(e.id=r.uniqueId("_mce_item_")),o=r.get(e.id),h?(r.bind(o,"blur",a),n="-1"):n=0===t?"0":"-1",o.setAttribute("tabindex",n),r.bind(o,"focus",i)}),f[0]&&(d=f[0].id),r.setAttrib(u,"tabindex","-1");var g=r.get(u);r.bind(g,"focus",c),r.bind(g,"keydown",s)}})}(tinymce),function(e){var t=e.DOM,n=e.is;e.create("tinymce.ui.Control",{Control:function(t,n,o){this.id=t,this.settings=n=n||{},this.rendered=!1,this.onRender=new e.util.Dispatcher(this),this.classPrefix="",this.scope=n.scope||this,this.disabled=0,this.active=0,this.editor=o},setAriaProperty:function(e,n){var o=t.get(this.id+"_aria")||t.get(this.id);o&&t.setAttrib(o,"aria-"+e,!!n)},focus:function(){t.get(this.id).focus()},setDisabled:function(e){e!=this.disabled&&(this.setAriaProperty("disabled",e),this.setState("Disabled",e),this.setState("Enabled",!e),this.disabled=e)},isDisabled:function(){return this.disabled},setActive:function(e){e!=this.active&&(this.setState("Active",e),this.active=e,this.setAriaProperty("pressed",e))},isActive:function(){return this.active},setState:function(e,n){var o=t.get(this.id);e=this.classPrefix+e,n?t.addClass(o,e):t.removeClass(o,e)},isRendered:function(){return this.rendered},renderHTML:function(){},renderTo:function(e){t.setHTML(e,this.renderHTML())},postRender:function(){var e,t=this;n(t.disabled)&&(e=t.disabled,t.disabled=-1,t.setDisabled(e)),n(t.active)&&(e=t.active,t.active=-1,t.setActive(e))},remove:function(){t.remove(this.id),this.destroy()},destroy:function(){e.dom.Event.clear(this.id)}})}(tinymce),tinymce.create("tinymce.ui.Container:tinymce.ui.Control",{Container:function(e,t,n){this.parent(e,t,n),this.controls=[],this.lookup={}},add:function(e){return this.lookup[e.id]=e,this.controls.push(e),e},get:function(e){return this.lookup[e]}}),tinymce.create("tinymce.ui.Separator:tinymce.ui.Control",{Separator:function(e,t){this.parent(e,t),this.classPrefix="mceSeparator",this.setDisabled(!0)},renderHTML:function(){return tinymce.DOM.createHTML("span",{"class":this.classPrefix,role:"separator","aria-orientation":"vertical",tabindex:"-1"})}}),function(e){var t=e.is;e.DOM,e.each,e.walk,e.create("tinymce.ui.MenuItem:tinymce.ui.Control",{MenuItem:function(e,t){this.parent(e,t),this.classPrefix="mceMenuItem"},setSelected:function(e){this.setState("Selected",e),this.setAriaProperty("checked",!!e),this.selected=e},isSelected:function(){return this.selected},postRender:function(){var e=this;e.parent(),t(e.selected)&&e.setSelected(e.selected)}})}(tinymce),function(e){var t=(e.is,e.DOM),n=(e.each,e.walk);e.create("tinymce.ui.Menu:tinymce.ui.MenuItem",{Menu:function(t,n){var o=this;o.parent(t,n),o.items={},o.collapsed=!1,o.menuCount=0,o.onAddItem=new e.util.Dispatcher(this)},expand:function(e){var t=this;e&&n(t,function(e){e.expand&&e.expand()},"items",t),t.collapsed=!1},collapse:function(e){var t=this;e&&n(t,function(e){e.collapse&&e.collapse()},"items",t),t.collapsed=!0},isCollapsed:function(){return this.collapsed},add:function(n){return n.settings||(n=new e.ui.MenuItem(n.id||t.uniqueId(),n)),this.onAddItem.dispatch(this,n),this.items[n.id]=n},addSeparator:function(){return this.add({separator:!0})},addMenu:function(e){return e.collapse||(e=this.createMenu(e)),this.menuCount++,this.add(e)},hasMenus:function(){return 0!==this.menuCount},remove:function(e){delete this.items[e.id]},removeAll:function(){var e=this;n(e,function(e){e.removeAll?e.removeAll():e.remove(),e.destroy()},"items",e),e.items={}},createMenu:function(n){var o=new e.ui.Menu(n.id||t.uniqueId(),n);return o.onAddItem.add(this.onAddItem.dispatch,this.onAddItem),o}})}(tinymce),function(e){var t=e.is,n=e.DOM,o=e.each,r=e.dom.Event,i=e.dom.Element;e.create("tinymce.ui.DropMenu:tinymce.ui.Menu",{DropMenu:function(o,r){r=r||{},r.container=r.container||n.doc.body,r.offset_x=r.offset_x||0,r.offset_y=r.offset_y||0,r.vp_offset_x=r.vp_offset_x||0,r.vp_offset_y=r.vp_offset_y||0,t(r.icons)&&!r.icons&&(r["class"]+=" mceNoIcons"),this.parent(o,r),this.onShowMenu=new e.util.Dispatcher(this),this.onHideMenu=new e.util.Dispatcher(this),this.classPrefix="mceMenu"},createMenu:function(t){var o,r=this,i=r.settings;return t.container=t.container||i.container,t.parent=r,t.constrain=t.constrain||i.constrain,t["class"]=t["class"]||i["class"],t.vp_offset_x=t.vp_offset_x||i.vp_offset_x,t.vp_offset_y=t.vp_offset_y||i.vp_offset_y,t.keyboard_focus=i.keyboard_focus,o=new e.ui.DropMenu(t.id||n.uniqueId(),t),o.onAddItem.add(r.onAddItem.dispatch,r.onAddItem),o},focus:function(){var e=this;e.keyboardNav&&e.keyboardNav.focus()},update:function(){var e,t,o=this,r=o.settings,i=n.get("menu_"+o.id+"_tbl"),a=n.get("menu_"+o.id+"_co");e=r.max_width?Math.min(i.offsetWidth,r.max_width):i.offsetWidth,t=r.max_height?Math.min(i.offsetHeight,r.max_height):i.offsetHeight,o.element.setStyles(n.boxModel?{width:e,height:t}:{width:e+2,height:t+2}),r.max_width&&n.setStyle(a,"width",e),r.max_height&&(n.setStyle(a,"height",t),i.clientHeight<r.max_height&&n.setStyle(a,"overflow","hidden"))},showMenu:function(t,a,s){var c,d,l,u,f,p,m=this,h=m.settings,g=n.getViewPort(),v=2,y=m.classPrefix;m.collapse(1),m.isMenuVisible||(m.rendered?c=n.get("menu_"+m.id):(c=n.add(m.settings.container,m.renderNode()),o(m.items,function(e){e.postRender()}),m.element=new i("menu_"+m.id,{blocker:1,container:h.container})),e.isOpera||n.setStyles(c,{left:-65535,top:-65535}),n.show(c),m.update(),t+=h.offset_x||0,a+=h.offset_y||0,g.w-=4,g.h-=4,h.constrain&&(d=c.clientWidth-v,l=c.clientHeight-v,u=g.x+g.w,f=g.y+g.h,t+h.vp_offset_x+d>u&&(t=s?s-d:Math.max(0,u-h.vp_offset_x-d)),a+h.vp_offset_y+l>f&&(a=Math.max(0,f-h.vp_offset_y-l))),n.setStyles(c,{left:t,top:a}),m.element.update(),m.isMenuVisible=1,m.mouseClickFunc=r.add(c,"click",function(e){var t;if((e=e.target)&&(e=n.getParent(e,"tr"))&&!n.hasClass(e,y+"ItemSub")){if(t=m.items[e.id],t.isDisabled())return;for(p=m;p;)p.hideMenu&&p.hideMenu(),p=p.settings.parent;return t.settings.onclick&&t.settings.onclick(e),!1}}),m.hasMenus()&&(m.mouseOverFunc=r.add(c,"mouseover",function(e){var t,o;if((e=e.target)&&(e=n.getParent(e,"tr"))){if(t=m.items[e.id],m.lastMenu&&m.lastMenu.collapse(1),t.isDisabled())return;e&&n.hasClass(e,y+"ItemSub")&&(o=n.getRect(e),t.showMenu(o.x+o.w-v,o.y-v,o.x),m.lastMenu=t,n.addClass(n.get(t.id).firstChild,y+"ItemActive"))}})),r.add(c,"keydown",m._keyHandler,m),m.onShowMenu.dispatch(m),h.keyboard_focus&&m._setupKeyboardNav())},hideMenu:function(e){var t,o=this,i=n.get("menu_"+o.id);o.isMenuVisible&&(o.keyboardNav&&o.keyboardNav.destroy(),r.remove(i,"mouseover",o.mouseOverFunc),r.remove(i,"click",o.mouseClickFunc),r.remove(i,"keydown",o._keyHandler),n.hide(i),o.isMenuVisible=0,e||o.collapse(1),o.element&&o.element.hide(),(t=n.get(o.id))&&n.removeClass(t.firstChild,o.classPrefix+"ItemActive"),o.onHideMenu.dispatch(o))},add:function(e){var t,o=this;return e=o.parent(e),o.isRendered&&(t=n.get("menu_"+o.id))&&o._add(n.select("tbody",t)[0],e),e},collapse:function(e){this.parent(e),this.hideMenu(1)},remove:function(e){return n.remove(e.id),this.destroy(),this.parent(e)},destroy:function(){var e=this,t=n.get("menu_"+e.id);e.keyboardNav&&e.keyboardNav.destroy(),r.remove(t,"mouseover",e.mouseOverFunc),r.remove(n.select("a",t),"focus",e.mouseOverFunc),r.remove(t,"click",e.mouseClickFunc),r.remove(t,"keydown",e._keyHandler),e.element&&e.element.remove(),n.remove(t)},renderNode:function(){var e,t,r,a,s=this,c=s.settings;return a=n.create("div",{role:"listbox",id:"menu_"+s.id,"class":c["class"],style:"position:absolute;left:0;top:0;z-index:200000;outline:0"}),s.settings.parent&&n.setAttrib(a,"aria-parent","menu_"+s.settings.parent.id),r=n.add(a,"div",{role:"presentation",id:"menu_"+s.id+"_co","class":s.classPrefix+(c["class"]?" "+c["class"]:"")}),s.element=new i("menu_"+s.id,{blocker:1,container:c.container}),c.menu_line&&n.add(r,"span",{"class":s.classPrefix+"Line"}),e=n.add(r,"table",{role:"presentation",id:"menu_"+s.id+"_tbl",border:0,cellPadding:0,cellSpacing:0}),t=n.add(e,"tbody"),o(s.items,function(e){s._add(t,e)}),s.rendered=!0,a},_setupKeyboardNav:function(){var t,o,r=this;t=n.get("menu_"+r.id),o=n.select("a[role=option]","menu_"+r.id),o.splice(0,0,t),r.keyboardNav=new e.ui.KeyboardNavigation({root:"menu_"+r.id,items:o,onCancel:function(){r.hideMenu()},enableUpDown:!0}),t.focus()},_keyHandler:function(e){var t=this;switch(e.keyCode){case 37:t.settings.parent&&(t.hideMenu(),t.settings.parent.focus(),r.cancel(e));break;case 39:t.mouseOverFunc&&t.mouseOverFunc(e)}},_add:function(e,t){var o,r,i,a,s,c=t.settings,d=this.classPrefix;return c.separator?(i=n.add(e,"tr",{id:t.id,"class":d+"ItemSeparator"}),n.add(i,"td",{"class":d+"ItemSeparator"}),void((o=i.previousSibling)&&n.addClass(o,"mceLast"))):(o=i=n.add(e,"tr",{id:t.id,"class":d+"Item "+d+"ItemEnabled"}),o=a=n.add(o,c.titleItem?"th":"td"),o=r=n.add(o,"a",{id:t.id+"_aria",role:c.titleItem?"presentation":"option",href:"javascript:;",onclick:"return false;",onmousedown:"return false;"}),c.parent&&(n.setAttrib(r,"aria-haspopup","true"),n.setAttrib(r,"aria-owns","menu_"+t.id)),n.addClass(a,c["class"]),s=n.add(o,"span",{"class":"mceIcon"+(c.icon?" mce_"+c.icon:"")}),c.icon_src&&n.add(s,"img",{src:c.icon_src}),o=n.add(o,c.element||"span",{"class":"mceText",title:t.settings.title},t.settings.title),t.settings.style&&("function"==typeof t.settings.style&&(t.settings.style=t.settings.style()),n.setAttrib(o,"style",t.settings.style)),1==e.childNodes.length&&n.addClass(i,"mceFirst"),(o=i.previousSibling)&&n.hasClass(o,d+"ItemSeparator")&&n.addClass(i,"mceFirst"),t.collapse&&n.addClass(i,d+"ItemSub"),(o=i.previousSibling)&&n.removeClass(o,"mceLast"),void n.addClass(i,"mceLast"))}})}(tinymce),function(e){var t=e.DOM;e.create("tinymce.ui.Button:tinymce.ui.Control",{Button:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceButton"},renderHTML:function(){var e,n,o=this.classPrefix,r=this.settings;return n=t.encode(r.label||""),e='<a role="button" id="'+this.id+'" href="javascript:;" class="'+o+" "+o+"Enabled "+r["class"]+(n?" "+o+"Labeled":"")+'" onmousedown="return false;" onclick="return false;" aria-labelledby="'+this.id+'_voice" title="'+t.encode(r.title)+'">',e+=!r.image||this.editor&&this.editor.forcedHighContrastMode?'<span class="mceIcon '+r["class"]+'"></span>'+(n?'<span class="'+o+'Label">'+n+"</span>":""):'<span class="mceIcon '+r["class"]+'"><img class="mceIcon" src="'+r.image+'" alt="'+t.encode(r.title)+'" /></span>'+(n?'<span class="'+o+'Label">'+n+"</span>":""),e+='<span class="mceVoiceLabel mceIconOnly" style="display: none;" id="'+this.id+'_voice">'+r.title+"</span>",e+="</a>"},postRender:function(){var t,n=this,o=n.settings;e.isIE&&n.editor&&e.dom.Event.add(n.id,"mousedown",function(){var e=n.editor.selection.getNode().nodeName;t="IMG"===e?n.editor.selection.getBookmark():null}),e.dom.Event.add(n.id,"click",function(r){return n.isDisabled()?void 0:(e.isIE&&n.editor&&null!==t&&n.editor.selection.moveToBookmark(t),o.onclick.call(o.scope,r))}),e.dom.Event.add(n.id,"keydown",function(t){return n.isDisabled()||t.keyCode!=e.VK.SPACEBAR?void 0:(e.dom.Event.cancel(t),o.onclick.call(o.scope,t))})}})}(tinymce),function(e){var t,n=e.DOM,o=e.dom.Event,r=e.each,i=e.util.Dispatcher;e.create("tinymce.ui.ListBox:tinymce.ui.Control",{ListBox:function(t,n,o){var r=this;r.parent(t,n,o),r.items=[],r.onChange=new i(r),r.onPostRender=new i(r),r.onAdd=new i(r),r.onRenderMenu=new e.util.Dispatcher(this),r.classPrefix="mceListBox",r.marked={}},select:function(e){var n,o,i=this;return i.marked={},e==t?i.selectByIndex(-1):(o=e&&"function"==typeof e?e:function(t){return t==e},void(e!=i.selectedValue&&(r(i.items,function(e,t){return o(e.value)?(n=1,i.selectByIndex(t),!1):void 0}),n||i.selectByIndex(-1))))},selectByIndex:function(e){var t,o,r,i=this;i.marked={},e!=i.selectedIndex&&(t=n.get(i.id+"_text"),r=n.get(i.id+"_voiceDesc"),o=i.items[e],o?(i.selectedValue=o.value,i.selectedIndex=e,n.setHTML(t,n.encode(o.title)),n.setHTML(r,i.settings.title+" - "+o.title),n.removeClass(t,"mceTitle"),n.setAttrib(i.id,"aria-valuenow",o.title)):(n.setHTML(t,n.encode(i.settings.title)),n.setHTML(r,n.encode(i.settings.title)),n.addClass(t,"mceTitle"),i.selectedValue=i.selectedIndex=null,n.setAttrib(i.id,"aria-valuenow",i.settings.title)),t=0)},mark:function(e){this.marked[e]=!0},add:function(t,n,o){var r=this;o=o||{},o=e.extend(o,{title:t,value:n}),r.items.push(o),r.onAdd.dispatch(r,o)},getLength:function(){return this.items.length},renderHTML:function(){var e="",t=this,o=t.settings,r=t.classPrefix;return e='<span role="listbox" aria-haspopup="true" aria-labelledby="'+t.id+'_voiceDesc" aria-describedby="'+t.id+'_voiceDesc"><table role="presentation" tabindex="0" id="'+t.id+'" cellpadding="0" cellspacing="0" class="'+r+" "+r+"Enabled"+(o["class"]?" "+o["class"]:"")+'"><tbody><tr>',e+="<td>"+n.createHTML("span",{id:t.id+"_voiceDesc","class":"voiceLabel",style:"display:none;"},t.settings.title),e+=n.createHTML("a",{id:t.id+"_text",tabindex:-1,href:"javascript:;","class":"mceText",onclick:"return false;",onmousedown:"return false;"},n.encode(t.settings.title))+"</td>",e+="<td>"+n.createHTML("a",{id:t.id+"_open",tabindex:-1,href:"javascript:;","class":"mceOpen",onclick:"return false;",onmousedown:"return false;"},'<span><span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span></span>')+"</td>",e+="</tr></tbody></table></span>"},showMenu:function(){var t,i,a=this,s=n.get(this.id);if(!a.isDisabled()&&0!==a.items.length){if(a.menu&&a.menu.isMenuVisible)return a.hideMenu();a.isMenuRendered||(a.renderMenu(),a.isMenuRendered=!0),t=n.getPos(s),i=a.menu,i.settings.offset_x=t.x,i.settings.offset_y=t.y,i.settings.keyboard_focus=!e.isOpera,r(a.items,function(e){i.items[e.id]&&i.items[e.id].setSelected(0)}),r(a.items,function(e){i.items[e.id]&&a.marked[e.value]&&i.items[e.id].setSelected(1),e.value===a.selectedValue&&i.items[e.id].setSelected(1)}),i.showMenu(0,s.clientHeight),o.add(n.doc,"mousedown",a.hideMenu,a),n.addClass(a.id,a.classPrefix+"Selected")}},hideMenu:function(e){var t=this;if(t.menu&&t.menu.isMenuVisible){if(n.removeClass(t.id,t.classPrefix+"Selected"),e&&"mousedown"==e.type&&(e.target.id==t.id+"_text"||e.target.id==t.id+"_open"))return;e&&n.getParent(e.target,".mceMenu")||(n.removeClass(t.id,t.classPrefix+"Selected"),o.remove(n.doc,"mousedown",t.hideMenu,t),t.menu.hideMenu())}},renderMenu:function(){var e,o=this;e=o.settings.control_manager.createDropMenu(o.id+"_menu",{menu_line:1,"class":o.classPrefix+"Menu mceNoIcons",max_width:250,max_height:150}),e.onHideMenu.add(function(){o.hideMenu(),o.focus()}),e.add({title:o.settings.title,"class":"mceMenuItemTitle",onclick:function(){!1!==o.settings.onselect("")&&o.select("")}}),r(o.items,function(r){r.value===t?e.add({title:r.title,role:"option","class":"mceMenuItemTitle",onclick:function(){!1!==o.settings.onselect("")&&o.select("")}}):(r.id=n.uniqueId(),r.role="option",r.onclick=function(){!1!==o.settings.onselect(r.value)&&o.select(r.value)},e.add(r))}),o.onRenderMenu.dispatch(o,e),o.menu=e},postRender:function(){var t=this,r=t.classPrefix;o.add(t.id,"click",t.showMenu,t),o.add(t.id,"keydown",function(e){32==e.keyCode&&(t.showMenu(e),o.cancel(e))}),o.add(t.id,"focus",function(){t._focused||(t.keyDownHandler=o.add(t.id,"keydown",function(e){40==e.keyCode&&(t.showMenu(),o.cancel(e))}),t.keyPressHandler=o.add(t.id,"keypress",function(e){var n;13==e.keyCode&&(n=t.selectedValue,t.selectedValue=null,o.cancel(e),t.settings.onselect(n))})),t._focused=1}),o.add(t.id,"blur",function(){o.remove(t.id,"keydown",t.keyDownHandler),o.remove(t.id,"keypress",t.keyPressHandler),t._focused=0}),(e.isIE6||!n.boxModel)&&(o.add(t.id,"mouseover",function(){n.hasClass(t.id,r+"Disabled")||n.addClass(t.id,r+"Hover")}),o.add(t.id,"mouseout",function(){n.hasClass(t.id,r+"Disabled")||n.removeClass(t.id,r+"Hover")})),t.onPostRender.dispatch(t,n.get(t.id))},destroy:function(){this.parent(),o.clear(this.id+"_text"),o.clear(this.id+"_open")}})}(tinymce),function(e){var t,n=e.DOM,o=e.dom.Event,r=e.each;e.util.Dispatcher,e.create("tinymce.ui.NativeListBox:tinymce.ui.ListBox",{NativeListBox:function(e,t){this.parent(e,t),this.classPrefix="mceNativeListBox"},setDisabled:function(e){n.get(this.id).disabled=e,this.setAriaProperty("disabled",e)},isDisabled:function(){return n.get(this.id).disabled},select:function(e){var n,o,i=this;return e==t?i.selectByIndex(-1):(o=e&&"function"==typeof e?e:function(t){return t==e},void(e!=i.selectedValue&&(r(i.items,function(e,t){return o(e.value)?(n=1,i.selectByIndex(t),!1):void 0}),n||i.selectByIndex(-1))))},selectByIndex:function(e){n.get(this.id).selectedIndex=e+1,this.selectedValue=this.items[e]?this.items[e].value:null},add:function(e,t,o){var r,i=this;o=o||{},o.value=t,i.isRendered()&&n.add(n.get(this.id),"option",o,e),r={title:e,value:t,attribs:o},i.items.push(r),i.onAdd.dispatch(i,r)},getLength:function(){return this.items.length},renderHTML:function(){var e,t=this;return e=n.createHTML("option",{value:""},"-- "+t.settings.title+" --"),r(t.items,function(t){e+=n.createHTML("option",{value:t.value},t.title)}),e=n.createHTML("select",{id:t.id,"class":"mceNativeListBox","aria-labelledby":t.id+"_aria"},e),e+=n.createHTML("span",{id:t.id+"_aria",style:"display: none"},t.settings.title)},postRender:function(){function e(e){var t=r.items[e.target.selectedIndex-1];t&&(t=t.value)&&(r.onChange.dispatch(r,t),r.settings.onselect&&r.settings.onselect(t))}var t,r=this,i=!0;r.rendered=!0,o.add(r.id,"change",e),o.add(r.id,"keydown",function(n){var a;return o.remove(r.id,"change",t),i=!1,a=o.add(r.id,"blur",function(){i||(i=!0,o.add(r.id,"change",e),o.remove(r.id,"blur",a))}),13==n.keyCode||32==n.keyCode?(e(n),o.cancel(n)):void((40==n.keyCode||38==n.keyCode)&&n.stopImmediatePropagation())}),r.onPostRender.dispatch(r,n.get(r.id))}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event;e.each,e.create("tinymce.ui.MenuButton:tinymce.ui.Button",{MenuButton:function(n,o,r){this.parent(n,o,r),this.onRenderMenu=new e.util.Dispatcher(this),o.menu_container=o.menu_container||t.doc.body},showMenu:function(){var e,o,r=this,i=t.get(r.id);if(!r.isDisabled()){if(r.isMenuRendered||(r.renderMenu(),r.isMenuRendered=!0),r.isMenuVisible)return r.hideMenu();t.getPos(r.settings.menu_container),e=t.getPos(i),o=r.menu,o.settings.offset_x=e.x,o.settings.offset_y=e.y,o.settings.vp_offset_x=e.x,o.settings.vp_offset_y=e.y,o.settings.keyboard_focus=r._focused,o.showMenu(0,i.firstChild.clientHeight),n.add(t.doc,"mousedown",r.hideMenu,r),r.setState("Selected",1),r.isMenuVisible=1}},renderMenu:function(){var e,t=this;e=t.settings.control_manager.createDropMenu(t.id+"_menu",{menu_line:1,"class":this.classPrefix+"Menu",icons:t.settings.icons}),e.onHideMenu.add(function(){t.hideMenu(),t.focus()}),t.onRenderMenu.dispatch(t,e),t.menu=e},hideMenu:function(e){var o=this;e&&"mousedown"==e.type&&t.getParent(e.target,function(e){return e.id===o.id||e.id===o.id+"_open"})||(e&&t.getParent(e.target,".mceMenu")||(o.setState("Selected",0),n.remove(t.doc,"mousedown",o.hideMenu,o),o.menu&&o.menu.hideMenu()),o.isMenuVisible=0)},postRender:function(){var e=this,t=e.settings;n.add(e.id,"click",function(){e.isDisabled()||(t.onclick&&t.onclick(e.value),e.showMenu())})}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event;e.each,e.create("tinymce.ui.SplitButton:tinymce.ui.MenuButton",{SplitButton:function(e,t,n){this.parent(e,t,n),this.classPrefix="mceSplitButton"},renderHTML:function(){var e,n,o=this,r=o.settings;return e="<tbody><tr>",n=r.image?t.createHTML("img ",{src:r.image,role:"presentation","class":"mceAction "+r["class"]}):t.createHTML("span",{"class":"mceAction "+r["class"]},""),n+=t.createHTML("span",{"class":"mceVoiceLabel mceIconOnly",id:o.id+"_voice",style:"display:none;"},r.title),e+="<td >"+t.createHTML("a",{role:"button",id:o.id+"_action",tabindex:"-1",href:"javascript:;","class":"mceAction "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},n)+"</td>",n=t.createHTML("span",{"class":"mceOpen "+r["class"]},'<span style="display:none;" class="mceIconOnly" aria-hidden="true">\u25bc</span>'),e+="<td >"+t.createHTML("a",{role:"button",id:o.id+"_open",tabindex:"-1",href:"javascript:;","class":"mceOpen "+r["class"],onclick:"return false;",onmousedown:"return false;",title:r.title},n)+"</td>",e+="</tr></tbody>",e=t.createHTML("table",{role:"presentation","class":"mceSplitButton mceSplitButtonEnabled "+r["class"],cellpadding:"0",cellspacing:"0",title:r.title},e),t.createHTML("div",{id:o.id,role:"button",tabindex:"0","aria-labelledby":o.id+"_voice","aria-haspopup":"true"},e)},postRender:function(){var o,r=this,i=r.settings;i.onclick&&(o=function(e){r.isDisabled()||(i.onclick(r.value),n.cancel(e))},n.add(r.id+"_action","click",o),n.add(r.id,["click","keydown"],function(e){32!==e.keyCode&&13!==e.keyCode&&14!==e.keyCode||e.altKey||e.ctrlKey||e.metaKey?("click"===e.type||40===e.keyCode)&&(r.showMenu(),n.cancel(e)):(o(),n.cancel(e))})),n.add(r.id+"_open","click",function(e){r.showMenu(),n.cancel(e)}),n.add([r.id,r.id+"_open"],"focus",function(){r._focused=1}),n.add([r.id,r.id+"_open"],"blur",function(){r._focused=0}),(e.isIE6||!t.boxModel)&&(n.add(r.id,"mouseover",function(){t.hasClass(r.id,"mceSplitButtonDisabled")||t.addClass(r.id,"mceSplitButtonHover")}),n.add(r.id,"mouseout",function(){t.hasClass(r.id,"mceSplitButtonDisabled")||t.removeClass(r.id,"mceSplitButtonHover")}))},destroy:function(){this.parent(),n.clear(this.id+"_action"),n.clear(this.id+"_open"),n.clear(this.id)}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.is,r=e.each;e.create("tinymce.ui.ColorSplitButton:tinymce.ui.SplitButton",{ColorSplitButton:function(t,n,o){var r=this;r.parent(t,n,o),r.settings=n=e.extend({colors:"000000,993300,333300,003300,003366,000080,333399,333333,800000,FF6600,808000,008000,008080,0000FF,666699,808080,FF0000,FF9900,99CC00,339966,33CCCC,3366FF,800080,999999,FF00FF,FFCC00,FFFF00,00FF00,00FFFF,00CCFF,993366,C0C0C0,FF99CC,FFCC99,FFFF99,CCFFCC,CCFFFF,99CCFF,CC99FF,FFFFFF",grid_width:8,default_color:"#888888"},r.settings),r.onShowMenu=new e.util.Dispatcher(r),r.onHideMenu=new e.util.Dispatcher(r),r.value=n.default_color},showMenu:function(){var o,r,i=this;if(!i.isDisabled()){if(i.isMenuRendered||(i.renderMenu(),i.isMenuRendered=!0),i.isMenuVisible)return i.hideMenu();o=t.get(i.id),t.show(i.id+"_menu"),t.addClass(o,"mceSplitButtonSelected"),r=t.getPos(o),t.setStyles(i.id+"_menu",{left:r.x,top:r.y+o.firstChild.clientHeight,zIndex:2e5}),o=0,n.add(t.doc,"mousedown",i.hideMenu,i),i.onShowMenu.dispatch(i),i._focused&&(i._keyHandler=n.add(i.id+"_menu","keydown",function(e){27==e.keyCode&&i.hideMenu()}),t.select("a",i.id+"_menu")[0].focus()),i.keyboardNav=new e.ui.KeyboardNavigation({root:i.id+"_menu",items:t.select("a",i.id+"_menu"),onCancel:function(){i.hideMenu(),i.focus()}}),i.keyboardNav.focus(),i.isMenuVisible=1}},hideMenu:function(e){var o=this;if(o.isMenuVisible){if(e&&"mousedown"==e.type&&t.getParent(e.target,function(e){return e.id===o.id+"_open"}))return;e&&t.getParent(e.target,".mceSplitButtonMenu")||(t.removeClass(o.id,"mceSplitButtonSelected"),n.remove(t.doc,"mousedown",o.hideMenu,o),n.remove(o.id+"_menu","keydown",o._keyHandler),t.hide(o.id+"_menu")),o.isMenuVisible=0,o.onHideMenu.dispatch(),o.keyboardNav.destroy()}},renderMenu:function(){var i,a,s,c,d,l,u=this,f=0,p=u.settings;return d=t.add(p.menu_container,"div",{role:"listbox",id:u.id+"_menu","class":p.menu_class+" "+p["class"],style:"position:absolute;left:0;top:-1000px;"}),i=t.add(d,"div",{"class":p["class"]+" mceSplitButtonMenu"}),t.add(i,"span",{"class":"mceMenuLine"}),a=t.add(i,"table",{role:"presentation","class":"mceColorSplitMenu"}),s=t.add(a,"tbody"),f=0,r(o(p.colors,"array")?p.colors:p.colors.split(","),function(n){n=n.replace(/^#/,""),f--||(c=t.add(s,"tr"),f=p.grid_width-1),a=t.add(c,"td");var o={href:"javascript:;",style:{backgroundColor:"#"+n},title:u.editor.getLang("colors."+n,n),"data-mce-color":"#"+n};e.isIE||(o.role="option"),a=t.add(a,"a",o),u.editor.forcedHighContrastMode&&(a=t.add(a,"canvas",{width:16,height:16,"aria-hidden":"true"}),a.getContext&&(l=a.getContext("2d"))?(l.fillStyle="#"+n,l.fillRect(0,0,16,16)):t.remove(a))}),p.more_colors_func&&(a=t.add(s,"tr"),a=t.add(a,"td",{colspan:p.grid_width,"class":"mceMoreColors"}),a=t.add(a,"a",{role:"option",id:u.id+"_more",href:"javascript:;",onclick:"return false;","class":"mceMoreColors"},p.more_colors_title),n.add(a,"click",function(e){return p.more_colors_func.call(p.more_colors_scope||this),n.cancel(e)})),t.addClass(i,"mceColorSplitMenu"),n.add(u.id+"_menu","mousedown",function(e){return n.cancel(e)}),n.add(u.id+"_menu","click",function(e){var n;return e=t.getParent(e.target,"a",s),e&&"a"==e.nodeName.toLowerCase()&&(n=e.getAttribute("data-mce-color"))&&u.setColor(n),!1}),d},setColor:function(e){this.displayColor(e),this.hideMenu(),this.settings.onselect(e)},displayColor:function(e){var n=this;t.setStyle(n.id+"_preview","backgroundColor",e),n.value=e},postRender:function(){var e=this,n=e.id;e.parent(),t.add(n+"_action","div",{id:n+"_preview","class":"mceColorPreview"}),t.setStyle(e.id+"_preview","backgroundColor",e.value)},destroy:function(){var e=this;e.parent(),n.clear(e.id+"_menu"),n.clear(e.id+"_more"),t.remove(e.id+"_menu"),e.keyboardNav&&e.keyboardNav.destroy()}})}(tinymce),function(e){var t=e.DOM,n=e.each,o=e.dom.Event;e.create("tinymce.ui.ToolbarGroup:tinymce.ui.Container",{renderHTML:function(){var n=this,o=[],r=n.controls,i=e.each,a=n.settings;return o.push('<div id="'+n.id+'" role="group" aria-labelledby="'+n.id+'_voice">'),o.push("<span role='application'>"),o.push('<span id="'+n.id+'_voice" class="mceVoiceLabel" style="display:none;">'+t.encode(a.name)+"</span>"),i(r,function(e){o.push(e.renderHTML())}),o.push("</span>"),o.push("</div>"),o.join("")},focus:function(){var e=this;t.get(e.id).focus()},postRender:function(){var o=this,r=[];n(o.controls,function(e){n(e.controls,function(e){e.id&&r.push(e)})}),o.keyNav=new e.ui.KeyboardNavigation({root:o.id,items:r,onCancel:function(){e.isWebKit&&t.get(o.editor.id+"_ifr").focus(),o.editor.focus()},excludeFromTabOrder:!o.settings.tab_focus_toolbar})},destroy:function(){var e=this;e.parent(),e.keyNav.destroy(),o.clear(e.id)}})}(tinymce),function(e){var t=e.DOM;e.each,e.create("tinymce.ui.Toolbar:tinymce.ui.Container",{renderHTML:function(){var e,n,o,r,i,a,s=this,c="",d=s.settings;for(a=s.controls,o=0;o<a.length;o++)n=a[o],r=a[o-1],i=a[o+1],0===o&&(e="mceToolbarStart",n.Button?e+=" mceToolbarStartButton":n.SplitButton?e+=" mceToolbarStartSplitButton":n.ListBox&&(e+=" mceToolbarStartListBox"),c+=t.createHTML("td",{"class":e},t.createHTML("span",null,"<!-- IE -->"))),r&&n.ListBox&&(r.Button||r.SplitButton)&&(c+=t.createHTML("td",{"class":"mceToolbarEnd"},t.createHTML("span",null,"<!-- IE -->"))),c+=t.stdMode?'<td style="position: relative">'+n.renderHTML()+"</td>":"<td>"+n.renderHTML()+"</td>",i&&n.ListBox&&(i.Button||i.SplitButton)&&(c+=t.createHTML("td",{"class":"mceToolbarStart"},t.createHTML("span",null,"<!-- IE -->")));return e="mceToolbarEnd",n.Button?e+=" mceToolbarEndButton":n.SplitButton?e+=" mceToolbarEndSplitButton":n.ListBox&&(e+=" mceToolbarEndListBox"),c+=t.createHTML("td",{"class":e},t.createHTML("span",null,"<!-- IE -->")),t.createHTML("table",{id:s.id,"class":"mceToolbar"+(d["class"]?" "+d["class"]:""),cellpadding:"0",cellspacing:"0",align:s.settings.align||"",role:"presentation",tabindex:"-1"},"<tbody><tr>"+c+"</tr></tbody>")}})}(tinymce),function(e){var t=e.util.Dispatcher;e.each,e.create("tinymce.AddOnManager",{AddOnManager:function(){var e=this;e.items=[],e.urls={},e.lookup={},e.onAdd=new t(e)},get:function(e){return this.lookup[e]?this.lookup[e].instance:void 0},dependencies:function(e){var t;return this.lookup[e]&&(t=this.lookup[e].dependencies),t||[]},requireLangPack:function(t){var n=e.settings;n&&n.language&&!1!==n.language_load&&e.ScriptLoader.add(this.urls[t]+"/langs/"+n.language+".js")},add:function(e,t,n){return this.items.push(t),this.lookup[e]={
instance:t,dependencies:n},this.onAdd.dispatch(this,e,t),t},createUrl:function(e,t){return"object"==typeof t?t:{prefix:e.prefix,resource:t,suffix:e.suffix}},addComponents:function(t,n){var o=this.urls[t];e.each(n,function(t){e.ScriptLoader.add(o+"/"+t)})},load:function(t,n,o,r){function i(){var i=a.dependencies(t);e.each(i,function(e){var t=a.createUrl(n,e);a.load(t.resource,t,void 0,void 0)}),o&&o.call(r||e.ScriptLoader)}var a=this,s=n;a.urls[t]||("object"==typeof n&&(s=n.prefix+n.resource+n.suffix),0!==s.indexOf("/")&&-1==s.indexOf("://")&&(s=e.baseURL+"/"+s),a.urls[t]=s.substring(0,s.lastIndexOf("/")),a.lookup[t]?i():e.ScriptLoader.add(s,i,r))}}),e.PluginManager=new e.AddOnManager,e.ThemeManager=new e.AddOnManager}(tinymce),function(e){var t,n=e.each,o=e.extend,r=e.DOM,i=e.dom.Event,a=(e.ThemeManager,e.PluginManager,e.explode),s=e.util.Dispatcher,c=0;e.documentBaseURL=window.location.href.replace(/[\?#].*$/,"").replace(/[\/\\][^\/]+$/,""),/[\/\\]$/.test(e.documentBaseURL)||(e.documentBaseURL+="/"),e.baseURL=new e.util.URI(e.documentBaseURL).toAbsolute(e.baseURL),e.baseURI=new e.util.URI(e.baseURL),e.onBeforeUnload=new s(e),i.add(window,"beforeunload",function(t){e.onBeforeUnload.dispatch(e,t)}),e.onAddEditor=new s(e),e.onRemoveEditor=new s(e),e.EditorManager=o(e,{editors:[],i18n:{},activeEditor:null,init:function(t){function o(e){var t=e.id;return t||(t=e.name,t=t&&!r.get(t)?e.name:r.uniqueId(),e.setAttribute("id",t)),t}function s(t,n,o){var r=t[n];if(r)return e.is(r,"string")&&(o=r.replace(/\.\w+$/,""),o=o?e.resolve(o):0,r=e.resolve(r)),r.apply(o||this,Array.prototype.slice.call(arguments,2))}function d(e,t){return t.constructor===RegExp?t.test(e.className):r.hasClass(e,t)}var l,u=this,f=(e.ScriptLoader,[]);u.settings=t,i.bind(window,"ready",function(){var i,u;switch(s(t,"onpageload"),t.mode){case"exact":i=t.elements||"",i.length>0&&n(a(i),function(o){r.get(o)?(l=new e.Editor(o,t),f.push(l),l.render(1)):n(document.forms,function(i){n(i.elements,function(n){n.name===o&&(o="mce_editor_"+c++,r.setAttrib(n,"id",o),l=new e.Editor(o,t),f.push(l),l.render(1))})})});break;case"textareas":case"specific_textareas":n(r.select("textarea"),function(n){t.editor_deselector&&d(n,t.editor_deselector)||(!t.editor_selector||d(n,t.editor_selector))&&(l=new e.Editor(o(n),t),f.push(l),l.render(1))});break;default:t.types?n(t.types,function(i){n(r.select(i.selector),function(n){var r=new e.Editor(o(n),e.extend({},t,i));f.push(r),r.render(1)})}):t.selector&&n(r.select(t.selector),function(n){var r=new e.Editor(o(n),t);f.push(r),r.render(1)})}t.oninit&&(i=u=0,n(f,function(e){u++,e.initialized?i++:e.onInit.add(function(){++i==u&&s(t,"oninit")}),i==u&&s(t,"oninit")}))})},get:function(e){return e===t?this.editors:this.editors.hasOwnProperty(e)?this.editors[e]:t},getInstanceById:function(e){return this.get(e)},add:function(e){var t=this,n=t.editors;return n[e.id]=e,n.push(e),t._setActive(e),t.onAddEditor.dispatch(t,e),e},remove:function(e){var t,n=this,o=n.editors;if(!o[e.id])return null;for(delete o[e.id],t=0;t<o.length;t++)if(o[t]==e){o.splice(t,1);break}return n.activeEditor==e&&n._setActive(o[0]),e.destroy(),n.onRemoveEditor.dispatch(n,e),e},execCommand:function(t,n,o){function r(){s.destroy(),i.detachEvent("onunload",r),i=i.tinyMCE=i.tinymce=null}var i,a=this,s=a.get(o);switch(t){case"mceFocus":return s.focus(),!0;case"mceAddEditor":case"mceAddControl":return a.get(o)||new e.Editor(o,a.settings).render(),!0;case"mceAddFrameControl":return i=o.window,i.tinyMCE=tinyMCE,i.tinymce=e,e.DOM.doc=i.document,e.DOM.win=i,s=new e.Editor(o.element_id,o),s.render(),e.isIE&&!e.isIE11&&i.attachEvent("onunload",r),o.page_window=null,!0;case"mceRemoveEditor":case"mceRemoveControl":return s&&s.remove(),!0;case"mceToggleEditor":return s?(s.isHidden()?s.show():s.hide(),!0):(a.execCommand("mceAddControl",0,o),!0)}return!!a.activeEditor&&a.activeEditor.execCommand(t,n,o)},execInstanceCommand:function(e,t,n,o){var r=this.get(e);return!!r&&r.execCommand(t,n,o)},triggerSave:function(){n(this.editors,function(e){e.save()})},addI18n:function(t,o){var r=this.i18n;e.is(t,"string")?n(o,function(e,n){r[t+"."+n]=e}):n(t,function(e,t){n(e,function(e,o){n(e,function(e,n){"common"===o?r[t+"."+n]=e:r[t+"."+o+"."+n]=e})})})},_setActive:function(e){this.selectedInstance=this.activeEditor=e}})}(tinymce),function(e){var t=e.DOM,n=e.dom.Event,o=e.extend,r=e.each,i=e.isGecko,a=e.isIE,s=(e.isWebKit,e.is),c=e.ThemeManager,d=e.PluginManager,l=e.explode;e.create("tinymce.Editor",{Editor:function(t,n){var r=this,i=!0;r.settings=n=o({id:t,language:"en",theme:"advanced",skin:"default",delta_width:0,delta_height:0,popup_css:"",plugins:"",document_base_url:e.documentBaseURL,add_form_submit_trigger:i,submit_patch:i,add_unload_trigger:i,convert_urls:i,relative_urls:i,remove_script_host:i,table_inline_editing:!1,object_resizing:i,accessibility_focus:i,doctype:e.isIE6?'<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN">':"<!DOCTYPE>",visual:i,font_size_style_values:"xx-small,x-small,small,medium,large,x-large,xx-large",font_size_legacy_values:"xx-small,small,medium,large,x-large,xx-large,300%",apply_source_formatting:i,directionality:"ltr",forced_root_block:"p",hidden_input:i,padd_empty_editor:i,render_ui:i,indentation:"30px",fix_table_elements:i,inline_styles:i,convert_fonts_to_spans:i,indent:"simple",indent_before:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",indent_after:"p,h1,h2,h3,h4,h5,h6,blockquote,div,title,style,pre,script,td,ul,li,area,table,thead,tfoot,tbody,tr,section,article,hgroup,aside,figure,option,optgroup,datalist",validate:i,entity_encoding:"named",url_converter:r.convertURL,url_converter_scope:r,ie7_compat:i},n),r.id=r.editorId=t,r.isNotDirty=!1,r.plugins={},r.documentBaseURI=new e.util.URI(n.document_base_url||e.documentBaseURL,{base_uri:tinyMCE.baseURI}),r.baseURI=e.baseURI,r.contentCSS=[],r.contentStyles=[],r.setupEvents(),r.execCommands={},r.queryStateCommands={},r.queryValueCommands={},r.execCallback("setup",r)},render:function(){function o(){a.language&&!1!==a.language_load&&u.add(e.baseURL+"/langs/"+a.language+".js"),a.theme&&"function"!=typeof a.theme&&"-"!=a.theme.charAt(0)&&!c.urls[a.theme]&&c.load(a.theme,"themes/"+a.theme+"/editor_template"+e.suffix+".js"),r(l(a.plugins),function(t){if(t&&!d.urls[t])if("-"==t.charAt(0)){t=t.substr(1,t.length);var n=d.dependencies(t);r(n,function(t){var n={prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"};t=d.createUrl(n,t),d.load(t.resource,t)})}else{if("safari"==t)return;d.load(t,{prefix:"plugins/",resource:t,suffix:"/editor_plugin"+e.suffix+".js"})}}),u.loadQueue(function(){i.removed||i.init()})}var i=this,a=i.settings,s=i.id,u=e.ScriptLoader;return n.domLoaded?(tinyMCE.settings=a,void(i.getElement()&&(!e.isIDevice||e.isIOS5)&&(!/TEXTAREA|INPUT/i.test(i.getElement().nodeName)&&a.hidden_input&&t.getParent(s,"form")&&t.insertAfter(t.create("input",{type:"hidden",name:s}),s),a.content_editable||(i.orgVisibility=i.getElement().style.visibility,i.getElement().style.visibility="hidden"),e.WindowManager&&(i.windowManager=new e.WindowManager(i)),"xml"==a.encoding&&i.onGetContent.add(function(e,n){n.save&&(n.content=t.encode(n.content))}),a.add_form_submit_trigger&&i.onSubmit.addToTop(function(){i.initialized&&(i.save(),i.isNotDirty=1)}),a.add_unload_trigger&&(i._beforeUnload=tinyMCE.onBeforeUnload.add(function(){!i.initialized||i.destroyed||i.isHidden()||i.save({format:"raw",no_events:!0})})),e.addUnload(i.destroy,i),a.submit_patch&&i.onBeforeRenderUI.add(function(){var t=i.getElement().form;t&&(t._mceOldSubmit||(t.submit.nodeType||t.submit.length||(i.formElement=t,t._mceOldSubmit=t.submit,t.submit=function(){return e.triggerSave(),i.isNotDirty=1,i.formElement._mceOldSubmit(i.formElement)}),t=null))}),o()))):void n.add(window,"ready",function(){i.render()})},init:function(){function n(t){var o,i=d.get(t),a=d.urls[t]||e.documentBaseURL.replace(/\/$/,"");i&&-1===e.inArray(C,t)&&(r(d.dependencies(t),function(e){n(e)}),o=new i(v,a),v.plugins[t]=o,o.init&&(o.init(v,a),C.push(t)))}var o,i,s,u,f,p,m,h,g,v=this,y=v.settings,b=v.getElement(),C=[];if(e.add(v),y.aria_label=y.aria_label||t.getAttrib(b,"aria-label",v.getLang("aria.rich_text_area")),y.theme&&("function"!=typeof y.theme?(y.theme=y.theme.replace(/-/,""),u=c.get(y.theme),v.theme=new u,v.theme.init&&v.theme.init(v,c.urls[y.theme]||e.documentBaseURL.replace(/\/$/,""))):v.theme=y.theme),r(l(y.plugins.replace(/\-/g,"")),n),!1!==y.popup_css&&(y.popup_css=y.popup_css?v.documentBaseURI.toAbsolute(y.popup_css):v.baseURI.toAbsolute("themes/"+y.theme+"/skins/"+y.skin+"/dialog.css")),y.popup_css_add&&(y.popup_css+=","+v.documentBaseURI.toAbsolute(y.popup_css_add)),v.controlManager=new e.ControlManager(v),v.onBeforeRenderUI.dispatch(v,v.controlManager),y.render_ui&&v.theme&&(v.orgDisplay=b.style.display,"function"!=typeof y.theme?(o=y.width||b.style.width||b.offsetWidth,i=y.height||b.style.height||b.offsetHeight,s=y.min_height||100,h=/^[0-9\.]+(|px)$/i,h.test(""+o)&&(o=Math.max(parseInt(o,10)+(u.deltaWidth||0),100)),h.test(""+i)&&(i=Math.max(parseInt(i,10)+(u.deltaHeight||0),s)),u=v.theme.renderUI({targetNode:b,width:o,height:i,deltaWidth:y.delta_width,deltaHeight:y.delta_height}),t.setStyles(u.sizeContainer||u.editorContainer,{width:o,height:i}),i=(u.iframeHeight||i)+("number"==typeof i?u.deltaHeight||0:""),s>i&&(i=s)):(u=y.theme(v,b),u.editorContainer.nodeType&&(u.editorContainer=u.editorContainer.id=u.editorContainer.id||v.id+"_parent"),u.iframeContainer.nodeType&&(u.iframeContainer=u.iframeContainer.id=u.iframeContainer.id||v.id+"_iframecontainer"),i=u.iframeHeight||b.offsetHeight,a&&(v.onInit.add(function(e){e.dom.bind(e.getBody(),"beforedeactivate keydown keyup",function(){e.bookmark=e.selection.getBookmark(1)})}),v.onNodeChange.add(function(e){document.activeElement.id==e.id+"_ifr"&&(e.bookmark=e.selection.getBookmark(1))}))),v.editorContainer=u.editorContainer),y.content_css&&r(l(y.content_css),function(e){v.contentCSS.push(v.documentBaseURI.toAbsolute(e))}),y.content_style&&v.contentStyles.push(y.content_style),y.content_editable)return b=u=null,v.initContentBody();for(document.domain&&location.hostname!=document.domain&&(e.relaxedDomain=document.domain),v.iframeHTML=y.doctype+'<html><head xmlns="http://www.w3.org/1999/xhtml">',y.document_base_url!=e.documentBaseURL&&(v.iframeHTML+='<base href="'+v.documentBaseURI.getURI()+'" />'),e.isIE8&&(v.iframeHTML+=y.ie7_compat?'<meta http-equiv="X-UA-Compatible" content="IE=7" />':'<meta http-equiv="X-UA-Compatible" content="IE=edge" />'),v.iframeHTML+='<meta http-equiv="Content-Type" content="text/html; charset=UTF-8" />',g=0;g<v.contentCSS.length;g++)v.iframeHTML+='<link type="text/css" rel="stylesheet" href="'+v.contentCSS[g]+'" />';v.contentCSS=[],p=y.body_id||"tinymce",-1!=p.indexOf("=")&&(p=v.getParam("body_id","","hash"),p=p[v.id]||p),m=y.body_class||"",-1!=m.indexOf("=")&&(m=v.getParam("body_class","","hash"),m=m[v.id]||""),v.iframeHTML+='</head><body id="'+p+'" class="mceContentBody '+m+'" onload="window.parent.tinyMCE.get(\''+v.id+"').onLoad.dispatch();\"><br></body></html>",e.relaxedDomain&&(a||e.isOpera&&parseFloat(opera.version())<11)&&(f='javascript:(function(){document.open();document.domain="'+document.domain+'";var ed = window.parent.tinyMCE.get("'+v.id+'");document.write(ed.iframeHTML);document.close();ed.initContentBody();})()'),t.add(u.iframeContainer,"iframe",{id:v.id+"_ifr",src:f||'javascript:""',frameBorder:"0",allowTransparency:"true",title:y.aria_label,style:{width:"100%",height:i,display:"block"}}),v.contentAreaContainer=u.iframeContainer,u.editorContainer&&(t.get(u.editorContainer).style.display=v.orgDisplay),b.style.visibility=v.orgVisibility,t.get(v.id).style.display="none",t.setAttrib(v.id,"aria-hidden",!0),e.relaxedDomain&&f||v.initContentBody(),b=u=null},initContentBody:function(){var n,o,i=this,s=i.settings,c=t.get(i.id),d=i.getDoc();a&&e.relaxedDomain||s.content_editable||(d.open(),d.write(i.iframeHTML),d.close(),e.relaxedDomain&&(d.domain=e.relaxedDomain)),s.content_editable&&(t.addClass(c,"mceContentBody"),i.contentDocument=d=s.content_document||document,i.contentWindow=s.content_window||window,i.bodyElement=c,s.content_document=s.content_window=null),n=i.getBody(),n.disabled=!0,s.readonly||(n.contentEditable=i.getParam("content_editable_state",!0)),n.disabled=!1,i.schema=new e.html.Schema(s),i.dom=new e.dom.DOMUtils(d,{keep_values:!0,url_converter:i.convertURL,url_converter_scope:i,hex_colors:s.force_hex_style_colors,class_filter:s.class_filter,update_styles:!0,root_element:s.content_editable?i.id:null,schema:i.schema}),i.parser=new e.html.DomParser(s,i.schema),i.parser.addAttributeFilter("src,href,style",function(e,t){for(var n,o,r,a=e.length,s=i.dom;a--;)n=e[a],o=n.attr(t),r="data-mce-"+t,n.attributes.map[r]||("style"===t?n.attr(r,s.serializeStyle(s.parseStyle(o),n.name)):n.attr(r,i.convertURL(o,t,n.name)))}),i.parser.addNodeFilter("script",function(e){for(var t,n=e.length;n--;)t=e[n],t.attr("type","mce-"+(t.attr("type")||"text/javascript"))}),i.parser.addNodeFilter("#cdata",function(e){for(var t,n=e.length;n--;)t=e[n],t.type=8,t.name="#comment",t.value="[CDATA["+t.value+"]]"}),i.parser.addNodeFilter("p,h1,h2,h3,h4,h5,h6,div",function(t){for(var n,o=t.length,r=i.schema.getNonEmptyElements();o--;)n=t[o],n.isEmpty(r)&&(n.empty().append(new e.html.Node("br",1)).shortEnded=!0)}),i.serializer=new e.dom.Serializer(s,i.dom,i.schema),i.selection=new e.dom.Selection(i.dom,i.getWin(),i.serializer,i),i.formatter=new e.Formatter(i),i.undoManager=new e.UndoManager(i),i.forceBlocks=new e.ForceBlocks(i),i.enterKey=new e.EnterKey(i),i.editorCommands=new e.EditorCommands(i),i.onExecCommand.add(function(e,t){/^(FontName|FontSize)$/.test(t)||i.nodeChanged()}),i.serializer.onPreProcess.add(function(e,t){return i.onPreProcess.dispatch(i,t,e)}),i.serializer.onPostProcess.add(function(e,t){return i.onPostProcess.dispatch(i,t,e)}),i.onPreInit.dispatch(i),s.browser_spellcheck||s.gecko_spellcheck||(d.body.spellcheck=!1),s.readonly||i.bindNativeEvents(),i.controlManager.onPostRender.dispatch(i,i.controlManager),i.onPostRender.dispatch(i),i.quirks=e.util.Quirks(i),s.directionality&&(n.dir=s.directionality),s.nowrap&&(n.style.whiteSpace="nowrap"),s.protect&&i.onBeforeSetContent.add(function(e,t){r(s.protect,function(e){t.content=t.content.replace(e,function(e){return"<!--mce:protected "+escape(e)+"-->"})})}),i.onSetContent.add(function(){i.addVisual(i.getBody())}),s.padd_empty_editor&&i.onPostProcess.add(function(e,t){t.content=t.content.replace(/^(<p[^>]*>(&nbsp;|&#160;|\s|\u00a0|)<\/p>[\r\n]*|<br \/>[\r\n]*)$/,"")}),i.load({initial:!0,format:"html"}),i.startContent=i.getContent({format:"raw"}),i.initialized=!0,i.onInit.dispatch(i),i.execCallback("setupcontent_callback",i.id,n,d),i.execCallback("init_instance_callback",i),i.focus(!0),i.nodeChanged({initial:!0}),i.contentStyles.length>0&&(o="",r(i.contentStyles,function(e){o+=e+"\r\n"}),i.dom.addStyle(o)),r(i.contentCSS,function(e){i.dom.loadCSS(e)}),s.auto_focus&&setTimeout(function(){var t=e.get(s.auto_focus);t.selection.select(t.getBody(),1),t.selection.collapse(1),t.getBody().focus(),t.getWin().focus()},100),c=d=n=null},focus:function(t){var n,o,r,i,a=this,s=a.selection,c=a.settings.content_editable,d=a.getDoc();t||(a.bookmark&&(s.moveToBookmark(a.bookmark),a.bookmark=null),o=s.getRng(),o.item&&(r=o.item(0)),a._refreshContentEditable(),c||a.getWin().focus(),(e.isGecko||c)&&(i=a.getBody(),i.setActive&&!e.isIE11?i.setActive():i.focus(),c&&s.normalize()),r&&r.ownerDocument==d&&(o=d.body.createControlRange(),o.addElement(r),o.select())),e.activeEditor!=a&&(null!=(n=e.activeEditor)&&n.onDeactivate.dispatch(n,a),a.onActivate.dispatch(a,n)),e._setActive(a)},execCallback:function(t){var n,o=this,r=o.settings[t];if(r)return o.callbackLookup&&(n=o.callbackLookup[t])&&(r=n.func,n=n.scope),s(r,"string")&&(n=r.replace(/\.\w+$/,""),n=n?e.resolve(n):0,r=e.resolve(r),o.callbackLookup=o.callbackLookup||{},o.callbackLookup[t]={func:r,scope:n}),r.apply(n||o,Array.prototype.slice.call(arguments,1))},translate:function(t){var n=this.settings.language||"en",o=e.i18n;return t?o[n+"."+t]||t.replace(/\{\#([^\}]+)\}/g,function(e,t){return o[n+"."+t]||"{#"+t+"}"}):""},getLang:function(t,n){return e.i18n[(this.settings.language||"en")+"."+t]||(s(n)?n:"{#"+t+"}")},getParam:function(t,n,o){var i,a=e.trim,c=s(this.settings[t])?this.settings[t]:n;return"hash"===o?(i={},s(c,"string")?r(c.split(c.indexOf("=")>0?/[;,](?![^=;,]*(?:[;,]|$))/:","),function(e){e=e.split("="),i[a(e[0])]=a(e.length>1?e[1]:e)}):i=c,i):c},nodeChanged:function(e){var t,n=this,o=n.selection;n.initialized&&(e=e||{},t=o.getStart()||n.getBody(),t=a&&t.ownerDocument!=n.getDoc()?n.getBody():t,e.parents=[],n.dom.getParent(t,function(t){return"BODY"==t.nodeName||void e.parents.push(t)}),n.onNodeChange.dispatch(n,e?e.controlManager||n.controlManager:n.controlManager,t,o.isCollapsed(),e))},addButton:function(e,t){var n=this;n.buttons=n.buttons||{},n.buttons[e]=t},addCommand:function(e,t,n){this.execCommands[e]={func:t,scope:n||this}},addQueryStateHandler:function(e,t,n){this.queryStateCommands[e]={func:t,scope:n||this}},addQueryValueHandler:function(e,t,n){this.queryValueCommands[e]={func:t,scope:n||this}},addShortcut:function(e,t,n,o){var i,a=this;return!1!==a.settings.custom_shortcuts&&(a.shortcuts=a.shortcuts||{},s(n,"string")&&(i=n,n=function(){a.execCommand(i,!1,null)}),s(n,"object")&&(i=n,n=function(){a.execCommand(i[0],i[1],i[2])}),r(l(e),function(e){var i={func:n,scope:o||this,desc:a.translate(t),alt:!1,ctrl:!1,shift:!1};r(l(e,"+"),function(e){switch(e){case"alt":case"ctrl":case"shift":i[e]=!0;break;default:i.charCode=e.charCodeAt(0),i.keyCode=e.toUpperCase().charCodeAt(0)}}),a.shortcuts[(i.ctrl?"ctrl":"")+","+(i.alt?"alt":"")+","+(i.shift?"shift":"")+","+i.keyCode]=i}),!0)},execCommand:function(e,t,n,i){var a,s,c=this,d=0;return/^(mceAddUndoLevel|mceEndUndoLevel|mceBeginUndoLevel|mceRepaint|SelectAll)$/.test(e)||i&&i.skip_focus||c.focus(),i=o({},i),c.onBeforeExecCommand.dispatch(c,e,t,n,i),!i.terminate&&(c.execCallback("execcommand_callback",c.id,c.selection.getNode(),e,t,n)?(c.onExecCommand.dispatch(c,e,t,n,i),!0):(a=c.execCommands[e])&&!0!==(s=a.func.call(a.scope,t,n))?(c.onExecCommand.dispatch(c,e,t,n,i),s):(r(c.plugins,function(o){return o.execCommand&&o.execCommand(e,t,n)?(c.onExecCommand.dispatch(c,e,t,n,i),d=1,!1):void 0}),!!d||(c.theme&&c.theme.execCommand&&c.theme.execCommand(e,t,n)?(c.onExecCommand.dispatch(c,e,t,n,i),!0):c.editorCommands.execCommand(e,t,n)?(c.onExecCommand.dispatch(c,e,t,n,i),!0):(c.getDoc().execCommand(e,t,n),void c.onExecCommand.dispatch(c,e,t,n,i)))))},queryCommandState:function(e){var t,n,o=this;if(!o._isHidden()){if((t=o.queryStateCommands[e])&&!0!==(n=t.func.call(t.scope)))return n;if(-1!==(t=o.editorCommands.queryCommandState(e)))return t;try{return this.getDoc().queryCommandState(e)}catch(e){}}},queryCommandValue:function(e){var t,n,o=this;if(!o._isHidden()){if((t=o.queryValueCommands[e])&&!0!==(n=t.func.call(t.scope)))return n;if(t=o.editorCommands.queryCommandValue(e),s(t))return t;try{return this.getDoc().queryCommandValue(e)}catch(e){}}},show:function(){var e=this;t.show(e.getContainer()),t.hide(e.id),e.load()},hide:function(){var e=this,n=e.getDoc();a&&n&&n.execCommand("SelectAll"),e.save(),t.hide(e.getContainer()),t.setStyle(e.id,"display",e.orgDisplay)},isHidden:function(){return!t.isHidden(this.id)},setProgressState:function(e,t,n){return this.onSetProgressState.dispatch(this,e,t,n),e},load:function(e){var t,n=this,o=n.getElement();return o?(e=e||{},e.load=!0,t=n.setContent(s(o.value)?o.value:o.innerHTML,e),e.element=o,e.no_events||n.onLoadContent.dispatch(n,e),e.element=o=null,t):void 0},save:function(e){var n,o,i=this,a=i.getElement();if(a&&i.initialized)return e=e||{},e.save=!0,e.element=a,n=e.content=i.getContent(e),e.no_events||i.onSaveContent.dispatch(i,e),n=e.content,/TEXTAREA|INPUT/i.test(a.nodeName)?a.value=n:(a.innerHTML=n,(o=t.getParent(i.id,"form"))&&r(o.elements,function(e){return e.name==i.id?(e.value=n,!1):void 0})),e.element=a=null,n},setContent:function(t,n){var o,r=this,i=r.getBody();return n=n||{},n.format=n.format||"html",n.set=!0,n.content=t,n.no_events||r.onBeforeSetContent.dispatch(r,n),t=n.content,e.isIE||0!==t.length&&!/^\s+$/.test(t)?("raw"!==n.format&&(t=new e.html.Serializer({},r.schema).serialize(r.parser.parse(t))),n.content=e.trim(t),r.dom.setHTML(i,n.content),n.no_events||r.onSetContent.dispatch(r,n),r.settings.content_editable&&document.activeElement!==r.getBody()||r.selection.normalize(),n.content):(o=r.settings.forced_root_block,t=o?"<"+o+'><br data-mce-bogus="1"></'+o+">":'<br data-mce-bogus="1">',i.innerHTML=t,r.selection.select(i,!0),void r.selection.collapse(!0))},getContent:function(t){var n,o=this,r=o.getBody();return t=t||{},t.format=t.format||"html",t.get=!0,t.getInner=!0,t.no_events||o.onBeforeGetContent.dispatch(o,t),n="raw"==t.format?r.innerHTML:"text"==t.format?r.innerText||r.textContent:o.serializer.serialize(r,t),t.content="text"!=t.format?e.trim(n):n,t.no_events||o.onGetContent.dispatch(o,t),t.content},isDirty:function(){var t=this;return e.trim(t.startContent)!=e.trim(t.getContent({format:"raw",no_events:1}))&&!t.isNotDirty},getContainer:function(){var e=this;return e.container||(e.container=t.get(e.editorContainer||e.id+"_parent")),e.container},getContentAreaContainer:function(){return this.contentAreaContainer},getElement:function(){return t.get(this.settings.content_element||this.id)},getWin:function(){var e,n=this;return n.contentWindow||(e=t.get(n.id+"_ifr"))&&(n.contentWindow=e.contentWindow),n.contentWindow},getDoc:function(){var e,t=this;return t.contentDocument||(e=t.getWin())&&(t.contentDocument=e.document),t.contentDocument},getBody:function(){return this.bodyElement||this.getDoc().body},convertURL:function(e,t,n){var o=this,r=o.settings;return r.urlconverter_callback?o.execCallback("urlconverter_callback",e,n,!0,t):!r.convert_urls||n&&"LINK"==n.nodeName||0===e.indexOf("file:")?e:r.relative_urls?o.documentBaseURI.toRelative(e):e=o.documentBaseURI.toAbsolute(e,r.remove_script_host)},addVisual:function(e){var t,n=this,o=n.settings,i=n.dom;e=e||n.getBody(),s(n.hasVisual)||(n.hasVisual=o.visual),r(i.select("table,a",e),function(e){var r;switch(e.nodeName){case"TABLE":return t=o.visual_table_class||"mceItemTable",void((r=i.getAttrib(e,"border"))&&"0"!=r||(n.hasVisual?i.addClass(e,t):i.removeClass(e,t)));case"A":return void(i.getAttrib(e,"href",!1)||(r=i.getAttrib(e,"name")||e.id,t="mceItemAnchor",r&&(n.hasVisual?i.addClass(e,t):i.removeClass(e,t))))}}),n.onVisualAid.dispatch(n,e,n.hasVisual)},remove:function(){var o=this,r=o.getContainer(),i=o.getDoc();o.removed||(o.removed=1,a&&i&&i.execCommand("SelectAll"),o.save(),t.setStyle(o.id,"display",o.orgDisplay),o.settings.content_editable||(n.unbind(o.getWin()),n.unbind(o.getDoc())),n.unbind(o.getBody()),n.clear(r),o.execCallback("remove_instance_callback",o),o.onRemove.dispatch(o),o.onExecCommand.listeners=[],e.remove(o),t.remove(r))},destroy:function(t){var o=this;o.destroyed||(i&&(n.unbind(o.getDoc()),n.unbind(o.getWin()),n.unbind(o.getBody())),t||(e.removeUnload(o.destroy),tinyMCE.onBeforeUnload.remove(o._beforeUnload),o.theme&&o.theme.destroy&&o.theme.destroy(),o.controlManager.destroy(),o.selection.destroy(),o.dom.destroy()),o.formElement&&(o.formElement.submit=o.formElement._mceOldSubmit,o.formElement._mceOldSubmit=null),o.contentAreaContainer=o.formElement=o.container=o.settings.content_element=o.bodyElement=o.contentDocument=o.contentWindow=null,o.selection&&(o.selection=o.selection.win=o.selection.dom=o.selection.dom.doc=null),o.destroyed=1)},_refreshContentEditable:function(){var e,t,n=this;n._isHidden()&&(e=n.getBody(),t=e.parentNode,t.removeChild(e),t.appendChild(e),e.focus())},_isHidden:function(){var e;return i?!(e=this.selection.getSel())||!e.rangeCount||0===e.rangeCount:0}})}(tinymce),function(e){var t=e.each;e.Editor.prototype.setupEvents=function(){var n=this,o=n.settings;t(["onPreInit","onBeforeRenderUI","onPostRender","onLoad","onInit","onRemove","onActivate","onDeactivate","onClick","onEvent","onMouseUp","onMouseDown","onDblClick","onKeyDown","onKeyUp","onKeyPress","onContextMenu","onSubmit","onReset","onPaste","onPreProcess","onPostProcess","onBeforeSetContent","onBeforeGetContent","onSetContent","onGetContent","onLoadContent","onSaveContent","onNodeChange","onChange","onBeforeExecCommand","onExecCommand","onUndo","onRedo","onVisualAid","onSetProgressState","onSetAttrib"],function(t){n[t]=new e.util.Dispatcher(n)}),o.cleanup_callback&&(n.onBeforeSetContent.add(function(e,t){t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)}),n.onPreProcess.add(function(e,t){t.set&&e.execCallback("cleanup_callback","insert_to_editor_dom",t.node,t),t.get&&e.execCallback("cleanup_callback","get_from_editor_dom",t.node,t)}),n.onPostProcess.add(function(e,t){t.set&&(t.content=e.execCallback("cleanup_callback","insert_to_editor",t.content,t)),t.get&&(t.content=e.execCallback("cleanup_callback","get_from_editor",t.content,t))})),o.save_callback&&n.onGetContent.add(function(e,t){t.save&&(t.content=e.execCallback("save_callback",e.id,t.content,e.getBody()))}),o.handle_event_callback&&n.onEvent.add(function(e,t,o){!1===n.execCallback("handle_event_callback",t,e,o)&&(t.preventDefault(),t.stopPropagation())}),o.handle_node_change_callback&&n.onNodeChange.add(function(e,t,n){e.execCallback("handle_node_change_callback",e.id,n,-1,-1,!0,e.selection.isCollapsed())}),o.save_callback&&n.onSaveContent.add(function(e,t){var n=e.execCallback("save_callback",e.id,t.content,e.getBody());n&&(t.content=n)}),o.onchange_callback&&n.onChange.add(function(e,t){e.execCallback("onchange_callback",e,t)})},e.Editor.prototype.bindNativeEvents=function(){function n(e,t){e.type,s.removed||!1!==s.onEvent.dispatch(s,e,t)&&s[a[e.fakeType||e.type]].dispatch(s,e,t)}function o(){s.focus(!0)}function r(t,n){65==n.keyCode&&e.VK.metaKeyPressed(n)||s.selection.normalize(),s.nodeChanged()}function i(n,o){(n.altKey||n.ctrlKey||n.metaKey)&&t(s.shortcuts,function(t){var r=e.isMac?n.metaKey:n.ctrlKey;if(t.ctrl==r&&t.alt==n.altKey&&t.shift==n.shiftKey)return n.keyCode==t.keyCode||n.charCode&&n.charCode==t.charCode?(n.preventDefault(),o&&t.func.call(t.scope),!0):void 0})}var a,s=this,c=s.settings,d=s.dom;a={mouseup:"onMouseUp",mousedown:"onMouseDown",click:"onClick",keyup:"onKeyUp",keydown:"onKeyDown",keypress:"onKeyPress",submit:"onSubmit",reset:"onReset",contextmenu:"onContextMenu",dblclick:"onDblClick",paste:"onPaste"},t(a,function(t,o){var r=c.content_editable?s.getBody():s.getDoc();switch(o){case"contextmenu":d.bind(r,o,n);break;case"paste":d.bind(s.getBody(),o,n);break;case"submit":case"reset":d.bind(s.getElement().form||e.DOM.getParent(s.id,"form"),o,n);break;default:d.bind(r,o,n)}}),d.bind(c.content_editable?s.getBody():e.isGecko?s.getDoc():s.getWin(),"focus",function(){s.focus(!0)}),c.content_editable&&e.isOpera&&(d.bind(s.getBody(),"click",o),d.bind(s.getBody(),"keydown",o)),s.onMouseUp.add(r),s.onKeyUp.add(function(t,n){var o=n.keyCode;(o>=33&&36>=o||o>=37&&40>=o||13==o||45==o||46==o||8==o||e.isMac&&(91==o||93==o)||n.ctrlKey)&&r(t,n)}),s.onReset.add(function(){s.setContent(s.startContent,{format:"raw"})}),s.onKeyUp.add(function(e,t){i(t)}),s.onKeyPress.add(function(e,t){i(t)}),s.onKeyDown.add(function(e,t){i(t,!0)}),e.isOpera&&s.onClick.add(function(e,t){t.preventDefault()})}}(tinymce),function(e){var t,n=e.each,o=!0,r=!1;e.EditorCommands=function(i){function a(e,t,n){var i;return e=e.toLowerCase(),(i=y.exec[e])?(i(e,t,n),o):r}function s(e){var t;return e=e.toLowerCase(),(t=y.state[e])?t(e):-1}function c(e){var t;return e=e.toLowerCase(),(t=y.value[e])?t(e):r}function d(e,t){t=t||"exec",n(e,function(e,o){n(o.toLowerCase().split(","),function(n){y[t][n]=e})})}function l(e,n,o){return n===t&&(n=r),o===t&&(o=null),i.getDoc().execCommand(e,n,o)}function u(e){return C.match(e)}function f(e,n){C.toggle(e,n?{value:n}:t)}function p(e){h=v.getBookmark(e)}function m(){v.moveToBookmark(h)}var h,g=i.dom,v=i.selection,y={state:{},exec:{},value:{}},b=i.settings,C=i.formatter;e.extend(this,{execCommand:a,queryCommandState:s,queryCommandValue:c,addCommands:d}),d({"mceResetDesignMode,mceBeginUndoLevel":function(){},"mceEndUndoLevel,mceAddUndoLevel":function(){i.undoManager.add()},"Cut,Copy,Paste":function(t){var n,r=i.getDoc();try{l(t)}catch(e){n=o}(n||!r.queryCommandSupported(t))&&(e.isGecko?i.windowManager.confirm(i.getLang("clipboard_msg"),function(e){e&&open("http://www.mozilla.org/editor/midasdemo/securityprefs.html","_blank")}):i.windowManager.alert(i.getLang("clipboard_no_support")))},unlink:function(e){v.isCollapsed()&&v.select(v.getNode()),l(e),v.collapse(r)},"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(e){var t=e.substring(7);n("left,center,right,full".split(","),function(e){t!=e&&C.remove("align"+e)}),f("align"+t),a("mceRepaint")},"InsertUnorderedList,InsertOrderedList":function(e){var t,n;l(e),(t=g.getParent(v.getNode(),"ol,ul"))&&(n=t.parentNode,/^(H[1-6]|P|ADDRESS|PRE)$/.test(n.nodeName)&&(p(),g.split(n,t),m()))},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){f(e)},"ForeColor,HiliteColor,FontName":function(e,t,n){f(e,n)},FontSize:function(t,n,o){var r,i;o>=1&&7>=o&&(i=e.explode(b.font_size_style_values),r=e.explode(b.font_size_classes),o=r?r[o-1]||o:i[o-1]||o),f(t,o)},RemoveFormat:function(e){C.remove(e)},mceBlockQuote:function(){f("blockquote")},FormatBlock:function(e,t,n){return f(n||"p")},mceCleanup:function(){var e=v.getBookmark();i.setContent(i.getContent({cleanup:o}),{cleanup:o}),v.moveToBookmark(e)},mceRemoveNode:function(e,t,n){var r=n||v.getNode();r!=i.getBody()&&(p(),i.dom.remove(r,o),m())},mceSelectNodeDepth:function(e,t,n){var o=0;g.getParent(v.getNode(),function(e){return 1==e.nodeType&&o++==n?(v.select(e),r):void 0},i.getBody())},mceSelectNode:function(e,t,n){v.select(n)},mceInsertContent:function(t,n,o){var r,a,s,c,d,l,u,f,p,m,h,y,b,C;if(r=i.parser,a=new e.html.Serializer({},i.schema),b='<span id="mce_marker" data-mce-type="bookmark">\ufeff</span>',l={content:o,format:"html"},v.onBeforeSetContent.dispatch(v,l),o=l.content,-1==o.indexOf("{$caret}")&&(o+="{$caret}"),o=o.replace(/\{\$caret\}/,b),v.isCollapsed()||i.getDoc().execCommand("Delete",!1,null),s=v.getNode(),l={context:s.nodeName.toLowerCase()},d=r.parse(o,l),h=d.lastChild,"mce_marker"==h.attr("id"))for(u=h,h=h.prev;h;h=h.walk(!0))if(3==h.type||!g.isBlock(h.name)){h.parent.insert(u,h,"br"===h.name);break}if(l.invalid){for(v.setContent(b),s=v.getNode(),c=i.getBody(),9==s.nodeType?s=h=c:h=s;h!==c;)s=h,h=h.parentNode;o=s==c?c.innerHTML:g.getOuterHTML(s),o=a.serialize(r.parse(o.replace(/<span (id="mce_marker"|id=mce_marker).+?<\/span>/i,function(){return a.serialize(d)}))),s==c?g.setHTML(c,o):g.setOuterHTML(s,o)}else o=a.serialize(d),h=s.firstChild,y=s.lastChild,!h||h===y&&"BR"===h.nodeName?g.setHTML(s,o):v.setContent(o);u=g.get("mce_marker"),f=g.getRect(u),p=g.getViewPort(i.getWin()),(f.y+f.h>p.y+p.h||f.y<p.y||f.x>p.x+p.w||f.x<p.x)&&(C=e.isIE?i.getDoc().documentElement:i.getBody(),C.scrollLeft=f.x,C.scrollTop=f.y-p.h+25),m=g.createRng(),h=u.previousSibling,h&&3==h.nodeType?m.setStart(h,h.nodeValue.length):(m.setStartBefore(u),m.setEndBefore(u)),g.remove(u),v.setRng(m),v.onSetContent.dispatch(v,l),i.addVisual()},mceInsertRawHTML:function(e,t,n){v.setContent("tiny_mce_marker"),i.setContent(i.getContent().replace(/tiny_mce_marker/g,function(){return n}))},mceToggleFormat:function(e,t,n){f(n)},mceSetContent:function(e,t,n){i.setContent(n)},"Indent,Outdent":function(e){var t,o,r;t=b.indentation,o=/[a-z%]+$/i.exec(t),t=parseInt(t),s("InsertUnorderedList")||s("InsertOrderedList")?l(e):(b.forced_root_block||g.getParent(v.getNode(),g.isBlock)||C.apply("div"),n(v.getSelectedBlocks(),function(n){"outdent"==e?(r=Math.max(0,parseInt(n.style.paddingLeft||0)-t),g.setStyle(n,"paddingLeft",r?r+o:"")):g.setStyle(n,"paddingLeft",parseInt(n.style.paddingLeft||0)+t+o)}))},mceRepaint:function(){if(e.isGecko)try{p(o),v.getSel()&&v.getSel().selectAllChildren(i.getBody()),v.collapse(o),m()}catch(e){}},mceToggleFormat:function(e,t,n){C.toggle(n)},InsertHorizontalRule:function(){i.execCommand("mceInsertContent",!1,"<hr />")},mceToggleVisualAid:function(){i.hasVisual=!i.hasVisual,i.addVisual()},mceReplaceContent:function(e,t,n){i.execCommand("mceInsertContent",!1,n.replace(/\{\$selection\}/g,v.getContent({format:"text"})))},mceInsertLink:function(e,t,n){var o;"string"==typeof n&&(n={href:n}),o=g.getParent(v.getNode(),"a"),n.href=n.href.replace(" ","%20"),o&&n.href||C.remove("link"),
n.href&&C.apply("link",n,o)},selectAll:function(){var e=g.getRoot(),t=g.createRng();v.getRng().setStart?(t.setStart(e,0),t.setEnd(e,e.childNodes.length),v.setRng(t)):l("SelectAll")}}),d({"JustifyLeft,JustifyCenter,JustifyRight,JustifyFull":function(t){var n="align"+t.substring(7),r=v.isCollapsed()?[g.getParent(v.getNode(),g.isBlock)]:v.getSelectedBlocks(),i=e.map(r,function(e){return!!C.matchNode(e,n)});return-1!==e.inArray(i,o)},"Bold,Italic,Underline,Strikethrough,Superscript,Subscript":function(e){return u(e)},mceBlockQuote:function(){return u("blockquote")},Outdent:function(){var e;if(b.inline_styles){if((e=g.getParent(v.getStart(),g.isBlock))&&parseInt(e.style.paddingLeft)>0)return o;if((e=g.getParent(v.getEnd(),g.isBlock))&&parseInt(e.style.paddingLeft)>0)return o}return s("InsertUnorderedList")||s("InsertOrderedList")||!b.inline_styles&&!!g.getParent(v.getNode(),"BLOCKQUOTE")},"InsertUnorderedList,InsertOrderedList":function(e){var t=g.getParent(v.getNode(),"ul,ol");return t&&("insertunorderedlist"===e&&"UL"===t.tagName||"insertorderedlist"===e&&"OL"===t.tagName)}},"state"),d({"FontSize,FontName":function(e){var t,n=0;return(t=g.getParent(v.getNode(),"span"))&&(n="fontsize"==e?t.style.fontSize:t.style.fontFamily.replace(/, /g,",").replace(/[\'\"]/g,"").toLowerCase()),n}},"value"),d({Undo:function(){i.undoManager.undo()},Redo:function(){i.undoManager.redo()}})}}(tinymce),function(e){var t=e.util.Dispatcher;e.UndoManager=function(n){function o(){return e.trim(n.getContent({format:"raw",no_events:1}).replace(/<span[^>]+data-mce-bogus[^>]+>[\u200B\uFEFF]+<\/span>/g,""))}function r(){i.typing=!1,i.add()}var i,a,s,c,d,l=0,u=[];return onBeforeAdd=new t(i),s=new t(i),c=new t(i),d=new t(i),s.add(function(e,t){return e.hasUndo()?n.onChange.dispatch(n,t,e):void 0}),c.add(function(e,t){return n.onUndo.dispatch(n,t,e)}),d.add(function(e,t){return n.onRedo.dispatch(n,t,e)}),n.onInit.add(function(){i.add()}),n.onBeforeExecCommand.add(function(e,t,n,o,r){"Undo"==t||"Redo"==t||"mceRepaint"==t||r&&r.skip_undo||i.beforeChange()}),n.onExecCommand.add(function(e,t,n,o,r){"Undo"==t||"Redo"==t||"mceRepaint"==t||r&&r.skip_undo||i.add()}),n.onSaveContent.add(r),n.dom.bind(n.dom.getRoot(),"dragend",r),n.dom.bind(n.getBody(),"focusout",function(){!n.removed&&i.typing&&r()}),n.onKeyUp.add(function(e,t){var n=t.keyCode;(n>=33&&36>=n||n>=37&&40>=n||45==n||13==n||t.ctrlKey)&&r()}),n.onKeyDown.add(function(e,t){var n=t.keyCode;return n>=33&&36>=n||n>=37&&40>=n||45==n?void(i.typing&&r()):void((16>n||n>20)&&224!=n&&91!=n&&!i.typing&&(i.beforeChange(),i.typing=!0,i.add()))}),n.onMouseDown.add(function(){i.typing&&r()}),n.addShortcut("ctrl+z","undo_desc","Undo"),n.addShortcut("ctrl+y","redo_desc","Redo"),i={data:u,typing:!1,onBeforeAdd:onBeforeAdd,onAdd:s,onUndo:c,onRedo:d,beforeChange:function(){a=n.selection.getBookmark(2,!0)},add:function(e){var t,r,s=n.settings;if(e=e||{},e.content=o(),i.onBeforeAdd.dispatch(i,e),(r=u[l])&&r.content==e.content)return null;if(u[l]&&(u[l].beforeBookmark=a),s.custom_undo_redo_levels&&u.length>s.custom_undo_redo_levels){for(t=0;t<u.length-1;t++)u[t]=u[t+1];u.length--,l=u.length}return e.bookmark=n.selection.getBookmark(2,!0),l<u.length-1&&(u.length=l+1),u.push(e),l=u.length-1,i.onAdd.dispatch(i,e),n.isNotDirty=0,e},undo:function(){var e;return i.typing&&(i.add(),i.typing=!1),l>0&&(e=u[--l],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.beforeBookmark),i.onUndo.dispatch(i,e)),e},redo:function(){var e;return l<u.length-1&&(e=u[++l],n.setContent(e.content,{format:"raw"}),n.selection.moveToBookmark(e.bookmark),i.onRedo.dispatch(i,e)),e},clear:function(){u=[],l=0,i.typing=!1},hasUndo:function(){return l>0||this.typing},hasRedo:function(){return l<u.length-1&&!this.typing}}}}(tinymce),tinymce.ForceBlocks=function(e){function t(){var t,a,s,c,d,l,u,f,p,m=r.getStart(),h=e.getBody(),g=-16777215;if(m&&1===m.nodeType&&n.forced_root_block){for(;m&&m!=h;){if(i[m.nodeName])return;m=m.parentNode}for(t=r.getRng(),t.setStart?(a=t.startContainer,s=t.startOffset,c=t.endContainer,d=t.endOffset):(t.item&&(m=t.item(0),t=e.getDoc().body.createTextRange(),t.moveToElementText(m)),p=t.parentElement().ownerDocument===e.getDoc(),tmpRng=t.duplicate(),tmpRng.collapse(!0),s=-1*tmpRng.move("character",g),tmpRng.collapsed||(tmpRng=t.duplicate(),tmpRng.collapse(!1),d=-1*tmpRng.move("character",g)-s)),m=h.firstChild;m;)if(3===m.nodeType||1==m.nodeType&&!i[m.nodeName]){if(3===m.nodeType&&0==m.nodeValue.length){u=m,m=m.nextSibling,o.remove(u);continue}l||(l=o.create(n.forced_root_block),m.parentNode.insertBefore(l,m),f=!0),u=m,m=m.nextSibling,l.appendChild(u)}else l=null,m=m.nextSibling;if(f){if(t.setStart)t.setStart(a,s),t.setEnd(c,d),r.setRng(t);else if(p)try{t=e.getDoc().body.createTextRange(),t.moveToElementText(h),t.collapse(!0),t.moveStart("character",s),d>0&&t.moveEnd("character",d),t.select()}catch(e){}e.nodeChanged()}}}var n=e.settings,o=e.dom,r=e.selection,i=e.schema.getBlockElements();n.forced_root_block&&(e.onKeyUp.add(t),e.onNodeChange.add(t))},function(e){var t=(e.DOM,e.dom.Event),n=e.each,o=e.extend;e.create("tinymce.ControlManager",{ControlManager:function(t,o){var r=this;o=o||{},r.editor=t,r.controls={},r.onAdd=new e.util.Dispatcher(r),r.onPostRender=new e.util.Dispatcher(r),r.prefix=o.prefix||t.id+"_",r._cls={},r.onPostRender.add(function(){n(r.controls,function(e){e.postRender()})})},get:function(e){return this.controls[this.prefix+e]||this.controls[e]},setActive:function(e,t){var n=null;return(n=this.get(e))&&n.setActive(t),n},setDisabled:function(e,t){var n=null;return(n=this.get(e))&&n.setDisabled(t),n},add:function(e){var t=this;return e&&(t.controls[e.id]=e,t.onAdd.dispatch(e,t)),e},createControl:function(e){var t,o,r,i,a=this,s=a.editor;for(a.controlFactories||(a.controlFactories=[],n(s.plugins,function(e){e.createControl&&a.controlFactories.push(e)})),i=a.controlFactories,o=0,r=i.length;r>o;o++)if(t=i[o].createControl(e,a))return a.add(t);return"|"===e||"separator"===e?a.createSeparator():s.buttons&&(t=s.buttons[e])?a.createButton(e,t):a.add(t)},createDropMenu:function(t,n,r){var i,a,s,c,d=this,l=d.editor;return n=o({"class":"mceDropDown",constrain:l.settings.constrain_menus},n),n["class"]=n["class"]+" "+l.getParam("skin")+"Skin",(s=l.getParam("skin_variant"))&&(n["class"]+=" "+l.getParam("skin")+"Skin"+s.substring(0,1).toUpperCase()+s.substring(1)),n["class"]+="rtl"==l.settings.directionality?" mceRtl":"",t=d.prefix+t,c=r||d._cls.dropmenu||e.ui.DropMenu,i=d.controls[t]=new c(t,n),i.onAddItem.add(function(e,t){var n=t.settings;n.title=l.getLang(n.title,n.title),n.onclick||(n.onclick=function(){n.cmd&&l.execCommand(n.cmd,n.ui||!1,n.value)})}),l.onRemove.add(function(){i.destroy()}),e.isIE&&(i.onShowMenu.add(function(){l.focus(),a=l.selection.getBookmark(1)}),i.onHideMenu.add(function(){a&&(l.selection.moveToBookmark(a),a=0)})),d.add(i)},createListBox:function(n,r,i){function a(t){return t.settings.use_accessible_selects&&!e.isGecko}var s,c,d=this,l=d.editor;return d.get(n)?null:(r.title=l.translate(r.title),r.scope=r.scope||l,r.onselect||(r.onselect=function(e){l.execCommand(r.cmd,r.ui||!1,e||r.value)}),r=o({title:r.title,"class":"mce_"+n,scope:r.scope,control_manager:d},r),n=d.prefix+n,l.settings.use_native_selects||a(l)?s=new e.ui.NativeListBox(n,r):(c=i||d._cls.listbox||e.ui.ListBox,s=new c(n,r,l)),d.controls[n]=s,e.isWebKit&&s.onPostRender.add(function(e,n){t.add(n,"mousedown",function(){l.bookmark=l.selection.getBookmark(1)}),t.add(n,"focus",function(){l.selection.moveToBookmark(l.bookmark),l.bookmark=null})}),s.hideMenu&&l.onMouseDown.add(s.hideMenu,s),d.add(s))},createButton:function(t,n,r){var i,a,s=this,c=s.editor;return s.get(t)?null:(n.title=c.translate(n.title),n.label=c.translate(n.label),n.scope=n.scope||c,n.onclick||n.menu_button||(n.onclick=function(){c.execCommand(n.cmd,n.ui||!1,n.value)}),n=o({title:n.title,"class":"mce_"+t,unavailable_prefix:c.getLang("unavailable",""),scope:n.scope,control_manager:s},n),t=s.prefix+t,n.menu_button?(a=r||s._cls.menubutton||e.ui.MenuButton,i=new a(t,n,c),c.onMouseDown.add(i.hideMenu,i)):(a=s._cls.button||e.ui.Button,i=new a(t,n,c)),s.add(i))},createMenuButton:function(e,t,n){return t=t||{},t.menu_button=1,this.createButton(e,t,n)},createSplitButton:function(t,n,r){var i,a,s=this,c=s.editor;return s.get(t)?null:(n.title=c.translate(n.title),n.scope=n.scope||c,n.onclick||(n.onclick=function(e){c.execCommand(n.cmd,n.ui||!1,e||n.value)}),n.onselect||(n.onselect=function(e){c.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=o({title:n.title,"class":"mce_"+t,scope:n.scope,control_manager:s},n),t=s.prefix+t,a=r||s._cls.splitbutton||e.ui.SplitButton,i=s.add(new a(t,n,c)),c.onMouseDown.add(i.hideMenu,i),i)},createColorSplitButton:function(t,n,r){var i,a,s,c=this,d=c.editor;return c.get(t)?null:(n.title=d.translate(n.title),n.scope=n.scope||d,n.onclick||(n.onclick=function(t){e.isIE&&(s=d.selection.getBookmark(1)),d.execCommand(n.cmd,n.ui||!1,t||n.value)}),n.onselect||(n.onselect=function(e){d.execCommand(n.cmd,n.ui||!1,e||n.value)}),n=o({title:n.title,"class":"mce_"+t,menu_class:d.getParam("skin")+"Skin",scope:n.scope,more_colors_title:d.getLang("more_colors")},n),t=c.prefix+t,a=r||c._cls.colorsplitbutton||e.ui.ColorSplitButton,i=new a(t,n,d),d.onMouseDown.add(i.hideMenu,i),d.onRemove.add(function(){i.destroy()}),e.isIE&&(i.onShowMenu.add(function(){d.focus(),s=d.selection.getBookmark(1)}),i.onHideMenu.add(function(){s&&(d.selection.moveToBookmark(s),s=0)})),c.add(i))},createToolbar:function(t,n,o){var r,i,a=this;return t=a.prefix+t,i=o||a._cls.toolbar||e.ui.Toolbar,r=new i(t,n,a.editor),a.get(t)?null:a.add(r)},createToolbarGroup:function(t,n,o){var r,i,a=this;return t=a.prefix+t,i=o||this._cls.toolbarGroup||e.ui.ToolbarGroup,r=new i(t,n,a.editor),a.get(t)?null:a.add(r)},createSeparator:function(t){return new(t||this._cls.separator||e.ui.Separator)},setControlType:function(e,t){return this._cls[e.toLowerCase()]=t},destroy:function(){n(this.controls,function(e){e.destroy()}),this.controls=null}})}(tinymce),function(e){var t=e.util.Dispatcher,n=e.each,o=e.isIE,r=e.isOpera;e.create("tinymce.WindowManager",{WindowManager:function(e){var n=this;n.editor=e,n.onOpen=new t(n),n.onClose=new t(n),n.params={},n.features={}},open:function(t,i){var a,s,c,d,l=this,u="",f="modal"==l.editor.settings.dialog_type,p=e.DOM.getViewPort();t=t||{},i=i||{},s=r?p.w:screen.width,c=r?p.h:screen.height,t.name=t.name||"mc_"+(new Date).getTime(),t.width=parseInt(t.width||320),t.height=parseInt(t.height||240),t.resizable=!0,t.left=t.left||parseInt(s/2)-t.width/2,t.top=t.top||parseInt(c/2)-t.height/2,i.inline=!1,i.mce_width=t.width,i.mce_height=t.height,i.mce_auto_focus=t.auto_focus,f&&o&&(t.center=!0,t.help=!1,t.dialogWidth=t.width+"px",t.dialogHeight=t.height+"px",t.scroll=t.scrollbars||!1),n(t,function(t,n){e.is(t,"boolean")&&(t=t?"yes":"no"),/^(name|url)$/.test(n)||(u+=o&&f?(u?";":"")+n+":"+t:(u?",":"")+n+"="+t)}),l.features=t,l.params=i,l.onOpen.dispatch(l,t,i),d=t.url||t.file,d=e._addVer(d);try{o&&f?(a=1,window.showModalDialog(d,window,u)):a=window.open(d,t.name,u)}catch(e){}a||alert(l.editor.getLang("popup_blocked"))},close:function(e){e.close(),this.onClose.dispatch(this)},createInstance:function(t,n,o,r,i,a){return new(e.resolve(t))(n,o,r,i,a)},confirm:function(e,t,n,o){o=o||window,t.call(n||this,o.confirm(this._decode(this.editor.getLang(e,e))))},alert:function(e,t,n,o){var r=this;o=o||window,o.alert(r._decode(r.editor.getLang(e,e))),t&&t.call(n||r)},resizeBy:function(e,t,n){n.resizeBy(e,t)},_decode:function(t){return e.DOM.decode(t).replace(/\\n/g,"\n")}})}(tinymce),function(e){e.Formatter=function(t){function n(e){return e.nodeType&&(e=e.nodeName),!!t.schema.getTextBlockElements()[e.toLowerCase()]}function o(e,t){return P.getParents(e,t,P.getRoot())}function r(e){return 1===e.nodeType&&"_mce_caret"===e.id}function i(){c({alignleft:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"left"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"left"}}],aligncenter:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"center"},defaultBlock:"div"},{selector:"img",collapsed:!1,styles:{display:"block",marginLeft:"auto",marginRight:"auto"}},{selector:"table",collapsed:!1,styles:{marginLeft:"auto",marginRight:"auto"}}],alignright:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"right"},defaultBlock:"div"},{selector:"img,table",collapsed:!1,styles:{"float":"right"}}],alignfull:[{selector:"figure,p,h1,h2,h3,h4,h5,h6,td,th,div,ul,ol,li",styles:{textAlign:"justify"},defaultBlock:"div"}],bold:[{inline:"strong",remove:"all"},{inline:"span",styles:{fontWeight:"bold"}},{inline:"b",remove:"all"}],italic:[{inline:"em",remove:"all"},{inline:"span",styles:{fontStyle:"italic"}},{inline:"i",remove:"all"}],underline:[{inline:"span",styles:{textDecoration:"underline"},exact:!0},{inline:"u",remove:"all"}],strikethrough:[{inline:"span",styles:{textDecoration:"line-through"},exact:!0},{inline:"strike",remove:"all"}],forecolor:{inline:"span",styles:{color:"%value"},wrap_links:!1},hilitecolor:{inline:"span",styles:{backgroundColor:"%value"},wrap_links:!1},fontname:{inline:"span",styles:{fontFamily:"%value"}},fontsize:{inline:"span",styles:{fontSize:"%value"}},fontsize_class:{inline:"span",attributes:{"class":"%value"}},blockquote:{block:"blockquote",wrapper:1,remove:"all"},subscript:{inline:"sub"},superscript:{inline:"sup"},link:{inline:"a",selector:"a",remove:"all",split:!0,deep:!0,onmatch:function(){return!0},onformat:function(e,t,n){D(n,function(t,n){P.setAttrib(e,n,t)})}},removeformat:[{selector:"b,strong,em,i,font,u,strike",remove:"all",split:!0,expand:!1,block_expand:!0,deep:!0},{selector:"span",attributes:["style","class"],remove:"empty",split:!0,expand:!1,deep:!0},{selector:"*",attributes:["style","class"],split:!1,expand:!1,deep:!0}]}),D("p h1 h2 h3 h4 h5 h6 div address pre div code dt dd samp".split(/\s/),function(e){c(e,{block:e,remove:"all"})}),c(t.settings.formats)}function a(){t.addShortcut("ctrl+b","bold_desc","Bold"),t.addShortcut("ctrl+i","italic_desc","Italic"),t.addShortcut("ctrl+u","underline_desc","Underline");for(var e=1;6>=e;e++)t.addShortcut("ctrl+"+e,"",["FormatBlock",!1,"h"+e]);t.addShortcut("ctrl+7","",["FormatBlock",!1,"p"]),t.addShortcut("ctrl+8","",["FormatBlock",!1,"div"]),t.addShortcut("ctrl+9","",["FormatBlock",!1,"address"])}function s(e){return e?I[e]:I}function c(e,t){e&&("string"!=typeof e?D(e,function(e,t){c(t,e)}):(t=t.length?t:[t],D(t,function(e){e.deep===L&&(e.deep=!e.selector),e.split===L&&(e.split=!e.selector||e.inline),e.remove===L&&e.selector&&!e.inline&&(e.remove="none"),e.selector&&e.inline&&(e.mixed=!0,e.block_expand=!0),"string"==typeof e.classes&&(e.classes=e.classes.split(/\s+/))}),I[e]=t))}function d(o,i,a){function c(e,t){t=t||b,e&&(t.onformat&&t.onformat(e,t,i,a),D(t.styles,function(t,n){P.setStyle(e,n,C(t,i))}),D(t.attributes,function(t,n){P.setAttrib(e,n,C(t,i))}),D(t.classes,function(t){t=C(t,i),P.hasClass(e,t)||P.addClass(e,t)}))}function l(){function e(e,t){var n=new H(t);for(a=n.current();a;a=n.prev())if(a.childNodes.length>1||a==e||"BR"==a.tagName)return a}var n=t.selection.getRng(),o=n.startContainer,r=n.endContainer;if(o!=r&&0===n.endOffset){var i=e(o,r),s=3==i.nodeType?i.length:i.childNodes.length;n.setEnd(i,s)}return n}function u(t,n,o,r,i){var a,s,c=[],d=-1,l=-1,u=-1;return D(t.childNodes,function(e,t){return"UL"===e.nodeName||"OL"===e.nodeName?(d=t,a=e,!1):void 0}),D(t.childNodes,function(e,t){"SPAN"===e.nodeName&&"bookmark"==P.getAttrib(e,"data-mce-type")&&(e.id==n.id+"_start"?l=t:e.id==n.id+"_end"&&(u=t))}),0>=d||d>l&&u>d?(D(e.grep(t.childNodes),i),0):(s=P.clone(o,j),D(e.grep(t.childNodes),function(e,t){(d>l&&d>t||l>d&&t>d)&&(c.push(e),e.parentNode.removeChild(e))}),d>l?t.insertBefore(s,a):l>d&&t.insertBefore(s,a.nextSibling),r.push(s),D(c,function(e){s.appendChild(e)}),s)}function p(t,a,s){var d,l,p=[],m=!0;d=b.inline||b.block,l=P.create(d),c(l),F.walk(t,function(t){function h(t){var C,x,E,S,k;return k=m,C=t.nodeName.toLowerCase(),x=t.parentNode.nodeName.toLowerCase(),1===t.nodeType&&G(t)&&(k=m,m="true"===G(t),S=!0),y(C,"br")?(v=0,void(b.block&&P.remove(t))):b.wrapper&&f(t,o,i)?void(v=0):m&&!S&&b.block&&!b.wrapper&&n(C)?(t=P.rename(t,d),c(t),p.push(t),void(v=0)):b.selector&&(D(g,function(e){"collapsed"in e&&e.collapsed!==_||P.is(t,e.selector)&&!r(t)&&(c(t,e),E=!0)}),!b.inline||E)?void(v=0):void(!m||S||!U(d,C)||!U(x,d)||!s&&3===t.nodeType&&1===t.nodeValue.length&&65279===t.nodeValue.charCodeAt(0)||r(t)||b.inline&&V(t)?"li"==C&&a?v=u(t,a,l,p,h):(v=0,D(e.grep(t.childNodes),h),S&&(m=k),v=0):(v||(v=P.clone(l,j),t.parentNode.insertBefore(v,t),p.push(v)),v.appendChild(t)))}var v;D(t,h)}),!1===b.wrap_links&&D(p,function(t){function n(t){var o,r,i;if("A"===t.nodeName){for(r=P.clone(l,j),p.push(r),i=e.grep(t.childNodes),o=0;o<i.length;o++)r.appendChild(i[o]);t.appendChild(r)}D(e.grep(t.childNodes),n)}n(t)}),D(p,function(e){function t(e){var t=0;return D(e.childNodes,function(e){x(e)||N(e)||t++}),t}function n(e){var t,n;return D(e.childNodes,function(e){return 1!=e.nodeType||N(e)||r(e)?void 0:(t=e,j)}),t&&v(t,b)&&(n=P.clone(t,j),c(n),P.replace(n,e,W),P.remove(t,1)),n||e}var a;if(a=t(e),(p.length>1||!V(e))&&0===a)return void P.remove(e,1);if(b.inline||b.wrapper){if(b.exact||1!==a||(e=n(e)),D(g,function(t){D(P.select(t.inline,e),function(e){var n;if(!1===t.wrap_links){n=e.parentNode;do{if("A"===n.nodeName)return}while(n=n.parentNode)}S(t,i,e,t.exact?e:null)})}),f(e.parentNode,o,i))return P.remove(e,1),e=0,W;b.merge_with_parents&&P.getParent(e.parentNode,function(t){return f(t,o,i)?(P.remove(e,1),e=0,W):void 0}),e&&!1!==b.merge_siblings&&(e=T(w(e),e),e=T(e,w(e,W)))}})}var m,h,g=s(o),b=g[0],_=O.isCollapsed();if(b)if(a)a.nodeType?(h=P.createRng(),h.setStartBefore(a),h.setEndAfter(a),p(E(h,g),null,!0)):p(a,null,!0);else if(_&&b.inline&&!P.select("td.mceSelected,th.mceSelected").length)B("apply",o,i);else{var k=t.selection.getNode();z||!g[0].defaultBlock||P.getParent(k,P.isBlock)||d(g[0].defaultBlock),t.selection.setRng(l()),m=O.getBookmark(),p(E(O.getRng(W),g),m),b.styles&&(b.styles.color||b.styles.textDecoration)&&(e.walk(k,X,"childNodes"),X(k)),O.moveToBookmark(m),M(O.getRng(W)),t.nodeChanged()}}function l(n,r,i){function a(t){var n,o,i,s,c;if(3!==t.nodeType){if(1===t.nodeType&&G(t)&&(s=b,b="true"===G(t),c=!0),n=e.grep(t.childNodes),b&&!c)for(o=0,i=v.length;i>o&&!S(v[o],r,t,t);o++);if(y.deep&&n.length){for(o=0,i=n.length;i>o;o++)a(n[o]);c&&(b=s)}}}function c(e){var t;return D(o(e.parentNode).reverse(),function(e){var o;t||"_start"==e.id||"_end"==e.id||(o=f(e,n,r))&&!1!==o.split&&(t=e)}),t}function d(e,t,n,o){var i,a,s,c,d,l;if(e){for(l=e.parentNode,i=t.parentNode;i&&i!=l;i=i.parentNode){for(a=P.clone(i,j),d=0;d<v.length;d++)if(S(v[d],r,a,a)){a=0;break}a&&(s&&a.appendChild(s),c||(c=a),s=a)}!o||y.mixed&&V(e)||(t=P.split(e,t)),s&&(n.parentNode.insertBefore(s,n),c.appendChild(n))}return t}function l(e){return d(c(e),e,e,!0)}function u(e){var t=P.get(e?"_start":"_end"),n=t[e?"firstChild":"lastChild"];return N(n)&&(n=n[e?"firstChild":"lastChild"]),P.remove(t,!0),n}function m(e){var n,o;e=E(e,v,W),y.split&&(n=A(e,W),o=A(e),n!=o?(/^(TR|TD)$/.test(n.nodeName)&&n.firstChild&&(n=("TD"==n.nodeName?n.firstChild:n.firstChild.firstChild)||n),n=_(n,"span",{id:"_start","data-mce-type":"bookmark"}),o=_(o,"span",{id:"_end","data-mce-type":"bookmark"}),l(n),l(o),n=u(W),o=u()):n=o=l(n),e.startContainer=n.parentNode,e.startOffset=q(n),e.endContainer=o.parentNode,e.endOffset=q(o)+1),F.walk(e,function(e){D(e,function(e){a(e),1===e.nodeType&&"underline"===t.dom.getStyle(e,"text-decoration")&&e.parentNode&&"underline"===Y(e.parentNode)&&S({deep:!1,exact:!0,inline:"span",styles:{textDecoration:"underline"}},null,e)})})}var h,g,v=s(n),y=v[0],b=!0;return i?void(i.nodeType?(g=P.createRng(),g.setStartBefore(i),g.setEndAfter(i),m(g)):m(i)):void(O.isCollapsed()&&y.inline&&!P.select("td.mceSelected,th.mceSelected").length?B("remove",n,r):(h=O.getBookmark(),m(O.getRng(W)),O.moveToBookmark(h),y.inline&&p(n,r,O.getStart())&&M(O.getRng(!0)),t.nodeChanged()))}function u(e,t,n){var o=s(e);!p(e,t,n)||"toggle"in o[0]&&!o[0].toggle?d(e,t,n):l(e,t,n)}function f(e,t,n,o){function r(e,t,r){var i,a,s,c=t[r];if(t.onmatch)return t.onmatch(e,t,r);if(c)if(c.length===L){for(i in c)if(c.hasOwnProperty(i)){if(a="attributes"===r?P.getAttrib(e,i):b(e,i),o&&!a&&!t.exact)return;if((!o||t.exact)&&!y(a,C(c[i],n)))return}}else for(s=0;s<c.length;s++)if("attributes"===r?P.getAttrib(e,c[s]):b(e,c[s]))return t;return t}var i,a,c,d=s(t);if(d&&e)for(a=0;a<d.length;a++)if(i=d[a],v(e,i)&&r(e,i,"attributes")&&r(e,i,"styles")){if(c=i.classes)for(a=0;a<c.length;a++)if(!P.hasClass(e,c[a]))return;return i}}function p(e,t,n){function o(n){return n=P.getParent(n,function(n){return!!f(n,e,t,!0)}),f(n,e,t)}var r;return n?o(n):(n=O.getNode(),o(n)?W:(r=O.getStart(),r!=n&&o(r)?W:j))}function m(e,t){var n,o=[],r={};return n=O.getStart(),P.getParent(n,function(n){var i,a;for(i=0;i<e.length;i++)a=e[i],!r[a]&&f(n,a,t)&&(r[a]=!0,o.push(a))},P.getRoot()),o}function h(e){var t,n,r,i,a,c=s(e);if(c)for(t=O.getStart(),n=o(t),i=c.length-1;i>=0;i--){if(!(a=c[i].selector))return W;for(r=n.length-1;r>=0;r--)if(P.is(n[r],a))return W}return j}function g(e,n,r){var i;return R||(R={},i={},t.onNodeChange.addToTop(function(e,t,n){var r=o(n),a={};D(R,function(e,t){D(r,function(n){return f(n,t,{},e.similar)?(i[t]||(D(e,function(e){e(!0,{node:n,format:t,parents:r})}),i[t]=e),a[t]=e,!1):void 0})}),D(i,function(e,t){a[t]||(delete i[t],D(e,function(e){e(!1,{node:n,format:t,parents:r})}))})})),D(e.split(","),function(e){R[e]||(R[e]=[],R[e].similar=r),R[e].push(n)}),this}function v(e,t){return y(e,t.inline)?W:y(e,t.block)?W:t.selector?P.is(e,t.selector):void 0}function y(e,t){return e=e||"",t=t||"",e=""+(e.nodeName||e),t=""+(t.nodeName||t),e.toLowerCase()==t.toLowerCase()}function b(e,t){var n=P.getStyle(e,t);return("color"==t||"backgroundColor"==t)&&(n=P.toHex(n)),"fontWeight"==t&&700==n&&(n="bold"),""+n}function C(e,t){return"string"!=typeof e?e=e(t):t&&(e=e.replace(/%(\w+)/g,function(e,n){return t[n]||e})),e}function x(e){return e&&3===e.nodeType&&/^([\t \r\n]+|)$/.test(e.nodeValue)}function _(e,t,n){var o=P.create(t,n);return e.parentNode.insertBefore(o,e),o.appendChild(e),o}function E(e,r,i){function a(e){function t(e){return"BR"==e.nodeName&&e.getAttribute("data-mce-bogus")&&!e.nextSibling}var n,o,i,a,s;if(n=o=e?h:v,a=e?"previousSibling":"nextSibling",s=P.getRoot(),3==n.nodeType&&!x(n)&&(e?g>0:b<n.nodeValue.length))return n;for(;;){if(!r[0].block_expand&&V(o))return o;for(i=o[a];i;i=i[a])if(!N(i)&&!x(i)&&!t(i))return o;if(o.parentNode==s){n=o;break}o=o.parentNode}return n}function s(e,t){for(t===L&&(t=3===e.nodeType?e.length:e.childNodes.length);e&&e.hasChildNodes();)(e=e.childNodes[t])&&(t=3===e.nodeType?e.length:e.childNodes.length);return{node:e,offset:t}}function c(e){for(var t=e;t;){if(1===t.nodeType&&G(t))return"false"===G(t)?t:e;t=t.parentNode}return e}function d(e,n,o){function r(e,t){var n,r,a=e.nodeValue;return void 0===t&&(t=o?a.length:0),o?(n=a.lastIndexOf(" ",t),r=a.lastIndexOf("\xa0",t),-1===(n=n>r?n:r)||i||n++):(n=a.indexOf(" ",t),r=a.indexOf("\xa0",t),n=-1!==n&&(-1===r||r>n)?n:r),n}var a,s,c,d;if(3===e.nodeType){if(-1!==(c=r(e,n)))return{container:e,offset:c};d=e}for(a=new H(e,P.getParent(e,V)||t.getBody());s=a[o?"prev":"next"]();)if(3===s.nodeType){if(d=s,-1!==(c=r(s)))return{container:s,offset:c}}else if(V(s))break;return d?(n=o?0:d.length,{container:d,offset:n}):void 0}function l(t,n){var i,a,s,c;for(3==t.nodeType&&0===t.nodeValue.length&&t[n]&&(t=t[n]),i=o(t),a=0;a<i.length;a++)for(s=0;s<r.length;s++)if(!("collapsed"in(c=r[s])&&c.collapsed!==e.collapsed)&&P.is(i[a],c.selector))return i[a];return t}function u(e,t){var i;if(r[0].wrapper||(i=P.getParent(e,r[0].block)),i||(i=P.getParent(3==e.nodeType?e.parentNode:e,n)),i&&r[0].wrapper&&(i=o(i,"ul,ol").reverse()[0]||i),!i)for(i=e;i[t]&&!V(i[t])&&(i=i[t],!y(i,"br")););return i||e}var f,p,m,h=e.startContainer,g=e.startOffset,v=e.endContainer,b=e.endOffset;if(1==h.nodeType&&h.hasChildNodes()&&(f=h.childNodes.length-1,h=h.childNodes[g>f?f:g],3==h.nodeType&&(g=0)),1==v.nodeType&&v.hasChildNodes()&&(f=v.childNodes.length-1,v=v.childNodes[b>f?f:b-1],3==v.nodeType&&(b=v.nodeValue.length)),h=c(h),v=c(v),(N(h.parentNode)||N(h))&&(h=N(h)?h:h.parentNode,h=h.nextSibling||h,3==h.nodeType&&(g=0)),(N(v.parentNode)||N(v))&&(v=N(v)?v:v.parentNode,v=v.previousSibling||v,3==v.nodeType&&(b=v.length)),r[0].inline&&(e.collapsed&&(m=d(h,g,!0),m&&(h=m.container,g=m.offset),(m=d(v,b))&&(v=m.container,b=m.offset)),p=s(v,b),p.node)){for(;p.node&&0===p.offset&&p.node.previousSibling;)p=s(p.node.previousSibling);p.node&&p.offset>0&&3===p.node.nodeType&&" "===p.node.nodeValue.charAt(p.offset-1)&&p.offset>1&&(v=p.node,v.splitText(p.offset-1))}return(r[0].inline||r[0].block_expand)&&(r[0].inline&&3==h.nodeType&&0!==g||(h=a(!0)),r[0].inline&&3==v.nodeType&&b!==v.nodeValue.length||(v=a())),r[0].selector&&r[0].expand!==j&&!r[0].inline&&(h=l(h,"previousSibling"),v=l(v,"nextSibling")),(r[0].block||r[0].selector)&&(h=u(h,"previousSibling"),v=u(v,"nextSibling"),r[0].block&&(V(h)||(h=a(!0)),V(v)||(v=a()))),1==h.nodeType&&(g=q(h),h=h.parentNode),1==v.nodeType&&(b=q(v)+1,v=v.parentNode),{startContainer:h,startOffset:g,endContainer:v,endOffset:b}}function S(e,t,n,o){var r,i,a;if(!v(n,e))return j;if("all"!=e.remove)for(D(e.styles,function(e,r){e=C(e,t),"number"==typeof r&&(r=e,o=0),(!o||y(b(o,r),e))&&P.setStyle(n,r,""),a=1}),a&&""==P.getAttrib(n,"style")&&(n.removeAttribute("style"),n.removeAttribute("data-mce-style")),D(e.attributes,function(e,r){var i;if(e=C(e,t),"number"==typeof r&&(r=e,o=0),!o||y(P.getAttrib(o,r),e)){if("class"==r&&(e=P.getAttrib(n,r))&&(i="",D(e.split(/\s+/),function(e){/mce\w+/.test(e)&&(i+=(i?" ":"")+e)}),i))return void P.setAttrib(n,r,i);"class"==r&&n.removeAttribute("className"),$.test(r)&&n.removeAttribute("data-mce-"+r),n.removeAttribute(r)}}),D(e.classes,function(e){e=C(e,t),(!o||P.hasClass(o,e))&&P.removeClass(n,e)}),i=P.getAttribs(n),r=0;r<i.length;r++)if(0!==i[r].nodeName.indexOf("_"))return j;return"none"!=e.remove?(k(n,e),W):void 0}function k(t,n){function o(e,t,n){return!(e=w(e,t,n))||"BR"==e.nodeName||V(e)}var r,i=t.parentNode;n.block&&(z?i==P.getRoot()&&(n.list_block&&y(t,n.list_block)||D(e.grep(t.childNodes),function(e){U(z,e.nodeName.toLowerCase())?r?r.appendChild(e):r=_(e,z):r=0})):V(t)&&!V(i)&&(o(t,j)||o(t.firstChild,W,1)||t.insertBefore(P.create("br"),t.firstChild),o(t,W)||o(t.lastChild,j,1)||t.appendChild(P.create("br")))),n.selector&&n.inline&&!y(n.inline,t)||P.remove(t,1)}function w(e,t,n){if(e)for(t=t?"nextSibling":"previousSibling",e=n?e:e[t];e;e=e[t])if(1==e.nodeType||!x(e))return e}function N(e){return e&&1==e.nodeType&&"bookmark"==e.getAttribute("data-mce-type")}function T(t,n){function o(e,t){function n(e){var t={};return D(P.getAttribs(e),function(n){var o=n.nodeName.toLowerCase();0!==o.indexOf("_")&&"style"!==o&&(t[o]=P.getAttrib(e,o))}),t}function o(e,t){var n,o;for(o in e)if(e.hasOwnProperty(o)){if((n=t[o])===L)return j;if(e[o]!=n)return j;delete t[o]}for(o in t)if(t.hasOwnProperty(o))return j;return W}return e.nodeName!=t.nodeName?j:o(n(e),n(t))&&o(P.parseStyle(P.getAttrib(e,"style")),P.parseStyle(P.getAttrib(t,"style")))?W:j}function r(e,t){for(i=e;i;i=i[t]){if(3==i.nodeType&&0!==i.nodeValue.length)return e;if(1==i.nodeType&&!N(i))return i}return e}var i,a;if(t&&n&&(t=r(t,"previousSibling"),n=r(n,"nextSibling"),o(t,n))){for(i=t.nextSibling;i&&i!=n;)a=i,i=i.nextSibling,t.appendChild(a);return P.remove(n),D(e.grep(n.childNodes),function(e){t.appendChild(e)}),t}return n}function A(e,n){var o,r,i;return o=e[n?"startContainer":"endContainer"],r=e[n?"startOffset":"endOffset"],1==o.nodeType&&(i=o.childNodes.length-1,!n&&r&&r--,o=o.childNodes[r>i?i:r]),3===o.nodeType&&n&&r>=o.nodeValue.length&&(o=new H(o,t.getBody()).next()||o),3!==o.nodeType||n||0!==r||(o=new H(o,t.getBody()).prev()||o),o}function B(o,r,i){function a(e){var n=P.create("span",{id:y,"data-mce-bogus":!0,style:b?"color:red":""});return e&&n.appendChild(t.getDoc().createTextNode(K)),n}function c(e,t){for(;e;){if(3===e.nodeType&&e.nodeValue!==K||e.childNodes.length>1)return!1;t&&1===e.nodeType&&t.push(e),e=e.firstChild}return!0}function u(e){for(;e;){if(e.id===y)return e;e=e.parentNode}}function p(e){var t;if(e)for(t=new H(e,e),e=t.current();e;e=t.next())if(3===e.nodeType)return e}function m(e,t){var n,o;if(e)o=O.getRng(!0),c(e)?(!1!==t&&(o.setStartBefore(e),o.setEndBefore(e)),P.remove(e)):(n=p(e),n.nodeValue.charAt(0)===K&&(n=n.deleteData(0,1)),P.remove(e,1)),O.setRng(o);else if(!(e=u(O.getStart())))for(;e=P.get(y);)m(e,!1)}function h(){var e,t,n,o,c,l,f;e=O.getRng(!0),o=e.startOffset,l=e.startContainer,f=l.nodeValue,t=u(O.getStart()),t&&(n=p(t)),f&&o>0&&o<f.length&&/\w/.test(f.charAt(o))&&/\w/.test(f.charAt(o-1))?(c=O.getBookmark(),e.collapse(!0),e=E(e,s(r)),e=F.split(e),d(r,i,e),O.moveToBookmark(c)):(t&&n.nodeValue===K?d(r,i,t):(t=a(!0),n=t.firstChild,e.insertNode(t),o=1,d(r,i,t)),O.setCursorLocation(n,o))}function g(){var e,t,o,c,d,u,p,m,h=O.getRng(!0),g=[];for(e=h.startContainer,t=h.startOffset,d=e,3==e.nodeType&&((t!=e.nodeValue.length||e.nodeValue===K)&&(c=!0),d=d.parentNode);d;){if(f(d,r,i)){u=d;break}d.nextSibling&&(c=!0),g.push(d),d=d.parentNode}if(u)if(c)o=O.getBookmark(),h.collapse(!0),h=E(h,s(r),!0),h=F.split(h),l(r,i,h),O.moveToBookmark(o);else{for(m=a(),d=m,p=g.length-1;p>=0;p--)d.appendChild(P.clone(g[p],!1)),d=d.firstChild;d.appendChild(P.doc.createTextNode(K)),d=d.firstChild;var v=P.getParent(u,n);v&&P.isEmpty(v)?u.parentNode.replaceChild(m,u):P.insertAfter(m,u),O.setCursorLocation(d,1),P.isEmpty(u)&&P.remove(u)}}function v(){var t;(t=u(O.getStart()))&&!P.isEmpty(t)&&e.walk(t,function(e){1!=e.nodeType||e.id===y||P.isEmpty(e)||P.setAttrib(e,"data-mce-bogus",null)},"childNodes")}var y="_mce_caret",b=t.settings.caret_debug;self._hasCaretEvents||(t.onBeforeGetContent.addToTop(function(){var e,t=[];if(c(u(O.getStart()),t))for(e=t.length;e--;)P.setAttrib(t[e],"data-mce-bogus","1")}),e.each("onMouseUp onKeyUp".split(" "),function(e){t[e].addToTop(function(){m(),v()})}),t.onKeyDown.addToTop(function(e,t){var n=t.keyCode;(8==n||37==n||39==n)&&m(u(O.getStart())),v()}),O.onSetContent.add(v),self._hasCaretEvents=!0),"apply"==o?h():g()}function M(e){var t,n,o,r,i,a=e.startContainer,s=e.startOffset;if(3==a.nodeType&&s>=a.nodeValue.length&&(s=q(a),a=a.parentNode,t=!0),1==a.nodeType)for(r=a.childNodes,a=r[Math.min(s,r.length-1)],n=new H(a,P.getParent(a,P.isBlock)),(s>r.length-1||t)&&n.next(),o=n.current();o;o=n.next())if(3==o.nodeType&&!x(o))return i=P.create("a",null,K),o.parentNode.insertBefore(i,o),e.setStart(o,0),O.setRng(e),void P.remove(i)}var R,L,I={},D=e.each,P=t.dom,O=t.selection,H=e.dom.TreeWalker,F=new e.dom.RangeUtils(P),U=t.schema.isValidChild,V=(e.isArray,P.isBlock),z=t.settings.forced_root_block,q=P.nodeIndex,K="\ufeff",$=/^(src|href|style)$/,j=!1,W=!0,G=P.getContentEditable,Y=function(e){var n;return t.dom.getParent(e,function(e){return(n=t.dom.getStyle(e,"text-decoration"))&&"none"!==n}),n},X=function(e){var n;1===e.nodeType&&e.parentNode&&1===e.parentNode.nodeType&&(n=Y(e.parentNode),t.dom.getStyle(e,"color")&&n?t.dom.setStyle(e,"text-decoration",n):t.dom.getStyle(e,"textdecoration")===n&&t.dom.setStyle(e,"text-decoration",null))};e.extend(this,{get:s,register:c,apply:d,remove:l,toggle:u,match:p,matchAll:m,matchNode:f,canApply:h,formatChanged:g}),i(),a()}}(tinymce),tinymce.onAddEditor.add(function(e,t){function n(t,n){e.each(n,function(e,n){e&&a.setStyle(t,n,e)}),a.rename(t,"span")}function o(n,o){a=n.dom,s.convert_fonts_to_spans&&e.each(a.select("font,u,strike",o.node),function(e){r[e.nodeName.toLowerCase()](t.dom,e)})}var r,i,a,s=t.settings;s.inline_styles&&(i=e.explode(s.font_size_legacy_values),r={font:function(e,t){n(t,{backgroundColor:t.style.backgroundColor,color:t.color,fontFamily:t.face,fontSize:i[parseInt(t.size,10)-1]})},u:function(e,t){n(t,{textDecoration:"underline"})},strike:function(e,t){n(t,{textDecoration:"line-through"})}},t.onPreProcess.add(o),t.onSetContent.add(o),t.onInit.add(function(){t.selection.onSetContent.add(o)}))}),function(e){var t=e.dom.TreeWalker;e.EnterKey=function(n){function o(o){function d(e){return e&&r.isBlock(e)&&!/^(TD|TH|CAPTION|FORM)$/.test(e.nodeName)&&!/^(fixed|absolute)/i.test(e.style.position)&&"true"!==r.getContentEditable(e)}function l(t){var n;e.isIE&&!e.isIE11&&r.isBlock(t)&&(n=i.getRng(),t.appendChild(r.create("span",null,"\xa0")),i.select(t),t.lastChild.outerHTML="",i.setRng(n))}function u(e){for(var t,n=e,o=[];n=n.firstChild;){if(r.isBlock(n))return
;1!=n.nodeType||c[n.nodeName.toLowerCase()]||o.push(n)}for(t=o.length;t--;)n=o[t],!n.hasChildNodes()||n.firstChild==n.lastChild&&""===n.firstChild.nodeValue?r.remove(n):"A"==n.nodeName&&" "===(n.innerText||n.textContent)&&r.remove(n)}function f(e){var o,a,s,d,l,u,f=e;if(s=r.createRng(),e.hasChildNodes()){for(o=new t(e,e);a=o.current();){if(3==a.nodeType){s.setStart(a,0),s.setEnd(a,0);break}if(c[a.nodeName.toLowerCase()]){s.setStartBefore(a),s.setEndBefore(a);break}f=a,a=o.next()}a||(s.setStart(f,0),s.setEnd(f,0))}else"BR"==e.nodeName?e.nextSibling&&r.isBlock(e.nextSibling)?((!N||9>N)&&(u=r.create("br"),e.parentNode.insertBefore(u,e)),s.setStartBefore(e),s.setEndBefore(e)):(s.setStartAfter(e),s.setEndAfter(e)):(s.setStart(e,0),s.setEnd(e,0));i.setRng(s),r.remove(u),l=r.getViewPort(n.getWin()),((d=r.getPos(e).y)<l.y||d+25>l.y+l.h)&&n.getWin().scrollTo(0,d<l.y?d:d-l.h+25)}function p(t){var n,o,i,s=S;if(n=t||"TABLE"==R?r.create(t||I):w.cloneNode(!1),i=n,!1!==a.keep_styles)do{if(/^(SPAN|STRONG|B|EM|I|FONT|STRIKE|U)$/.test(s.nodeName)){if("_mce_caret"==s.id)continue;o=s.cloneNode(!1),r.setAttrib(o,"id",""),n.hasChildNodes()?(o.appendChild(n.firstChild),n.appendChild(o)):(i=o,n.appendChild(o))}}while(s=s.parentNode);return(!e.isIE||e.isIE11)&&(i.innerHTML='<br data-mce-bogus="1">'),n}function m(e){var n,o,r;if(3==S.nodeType&&(e?k>0:k<S.nodeValue.length))return!1;if(S.parentNode==w&&D&&!e)return!0;if(e&&1==S.nodeType&&S==w.firstChild)return!0;if("TABLE"===S.nodeName||S.previousSibling&&"TABLE"==S.previousSibling.nodeName)return D&&!e||!D&&e;for(n=new t(S,w),3==S.nodeType&&(e&&0==k?n.prev():e||k!=S.nodeValue.length||n.next());o=n.current();){if(1===o.nodeType){if(!o.getAttribute("data-mce-bogus")&&(r=o.nodeName.toLowerCase(),c[r]&&"br"!==r))return!1}else if(3===o.nodeType&&!/^[ \t\r\n]*$/.test(o.nodeValue))return!1;e?n.prev():n.next()}return!0}function h(e,t){var n,o,i,a,s,c=I||"P";if(!(o=r.getParent(e,r.isBlock))||!d(o)){if(o=o||E,!o.hasChildNodes())return n=r.create(c),o.appendChild(n),P.setStart(n,0),P.setEnd(n,0),n;for(a=e;a.parentNode!=o;)a=a.parentNode;for(;a&&!r.isBlock(a);)i=a,a=a.previousSibling;if(i){for(n=r.create(c),i.parentNode.insertBefore(n,i),a=i;a&&!r.isBlock(a);)s=a.nextSibling,n.appendChild(a),a=s;P.setStart(e,t),P.setEnd(e,t)}}return e}function g(){function e(e){for(var t=M[e?"firstChild":"lastChild"];t&&1!=t.nodeType;)t=t[e?"nextSibling":"previousSibling"];return t===w}A=I?p(I):r.create("BR"),e(!0)&&e()?r.replace(A,M):e(!0)?M.parentNode.insertBefore(A,M):e()?(r.insertAfter(A,M),l(A)):(_=P.cloneRange(),_.setStartAfter(w),_.setEndAfter(M),B=_.extractContents(),r.insertAfter(B,M),r.insertAfter(A,M)),r.remove(w),f(A),s.add()}function v(){for(var e,n=new t(S,w);e=n.next();)if(c[e.nodeName.toLowerCase()]||e.length>0)return!0}function y(){var t,n,o;S&&3==S.nodeType&&k>=S.nodeValue.length&&(e.isIE&&!e.isIE11||v()||(t=r.create("br"),P.insertNode(t),P.setStartAfter(t),P.setEndAfter(t),n=!0)),t=r.create("br"),P.insertNode(t),e.isIE&&!e.isIE11&&"PRE"==R&&(!N||8>N)&&t.parentNode.insertBefore(r.doc.createTextNode("\r"),t),o=r.create("span",{},"&nbsp;"),t.parentNode.insertBefore(o,t),i.scrollIntoView(o),r.remove(o),n?(P.setStartBefore(t),P.setEndBefore(t)):(P.setStartAfter(t),P.setEndAfter(t)),i.setRng(P),s.add()}function b(e){do{3===e.nodeType&&(e.nodeValue=e.nodeValue.replace(/^[\r\n]+/,"")),e=e.firstChild}while(e)}function C(e){var t,n,o=r.getRoot();for(t=e;t!==o&&"false"!==r.getContentEditable(t);)"true"===r.getContentEditable(t)&&(n=t),t=t.parentNode;return t!==o?n:o}function x(t){var n;(!e.isIE||e.isIE11)&&(t.normalize(),(!(n=t.lastChild)||/^(left|right)$/gi.test(r.getStyle(n,"float",!0)))&&r.add(t,"br"))}var _,E,S,k,w,N,T,A,B,M,R,L,I,D,P=i.getRng(!0);if(!P.collapsed)return void n.execCommand("Delete");if(!o.isDefaultPrevented()&&(S=P.startContainer,k=P.startOffset,I=(a.force_p_newlines?"p":"")||a.forced_root_block,I=I?I.toUpperCase():"",N=r.doc.documentMode,T=o.shiftKey,1==S.nodeType&&S.hasChildNodes()&&(D=k>S.childNodes.length-1,S=S.childNodes[Math.min(k,S.childNodes.length-1)]||S,k=D&&3==S.nodeType?S.nodeValue.length:0),E=C(S))){if(s.beforeChange(),!r.isBlock(E)&&E!=r.getRoot())return void((!I||T)&&y());if((I&&!T||!I&&T)&&(S=h(S,k)),w=r.getParent(S,r.isBlock),M=w?r.getParent(w.parentNode,r.isBlock):null,R=w?w.nodeName.toUpperCase():"",L=M?M.nodeName.toUpperCase():"","LI"!=L||o.ctrlKey||(w=M,R=L),"LI"==R){if(!I&&T)return void y();if(r.isEmpty(w))return!/^(UL|OL|LI)$/.test(M.parentNode.nodeName)&&void g()}if("PRE"==R&&!1!==a.br_in_pre){if(!T)return void y()}else if(!I&&!T&&"LI"!=R||I&&T)return void y();I=I||"P",m()?(A=/^(H[1-6]|PRE)$/.test(R)&&"HGROUP"!=L?p(I):p(),a.end_container_on_empty_block&&d(M)&&r.isEmpty(w)?A=r.split(M,w):r.insertAfter(A,w),f(A)):m(!0)?(A=w.parentNode.insertBefore(p(),w),l(A)):(_=P.cloneRange(),_.setEndAfter(w),B=_.extractContents(),b(B),A=B.firstChild,r.insertAfter(B,w),u(A),x(w),f(A)),r.setAttrib(A,"id",""),s.add()}}var r=n.dom,i=n.selection,a=n.settings,s=n.undoManager,c=n.schema.getNonEmptyElements();n.onKeyDown.add(function(e,t){13==t.keyCode&&!1!==o(t)&&t.preventDefault()})}}(tinymce);
//script: bootstrap
/*!
 * Bootstrap v4.0.0-alpha.6 (https://getbootstrap.com)
 * Copyright 2011-2017 The Bootstrap Authors (https://github.com/twbs/bootstrap/graphs/contributors)
 * Licensed under MIT (https://github.com/twbs/bootstrap/blob/master/LICENSE)
 */
if(function(t,e){"function"==typeof define&&define.amd?define(e):"object"==typeof exports?module.exports=e(require,exports,module):t.Tether=e()}(this,function(){"use strict";function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function e(t){var n=t.getBoundingClientRect(),i={};for(var o in n)i[o]=n[o];if(t.ownerDocument!==document){var r=t.ownerDocument.defaultView.frameElement;if(r){var s=e(r);i.top+=s.top,i.bottom+=s.top,i.left+=s.left,i.right+=s.left}}return i}function n(t){var e=getComputedStyle(t)||{},n=e.position,i=[];if("fixed"===n)return[t];for(var o=t;(o=o.parentNode)&&o&&1===o.nodeType;){var r=void 0;try{r=getComputedStyle(o)}catch(t){}if(void 0===r||null===r)return i.push(o),i;var s=r,a=s.overflow,l=s.overflowX,h=s.overflowY;/(auto|scroll|overlay)/.test(a+h+l)&&("absolute"!==n||["relative","absolute","fixed"].indexOf(r.position)>=0)&&i.push(o)}return i.push(t.ownerDocument.body),t.ownerDocument!==document&&i.push(t.ownerDocument.defaultView),i}function i(){C&&document.body.removeChild(C),C=null}function o(t){var n=void 0;t===document?(n=document,t=document.documentElement):n=t.ownerDocument;var i=n.documentElement,o=e(t),r=O();return o.top-=r.top,o.left-=r.left,"undefined"==typeof o.width&&(o.width=document.body.scrollWidth-o.left-o.right),"undefined"==typeof o.height&&(o.height=document.body.scrollHeight-o.top-o.bottom),o.top=o.top-i.clientTop,o.left=o.left-i.clientLeft,o.right=n.body.clientWidth-o.width-o.left,o.bottom=n.body.clientHeight-o.height-o.top,o}function r(t){return t.offsetParent||document.documentElement}function s(){if(I)return I;var t=document.createElement("div");t.style.width="100%",t.style.height="200px";var e=document.createElement("div");a(e.style,{position:"absolute",top:0,left:0,pointerEvents:"none",visibility:"hidden",width:"200px",height:"150px",overflow:"hidden"}),e.appendChild(t),document.body.appendChild(e);var n=t.offsetWidth;e.style.overflow="scroll";var i=t.offsetWidth;n===i&&(i=e.clientWidth),document.body.removeChild(e);var o=n-i;return I={width:o,height:o}}function a(){var t=arguments.length<=0||void 0===arguments[0]?{}:arguments[0],e=[];return Array.prototype.push.apply(e,arguments),e.slice(1).forEach(function(e){if(e)for(var n in e)({}).hasOwnProperty.call(e,n)&&(t[n]=e[n])}),t}function l(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.remove(e)});else{var n=new RegExp("(^| )"+e.split(" ").join("|")+"( |$)","gi"),i=c(t).replace(n," ");d(t,i)}}function h(t,e){if("undefined"!=typeof t.classList)e.split(" ").forEach(function(e){e.trim()&&t.classList.add(e)});else{l(t,e);var n=c(t)+" "+e;d(t,n)}}function f(t,e){if("undefined"!=typeof t.classList)return t.classList.contains(e);var n=c(t);return new RegExp("(^| )"+e+"( |$)","gi").test(n)}function c(t){return t.className instanceof t.ownerDocument.defaultView.SVGAnimatedString?t.className.baseVal:t.className}function d(t,e){t.setAttribute("class",e)}function u(t,e,n){n.forEach(function(n){-1===e.indexOf(n)&&f(t,n)&&l(t,n)}),e.forEach(function(e){f(t,e)||h(t,e)})}function t(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}function p(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function g(t,e){var n=arguments.length<=2||void 0===arguments[2]?1:arguments[2];return t+n>=e&&e>=t-n}function m(){return"undefined"!=typeof performance&&"undefined"!=typeof performance.now?performance.now():+new Date}function _(){for(var t={top:0,left:0},e=arguments.length,n=Array(e),i=0;i<e;i++)n[i]=arguments[i];return n.forEach(function(e){var n=e.top,i=e.left;"string"==typeof n&&(n=parseFloat(n,10)),"string"==typeof i&&(i=parseFloat(i,10)),t.top+=n,t.left+=i}),t}function v(t,e){return"string"==typeof t.left&&-1!==t.left.indexOf("%")&&(t.left=parseFloat(t.left,10)/100*e.width),"string"==typeof t.top&&-1!==t.top.indexOf("%")&&(t.top=parseFloat(t.top,10)/100*e.height),t}function E(t,e){return"scrollParent"===e?e=t.scrollParents[0]:"window"===e&&(e=[pageXOffset,pageYOffset,innerWidth+pageXOffset,innerHeight+pageYOffset]),e===document&&(e=e.documentElement),"undefined"!=typeof e.nodeType&&function(){var t=e,n=o(e),i=n,r=getComputedStyle(e);if(e=[i.left,i.top,n.width+i.left,n.height+i.top],t.ownerDocument!==document){var s=t.ownerDocument.defaultView;e[0]+=s.pageXOffset,e[1]+=s.pageYOffset,e[2]+=s.pageXOffset,e[3]+=s.pageYOffset}Q.forEach(function(t,n){t=t[0].toUpperCase()+t.substr(1),"Top"===t||"Left"===t?e[n]+=parseFloat(r["border"+t+"Width"]):e[n]-=parseFloat(r["border"+t+"Width"])})}(),e}var y=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),T=void 0;void 0===T&&(T={modules:[]});var C=null,A=function(){var t=0;return function(){return++t}}(),b={},O=function(){var t=C;t&&document.body.contains(t)||(t=document.createElement("div"),t.setAttribute("data-tether-id",A()),a(t.style,{top:0,left:0,position:"absolute"}),document.body.appendChild(t),C=t);var n=t.getAttribute("data-tether-id");return"undefined"==typeof b[n]&&(b[n]=e(t),D(function(){delete b[n]})),b[n]},I=null,S=[],D=function(t){S.push(t)},w=function(){for(var t=void 0;t=S.pop();)t()},N=function(){function e(){t(this,e)}return y(e,[{key:"on",value:function(t,e,n){var i=!(arguments.length<=3||void 0===arguments[3])&&arguments[3];"undefined"==typeof this.bindings&&(this.bindings={}),"undefined"==typeof this.bindings[t]&&(this.bindings[t]=[]),this.bindings[t].push({handler:e,ctx:n,once:i})}},{key:"once",value:function(t,e,n){this.on(t,e,n,!0)}},{key:"off",value:function(t,e){if("undefined"!=typeof this.bindings&&"undefined"!=typeof this.bindings[t])if(void 0===e)delete this.bindings[t];else for(var n=0;n<this.bindings[t].length;)this.bindings[t][n].handler===e?this.bindings[t].splice(n,1):++n}},{key:"trigger",value:function(t){if("undefined"!=typeof this.bindings&&this.bindings[t]){for(var e=0,n=arguments.length,i=Array(n>1?n-1:0),o=1;o<n;o++)i[o-1]=arguments[o];for(;e<this.bindings[t].length;){var r=this.bindings[t][e],s=r.handler,a=r.ctx,l=r.once,h=a;void 0===h&&(h=this),s.apply(h,i),l?this.bindings[t].splice(e,1):++e}}}}]),e}();T.Utils={getActualBoundingClientRect:e,getScrollParents:n,getBounds:o,getOffsetParent:r,extend:a,addClass:h,removeClass:l,hasClass:f,updateClasses:u,defer:D,flush:w,uniqueId:A,Evented:N,getScrollBarSize:s,removeUtilElements:i};var L=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),y=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),P=function(t,e,n){for(var i=!0;i;){var o=t,r=e,s=n;i=!1,null===o&&(o=Function.prototype);var a=Object.getOwnPropertyDescriptor(o,r);if(void 0!==a){if("value"in a)return a.value;var l=a.get;if(void 0===l)return;return l.call(s)}var h=Object.getPrototypeOf(o);if(null===h)return;t=h,e=r,n=s,i=!0,a=h=void 0}};if(void 0===T)throw new Error("You must include the utils.js file before tether.js");var H=T.Utils,n=H.getScrollParents,o=H.getBounds,r=H.getOffsetParent,a=H.extend,h=H.addClass,l=H.removeClass,u=H.updateClasses,D=H.defer,w=H.flush,s=H.getScrollBarSize,i=H.removeUtilElements,k=function(){if("undefined"==typeof document)return"";for(var t=document.createElement("div"),e=["transform","WebkitTransform","OTransform","MozTransform","msTransform"],n=0;n<e.length;++n){var i=e[n];if(void 0!==t.style[i])return i}}(),W=[],R=function(){W.forEach(function(t){t.position(!1)}),w()};!function(){var t=null,e=null,n=null,i=function i(){return void 0!==e&&e>16?(e=Math.min(e-16,250),void(n=setTimeout(i,250))):void(void 0!==t&&m()-t<10||(null!=n&&(clearTimeout(n),n=null),t=m(),R(),e=m()-t))};"undefined"!=typeof window&&"undefined"!=typeof window.addEventListener&&["resize","scroll","touchmove"].forEach(function(t){window.addEventListener(t,i)})}();var x={center:"center",left:"right",right:"left"},M={middle:"middle",top:"bottom",bottom:"top"},V={top:0,left:0,middle:"50%",center:"50%",bottom:"100%",right:"100%"},j=function(t,e){var n=t.left,i=t.top;return"auto"===n&&(n=x[e.left]),"auto"===i&&(i=M[e.top]),{left:n,top:i}},F=function(t){var e=t.left,n=t.top;return"undefined"!=typeof V[t.left]&&(e=V[t.left]),"undefined"!=typeof V[t.top]&&(n=V[t.top]),{left:e,top:n}},U=function(t){var e=t.split(" "),n=L(e,2);return{top:n[0],left:n[1]}},B=U,K=function(e){function f(e){var n=this;t(this,f),P(Object.getPrototypeOf(f.prototype),"constructor",this).call(this),this.position=this.position.bind(this),W.push(this),this.history=[],this.setOptions(e,!1),T.modules.forEach(function(t){"undefined"!=typeof t.initialize&&t.initialize.call(n)}),this.position()}return p(f,e),y(f,[{key:"getClass",value:function(){var t=arguments.length<=0||void 0===arguments[0]?"":arguments[0],e=this.options.classes;return void 0!==e&&e[t]?this.options.classes[t]:this.options.classPrefix?this.options.classPrefix+"-"+t:t}},{key:"setOptions",value:function(t){var e=this,i=arguments.length<=1||void 0===arguments[1]||arguments[1],o={offset:"0 0",targetOffset:"0 0",targetAttachment:"auto auto",classPrefix:"tether"};this.options=a(o,t);var r=this.options,s=r.element,l=r.target,f=r.targetModifier;if(this.element=s,this.target=l,this.targetModifier=f,"viewport"===this.target?(this.target=document.body,this.targetModifier="visible"):"scroll-handle"===this.target&&(this.target=document.body,this.targetModifier="scroll-handle"),["element","target"].forEach(function(t){if("undefined"==typeof e[t])throw new Error("Tether Error: Both element and target must be defined");"undefined"!=typeof e[t].jquery?e[t]=e[t][0]:"string"==typeof e[t]&&(e[t]=document.querySelector(e[t]))}),h(this.element,this.getClass("element")),!1!==this.options.addTargetClasses&&h(this.target,this.getClass("target")),!this.options.attachment)throw new Error("Tether Error: You must provide an attachment");this.targetAttachment=B(this.options.targetAttachment),this.attachment=B(this.options.attachment),this.offset=U(this.options.offset),this.targetOffset=U(this.options.targetOffset),"undefined"!=typeof this.scrollParents&&this.disable(),"scroll-handle"===this.targetModifier?this.scrollParents=[this.target]:this.scrollParents=n(this.target),!1!==this.options.enabled&&this.enable(i)}},{key:"getTargetBounds",value:function(){if("undefined"==typeof this.targetModifier)return o(this.target);if("visible"===this.targetModifier){if(this.target===document.body)return{top:pageYOffset,left:pageXOffset,height:innerHeight,width:innerWidth};var t=o(this.target),e={height:t.height,width:t.width,top:t.top,left:t.left};return e.height=Math.min(e.height,t.height-(pageYOffset-t.top)),e.height=Math.min(e.height,t.height-(t.top+t.height-(pageYOffset+innerHeight))),e.height=Math.min(innerHeight,e.height),e.height-=2,e.width=Math.min(e.width,t.width-(pageXOffset-t.left)),e.width=Math.min(e.width,t.width-(t.left+t.width-(pageXOffset+innerWidth))),e.width=Math.min(innerWidth,e.width),e.width-=2,e.top<pageYOffset&&(e.top=pageYOffset),e.left<pageXOffset&&(e.left=pageXOffset),e}if("scroll-handle"===this.targetModifier){var t=void 0,n=this.target;n===document.body?(n=document.documentElement,t={left:pageXOffset,top:pageYOffset,height:innerHeight,width:innerWidth}):t=o(n);var i=getComputedStyle(n),r=n.scrollWidth>n.clientWidth||[i.overflow,i.overflowX].indexOf("scroll")>=0||this.target!==document.body,s=0;r&&(s=15);var a=t.height-parseFloat(i.borderTopWidth)-parseFloat(i.borderBottomWidth)-s,e={width:15,height:.975*a*(a/n.scrollHeight),left:t.left+t.width-parseFloat(i.borderLeftWidth)-15},l=0;a<408&&this.target===document.body&&(l=-11e-5*Math.pow(a,2)-.00727*a+22.58),this.target!==document.body&&(e.height=Math.max(e.height,24));var h=this.target.scrollTop/(n.scrollHeight-a);return e.top=h*(a-e.height-l)+t.top+parseFloat(i.borderTopWidth),this.target===document.body&&(e.height=Math.max(e.height,24)),e}}},{key:"clearCache",value:function(){this._cache={}}},{key:"cache",value:function(t,e){return"undefined"==typeof this._cache&&(this._cache={}),"undefined"==typeof this._cache[t]&&(this._cache[t]=e.call(this)),this._cache[t]}},{key:"enable",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];!1!==this.options.addTargetClasses&&h(this.target,this.getClass("enabled")),h(this.element,this.getClass("enabled")),this.enabled=!0,this.scrollParents.forEach(function(e){e!==t.target.ownerDocument&&e.addEventListener("scroll",t.position)}),e&&this.position()}},{key:"disable",value:function(){var t=this;l(this.target,this.getClass("enabled")),l(this.element,this.getClass("enabled")),this.enabled=!1,"undefined"!=typeof this.scrollParents&&this.scrollParents.forEach(function(e){e.removeEventListener("scroll",t.position)})}},{key:"destroy",value:function(){var t=this;this.disable(),W.forEach(function(e,n){e===t&&W.splice(n,1)}),0===W.length&&i()}},{key:"updateAttachClasses",value:function(t,e){var n=this;t=t||this.attachment,e=e||this.targetAttachment;var i=["left","top","bottom","right","middle","center"];"undefined"!=typeof this._addAttachClasses&&this._addAttachClasses.length&&this._addAttachClasses.splice(0,this._addAttachClasses.length),"undefined"==typeof this._addAttachClasses&&(this._addAttachClasses=[]);var o=this._addAttachClasses;t.top&&o.push(this.getClass("element-attached")+"-"+t.top),t.left&&o.push(this.getClass("element-attached")+"-"+t.left),e.top&&o.push(this.getClass("target-attached")+"-"+e.top),e.left&&o.push(this.getClass("target-attached")+"-"+e.left);var r=[];i.forEach(function(t){r.push(n.getClass("element-attached")+"-"+t),r.push(n.getClass("target-attached")+"-"+t)}),D(function(){"undefined"!=typeof n._addAttachClasses&&(u(n.element,n._addAttachClasses,r),!1!==n.options.addTargetClasses&&u(n.target,n._addAttachClasses,r),delete n._addAttachClasses)})}},{key:"position",value:function(){var t=this,e=arguments.length<=0||void 0===arguments[0]||arguments[0];if(this.enabled){this.clearCache();var n=j(this.targetAttachment,this.attachment);this.updateAttachClasses(this.attachment,n);var i=this.cache("element-bounds",function(){return o(t.element)}),a=i.width,l=i.height;if(0===a&&0===l&&"undefined"!=typeof this.lastSize){var h=this.lastSize;a=h.width,l=h.height}else this.lastSize={width:a,height:l};var f=this.cache("target-bounds",function(){return t.getTargetBounds()}),c=f,d=v(F(this.attachment),{width:a,height:l}),u=v(F(n),c),p=v(this.offset,{width:a,height:l}),g=v(this.targetOffset,c);d=_(d,p),u=_(u,g);for(var m=f.left+u.left-d.left,E=f.top+u.top-d.top,y=0;y<T.modules.length;++y){var C=T.modules[y],A=C.position.call(this,{left:m,top:E,targetAttachment:n,targetPos:f,elementPos:i,offset:d,targetOffset:u,manualOffset:p,manualTargetOffset:g,scrollbarSize:S,attachment:this.attachment});if(!1===A)return!1;void 0!==A&&"object"==typeof A&&(E=A.top,m=A.left)}var b={page:{top:E,left:m},viewport:{top:E-pageYOffset,bottom:pageYOffset-E-l+innerHeight,left:m-pageXOffset,right:pageXOffset-m-a+innerWidth}},O=this.target.ownerDocument,I=O.defaultView,S=void 0;return I.innerHeight>O.documentElement.clientHeight&&(S=this.cache("scrollbar-size",s),b.viewport.bottom-=S.height),I.innerWidth>O.documentElement.clientWidth&&(S=this.cache("scrollbar-size",s),b.viewport.right-=S.width),-1!==["","static"].indexOf(O.body.style.position)&&-1!==["","static"].indexOf(O.body.parentElement.style.position)||(b.page.bottom=O.body.scrollHeight-E-l,b.page.right=O.body.scrollWidth-m-a),"undefined"!=typeof this.options.optimizations&&!1!==this.options.optimizations.moveElement&&"undefined"==typeof this.targetModifier&&function(){var e=t.cache("target-offsetparent",function(){return r(t.target)}),n=t.cache("target-offsetparent-bounds",function(){return o(e)}),i=getComputedStyle(e),s=n,a={};if(["Top","Left","Bottom","Right"].forEach(function(t){a[t.toLowerCase()]=parseFloat(i["border"+t+"Width"])}),n.right=O.body.scrollWidth-n.left-s.width+a.right,n.bottom=O.body.scrollHeight-n.top-s.height+a.bottom,b.page.top>=n.top+a.top&&b.page.bottom>=n.bottom&&b.page.left>=n.left+a.left&&b.page.right>=n.right){var l=e.scrollTop,h=e.scrollLeft;b.offset={top:b.page.top-n.top+l-a.top,left:b.page.left-n.left+h-a.left}}}(),this.move(b),this.history.unshift(b),this.history.length>3&&this.history.pop(),e&&w(),!0}}},{key:"move",value:function(t){var e=this;if("undefined"!=typeof this.element.parentNode){var n={};for(var i in t){n[i]={};for(var o in t[i]){for(var s=!1,l=0;l<this.history.length;++l){var h=this.history[l];if("undefined"!=typeof h[i]&&!g(h[i][o],t[i][o])){s=!0;break}}s||(n[i][o]=!0)}}var f={top:"",left:"",right:"",bottom:""},c=function(t,n){if(!1!==("undefined"!=typeof e.options.optimizations?e.options.optimizations.gpu:null)){var i=void 0,o=void 0;t.top?(f.top=0,i=n.top):(f.bottom=0,i=-n.bottom),t.left?(f.left=0,o=n.left):(f.right=0,o=-n.right),window.matchMedia&&(window.matchMedia("only screen and (min-resolution: 1.3dppx)").matches||window.matchMedia("only screen and (-webkit-min-device-pixel-ratio: 1.3)").matches||(o=Math.round(o),i=Math.round(i))),f[k]="translateX("+o+"px) translateY("+i+"px)","msTransform"!==k&&(f[k]+=" translateZ(0)")}else t.top?f.top=n.top+"px":f.bottom=n.bottom+"px",t.left?f.left=n.left+"px":f.right=n.right+"px"},d=!1;if((n.page.top||n.page.bottom)&&(n.page.left||n.page.right)?(f.position="absolute",c(n.page,t.page)):(n.viewport.top||n.viewport.bottom)&&(n.viewport.left||n.viewport.right)?(f.position="fixed",c(n.viewport,t.viewport)):"undefined"!=typeof n.offset&&n.offset.top&&n.offset.left?function(){f.position="absolute";var i=e.cache("target-offsetparent",function(){return r(e.target)});r(e.element)!==i&&D(function(){e.element.parentNode.removeChild(e.element),i.appendChild(e.element)}),c(n.offset,t.offset),d=!0}():(f.position="absolute",c({top:!0,left:!0},t.page)),!d)if(this.options.bodyElement)this.options.bodyElement.appendChild(this.element);else{for(var u=!0,p=this.element.parentNode;p&&1===p.nodeType&&"BODY"!==p.tagName;){if("static"!==getComputedStyle(p).position){u=!1;break}p=p.parentNode}u||(this.element.parentNode.removeChild(this.element),this.element.ownerDocument.body.appendChild(this.element))}var m={},_=!1;for(var o in f){var v=f[o];this.element.style[o]!==v&&(_=!0,m[o]=v)}_&&D(function(){a(e.element.style,m),e.trigger("repositioned")})}}}]),f}(N);K.modules=[],T.position=R;var G=a(K,T),L=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),H=T.Utils,o=H.getBounds,a=H.extend,u=H.updateClasses,D=H.defer,Q=["left","top","right","bottom"];T.modules.push({position:function(t){var e=this,n=t.top,i=t.left,r=t.targetAttachment;if(!this.options.constraints)return!0;var s=this.cache("element-bounds",function(){return o(e.element)}),l=s.height,h=s.width;if(0===h&&0===l&&"undefined"!=typeof this.lastSize){var f=this.lastSize;h=f.width,l=f.height}var c=this.cache("target-bounds",function(){return e.getTargetBounds()}),d=c.height,p=c.width,g=[this.getClass("pinned"),this.getClass("out-of-bounds")];this.options.constraints.forEach(function(t){var e=t.outOfBoundsClass,n=t.pinnedClass;e&&g.push(e),n&&g.push(n)}),g.forEach(function(t){["left","top","right","bottom"].forEach(function(e){g.push(t+"-"+e)})});var m=[],_=a({},r),v=a({},this.attachment);return this.options.constraints.forEach(function(t){var o=t.to,s=t.attachment,a=t.pin;void 0===s&&(s="");var f=void 0,c=void 0;if(s.indexOf(" ")>=0){var u=s.split(" "),g=L(u,2);c=g[0],f=g[1]}else f=c=s;var y=E(e,o);"target"!==c&&"both"!==c||(n<y[1]&&"top"===_.top&&(n+=d,_.top="bottom"),n+l>y[3]&&"bottom"===_.top&&(n-=d,_.top="top")),"together"===c&&("top"===_.top&&("bottom"===v.top&&n<y[1]?(n+=d,_.top="bottom",n+=l,v.top="top"):"top"===v.top&&n+l>y[3]&&n-(l-d)>=y[1]&&(n-=l-d,_.top="bottom",v.top="bottom")),"bottom"===_.top&&("top"===v.top&&n+l>y[3]?(n-=d,_.top="top",n-=l,v.top="bottom"):"bottom"===v.top&&n<y[1]&&n+(2*l-d)<=y[3]&&(n+=l-d,_.top="top",v.top="top")),"middle"===_.top&&(n+l>y[3]&&"top"===v.top?(n-=l,v.top="bottom"):n<y[1]&&"bottom"===v.top&&(n+=l,v.top="top"))),"target"!==f&&"both"!==f||(i<y[0]&&"left"===_.left&&(i+=p,_.left="right"),i+h>y[2]&&"right"===_.left&&(i-=p,_.left="left")),"together"===f&&(i<y[0]&&"left"===_.left?"right"===v.left?(i+=p,_.left="right",i+=h,v.left="left"):"left"===v.left&&(i+=p,_.left="right",i-=h,v.left="right"):i+h>y[2]&&"right"===_.left?"left"===v.left?(i-=p,_.left="left",i-=h,v.left="right"):"right"===v.left&&(i-=p,_.left="left",i+=h,v.left="left"):"center"===_.left&&(i+h>y[2]&&"left"===v.left?(i-=h,v.left="right"):i<y[0]&&"right"===v.left&&(i+=h,v.left="left"))),"element"!==c&&"both"!==c||(n<y[1]&&"bottom"===v.top&&(n+=l,v.top="top"),n+l>y[3]&&"top"===v.top&&(n-=l,v.top="bottom")),"element"!==f&&"both"!==f||(i<y[0]&&("right"===v.left?(i+=h,v.left="left"):"center"===v.left&&(i+=h/2,v.left="left")),i+h>y[2]&&("left"===v.left?(i-=h,v.left="right"):"center"===v.left&&(i-=h/2,v.left="right"))),"string"==typeof a?a=a.split(",").map(function(t){return t.trim()}):!0===a&&(a=["top","left","right","bottom"]),a=a||[];var T=[],C=[];n<y[1]&&(a.indexOf("top")>=0?(n=y[1],T.push("top")):C.push("top")),n+l>y[3]&&(a.indexOf("bottom")>=0?(n=y[3]-l,T.push("bottom")):C.push("bottom")),i<y[0]&&(a.indexOf("left")>=0?(i=y[0],T.push("left")):C.push("left")),i+h>y[2]&&(a.indexOf("right")>=0?(i=y[2]-h,T.push("right")):C.push("right")),T.length&&function(){var t=void 0;t="undefined"!=typeof e.options.pinnedClass?e.options.pinnedClass:e.getClass("pinned"),m.push(t),T.forEach(function(e){m.push(t+"-"+e)})}(),C.length&&function(){var t=void 0;t="undefined"!=typeof e.options.outOfBoundsClass?e.options.outOfBoundsClass:e.getClass("out-of-bounds"),m.push(t),C.forEach(function(e){m.push(t+"-"+e)})}(),(T.indexOf("left")>=0||T.indexOf("right")>=0)&&(v.left=_.left=!1),(T.indexOf("top")>=0||T.indexOf("bottom")>=0)&&(v.top=_.top=!1),_.top===r.top&&_.left===r.left&&v.top===e.attachment.top&&v.left===e.attachment.left||(e.updateAttachClasses(v,_),e.trigger("update",{attachment:v,targetAttachment:_}))}),D(function(){!1!==e.options.addTargetClasses&&u(e.target,m,g),u(e.element,m,g)}),{top:n,left:i}}});var H=T.Utils,o=H.getBounds,u=H.updateClasses,D=H.defer;T.modules.push({position:function(t){var e=this,n=t.top,i=t.left,r=this.cache("element-bounds",function(){return o(e.element)}),s=r.height,a=r.width,l=this.getTargetBounds(),h=n+s,f=i+a,c=[];n<=l.bottom&&h>=l.top&&["left","right"].forEach(function(t){var e=l[t];e!==i&&e!==f||c.push(t)}),i<=l.right&&f>=l.left&&["top","bottom"].forEach(function(t){var e=l[t];e!==n&&e!==h||c.push(t)});var d=[],p=[],g=["left","top","right","bottom"];return d.push(this.getClass("abutted")),g.forEach(function(t){d.push(e.getClass("abutted")+"-"+t)}),c.length&&p.push(this.getClass("abutted")),c.forEach(function(t){p.push(e.getClass("abutted")+"-"+t)}),D(function(){!1!==e.options.addTargetClasses&&u(e.target,p,d),u(e.element,p,d)}),!0}});var L=function(){function t(t,e){var n=[],i=!0,o=!1,r=void 0;try{for(var s,a=t[Symbol.iterator]();!(i=(s=a.next()).done)&&(n.push(s.value),!e||n.length!==e);i=!0);}catch(t){o=!0,r=t}finally{try{!i&&a["return"]&&a["return"]()}finally{if(o)throw r}}return n}return function(e,n){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e))return t(e,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}();return T.modules.push({position:function(t){var e=t.top,n=t.left;if(this.options.shift){var i=this.options.shift;"function"==typeof this.options.shift&&(i=this.options.shift.call(this,{top:e,left:n}));var o=void 0,r=void 0;if("string"==typeof i){i=i.split(" "),i[1]=i[1]||i[0];var s=i,a=L(s,2);o=a[0],r=a[1],o=parseFloat(o,10),r=parseFloat(r,10)}else o=i.top,r=i.left;return e+=o,n+=r,{top:e,left:n}}}}),G}),"undefined"==typeof jQuery)throw new Error("Bootstrap's JavaScript requires jQuery. jQuery must be included before Bootstrap's JavaScript.");+function(t){var e=t.fn.jquery.split(" ")[0].split(".");if(e[0]<2&&e[1]<9||1==e[0]&&9==e[1]&&e[2]<1||e[0]>=4)throw new Error("Bootstrap's JavaScript requires at least jQuery v1.9.1 but less than v4.0.0")}(jQuery),function(){function t(t,e){if(!t)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!e||"object"!=typeof e&&"function"!=typeof e?t:e}function e(t,e){if("function"!=typeof e&&null!==e)throw new TypeError("Super expression must either be null or a function, not "+typeof e);t.prototype=Object.create(e&&e.prototype,{constructor:{value:t,enumerable:!1,writable:!0,configurable:!0}}),e&&(Object.setPrototypeOf?Object.setPrototypeOf(t,e):t.__proto__=e)}function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var i="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},o=function(){function t(t,e){for(var n=0;n<e.length;n++){var i=e[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(t,i.key,i)}}return function(e,n,i){return n&&t(e.prototype,n),i&&t(e,i),e}}(),r=function(t){function e(t){return{}.toString.call(t).match(/\s([a-zA-Z]+)/)[1].toLowerCase()}function n(t){return(t[0]||t).nodeType}function i(){return{bindType:a.end,delegateType:a.end,handle:function(e){return t(e.target).is(this)?e.handleObj.handler.apply(this,arguments):undefined}}}function o(){if(window.QUnit)return!1;var t=document.createElement("bootstrap");for(var e in h)if(t.style[e]!==undefined)return{end:h[e]};return!1}function r(e){var n=this,i=!1;return t(this).one(f.TRANSITION_END,function(){i=!0}),setTimeout(function(){i||f.triggerTransitionEnd(n)},e),this}function s(){a=o(),t.fn.emulateTransitionEnd=r,f.supportsTransitionEnd()&&(t.event.special[f.TRANSITION_END]=i())}var a=!1,l=1e6,h={WebkitTransition:"webkitTransitionEnd",MozTransition:"transitionend",OTransition:"oTransitionEnd otransitionend",transition:"transitionend"},f={TRANSITION_END:"bsTransitionEnd",getUID:function(t){do{t+=~~(Math.random()*l)}while(document.getElementById(t));return t},getSelectorFromElement:function(t){var e=t.getAttribute("data-target");return e||(e=t.getAttribute("href")||"",e=/^#[a-z]/i.test(e)?e:null),e},reflow:function(t){return t.offsetHeight},triggerTransitionEnd:function(e){t(e).trigger(a.end)},supportsTransitionEnd:function(){return Boolean(a)},typeCheckConfig:function(t,i,o){for(var r in o)if(o.hasOwnProperty(r)){var s=o[r],a=i[r],l=a&&n(a)?"element":e(a);if(!new RegExp(s).test(l))throw new Error(t.toUpperCase()+': Option "'+r+'" provided type "'+l+'" but expected type "'+s+'".')}}};return s(),f}(jQuery),s=(function(t){var e="alert",i="4.0.0-alpha.6",s="bs.alert",a="."+s,l=".data-api",h=t.fn[e],f=150,c={DISMISS:'[data-dismiss="alert"]'},d={CLOSE:"close"+a,CLOSED:"closed"+a,CLICK_DATA_API:"click"+a+l},u={ALERT:"alert",FADE:"fade",SHOW:"show"},p=function(){function e(t){n(this,e),this._element=t}return e.prototype.close=function(t){t=t||this._element;var e=this._getRootElement(t);this._triggerCloseEvent(e).isDefaultPrevented()||this._removeElement(e)},e.prototype.dispose=function(){t.removeData(this._element,s),this._element=null},e.prototype._getRootElement=function(e){var n=r.getSelectorFromElement(e),i=!1;return n&&(i=t(n)[0]),i||(i=t(e).closest("."+u.ALERT)[0]),i},e.prototype._triggerCloseEvent=function(e){var n=t.Event(d.CLOSE);return t(e).trigger(n),n},e.prototype._removeElement=function(e){var n=this;if(t(e).removeClass(u.SHOW),!r.supportsTransitionEnd()||!t(e).hasClass(u.FADE))return void this._destroyElement(e);t(e).one(r.TRANSITION_END,function(t){return n._destroyElement(e,t)}).emulateTransitionEnd(f)},e.prototype._destroyElement=function(e){t(e).detach().trigger(d.CLOSED).remove()},e._jQueryInterface=function(n){return this.each(function(){var i=t(this),o=i.data(s);o||(o=new e(this),i.data(s,o)),"close"===n&&o[n](this)})},e._handleDismiss=function(t){return function(e){e&&e.preventDefault(),t.close(this)}},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();t(document).on(d.CLICK_DATA_API,c.DISMISS,p._handleDismiss(new p)),t.fn[e]=p._jQueryInterface,t.fn[e].Constructor=p,t.fn[e].noConflict=function(){return t.fn[e]=h,p._jQueryInterface}}(jQuery),function(t){var e="button",i="4.0.0-alpha.6",r="bs.button",s="."+r,a=".data-api",l=t.fn[e],h={ACTIVE:"active",BUTTON:"btn",FOCUS:"focus"},f={DATA_TOGGLE_CARROT:'[data-toggle^="button"]',DATA_TOGGLE:'[data-toggle="buttons"]',INPUT:"input",ACTIVE:".active",BUTTON:".btn"},c={CLICK_DATA_API:"click"+s+a,FOCUS_BLUR_DATA_API:"focus"+s+a+" blur"+s+a},d=function(){function e(t){n(this,e),this._element=t}return e.prototype.toggle=function(){var e=!0,n=t(this._element).closest(f.DATA_TOGGLE)[0];if(n){var i=t(this._element).find(f.INPUT)[0];if(i){if("radio"===i.type)if(i.checked&&t(this._element).hasClass(h.ACTIVE))e=!1;else{var o=t(n).find(f.ACTIVE)[0];o&&t(o).removeClass(h.ACTIVE)}e&&(i.checked=!t(this._element).hasClass(h.ACTIVE),t(i).trigger("change")),i.focus()}}this._element.setAttribute("aria-pressed",!t(this._element).hasClass(h.ACTIVE)),e&&t(this._element).toggleClass(h.ACTIVE)},e.prototype.dispose=function(){t.removeData(this._element,r),this._element=null},e._jQueryInterface=function(n){return this.each(function(){var i=t(this).data(r);i||(i=new e(this),t(this).data(r,i)),"toggle"===n&&i[n]()})},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();t(document).on(c.CLICK_DATA_API,f.DATA_TOGGLE_CARROT,function(e){e.preventDefault();var n=e.target;t(n).hasClass(h.BUTTON)||(n=t(n).closest(f.BUTTON)),d._jQueryInterface.call(t(n),"toggle")}).on(c.FOCUS_BLUR_DATA_API,f.DATA_TOGGLE_CARROT,function(e){var n=t(e.target).closest(f.BUTTON)[0];t(n).toggleClass(h.FOCUS,/^focus(in)?$/.test(e.type))}),t.fn[e]=d._jQueryInterface,t.fn[e].Constructor=d,t.fn[e].noConflict=function(){return t.fn[e]=l,d._jQueryInterface}}(jQuery),function(t){var e="carousel",s="4.0.0-alpha.6",a="bs.carousel",l="."+a,h=".data-api",f=t.fn[e],c=600,d=37,u=39,p={interval:5e3,keyboard:!0,slide:!1,pause:"hover",wrap:!0},g={interval:"(number|boolean)",keyboard:"boolean",slide:"(boolean|string)",pause:"(string|boolean)",wrap:"boolean"},m={NEXT:"next",PREV:"prev",LEFT:"left",RIGHT:"right"},_={SLIDE:"slide"+l,SLID:"slid"+l,KEYDOWN:"keydown"+l,MOUSEENTER:"mouseenter"+l,MOUSELEAVE:"mouseleave"+l,LOAD_DATA_API:"load"+l+h,CLICK_DATA_API:"click"+l+h},v={CAROUSEL:"carousel",ACTIVE:"active",SLIDE:"slide",RIGHT:"carousel-item-right",LEFT:"carousel-item-left",NEXT:"carousel-item-next",PREV:"carousel-item-prev",ITEM:"carousel-item"},E={ACTIVE:".active",ACTIVE_ITEM:".active.carousel-item",ITEM:".carousel-item",NEXT_PREV:".carousel-item-next, .carousel-item-prev",INDICATORS:".carousel-indicators",DATA_SLIDE:"[data-slide], [data-slide-to]",DATA_RIDE:'[data-ride="carousel"]'},y=function(){function h(e,i){n(this,h),this._items=null,this._interval=null,this._activeElement=null,this._isPaused=!1,this._isSliding=!1,this._config=this._getConfig(i),this._element=t(e)[0],this._indicatorsElement=t(this._element).find(E.INDICATORS)[0],this._addEventListeners()}return h.prototype.next=function(){if(this._isSliding)throw new Error("Carousel is sliding");this._slide(m.NEXT)},h.prototype.nextWhenVisible=function(){document.hidden||this.next()},h.prototype.prev=function(){if(this._isSliding)throw new Error("Carousel is sliding");this._slide(m.PREVIOUS)},h.prototype.pause=function(e){e||(this._isPaused=!0),t(this._element).find(E.NEXT_PREV)[0]&&r.supportsTransitionEnd()&&(r.triggerTransitionEnd(this._element),this.cycle(!0)),clearInterval(this._interval),this._interval=null},h.prototype.cycle=function(t){
t||(this._isPaused=!1),this._interval&&(clearInterval(this._interval),this._interval=null),this._config.interval&&!this._isPaused&&(this._interval=setInterval((document.visibilityState?this.nextWhenVisible:this.next).bind(this),this._config.interval))},h.prototype.to=function(e){var n=this;this._activeElement=t(this._element).find(E.ACTIVE_ITEM)[0];var i=this._getItemIndex(this._activeElement);if(!(e>this._items.length-1||e<0)){if(this._isSliding)return void t(this._element).one(_.SLID,function(){return n.to(e)});if(i===e)return this.pause(),void this.cycle();var o=e>i?m.NEXT:m.PREVIOUS;this._slide(o,this._items[e])}},h.prototype.dispose=function(){t(this._element).off(l),t.removeData(this._element,a),this._items=null,this._config=null,this._element=null,this._interval=null,this._isPaused=null,this._isSliding=null,this._activeElement=null,this._indicatorsElement=null},h.prototype._getConfig=function(n){return n=t.extend({},p,n),r.typeCheckConfig(e,n,g),n},h.prototype._addEventListeners=function(){var e=this;this._config.keyboard&&t(this._element).on(_.KEYDOWN,function(t){return e._keydown(t)}),"hover"!==this._config.pause||"ontouchstart"in document.documentElement||t(this._element).on(_.MOUSEENTER,function(t){return e.pause(t)}).on(_.MOUSELEAVE,function(t){return e.cycle(t)})},h.prototype._keydown=function(t){if(!/input|textarea/i.test(t.target.tagName))switch(t.which){case d:t.preventDefault(),this.prev();break;case u:t.preventDefault(),this.next();break;default:return}},h.prototype._getItemIndex=function(e){return this._items=t.makeArray(t(e).parent().find(E.ITEM)),this._items.indexOf(e)},h.prototype._getItemByDirection=function(t,e){var n=t===m.NEXT,i=t===m.PREVIOUS,o=this._getItemIndex(e),r=this._items.length-1;if((i&&0===o||n&&o===r)&&!this._config.wrap)return e;var s=t===m.PREVIOUS?-1:1,a=(o+s)%this._items.length;return-1===a?this._items[this._items.length-1]:this._items[a]},h.prototype._triggerSlideEvent=function(e,n){var i=t.Event(_.SLIDE,{relatedTarget:e,direction:n});return t(this._element).trigger(i),i},h.prototype._setActiveIndicatorElement=function(e){if(this._indicatorsElement){t(this._indicatorsElement).find(E.ACTIVE).removeClass(v.ACTIVE);var n=this._indicatorsElement.children[this._getItemIndex(e)];n&&t(n).addClass(v.ACTIVE)}},h.prototype._slide=function(e,n){var i=this,o=t(this._element).find(E.ACTIVE_ITEM)[0],s=n||o&&this._getItemByDirection(e,o),a=Boolean(this._interval),l=void 0,h=void 0,f=void 0;if(e===m.NEXT?(l=v.LEFT,h=v.NEXT,f=m.LEFT):(l=v.RIGHT,h=v.PREV,f=m.RIGHT),s&&t(s).hasClass(v.ACTIVE))return void(this._isSliding=!1);if(!this._triggerSlideEvent(s,f).isDefaultPrevented()&&o&&s){this._isSliding=!0,a&&this.pause(),this._setActiveIndicatorElement(s);var d=t.Event(_.SLID,{relatedTarget:s,direction:f});r.supportsTransitionEnd()&&t(this._element).hasClass(v.SLIDE)?(t(s).addClass(h),r.reflow(s),t(o).addClass(l),t(s).addClass(l),t(o).one(r.TRANSITION_END,function(){t(s).removeClass(l+" "+h).addClass(v.ACTIVE),t(o).removeClass(v.ACTIVE+" "+h+" "+l),i._isSliding=!1,setTimeout(function(){return t(i._element).trigger(d)},0)}).emulateTransitionEnd(c)):(t(o).removeClass(v.ACTIVE),t(s).addClass(v.ACTIVE),this._isSliding=!1,t(this._element).trigger(d)),a&&this.cycle()}},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o=t.extend({},p,t(this).data());"object"===(void 0===e?"undefined":i(e))&&t.extend(o,e);var r="string"==typeof e?e:o.slide;if(n||(n=new h(this,o),t(this).data(a,n)),"number"==typeof e)n.to(e);else if("string"==typeof r){if(n[r]===undefined)throw new Error('No method named "'+r+'"');n[r]()}else o.interval&&(n.pause(),n.cycle())})},h._dataApiClickHandler=function(e){var n=r.getSelectorFromElement(this);if(n){var i=t(n)[0];if(i&&t(i).hasClass(v.CAROUSEL)){var o=t.extend({},t(i).data(),t(this).data()),s=this.getAttribute("data-slide-to");s&&(o.interval=!1),h._jQueryInterface.call(t(i),o),s&&t(i).data(a).to(s),e.preventDefault()}}},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return p}}]),h}();t(document).on(_.CLICK_DATA_API,E.DATA_SLIDE,y._dataApiClickHandler),t(window).on(_.LOAD_DATA_API,function(){t(E.DATA_RIDE).each(function(){var e=t(this);y._jQueryInterface.call(e,e.data())})}),t.fn[e]=y._jQueryInterface,t.fn[e].Constructor=y,t.fn[e].noConflict=function(){return t.fn[e]=f,y._jQueryInterface}}(jQuery),function(t){var e="collapse",s="4.0.0-alpha.6",a="bs.collapse",l="."+a,h=".data-api",f=t.fn[e],c=600,d={toggle:!0,parent:""},u={toggle:"boolean",parent:"string"},p={SHOW:"show"+l,SHOWN:"shown"+l,HIDE:"hide"+l,HIDDEN:"hidden"+l,CLICK_DATA_API:"click"+l+h},g={SHOW:"show",COLLAPSE:"collapse",COLLAPSING:"collapsing",COLLAPSED:"collapsed"},m={WIDTH:"width",HEIGHT:"height"},_={ACTIVES:".card > .show, .card > .collapsing",DATA_TOGGLE:'[data-toggle="collapse"]'},v=function(){function l(e,i){n(this,l),this._isTransitioning=!1,this._element=e,this._config=this._getConfig(i),this._triggerArray=t.makeArray(t('[data-toggle="collapse"][href="#'+e.id+'"],[data-toggle="collapse"][data-target="#'+e.id+'"]')),this._parent=this._config.parent?this._getParent():null,this._config.parent||this._addAriaAndCollapsedClass(this._element,this._triggerArray),this._config.toggle&&this.toggle()}return l.prototype.toggle=function(){t(this._element).hasClass(g.SHOW)?this.hide():this.show()},l.prototype.show=function(){var e=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");if(!t(this._element).hasClass(g.SHOW)){var n=void 0,i=void 0;if(this._parent&&(n=t.makeArray(t(this._parent).find(_.ACTIVES)),n.length||(n=null)),!(n&&(i=t(n).data(a))&&i._isTransitioning)){var o=t.Event(p.SHOW);if(t(this._element).trigger(o),!o.isDefaultPrevented()){n&&(l._jQueryInterface.call(t(n),"hide"),i||t(n).data(a,null));var s=this._getDimension();t(this._element).removeClass(g.COLLAPSE).addClass(g.COLLAPSING),this._element.style[s]=0,this._element.setAttribute("aria-expanded",!0),this._triggerArray.length&&t(this._triggerArray).removeClass(g.COLLAPSED).attr("aria-expanded",!0),this.setTransitioning(!0);var h=function(){t(e._element).removeClass(g.COLLAPSING).addClass(g.COLLAPSE).addClass(g.SHOW),e._element.style[s]="",e.setTransitioning(!1),t(e._element).trigger(p.SHOWN)};if(!r.supportsTransitionEnd())return void h();var f=s[0].toUpperCase()+s.slice(1),d="scroll"+f;t(this._element).one(r.TRANSITION_END,h).emulateTransitionEnd(c),this._element.style[s]=this._element[d]+"px"}}}},l.prototype.hide=function(){var e=this;if(this._isTransitioning)throw new Error("Collapse is transitioning");if(t(this._element).hasClass(g.SHOW)){var n=t.Event(p.HIDE);if(t(this._element).trigger(n),!n.isDefaultPrevented()){var i=this._getDimension(),o=i===m.WIDTH?"offsetWidth":"offsetHeight";this._element.style[i]=this._element[o]+"px",r.reflow(this._element),t(this._element).addClass(g.COLLAPSING).removeClass(g.COLLAPSE).removeClass(g.SHOW),this._element.setAttribute("aria-expanded",!1),this._triggerArray.length&&t(this._triggerArray).addClass(g.COLLAPSED).attr("aria-expanded",!1),this.setTransitioning(!0);var s=function(){e.setTransitioning(!1),t(e._element).removeClass(g.COLLAPSING).addClass(g.COLLAPSE).trigger(p.HIDDEN)};if(this._element.style[i]="",!r.supportsTransitionEnd())return void s();t(this._element).one(r.TRANSITION_END,s).emulateTransitionEnd(c)}}},l.prototype.setTransitioning=function(t){this._isTransitioning=t},l.prototype.dispose=function(){t.removeData(this._element,a),this._config=null,this._parent=null,this._element=null,this._triggerArray=null,this._isTransitioning=null},l.prototype._getConfig=function(n){return n=t.extend({},d,n),n.toggle=Boolean(n.toggle),r.typeCheckConfig(e,n,u),n},l.prototype._getDimension=function(){return t(this._element).hasClass(m.WIDTH)?m.WIDTH:m.HEIGHT},l.prototype._getParent=function(){var e=this,n=t(this._config.parent)[0],i='[data-toggle="collapse"][data-parent="'+this._config.parent+'"]';return t(n).find(i).each(function(t,n){e._addAriaAndCollapsedClass(l._getTargetFromElement(n),[n])}),n},l.prototype._addAriaAndCollapsedClass=function(e,n){if(e){var i=t(e).hasClass(g.SHOW);e.setAttribute("aria-expanded",i),n.length&&t(n).toggleClass(g.COLLAPSED,!i).attr("aria-expanded",i)}},l._getTargetFromElement=function(e){var n=r.getSelectorFromElement(e);return n?t(n)[0]:null},l._jQueryInterface=function(e){return this.each(function(){var n=t(this),o=n.data(a),r=t.extend({},d,n.data(),"object"===(void 0===e?"undefined":i(e))&&e);if(!o&&r.toggle&&/show|hide/.test(e)&&(r.toggle=!1),o||(o=new l(this,r),n.data(a,o)),"string"==typeof e){if(o[e]===undefined)throw new Error('No method named "'+e+'"');o[e]()}})},o(l,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return d}}]),l}();t(document).on(p.CLICK_DATA_API,_.DATA_TOGGLE,function(e){e.preventDefault();var n=v._getTargetFromElement(this),i=t(n).data(a),o=i?"toggle":t(this).data();v._jQueryInterface.call(t(n),o)}),t.fn[e]=v._jQueryInterface,t.fn[e].Constructor=v,t.fn[e].noConflict=function(){return t.fn[e]=f,v._jQueryInterface}}(jQuery),function(t){var e="dropdown",i="4.0.0-alpha.6",s="bs.dropdown",a="."+s,l=".data-api",h=t.fn[e],f=27,c=38,d=40,u=3,p={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK:"click"+a,CLICK_DATA_API:"click"+a+l,FOCUSIN_DATA_API:"focusin"+a+l,KEYDOWN_DATA_API:"keydown"+a+l},g={BACKDROP:"dropdown-backdrop",DISABLED:"disabled",SHOW:"show"},m={BACKDROP:".dropdown-backdrop",DATA_TOGGLE:'[data-toggle="dropdown"]',FORM_CHILD:".dropdown form",ROLE_MENU:'[role="menu"]',ROLE_LISTBOX:'[role="listbox"]',NAVBAR_NAV:".navbar-nav",VISIBLE_ITEMS:'[role="menu"] li:not(.disabled) a, [role="listbox"] li:not(.disabled) a'},_=function(){function e(t){n(this,e),this._element=t,this._addEventListeners()}return e.prototype.toggle=function(){if(this.disabled||t(this).hasClass(g.DISABLED))return!1;var n=e._getParentFromElement(this),i=t(n).hasClass(g.SHOW);if(e._clearMenus(),i)return!1;if("ontouchstart"in document.documentElement&&!t(n).closest(m.NAVBAR_NAV).length){var o=document.createElement("div");o.className=g.BACKDROP,t(o).insertBefore(this),t(o).on("click",e._clearMenus)}var r={relatedTarget:this},s=t.Event(p.SHOW,r);return t(n).trigger(s),!s.isDefaultPrevented()&&(this.focus(),this.setAttribute("aria-expanded",!0),t(n).toggleClass(g.SHOW),t(n).trigger(t.Event(p.SHOWN,r)),!1)},e.prototype.dispose=function(){t.removeData(this._element,s),t(this._element).off(a),this._element=null},e.prototype._addEventListeners=function(){t(this._element).on(p.CLICK,this.toggle)},e._jQueryInterface=function(n){return this.each(function(){var i=t(this).data(s);if(i||(i=new e(this),t(this).data(s,i)),"string"==typeof n){if(i[n]===undefined)throw new Error('No method named "'+n+'"');i[n].call(this)}})},e._clearMenus=function(n){if(!n||n.which!==u){var i=t(m.BACKDROP)[0];i&&i.parentNode.removeChild(i);for(var o=t.makeArray(t(m.DATA_TOGGLE)),r=0;r<o.length;r++){var s=e._getParentFromElement(o[r]),a={relatedTarget:o[r]};if(t(s).hasClass(g.SHOW)&&!(n&&("click"===n.type&&/input|textarea/i.test(n.target.tagName)||"focusin"===n.type)&&t.contains(s,n.target))){var l=t.Event(p.HIDE,a);t(s).trigger(l),l.isDefaultPrevented()||(o[r].setAttribute("aria-expanded","false"),t(s).removeClass(g.SHOW).trigger(t.Event(p.HIDDEN,a)))}}}},e._getParentFromElement=function(e){var n=void 0,i=r.getSelectorFromElement(e);return i&&(n=t(i)[0]),n||e.parentNode},e._dataApiKeydownHandler=function(n){if(/(38|40|27|32)/.test(n.which)&&!/input|textarea/i.test(n.target.tagName)&&(n.preventDefault(),n.stopPropagation(),!this.disabled&&!t(this).hasClass(g.DISABLED))){var i=e._getParentFromElement(this),o=t(i).hasClass(g.SHOW);if(!o&&n.which!==f||o&&n.which===f){if(n.which===f){var r=t(i).find(m.DATA_TOGGLE)[0];t(r).trigger("focus")}return void t(this).trigger("click")}var s=t(i).find(m.VISIBLE_ITEMS).get();if(s.length){var a=s.indexOf(n.target);n.which===c&&a>0&&a--,n.which===d&&a<s.length-1&&a++,a<0&&(a=0),s[a].focus()}}},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();t(document).on(p.KEYDOWN_DATA_API,m.DATA_TOGGLE,_._dataApiKeydownHandler).on(p.KEYDOWN_DATA_API,m.ROLE_MENU,_._dataApiKeydownHandler).on(p.KEYDOWN_DATA_API,m.ROLE_LISTBOX,_._dataApiKeydownHandler).on(p.CLICK_DATA_API+" "+p.FOCUSIN_DATA_API,_._clearMenus).on(p.CLICK_DATA_API,m.DATA_TOGGLE,_.prototype.toggle).on(p.CLICK_DATA_API,m.FORM_CHILD,function(t){t.stopPropagation()}),t.fn[e]=_._jQueryInterface,t.fn[e].Constructor=_,t.fn[e].noConflict=function(){return t.fn[e]=h,_._jQueryInterface}}(jQuery),function(t){var e="modal",s="4.0.0-alpha.6",a="bs.modal",l="."+a,h=".data-api",f=t.fn[e],c=300,d=150,u=27,p={backdrop:!0,keyboard:!0,focus:!0,show:!0},g={backdrop:"(boolean|string)",keyboard:"boolean",focus:"boolean",show:"boolean"},m={HIDE:"hide"+l,HIDDEN:"hidden"+l,SHOW:"show"+l,SHOWN:"shown"+l,FOCUSIN:"focusin"+l,RESIZE:"resize"+l,CLICK_DISMISS:"click.dismiss"+l,KEYDOWN_DISMISS:"keydown.dismiss"+l,MOUSEUP_DISMISS:"mouseup.dismiss"+l,MOUSEDOWN_DISMISS:"mousedown.dismiss"+l,CLICK_DATA_API:"click"+l+h},_={SCROLLBAR_MEASURER:"modal-scrollbar-measure",BACKDROP:"modal-backdrop",OPEN:"modal-open",FADE:"fade",SHOW:"show"},v={DIALOG:".modal-dialog",DATA_TOGGLE:'[data-toggle="modal"]',DATA_DISMISS:'[data-dismiss="modal"]',FIXED_CONTENT:".fixed-top, .fixed-bottom, .is-fixed, .sticky-top"},E=function(){function h(e,i){n(this,h),this._config=this._getConfig(i),this._element=e,this._dialog=t(e).find(v.DIALOG)[0],this._backdrop=null,this._isShown=!1,this._isBodyOverflowing=!1,this._ignoreBackdropClick=!1,this._isTransitioning=!1,this._originalBodyPadding=0,this._scrollbarWidth=0}return h.prototype.toggle=function(t){return this._isShown?this.hide():this.show(t)},h.prototype.show=function(e){var n=this;if(this._isTransitioning)throw new Error("Modal is transitioning");r.supportsTransitionEnd()&&t(this._element).hasClass(_.FADE)&&(this._isTransitioning=!0);var i=t.Event(m.SHOW,{relatedTarget:e});t(this._element).trigger(i),this._isShown||i.isDefaultPrevented()||(this._isShown=!0,this._checkScrollbar(),this._setScrollbar(),t(document.body).addClass(_.OPEN),this._setEscapeEvent(),this._setResizeEvent(),t(this._element).on(m.CLICK_DISMISS,v.DATA_DISMISS,function(t){return n.hide(t)}),t(this._dialog).on(m.MOUSEDOWN_DISMISS,function(){t(n._element).one(m.MOUSEUP_DISMISS,function(e){t(e.target).is(n._element)&&(n._ignoreBackdropClick=!0)})}),this._showBackdrop(function(){return n._showElement(e)}))},h.prototype.hide=function(e){var n=this;if(e&&e.preventDefault(),this._isTransitioning)throw new Error("Modal is transitioning");var i=r.supportsTransitionEnd()&&t(this._element).hasClass(_.FADE);i&&(this._isTransitioning=!0);var o=t.Event(m.HIDE);t(this._element).trigger(o),this._isShown&&!o.isDefaultPrevented()&&(this._isShown=!1,this._setEscapeEvent(),this._setResizeEvent(),t(document).off(m.FOCUSIN),t(this._element).removeClass(_.SHOW),t(this._element).off(m.CLICK_DISMISS),t(this._dialog).off(m.MOUSEDOWN_DISMISS),i?t(this._element).one(r.TRANSITION_END,function(t){return n._hideModal(t)}).emulateTransitionEnd(c):this._hideModal())},h.prototype.dispose=function(){t.removeData(this._element,a),t(window,document,this._element,this._backdrop).off(l),this._config=null,this._element=null,this._dialog=null,this._backdrop=null,this._isShown=null,this._isBodyOverflowing=null,this._ignoreBackdropClick=null,this._originalBodyPadding=null,this._scrollbarWidth=null},h.prototype._getConfig=function(n){return n=t.extend({},p,n),r.typeCheckConfig(e,n,g),n},h.prototype._showElement=function(e){var n=this,i=r.supportsTransitionEnd()&&t(this._element).hasClass(_.FADE);this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE||document.body.appendChild(this._element),this._element.style.display="block",this._element.removeAttribute("aria-hidden"),this._element.scrollTop=0,i&&r.reflow(this._element),t(this._element).addClass(_.SHOW),this._config.focus&&this._enforceFocus();var o=t.Event(m.SHOWN,{relatedTarget:e}),s=function(){n._config.focus&&n._element.focus(),n._isTransitioning=!1,t(n._element).trigger(o)};i?t(this._dialog).one(r.TRANSITION_END,s).emulateTransitionEnd(c):s()},h.prototype._enforceFocus=function(){var e=this;t(document).off(m.FOCUSIN).on(m.FOCUSIN,function(n){document===n.target||e._element===n.target||t(e._element).has(n.target).length||e._element.focus()})},h.prototype._setEscapeEvent=function(){var e=this;this._isShown&&this._config.keyboard?t(this._element).on(m.KEYDOWN_DISMISS,function(t){t.which===u&&e.hide()}):this._isShown||t(this._element).off(m.KEYDOWN_DISMISS)},h.prototype._setResizeEvent=function(){var e=this;this._isShown?t(window).on(m.RESIZE,function(t){return e._handleUpdate(t)}):t(window).off(m.RESIZE)},h.prototype._hideModal=function(){var e=this;this._element.style.display="none",this._element.setAttribute("aria-hidden","true"),this._isTransitioning=!1,this._showBackdrop(function(){t(document.body).removeClass(_.OPEN),e._resetAdjustments(),e._resetScrollbar(),t(e._element).trigger(m.HIDDEN)})},h.prototype._removeBackdrop=function(){this._backdrop&&(t(this._backdrop).remove(),this._backdrop=null)},h.prototype._showBackdrop=function(e){var n=this,i=t(this._element).hasClass(_.FADE)?_.FADE:"";if(this._isShown&&this._config.backdrop){var o=r.supportsTransitionEnd()&&i;if(this._backdrop=document.createElement("div"),this._backdrop.className=_.BACKDROP,i&&t(this._backdrop).addClass(i),t(this._backdrop).appendTo(document.body),t(this._element).on(m.CLICK_DISMISS,function(t){if(n._ignoreBackdropClick)return void(n._ignoreBackdropClick=!1);t.target===t.currentTarget&&("static"===n._config.backdrop?n._element.focus():n.hide())}),o&&r.reflow(this._backdrop),t(this._backdrop).addClass(_.SHOW),!e)return;if(!o)return void e();t(this._backdrop).one(r.TRANSITION_END,e).emulateTransitionEnd(d)}else if(!this._isShown&&this._backdrop){t(this._backdrop).removeClass(_.SHOW);var s=function(){n._removeBackdrop(),e&&e()};r.supportsTransitionEnd()&&t(this._element).hasClass(_.FADE)?t(this._backdrop).one(r.TRANSITION_END,s).emulateTransitionEnd(d):s()}else e&&e()},h.prototype._handleUpdate=function(){this._adjustDialog()},h.prototype._adjustDialog=function(){var t=this._element.scrollHeight>document.documentElement.clientHeight;!this._isBodyOverflowing&&t&&(this._element.style.paddingLeft=this._scrollbarWidth+"px"),this._isBodyOverflowing&&!t&&(this._element.style.paddingRight=this._scrollbarWidth+"px")},h.prototype._resetAdjustments=function(){this._element.style.paddingLeft="",this._element.style.paddingRight=""},h.prototype._checkScrollbar=function(){this._isBodyOverflowing=document.body.clientWidth<window.innerWidth,this._scrollbarWidth=this._getScrollbarWidth()},h.prototype._setScrollbar=function(){var e=parseInt(t(v.FIXED_CONTENT).css("padding-right")||0,10);this._originalBodyPadding=document.body.style.paddingRight||"",this._isBodyOverflowing&&(document.body.style.paddingRight=e+this._scrollbarWidth+"px")},h.prototype._resetScrollbar=function(){document.body.style.paddingRight=this._originalBodyPadding},h.prototype._getScrollbarWidth=function(){var t=document.createElement("div");t.className=_.SCROLLBAR_MEASURER,document.body.appendChild(t);var e=t.offsetWidth-t.clientWidth;return document.body.removeChild(t),e},h._jQueryInterface=function(e,n){return this.each(function(){var o=t(this).data(a),r=t.extend({},h.Default,t(this).data(),"object"===(void 0===e?"undefined":i(e))&&e);if(o||(o=new h(this,r),t(this).data(a,o)),"string"==typeof e){if(o[e]===undefined)throw new Error('No method named "'+e+'"');o[e](n)}else r.show&&o.show(n)})},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return p}}]),h}();t(document).on(m.CLICK_DATA_API,v.DATA_TOGGLE,function(e){var n=this,i=void 0,o=r.getSelectorFromElement(this);o&&(i=t(o)[0]);var s=t(i).data(a)?"toggle":t.extend({},t(i).data(),t(this).data());"A"!==this.tagName&&"AREA"!==this.tagName||e.preventDefault();var l=t(i).one(m.SHOW,function(e){e.isDefaultPrevented()||l.one(m.HIDDEN,function(){t(n).is(":visible")&&n.focus()})});E._jQueryInterface.call(t(i),s,this)}),t.fn[e]=E._jQueryInterface,t.fn[e].Constructor=E,t.fn[e].noConflict=function(){return t.fn[e]=f,E._jQueryInterface}}(jQuery),function(t){var e="scrollspy",s="4.0.0-alpha.6",a="bs.scrollspy",l="."+a,h=".data-api",f=t.fn[e],c={offset:10,method:"auto",target:""},d={offset:"number",method:"string",target:"(string|element)"},u={ACTIVATE:"activate"+l,SCROLL:"scroll"+l,LOAD_DATA_API:"load"+l+h},p={DROPDOWN_ITEM:"dropdown-item",DROPDOWN_MENU:"dropdown-menu",NAV_LINK:"nav-link",NAV:"nav",ACTIVE:"active"},g={DATA_SPY:'[data-spy="scroll"]',ACTIVE:".active",LIST_ITEM:".list-item",LI:"li",LI_DROPDOWN:"li.dropdown",NAV_LINKS:".nav-link",DROPDOWN:".dropdown",DROPDOWN_ITEMS:".dropdown-item",DROPDOWN_TOGGLE:".dropdown-toggle"},m={OFFSET:"offset",POSITION:"position"},_=function(){function h(e,i){var o=this;n(this,h),this._element=e,this._scrollElement="BODY"===e.tagName?window:e,this._config=this._getConfig(i),this._selector=this._config.target+" "+g.NAV_LINKS+","+this._config.target+" "+g.DROPDOWN_ITEMS,this._offsets=[],this._targets=[],this._activeTarget=null,this._scrollHeight=0,t(this._scrollElement).on(u.SCROLL,function(t){return o._process(t)}),this.refresh(),this._process()}return h.prototype.refresh=function(){var e=this,n=this._scrollElement!==this._scrollElement.window?m.POSITION:m.OFFSET,i="auto"===this._config.method?n:this._config.method,o=i===m.POSITION?this._getScrollTop():0;this._offsets=[],this._targets=[],this._scrollHeight=this._getScrollHeight(),t.makeArray(t(this._selector)).map(function(e){var n=void 0,s=r.getSelectorFromElement(e);return s&&(n=t(s)[0]),n&&(n.offsetWidth||n.offsetHeight)?[t(n)[i]().top+o,s]:null}).filter(function(t){return t}).sort(function(t,e){return t[0]-e[0]}).forEach(function(t){e._offsets.push(t[0]),e._targets.push(t[1])})},h.prototype.dispose=function(){t.removeData(this._element,a),t(this._scrollElement).off(l),this._element=null,this._scrollElement=null,this._config=null,this._selector=null,this._offsets=null,this._targets=null,this._activeTarget=null,this._scrollHeight=null},h.prototype._getConfig=function(n){if(n=t.extend({},c,n),"string"!=typeof n.target){var i=t(n.target).attr("id");i||(i=r.getUID(e),t(n.target).attr("id",i)),n.target="#"+i}return r.typeCheckConfig(e,n,d),n},h.prototype._getScrollTop=function(){return this._scrollElement===window?this._scrollElement.pageYOffset:this._scrollElement.scrollTop},h.prototype._getScrollHeight=function(){return this._scrollElement.scrollHeight||Math.max(document.body.scrollHeight,document.documentElement.scrollHeight)},h.prototype._getOffsetHeight=function(){return this._scrollElement===window?window.innerHeight:this._scrollElement.offsetHeight},h.prototype._process=function(){var t=this._getScrollTop()+this._config.offset,e=this._getScrollHeight(),n=this._config.offset+e-this._getOffsetHeight();if(this._scrollHeight!==e&&this.refresh(),t>=n){var i=this._targets[this._targets.length-1];return void(this._activeTarget!==i&&this._activate(i))}if(this._activeTarget&&t<this._offsets[0]&&this._offsets[0]>0)return this._activeTarget=null,void this._clear();for(var o=this._offsets.length;o--;){this._activeTarget!==this._targets[o]&&t>=this._offsets[o]&&(this._offsets[o+1]===undefined||t<this._offsets[o+1])&&this._activate(this._targets[o])}},h.prototype._activate=function(e){this._activeTarget=e,this._clear();var n=this._selector.split(",");n=n.map(function(t){return t+'[data-target="'+e+'"],'+t+'[href="'+e+'"]'});var i=t(n.join(","));i.hasClass(p.DROPDOWN_ITEM)?(i.closest(g.DROPDOWN).find(g.DROPDOWN_TOGGLE).addClass(p.ACTIVE),i.addClass(p.ACTIVE)):i.parents(g.LI).find("> "+g.NAV_LINKS).addClass(p.ACTIVE),t(this._scrollElement).trigger(u.ACTIVATE,{relatedTarget:e})},h.prototype._clear=function(){t(this._selector).filter(g.ACTIVE).removeClass(p.ACTIVE)},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o="object"===(void 0===e?"undefined":i(e))&&e;if(n||(n=new h(this,o),t(this).data(a,n)),"string"==typeof e){if(n[e]===undefined)throw new Error('No method named "'+e+'"');n[e]()}})},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return c}}]),h}();t(window).on(u.LOAD_DATA_API,function(){for(var e=t.makeArray(t(g.DATA_SPY)),n=e.length;n--;){var i=t(e[n]);_._jQueryInterface.call(i,i.data())}}),t.fn[e]=_._jQueryInterface,t.fn[e].Constructor=_,t.fn[e].noConflict=function(){return t.fn[e]=f,_._jQueryInterface}}(jQuery),function(t){var e="tab",i="4.0.0-alpha.6",s="bs.tab",a="."+s,l=".data-api",h=t.fn[e],f=150,c={HIDE:"hide"+a,HIDDEN:"hidden"+a,SHOW:"show"+a,SHOWN:"shown"+a,CLICK_DATA_API:"click"+a+l},d={DROPDOWN_MENU:"dropdown-menu",ACTIVE:"active",DISABLED:"disabled",FADE:"fade",SHOW:"show"},u={A:"a",LI:"li",DROPDOWN:".dropdown",LIST:"ul:not(.dropdown-menu), ol:not(.dropdown-menu), nav:not(.dropdown-menu)",FADE_CHILD:"> .nav-item .fade, > .fade",ACTIVE:".active",ACTIVE_CHILD:"> .nav-item > .active, > .active",DATA_TOGGLE:'[data-toggle="tab"], [data-toggle="pill"]',DROPDOWN_TOGGLE:".dropdown-toggle",DROPDOWN_ACTIVE_CHILD:"> .dropdown-menu .active"},p=function(){function e(t){n(this,e),this._element=t}return e.prototype.show=function(){var e=this;if(!(this._element.parentNode&&this._element.parentNode.nodeType===Node.ELEMENT_NODE&&t(this._element).hasClass(d.ACTIVE)||t(this._element).hasClass(d.DISABLED))){var n=void 0,i=void 0,o=t(this._element).closest(u.LIST)[0],s=r.getSelectorFromElement(this._element);o&&(i=t.makeArray(t(o).find(u.ACTIVE)),i=i[i.length-1]);var a=t.Event(c.HIDE,{relatedTarget:this._element}),l=t.Event(c.SHOW,{relatedTarget:i});if(i&&t(i).trigger(a),t(this._element).trigger(l),!l.isDefaultPrevented()&&!a.isDefaultPrevented()){s&&(n=t(s)[0]),this._activate(this._element,o);var h=function(){var n=t.Event(c.HIDDEN,{relatedTarget:e._element}),o=t.Event(c.SHOWN,{relatedTarget:i});t(i).trigger(n),t(e._element).trigger(o)};n?this._activate(n,n.parentNode,h):h()}}},e.prototype.dispose=function(){t.removeClass(this._element,s),this._element=null},e.prototype._activate=function(e,n,i){var o=this,s=t(n).find(u.ACTIVE_CHILD)[0],a=i&&r.supportsTransitionEnd()&&(s&&t(s).hasClass(d.FADE)||Boolean(t(n).find(u.FADE_CHILD)[0])),l=function(){return o._transitionComplete(e,s,a,i)};s&&a?t(s).one(r.TRANSITION_END,l).emulateTransitionEnd(f):l(),s&&t(s).removeClass(d.SHOW)},e.prototype._transitionComplete=function(e,n,i,o){if(n){t(n).removeClass(d.ACTIVE);var s=t(n.parentNode).find(u.DROPDOWN_ACTIVE_CHILD)[0];s&&t(s).removeClass(d.ACTIVE),n.setAttribute("aria-expanded",!1)}if(t(e).addClass(d.ACTIVE),e.setAttribute("aria-expanded",!0),i?(r.reflow(e),t(e).addClass(d.SHOW)):t(e).removeClass(d.FADE),e.parentNode&&t(e.parentNode).hasClass(d.DROPDOWN_MENU)){var a=t(e).closest(u.DROPDOWN)[0];a&&t(a).find(u.DROPDOWN_TOGGLE).addClass(d.ACTIVE),e.setAttribute("aria-expanded",!0)}o&&o()},e._jQueryInterface=function(n){return this.each(function(){var i=t(this),o=i.data(s);if(o||(o=new e(this),i.data(s,o)),"string"==typeof n){if(o[n]===undefined)throw new Error('No method named "'+n+'"');o[n]()}})},o(e,null,[{key:"VERSION",get:function(){return i}}]),e}();t(document).on(c.CLICK_DATA_API,u.DATA_TOGGLE,function(e){e.preventDefault(),p._jQueryInterface.call(t(this),"show")}),t.fn[e]=p._jQueryInterface,t.fn[e].Constructor=p,t.fn[e].noConflict=function(){return t.fn[e]=h,p._jQueryInterface}}(jQuery),function(t){if("undefined"==typeof Tether)throw new Error("Bootstrap tooltips require Tether (http://tether.io/)");var e="tooltip",s="4.0.0-alpha.6",a="bs.tooltip",l="."+a,h=t.fn[e],f=150,c="bs-tether",d={animation:!0,template:'<div class="tooltip" role="tooltip"><div class="tooltip-inner"></div></div>',trigger:"hover focus",title:"",delay:0,html:!1,selector:!1,placement:"top",offset:"0 0",constraints:[],container:!1},u={animation:"boolean",template:"string",title:"(string|element|function)",trigger:"string",delay:"(number|object)",html:"boolean",selector:"(string|boolean)",placement:"(string|function)",offset:"string",constraints:"array",container:"(string|element|boolean)"},p={TOP:"bottom center",RIGHT:"middle left",BOTTOM:"top center",LEFT:"middle right"},g={SHOW:"show",OUT:"out"},m={HIDE:"hide"+l,HIDDEN:"hidden"+l,SHOW:"show"+l,SHOWN:"shown"+l,INSERTED:"inserted"+l,CLICK:"click"+l,FOCUSIN:"focusin"+l,FOCUSOUT:"focusout"+l,MOUSEENTER:"mouseenter"+l,MOUSELEAVE:"mouseleave"+l},_={FADE:"fade",SHOW:"show"},v={TOOLTIP:".tooltip",TOOLTIP_INNER:".tooltip-inner"},E={element:!1,enabled:!1},y={HOVER:"hover",FOCUS:"focus",CLICK:"click",MANUAL:"manual"},T=function(){function h(t,e){n(this,h),this._isEnabled=!0,this._timeout=0,this._hoverState="",this._activeTrigger={},this._isTransitioning=!1,this._tether=null,this.element=t,this.config=this._getConfig(e),this.tip=null,this._setListeners()}return h.prototype.enable=function(){this._isEnabled=!0},h.prototype.disable=function(){this._isEnabled=!1},h.prototype.toggleEnabled=function(){this._isEnabled=!this._isEnabled},h.prototype.toggle=function(e){if(e){var n=this.constructor.DATA_KEY,i=t(e.currentTarget).data(n);i||(i=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(n,i)),i._activeTrigger.click=!i._activeTrigger.click,i._isWithActiveTrigger()?i._enter(null,i):i._leave(null,i)}else{if(t(this.getTipElement()).hasClass(_.SHOW))return void this._leave(null,this);this._enter(null,this)}},h.prototype.dispose=function(){clearTimeout(this._timeout),this.cleanupTether(),t.removeData(this.element,this.constructor.DATA_KEY),t(this.element).off(this.constructor.EVENT_KEY),t(this.element).closest(".modal").off("hide.bs.modal"),this.tip&&t(this.tip).remove(),this._isEnabled=null,this._timeout=null,this._hoverState=null,this._activeTrigger=null,this._tether=null,this.element=null,this.config=null,this.tip=null},h.prototype.show=function(){var e=this;if("none"===t(this.element).css("display"))throw new Error("Please use show on visible elements");var n=t.Event(this.constructor.Event.SHOW);if(this.isWithContent()&&this._isEnabled){if(this._isTransitioning)throw new Error("Tooltip is transitioning");t(this.element).trigger(n);var i=t.contains(this.element.ownerDocument.documentElement,this.element);if(n.isDefaultPrevented()||!i)return;var o=this.getTipElement(),s=r.getUID(this.constructor.NAME);o.setAttribute("id",s),this.element.setAttribute("aria-describedby",s),this.setContent(),this.config.animation&&t(o).addClass(_.FADE);var a="function"==typeof this.config.placement?this.config.placement.call(this,o,this.element):this.config.placement,l=this._getAttachment(a),f=!1===this.config.container?document.body:t(this.config.container);t(o).data(this.constructor.DATA_KEY,this).appendTo(f),t(this.element).trigger(this.constructor.Event.INSERTED),this._tether=new Tether({attachment:l,element:o,target:this.element,classes:E,classPrefix:c,offset:this.config.offset,constraints:this.config.constraints,addTargetClasses:!1}),r.reflow(o),this._tether.position(),t(o).addClass(_.SHOW);var d=function(){var n=e._hoverState;e._hoverState=null,e._isTransitioning=!1,t(e.element).trigger(e.constructor.Event.SHOWN),n===g.OUT&&e._leave(null,e)};if(r.supportsTransitionEnd()&&t(this.tip).hasClass(_.FADE))return this._isTransitioning=!0,void t(this.tip).one(r.TRANSITION_END,d).emulateTransitionEnd(h._TRANSITION_DURATION);d()}},h.prototype.hide=function(e){var n=this,i=this.getTipElement(),o=t.Event(this.constructor.Event.HIDE);if(this._isTransitioning)throw new Error("Tooltip is transitioning");var s=function(){n._hoverState!==g.SHOW&&i.parentNode&&i.parentNode.removeChild(i),n.element.removeAttribute("aria-describedby"),t(n.element).trigger(n.constructor.Event.HIDDEN),n._isTransitioning=!1,n.cleanupTether(),e&&e()};t(this.element).trigger(o),o.isDefaultPrevented()||(t(i).removeClass(_.SHOW),this._activeTrigger[y.CLICK]=!1,this._activeTrigger[y.FOCUS]=!1,this._activeTrigger[y.HOVER]=!1,r.supportsTransitionEnd()&&t(this.tip).hasClass(_.FADE)?(this._isTransitioning=!0,t(i).one(r.TRANSITION_END,s).emulateTransitionEnd(f)):s(),this._hoverState="")},h.prototype.isWithContent=function(){return Boolean(this.getTitle())},h.prototype.getTipElement=function(){return this.tip=this.tip||t(this.config.template)[0]},h.prototype.setContent=function(){var e=t(this.getTipElement());this.setElementContent(e.find(v.TOOLTIP_INNER),this.getTitle()),e.removeClass(_.FADE+" "+_.SHOW),this.cleanupTether()},h.prototype.setElementContent=function(e,n){var o=this.config.html;"object"===(void 0===n?"undefined":i(n))&&(n.nodeType||n.jquery)?o?t(n).parent().is(e)||e.empty().append(n):e.text(t(n).text()):e[o?"html":"text"](n)},h.prototype.getTitle=function(){var t=this.element.getAttribute("data-original-title")
;return t||(t="function"==typeof this.config.title?this.config.title.call(this.element):this.config.title),t},h.prototype.cleanupTether=function(){this._tether&&this._tether.destroy()},h.prototype._getAttachment=function(t){return p[t.toUpperCase()]},h.prototype._setListeners=function(){var e=this;this.config.trigger.split(" ").forEach(function(n){if("click"===n)t(e.element).on(e.constructor.Event.CLICK,e.config.selector,function(t){return e.toggle(t)});else if(n!==y.MANUAL){var i=n===y.HOVER?e.constructor.Event.MOUSEENTER:e.constructor.Event.FOCUSIN,o=n===y.HOVER?e.constructor.Event.MOUSELEAVE:e.constructor.Event.FOCUSOUT;t(e.element).on(i,e.config.selector,function(t){return e._enter(t)}).on(o,e.config.selector,function(t){return e._leave(t)})}t(e.element).closest(".modal").on("hide.bs.modal",function(){return e.hide()})}),this.config.selector?this.config=t.extend({},this.config,{trigger:"manual",selector:""}):this._fixTitle()},h.prototype._fixTitle=function(){var t=i(this.element.getAttribute("data-original-title"));(this.element.getAttribute("title")||"string"!==t)&&(this.element.setAttribute("data-original-title",this.element.getAttribute("title")||""),this.element.setAttribute("title",""))},h.prototype._enter=function(e,n){var i=this.constructor.DATA_KEY;return n=n||t(e.currentTarget).data(i),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusin"===e.type?y.FOCUS:y.HOVER]=!0),t(n.getTipElement()).hasClass(_.SHOW)||n._hoverState===g.SHOW?void(n._hoverState=g.SHOW):(clearTimeout(n._timeout),n._hoverState=g.SHOW,n.config.delay&&n.config.delay.show?void(n._timeout=setTimeout(function(){n._hoverState===g.SHOW&&n.show()},n.config.delay.show)):void n.show())},h.prototype._leave=function(e,n){var i=this.constructor.DATA_KEY;if(n=n||t(e.currentTarget).data(i),n||(n=new this.constructor(e.currentTarget,this._getDelegateConfig()),t(e.currentTarget).data(i,n)),e&&(n._activeTrigger["focusout"===e.type?y.FOCUS:y.HOVER]=!1),!n._isWithActiveTrigger()){if(clearTimeout(n._timeout),n._hoverState=g.OUT,!n.config.delay||!n.config.delay.hide)return void n.hide();n._timeout=setTimeout(function(){n._hoverState===g.OUT&&n.hide()},n.config.delay.hide)}},h.prototype._isWithActiveTrigger=function(){for(var t in this._activeTrigger)if(this._activeTrigger[t])return!0;return!1},h.prototype._getConfig=function(n){return n=t.extend({},this.constructor.Default,t(this.element).data(),n),n.delay&&"number"==typeof n.delay&&(n.delay={show:n.delay,hide:n.delay}),r.typeCheckConfig(e,n,this.constructor.DefaultType),n},h.prototype._getDelegateConfig=function(){var t={};if(this.config)for(var e in this.config)this.constructor.Default[e]!==this.config[e]&&(t[e]=this.config[e]);return t},h._jQueryInterface=function(e){return this.each(function(){var n=t(this).data(a),o="object"===(void 0===e?"undefined":i(e))&&e;if((n||!/dispose|hide/.test(e))&&(n||(n=new h(this,o),t(this).data(a,n)),"string"==typeof e)){if(n[e]===undefined)throw new Error('No method named "'+e+'"');n[e]()}})},o(h,null,[{key:"VERSION",get:function(){return s}},{key:"Default",get:function(){return d}},{key:"NAME",get:function(){return e}},{key:"DATA_KEY",get:function(){return a}},{key:"Event",get:function(){return m}},{key:"EVENT_KEY",get:function(){return l}},{key:"DefaultType",get:function(){return u}}]),h}();return t.fn[e]=T._jQueryInterface,t.fn[e].Constructor=T,t.fn[e].noConflict=function(){return t.fn[e]=h,T._jQueryInterface},T}(jQuery));!function(r){var a="popover",l="4.0.0-alpha.6",h="bs.popover",f="."+h,c=r.fn[a],d=r.extend({},s.Default,{placement:"right",trigger:"click",content:"",template:'<div class="popover" role="tooltip"><h3 class="popover-title"></h3><div class="popover-content"></div></div>'}),u=r.extend({},s.DefaultType,{content:"(string|element|function)"}),p={FADE:"fade",SHOW:"show"},g={TITLE:".popover-title",CONTENT:".popover-content"},m={HIDE:"hide"+f,HIDDEN:"hidden"+f,SHOW:"show"+f,SHOWN:"shown"+f,INSERTED:"inserted"+f,CLICK:"click"+f,FOCUSIN:"focusin"+f,FOCUSOUT:"focusout"+f,MOUSEENTER:"mouseenter"+f,MOUSELEAVE:"mouseleave"+f},_=function(s){function c(){return n(this,c),t(this,s.apply(this,arguments))}return e(c,s),c.prototype.isWithContent=function(){return this.getTitle()||this._getContent()},c.prototype.getTipElement=function(){return this.tip=this.tip||r(this.config.template)[0]},c.prototype.setContent=function(){var t=r(this.getTipElement());this.setElementContent(t.find(g.TITLE),this.getTitle()),this.setElementContent(t.find(g.CONTENT),this._getContent()),t.removeClass(p.FADE+" "+p.SHOW),this.cleanupTether()},c.prototype._getContent=function(){return this.element.getAttribute("data-content")||("function"==typeof this.config.content?this.config.content.call(this.element):this.config.content)},c._jQueryInterface=function(t){return this.each(function(){var e=r(this).data(h),n="object"===(void 0===t?"undefined":i(t))?t:null;if((e||!/destroy|hide/.test(t))&&(e||(e=new c(this,n),r(this).data(h,e)),"string"==typeof t)){if(e[t]===undefined)throw new Error('No method named "'+t+'"');e[t]()}})},o(c,null,[{key:"VERSION",get:function(){return l}},{key:"Default",get:function(){return d}},{key:"NAME",get:function(){return a}},{key:"DATA_KEY",get:function(){return h}},{key:"Event",get:function(){return m}},{key:"EVENT_KEY",get:function(){return f}},{key:"DefaultType",get:function(){return u}}]),c}(s);r.fn[a]=_._jQueryInterface,r.fn[a].Constructor=_,r.fn[a].noConflict=function(){return r.fn[a]=c,_._jQueryInterface}}(jQuery)}(),decko.slotReady(function(t){t.find(".modal.fade").on("loaded.bs.modal",function(){$(this).trigger("slotReady")}),t.find("[data-toggle='modal']").off("click").on("click",function(t){var e,n,i;return t.preventDefault(),t.stopPropagation(),e=$(this),n=e.attr("href"),i=e.data("target"),$(i).modal("show"),$.ajax({url:n,type:"GET",success:function(t){return $(i+" .modal-content").html(t),$(i).trigger("loaded.bs.modal")},error:function(t){return $(i+" .modal-content").html(t.responseText),$(i).trigger("loaded.bs.modal")}}),!1})});
//script: pdfjs hosts
PdfjsViewer.hosted_viewer_origins=["http://wikirate.org","http://wikirate.s3.amazonaws.com"];
//script: select2
/*!
 * Select2 4.0.3
 * https://select2.github.io
 *
 * Released under the MIT license
 * https://github.com/select2/select2/blob/master/LICENSE.md
 */
!function(e){"function"==typeof define&&define.amd?define(["jquery"],e):e("object"==typeof exports?require("jquery"):jQuery)}(function(e){var t=function(){if(e&&e.fn&&e.fn.select2&&e.fn.select2.amd)var t=e.fn.select2.amd;var t;return function(){if(!t||!t.requirejs){t?n=t:t={};/**
 * @license almond 0.3.1 Copyright (c) 2011-2014, The Dojo Foundation All Rights Reserved.
 * Available via the MIT or new BSD license.
 * see: http://github.com/jrburke/almond for details
 */
var e,n,i;!function(t){function r(e,t){return $.call(e,t)}function o(e,t){var n,i,r,o,s,a,l,c,u,d,p,h=t&&t.split("/"),f=y.map,g=f&&f["*"]||{};if(e&&"."===e.charAt(0))if(t){for(e=e.split("/"),s=e.length-1,y.nodeIdCompat&&b.test(e[s])&&(e[s]=e[s].replace(b,"")),e=h.slice(0,h.length-1).concat(e),u=0;u<e.length;u+=1)if("."===(p=e[u]))e.splice(u,1),u-=1;else if(".."===p){if(1===u&&(".."===e[2]||".."===e[0]))break;u>0&&(e.splice(u-1,2),u-=2)}e=e.join("/")}else 0===e.indexOf("./")&&(e=e.substring(2));if((h||g)&&f){for(n=e.split("/"),u=n.length;u>0;u-=1){if(i=n.slice(0,u).join("/"),h)for(d=h.length;d>0;d-=1)if((r=f[h.slice(0,d).join("/")])&&(r=r[i])){o=r,a=u;break}if(o)break;!l&&g&&g[i]&&(l=g[i],c=u)}!o&&l&&(o=l,a=c),o&&(n.splice(0,a,o),e=n.join("/"))}return e}function s(e,n){return function(){var i=w.call(arguments,0);return"string"!=typeof i[0]&&1===i.length&&i.push(null),h.apply(t,i.concat([e,n]))}}function a(e){return function(t){return o(t,e)}}function l(e){return function(t){m[e]=t}}function c(e){if(r(v,e)){var n=v[e];delete v[e],_[e]=!0,p.apply(t,n)}if(!r(m,e)&&!r(_,e))throw new Error("No "+e);return m[e]}function u(e){var t,n=e?e.indexOf("!"):-1;return n>-1&&(t=e.substring(0,n),e=e.substring(n+1,e.length)),[t,e]}function d(e){return function(){return y&&y.config&&y.config[e]||{}}}var p,h,f,g,m={},v={},y={},_={},$=Object.prototype.hasOwnProperty,w=[].slice,b=/\.js$/;f=function(e,t){var n,i=u(e),r=i[0];return e=i[1],r&&(r=o(r,t),n=c(r)),r?e=n&&n.normalize?n.normalize(e,a(t)):o(e,t):(e=o(e,t),i=u(e),r=i[0],e=i[1],r&&(n=c(r))),{f:r?r+"!"+e:e,n:e,pr:r,p:n}},g={require:function(e){return s(e)},exports:function(e){var t=m[e];return void 0!==t?t:m[e]={}},module:function(e){return{id:e,uri:"",exports:m[e],config:d(e)}}},p=function(e,n,i,o){var a,u,d,p,h,y,$=[],w=typeof i;if(o=o||e,"undefined"===w||"function"===w){for(n=!n.length&&i.length?["require","exports","module"]:n,h=0;h<n.length;h+=1)if(p=f(n[h],o),"require"===(u=p.f))$[h]=g.require(e);else if("exports"===u)$[h]=g.exports(e),y=!0;else if("module"===u)a=$[h]=g.module(e);else if(r(m,u)||r(v,u)||r(_,u))$[h]=c(u);else{if(!p.p)throw new Error(e+" missing "+u);p.p.load(p.n,s(o,!0),l(u),{}),$[h]=m[u]}d=i?i.apply(m[e],$):undefined,e&&(a&&a.exports!==t&&a.exports!==m[e]?m[e]=a.exports:d===t&&y||(m[e]=d))}else e&&(m[e]=i)},e=n=h=function(e,n,i,r,o){if("string"==typeof e)return g[e]?g[e](n):c(f(e,n).f);if(!e.splice){if(y=e,y.deps&&h(y.deps,y.callback),!n)return;n.splice?(e=n,n=i,i=null):e=t}return n=n||function(){},"function"==typeof i&&(i=r,r=o),r?p(t,e,n,i):setTimeout(function(){p(t,e,n,i)},4),h},h.config=function(e){return h(e)},e._defined=m,i=function(e,t,n){if("string"!=typeof e)throw new Error("See almond README: incorrect module build, no module name");t.splice||(n=t,t=[]),r(m,e)||r(v,e)||(v[e]=[e,t,n])},i.amd={jQuery:!0}}(),t.requirejs=e,t.require=n,t.define=i}}(),t.define("almond",function(){}),t.define("jquery",[],function(){var t=e||$;return null==t&&console&&console.error&&console.error("Select2: An instance of jQuery or a jQuery-compatible library was not found. Make sure that you are including jQuery before Select2 on your web page."),t}),t.define("select2/utils",["jquery"],function(e){function t(e){var t=e.prototype,n=[];for(var i in t){"function"==typeof t[i]&&("constructor"!==i&&n.push(i))}return n}var n={};n.Extend=function(e,t){function n(){this.constructor=e}var i={}.hasOwnProperty;for(var r in t)i.call(t,r)&&(e[r]=t[r]);return n.prototype=t.prototype,e.prototype=new n,e.__super__=t.prototype,e},n.Decorate=function(e,n){function i(){var t=Array.prototype.unshift,i=n.prototype.constructor.length,r=e.prototype.constructor;i>0&&(t.call(arguments,e.prototype.constructor),r=n.prototype.constructor),r.apply(this,arguments)}function r(){this.constructor=i}var o=t(n),s=t(e);n.displayName=e.displayName,i.prototype=new r;for(var a=0;a<s.length;a++){var l=s[a];i.prototype[l]=e.prototype[l]}for(var c=(function(e){var t=function(){};e in i.prototype&&(t=i.prototype[e]);var r=n.prototype[e];return function(){return Array.prototype.unshift.call(arguments,t),r.apply(this,arguments)}}),u=0;u<o.length;u++){var d=o[u];i.prototype[d]=c(d)}return i};var i=function(){this.listeners={}};return i.prototype.on=function(e,t){this.listeners=this.listeners||{},e in this.listeners?this.listeners[e].push(t):this.listeners[e]=[t]},i.prototype.trigger=function(e){var t=Array.prototype.slice,n=t.call(arguments,1);this.listeners=this.listeners||{},null==n&&(n=[]),0===n.length&&n.push({}),n[0]._type=e,e in this.listeners&&this.invoke(this.listeners[e],t.call(arguments,1)),"*"in this.listeners&&this.invoke(this.listeners["*"],arguments)},i.prototype.invoke=function(e,t){for(var n=0,i=e.length;n<i;n++)e[n].apply(this,t)},n.Observable=i,n.generateChars=function(e){for(var t="",n=0;n<e;n++){t+=Math.floor(36*Math.random()).toString(36)}return t},n.bind=function(e,t){return function(){e.apply(t,arguments)}},n._convertData=function(e){for(var t in e){var n=t.split("-"),i=e;if(1!==n.length){for(var r=0;r<n.length;r++){var o=n[r];o=o.substring(0,1).toLowerCase()+o.substring(1),o in i||(i[o]={}),r==n.length-1&&(i[o]=e[t]),i=i[o]}delete e[t]}}return e},n.hasScroll=function(t,n){var i=e(n),r=n.style.overflowX,o=n.style.overflowY;return(r!==o||"hidden"!==o&&"visible"!==o)&&("scroll"===r||"scroll"===o||(i.innerHeight()<n.scrollHeight||i.innerWidth()<n.scrollWidth))},n.escapeMarkup=function(e){var t={"\\":"&#92;","&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#47;"};return"string"!=typeof e?e:String(e).replace(/[&<>"'\/\\]/g,function(e){return t[e]})},n.appendMany=function(t,n){if("1.7"===e.fn.jquery.substr(0,3)){var i=e();e.map(n,function(e){i=i.add(e)}),n=i}t.append(n)},n}),t.define("select2/results",["jquery","./utils"],function(e,t){function n(e,t,i){this.$element=e,this.data=i,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<ul class="select2-results__options" role="tree"></ul>');return this.options.get("multiple")&&t.attr("aria-multiselectable","true"),this.$results=t,t},n.prototype.clear=function(){this.$results.empty()},n.prototype.displayMessage=function(t){var n=this.options.get("escapeMarkup");this.clear(),this.hideLoading();var i=e('<li role="treeitem" aria-live="assertive" class="select2-results__option"></li>'),r=this.options.get("translations").get(t.message);i.append(n(r(t.args))),i[0].className+=" select2-results__message",this.$results.append(i)},n.prototype.hideMessages=function(){this.$results.find(".select2-results__message").remove()},n.prototype.append=function(e){this.hideLoading();var t=[];if(null==e.results||0===e.results.length)return void(0===this.$results.children().length&&this.trigger("results:message",{message:"noResults"}));e.results=this.sort(e.results);for(var n=0;n<e.results.length;n++){var i=e.results[n],r=this.option(i);t.push(r)}this.$results.append(t)},n.prototype.position=function(e,t){t.find(".select2-results").append(e)},n.prototype.sort=function(e){return this.options.get("sorter")(e)},n.prototype.highlightFirstItem=function(){var e=this.$results.find(".select2-results__option[aria-selected]"),t=e.filter("[aria-selected=true]");t.length>0?t.first().trigger("mouseenter"):e.first().trigger("mouseenter"),this.ensureHighlightVisible()},n.prototype.setClasses=function(){var t=this;this.data.current(function(n){var i=e.map(n,function(e){return e.id.toString()});t.$results.find(".select2-results__option[aria-selected]").each(function(){var t=e(this),n=e.data(this,"data"),r=""+n.id;null!=n.element&&n.element.selected||null==n.element&&e.inArray(r,i)>-1?t.attr("aria-selected","true"):t.attr("aria-selected","false")})})},n.prototype.showLoading=function(e){this.hideLoading();var t=this.options.get("translations").get("searching"),n={disabled:!0,loading:!0,text:t(e)},i=this.option(n);i.className+=" loading-results",this.$results.prepend(i)},n.prototype.hideLoading=function(){this.$results.find(".loading-results").remove()},n.prototype.option=function(t){var n=document.createElement("li");n.className="select2-results__option";var i={role:"treeitem","aria-selected":"false"};t.disabled&&(delete i["aria-selected"],i["aria-disabled"]="true"),null==t.id&&delete i["aria-selected"],null!=t._resultId&&(n.id=t._resultId),t.title&&(n.title=t.title),t.children&&(i.role="group",i["aria-label"]=t.text,delete i["aria-selected"]);for(var r in i){var o=i[r];n.setAttribute(r,o)}if(t.children){var s=e(n),a=document.createElement("strong");a.className="select2-results__group";e(a);this.template(t,a);for(var l=[],c=0;c<t.children.length;c++){var u=t.children[c],d=this.option(u);l.push(d)}var p=e("<ul></ul>",{"class":"select2-results__options select2-results__options--nested"});p.append(l),s.append(a),s.append(p)}else this.template(t,n);return e.data(n,"data",t),n},n.prototype.bind=function(t){var n=this,i=t.id+"-results";this.$results.attr("id",i),t.on("results:all",function(e){n.clear(),n.append(e.data),t.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),t.on("results:append",function(e){n.append(e.data),t.isOpen()&&n.setClasses()}),t.on("query",function(e){n.hideMessages(),n.showLoading(e)}),t.on("select",function(){t.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),t.on("unselect",function(){t.isOpen()&&(n.setClasses(),n.highlightFirstItem())}),t.on("open",function(){n.$results.attr("aria-expanded","true"),n.$results.attr("aria-hidden","false"),n.setClasses(),n.ensureHighlightVisible()}),t.on("close",function(){n.$results.attr("aria-expanded","false"),n.$results.attr("aria-hidden","true"),n.$results.removeAttr("aria-activedescendant")}),t.on("results:toggle",function(){var e=n.getHighlightedResults();0!==e.length&&e.trigger("mouseup")}),t.on("results:select",function(){var e=n.getHighlightedResults();if(0!==e.length){var t=e.data("data");"true"==e.attr("aria-selected")?n.trigger("close",{}):n.trigger("select",{data:t})}}),t.on("results:previous",function(){var e=n.getHighlightedResults(),t=n.$results.find("[aria-selected]"),i=t.index(e);if(0!==i){var r=i-1;0===e.length&&(r=0);var o=t.eq(r);o.trigger("mouseenter");var s=n.$results.offset().top,a=o.offset().top,l=n.$results.scrollTop()+(a-s);0===r?n.$results.scrollTop(0):a-s<0&&n.$results.scrollTop(l)}}),t.on("results:next",function(){var e=n.getHighlightedResults(),t=n.$results.find("[aria-selected]"),i=t.index(e),r=i+1;if(!(r>=t.length)){var o=t.eq(r);o.trigger("mouseenter");var s=n.$results.offset().top+n.$results.outerHeight(!1),a=o.offset().top+o.outerHeight(!1),l=n.$results.scrollTop()+a-s;0===r?n.$results.scrollTop(0):a>s&&n.$results.scrollTop(l)}}),t.on("results:focus",function(e){e.element.addClass("select2-results__option--highlighted")}),t.on("results:message",function(e){n.displayMessage(e)}),e.fn.mousewheel&&this.$results.on("mousewheel",function(e){var t=n.$results.scrollTop(),i=n.$results.get(0).scrollHeight-t+e.deltaY,r=e.deltaY>0&&t-e.deltaY<=0,o=e.deltaY<0&&i<=n.$results.height();r?(n.$results.scrollTop(0),e.preventDefault(),e.stopPropagation()):o&&(n.$results.scrollTop(n.$results.get(0).scrollHeight-n.$results.height()),e.preventDefault(),e.stopPropagation())}),this.$results.on("mouseup",".select2-results__option[aria-selected]",function(t){var i=e(this),r=i.data("data");if("true"===i.attr("aria-selected"))return void(n.options.get("multiple")?n.trigger("unselect",{originalEvent:t,data:r}):n.trigger("close",{}));n.trigger("select",{originalEvent:t,data:r})}),this.$results.on("mouseenter",".select2-results__option[aria-selected]",function(){var t=e(this).data("data");n.getHighlightedResults().removeClass("select2-results__option--highlighted"),n.trigger("results:focus",{data:t,element:e(this)})})},n.prototype.getHighlightedResults=function(){return this.$results.find(".select2-results__option--highlighted")},n.prototype.destroy=function(){this.$results.remove()},n.prototype.ensureHighlightVisible=function(){var e=this.getHighlightedResults();if(0!==e.length){var t=this.$results.find("[aria-selected]"),n=t.index(e),i=this.$results.offset().top,r=e.offset().top,o=this.$results.scrollTop()+(r-i),s=r-i;o-=2*e.outerHeight(!1),n<=2?this.$results.scrollTop(0):(s>this.$results.outerHeight()||s<0)&&this.$results.scrollTop(o)}},n.prototype.template=function(t,n){var i=this.options.get("templateResult"),r=this.options.get("escapeMarkup"),o=i(t,n);null==o?n.style.display="none":"string"==typeof o?n.innerHTML=r(o):e(n).append(o)},n}),t.define("select2/keys",[],function(){return{BACKSPACE:8,TAB:9,ENTER:13,SHIFT:16,CTRL:17,ALT:18,ESC:27,SPACE:32,PAGE_UP:33,PAGE_DOWN:34,END:35,HOME:36,LEFT:37,UP:38,RIGHT:39,DOWN:40,DELETE:46}}),t.define("select2/selection/base",["jquery","../utils","../keys"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,t.Observable),i.prototype.render=function(){var t=e('<span class="select2-selection" role="combobox"  aria-haspopup="true" aria-expanded="false"></span>');return this._tabindex=0,null!=this.$element.data("old-tabindex")?this._tabindex=this.$element.data("old-tabindex"):null!=this.$element.attr("tabindex")&&(this._tabindex=this.$element.attr("tabindex")),t.attr("title",this.$element.attr("title")),t.attr("tabindex",this._tabindex),this.$selection=t,t},i.prototype.bind=function(e){var t=this,i=(e.id,e.id+"-results");this.container=e,this.$selection.on("focus",function(e){t.trigger("focus",e)}),this.$selection.on("blur",function(e){t._handleBlur(e)}),this.$selection.on("keydown",function(e){t.trigger("keypress",e),e.which===n.SPACE&&e.preventDefault()}),e.on("results:focus",function(e){t.$selection.attr("aria-activedescendant",e.data._resultId)}),e.on("selection:update",function(e){t.update(e.data)}),e.on("open",function(){t.$selection.attr("aria-expanded","true"),t.$selection.attr("aria-owns",i),t._attachCloseHandler(e)}),e.on("close",function(){t.$selection.attr("aria-expanded","false"),t.$selection.removeAttr("aria-activedescendant"),t.$selection.removeAttr("aria-owns"),t.$selection.focus(),t._detachCloseHandler(e)}),e.on("enable",function(){t.$selection.attr("tabindex",t._tabindex)}),e.on("disable",function(){t.$selection.attr("tabindex","-1")})},i.prototype._handleBlur=function(t){var n=this;window.setTimeout(function(){document.activeElement==n.$selection[0]||e.contains(n.$selection[0],document.activeElement)||n.trigger("blur",t)},1)},i.prototype._attachCloseHandler=function(t){e(document.body).on("mousedown.select2."+t.id,function(t){var n=e(t.target),i=n.closest(".select2");e(".select2.select2-container--open").each(function(){var t=e(this);this!=i[0]&&t.data("element").select2("close")})})},i.prototype._detachCloseHandler=function(t){e(document.body).off("mousedown.select2."+t.id)},i.prototype.position=function(e,t){t.find(".selection").append(e)},i.prototype.destroy=function(){this._detachCloseHandler(this.container)},i.prototype.update=function(){throw new Error("The `update` method must be defined in child classes.")},i}),t.define("select2/selection/single",["jquery","./base","../utils","../keys"],function(e,t,n){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--single"),e.html('<span class="select2-selection__rendered"></span><span class="select2-selection__arrow" role="presentation"><b role="presentation"></b></span>'),e},i.prototype.bind=function(e){var t=this;i.__super__.bind.apply(this,arguments);var n=e.id+"-container";this.$selection.find(".select2-selection__rendered").attr("id",n),this.$selection.attr("aria-labelledby",n),this.$selection.on("mousedown",function(e){1===e.which&&t.trigger("toggle",{originalEvent:e})}),this.$selection.on("focus",function(){}),this.$selection.on("blur",function(){}),e.on("focus",function(){e.isOpen()||t.$selection.focus()}),e.on("selection:update",function(e){t.update(e.data)})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e("<span></span>")},i.prototype.update=function(e){if(0===e.length)return void this.clear();var t=e[0],n=this.$selection.find(".select2-selection__rendered"),i=this.display(t,n);n.empty().append(i),n.prop("title",t.title||t.text)},i}),t.define("select2/selection/multiple",["jquery","./base","../utils"],function(e,t,n){function i(){i.__super__.constructor.apply(this,arguments)}return n.Extend(i,t),i.prototype.render=function(){var e=i.__super__.render.call(this);return e.addClass("select2-selection--multiple"),e.html('<ul class="select2-selection__rendered"></ul>'),e},i.prototype.bind=function(){var t=this;i.__super__.bind.apply(this,arguments),this.$selection.on("click",function(e){t.trigger("toggle",{originalEvent:e})}),this.$selection.on("click",".select2-selection__choice__remove",function(n){if(!t.options.get("disabled")){var i=e(this),r=i.parent(),o=r.data("data");t.trigger("unselect",{originalEvent:n,data:o})}})},i.prototype.clear=function(){this.$selection.find(".select2-selection__rendered").empty()},i.prototype.display=function(e,t){var n=this.options.get("templateSelection");return this.options.get("escapeMarkup")(n(e,t))},i.prototype.selectionContainer=function(){return e('<li class="select2-selection__choice"><span class="select2-selection__choice__remove" role="presentation">&times;</span></li>')},i.prototype.update=function(e){if(this.clear(),0!==e.length){for(var t=[],i=0;i<e.length;i++){var r=e[i],o=this.selectionContainer(),s=this.display(r,o);o.append(s),o.prop("title",r.title||r.text),o.data("data",r),t.push(o)}var a=this.$selection.find(".select2-selection__rendered");n.appendMany(a,t)}},i}),t.define("select2/selection/placeholder",["../utils"],function(){function e(e,t,n){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n)}return e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.createPlaceholder=function(e,t){var n=this.selectionContainer();return n.html(this.display(t)),n.addClass("select2-selection__placeholder").removeClass("select2-selection__choice"),n},e.prototype.update=function(e,t){var n=1==t.length&&t[0].id!=this.placeholder.id;if(t.length>1||n)return e.call(this,t);this.clear();var i=this.createPlaceholder(this.placeholder);this.$selection.find(".select2-selection__rendered").append(i)},e}),t.define("select2/selection/allowClear",["jquery","../keys"],function(e,t){function n(){}return n.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),null==this.placeholder&&this.options.get("debug")&&window.console&&console.error&&console.error("Select2: The `allowClear` option should be used in combination with the `placeholder` option."),this.$selection.on("mousedown",".select2-selection__clear",function(e){i._handleClear(e)}),t.on("keypress",function(e){i._handleKeyboardClear(e,t)})},n.prototype._handleClear=function(e,t){if(!this.options.get("disabled")){var n=this.$selection.find(".select2-selection__clear");if(0!==n.length){t.stopPropagation();for(var i=n.data("data"),r=0;r<i.length;r++){var o={data:i[r]};if(this.trigger("unselect",o),o.prevented)return}this.$element.val(this.placeholder.id).trigger("change"),this.trigger("toggle",{})}}},n.prototype._handleKeyboardClear=function(e,n,i){i.isOpen()||n.which!=t.DELETE&&n.which!=t.BACKSPACE||this._handleClear(n)},n.prototype.update=function(t,n){if(t.call(this,n),!(this.$selection.find(".select2-selection__placeholder").length>0||0===n.length)){var i=e('<span class="select2-selection__clear">&times;</span>');i.data("data",n),this.$selection.find(".select2-selection__rendered").prepend(i)}},n}),t.define("select2/selection/search",["jquery","../utils","../keys"],function(e,t,n){function i(e,t,n){e.call(this,t,n)}return i.prototype.render=function(t){var n=e('<li class="select2-search select2-search--inline"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" aria-autocomplete="list" /></li>');this.$searchContainer=n,this.$search=n.find("input");var i=t.call(this);return this._transferTabIndex(),i},i.prototype.bind=function(e,t,i){var r=this;e.call(this,t,i),t.on("open",function(){r.$search.trigger("focus")}),t.on("close",function(){r.$search.val(""),r.$search.removeAttr("aria-activedescendant"),r.$search.trigger("focus")}),t.on("enable",function(){r.$search.prop("disabled",!1),r._transferTabIndex()}),t.on("disable",function(){r.$search.prop("disabled",!0)}),t.on("focus",function(){r.$search.trigger("focus")}),t.on("results:focus",function(e){r.$search.attr("aria-activedescendant",e.id)}),this.$selection.on("focusin",".select2-search--inline",function(e){r.trigger("focus",e)}),this.$selection.on("focusout",".select2-search--inline",function(e){r._handleBlur(e)}),this.$selection.on("keydown",".select2-search--inline",function(e){if(e.stopPropagation(),r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented(),e.which===n.BACKSPACE&&""===r.$search.val()){var t=r.$searchContainer.prev(".select2-selection__choice");if(t.length>0){var i=t.data("data");r.searchRemoveChoice(i),e.preventDefault()}}});var o=document.documentMode,s=o&&o<=11;this.$selection.on("input.searchcheck",".select2-search--inline",function(){if(s)return void r.$selection.off("input.search input.searchcheck");r.$selection.off("keyup.search")}),this.$selection.on("keyup.search input.search",".select2-search--inline",function(e){if(s&&"input"===e.type)return void r.$selection.off("input.search input.searchcheck");var t=e.which;t!=n.SHIFT&&t!=n.CTRL&&t!=n.ALT&&t!=n.TAB&&r.handleSearch(e)})},i.prototype._transferTabIndex=function(){this.$search.attr("tabindex",this.$selection.attr("tabindex")),this.$selection.attr("tabindex","-1")},i.prototype.createPlaceholder=function(e,t){this.$search.attr("placeholder",t.text)},i.prototype.update=function(e,t){var n=this.$search[0]==document.activeElement;this.$search.attr("placeholder",""),e.call(this,t),this.$selection.find(".select2-selection__rendered").append(this.$searchContainer),this.resizeSearch(),n&&this.$search.focus()},i.prototype.handleSearch=function(){if(this.resizeSearch(),!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},i.prototype.searchRemoveChoice=function(e,t){this.trigger("unselect",{data:t}),this.$search.val(t.text),this.handleSearch()},i.prototype.resizeSearch=function(){this.$search.css("width","25px");var e="";if(""!==this.$search.attr("placeholder"))e=this.$selection.find(".select2-selection__rendered").innerWidth();else{e=.75*(this.$search.val().length+1)+"em"}this.$search.css("width",e)},i}),t.define("select2/selection/eventRelay",["jquery"],function(e){function t(){}return t.prototype.bind=function(t,n,i){var r=this,o=["open","opening","close","closing","select","selecting","unselect","unselecting"],s=["opening","closing","selecting","unselecting"];t.call(this,n,i),n.on("*",function(t,n){if(-1!==e.inArray(t,o)){n=n||{};var i=e.Event("select2:"+t,{params:n});r.$element.trigger(i),-1!==e.inArray(t,s)&&(n.prevented=i.isDefaultPrevented())}})},t}),t.define("select2/translation",["jquery","require"],function(e,t){function n(e){this.dict=e||{}}return n.prototype.all=function(){return this.dict},n.prototype.get=function(e){return this.dict[e]},n.prototype.extend=function(t){this.dict=e.extend({},t.all(),this.dict)},n._cache={},n.loadPath=function(e){if(!(e in n._cache)){var i=t(e);n._cache[e]=i}return new n(n._cache[e])},n}),t.define("select2/diacritics",[],function(){return{"\u24b6":"A","\uff21":"A","\xc0":"A","\xc1":"A","\xc2":"A","\u1ea6":"A","\u1ea4":"A","\u1eaa":"A","\u1ea8":"A","\xc3":"A","\u0100":"A","\u0102":"A","\u1eb0":"A","\u1eae":"A","\u1eb4":"A","\u1eb2":"A","\u0226":"A","\u01e0":"A","\xc4":"A","\u01de":"A","\u1ea2":"A","\xc5":"A","\u01fa":"A","\u01cd":"A","\u0200":"A","\u0202":"A","\u1ea0":"A","\u1eac":"A","\u1eb6":"A","\u1e00":"A","\u0104":"A","\u023a":"A","\u2c6f":"A","\ua732":"AA","\xc6":"AE","\u01fc":"AE","\u01e2":"AE","\ua734":"AO","\ua736":"AU","\ua738":"AV","\ua73a":"AV","\ua73c":"AY","\u24b7":"B","\uff22":"B","\u1e02":"B","\u1e04":"B","\u1e06":"B","\u0243":"B","\u0182":"B","\u0181":"B","\u24b8":"C","\uff23":"C","\u0106":"C","\u0108":"C","\u010a":"C","\u010c":"C","\xc7":"C","\u1e08":"C","\u0187":"C","\u023b":"C","\ua73e":"C","\u24b9":"D","\uff24":"D","\u1e0a":"D","\u010e":"D","\u1e0c":"D","\u1e10":"D","\u1e12":"D","\u1e0e":"D","\u0110":"D","\u018b":"D","\u018a":"D","\u0189":"D","\ua779":"D","\u01f1":"DZ","\u01c4":"DZ","\u01f2":"Dz","\u01c5":"Dz","\u24ba":"E","\uff25":"E","\xc8":"E","\xc9":"E","\xca":"E","\u1ec0":"E","\u1ebe":"E","\u1ec4":"E","\u1ec2":"E","\u1ebc":"E","\u0112":"E","\u1e14":"E","\u1e16":"E","\u0114":"E","\u0116":"E","\xcb":"E","\u1eba":"E","\u011a":"E","\u0204":"E","\u0206":"E","\u1eb8":"E","\u1ec6":"E","\u0228":"E","\u1e1c":"E","\u0118":"E","\u1e18":"E","\u1e1a":"E","\u0190":"E","\u018e":"E","\u24bb":"F","\uff26":"F","\u1e1e":"F","\u0191":"F","\ua77b":"F","\u24bc":"G","\uff27":"G","\u01f4":"G","\u011c":"G","\u1e20":"G","\u011e":"G","\u0120":"G","\u01e6":"G","\u0122":"G","\u01e4":"G","\u0193":"G","\ua7a0":"G","\ua77d":"G","\ua77e":"G","\u24bd":"H","\uff28":"H","\u0124":"H","\u1e22":"H","\u1e26":"H","\u021e":"H","\u1e24":"H","\u1e28":"H","\u1e2a":"H","\u0126":"H","\u2c67":"H","\u2c75":"H","\ua78d":"H","\u24be":"I","\uff29":"I","\xcc":"I","\xcd":"I","\xce":"I","\u0128":"I","\u012a":"I","\u012c":"I","\u0130":"I","\xcf":"I","\u1e2e":"I","\u1ec8":"I","\u01cf":"I","\u0208":"I","\u020a":"I","\u1eca":"I","\u012e":"I","\u1e2c":"I","\u0197":"I","\u24bf":"J","\uff2a":"J","\u0134":"J","\u0248":"J","\u24c0":"K","\uff2b":"K","\u1e30":"K","\u01e8":"K","\u1e32":"K","\u0136":"K","\u1e34":"K","\u0198":"K","\u2c69":"K","\ua740":"K","\ua742":"K","\ua744":"K","\ua7a2":"K","\u24c1":"L","\uff2c":"L","\u013f":"L","\u0139":"L","\u013d":"L","\u1e36":"L","\u1e38":"L","\u013b":"L","\u1e3c":"L","\u1e3a":"L","\u0141":"L","\u023d":"L","\u2c62":"L","\u2c60":"L","\ua748":"L","\ua746":"L","\ua780":"L","\u01c7":"LJ","\u01c8":"Lj","\u24c2":"M","\uff2d":"M","\u1e3e":"M","\u1e40":"M","\u1e42":"M","\u2c6e":"M","\u019c":"M","\u24c3":"N","\uff2e":"N","\u01f8":"N","\u0143":"N","\xd1":"N","\u1e44":"N","\u0147":"N","\u1e46":"N","\u0145":"N","\u1e4a":"N","\u1e48":"N","\u0220":"N","\u019d":"N","\ua790":"N","\ua7a4":"N","\u01ca":"NJ","\u01cb":"Nj","\u24c4":"O","\uff2f":"O","\xd2":"O","\xd3":"O","\xd4":"O","\u1ed2":"O","\u1ed0":"O","\u1ed6":"O","\u1ed4":"O","\xd5":"O","\u1e4c":"O","\u022c":"O","\u1e4e":"O","\u014c":"O","\u1e50":"O","\u1e52":"O","\u014e":"O","\u022e":"O","\u0230":"O","\xd6":"O","\u022a":"O","\u1ece":"O","\u0150":"O","\u01d1":"O","\u020c":"O","\u020e":"O","\u01a0":"O","\u1edc":"O","\u1eda":"O","\u1ee0":"O","\u1ede":"O","\u1ee2":"O","\u1ecc":"O","\u1ed8":"O","\u01ea":"O","\u01ec":"O","\xd8":"O","\u01fe":"O","\u0186":"O","\u019f":"O","\ua74a":"O","\ua74c":"O","\u01a2":"OI","\ua74e":"OO","\u0222":"OU","\u24c5":"P","\uff30":"P","\u1e54":"P","\u1e56":"P","\u01a4":"P","\u2c63":"P","\ua750":"P","\ua752":"P","\ua754":"P","\u24c6":"Q","\uff31":"Q","\ua756":"Q","\ua758":"Q","\u024a":"Q","\u24c7":"R","\uff32":"R","\u0154":"R","\u1e58":"R","\u0158":"R","\u0210":"R","\u0212":"R","\u1e5a":"R","\u1e5c":"R","\u0156":"R","\u1e5e":"R","\u024c":"R","\u2c64":"R","\ua75a":"R","\ua7a6":"R","\ua782":"R","\u24c8":"S","\uff33":"S","\u1e9e":"S","\u015a":"S","\u1e64":"S","\u015c":"S","\u1e60":"S","\u0160":"S","\u1e66":"S","\u1e62":"S","\u1e68":"S","\u0218":"S","\u015e":"S","\u2c7e":"S","\ua7a8":"S","\ua784":"S","\u24c9":"T","\uff34":"T","\u1e6a":"T","\u0164":"T","\u1e6c":"T","\u021a":"T","\u0162":"T","\u1e70":"T","\u1e6e":"T","\u0166":"T","\u01ac":"T","\u01ae":"T","\u023e":"T","\ua786":"T","\ua728":"TZ","\u24ca":"U","\uff35":"U","\xd9":"U","\xda":"U","\xdb":"U","\u0168":"U","\u1e78":"U","\u016a":"U","\u1e7a":"U","\u016c":"U","\xdc":"U","\u01db":"U","\u01d7":"U","\u01d5":"U","\u01d9":"U","\u1ee6":"U","\u016e":"U","\u0170":"U","\u01d3":"U","\u0214":"U","\u0216":"U","\u01af":"U","\u1eea":"U","\u1ee8":"U","\u1eee":"U","\u1eec":"U","\u1ef0":"U","\u1ee4":"U","\u1e72":"U","\u0172":"U","\u1e76":"U","\u1e74":"U","\u0244":"U","\u24cb":"V","\uff36":"V","\u1e7c":"V","\u1e7e":"V","\u01b2":"V","\ua75e":"V","\u0245":"V","\ua760":"VY","\u24cc":"W","\uff37":"W","\u1e80":"W","\u1e82":"W","\u0174":"W","\u1e86":"W","\u1e84":"W","\u1e88":"W","\u2c72":"W","\u24cd":"X","\uff38":"X","\u1e8a":"X","\u1e8c":"X","\u24ce":"Y","\uff39":"Y","\u1ef2":"Y","\xdd":"Y","\u0176":"Y","\u1ef8":"Y","\u0232":"Y","\u1e8e":"Y","\u0178":"Y","\u1ef6":"Y","\u1ef4":"Y","\u01b3":"Y","\u024e":"Y","\u1efe":"Y","\u24cf":"Z","\uff3a":"Z","\u0179":"Z","\u1e90":"Z","\u017b":"Z","\u017d":"Z","\u1e92":"Z","\u1e94":"Z","\u01b5":"Z","\u0224":"Z","\u2c7f":"Z","\u2c6b":"Z","\ua762":"Z","\u24d0":"a","\uff41":"a","\u1e9a":"a","\xe0":"a","\xe1":"a","\xe2":"a","\u1ea7":"a","\u1ea5":"a","\u1eab":"a","\u1ea9":"a","\xe3":"a","\u0101":"a","\u0103":"a","\u1eb1":"a","\u1eaf":"a","\u1eb5":"a","\u1eb3":"a","\u0227":"a","\u01e1":"a","\xe4":"a","\u01df":"a","\u1ea3":"a","\xe5":"a","\u01fb":"a","\u01ce":"a","\u0201":"a","\u0203":"a","\u1ea1":"a","\u1ead":"a","\u1eb7":"a","\u1e01":"a","\u0105":"a","\u2c65":"a","\u0250":"a","\ua733":"aa","\xe6":"ae","\u01fd":"ae","\u01e3":"ae","\ua735":"ao","\ua737":"au","\ua739":"av","\ua73b":"av","\ua73d":"ay","\u24d1":"b","\uff42":"b","\u1e03":"b","\u1e05":"b","\u1e07":"b","\u0180":"b","\u0183":"b","\u0253":"b","\u24d2":"c","\uff43":"c","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\xe7":"c","\u1e09":"c","\u0188":"c","\u023c":"c","\ua73f":"c","\u2184":"c","\u24d3":"d","\uff44":"d","\u1e0b":"d","\u010f":"d","\u1e0d":"d","\u1e11":"d","\u1e13":"d","\u1e0f":"d","\u0111":"d","\u018c":"d","\u0256":"d","\u0257":"d","\ua77a":"d","\u01f3":"dz","\u01c6":"dz","\u24d4":"e","\uff45":"e","\xe8":"e","\xe9":"e","\xea":"e","\u1ec1":"e","\u1ebf":"e","\u1ec5":"e","\u1ec3":"e","\u1ebd":"e","\u0113":"e","\u1e15":"e","\u1e17":"e","\u0115":"e","\u0117":"e","\xeb":"e","\u1ebb":"e","\u011b":"e","\u0205":"e","\u0207":"e","\u1eb9":"e","\u1ec7":"e","\u0229":"e","\u1e1d":"e","\u0119":"e","\u1e19":"e","\u1e1b":"e","\u0247":"e","\u025b":"e","\u01dd":"e","\u24d5":"f","\uff46":"f","\u1e1f":"f","\u0192":"f","\ua77c":"f","\u24d6":"g","\uff47":"g","\u01f5":"g","\u011d":"g","\u1e21":"g","\u011f":"g","\u0121":"g","\u01e7":"g","\u0123":"g","\u01e5":"g","\u0260":"g","\ua7a1":"g","\u1d79":"g","\ua77f":"g","\u24d7":"h","\uff48":"h","\u0125":"h","\u1e23":"h","\u1e27":"h","\u021f":"h","\u1e25":"h","\u1e29":"h","\u1e2b":"h","\u1e96":"h","\u0127":"h","\u2c68":"h","\u2c76":"h","\u0265":"h","\u0195":"hv","\u24d8":"i","\uff49":"i","\xec":"i","\xed":"i","\xee":"i","\u0129":"i","\u012b":"i","\u012d":"i","\xef":"i","\u1e2f":"i","\u1ec9":"i","\u01d0":"i","\u0209":"i","\u020b":"i","\u1ecb":"i","\u012f":"i","\u1e2d":"i","\u0268":"i","\u0131":"i","\u24d9":"j","\uff4a":"j","\u0135":"j","\u01f0":"j","\u0249":"j","\u24da":"k","\uff4b":"k","\u1e31":"k","\u01e9":"k","\u1e33":"k","\u0137":"k","\u1e35":"k","\u0199":"k","\u2c6a":"k","\ua741":"k","\ua743":"k","\ua745":"k","\ua7a3":"k","\u24db":"l","\uff4c":"l","\u0140":"l","\u013a":"l","\u013e":"l","\u1e37":"l","\u1e39":"l","\u013c":"l","\u1e3d":"l","\u1e3b":"l","\u017f":"l","\u0142":"l","\u019a":"l","\u026b":"l","\u2c61":"l","\ua749":"l","\ua781":"l","\ua747":"l","\u01c9":"lj","\u24dc":"m","\uff4d":"m","\u1e3f":"m","\u1e41":"m","\u1e43":"m","\u0271":"m","\u026f":"m","\u24dd":"n","\uff4e":"n","\u01f9":"n","\u0144":"n","\xf1":"n","\u1e45":"n","\u0148":"n","\u1e47":"n","\u0146":"n","\u1e4b":"n","\u1e49":"n","\u019e":"n","\u0272":"n","\u0149":"n","\ua791":"n","\ua7a5":"n","\u01cc":"nj","\u24de":"o","\uff4f":"o","\xf2":"o","\xf3":"o","\xf4":"o","\u1ed3":"o","\u1ed1":"o","\u1ed7":"o","\u1ed5":"o","\xf5":"o","\u1e4d":"o","\u022d":"o","\u1e4f":"o","\u014d":"o","\u1e51":"o","\u1e53":"o","\u014f":"o","\u022f":"o","\u0231":"o","\xf6":"o","\u022b":"o","\u1ecf":"o","\u0151":"o","\u01d2":"o","\u020d":"o","\u020f":"o","\u01a1":"o","\u1edd":"o","\u1edb":"o","\u1ee1":"o","\u1edf":"o","\u1ee3":"o","\u1ecd":"o","\u1ed9":"o","\u01eb":"o","\u01ed":"o","\xf8":"o","\u01ff":"o","\u0254":"o","\ua74b":"o","\ua74d":"o","\u0275":"o","\u01a3":"oi","\u0223":"ou","\ua74f":"oo","\u24df":"p","\uff50":"p","\u1e55":"p","\u1e57":"p","\u01a5":"p","\u1d7d":"p","\ua751":"p","\ua753":"p","\ua755":"p","\u24e0":"q","\uff51":"q","\u024b":"q","\ua757":"q","\ua759":"q","\u24e1":"r","\uff52":"r","\u0155":"r","\u1e59":"r","\u0159":"r","\u0211":"r","\u0213":"r","\u1e5b":"r","\u1e5d":"r","\u0157":"r","\u1e5f":"r",
"\u024d":"r","\u027d":"r","\ua75b":"r","\ua7a7":"r","\ua783":"r","\u24e2":"s","\uff53":"s","\xdf":"s","\u015b":"s","\u1e65":"s","\u015d":"s","\u1e61":"s","\u0161":"s","\u1e67":"s","\u1e63":"s","\u1e69":"s","\u0219":"s","\u015f":"s","\u023f":"s","\ua7a9":"s","\ua785":"s","\u1e9b":"s","\u24e3":"t","\uff54":"t","\u1e6b":"t","\u1e97":"t","\u0165":"t","\u1e6d":"t","\u021b":"t","\u0163":"t","\u1e71":"t","\u1e6f":"t","\u0167":"t","\u01ad":"t","\u0288":"t","\u2c66":"t","\ua787":"t","\ua729":"tz","\u24e4":"u","\uff55":"u","\xf9":"u","\xfa":"u","\xfb":"u","\u0169":"u","\u1e79":"u","\u016b":"u","\u1e7b":"u","\u016d":"u","\xfc":"u","\u01dc":"u","\u01d8":"u","\u01d6":"u","\u01da":"u","\u1ee7":"u","\u016f":"u","\u0171":"u","\u01d4":"u","\u0215":"u","\u0217":"u","\u01b0":"u","\u1eeb":"u","\u1ee9":"u","\u1eef":"u","\u1eed":"u","\u1ef1":"u","\u1ee5":"u","\u1e73":"u","\u0173":"u","\u1e77":"u","\u1e75":"u","\u0289":"u","\u24e5":"v","\uff56":"v","\u1e7d":"v","\u1e7f":"v","\u028b":"v","\ua75f":"v","\u028c":"v","\ua761":"vy","\u24e6":"w","\uff57":"w","\u1e81":"w","\u1e83":"w","\u0175":"w","\u1e87":"w","\u1e85":"w","\u1e98":"w","\u1e89":"w","\u2c73":"w","\u24e7":"x","\uff58":"x","\u1e8b":"x","\u1e8d":"x","\u24e8":"y","\uff59":"y","\u1ef3":"y","\xfd":"y","\u0177":"y","\u1ef9":"y","\u0233":"y","\u1e8f":"y","\xff":"y","\u1ef7":"y","\u1e99":"y","\u1ef5":"y","\u01b4":"y","\u024f":"y","\u1eff":"y","\u24e9":"z","\uff5a":"z","\u017a":"z","\u1e91":"z","\u017c":"z","\u017e":"z","\u1e93":"z","\u1e95":"z","\u01b6":"z","\u0225":"z","\u0240":"z","\u2c6c":"z","\ua763":"z","\u0386":"\u0391","\u0388":"\u0395","\u0389":"\u0397","\u038a":"\u0399","\u03aa":"\u0399","\u038c":"\u039f","\u038e":"\u03a5","\u03ab":"\u03a5","\u038f":"\u03a9","\u03ac":"\u03b1","\u03ad":"\u03b5","\u03ae":"\u03b7","\u03af":"\u03b9","\u03ca":"\u03b9","\u0390":"\u03b9","\u03cc":"\u03bf","\u03cd":"\u03c5","\u03cb":"\u03c5","\u03b0":"\u03c5","\u03c9":"\u03c9","\u03c2":"\u03c3"}}),t.define("select2/data/base",["../utils"],function(e){function t(){t.__super__.constructor.call(this)}return e.Extend(t,e.Observable),t.prototype.current=function(){throw new Error("The `current` method must be defined in child classes.")},t.prototype.query=function(){throw new Error("The `query` method must be defined in child classes.")},t.prototype.bind=function(){},t.prototype.destroy=function(){},t.prototype.generateResultId=function(t,n){var i=t.id+"-result-";return i+=e.generateChars(4),null!=n.id?i+="-"+n.id.toString():i+="-"+e.generateChars(4),i},t}),t.define("select2/data/select",["./base","../utils","jquery"],function(e,t,n){function i(e,t){this.$element=e,this.options=t,i.__super__.constructor.call(this)}return t.Extend(i,e),i.prototype.current=function(e){var t=[],i=this;this.$element.find(":selected").each(function(){var e=n(this),r=i.item(e);t.push(r)}),e(t)},i.prototype.select=function(e){var t=this;if(e.selected=!0,n(e.element).is("option"))return e.element.selected=!0,void this.$element.trigger("change");if(this.$element.prop("multiple"))this.current(function(i){var r=[];e=[e],e.push.apply(e,i);for(var o=0;o<e.length;o++){var s=e[o].id;-1===n.inArray(s,r)&&r.push(s)}t.$element.val(r),t.$element.trigger("change")});else{var i=e.id;this.$element.val(i),this.$element.trigger("change")}},i.prototype.unselect=function(e){var t=this;if(this.$element.prop("multiple")){if(e.selected=!1,n(e.element).is("option"))return e.element.selected=!1,void this.$element.trigger("change");this.current(function(i){for(var r=[],o=0;o<i.length;o++){var s=i[o].id;s!==e.id&&-1===n.inArray(s,r)&&r.push(s)}t.$element.val(r),t.$element.trigger("change")})}},i.prototype.bind=function(e){var t=this;this.container=e,e.on("select",function(e){t.select(e.data)}),e.on("unselect",function(e){t.unselect(e.data)})},i.prototype.destroy=function(){this.$element.find("*").each(function(){n.removeData(this,"data")})},i.prototype.query=function(e,t){var i=[],r=this;this.$element.children().each(function(){var t=n(this);if(t.is("option")||t.is("optgroup")){var o=r.item(t),s=r.matches(e,o);null!==s&&i.push(s)}}),t({results:i})},i.prototype.addOptions=function(e){t.appendMany(this.$element,e)},i.prototype.option=function(e){var t;e.children?(t=document.createElement("optgroup"),t.label=e.text):(t=document.createElement("option"),t.textContent!==undefined?t.textContent=e.text:t.innerText=e.text),e.id&&(t.value=e.id),e.disabled&&(t.disabled=!0),e.selected&&(t.selected=!0),e.title&&(t.title=e.title);var i=n(t),r=this._normalizeItem(e);return r.element=t,n.data(t,"data",r),i},i.prototype.item=function(e){var t={};if(null!=(t=n.data(e[0],"data")))return t;if(e.is("option"))t={id:e.val(),text:e.text(),disabled:e.prop("disabled"),selected:e.prop("selected"),title:e.prop("title")};else if(e.is("optgroup")){t={text:e.prop("label"),children:[],title:e.prop("title")};for(var i=e.children("option"),r=[],o=0;o<i.length;o++){var s=n(i[o]),a=this.item(s);r.push(a)}t.children=r}return t=this._normalizeItem(t),t.element=e[0],n.data(e[0],"data",t),t},i.prototype._normalizeItem=function(e){n.isPlainObject(e)||(e={id:e,text:e}),e=n.extend({},{text:""},e);var t={selected:!1,disabled:!1};return null!=e.id&&(e.id=e.id.toString()),null!=e.text&&(e.text=e.text.toString()),null==e._resultId&&e.id&&null!=this.container&&(e._resultId=this.generateResultId(this.container,e)),n.extend({},t,e)},i.prototype.matches=function(e,t){return this.options.get("matcher")(e,t)},i}),t.define("select2/data/array",["./select","../utils","jquery"],function(e,t,n){function i(e,t){var n=t.get("data")||[];i.__super__.constructor.call(this,e,t),this.addOptions(this.convertToOptions(n))}return t.Extend(i,e),i.prototype.select=function(e){var t=this.$element.find("option").filter(function(t,n){return n.value==e.id.toString()});0===t.length&&(t=this.option(e),this.addOptions(t)),i.__super__.select.call(this,e)},i.prototype.convertToOptions=function(e){function i(e){return function(){return n(this).val()==e.id}}for(var r=this,o=this.$element.find("option"),s=o.map(function(){return r.item(n(this)).id}).get(),a=[],l=0;l<e.length;l++){var c=this._normalizeItem(e[l]);if(n.inArray(c.id,s)>=0){var u=o.filter(i(c)),d=this.item(u),p=n.extend(!0,{},c,d),h=this.option(p);u.replaceWith(h)}else{var f=this.option(c);if(c.children){var g=this.convertToOptions(c.children);t.appendMany(f,g)}a.push(f)}}return a},i}),t.define("select2/data/ajax",["./array","../utils","jquery"],function(e,t,n){function i(e,t){this.ajaxOptions=this._applyDefaults(t.get("ajax")),null!=this.ajaxOptions.processResults&&(this.processResults=this.ajaxOptions.processResults),i.__super__.constructor.call(this,e,t)}return t.Extend(i,e),i.prototype._applyDefaults=function(e){var t={data:function(e){return n.extend({},e,{q:e.term})},transport:function(e,t,i){var r=n.ajax(e);return r.then(t),r.fail(i),r}};return n.extend({},t,e,!0)},i.prototype.processResults=function(e){return e},i.prototype.query=function(e,t){function i(){var i=o.transport(o,function(i){var o=r.processResults(i,e);r.options.get("debug")&&window.console&&console.error&&(o&&o.results&&n.isArray(o.results)||console.error("Select2: The AJAX results did not return an array in the `results` key of the response.")),t(o)},function(){i.status&&"0"===i.status||r.trigger("results:message",{message:"errorLoading"})});r._request=i}var r=this;null!=this._request&&(n.isFunction(this._request.abort)&&this._request.abort(),this._request=null);var o=n.extend({type:"GET"},this.ajaxOptions);"function"==typeof o.url&&(o.url=o.url.call(this.$element,e)),"function"==typeof o.data&&(o.data=o.data.call(this.$element,e)),this.ajaxOptions.delay&&null!=e.term?(this._queryTimeout&&window.clearTimeout(this._queryTimeout),this._queryTimeout=window.setTimeout(i,this.ajaxOptions.delay)):i()},i}),t.define("select2/data/tags",["jquery"],function(e){function t(t,n,i){var r=i.get("tags"),o=i.get("createTag");o!==undefined&&(this.createTag=o);var s=i.get("insertTag");if(s!==undefined&&(this.insertTag=s),t.call(this,n,i),e.isArray(r))for(var a=0;a<r.length;a++){var l=r[a],c=this._normalizeItem(l),u=this.option(c);this.$element.append(u)}}return t.prototype.query=function(e,t,n){function i(e,o){for(var s=e.results,a=0;a<s.length;a++){var l=s[a],c=null!=l.children&&!i({results:l.children},!0);if(l.text===t.term||c)return!o&&(e.data=s,void n(e))}if(o)return!0;var u=r.createTag(t);if(null!=u){var d=r.option(u);d.attr("data-select2-tag",!0),r.addOptions([d]),r.insertTag(s,u)}e.results=s,n(e)}var r=this;if(this._removeOldTags(),null==t.term||null!=t.page)return void e.call(this,t,n);e.call(this,t,i)},t.prototype.createTag=function(t,n){var i=e.trim(n.term);return""===i?null:{id:i,text:i}},t.prototype.insertTag=function(e,t,n){t.unshift(n)},t.prototype._removeOldTags=function(){this._lastTag;this.$element.find("option[data-select2-tag]").each(function(){this.selected||e(this).remove()})},t}),t.define("select2/data/tokenizer",["jquery"],function(e){function t(e,t,n){var i=n.get("tokenizer");i!==undefined&&(this.tokenizer=i),e.call(this,t,n)}return t.prototype.bind=function(e,t,n){e.call(this,t,n),this.$search=t.dropdown.$search||t.selection.$search||n.find(".select2-search__field")},t.prototype.query=function(t,n,i){function r(t){var n=s._normalizeItem(t);if(!s.$element.find("option").filter(function(){return e(this).val()===n.id}).length){var i=s.option(n);i.attr("data-select2-tag",!0),s._removeOldTags(),s.addOptions([i])}o(n)}function o(e){s.trigger("select",{data:e})}var s=this;n.term=n.term||"";var a=this.tokenizer(n,this.options,r);a.term!==n.term&&(this.$search.length&&(this.$search.val(a.term),this.$search.focus()),n.term=a.term),t.call(this,n,i)},t.prototype.tokenizer=function(t,n,i,r){for(var o=i.get("tokenSeparators")||[],s=n.term,a=0,l=this.createTag||function(e){return{id:e.term,text:e.term}};a<s.length;){var c=s[a];if(-1!==e.inArray(c,o)){var u=s.substr(0,a),d=e.extend({},n,{term:u}),p=l(d);null!=p?(r(p),s=s.substr(a+1)||"",a=0):a++}else a++}return{term:s}},t}),t.define("select2/data/minimumInputLength",[],function(){function e(e,t,n){this.minimumInputLength=n.get("minimumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){if(t.term=t.term||"",t.term.length<this.minimumInputLength)return void this.trigger("results:message",{message:"inputTooShort",args:{minimum:this.minimumInputLength,input:t.term,params:t}});e.call(this,t,n)},e}),t.define("select2/data/maximumInputLength",[],function(){function e(e,t,n){this.maximumInputLength=n.get("maximumInputLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){if(t.term=t.term||"",this.maximumInputLength>0&&t.term.length>this.maximumInputLength)return void this.trigger("results:message",{message:"inputTooLong",args:{maximum:this.maximumInputLength,input:t.term,params:t}});e.call(this,t,n)},e}),t.define("select2/data/maximumSelectionLength",[],function(){function e(e,t,n){this.maximumSelectionLength=n.get("maximumSelectionLength"),e.call(this,t,n)}return e.prototype.query=function(e,t,n){var i=this;this.current(function(r){var o=null!=r?r.length:0;if(i.maximumSelectionLength>0&&o>=i.maximumSelectionLength)return void i.trigger("results:message",{message:"maximumSelected",args:{maximum:i.maximumSelectionLength}});e.call(i,t,n)})},e}),t.define("select2/dropdown",["jquery","./utils"],function(e,t){function n(e,t){this.$element=e,this.options=t,n.__super__.constructor.call(this)}return t.Extend(n,t.Observable),n.prototype.render=function(){var t=e('<span class="select2-dropdown"><span class="select2-results"></span></span>');return t.attr("dir",this.options.get("dir")),this.$dropdown=t,t},n.prototype.bind=function(){},n.prototype.position=function(){},n.prototype.destroy=function(){this.$dropdown.remove()},n}),t.define("select2/dropdown/search",["jquery","../utils"],function(e){function t(){}return t.prototype.render=function(t){var n=t.call(this),i=e('<span class="select2-search select2-search--dropdown"><input class="select2-search__field" type="search" tabindex="-1" autocomplete="off" autocorrect="off" autocapitalize="off" spellcheck="false" role="textbox" /></span>');return this.$searchContainer=i,this.$search=i.find("input"),n.prepend(i),n},t.prototype.bind=function(t,n,i){var r=this;t.call(this,n,i),this.$search.on("keydown",function(e){r.trigger("keypress",e),r._keyUpPrevented=e.isDefaultPrevented()}),this.$search.on("input",function(){e(this).off("keyup")}),this.$search.on("keyup input",function(e){r.handleSearch(e)}),n.on("open",function(){r.$search.attr("tabindex",0),r.$search.focus(),window.setTimeout(function(){r.$search.focus()},0)}),n.on("close",function(){r.$search.attr("tabindex",-1),r.$search.val("")}),n.on("focus",function(){n.isOpen()&&r.$search.focus()}),n.on("results:all",function(e){if(null==e.query.term||""===e.query.term){r.showSearch(e)?r.$searchContainer.removeClass("select2-search--hide"):r.$searchContainer.addClass("select2-search--hide")}})},t.prototype.handleSearch=function(){if(!this._keyUpPrevented){var e=this.$search.val();this.trigger("query",{term:e})}this._keyUpPrevented=!1},t.prototype.showSearch=function(){return!0},t}),t.define("select2/dropdown/hidePlaceholder",[],function(){function e(e,t,n,i){this.placeholder=this.normalizePlaceholder(n.get("placeholder")),e.call(this,t,n,i)}return e.prototype.append=function(e,t){t.results=this.removePlaceholder(t.results),e.call(this,t)},e.prototype.normalizePlaceholder=function(e,t){return"string"==typeof t&&(t={id:"",text:t}),t},e.prototype.removePlaceholder=function(e,t){for(var n=t.slice(0),i=t.length-1;i>=0;i--){var r=t[i];this.placeholder.id===r.id&&n.splice(i,1)}return n},e}),t.define("select2/dropdown/infiniteScroll",["jquery"],function(e){function t(e,t,n,i){this.lastParams={},e.call(this,t,n,i),this.$loadingMore=this.createLoadingMore(),this.loading=!1}return t.prototype.append=function(e,t){this.$loadingMore.remove(),this.loading=!1,e.call(this,t),this.showLoadingMore(t)&&this.$results.append(this.$loadingMore)},t.prototype.bind=function(t,n,i){var r=this;t.call(this,n,i),n.on("query",function(e){r.lastParams=e,r.loading=!0}),n.on("query:append",function(e){r.lastParams=e,r.loading=!0}),this.$results.on("scroll",function(){var t=e.contains(document.documentElement,r.$loadingMore[0]);if(!r.loading&&t){r.$results.offset().top+r.$results.outerHeight(!1)+50>=r.$loadingMore.offset().top+r.$loadingMore.outerHeight(!1)&&r.loadMore()}})},t.prototype.loadMore=function(){this.loading=!0;var t=e.extend({},{page:1},this.lastParams);t.page++,this.trigger("query:append",t)},t.prototype.showLoadingMore=function(e,t){return t.pagination&&t.pagination.more},t.prototype.createLoadingMore=function(){var t=e('<li class="select2-results__option select2-results__option--load-more"role="treeitem" aria-disabled="true"></li>'),n=this.options.get("translations").get("loadingMore");return t.html(n(this.lastParams)),t},t}),t.define("select2/dropdown/attachBody",["jquery","../utils"],function(e,t){function n(t,n,i){this.$dropdownParent=i.get("dropdownParent")||e(document.body),t.call(this,n,i)}return n.prototype.bind=function(e,t,n){var i=this,r=!1;e.call(this,t,n),t.on("open",function(){i._showDropdown(),i._attachPositioningHandler(t),r||(r=!0,t.on("results:all",function(){i._positionDropdown(),i._resizeDropdown()}),t.on("results:append",function(){i._positionDropdown(),i._resizeDropdown()}))}),t.on("close",function(){i._hideDropdown(),i._detachPositioningHandler(t)}),this.$dropdownContainer.on("mousedown",function(e){e.stopPropagation()})},n.prototype.destroy=function(e){e.call(this),this.$dropdownContainer.remove()},n.prototype.position=function(e,t,n){t.attr("class",n.attr("class")),t.removeClass("select2"),t.addClass("select2-container--open"),t.css({position:"absolute",top:-999999}),this.$container=n},n.prototype.render=function(t){var n=e("<span></span>"),i=t.call(this);return n.append(i),this.$dropdownContainer=n,n},n.prototype._hideDropdown=function(){this.$dropdownContainer.detach()},n.prototype._attachPositioningHandler=function(n,i){var r=this,o="scroll.select2."+i.id,s="resize.select2."+i.id,a="orientationchange.select2."+i.id,l=this.$container.parents().filter(t.hasScroll);l.each(function(){e(this).data("select2-scroll-position",{x:e(this).scrollLeft(),y:e(this).scrollTop()})}),l.on(o,function(){var t=e(this).data("select2-scroll-position");e(this).scrollTop(t.y)}),e(window).on(o+" "+s+" "+a,function(){r._positionDropdown(),r._resizeDropdown()})},n.prototype._detachPositioningHandler=function(n,i){var r="scroll.select2."+i.id,o="resize.select2."+i.id,s="orientationchange.select2."+i.id;this.$container.parents().filter(t.hasScroll).off(r),e(window).off(r+" "+o+" "+s)},n.prototype._positionDropdown=function(){var t=e(window),n=this.$dropdown.hasClass("select2-dropdown--above"),i=this.$dropdown.hasClass("select2-dropdown--below"),r=null,o=this.$container.offset();o.bottom=o.top+this.$container.outerHeight(!1);var s={height:this.$container.outerHeight(!1)};s.top=o.top,s.bottom=o.top+s.height;var a={height:this.$dropdown.outerHeight(!1)},l={top:t.scrollTop(),bottom:t.scrollTop()+t.height()},c=l.top<o.top-a.height,u=l.bottom>o.bottom+a.height,d={left:o.left,top:s.bottom},p=this.$dropdownParent;"static"===p.css("position")&&(p=p.offsetParent());var h=p.offset();d.top-=h.top,d.left-=h.left,n||i||(r="below"),u||!c||n?!c&&u&&n&&(r="below"):r="above",("above"==r||n&&"below"!==r)&&(d.top=s.top-h.top-a.height),null!=r&&(this.$dropdown.removeClass("select2-dropdown--below select2-dropdown--above").addClass("select2-dropdown--"+r),this.$container.removeClass("select2-container--below select2-container--above").addClass("select2-container--"+r)),this.$dropdownContainer.css(d)},n.prototype._resizeDropdown=function(){var e={width:this.$container.outerWidth(!1)+"px"};this.options.get("dropdownAutoWidth")&&(e.minWidth=e.width,e.position="relative",e.width="auto"),this.$dropdown.css(e)},n.prototype._showDropdown=function(){this.$dropdownContainer.appendTo(this.$dropdownParent),this._positionDropdown(),this._resizeDropdown()},n}),t.define("select2/dropdown/minimumResultsForSearch",[],function(){function e(t){for(var n=0,i=0;i<t.length;i++){var r=t[i];r.children?n+=e(r.children):n++}return n}function t(e,t,n,i){this.minimumResultsForSearch=n.get("minimumResultsForSearch"),this.minimumResultsForSearch<0&&(this.minimumResultsForSearch=Infinity),e.call(this,t,n,i)}return t.prototype.showSearch=function(t,n){return!(e(n.data.results)<this.minimumResultsForSearch)&&t.call(this,n)},t}),t.define("select2/dropdown/selectOnClose",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("close",function(e){i._handleSelectOnClose(e)})},e.prototype._handleSelectOnClose=function(e,t){if(t&&null!=t.originalSelect2Event){var n=t.originalSelect2Event;if("select"===n._type||"unselect"===n._type)return}var i=this.getHighlightedResults();if(!(i.length<1)){var r=i.data("data");null!=r.element&&r.element.selected||null==r.element&&r.selected||this.trigger("select",{data:r})}},e}),t.define("select2/dropdown/closeOnSelect",[],function(){function e(){}return e.prototype.bind=function(e,t,n){var i=this;e.call(this,t,n),t.on("select",function(e){i._selectTriggered(e)}),t.on("unselect",function(e){i._selectTriggered(e)})},e.prototype._selectTriggered=function(e,t){var n=t.originalEvent;n&&n.ctrlKey||this.trigger("close",{originalEvent:n,originalSelect2Event:t})},e}),t.define("select2/i18n/en",[],function(){return{errorLoading:function(){return"The results could not be loaded."},inputTooLong:function(e){var t=e.input.length-e.maximum,n="Please delete "+t+" character";return 1!=t&&(n+="s"),n},inputTooShort:function(e){return"Please enter "+(e.minimum-e.input.length)+" or more characters"},loadingMore:function(){return"Loading more results\u2026"},maximumSelected:function(e){var t="You can only select "+e.maximum+" item";return 1!=e.maximum&&(t+="s"),t},noResults:function(){return"No results found"},searching:function(){return"Searching\u2026"}}}),t.define("select2/defaults",["jquery","require","./results","./selection/single","./selection/multiple","./selection/placeholder","./selection/allowClear","./selection/search","./selection/eventRelay","./utils","./translation","./diacritics","./data/select","./data/array","./data/ajax","./data/tags","./data/tokenizer","./data/minimumInputLength","./data/maximumInputLength","./data/maximumSelectionLength","./dropdown","./dropdown/search","./dropdown/hidePlaceholder","./dropdown/infiniteScroll","./dropdown/attachBody","./dropdown/minimumResultsForSearch","./dropdown/selectOnClose","./dropdown/closeOnSelect","./i18n/en"],function(e,t,n,i,r,o,s,a,l,c,u,d,p,h,f,g,m,v,y,_,$,w,b,A,x,E,C,O,S){function T(){this.reset()}return T.prototype.apply=function(d){if(d=e.extend(!0,{},this.defaults,d),null==d.dataAdapter){if(null!=d.ajax?d.dataAdapter=f:null!=d.data?d.dataAdapter=h:d.dataAdapter=p,d.minimumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,v)),d.maximumInputLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,y)),d.maximumSelectionLength>0&&(d.dataAdapter=c.Decorate(d.dataAdapter,_)),d.tags&&(d.dataAdapter=c.Decorate(d.dataAdapter,g)),null==d.tokenSeparators&&null==d.tokenizer||(d.dataAdapter=c.Decorate(d.dataAdapter,m)),null!=d.query){var S=t(d.amdBase+"compat/query");d.dataAdapter=c.Decorate(d.dataAdapter,S)}if(null!=d.initSelection){var T=t(d.amdBase+"compat/initSelection");d.dataAdapter=c.Decorate(d.dataAdapter,T)}}if(null==d.resultsAdapter&&(d.resultsAdapter=n,null!=d.ajax&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,A)),null!=d.placeholder&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,b)),d.selectOnClose&&(d.resultsAdapter=c.Decorate(d.resultsAdapter,C))),null==d.dropdownAdapter){if(d.multiple)d.dropdownAdapter=$;else{var D=c.Decorate($,w);d.dropdownAdapter=D}if(0!==d.minimumResultsForSearch&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,E)),d.closeOnSelect&&(d.dropdownAdapter=c.Decorate(d.dropdownAdapter,O)),null!=d.dropdownCssClass||null!=d.dropdownCss||null!=d.adaptDropdownCssClass){var q=t(d.amdBase+"compat/dropdownCss");d.dropdownAdapter=c.Decorate(d.dropdownAdapter,q)}d.dropdownAdapter=c.Decorate(d.dropdownAdapter,x)}if(null==d.selectionAdapter){if(d.multiple?d.selectionAdapter=r:d.selectionAdapter=i,null!=d.placeholder&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,o)),d.allowClear&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,s)),d.multiple&&(d.selectionAdapter=c.Decorate(d.selectionAdapter,a)),null!=d.containerCssClass||null!=d.containerCss||null!=d.adaptContainerCssClass){var L=t(d.amdBase+"compat/containerCss");d.selectionAdapter=c.Decorate(d.selectionAdapter,L)}d.selectionAdapter=c.Decorate(d.selectionAdapter,l)}if("string"==typeof d.language)if(d.language.indexOf("-")>0){var j=d.language.split("-"),P=j[0];d.language=[d.language,P]}else d.language=[d.language];if(e.isArray(d.language)){var k=new u;d.language.push("en");for(var I=d.language,R=0;R<I.length;R++){var M=I[R],U={};try{U=u.loadPath(M)}catch(e){try{M=this.defaults.amdLanguageBase+M,U=u.loadPath(M)}catch(e){d.debug&&window.console&&console.warn&&console.warn('Select2: The language file for "'+M+'" could not be automatically loaded. A fallback will be used instead.');continue}}k.extend(U)}d.translations=k}else{var H=u.loadPath(this.defaults.amdLanguageBase+"en"),z=new u(d.language);z.extend(H),d.translations=z}return d},T.prototype.reset=function(){function t(e){function t(e){return d[e]||e}return e.replace(/[^\u0000-\u007E]/g,t)}function n(i,r){if(""===e.trim(i.term))return r;if(r.children&&r.children.length>0){for(var o=e.extend(!0,{},r),s=r.children.length-1;s>=0;s--){null==n(i,r.children[s])&&o.children.splice(s,1)}return o.children.length>0?o:n(i,o)}var a=t(r.text).toUpperCase(),l=t(i.term).toUpperCase();return a.indexOf(l)>-1?r:null}this.defaults={amdBase:"./",amdLanguageBase:"./i18n/",closeOnSelect:!0,debug:!1,dropdownAutoWidth:!1,escapeMarkup:c.escapeMarkup,language:S,matcher:n,minimumInputLength:0,maximumInputLength:0,maximumSelectionLength:0,minimumResultsForSearch:0,selectOnClose:!1,sorter:function(e){return e},templateResult:function(e){return e.text},templateSelection:function(e){return e.text},theme:"default",width:"resolve"}},T.prototype.set=function(t,n){var i=e.camelCase(t),r={};r[i]=n;var o=c._convertData(r);e.extend(this.defaults,o)},new T}),t.define("select2/options",["require","jquery","./defaults","./utils"],function(e,t,n,i){function r(t,r){if(this.options=t,null!=r&&this.fromElement(r),this.options=n.apply(this.options),r&&r.is("input")){var o=e(this.get("amdBase")+"compat/inputData");this.options.dataAdapter=i.Decorate(this.options.dataAdapter,o)}}return r.prototype.fromElement=function(e){var n=["select2"];null==this.options.multiple&&(this.options.multiple=e.prop("multiple")),null==this.options.disabled&&(this.options.disabled=e.prop("disabled")),null==this.options.language&&(e.prop("lang")?this.options.language=e.prop("lang").toLowerCase():e.closest("[lang]").prop("lang")&&(this.options.language=e.closest("[lang]").prop("lang"))),null==this.options.dir&&(e.prop("dir")?this.options.dir=e.prop("dir"):e.closest("[dir]").prop("dir")?this.options.dir=e.closest("[dir]").prop("dir"):this.options.dir="ltr"),e.prop("disabled",this.options.disabled),e.prop("multiple",this.options.multiple),e.data("select2Tags")&&(this.options.debug&&window.console&&console.warn&&console.warn('Select2: The `data-select2-tags` attribute has been changed to use the `data-data` and `data-tags="true"` attributes and will be removed in future versions of Select2.'),e.data("data",e.data("select2Tags")),e.data("tags",!0)),e.data("ajaxUrl")&&(this.options.debug&&window.console&&console.warn&&console.warn("Select2: The `data-ajax-url` attribute has been changed to `data-ajax--url` and support for the old attribute will be removed in future versions of Select2."),e.attr("ajax--url",e.data("ajaxUrl")),e.data("ajax--url",e.data("ajaxUrl")));var r={};r=t.fn.jquery&&"1."==t.fn.jquery.substr(0,2)&&e[0].dataset?t.extend(!0,{},e[0].dataset,e.data()):e.data();var o=t.extend(!0,{},r);o=i._convertData(o);for(var s in o)t.inArray(s,n)>-1||(t.isPlainObject(this.options[s])?t.extend(this.options[s],o[s]):this.options[s]=o[s]);return this},r.prototype.get=function(e){return this.options[e]},r.prototype.set=function(e,t){this.options[e]=t},r}),t.define("select2/core",["jquery","./options","./utils","./keys"],function(e,t,n,i){var r=function(e,n){null!=e.data("select2")&&e.data("select2").destroy(),this.$element=e,this.id=this._generateId(e),n=n||{},this.options=new t(n,e),r.__super__.constructor.call(this);var i=e.attr("tabindex")||0;e.data("old-tabindex",i),e.attr("tabindex","-1");var o=this.options.get("dataAdapter");this.dataAdapter=new o(e,this.options);var s=this.render();this._placeContainer(s);var a=this.options.get("selectionAdapter");this.selection=new a(e,this.options),this.$selection=this.selection.render(),this.selection.position(this.$selection,s);var l=this.options.get("dropdownAdapter");this.dropdown=new l(e,this.options),this.$dropdown=this.dropdown.render(),this.dropdown.position(this.$dropdown,s);var c=this.options.get("resultsAdapter");this.results=new c(e,this.options,this.dataAdapter),this.$results=this.results.render(),this.results.position(this.$results,this.$dropdown);var u=this;this._bindAdapters(),this._registerDomEvents(),this._registerDataEvents(),this._registerSelectionEvents(),this._registerDropdownEvents(),this._registerResultsEvents(),this._registerEvents(),this.dataAdapter.current(function(e){u.trigger("selection:update",{data:e})}),e.addClass("select2-hidden-accessible"),e.attr("aria-hidden","true"),this._syncAttributes(),e.data("select2",this)};return n.Extend(r,n.Observable),r.prototype._generateId=function(e){var t="";return t=null!=e.attr("id")?e.attr("id"):null!=e.attr("name")?e.attr("name")+"-"+n.generateChars(2):n.generateChars(4),t=t.replace(/(:|\.|\[|\]|,)/g,""),t="select2-"+t},r.prototype._placeContainer=function(e){e.insertAfter(this.$element);var t=this._resolveWidth(this.$element,this.options.get("width"));null!=t&&e.css("width",t)},r.prototype._resolveWidth=function(e,t){var n=/^width:(([-+]?([0-9]*\.)?[0-9]+)(px|em|ex|%|in|cm|mm|pt|pc))/i;if("resolve"==t){var i=this._resolveWidth(e,"style");return null!=i?i:this._resolveWidth(e,"element")}if("element"==t){var r=e.outerWidth(!1);return r<=0?"auto":r+"px"}if("style"==t){var o=e.attr("style");if("string"!=typeof o)return null;for(var s=o.split(";"),a=0,l=s.length;a<l;a+=1){var c=s[a].replace(/\s/g,""),u=c.match(n);if(null!==u&&u.length>=1)return u[1]}return null}return t},r.prototype._bindAdapters=function(){this.dataAdapter.bind(this,this.$container),this.selection.bind(this,this.$container),this.dropdown.bind(this,this.$container),this.results.bind(this,this.$container)},r.prototype._registerDomEvents=function(){var t=this;this.$element.on("change.select2",function(){t.dataAdapter.current(function(e){t.trigger("selection:update",{data:e})})}),this.$element.on("focus.select2",function(e){t.trigger("focus",e)}),this._syncA=n.bind(this._syncAttributes,this),this._syncS=n.bind(this._syncSubtree,this),this.$element[0].attachEvent&&this.$element[0].attachEvent("onpropertychange",this._syncA);var i=window.MutationObserver||window.WebKitMutationObserver||window.MozMutationObserver;null!=i?(this._observer=new i(function(n){e.each(n,t._syncA),e.each(n,t._syncS)}),this._observer.observe(this.$element[0],{attributes:!0,childList:!0,subtree:!1})):this.$element[0].addEventListener&&(this.$element[0].addEventListener("DOMAttrModified",t._syncA,!1),this.$element[0].addEventListener("DOMNodeInserted",t._syncS,!1),this.$element[0].addEventListener("DOMNodeRemoved",t._syncS,!1))},r.prototype._registerDataEvents=function(){var e=this;this.dataAdapter.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerSelectionEvents=function(){var t=this,n=["toggle","focus"];this.selection.on("toggle",function(){t.toggleDropdown()}),this.selection.on("focus",function(e){t.focus(e)}),this.selection.on("*",function(i,r){-1===e.inArray(i,n)&&t.trigger(i,r)})},r.prototype._registerDropdownEvents=function(){var e=this;this.dropdown.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerResultsEvents=function(){var e=this;this.results.on("*",function(t,n){e.trigger(t,n)})},r.prototype._registerEvents=function(){var e=this;this.on("open",function(){e.$container.addClass("select2-container--open")}),this.on("close",function(){e.$container.removeClass("select2-container--open")}),this.on("enable",function(){e.$container.removeClass("select2-container--disabled")}),this.on("disable",function(){e.$container.addClass("select2-container--disabled")}),this.on("blur",function(){e.$container.removeClass("select2-container--focus")}),this.on("query",function(t){e.isOpen()||e.trigger("open",{}),this.dataAdapter.query(t,function(n){e.trigger("results:all",{data:n,query:t})})}),this.on("query:append",function(t){this.dataAdapter.query(t,function(n){e.trigger("results:append",{data:n,query:t})})}),this.on("keypress",function(t){var n=t.which;e.isOpen()?n===i.ESC||n===i.TAB||n===i.UP&&t.altKey?(e.close(),t.preventDefault()):n===i.ENTER?(e.trigger("results:select",{}),t.preventDefault()):n===i.SPACE&&t.ctrlKey?(e.trigger("results:toggle",{}),t.preventDefault()):n===i.UP?(e.trigger("results:previous",{}),t.preventDefault()):n===i.DOWN&&(e.trigger("results:next",{}),t.preventDefault()):(n===i.ENTER||n===i.SPACE||n===i.DOWN&&t.altKey)&&(e.open(),t.preventDefault())})},r.prototype._syncAttributes=function(){this.options.set("disabled",this.$element.prop("disabled")),this.options.get("disabled")?(this.isOpen()&&this.close(),this.trigger("disable",{})):this.trigger("enable",{})},r.prototype._syncSubtree=function(e,t){var n=!1,i=this;if(!e||!e.target||"OPTION"===e.target.nodeName||"OPTGROUP"===e.target.nodeName){if(t)if(t.addedNodes&&t.addedNodes.length>0)for(var r=0;r<t.addedNodes.length;r++){var o=t.addedNodes[r];o.selected&&(n=!0)}else t.removedNodes&&t.removedNodes.length>0&&(n=!0);else n=!0;n&&this.dataAdapter.current(function(e){i.trigger("selection:update",{data:e})})}},r.prototype.trigger=function(e,t){var n=r.__super__.trigger,i={open:"opening",close:"closing",select:"selecting",unselect:"unselecting"};if(t===undefined&&(t={}),e in i){var o=i[e],s={prevented:!1,name:e,args:t};if(n.call(this,o,s),s.prevented)return void(t.prevented=!0)}n.call(this,e,t)},r.prototype.toggleDropdown=function(){this.options.get("disabled")||(this.isOpen()?this.close():this.open())},r.prototype.open=function(){this.isOpen()||this.trigger("query",{})},r.prototype.close=function(){this.isOpen()&&this.trigger("close",{})},r.prototype.isOpen=function(){return this.$container.hasClass("select2-container--open")},r.prototype.hasFocus=function(){
return this.$container.hasClass("select2-container--focus")},r.prototype.focus=function(){this.hasFocus()||(this.$container.addClass("select2-container--focus"),this.trigger("focus",{}))},r.prototype.enable=function(e){this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("enable")` method has been deprecated and will be removed in later Select2 versions. Use $element.prop("disabled") instead.'),null!=e&&0!==e.length||(e=[!0]);var t=!e[0];this.$element.prop("disabled",t)},r.prototype.data=function(){this.options.get("debug")&&arguments.length>0&&window.console&&console.warn&&console.warn('Select2: Data can no longer be set using `select2("data")`. You should consider setting the value instead using `$element.val()`.');var e=[];return this.dataAdapter.current(function(t){e=t}),e},r.prototype.val=function(t){if(this.options.get("debug")&&window.console&&console.warn&&console.warn('Select2: The `select2("val")` method has been deprecated and will be removed in later Select2 versions. Use $element.val() instead.'),null==t||0===t.length)return this.$element.val();var n=t[0];e.isArray(n)&&(n=e.map(n,function(e){return e.toString()})),this.$element.val(n).trigger("change")},r.prototype.destroy=function(){this.$container.remove(),this.$element[0].detachEvent&&this.$element[0].detachEvent("onpropertychange",this._syncA),null!=this._observer?(this._observer.disconnect(),this._observer=null):this.$element[0].removeEventListener&&(this.$element[0].removeEventListener("DOMAttrModified",this._syncA,!1),this.$element[0].removeEventListener("DOMNodeInserted",this._syncS,!1),this.$element[0].removeEventListener("DOMNodeRemoved",this._syncS,!1)),this._syncA=null,this._syncS=null,this.$element.off(".select2"),this.$element.attr("tabindex",this.$element.data("old-tabindex")),this.$element.removeClass("select2-hidden-accessible"),this.$element.attr("aria-hidden","false"),this.$element.removeData("select2"),this.dataAdapter.destroy(),this.selection.destroy(),this.dropdown.destroy(),this.results.destroy(),this.dataAdapter=null,this.selection=null,this.dropdown=null,this.results=null},r.prototype.render=function(){var t=e('<span class="select2 select2-container"><span class="selection"></span><span class="dropdown-wrapper" aria-hidden="true"></span></span>');return t.attr("dir",this.options.get("dir")),this.$container=t,this.$container.addClass("select2-container--"+this.options.get("theme")),t.data("element",this.$element),t},r}),t.define("jquery-mousewheel",["jquery"],function(e){return e}),t.define("jquery.select2",["jquery","jquery-mousewheel","./select2/core","./select2/defaults"],function(e,t,n,i){if(null==e.fn.select2){var r=["open","close","destroy"];e.fn.select2=function(t){if("object"==typeof(t=t||{}))return this.each(function(){var i=e.extend(!0,{},t);new n(e(this),i)}),this;if("string"==typeof t){var i,o=Array.prototype.slice.call(arguments,1);return this.each(function(){var n=e(this).data("select2");null==n&&window.console&&console.error&&console.error("The select2('"+t+"') method was called on an element that is not using Select2."),i=n[t].apply(n,o)}),e.inArray(t,r)>-1?this:i}throw new Error("Invalid arguments for Select2: "+t)}}return null==e.fn.select2.defaults&&(e.fn.select2.defaults=i),n}),{define:t.define,require:t.require}}(),n=t.require("jquery.select2");return e.fn.select2.amd=t,n});
//script: load select2
(function(){decko.slotReady(function(t){return t.find("select:not(._no-select2)").each(function(){return $(this).select2()})})}).call(this);